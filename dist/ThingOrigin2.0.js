/*! 中国科学院沈阳自动化研究所-3D引擎 by 李林
@license MIT 2025/7/17 10:08:13 */(()=>{var e={8366:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Viewer:()=>J});var r=n(9437);function i(e,t){this.object=e,this.domElement=void 0!==t?t:document,this.enabled=!0,this.target=new r.Vector3,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.noRotate=!1,this.rotateSpeed=1,this.noPan=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40};var n=this,i=new r.Vector2,s=new r.Vector2,o=new r.Vector2,a=new r.Vector2,c=new r.Vector2,l=new r.Vector2,u=new r.Vector3,h=new r.Vector3,d=new r.Vector2,p=new r.Vector2,f=new r.Vector2,m=1,g=new r.Vector3,A=(new r.Vector3,-1),y=0,_=1,v=2,b=3,x=4,w=5,E=A;this.target0=this.target.clone(),this.position0=this.object.position.clone();var T={type:"change"},S={type:"start"},M={type:"end"};function C(){return 2*Math.PI/60/60*n.autoRotateSpeed}function I(){return Math.pow(.95,n.zoomSpeed)}function R(e){if(!1!==n.enabled){e.preventDefault();var t=n.domElement===document?n.domElement.body:n.domElement;if(E===y){if(!0===n.noRotate)return;s.set(e.clientX,e.clientY),o.subVectors(s,i),n.rotateLeft(2*Math.PI*o.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*o.y/t.clientHeight*n.rotateSpeed),i.copy(s)}else if(E===_){if(!0===n.noZoom)return;p.set(e.clientX,e.clientY),f.subVectors(p,d),f.y>0?n.dollyIn():n.dollyOut(),d.copy(p)}else if(E===v){if(!0===n.noPan)return;c.set(e.clientX,e.clientY),l.subVectors(c,a),n.pan(l.x,l.y),a.copy(c)}n.update()}}function B(){!1!==n.enabled&&(n.domElement.removeEventListener("mousemove",R,!1),n.domElement.removeEventListener("mouseup",B,!1),n.dispatchEvent(M),E=A)}function P(e){if(!1!==n.enabled&&!0!==n.noZoom){e.preventDefault();var t=0;void 0!==e.wheelDelta?t=e.wheelDelta:void 0!==e.detail&&(t=-e.detail),t>0?n.dollyOut():n.dollyIn(),n.update(),n.dispatchEvent(S),n.dispatchEvent(M)}}this.rotateLeft=function(e){void 0===e&&(e=C())},this.rotateUp=function(e){void 0===e&&(e=C())},this.panLeft=function(e){var t=this.object.matrix.elements;u.set(t[0],t[1],t[2]),u.multiplyScalar(-e),g.add(u)},this.panUp=function(e){var t=this.object.matrix.elements;u.set(t[4],t[5],t[6]),u.multiplyScalar(e),g.add(u)},this.pan=function(e,t){var r=n.domElement===document?n.domElement.body:n.domElement;if(void 0!==n.object.fov){var i=n.object.position.clone().sub(n.target).length();i*=Math.tan(n.object.fov/2*Math.PI/180),n.panLeft(2*e*i/r.clientHeight),n.panUp(2*t*i/r.clientHeight)}else void 0!==n.object.top?(n.panLeft(e*(n.object.right-n.object.left)/r.clientWidth),n.panUp(t*(n.object.top-n.object.bottom)/r.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.dollyIn=function(e){void 0===e&&(e=I()),m/=e},this.dollyOut=function(e){void 0===e&&(e=I()),m*=e},this.update=function(){void 0!==n.object.top&&(this.object.top=m*this.object.top,this.object.bottom=m*this.object.bottom,this.object.left=m*this.object.left,this.object.right=m*this.object.right,this.object.updateProjectionMatrix());var e=this.object.position;h.copy(e).sub(this.target),this.target.add(g),e.copy(this.target).add(h),this.object.lookAt(this.target),this.dispatchEvent(T),m=1,g.set(0,0,0)},this.reset=function(){E=A,this.target.copy(this.target0),this.object.position.copy(this.position0),this.update()},this.domElement.addEventListener("contextmenu",(function(e){e.preventDefault()}),!1),this.domElement.addEventListener("mousedown",(function(e){if(!1!==n.enabled){if(e.preventDefault(),0===e.button){if(!0===n.noRotate)return;E=y,i.set(e.clientX,e.clientY)}else if(1===e.button){if(!0===n.noZoom)return;E=_,d.set(e.clientX,e.clientY)}else if(2===e.button){if(!0===n.noPan)return;E=v,a.set(e.clientX,e.clientY)}n.domElement.addEventListener("mousemove",R,!1),n.domElement.addEventListener("mouseup",B,!1),n.dispatchEvent(S)}}),!1),this.domElement.addEventListener("mousewheel",P,!1),this.domElement.addEventListener("DOMMouseScroll",P,!1),this.domElement.addEventListener("touchstart",(function(e){if(!1!==n.enabled){switch(e.touches.length){case 1:if(!0===n.noRotate)return;E=b,i.set(e.touches[0].pageX,e.touches[0].pageY);break;case 2:if(!0===n.noZoom)return;E=x;var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,s=Math.sqrt(t*t+r*r);d.set(0,s);break;case 3:if(!0===n.noPan)return;E=w,a.set(e.touches[0].pageX,e.touches[0].pageY);break;default:E=A}n.dispatchEvent(S)}}),!1),this.domElement.addEventListener("touchend",(function(){!1!==n.enabled&&(n.dispatchEvent(M),E=A)}),!1),this.domElement.addEventListener("touchmove",(function(e){if(!1!==n.enabled){e.preventDefault(),e.stopPropagation();var t=n.domElement===document?n.domElement.body:n.domElement;switch(e.touches.length){case 1:if(!0===n.noRotate)return;if(E!==b)return;s.set(e.touches[0].pageX,e.touches[0].pageY),o.subVectors(s,i),n.rotateLeft(2*Math.PI*o.x/t.clientWidth*n.rotateSpeed),n.rotateUp(2*Math.PI*o.y/t.clientHeight*n.rotateSpeed),i.copy(s),n.update();break;case 2:if(!0===n.noZoom)return;if(E!==x)return;var r=e.touches[0].pageX-e.touches[1].pageX,u=e.touches[0].pageY-e.touches[1].pageY,h=Math.sqrt(r*r+u*u);p.set(0,h),f.subVectors(p,d),f.y>0?n.dollyOut():n.dollyIn(),d.copy(p),n.update();break;case 3:if(!0===n.noPan)return;if(E!==w)return;c.set(e.touches[0].pageX,e.touches[0].pageY),l.subVectors(c,a),n.pan(l.x,l.y),a.copy(c),n.update();break;default:E=A}}}),!1),window.addEventListener("keydown",(function(e){if(!1!==n.enabled&&!0!==n.noKeys&&!0!==n.noPan)switch(e.keyCode){case n.keys.UP:n.pan(0,n.keyPanSpeed),n.update();break;case n.keys.BOTTOM:n.pan(0,-n.keyPanSpeed),n.update();break;case n.keys.LEFT:n.pan(n.keyPanSpeed,0),n.update();break;case n.keys.RIGHT:n.pan(-n.keyPanSpeed,0),n.update()}}),!1)}i.prototype=Object.create(r.EventDispatcher.prototype);const s=(e,t,n,r,i)=>{const s=n.length,o=n[0].length;if(e<0||e>1)throw new Error("t out of bounds [0,1]: "+e);if(t<1)throw new Error("degree must be at least 1 (linear)");if(t>s-1)throw new Error("degree must be less than or equal to point count - 1");if(!i){i=[];for(let e=0;e<s;e++)i[e]=1}if(r){if(r.length!==s+t+1)throw new Error("bad knot vector length")}else{r=[];for(let e=0;e<s+t+1;e++)r[e]=e}const a=[t,r.length-1-t],c=r[a[0]],l=r[a[1]];let u;for(e=e*(l-c)+c,e=Math.max(e,c),e=Math.min(e,l),u=a[0];u<a[1]&&!(e>=r[u]&&e<=r[u+1]);u++);const h=[];for(let e=0;e<s;e++){h[e]=[];for(let t=0;t<o;t++)h[e][t]=n[e][t]*i[e];h[e][o]=i[e]}let d;for(let n=1;n<=t+1;n++)for(let i=u;i>u-t-1+n;i--){d=(e-r[i])/(r[i+t+1-n]-r[i]);for(let e=0;e<o+1;e++)h[i][e]=(1-d)*h[i-1][e]+d*h[i][e]}const p=[];for(let e=0;e<o;e++)p[e]=(f=h[u][e]/h[u][o],void 0===(m=-9)||0===+m?Math.round(f):(f=+f,m=+m,isNaN(f)||"number"!=typeof m||m%1!=0?NaN:(f=f.toString().split("e"),+((f=(f=Math.round(+(f[0]+"e"+(f[1]?+f[1]-m:-m)))).toString().split("e"))[0]+"e"+(f[1]?+f[1]+m:m)))));var f,m;return p};function o(){var e,t=0,n=[],r=0,i=0;var s=p((function(e){i||c(1,e)})),a=p((function(e){i||c(-1,e)}));function c(n,r){i++;var s=0;try{r===g&&f();var o=n>0&&d(r);o?o.call(r,p((function(e){s++,c(1,e)})),p((function(e){s++,c(-1,e)}))):(t=n,e=r,l())}catch(e){t||s||c(-1,e)}}function l(){r||(setTimeout(u,0),r=1)}function u(){var e=n;r=0,n=[],e.forEach(h)}function h(e){e()}function d(e){var t=e&&(m(e)||"object"==typeof e)&&e.then;return m(t)&&t}function p(e){var t=0;return function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];t++||e.apply(this,n)}}function f(){throw new TypeError("Chaining cycle detected")}var m=function(e){return"function"==typeof e},g={then:function(r,i){var s=o();return n.push((function(){var n=t>0?r:i;if(m(n))try{var o=n(e);o===s&&f();var a=d(o);a?a.call(o,s.resolve,s.reject):s.resolve(o)}catch(e){s.reject(e)}else s[t>0?"resolve":"reject"](e)})),t&&l(),s},resolve:s,reject:a};return g}function a(){var e,t,n=new Promise((function(n,r){e=n,t=r}));return{then:n.then.bind(n),resolve:e,reject:t}}o.all=a.all=function(e){var t=0,n=[],r=c();return 0===e.length?r.resolve([]):e.forEach((function(i,s){var o=c();o.resolve(i),o.then((function(i){t++,n[s]=i,t===e.length&&r.resolve(n)}),r.reject)})),r};var c="function"==typeof Promise?a:o;function l(){var e=Object.create(null);function t(r,i){var s=r.id,o=r.name,a=r.dependencies;void 0===a&&(a=[]);var c=r.init;void 0===c&&(c=function(){});var l=r.getTransferables;if(void 0===l&&(l=null),!e[s])try{a=a.map((function(n){return n&&n.isWorkerModule&&(t(n,(function(e){if(e instanceof Error)throw e})),n=e[n.id].value),n})),c=n("<"+o+">.init",c),l&&(l=n("<"+o+">.getTransferables",l));var u=null;"function"==typeof c?u=c.apply(void 0,a):console.error("worker module init function failed to rehydrate"),e[s]={id:s,value:u,getTransferables:l},i(u)}catch(e){e&&e.noLog||console.error(e),i(e)}}function n(e,t){var n=void 0;self.troikaDefine=function(e){return n=e};var r=URL.createObjectURL(new Blob(["/** "+e.replace(/\*/g,"")+" **/\n\ntroikaDefine(\n"+t+"\n)"],{type:"application/javascript"}));try{importScripts(r)}catch(e){console.error(e)}return URL.revokeObjectURL(r),delete self.troikaDefine,n}self.addEventListener("message",(function(n){var r=n.data,i=r.messageId,s=r.action,o=r.data;try{"registerModule"===s&&t(o,(function(e){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:{isCallable:"function"==typeof e}})})),"callModule"===s&&function(t,n){var r,i=t.id,s=t.args;e[i]&&"function"==typeof e[i].value||n(new Error("Worker module "+i+": not found or its 'init' did not return a function"));try{var o=(r=e[i]).value.apply(r,s);o&&"function"==typeof o.then?o.then(a,(function(e){return n(e instanceof Error?e:new Error(""+e))})):a(o)}catch(e){n(e)}function a(t){try{var r=e[i].getTransferables&&e[i].getTransferables(t);r&&Array.isArray(r)&&r.length||(r=void 0),n(t,r)}catch(e){console.error(e),n(e)}}}(o,(function(e,t){e instanceof Error?postMessage({messageId:i,success:!1,error:e.message}):postMessage({messageId:i,success:!0,result:e},t||void 0)}))}catch(e){postMessage({messageId:i,success:!1,error:e.stack})}}))}var u=function(){var e=!1;if("undefined"!=typeof window&&void 0!==window.document)try{new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"}))).terminate(),e=!0}catch(e){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+e.message+"]")}return u=function(){return e},e},h=0,d=0,p=!1,f=Object.create(null),m=function(){var e=Object.create(null);return e._count=0,e}();function g(e){if(!(e&&"function"==typeof e.init||p))throw new Error("requires `options.init` function");var t=e.dependencies,n=e.init,r=e.getTransferables,i=e.workerId;if(!u())return function(e){var t=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];return t._getInitResult().then((function(t){if("function"==typeof t)return t.apply(void 0,e);throw new Error("Worker module function was called but `init` did not return a callable function")}))};return t._getInitResult=function(){var n=e.dependencies,r=e.init;n=Array.isArray(n)?n.map((function(e){return e&&e._getInitResult?e._getInitResult():e})):[];var i=c.all(n).then((function(e){return r.apply(null,e)}));return t._getInitResult=function(){return i},i},t}(e);null==i&&(i="#default");var s="workerModule"+ ++h,o=e.name||s,a=null;function l(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];return a||(a=y(i,"registerModule",l.workerModuleData)),a.then((function(t){if(t.isCallable)return y(i,"callModule",{id:s,args:e});throw new Error("Worker module function was called but `init` did not return a callable function")}))}return t=t&&t.map((function(e){return"function"!=typeof e||e.workerModuleData||(p=!0,e=g({workerId:i,name:"<"+o+"> function dependency: "+e.name,init:"function(){return (\n"+A(e)+"\n)}"}),p=!1),e&&e.workerModuleData&&(e=e.workerModuleData),e})),l.workerModuleData={isWorkerModule:!0,id:s,name:o,dependencies:t,init:A(n),getTransferables:r&&A(r)},l}function A(e){var t=e.toString();return!/^function/.test(t)&&/^\w+\s*\(/.test(t)&&(t="function "+t),t}function y(e,t,n){var r=c(),i=++d;return m[i]=function(e){e.success?r.resolve(e.result):r.reject(new Error("Error in worker "+t+" call: "+e.error))},m._count++,m._count>1e3&&console.warn("Large number of open WorkerModule requests, some may not be returning"),function(e){var t=f[e];if(!t){var n=A(l);(t=f[e]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+e.replace(/\*/g,"")+" **/\n\n;("+n+")()"],{type:"application/javascript"})))).onmessage=function(e){var t=e.data,n=t.messageId,r=m[n];if(!r)throw new Error("WorkerModule response with empty or unknown messageId");delete m[n],m._count--,r(t)}}return t}(e).postMessage({messageId:i,action:t,data:n}),r}var _=g({name:"Thenable",dependencies:[c],init:function(e){return e}});const v=function(){return function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},n={},r={};n.L=1,r[1]="L",Object.keys(t).forEach((function(e,t){n[e]=1<<t+1,r[n[e]]=e})),Object.freeze(n);var i=n.LRI|n.RLI|n.FSI,s=n.L|n.R|n.AL,o=n.B|n.S|n.WS|n.ON|n.FSI|n.LRI|n.RLI|n.PDI,a=n.BN|n.RLE|n.LRE|n.RLO|n.LRO|n.PDF,c=n.S|n.WS|n.B|i|n.PDI|a,l=null;function u(e){return function(){if(!l){l=new Map;var e=function(e){if(t.hasOwnProperty(e)){var r=0;t[e].split(",").forEach((function(t){var i=t.split("+"),s=i[0],o=i[1];s=parseInt(s,36),o=o?parseInt(o,36):0,l.set(r+=s,n[e]);for(var a=0;a<o;a++)l.set(++r,n[e])}))}};for(var r in t)e(r)}}(),l.get(e.codePointAt(0))||n.L}var h,d,p,f="14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",m="6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye";function g(e,t){var n,r=0,i=new Map,s=t&&new Map;return e.split(",").forEach((function e(o){if(-1!==o.indexOf("+"))for(var a=+o;a--;)e(n);else{n=o;var c=o.split(">"),l=c[0],u=c[1];l=String.fromCodePoint(r+=parseInt(l,36)),u=String.fromCodePoint(r+=parseInt(u,36)),i.set(l,u),t&&s.set(u,l)}})),{map:i,reverseMap:s}}function A(){if(!h){var e=g(f,!0),t=e.map,n=e.reverseMap;h=t,d=n,p=g(m,!1).map}}function y(e){return A(),h.get(e)||null}function _(e){return A(),d.get(e)||null}function v(e){return A(),p.get(e)||null}var b=n.L,x=n.R,w=n.EN,E=n.ES,T=n.ET,S=n.AN,M=n.CS,C=n.B,I=n.S,R=n.ON,B=n.BN,P=n.NSM,D=n.AL,O=n.LRO,L=n.RLO,N=n.LRE,F=n.RLE,U=n.PDF,k=n.LRI,z=n.RLI,G=n.FSI,j=n.PDI;var V;function Q(e){return function(){if(!V){var e=g("14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",!0),t=e.map;e.reverseMap.forEach((function(e,n){t.set(n,e)})),V=t}}(),V.get(e)||null}function H(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);var s=[];return t.paragraphs.forEach((function(i){var o=Math.max(n,i.start),a=Math.min(r,i.end);if(o<a){for(var l=t.levels.slice(o,a+1),h=a;h>=o&&u(e[h])&c;h--)l[h]=i.level;for(var d=i.level,p=1/0,f=0;f<l.length;f++){var m=l[f];m>d&&(d=m),m<p&&(p=1|m)}for(var g=d;g>=p;g--)for(var A=0;A<l.length;A++)if(l[A]>=g){for(var y=A;A+1<l.length&&l[A+1]>=g;)A++;A>y&&s.push([y+o,A+o])}}})),s}function W(e,t,n,r){for(var i=H(e,t,n,r),s=[],o=0;o<e.length;o++)s[o]=o;return i.forEach((function(e){for(var t=e[0],n=e[1],r=s.slice(t,n+1),i=r.length;i--;)s[n-i]=r[i]})),s}return e.closingToOpeningBracket=_,e.getBidiCharType=u,e.getBidiCharTypeName=function(e){return r[u(e)]},e.getCanonicalBracket=v,e.getEmbeddingLevels=function(e,t){for(var n=new Uint32Array(e.length),r=0;r<e.length;r++)n[r]=u(e[r]);var l=new Map;function h(e,t){var r=n[e];n[e]=t,l.set(r,l.get(r)-1),r&o&&l.set(o,l.get(o)-1),l.set(t,(l.get(t)||0)+1),t&o&&l.set(o,(l.get(o)||0)+1)}for(var d=new Uint8Array(e.length),p=new Map,f=[],m=null,g=0;g<e.length;g++)m||f.push(m={start:g,end:e.length-1,level:"rtl"===t?1:"ltr"===t?0:Gt(g,!1)}),n[g]&C&&(m.end=g,m=null);for(var A=F|N|L|O|i|j|U|C,V=function(e){return e+(1&e?1:2)},Q=function(e){return e+(1&e?2:1)},H=0;H<f.length;H++){var W=[{_level:(m=f[H]).level,_override:0,_isolate:0}],q=void 0,X=0,K=0,Y=0;l.clear();for(var J=m.start;J<=m.end;J++){var $=n[J];if(q=W[W.length-1],l.set($,(l.get($)||0)+1),$&o&&l.set(o,(l.get(o)||0)+1),$&A)if($&(F|N)){d[J]=q._level;var Z=($===F?Q:V)(q._level);Z<=125&&!X&&!K?W.push({_level:Z,_override:0,_isolate:0}):X||K++}else if($&(L|O)){d[J]=q._level;var ee=($===L?Q:V)(q._level);ee<=125&&!X&&!K?W.push({_level:ee,_override:$&L?x:b,_isolate:0}):X||K++}else if($&i){$&G&&($=1===Gt(J+1,!0)?z:k),d[J]=q._level,q._override&&h(J,q._override);var te=($===z?Q:V)(q._level);te<=125&&0===X&&0===K?(Y++,W.push({_level:te,_override:0,_isolate:1,_isolInitIndex:J})):X++}else if($&j){if(X>0)X--;else if(Y>0){for(K=0;!W[W.length-1]._isolate;)W.pop();var ne=W[W.length-1]._isolInitIndex;null!=ne&&(p.set(ne,J),p.set(J,ne)),W.pop(),Y--}q=W[W.length-1],d[J]=q._level,q._override&&h(J,q._override)}else $&U?(0===X&&(K>0?K--:!q._isolate&&W.length>1&&(W.pop(),q=W[W.length-1])),d[J]=q._level):$&C&&(d[J]=m.level);else d[J]=q._level,q._override&&$!==B&&h(J,q._override)}for(var re=[],ie=null,se=m.start;se<=m.end;se++){var oe=n[se];if(!(oe&a)){var ae=d[se],ce=oe&i,le=oe===j;ie&&ae===ie._level?(ie._end=se,ie._endsWithIsolInit=ce):re.push(ie={_start:se,_end:se,_level:ae,_startsWithPDI:le,_endsWithIsolInit:ce})}}for(var ue=[],he=0;he<re.length;he++){var de=re[he];if(!de._startsWithPDI||de._startsWithPDI&&!p.has(de._start)){for(var pe=[ie=de],fe=void 0;ie&&ie._endsWithIsolInit&&null!=(fe=p.get(ie._end));)for(var me=he+1;me<re.length;me++)if(re[me]._start===fe){pe.push(ie=re[me]);break}for(var ge=[],Ae=0;Ae<pe.length;Ae++)for(var ye=pe[Ae],_e=ye._start;_e<=ye._end;_e++)ge.push(_e);for(var ve=d[ge[0]],be=m.level,xe=ge[0]-1;xe>=0;xe--)if(!(n[xe]&a)){be=d[xe];break}var we=ge[ge.length-1],Ee=d[we],Te=m.level;if(!(n[we]&i))for(var Se=we+1;Se<=m.end;Se++)if(!(n[Se]&a)){Te=d[Se];break}ue.push({_seqIndices:ge,_sosType:Math.max(be,ve)%2?x:b,_eosType:Math.max(Te,Ee)%2?x:b})}}for(var Me=0;Me<ue.length;Me++){var Ce=ue[Me],Ie=Ce._seqIndices,Re=Ce._sosType,Be=Ce._eosType,Pe=1&d[Ie[0]]?x:b;if(l.get(P))for(var De=0;De<Ie.length;De++){var Oe=Ie[De];if(n[Oe]&P){for(var Le=Re,Ne=De-1;Ne>=0;Ne--)if(!(n[Ie[Ne]]&a)){Le=n[Ie[Ne]];break}h(Oe,Le&(i|j)?R:Le)}}if(l.get(w))for(var Fe=0;Fe<Ie.length;Fe++){var Ue=Ie[Fe];if(n[Ue]&w)for(var ke=Fe-1;ke>=-1;ke--){var ze=-1===ke?Re:n[Ie[ke]];if(ze&s){ze===D&&h(Ue,S);break}}}if(l.get(D))for(var Ge=0;Ge<Ie.length;Ge++){var je=Ie[Ge];n[je]&D&&h(je,x)}if(l.get(E)||l.get(M))for(var Ve=1;Ve<Ie.length-1;Ve++){var Qe=Ie[Ve];if(n[Qe]&(E|M)){for(var He=0,We=0,qe=Ve-1;qe>=0&&(He=n[Ie[qe]])&a;qe--);for(var Xe=Ve+1;Xe<Ie.length&&(We=n[Ie[Xe]])&a;Xe++);He===We&&(n[Qe]===E?He===w:He&(w|S))&&h(Qe,He)}}if(l.get(w))for(var Ke=0;Ke<Ie.length;Ke++){var Ye=Ie[Ke];if(n[Ye]&w){for(var Je=Ke-1;Je>=0&&n[Ie[Je]]&(T|a);Je--)h(Ie[Je],w);for(Ke++;Ke<Ie.length&&n[Ie[Ke]]&(T|a|w);Ke++)n[Ie[Ke]]!==w&&h(Ie[Ke],w)}}if(l.get(T)||l.get(E)||l.get(M))for(var $e=0;$e<Ie.length;$e++){var Ze=Ie[$e];if(n[Ze]&(T|E|M)){h(Ze,R);for(var et=$e-1;et>=0&&n[Ie[et]]&a;et--)h(Ie[et],R);for(var tt=$e+1;tt<Ie.length&&n[Ie[tt]]&a;tt++)h(Ie[tt],R)}}if(l.get(w))for(var nt=0,rt=Re;nt<Ie.length;nt++){var it=Ie[nt],st=n[it];st&w?rt===b&&h(it,b):st&s&&(rt=st)}if(l.get(o)){for(var ot=x|w|S,at=ot|b,ct=[],lt=[],ut=0;ut<Ie.length;ut++)if(n[Ie[ut]]&o){var ht=e[Ie[ut]],dt=void 0;if(null!==y(ht)){if(!(lt.length<63))break;lt.push({char:ht,seqIndex:ut})}else if(null!==(dt=_(ht)))for(var pt=lt.length-1;pt>=0;pt--){var ft=lt[pt].char;if(ft===dt||ft===_(v(ht))||y(v(ft))===ht){ct.push([lt[pt].seqIndex,ut]),lt.length=pt;break}}}ct.sort((function(e,t){return e[0]-t[0]}));for(var mt=0;mt<ct.length;mt++){for(var gt=ct[mt],At=gt[0],yt=gt[1],_t=!1,vt=0,bt=At+1;bt<yt;bt++){var xt=Ie[bt];if(n[xt]&at){_t=!0;var wt=n[xt]&ot?x:b;if(wt===Pe){vt=wt;break}}}if(_t&&!vt){vt=Re;for(var Et=At-1;Et>=0;Et--){var Tt=Ie[Et];if(n[Tt]&at){var St=n[Tt]&ot?x:b;vt=St!==Pe?St:Pe;break}}}if(vt){if(n[Ie[At]]=n[Ie[yt]]=vt,vt!==Pe)for(var Mt=At+1;Mt<Ie.length;Mt++)if(!(n[Ie[Mt]]&a)){u(e[Ie[Mt]])&P&&(n[Ie[Mt]]=vt);break}if(vt!==Pe)for(var Ct=yt+1;Ct<Ie.length;Ct++)if(!(n[Ie[Ct]]&a)){u(e[Ie[Ct]])&P&&(n[Ie[Ct]]=vt);break}}}for(var It=0;It<Ie.length;It++)if(n[Ie[It]]&o){for(var Rt=It,Bt=It,Pt=Re,Dt=It-1;Dt>=0;Dt--){if(!(n[Ie[Dt]]&a)){Pt=n[Ie[Dt]]&ot?x:b;break}Rt=Dt}for(var Ot=Be,Lt=It+1;Lt<Ie.length;Lt++){if(!(n[Ie[Lt]]&(o|a))){Ot=n[Ie[Lt]]&ot?x:b;break}Bt=Lt}for(var Nt=Rt;Nt<=Bt;Nt++)n[Ie[Nt]]=Pt===Ot?Pt:Pe;It=Bt}}}for(var Ft=m.start;Ft<=m.end;Ft++){var Ut=d[Ft],kt=n[Ft];if(1&Ut?kt&(b|w|S)&&d[Ft]++:kt&x?d[Ft]++:kt&(S|w)&&(d[Ft]+=2),kt&a&&(d[Ft]=0===Ft?m.level:d[Ft-1]),Ft===m.end||u(e[Ft])&(I|C))for(var zt=Ft;zt>=0&&u(e[zt])&c;zt--)d[zt]=m.level}}return{levels:d,paragraphs:f};function Gt(t,r){for(var s=t;s<e.length;s++){var o=n[s];if(o&(x|D))return 1;if(o&(C|b)||r&&o===j)return 0;if(o&i){var a=jt(s);s=-1===a?e.length:a}}return 0}function jt(t){for(var r=1,s=t+1;s<e.length;s++){var o=n[s];if(o&C)break;if(o&j){if(0===--r)return s}else o&i&&r++}return-1}},e.getMirroredCharacter=Q,e.getMirroredCharactersMap=function(e,t,n,r){var i=e.length;n=Math.max(0,null==n?0:+n),r=Math.min(i-1,null==r?i-1:+r);for(var s=new Map,o=n;o<=r;o++)if(1&t[o]){var a=Q(e[o]);null!==a&&s.set(o,a)}return s},e.getReorderSegments=H,e.getReorderedIndices=W,e.getReorderedString=function(e,t,n,r){var i=W(e,t,n,r),s=[].concat(e);return i.forEach((function(n,r){s[r]=(1&t.levels[n]?Q(e[n]):null)||e[n]})),s.join("")},e.openingToClosingBracket=y,Object.defineProperty(e,"__esModule",{value:!0}),e}({})},b=/\bvoid\s+main\s*\(\s*\)\s*{/g;function x(e){return e.replace(/^[ \t]*#include +<([\w\d./]+)>/gm,(function(e,t){let n=r.ShaderChunk[t];return n?x(n):e}))}const w=[];for(let e=0;e<256;e++)w[e]=(e<16?"0":"")+e.toString(16);const E=Object.assign||function(){let e=arguments[0];for(let t=1,n=arguments.length;t<n;t++){let n=arguments[t];if(n)for(let t in n)n.hasOwnProperty(t)&&(e[t]=n[t])}return e},T=Date.now(),S=new WeakMap,M=new Map;let C=1e10;function I(e,t){const n=function(e){const t=JSON.stringify(e,B);let n=D.get(t);null==n&&D.set(t,n=++P);return n}(t);let i=S.get(e);if(i||S.set(e,i=Object.create(null)),i[n])return new i[n];const s=`_onBeforeCompile${n}`,o=function(r){e.onBeforeCompile.call(this,r);const i=n+"|||"+r.vertexShader+"|||"+r.fragmentShader;let o=M[i];if(!o){const e=function({vertexShader:e,fragmentShader:t},n,r){let{vertexDefs:i,vertexMainIntro:s,vertexMainOutro:o,vertexTransform:a,fragmentDefs:c,fragmentMainIntro:l,fragmentMainOutro:u,fragmentColorTransform:h,customRewriter:d,timeUniform:p}=n;i=i||"",s=s||"",o=o||"",c=c||"",l=l||"",u=u||"",(a||d)&&(e=x(e));(h||d)&&(t=x(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|fog|premultiplied_alpha|dithering)_fragment)>/gm,"\n//!BEGIN_POST_CHUNK $1\n$&\n//!END_POST_CHUNK\n")));if(d){let n=d({vertexShader:e,fragmentShader:t});e=n.vertexShader,t=n.fragmentShader}if(h){let e=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,(t=>(e.push(t),""))),u=`${h}\n${e.join("\n")}\n${u}`}if(p){const e=`\nuniform float ${p};\n`;i=e+i,c=e+c}a&&(i=`${i}\nvoid troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {\n  ${a}\n}\n`,s=`\ntroika_position_${r} = vec3(position);\ntroika_normal_${r} = vec3(normal);\ntroika_uv_${r} = vec2(uv);\ntroikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});\n${s}\n`,e=(e=`vec3 troika_position_${r};\nvec3 troika_normal_${r};\nvec2 troika_uv_${r};\n${e}\n`).replace(/\b(position|normal|uv)\b/g,((e,t,n,i)=>/\battribute\s+vec[23]\s+$/.test(i.substr(0,n))?t:`troika_${t}_${r}`)));return e=R(e,r,i,s,o),t=R(t,r,c,l,u),{vertexShader:e,fragmentShader:t}}(r,t,n);o=M[i]=e}r.vertexShader=o.vertexShader,r.fragmentShader=o.fragmentShader,E(r.uniforms,this.uniforms),t.timeUniform&&(r.uniforms[t.timeUniform]={get value(){return Date.now()-T}}),this[s]&&this[s](r)},a=function(){return c(t.chained?e:e.clone())},c=function(r){const i=Object.create(r,l);return Object.defineProperty(i,"baseMaterial",{value:e}),Object.defineProperty(i,"id",{value:C++}),i.uuid=function(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(w[255&e]+w[e>>8&255]+w[e>>16&255]+w[e>>24&255]+"-"+w[255&t]+w[t>>8&255]+"-"+w[t>>16&15|64]+w[t>>24&255]+"-"+w[63&n|128]+w[n>>8&255]+"-"+w[n>>16&255]+w[n>>24&255]+w[255&r]+w[r>>8&255]+w[r>>16&255]+w[r>>24&255]).toUpperCase()}(),i.uniforms=E({},r.uniforms,t.uniforms),i.defines=E({},r.defines,t.defines),i.defines[`TROIKA_DERIVED_MATERIAL_${n}`]="",i.extensions=E({},r.extensions,t.extensions),i._listeners=void 0,i},l={constructor:{value:a},isDerivedMaterial:{value:!0},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n}},onBeforeCompile:{get:()=>o,set(e){this[s]=e}},copy:{writable:!0,configurable:!0,value:function(t){return e.copy.call(this,t),e.isShaderMaterial||e.isDerivedMaterial||(E(this.extensions,t.extensions),E(this.defines,t.defines),E(this.uniforms,r.UniformsUtils.clone(t.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const t=new e.constructor;return c(t).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let n=this._depthMaterial;return n||(n=this._depthMaterial=I(e.isDerivedMaterial?e.getDepthMaterial():new r.MeshDepthMaterial({depthPacking:r.RGBADepthPacking}),t),n.defines.IS_DEPTH_MATERIAL="",n.uniforms=this.uniforms),n}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let n=this._distanceMaterial;return n||(n=this._distanceMaterial=I(e.isDerivedMaterial?e.getDistanceMaterial():new r.MeshDistanceMaterial,t),n.defines.IS_DISTANCE_MATERIAL="",n.uniforms=this.uniforms),n}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:t,_distanceMaterial:n}=this;t&&t.dispose(),n&&n.dispose(),e.dispose.call(this)}}};return i[n]=a,new a}function R(e,t,n,r,i){return(r||i||n)&&(e=e.replace(b,`\n${n}\nvoid troikaOrigMain${t}() {`),e+=`\nvoid main() {\n  ${r}\n  troikaOrigMain${t}();\n  ${i}\n}`),e}function B(e,t){return"uniforms"===e?void 0:"function"==typeof t?t.toString():t}let P=0;const D=new Map;r.DoubleSide;r.Mesh;const O=g({name:"Typr Font Parser",dependencies:[function(){return"undefined"==typeof window&&(self.window=self),function(e){var t={parse:function(e){var n=t._bin,r=new Uint8Array(e);if("ttcf"==n.readASCII(r,0,4)){var i=4;n.readUshort(r,i),i+=2,n.readUshort(r,i),i+=2;var s=n.readUint(r,i);i+=4;for(var o=[],a=0;a<s;a++){var c=n.readUint(r,i);i+=4,o.push(t._readFont(r,c))}return o}return[t._readFont(r,0)]},_readFont:function(e,n){var r=t._bin,i=n;r.readFixed(e,n),n+=4;var s=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2;for(var o=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GPOS","GSUB","SVG "],a={_data:e,_offset:i},c={},l=0;l<s;l++){var u=r.readASCII(e,n,4);n+=4,r.readUint(e,n),n+=4;var h=r.readUint(e,n);n+=4;var d=r.readUint(e,n);n+=4,c[u]={offset:h,length:d}}for(l=0;l<o.length;l++){var p=o[l];c[p]&&(a[p.trim()]=t[p.trim()].parse(e,c[p].offset,c[p].length,a))}return a},_tabOffset:function(e,n,r){for(var i=t._bin,s=i.readUshort(e,r+4),o=r+12,a=0;a<s;a++){var c=i.readASCII(e,o,4);o+=4,i.readUint(e,o),o+=4;var l=i.readUint(e,o);if(o+=4,i.readUint(e,o),o+=4,c==n)return l}return 0}};t._bin={readFixed:function(e,t){return(e[t]<<8|e[t+1])+(e[t+2]<<8|e[t+3])/65540},readF2dot14:function(e,n){return t._bin.readShort(e,n)/16384},readInt:function(e,n){var r=t._bin.t.uint8;return r[0]=e[n+3],r[1]=e[n+2],r[2]=e[n+1],r[3]=e[n],t._bin.t.int32[0]},readInt8:function(e,n){return t._bin.t.uint8[0]=e[n],t._bin.t.int8[0]},readShort:function(e,n){var r=t._bin.t.uint8;return r[1]=e[n],r[0]=e[n+1],t._bin.t.int16[0]},readUshort:function(e,t){return e[t]<<8|e[t+1]},readUshorts:function(e,n,r){for(var i=[],s=0;s<r;s++)i.push(t._bin.readUshort(e,n+2*s));return i},readUint:function(e,n){var r=t._bin.t.uint8;return r[3]=e[n],r[2]=e[n+1],r[1]=e[n+2],r[0]=e[n+3],t._bin.t.uint32[0]},readUint64:function(e,n){return 4294967296*t._bin.readUint(e,n)+t._bin.readUint(e,n+4)},readASCII:function(e,t,n){for(var r="",i=0;i<n;i++)r+=String.fromCharCode(e[t+i]);return r},readUnicode:function(e,t,n){for(var r="",i=0;i<n;i++){var s=e[t++]<<8|e[t++];r+=String.fromCharCode(s)}return r},_tdec:"undefined"!=typeof window&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(e,n,r){var i=t._bin._tdec;return i&&0==n&&r==e.length?i.decode(e):t._bin.readASCII(e,n,r)},readBytes:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(e[t+i]);return r},readASCIIArray:function(e,t,n){for(var r=[],i=0;i<n;i++)r.push(String.fromCharCode(e[t+i]));return r}},t._bin.t={buff:new ArrayBuffer(8)},t._bin.t.int8=new Int8Array(t._bin.t.buff),t._bin.t.uint8=new Uint8Array(t._bin.t.buff),t._bin.t.int16=new Int16Array(t._bin.t.buff),t._bin.t.uint16=new Uint16Array(t._bin.t.buff),t._bin.t.int32=new Int32Array(t._bin.t.buff),t._bin.t.uint32=new Uint32Array(t._bin.t.buff),t._lctf={},t._lctf.parse=function(e,n,r,i,s){var o=t._bin,a={},c=n;o.readFixed(e,n),n+=4;var l=o.readUshort(e,n);n+=2;var u=o.readUshort(e,n);n+=2;var h=o.readUshort(e,n);return n+=2,a.scriptList=t._lctf.readScriptList(e,c+l),a.featureList=t._lctf.readFeatureList(e,c+u),a.lookupList=t._lctf.readLookupList(e,c+h,s),a},t._lctf.readLookupList=function(e,n,r){var i=t._bin,s=n,o=[],a=i.readUshort(e,n);n+=2;for(var c=0;c<a;c++){var l=i.readUshort(e,n);n+=2;var u=t._lctf.readLookupTable(e,s+l,r);o.push(u)}return o},t._lctf.readLookupTable=function(e,n,r){var i=t._bin,s=n,o={tabs:[]};o.ltype=i.readUshort(e,n),n+=2,o.flag=i.readUshort(e,n),n+=2;var a=i.readUshort(e,n);n+=2;for(var c=o.ltype,l=0;l<a;l++){var u=i.readUshort(e,n);n+=2;var h=r(e,c,s+u,o);o.tabs.push(h)}return o},t._lctf.numOfOnes=function(e){for(var t=0,n=0;n<32;n++)e>>>n&1&&t++;return t},t._lctf.readClassDef=function(e,n){var r=t._bin,i=[],s=r.readUshort(e,n);if(n+=2,1==s){var o=r.readUshort(e,n);n+=2;var a=r.readUshort(e,n);n+=2;for(var c=0;c<a;c++)i.push(o+c),i.push(o+c),i.push(r.readUshort(e,n)),n+=2}if(2==s){var l=r.readUshort(e,n);for(n+=2,c=0;c<l;c++)i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2,i.push(r.readUshort(e,n)),n+=2}return i},t._lctf.getInterval=function(e,t){for(var n=0;n<e.length;n+=3){var r=e[n],i=e[n+1];if(e[n+2],r<=t&&t<=i)return n}return-1},t._lctf.readCoverage=function(e,n){var r=t._bin,i={};i.fmt=r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);return n+=2,1==i.fmt&&(i.tab=r.readUshorts(e,n,s)),2==i.fmt&&(i.tab=r.readUshorts(e,n,3*s)),i},t._lctf.coverageIndex=function(e,n){var r=e.tab;if(1==e.fmt)return r.indexOf(n);if(2==e.fmt){var i=t._lctf.getInterval(r,n);if(-1!=i)return r[i+2]+(n-r[i])}return-1},t._lctf.readFeatureList=function(e,n){var r=t._bin,i=n,s=[],o=r.readUshort(e,n);n+=2;for(var a=0;a<o;a++){var c=r.readASCII(e,n,4);n+=4;var l=r.readUshort(e,n);n+=2;var u=t._lctf.readFeatureTable(e,i+l);u.tag=c.trim(),s.push(u)}return s},t._lctf.readFeatureTable=function(e,n){var r=t._bin,i=n,s={},o=r.readUshort(e,n);n+=2,o>0&&(s.featureParams=i+o);var a=r.readUshort(e,n);n+=2,s.tab=[];for(var c=0;c<a;c++)s.tab.push(r.readUshort(e,n+2*c));return s},t._lctf.readScriptList=function(e,n){var r=t._bin,i=n,s={},o=r.readUshort(e,n);n+=2;for(var a=0;a<o;a++){var c=r.readASCII(e,n,4);n+=4;var l=r.readUshort(e,n);n+=2,s[c.trim()]=t._lctf.readScriptTable(e,i+l)}return s},t._lctf.readScriptTable=function(e,n){var r=t._bin,i=n,s={},o=r.readUshort(e,n);n+=2,s.default=t._lctf.readLangSysTable(e,i+o);var a=r.readUshort(e,n);n+=2;for(var c=0;c<a;c++){var l=r.readASCII(e,n,4);n+=4;var u=r.readUshort(e,n);n+=2,s[l.trim()]=t._lctf.readLangSysTable(e,i+u)}return s},t._lctf.readLangSysTable=function(e,n){var r=t._bin,i={};r.readUshort(e,n),n+=2,i.reqFeature=r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);return n+=2,i.features=r.readUshorts(e,n,s),i},t.CFF={},t.CFF.parse=function(e,n,r){var i=t._bin;(e=new Uint8Array(e.buffer,n,r))[n=0],e[++n],e[++n],e[++n],n++;var s=[];n=t.CFF.readIndex(e,n,s);for(var o=[],a=0;a<s.length-1;a++)o.push(i.readASCII(e,n+s[a],s[a+1]-s[a]));n+=s[s.length-1];var c=[];n=t.CFF.readIndex(e,n,c);var l=[];for(a=0;a<c.length-1;a++)l.push(t.CFF.readDict(e,n+c[a],n+c[a+1]));n+=c[c.length-1];var u=l[0],h=[];n=t.CFF.readIndex(e,n,h);var d=[];for(a=0;a<h.length-1;a++)d.push(i.readASCII(e,n+h[a],h[a+1]-h[a]));if(n+=h[h.length-1],t.CFF.readSubrs(e,n,u),u.CharStrings){n=u.CharStrings,h=[],n=t.CFF.readIndex(e,n,h);var p=[];for(a=0;a<h.length-1;a++)p.push(i.readBytes(e,n+h[a],h[a+1]-h[a]));u.CharStrings=p}if(u.ROS){n=u.FDArray;var f=[];for(n=t.CFF.readIndex(e,n,f),u.FDArray=[],a=0;a<f.length-1;a++){var m=t.CFF.readDict(e,n+f[a],n+f[a+1]);t.CFF._readFDict(e,m,d),u.FDArray.push(m)}n+=f[f.length-1],n=u.FDSelect,u.FDSelect=[];var g=e[n];if(n++,3!=g)throw g;var A=i.readUshort(e,n);for(n+=2,a=0;a<A+1;a++)u.FDSelect.push(i.readUshort(e,n),e[n+2]),n+=3}return u.Encoding&&(u.Encoding=t.CFF.readEncoding(e,u.Encoding,u.CharStrings.length)),u.charset&&(u.charset=t.CFF.readCharset(e,u.charset,u.CharStrings.length)),t.CFF._readFDict(e,u,d),u},t.CFF._readFDict=function(e,n,r){var i;for(var s in n.Private&&(i=n.Private[1],n.Private=t.CFF.readDict(e,i,i+n.Private[0]),n.Private.Subrs&&t.CFF.readSubrs(e,i+n.Private.Subrs,n.Private)),n)-1!=["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(s)&&(n[s]=r[n[s]-426+35])},t.CFF.readSubrs=function(e,n,r){var i=t._bin,s=[];n=t.CFF.readIndex(e,n,s);var o,a=s.length;o=a<1240?107:a<33900?1131:32768,r.Bias=o,r.Subrs=[];for(var c=0;c<s.length-1;c++)r.Subrs.push(i.readBytes(e,n+s[c],s[c+1]-s[c]))},t.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],t.CFF.glyphByUnicode=function(e,t){for(var n=0;n<e.charset.length;n++)if(e.charset[n]==t)return n;return-1},t.CFF.glyphBySE=function(e,n){return n<0||n>255?-1:t.CFF.glyphByUnicode(e,t.CFF.tableSE[n])},t.CFF.readEncoding=function(e,n,r){t._bin;var i=[".notdef"],s=e[n];if(n++,0!=s)throw"error: unknown encoding format: "+s;var o=e[n];n++;for(var a=0;a<o;a++)i.push(e[n+a]);return i},t.CFF.readCharset=function(e,n,r){var i=t._bin,s=[".notdef"],o=e[n];if(n++,0==o)for(var a=0;a<r;a++){var c=i.readUshort(e,n);n+=2,s.push(c)}else{if(1!=o&&2!=o)throw"error: format: "+o;for(;s.length<r;){c=i.readUshort(e,n),n+=2;var l=0;for(1==o?(l=e[n],n++):(l=i.readUshort(e,n),n+=2),a=0;a<=l;a++)s.push(c),c++}}return s},t.CFF.readIndex=function(e,n,r){var i=t._bin,s=i.readUshort(e,n)+1,o=e[n+=2];if(n++,1==o)for(var a=0;a<s;a++)r.push(e[n+a]);else if(2==o)for(a=0;a<s;a++)r.push(i.readUshort(e,n+2*a));else if(3==o)for(a=0;a<s;a++)r.push(16777215&i.readUint(e,n+3*a-1));else if(1!=s)throw"unsupported offset size: "+o+", count: "+s;return(n+=s*o)-1},t.CFF.getCharString=function(e,n,r){var i=t._bin,s=e[n],o=e[n+1];e[n+2],e[n+3],e[n+4];var a=1,c=null,l=null;s<=20&&(c=s,a=1),12==s&&(c=100*s+o,a=2),21<=s&&s<=27&&(c=s,a=1),28==s&&(l=i.readShort(e,n+1),a=3),29<=s&&s<=31&&(c=s,a=1),32<=s&&s<=246&&(l=s-139,a=1),247<=s&&s<=250&&(l=256*(s-247)+o+108,a=2),251<=s&&s<=254&&(l=256*-(s-251)-o-108,a=2),255==s&&(l=i.readInt(e,n+1)/65535,a=5),r.val=null!=l?l:"o"+c,r.size=a},t.CFF.readCharString=function(e,n,r){for(var i=n+r,s=t._bin,o=[];n<i;){var a=e[n],c=e[n+1];e[n+2],e[n+3],e[n+4];var l=1,u=null,h=null;a<=20&&(u=a,l=1),12==a&&(u=100*a+c,l=2),19!=a&&20!=a||(u=a,l=2),21<=a&&a<=27&&(u=a,l=1),28==a&&(h=s.readShort(e,n+1),l=3),29<=a&&a<=31&&(u=a,l=1),32<=a&&a<=246&&(h=a-139,l=1),247<=a&&a<=250&&(h=256*(a-247)+c+108,l=2),251<=a&&a<=254&&(h=256*-(a-251)-c-108,l=2),255==a&&(h=s.readInt(e,n+1)/65535,l=5),o.push(null!=h?h:"o"+u),n+=l}return o},t.CFF.readDict=function(e,n,r){for(var i=t._bin,s={},o=[];n<r;){var a=e[n],c=e[n+1];e[n+2],e[n+3],e[n+4];var l=1,u=null,h=null;if(28==a&&(h=i.readShort(e,n+1),l=3),29==a&&(h=i.readInt(e,n+1),l=5),32<=a&&a<=246&&(h=a-139,l=1),247<=a&&a<=250&&(h=256*(a-247)+c+108,l=2),251<=a&&a<=254&&(h=256*-(a-251)-c-108,l=2),255==a)throw h=i.readInt(e,n+1)/65535,l=5,"unknown number";if(30==a){var d=[];for(l=1;;){var p=e[n+l];l++;var f=p>>4,m=15&p;if(15!=f&&d.push(f),15!=m&&d.push(m),15==m)break}for(var g="",A=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],y=0;y<d.length;y++)g+=A[d[y]];h=parseFloat(g)}a<=21&&(u=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][a],l=1,12==a&&(u=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][c],l=2)),null!=u?(s[u]=1==o.length?o[0]:o,o=[]):o.push(h),n+=l}return s},t.cmap={},t.cmap.parse=function(e,n,r){e=new Uint8Array(e.buffer,n,r),n=0;var i=t._bin,s={};i.readUshort(e,n),n+=2;var o=i.readUshort(e,n);n+=2;var a=[];s.tables=[];for(var c=0;c<o;c++){var l=i.readUshort(e,n);n+=2;var u=i.readUshort(e,n);n+=2;var h=i.readUint(e,n);n+=4;var d="p"+l+"e"+u,p=a.indexOf(h);if(-1==p){var f;p=s.tables.length,a.push(h);var m=i.readUshort(e,h);0==m?f=t.cmap.parse0(e,h):4==m?f=t.cmap.parse4(e,h):6==m?f=t.cmap.parse6(e,h):12==m?f=t.cmap.parse12(e,h):console.debug("unknown format: "+m,l,u,h),s.tables.push(f)}if(null!=s[d])throw"multiple tables for one platform+encoding";s[d]=p}return s},t.cmap.parse0=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2,i.map=[];for(var o=0;o<s-6;o++)i.map.push(e[n+o]);return i},t.cmap.parse4=function(e,n){var r=t._bin,i=n,s={};s.format=r.readUshort(e,n),n+=2;var o=r.readUshort(e,n);n+=2,r.readUshort(e,n),n+=2;var a=r.readUshort(e,n);n+=2;var c=a/2;s.searchRange=r.readUshort(e,n),n+=2,s.entrySelector=r.readUshort(e,n),n+=2,s.rangeShift=r.readUshort(e,n),n+=2,s.endCount=r.readUshorts(e,n,c),n+=2*c,n+=2,s.startCount=r.readUshorts(e,n,c),n+=2*c,s.idDelta=[];for(var l=0;l<c;l++)s.idDelta.push(r.readShort(e,n)),n+=2;for(s.idRangeOffset=r.readUshorts(e,n,c),n+=2*c,s.glyphIdArray=[];n<i+o;)s.glyphIdArray.push(r.readUshort(e,n)),n+=2;return s},t.cmap.parse6=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,r.readUshort(e,n),n+=2,i.firstCode=r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2,i.glyphIdArray=[];for(var o=0;o<s;o++)i.glyphIdArray.push(r.readUshort(e,n)),n+=2;return i},t.cmap.parse12=function(e,n){var r=t._bin,i={};i.format=r.readUshort(e,n),n+=2,n+=2,r.readUint(e,n),n+=4,r.readUint(e,n),n+=4;var s=r.readUint(e,n);n+=4,i.groups=[];for(var o=0;o<s;o++){var a=n+12*o,c=r.readUint(e,a+0),l=r.readUint(e,a+4),u=r.readUint(e,a+8);i.groups.push([c,l,u])}return i},t.glyf={},t.glyf.parse=function(e,t,n,r){for(var i=[],s=0;s<r.maxp.numGlyphs;s++)i.push(null);return i},t.glyf._parseGlyf=function(e,n){var r=t._bin,i=e._data,s=t._tabOffset(i,"glyf",e._offset)+e.loca[n];if(e.loca[n]==e.loca[n+1])return null;var o={};if(o.noc=r.readShort(i,s),s+=2,o.xMin=r.readShort(i,s),s+=2,o.yMin=r.readShort(i,s),s+=2,o.xMax=r.readShort(i,s),s+=2,o.yMax=r.readShort(i,s),s+=2,o.xMin>=o.xMax||o.yMin>=o.yMax)return null;if(o.noc>0){o.endPts=[];for(var a=0;a<o.noc;a++)o.endPts.push(r.readUshort(i,s)),s+=2;var c=r.readUshort(i,s);if(s+=2,i.length-s<c)return null;o.instructions=r.readBytes(i,s,c),s+=c;var l=o.endPts[o.noc-1]+1;for(o.flags=[],a=0;a<l;a++){var u=i[s];if(s++,o.flags.push(u),8&u){var h=i[s];s++;for(var d=0;d<h;d++)o.flags.push(u),a++}}for(o.xs=[],a=0;a<l;a++){var p=!!(2&o.flags[a]),f=!!(16&o.flags[a]);p?(o.xs.push(f?i[s]:-i[s]),s++):f?o.xs.push(0):(o.xs.push(r.readShort(i,s)),s+=2)}for(o.ys=[],a=0;a<l;a++)p=!!(4&o.flags[a]),f=!!(32&o.flags[a]),p?(o.ys.push(f?i[s]:-i[s]),s++):f?o.ys.push(0):(o.ys.push(r.readShort(i,s)),s+=2);var m=0,g=0;for(a=0;a<l;a++)m+=o.xs[a],g+=o.ys[a],o.xs[a]=m,o.ys[a]=g}else{var A;o.parts=[];do{A=r.readUshort(i,s),s+=2;var y={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(o.parts.push(y),y.glyphIndex=r.readUshort(i,s),s+=2,1&A){var _=r.readShort(i,s);s+=2;var v=r.readShort(i,s);s+=2}else _=r.readInt8(i,s),s++,v=r.readInt8(i,s),s++;2&A?(y.m.tx=_,y.m.ty=v):(y.p1=_,y.p2=v),8&A?(y.m.a=y.m.d=r.readF2dot14(i,s),s+=2):64&A?(y.m.a=r.readF2dot14(i,s),s+=2,y.m.d=r.readF2dot14(i,s),s+=2):128&A&&(y.m.a=r.readF2dot14(i,s),s+=2,y.m.b=r.readF2dot14(i,s),s+=2,y.m.c=r.readF2dot14(i,s),s+=2,y.m.d=r.readF2dot14(i,s),s+=2)}while(32&A);if(256&A){var b=r.readUshort(i,s);for(s+=2,o.instr=[],a=0;a<b;a++)o.instr.push(i[s]),s++}}return o},t.GPOS={},t.GPOS.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GPOS.subt)},t.GPOS.subt=function(e,n,r,i){var s=t._bin,o=r,a={};if(a.fmt=s.readUshort(e,r),r+=2,1==n||2==n||3==n||7==n||8==n&&a.fmt<=2){var c=s.readUshort(e,r);r+=2,a.coverage=t._lctf.readCoverage(e,c+o)}if(1==n&&1==a.fmt){var l=s.readUshort(e,r);r+=2;var u=t._lctf.numOfOnes(l);0!=l&&(a.pos=t.GPOS.readValueRecord(e,r,l))}else if(2==n&&a.fmt>=1&&a.fmt<=2){l=s.readUshort(e,r),r+=2;var h=s.readUshort(e,r);r+=2,u=t._lctf.numOfOnes(l);var d=t._lctf.numOfOnes(h);if(1==a.fmt){a.pairsets=[];var p=s.readUshort(e,r);r+=2;for(var f=0;f<p;f++){var m=o+s.readUshort(e,r);r+=2;var g=s.readUshort(e,m);m+=2;for(var A=[],y=0;y<g;y++){var _=s.readUshort(e,m);m+=2,0!=l&&(T=t.GPOS.readValueRecord(e,m,l),m+=2*u),0!=h&&(S=t.GPOS.readValueRecord(e,m,h),m+=2*d),A.push({gid2:_,val1:T,val2:S})}a.pairsets.push(A)}}if(2==a.fmt){var v=s.readUshort(e,r);r+=2;var b=s.readUshort(e,r);r+=2;var x=s.readUshort(e,r);r+=2;var w=s.readUshort(e,r);for(r+=2,a.classDef1=t._lctf.readClassDef(e,o+v),a.classDef2=t._lctf.readClassDef(e,o+b),a.matrix=[],f=0;f<x;f++){var E=[];for(y=0;y<w;y++){var T=null,S=null;0!=l&&(T=t.GPOS.readValueRecord(e,r,l),r+=2*u),0!=h&&(S=t.GPOS.readValueRecord(e,r,h),r+=2*d),E.push({val1:T,val2:S})}a.matrix.push(E)}}}else{if(9==n&&1==a.fmt){var M=s.readUshort(e,r);r+=2;var C=s.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=M;else if(i.ltype!=M)throw"invalid extension substitution";return t.GPOS.subt(e,i.ltype,o+C)}console.debug("unsupported GPOS table LookupType",n,"format",a.fmt)}return a},t.GPOS.readValueRecord=function(e,n,r){var i=t._bin,s=[];return s.push(1&r?i.readShort(e,n):0),n+=1&r?2:0,s.push(2&r?i.readShort(e,n):0),n+=2&r?2:0,s.push(4&r?i.readShort(e,n):0),n+=4&r?2:0,s.push(8&r?i.readShort(e,n):0),n+=8&r?2:0,s},t.GSUB={},t.GSUB.parse=function(e,n,r,i){return t._lctf.parse(e,n,r,i,t.GSUB.subt)},t.GSUB.subt=function(e,n,r,i){var s=t._bin,o=r,a={};if(a.fmt=s.readUshort(e,r),r+=2,1!=n&&4!=n&&5!=n&&6!=n)return null;if(1==n||4==n||5==n&&a.fmt<=2||6==n&&a.fmt<=2){var c=s.readUshort(e,r);r+=2,a.coverage=t._lctf.readCoverage(e,o+c)}if(1==n&&a.fmt>=1&&a.fmt<=2){if(1==a.fmt)a.delta=s.readShort(e,r),r+=2;else if(2==a.fmt){var l=s.readUshort(e,r);r+=2,a.newg=s.readUshorts(e,r,l),r+=2*a.newg.length}}else if(4==n){a.vals=[],l=s.readUshort(e,r),r+=2;for(var u=0;u<l;u++){var h=s.readUshort(e,r);r+=2,a.vals.push(t.GSUB.readLigatureSet(e,o+h))}}else if(5==n&&2==a.fmt){if(2==a.fmt){var d=s.readUshort(e,r);r+=2,a.cDef=t._lctf.readClassDef(e,o+d),a.scset=[];var p=s.readUshort(e,r);for(r+=2,u=0;u<p;u++){var f=s.readUshort(e,r);r+=2,a.scset.push(0==f?null:t.GSUB.readSubClassSet(e,o+f))}}}else if(6==n&&3==a.fmt){if(3==a.fmt){for(u=0;u<3;u++){l=s.readUshort(e,r),r+=2;for(var m=[],g=0;g<l;g++)m.push(t._lctf.readCoverage(e,o+s.readUshort(e,r+2*g)));r+=2*l,0==u&&(a.backCvg=m),1==u&&(a.inptCvg=m),2==u&&(a.ahedCvg=m)}l=s.readUshort(e,r),r+=2,a.lookupRec=t.GSUB.readSubstLookupRecords(e,r,l)}}else{if(7==n&&1==a.fmt){var A=s.readUshort(e,r);r+=2;var y=s.readUint(e,r);if(r+=4,9==i.ltype)i.ltype=A;else if(i.ltype!=A)throw"invalid extension substitution";return t.GSUB.subt(e,i.ltype,o+y)}console.debug("unsupported GSUB table LookupType",n,"format",a.fmt)}return a},t.GSUB.readSubClassSet=function(e,n){var r=t._bin.readUshort,i=n,s=[],o=r(e,n);n+=2;for(var a=0;a<o;a++){var c=r(e,n);n+=2,s.push(t.GSUB.readSubClassRule(e,i+c))}return s},t.GSUB.readSubClassRule=function(e,n){var r=t._bin.readUshort,i={},s=r(e,n),o=r(e,n+=2);n+=2,i.input=[];for(var a=0;a<s-1;a++)i.input.push(r(e,n)),n+=2;return i.substLookupRecords=t.GSUB.readSubstLookupRecords(e,n,o),i},t.GSUB.readSubstLookupRecords=function(e,n,r){for(var i=t._bin.readUshort,s=[],o=0;o<r;o++)s.push(i(e,n),i(e,n+2)),n+=4;return s},t.GSUB.readChainSubClassSet=function(e,n){var r=t._bin,i=n,s=[],o=r.readUshort(e,n);n+=2;for(var a=0;a<o;a++){var c=r.readUshort(e,n);n+=2,s.push(t.GSUB.readChainSubClassRule(e,i+c))}return s},t.GSUB.readChainSubClassRule=function(e,n){for(var r=t._bin,i={},s=["backtrack","input","lookahead"],o=0;o<s.length;o++){var a=r.readUshort(e,n);n+=2,1==o&&a--,i[s[o]]=r.readUshorts(e,n,a),n+=2*i[s[o]].length}return a=r.readUshort(e,n),n+=2,i.subst=r.readUshorts(e,n,2*a),n+=2*i.subst.length,i},t.GSUB.readLigatureSet=function(e,n){var r=t._bin,i=n,s=[],o=r.readUshort(e,n);n+=2;for(var a=0;a<o;a++){var c=r.readUshort(e,n);n+=2,s.push(t.GSUB.readLigature(e,i+c))}return s},t.GSUB.readLigature=function(e,n){var r=t._bin,i={chain:[]};i.nglyph=r.readUshort(e,n),n+=2;var s=r.readUshort(e,n);n+=2;for(var o=0;o<s-1;o++)i.chain.push(r.readUshort(e,n)),n+=2;return i},t.head={},t.head.parse=function(e,n,r){var i=t._bin,s={};return i.readFixed(e,n),n+=4,s.fontRevision=i.readFixed(e,n),n+=4,i.readUint(e,n),n+=4,i.readUint(e,n),n+=4,s.flags=i.readUshort(e,n),n+=2,s.unitsPerEm=i.readUshort(e,n),n+=2,s.created=i.readUint64(e,n),n+=8,s.modified=i.readUint64(e,n),n+=8,s.xMin=i.readShort(e,n),n+=2,s.yMin=i.readShort(e,n),n+=2,s.xMax=i.readShort(e,n),n+=2,s.yMax=i.readShort(e,n),n+=2,s.macStyle=i.readUshort(e,n),n+=2,s.lowestRecPPEM=i.readUshort(e,n),n+=2,s.fontDirectionHint=i.readShort(e,n),n+=2,s.indexToLocFormat=i.readShort(e,n),n+=2,s.glyphDataFormat=i.readShort(e,n),n+=2,s},t.hhea={},t.hhea.parse=function(e,n,r){var i=t._bin,s={};return i.readFixed(e,n),n+=4,s.ascender=i.readShort(e,n),n+=2,s.descender=i.readShort(e,n),n+=2,s.lineGap=i.readShort(e,n),n+=2,s.advanceWidthMax=i.readUshort(e,n),n+=2,s.minLeftSideBearing=i.readShort(e,n),n+=2,s.minRightSideBearing=i.readShort(e,n),n+=2,s.xMaxExtent=i.readShort(e,n),n+=2,s.caretSlopeRise=i.readShort(e,n),n+=2,s.caretSlopeRun=i.readShort(e,n),n+=2,s.caretOffset=i.readShort(e,n),n+=2,n+=8,s.metricDataFormat=i.readShort(e,n),n+=2,s.numberOfHMetrics=i.readUshort(e,n),n+=2,s},t.hmtx={},t.hmtx.parse=function(e,n,r,i){for(var s=t._bin,o={aWidth:[],lsBearing:[]},a=0,c=0,l=0;l<i.maxp.numGlyphs;l++)l<i.hhea.numberOfHMetrics&&(a=s.readUshort(e,n),n+=2,c=s.readShort(e,n),n+=2),o.aWidth.push(a),o.lsBearing.push(c);return o},t.kern={},t.kern.parse=function(e,n,r,i){var s=t._bin,o=s.readUshort(e,n);if(n+=2,1==o)return t.kern.parseV1(e,n-2,r,i);var a=s.readUshort(e,n);n+=2;for(var c={glyph1:[],rval:[]},l=0;l<a;l++){n+=2,r=s.readUshort(e,n),n+=2;var u=s.readUshort(e,n);n+=2;var h=u>>>8;if(0!=(h&=15))throw"unknown kern table format: "+h;n=t.kern.readFormat0(e,n,c)}return c},t.kern.parseV1=function(e,n,r,i){var s=t._bin;s.readFixed(e,n),n+=4;var o=s.readUint(e,n);n+=4;for(var a={glyph1:[],rval:[]},c=0;c<o;c++){s.readUint(e,n),n+=4;var l=s.readUshort(e,n);n+=2,s.readUshort(e,n),n+=2;var u=l>>>8;if(0!=(u&=15))throw"unknown kern table format: "+u;n=t.kern.readFormat0(e,n,a)}return a},t.kern.readFormat0=function(e,n,r){var i=t._bin,s=-1,o=i.readUshort(e,n);n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2,i.readUshort(e,n),n+=2;for(var a=0;a<o;a++){var c=i.readUshort(e,n);n+=2;var l=i.readUshort(e,n);n+=2;var u=i.readShort(e,n);n+=2,c!=s&&(r.glyph1.push(c),r.rval.push({glyph2:[],vals:[]}));var h=r.rval[r.rval.length-1];h.glyph2.push(l),h.vals.push(u),s=c}return n},t.loca={},t.loca.parse=function(e,n,r,i){var s=t._bin,o=[],a=i.head.indexToLocFormat,c=i.maxp.numGlyphs+1;if(0==a)for(var l=0;l<c;l++)o.push(s.readUshort(e,n+(l<<1))<<1);if(1==a)for(l=0;l<c;l++)o.push(s.readUint(e,n+(l<<2)));return o},t.maxp={},t.maxp.parse=function(e,n,r){var i=t._bin,s={},o=i.readUint(e,n);return n+=4,s.numGlyphs=i.readUshort(e,n),n+=2,65536==o&&(s.maxPoints=i.readUshort(e,n),n+=2,s.maxContours=i.readUshort(e,n),n+=2,s.maxCompositePoints=i.readUshort(e,n),n+=2,s.maxCompositeContours=i.readUshort(e,n),n+=2,s.maxZones=i.readUshort(e,n),n+=2,s.maxTwilightPoints=i.readUshort(e,n),n+=2,s.maxStorage=i.readUshort(e,n),n+=2,s.maxFunctionDefs=i.readUshort(e,n),n+=2,s.maxInstructionDefs=i.readUshort(e,n),n+=2,s.maxStackElements=i.readUshort(e,n),n+=2,s.maxSizeOfInstructions=i.readUshort(e,n),n+=2,s.maxComponentElements=i.readUshort(e,n),n+=2,s.maxComponentDepth=i.readUshort(e,n),n+=2),s},t.name={},t.name.parse=function(e,n,r){var i=t._bin,s={};i.readUshort(e,n),n+=2;var o=i.readUshort(e,n);n+=2,i.readUshort(e,n);for(var a,c=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],l=n+=2,u=0;u<o;u++){var h=i.readUshort(e,n);n+=2;var d=i.readUshort(e,n);n+=2;var p=i.readUshort(e,n);n+=2;var f=i.readUshort(e,n);n+=2;var m=i.readUshort(e,n);n+=2;var g=i.readUshort(e,n);n+=2;var A,y=c[f],_=l+12*o+g;if(0==h)A=i.readUnicode(e,_,m/2);else if(3==h&&0==d)A=i.readUnicode(e,_,m/2);else if(0==d)A=i.readASCII(e,_,m);else if(1==d)A=i.readUnicode(e,_,m/2);else if(3==d)A=i.readUnicode(e,_,m/2);else{if(1!=h)throw"unknown encoding "+d+", platformID: "+h;A=i.readASCII(e,_,m),console.debug("reading unknown MAC encoding "+d+" as ASCII")}var v="p"+h+","+p.toString(16);null==s[v]&&(s[v]={}),s[v][void 0!==y?y:f]=A,s[v]._lang=p}for(var b in s)if(null!=s[b].postScriptName&&1033==s[b]._lang)return s[b];for(var b in s)if(null!=s[b].postScriptName&&0==s[b]._lang)return s[b];for(var b in s)if(null!=s[b].postScriptName&&3084==s[b]._lang)return s[b];for(var b in s)if(null!=s[b].postScriptName)return s[b];for(var b in s){a=b;break}return console.debug("returning name table with languageID "+s[a]._lang),s[a]},t["OS/2"]={},t["OS/2"].parse=function(e,n,r){var i=t._bin.readUshort(e,n);n+=2;var s={};if(0==i)t["OS/2"].version0(e,n,s);else if(1==i)t["OS/2"].version1(e,n,s);else if(2==i||3==i||4==i)t["OS/2"].version2(e,n,s);else{if(5!=i)throw"unknown OS/2 table version: "+i;t["OS/2"].version5(e,n,s)}return s},t["OS/2"].version0=function(e,n,r){var i=t._bin;return r.xAvgCharWidth=i.readShort(e,n),n+=2,r.usWeightClass=i.readUshort(e,n),n+=2,r.usWidthClass=i.readUshort(e,n),n+=2,r.fsType=i.readUshort(e,n),n+=2,r.ySubscriptXSize=i.readShort(e,n),n+=2,r.ySubscriptYSize=i.readShort(e,n),n+=2,r.ySubscriptXOffset=i.readShort(e,n),n+=2,r.ySubscriptYOffset=i.readShort(e,n),n+=2,r.ySuperscriptXSize=i.readShort(e,n),n+=2,r.ySuperscriptYSize=i.readShort(e,n),n+=2,r.ySuperscriptXOffset=i.readShort(e,n),n+=2,r.ySuperscriptYOffset=i.readShort(e,n),n+=2,r.yStrikeoutSize=i.readShort(e,n),n+=2,r.yStrikeoutPosition=i.readShort(e,n),n+=2,r.sFamilyClass=i.readShort(e,n),n+=2,r.panose=i.readBytes(e,n,10),n+=10,r.ulUnicodeRange1=i.readUint(e,n),n+=4,r.ulUnicodeRange2=i.readUint(e,n),n+=4,r.ulUnicodeRange3=i.readUint(e,n),n+=4,r.ulUnicodeRange4=i.readUint(e,n),n+=4,r.achVendID=[i.readInt8(e,n),i.readInt8(e,n+1),i.readInt8(e,n+2),i.readInt8(e,n+3)],n+=4,r.fsSelection=i.readUshort(e,n),n+=2,r.usFirstCharIndex=i.readUshort(e,n),n+=2,r.usLastCharIndex=i.readUshort(e,n),n+=2,r.sTypoAscender=i.readShort(e,n),n+=2,r.sTypoDescender=i.readShort(e,n),n+=2,r.sTypoLineGap=i.readShort(e,n),n+=2,r.usWinAscent=i.readUshort(e,n),n+=2,r.usWinDescent=i.readUshort(e,n),n+2},t["OS/2"].version1=function(e,n,r){var i=t._bin;return n=t["OS/2"].version0(e,n,r),r.ulCodePageRange1=i.readUint(e,n),n+=4,r.ulCodePageRange2=i.readUint(e,n),n+4},t["OS/2"].version2=function(e,n,r){var i=t._bin;return n=t["OS/2"].version1(e,n,r),r.sxHeight=i.readShort(e,n),n+=2,r.sCapHeight=i.readShort(e,n),n+=2,r.usDefault=i.readUshort(e,n),n+=2,r.usBreak=i.readUshort(e,n),n+=2,r.usMaxContext=i.readUshort(e,n),n+2},t["OS/2"].version5=function(e,n,r){var i=t._bin;return n=t["OS/2"].version2(e,n,r),r.usLowerOpticalPointSize=i.readUshort(e,n),n+=2,r.usUpperOpticalPointSize=i.readUshort(e,n),n+2},t.post={},t.post.parse=function(e,n,r){var i=t._bin,s={};return s.version=i.readFixed(e,n),n+=4,s.italicAngle=i.readFixed(e,n),n+=4,s.underlinePosition=i.readShort(e,n),n+=2,s.underlineThickness=i.readShort(e,n),n+=2,s},null==t&&(t={}),null==t.U&&(t.U={}),t.U.codeToGlyph=function(e,t){var n=e.cmap,r=-1;if(null!=n.p0e4?r=n.p0e4:null!=n.p3e1?r=n.p3e1:null!=n.p1e0?r=n.p1e0:null!=n.p0e3&&(r=n.p0e3),-1==r)throw"no familiar platform and encoding!";var i=n.tables[r];if(0==i.format)return t>=i.map.length?0:i.map[t];if(4==i.format){for(var s=-1,o=0;o<i.endCount.length;o++)if(t<=i.endCount[o]){s=o;break}return-1==s||i.startCount[s]>t?0:65535&(0!=i.idRangeOffset[s]?i.glyphIdArray[t-i.startCount[s]+(i.idRangeOffset[s]>>1)-(i.idRangeOffset.length-s)]:t+i.idDelta[s])}if(12==i.format){if(t>i.groups[i.groups.length-1][1])return 0;for(o=0;o<i.groups.length;o++){var a=i.groups[o];if(a[0]<=t&&t<=a[1])return a[2]+(t-a[0])}return 0}throw"unknown cmap table format "+i.format},t.U.glyphToPath=function(e,n){var r={cmds:[],crds:[]};if(e.SVG&&e.SVG.entries[n]){var i=e.SVG.entries[n];return null==i?r:("string"==typeof i&&(i=t.SVG.toPath(i),e.SVG.entries[n]=i),i)}if(e.CFF){var s={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:e.CFF.Private?e.CFF.Private.defaultWidthX:0,open:!1},o=e.CFF,a=e.CFF.Private;if(o.ROS){for(var c=0;o.FDSelect[c+2]<=n;)c+=2;a=o.FDArray[o.FDSelect[c+1]].Private}t.U._drawCFF(e.CFF.CharStrings[n],s,o,a,r)}else e.glyf&&t.U._drawGlyf(n,e,r);return r},t.U._drawGlyf=function(e,n,r){var i=n.glyf[e];null==i&&(i=n.glyf[e]=t.glyf._parseGlyf(n,e)),null!=i&&(i.noc>-1?t.U._simpleGlyph(i,r):t.U._compoGlyph(i,n,r))},t.U._simpleGlyph=function(e,n){for(var r=0;r<e.noc;r++){for(var i=0==r?0:e.endPts[r-1]+1,s=e.endPts[r],o=i;o<=s;o++){var a=o==i?s:o-1,c=o==s?i:o+1,l=1&e.flags[o],u=1&e.flags[a],h=1&e.flags[c],d=e.xs[o],p=e.ys[o];if(o==i)if(l){if(!u){t.U.P.moveTo(n,d,p);continue}t.U.P.moveTo(n,e.xs[a],e.ys[a])}else u?t.U.P.moveTo(n,e.xs[a],e.ys[a]):t.U.P.moveTo(n,(e.xs[a]+d)/2,(e.ys[a]+p)/2);l?u&&t.U.P.lineTo(n,d,p):h?t.U.P.qcurveTo(n,d,p,e.xs[c],e.ys[c]):t.U.P.qcurveTo(n,d,p,(d+e.xs[c])/2,(p+e.ys[c])/2)}t.U.P.closePath(n)}},t.U._compoGlyph=function(e,n,r){for(var i=0;i<e.parts.length;i++){var s={cmds:[],crds:[]},o=e.parts[i];t.U._drawGlyf(o.glyphIndex,n,s);for(var a=o.m,c=0;c<s.crds.length;c+=2){var l=s.crds[c],u=s.crds[c+1];r.crds.push(l*a.a+u*a.b+a.tx),r.crds.push(l*a.c+u*a.d+a.ty)}for(c=0;c<s.cmds.length;c++)r.cmds.push(s.cmds[c])}},t.U._getGlyphClass=function(e,n){var r=t._lctf.getInterval(n,e);return-1==r?0:n[r+2]},t.U.getPairAdjustment=function(e,n,r){var i=0;if(e.GPOS)for(var s=e.GPOS,o=s.lookupList,a=s.featureList,c=[],l=0;l<a.length;l++){var u=a[l];if("kern"==u.tag)for(var h=0;h<u.tab.length;h++)if(!c[u.tab[h]]){c[u.tab[h]]=!0;for(var d=o[u.tab[h]],p=0;p<d.tabs.length;p++)if(null!=d.tabs[p]){var f,m=d.tabs[p];if(!m.coverage||-1!=(f=t._lctf.coverageIndex(m.coverage,n)))if(1==d.ltype);else if(2==d.ltype){var g;if(1==m.fmt){var A=m.pairsets[f];for(l=0;l<A.length;l++)A[l].gid2==r&&(g=A[l])}else if(2==m.fmt){var y=t.U._getGlyphClass(n,m.classDef1),_=t.U._getGlyphClass(r,m.classDef2);g=m.matrix[y][_]}g&&g.val1&&g.val1[2]&&(i+=g.val1[2]),g&&g.val2&&g.val2[0]&&(i+=g.val2[0])}}}}if(e.kern){var v=e.kern.glyph1.indexOf(n);if(-1!=v){var b=e.kern.rval[v].glyph2.indexOf(r);-1!=b&&(i+=e.kern.rval[v].vals[b])}}return i},t.U._applySubs=function(e,n,r,i){for(var s=e.length-n-1,o=0;o<r.tabs.length;o++)if(null!=r.tabs[o]){var a,c=r.tabs[o];if(!c.coverage||-1!=(a=t._lctf.coverageIndex(c.coverage,e[n])))if(1==r.ltype)e[n],1==c.fmt?e[n]=e[n]+c.delta:e[n]=c.newg[a];else if(4==r.ltype)for(var l=c.vals[a],u=0;u<l.length;u++){var h=l[u],d=h.chain.length;if(!(d>s)){for(var p=!0,f=0,m=0;m<d;m++){for(;-1==e[n+f+(1+m)];)f++;h.chain[m]!=e[n+f+(1+m)]&&(p=!1)}if(p){for(e[n]=h.nglyph,m=0;m<d+f;m++)e[n+m+1]=-1;break}}}else if(5==r.ltype&&2==c.fmt)for(var g=t._lctf.getInterval(c.cDef,e[n]),A=c.cDef[g+2],y=c.scset[A],_=0;_<y.length;_++){var v=y[_],b=v.input;if(!(b.length>s)){for(p=!0,m=0;m<b.length;m++){var x=t._lctf.getInterval(c.cDef,e[n+1+m]);if(-1==g&&c.cDef[x+2]!=b[m]){p=!1;break}}if(p){var w=v.substLookupRecords;for(u=0;u<w.length;u+=2)w[u],w[u+1]}}}else if(6==r.ltype&&3==c.fmt){if(!t.U._glsCovered(e,c.backCvg,n-c.backCvg.length))continue;if(!t.U._glsCovered(e,c.inptCvg,n))continue;if(!t.U._glsCovered(e,c.ahedCvg,n+c.inptCvg.length))continue;var E=c.lookupRec;for(_=0;_<E.length;_+=2){g=E[_];var T=i[E[_+1]];t.U._applySubs(e,n+g,T,i)}}}},t.U._glsCovered=function(e,n,r){for(var i=0;i<n.length;i++)if(-1==t._lctf.coverageIndex(n[i],e[r+i]))return!1;return!0},t.U.glyphsToPath=function(e,n,r){for(var i={cmds:[],crds:[]},s=0,o=0;o<n.length;o++){var a=n[o];if(-1!=a){for(var c=o<n.length-1&&-1!=n[o+1]?n[o+1]:0,l=t.U.glyphToPath(e,a),u=0;u<l.crds.length;u+=2)i.crds.push(l.crds[u]+s),i.crds.push(l.crds[u+1]);for(r&&i.cmds.push(r),u=0;u<l.cmds.length;u++)i.cmds.push(l.cmds[u]);r&&i.cmds.push("X"),s+=e.hmtx.aWidth[a],o<n.length-1&&(s+=t.U.getPairAdjustment(e,a,c))}}return i},t.U.P={},t.U.P.moveTo=function(e,t,n){e.cmds.push("M"),e.crds.push(t,n)},t.U.P.lineTo=function(e,t,n){e.cmds.push("L"),e.crds.push(t,n)},t.U.P.curveTo=function(e,t,n,r,i,s,o){e.cmds.push("C"),e.crds.push(t,n,r,i,s,o)},t.U.P.qcurveTo=function(e,t,n,r,i){e.cmds.push("Q"),e.crds.push(t,n,r,i)},t.U.P.closePath=function(e){e.cmds.push("Z")},t.U._drawCFF=function(e,n,r,i,s){for(var o=n.stack,a=n.nStems,c=n.haveWidth,l=n.width,u=n.open,h=0,d=n.x,p=n.y,f=0,m=0,g=0,A=0,y=0,_=0,v=0,b=0,x=0,w=0,E={val:0,size:0};h<e.length;){t.CFF.getCharString(e,h,E);var T=E.val;if(h+=E.size,"o1"==T||"o18"==T)o.length%2!=0&&!c&&(l=o.shift()+i.nominalWidthX),a+=o.length>>1,o.length=0,c=!0;else if("o3"==T||"o23"==T)o.length%2!=0&&!c&&(l=o.shift()+i.nominalWidthX),a+=o.length>>1,o.length=0,c=!0;else if("o4"==T)o.length>1&&!c&&(l=o.shift()+i.nominalWidthX,c=!0),u&&t.U.P.closePath(s),p+=o.pop(),t.U.P.moveTo(s,d,p),u=!0;else if("o5"==T)for(;o.length>0;)d+=o.shift(),p+=o.shift(),t.U.P.lineTo(s,d,p);else if("o6"==T||"o7"==T)for(var S=o.length,M="o6"==T,C=0;C<S;C++){var I=o.shift();M?d+=I:p+=I,M=!M,t.U.P.lineTo(s,d,p)}else if("o8"==T||"o24"==T){S=o.length;for(var R=0;R+6<=S;)f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),A=m+o.shift(),d=g+o.shift(),p=A+o.shift(),t.U.P.curveTo(s,f,m,g,A,d,p),R+=6;"o24"==T&&(d+=o.shift(),p+=o.shift(),t.U.P.lineTo(s,d,p))}else{if("o11"==T)break;if("o1234"==T||"o1235"==T||"o1236"==T||"o1237"==T)"o1234"==T&&(m=p,g=(f=d+o.shift())+o.shift(),w=A=m+o.shift(),_=A,b=p,d=(v=(y=(x=g+o.shift())+o.shift())+o.shift())+o.shift(),t.U.P.curveTo(s,f,m,g,A,x,w),t.U.P.curveTo(s,y,_,v,b,d,p)),"o1235"==T&&(f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),A=m+o.shift(),x=g+o.shift(),w=A+o.shift(),y=x+o.shift(),_=w+o.shift(),v=y+o.shift(),b=_+o.shift(),d=v+o.shift(),p=b+o.shift(),o.shift(),t.U.P.curveTo(s,f,m,g,A,x,w),t.U.P.curveTo(s,y,_,v,b,d,p)),"o1236"==T&&(f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),w=A=m+o.shift(),_=A,v=(y=(x=g+o.shift())+o.shift())+o.shift(),b=_+o.shift(),d=v+o.shift(),t.U.P.curveTo(s,f,m,g,A,x,w),t.U.P.curveTo(s,y,_,v,b,d,p)),"o1237"==T&&(f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),A=m+o.shift(),x=g+o.shift(),w=A+o.shift(),y=x+o.shift(),_=w+o.shift(),v=y+o.shift(),b=_+o.shift(),Math.abs(v-d)>Math.abs(b-p)?d=v+o.shift():p=b+o.shift(),t.U.P.curveTo(s,f,m,g,A,x,w),t.U.P.curveTo(s,y,_,v,b,d,p));else if("o14"==T){if(o.length>0&&!c&&(l=o.shift()+r.nominalWidthX,c=!0),4==o.length){var B=o.shift(),P=o.shift(),D=o.shift(),O=o.shift(),L=t.CFF.glyphBySE(r,D),N=t.CFF.glyphBySE(r,O);t.U._drawCFF(r.CharStrings[L],n,r,i,s),n.x=B,n.y=P,t.U._drawCFF(r.CharStrings[N],n,r,i,s)}u&&(t.U.P.closePath(s),u=!1)}else if("o19"==T||"o20"==T)o.length%2!=0&&!c&&(l=o.shift()+i.nominalWidthX),a+=o.length>>1,o.length=0,c=!0,h+=a+7>>3;else if("o21"==T)o.length>2&&!c&&(l=o.shift()+i.nominalWidthX,c=!0),p+=o.pop(),d+=o.pop(),u&&t.U.P.closePath(s),t.U.P.moveTo(s,d,p),u=!0;else if("o22"==T)o.length>1&&!c&&(l=o.shift()+i.nominalWidthX,c=!0),d+=o.pop(),u&&t.U.P.closePath(s),t.U.P.moveTo(s,d,p),u=!0;else if("o25"==T){for(;o.length>6;)d+=o.shift(),p+=o.shift(),t.U.P.lineTo(s,d,p);f=d+o.shift(),m=p+o.shift(),g=f+o.shift(),A=m+o.shift(),d=g+o.shift(),p=A+o.shift(),t.U.P.curveTo(s,f,m,g,A,d,p)}else if("o26"==T)for(o.length%2&&(d+=o.shift());o.length>0;)f=d,m=p+o.shift(),d=g=f+o.shift(),p=(A=m+o.shift())+o.shift(),t.U.P.curveTo(s,f,m,g,A,d,p);else if("o27"==T)for(o.length%2&&(p+=o.shift());o.length>0;)m=p,g=(f=d+o.shift())+o.shift(),A=m+o.shift(),d=g+o.shift(),p=A,t.U.P.curveTo(s,f,m,g,A,d,p);else if("o10"==T||"o29"==T){var F="o10"==T?i:r;if(0==o.length)console.debug("error: empty stack");else{var U=o.pop(),k=F.Subrs[U+F.Bias];n.x=d,n.y=p,n.nStems=a,n.haveWidth=c,n.width=l,n.open=u,t.U._drawCFF(k,n,r,i,s),d=n.x,p=n.y,a=n.nStems,c=n.haveWidth,l=n.width,u=n.open}}else if("o30"==T||"o31"==T){var z=o.length,G=(R=0,"o31"==T);for(R+=z-(S=-3&z);R<S;)G?(m=p,g=(f=d+o.shift())+o.shift(),p=(A=m+o.shift())+o.shift(),S-R==5?(d=g+o.shift(),R++):d=g,G=!1):(f=d,m=p+o.shift(),g=f+o.shift(),A=m+o.shift(),d=g+o.shift(),S-R==5?(p=A+o.shift(),R++):p=A,G=!0),t.U.P.curveTo(s,f,m,g,A,d,p),R+=4}else{if("o"==(T+"").charAt(0))throw console.debug("Unknown operation: "+T,e),T;o.push(T)}}}n.x=d,n.y=p,n.nStems=a,n.haveWidth=c,n.width=l,n.open=u};var n=t,r={Typr:n};return e.Typr=n,e.default=r,Object.defineProperty(e,"__esModule",{value:!0}),e}({}).Typr},function(){return function(e){var t=Uint8Array,n=Uint16Array,r=Uint32Array,i=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),o=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a=function(e,t){for(var i=new n(31),s=0;s<31;++s)i[s]=t+=1<<e[s-1];var o=new r(i[30]);for(s=1;s<30;++s)for(var a=i[s];a<i[s+1];++a)o[a]=a-i[s]<<5|s;return[i,o]},c=a(i,2),l=c[0],u=c[1];l[28]=258,u[258]=28;for(var h=a(s,0)[0],d=new n(32768),p=0;p<32768;++p){var f=(43690&p)>>>1|(21845&p)<<1;f=(61680&(f=(52428&f)>>>2|(13107&f)<<2))>>>4|(3855&f)<<4,d[p]=((65280&f)>>>8|(255&f)<<8)>>>1}var m=function(e,t,r){for(var i=e.length,s=0,o=new n(t);s<i;++s)++o[e[s]-1];var a,c=new n(t);for(s=0;s<t;++s)c[s]=c[s-1]+o[s-1]<<1;if(r){a=new n(1<<t);var l=15-t;for(s=0;s<i;++s)if(e[s])for(var u=s<<4|e[s],h=t-e[s],p=c[e[s]-1]++<<h,f=p|(1<<h)-1;p<=f;++p)a[d[p]>>>l]=u}else for(a=new n(i),s=0;s<i;++s)a[s]=d[c[e[s]-1]++]>>>15-e[s];return a},g=new t(288);for(p=0;p<144;++p)g[p]=8;for(p=144;p<256;++p)g[p]=9;for(p=256;p<280;++p)g[p]=7;for(p=280;p<288;++p)g[p]=8;var A=new t(32);for(p=0;p<32;++p)A[p]=5;var y=m(g,9,1),_=m(A,5,1),v=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},b=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>>(7&t)&n},x=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>>(7&t)},w=function(e,a,c){var u=e.length,d=!a||c,p=!c||c.i;c||(c={}),a||(a=new t(3*u));var f,g=function(e){var n=a.length;if(e>n){var r=new t(Math.max(2*n,e));r.set(a),a=r}},A=c.f||0,w=c.p||0,E=c.b||0,T=c.l,S=c.d,M=c.m,C=c.n,I=8*u;do{if(!T){c.f=A=b(e,w,1);var R=b(e,w+1,3);if(w+=3,!R){var B=e[(j=((f=w)/8|0)+(7&f&&1)+4)-4]|e[j-3]<<8,P=j+B;if(P>u){if(p)throw"unexpected EOF";break}d&&g(E+B),a.set(e.subarray(j,P),E),c.b=E+=B,c.p=w=8*P;continue}if(1==R)T=y,S=_,M=9,C=5;else{if(2!=R)throw"invalid block type";var D=b(e,w,31)+257,O=b(e,w+10,15)+4,L=D+b(e,w+5,31)+1;w+=14;for(var N=new t(L),F=new t(19),U=0;U<O;++U)F[o[U]]=b(e,w+3*U,7);w+=3*O;var k=v(F),z=(1<<k)-1;if(!p&&w+L*(k+7)>I)break;var G=m(F,k,1);for(U=0;U<L;){var j,V=G[b(e,w,z)];if(w+=15&V,(j=V>>>4)<16)N[U++]=j;else{var Q=0,H=0;for(16==j?(H=3+b(e,w,3),w+=2,Q=N[U-1]):17==j?(H=3+b(e,w,7),w+=3):18==j&&(H=11+b(e,w,127),w+=7);H--;)N[U++]=Q}}var W=N.subarray(0,D),q=N.subarray(D);M=v(W),C=v(q),T=m(W,M,1),S=m(q,C,1)}if(w>I)throw"unexpected EOF"}d&&g(E+131072);for(var X=(1<<M)-1,K=(1<<C)-1,Y=M+C+18;p||w+Y<I;){var J=(Q=T[x(e,w)&X])>>>4;if((w+=15&Q)>I)throw"unexpected EOF";if(!Q)throw"invalid length/literal";if(J<256)a[E++]=J;else{if(256==J){T=null;break}var $=J-254;if(J>264){var Z=i[U=J-257];$=b(e,w,(1<<Z)-1)+l[U],w+=Z}var ee=S[x(e,w)&K],te=ee>>>4;if(!ee)throw"invalid distance";if(w+=15&ee,q=h[te],te>3&&(Z=s[te],q+=x(e,w)&(1<<Z)-1,w+=Z),w>I)throw"unexpected EOF";d&&g(E+131072);for(var ne=E+$;E<ne;E+=4)a[E]=a[E-q],a[E+1]=a[E+1-q],a[E+2]=a[E+2-q],a[E+3]=a[E+3-q];E=ne}}c.l=T,c.p=w,c.b=E,T&&(A=1,c.m=M,c.d=S,c.n=C)}while(!A);return E==a.length?a:function(e,i,s){(null==i||i<0)&&(i=0),(null==s||s>e.length)&&(s=e.length);var o=new(e instanceof n?n:e instanceof r?r:t)(s-i);return o.set(e.subarray(i,s)),o}(a,0,E)};return e.convert_streams=function(e){var t=new DataView(e),n=0;function r(){var e=t.getUint16(n);return n+=2,e}function i(){var e=t.getUint32(n);return n+=4,e}function s(e){A.setUint16(y,e),y+=2}function o(e){A.setUint32(y,e),y+=4}for(var a={signature:i(),flavor:i(),length:i(),numTables:r(),reserved:r(),totalSfntSize:i(),majorVersion:r(),minorVersion:r(),metaOffset:i(),metaLength:i(),metaOrigLength:i(),privOffset:i(),privLength:i()},c=0;Math.pow(2,c)<=a.numTables;)c++;c--;for(var l=16*Math.pow(2,c),u=16*a.numTables-l,h=12,d=[],p=0;p<a.numTables;p++)d.push({tag:i(),offset:i(),compLength:i(),origLength:i(),origChecksum:i()}),h+=16;var f,m=new Uint8Array(12+16*d.length+d.reduce((function(e,t){return e+t.origLength+4}),0)),g=m.buffer,A=new DataView(g),y=0;return o(a.flavor),s(a.numTables),s(l),s(c),s(u),d.forEach((function(e){o(e.tag),o(e.origChecksum),o(h),o(e.origLength),e.outOffset=h,(h+=e.origLength)%4!=0&&(h+=4-h%4)})),d.forEach((function(t){var n,r=e.slice(t.offset,t.offset+t.compLength);if(t.compLength!=t.origLength){var i=new Uint8Array(t.origLength);n=new Uint8Array(r,2),w(n,i)}else i=new Uint8Array(r);m.set(i,t.outOffset);var s=0;(h=t.outOffset+t.origLength)%4!=0&&(s=4-h%4),m.set(new Uint8Array(s).buffer,t.outOffset+t.origLength),f=h+s})),g.slice(0,f)},e}({}).convert_streams},function(e,t){const n={M:2,L:2,Q:4,C:6,Z:0},r={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"};let i;function s(e){if(!i){const e={R:2,L:1,D:4,C:16,U:32,T:8};i=new Map;for(let t in r){let n=0;r[t].split(",").forEach((r=>{let[s,o]=r.split("+");s=parseInt(s,36),o=o?parseInt(o,36):0,i.set(n+=s,e[t]);for(let r=o;r--;)i.set(++n,e[t])}))}}return i.get(e)||32}const o=[null,"isol","init","fina","medi"];function a(e){const t=new Uint8Array(e.length);let n=32,r=1,i=-1;for(let o=0;o<e.length;o++){const a=e.codePointAt(o);let c=0|s(a),l=1;8&c||(21&n?22&c?(l=3,1!==r&&3!==r||t[i]++):33&c&&(2!==r&&4!==r||t[i]--):34&n&&(2!==r&&4!==r||t[i]--),r=t[o]=l,n=c,i=o,a>65535&&o++)}return t}function c(t){const r=Object.create(null),i={unitsPerEm:t.head.unitsPerEm,ascender:t.hhea.ascender,descender:t.hhea.descender,forEachGlyph(s,c,l,u){let h=0;const d=1/i.unitsPerEm*c,p=function(t,n){const r=[];for(let i=0;i<n.length;i++){const s=n.codePointAt(i);s>65535&&i++,r.push(e.U.codeToGlyph(t,s))}const i=t.GSUB;if(i){const{lookupList:t,featureList:s}=i;let c;const l=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws)$/,u=[];s.forEach((i=>{if(l.test(i.tag))for(let s=0;s<i.tab.length;s++){if(u[i.tab[s]])continue;u[i.tab[s]]=!0;const l=t[i.tab[s]],h=/^(isol|init|fina|medi)$/.test(i.tag);h&&!c&&(c=a(n));for(let n=0;n<r.length;n++)c&&h&&o[c[n]]!==i.tag||e.U._applySubs(r,n,l,t)}}))}return r}(t,s);let f=0,m=-1;return p.forEach(((i,o)=>{if(-1!==i){let s=r[i];if(!s){const{cmds:o,crds:a}=e.U.glyphToPath(t,i);let c,l,u,h;if(a.length){c=l=1/0,u=h=-1/0;for(let e=0,t=a.length;e<t;e+=2){let t=a[e],n=a[e+1];t<c&&(c=t),n<l&&(l=n),t>u&&(u=t),n>h&&(h=n)}}else c=u=l=h=0;s=r[i]={index:i,advanceWidth:t.hmtx.aWidth[i],xMin:c,yMin:l,xMax:u,yMax:h,pathCommandCount:o.length,forEachPathCommand(e){let t=0;const r=[];for(let i=0,s=o.length;i<s;i++){const s=n[o[i]];r.length=1+s,r[0]=o[i];for(let e=1;e<=s;e++)r[e]=a[t++];e.apply(null,r)}}}}-1!==m&&(h+=e.U.getPairAdjustment(t,m,i)*d),u.call(null,s,h,f),s.advanceWidth&&(h+=s.advanceWidth*d),l&&(h+=l*c),m=i}f+=s.codePointAt(f)>65535?2:1})),h}};return i}return function(n){const r=new Uint8Array(n,0,4),i=e._bin.readASCII(r,0,4);if("wOFF"===i)n=t(n);else if("wOF2"===i)throw new Error("woff2 fonts not supported");return c(e.parse(n)[0])}}],init:(e,t,n)=>n(e(),t())}),L={defaultFontURL:"https://fonts.gstatic.com/s/roboto/v18/KFOmCnqEu92Fr1Mu4mxM.woff",sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},N=new r.Color;let F=!1;const U=Object.create(null);function k(e,t){if(F=!0,(e=z({},e)).font=function(e){G||(G="undefined"==typeof document?{}:document.createElement("a"));return G.href=e,G.href}(e.font||L.defaultFontURL),e.text=""+e.text,e.sdfGlyphSize=e.sdfGlyphSize||L.sdfGlyphSize,null!=e.colorRanges){let t={};for(let n in e.colorRanges)if(e.colorRanges.hasOwnProperty(n)){let r=e.colorRanges[n];"number"!=typeof r&&(r=N.set(r).getHex()),t[n]=r}e.colorRanges=t}Object.freeze(e);const{textureWidth:n,sdfExponent:i}=L,{sdfGlyphSize:s}=e;let o=`${e.font}@${s}`,a=U[o];a||(a=U[o]={sdfTexture:new r.DataTexture(new Uint8Array(s*n*4),n,s,r.RGBAFormat,void 0,void 0,void 0,void 0,r.LinearFilter,r.LinearFilter)},a.sdfTexture.font=e.font),V(e).then((n=>{n.newGlyphSDFs&&(n.newGlyphSDFs.forEach((({textureData:e,atlasIndex:t})=>{const n=a.sdfTexture.image;for(;n.data.length<(t+1)*s*s;){const e=new Uint8Array(2*n.data.length);e.set(n.data),n.data=e,n.height*=2}const r=Math.floor(t/4),i=n.width/s,o=Math.floor(r/i)*n.width*s*4+r%i*s*4+t%4;for(let t=0;t<s;t++){const r=t*s,i=o+t*n.width*4;for(let t=0;t<s;t++)n.data[i+4*t]=e[r+t]}})),a.sdfTexture.needsUpdate=!0),t(Object.freeze({parameters:e,sdfTexture:a.sdfTexture,sdfGlyphSize:s,sdfExponent:i,glyphBounds:n.glyphBounds,glyphAtlasIndices:n.glyphAtlasIndices,glyphColors:n.glyphColors,caretPositions:n.caretPositions,caretHeight:n.caretHeight,chunkedBounds:n.chunkedBounds,ascender:n.ascender,descender:n.descender,lineHeight:n.lineHeight,topBaseline:n.topBaseline,blockBounds:n.blockBounds,visibleBounds:n.visibleBounds,timings:n.timings,get totalBounds(){return console.log("totalBounds deprecated, use blockBounds instead"),n.blockBounds},get totalBlockSize(){console.log("totalBlockSize deprecated, use blockBounds instead");const[e,t,r,i]=n.blockBounds;return[r-e,i-t]}}))}))}function z(e,t){for(let n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}let G;const j=g({name:"FontProcessor",dependencies:[L,O,function(){let e=!1;const t=[];function n(){e&&(t.sort((function(e,t){return e.maxX-t.maxX})),e=!1)}function r(e,t,n,r,i,s){const o=i-n,a=s-r,c=o*o+a*a,l=c?Math.max(0,Math.min(1,((e-n)*o+(t-r)*a)/c)):0,u=e-(n+l*o),h=t-(r+l*a);return u*u+h*h}return{addLineSegment:function(n,r,i,s){const o={x0:n,y0:r,x1:i,y1:s,minX:Math.min(n,i),minY:Math.min(r,s),maxX:Math.max(n,i),maxY:Math.max(r,s)};t.push(o),e=!0},findNearestSignedDistance:function(e,i){n();let s=1/0,o=1/0;for(let n=t.length;n--;){const a=t[n];if(a.maxX+o<=e)break;if(e+o>a.minX&&i-o<a.maxY&&i+o>a.minY){const t=r(e,i,a.x0,a.y0,a.x1,a.y1);t<s&&(s=t,o=Math.sqrt(s))}}return function(e,r){n();let i=!1;for(let n=t.length;n--;){const s=t[n];if(s.maxX<=e)break;if(s.minY<r&&s.maxY>r){s.y0>r!=s.y1>r&&e<(s.x1-s.x0)*(r-s.y0)/(s.y1-s.y0)+s.x0&&(i=!i)}}return i}(e,i)&&(o=-o),o}}},function(e,t){const{sdfExponent:n,sdfMargin:r}=t;function i(e,t,n,r,i,s,o){const a=1-o;return{x:a*a*e+2*a*o*n+o*o*i,y:a*a*t+2*a*o*r+o*o*s}}function s(e,t,n,r,i,s,o,a,c){const l=1-c;return{x:l*l*l*e+3*l*l*c*n+3*l*c*c*i+c*c*c*o,y:l*l*l*t+3*l*l*c*r+3*l*c*c*s+c*c*c*a}}return function(t,o){const a=new Uint8Array(o*o),c=t.xMax-t.xMin,l=t.yMax-t.yMin,u=Math.max(c,l),h=Math.max(c,l)/o*(r*o+.5),d=t.xMin-h,p=t.yMin-h,f=t.xMax+h,m=t.yMax+h,g=f-d,A=m-p,y=Math.max(g,A);if(t.pathCommandCount){const r=e(t);let c,l,h,f;t.forEachPathCommand(((e,t,n,o,a,u,d)=>{switch(e){case"M":h=c=t,f=l=n;break;case"L":t===h&&n===f||r.addLineSegment(h,f,h=t,f=n);break;case"Q":{let e={x:h,y:f};for(let s=1;s<16;s++){let c=i(h,f,t,n,o,a,s/15);r.addLineSegment(e.x,e.y,c.x,c.y),e=c}h=o,f=a;break}case"C":{let e={x:h,y:f};for(let i=1;i<16;i++){let c=s(h,f,t,n,o,a,u,d,i/15);r.addLineSegment(e.x,e.y,c.x,c.y),e=c}h=u,f=d;break}case"Z":h===c&&f===l||r.addLineSegment(h,f,c,l)}}));for(let e=0;e<o;e++)for(let t=0;t<o;t++){const i=r.findNearestSignedDistance(d+g*(e+.5)/o,p+A*(t+.5)/o,u);let s=Math.pow(1-Math.abs(i)/y,n)/2;i<0&&(s=1-s),s=Math.max(0,Math.min(255,Math.round(255*s))),a[t*o+e]=s}}return{textureData:a,renderingBounds:[d,p,f,m]}}},function(e,t,n,r){const{defaultFontURL:i}=r,s=Object.create(null),o=Object.create(null),a=1/0,c=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/;function l(t,n){t||(t=i);let r=o[t];r?r.pending?r.pending.push(n):n(r):(o[t]={pending:[n]},function(t,n){!function r(){const s=e=>{console.error(`Failure loading font ${t}${t===i?"":"; trying fallback"}`,e),t!==i&&(t=i,r())};try{const r=new XMLHttpRequest;r.open("get",t,!0),r.responseType="arraybuffer",r.onload=function(){if(r.status>=400)s(new Error(r.statusText));else if(r.status>0)try{const t=e(r.response);n(t)}catch(e){s(e)}},r.onerror=s,r.send()}catch(e){s(e)}}()}(t,(e=>{let n=o[t].pending;o[t]=e,n.forEach((t=>t(e)))})))}function u({text:e="",font:r=i,sdfGlyphSize:o=64,fontSize:u=1,letterSpacing:f=0,lineHeight:m="normal",maxWidth:g=a,direction:A,textAlign:y="left",textIndent:_=0,whiteSpace:v="normal",overflowWrap:b="normal",anchorX:x=0,anchorY:w=0,includeCaretPositions:E=!1,chunkedBoundsSize:T=8192,colorRanges:S=null},M,C=!1){const I=d(),R={total:0,fontLoad:0,layout:0,sdf:{},sdfTotal:0};e.indexOf("\r")>-1&&(console.warn("FontProcessor.process: got text with \\r chars; normalizing to \\n"),e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n")),u=+u,f=+f,g=+g,m=m||"normal",_=+_,function(e,t,n){e||(e=i);let r=`${e}@${t}`,o=s[r];o?n(o):l(e,(e=>{o=s[r]||(s[r]={fontObj:e,glyphs:{},glyphCount:0}),n(o)}))}(r,o,(r=>{const i=r.fontObj,s=isFinite(g);let l=null,B=null,P=null,D=null,O=null,L=null,N=null,F=0,U=0,k="nowrap"!==v;const{ascender:z,descender:G,unitsPerEm:j}=i;R.fontLoad=d()-I;const V=d(),Q=u/j;"normal"===m&&(m=(z-G)/j);const H=((m*=u)-(z-G)*Q)/2,W=-(z*Q+H),q=Math.min(m,(z-G)*Q),X=(z+G)/2*Q-q/2;let K=_,Y=new p;const J=[Y];i.forEachGlyph(e,u,f,((t,n,r)=>{const i=e.charAt(r),o=t.advanceWidth*Q,a=Y.count;let l;if("isEmpty"in t||(t.isWhitespace=!!i&&/\s/.test(i),t.isEmpty=t.xMin===t.xMax||t.yMin===t.yMax||c.test(i)),t.isWhitespace||t.isEmpty||U++,k&&s&&!t.isWhitespace&&n+o+K>g&&a){if(Y.glyphAt(a-1).glyphObj.isWhitespace)l=new p,K=-n;else for(let e=a;e--;){if(0===e&&"break-word"===b){l=new p,K=-n;break}if(Y.glyphAt(e).glyphObj.isWhitespace){l=Y.splitAt(e+1);const t=l.glyphAt(0).x;K-=t;for(let e=l.count;e--;)l.glyphAt(e).x-=t;break}}l&&(Y.isSoftWrapped=!0,Y=l,J.push(Y),F=g)}let h=Y.glyphAt(Y.count);h.glyphObj=t,h.x=n+K,h.width=o,h.charIndex=r,"\n"===i&&(Y=new p,J.push(Y),K=-(n+o+f*u)+_)})),J.forEach((e=>{for(let t=e.count;t--;){let{glyphObj:n,x:r,width:i}=e.glyphAt(t);if(!n.isWhitespace)return e.width=r+i,void(e.width>F&&(F=e.width))}}));let $=0,Z=0;if(x&&("number"==typeof x?$=-x:"string"==typeof x&&($=-F*("left"===x?0:"center"===x?.5:"right"===x?1:h(x)))),w)if("number"==typeof w)Z=-w;else if("string"==typeof w){let e=J.length*m;Z="top"===w?0:"top-baseline"===w?-W:"middle"===w?e/2:"bottom"===w?e:"bottom-baseline"===w?e-H+G*Q:h(w)*e}if(!C){const s=n.getEmbeddingLevels(e,A);B=new Float32Array(4*U),P=new Float32Array(U),L=[a,a,-1/0,-1/0],N=[];let c=W;E&&(O=new Float32Array(3*e.length)),S&&(D=new Uint8Array(3*U));let u,h,p=0,f=-1,g=-1;J.forEach(((A,_)=>{let{count:v,width:b}=A;if(v>0){let m=0;for(let e=v;e--&&A.glyphAt(e).glyphObj.isWhitespace;)m++;let _=0,x=0;if("center"===y)_=(F-b)/2;else if("right"===y)_=F-b;else if("justify"===y&&A.isSoftWrapped){let e=0;for(let t=v-m;t--;)A.glyphAt(t).glyphObj.isWhitespace&&e++;x=(F-b)/e}if(x||_){let e=0;for(let t=0;t<v;t++){let n=A.glyphAt(t);const r=n.glyphObj;n.x+=_+e,0!==x&&r.isWhitespace&&t<v-m&&(e+=x,n.width+=x)}}const w=n.getReorderSegments(e,s,A.glyphAt(0).charIndex,A.glyphAt(A.count-1).charIndex);for(let e=0;e<w.length;e++){const[t,n]=w[e];let r=1/0,i=-1/0;for(let e=0;e<v;e++)if(A.glyphAt(e).charIndex>=t){let t=e,s=e;for(;s<v;s++){let e=A.glyphAt(s);if(e.charIndex>n)break;s<v-m&&(r=Math.min(r,e.x),i=Math.max(i,e.x+e.width))}for(let e=t;e<s;e++){const t=A.glyphAt(e);t.x=i-(t.x+t.width-r)}break}}let M;const C=e=>M=e;for(let m=0;m<v;m++){let y=A.glyphAt(m);M=y.glyphObj;const _=1&s.levels[y.charIndex];if(_){const t=n.getMirroredCharacter(e[y.charIndex]);t&&i.forEachGlyph(t,0,0,C)}if(E){const{charIndex:e}=y,t=y.x+$,n=y.x+y.width+$;for(O[3*e]=_?n:t,O[3*e+1]=_?t:n,O[3*e+2]=c+X+Z;e-f>1;)O[3*(f+1)]=O[3*f],O[3*(f+1)+1]=O[3*f+1],O[3*(f+1)+2]=O[3*f+2],f++;f=e}if(S){const{charIndex:e}=y;for(;e>g;)g++,S.hasOwnProperty(g)&&(h=S[g])}if(!M.isWhitespace&&!M.isEmpty){const n=p++;let i=r.glyphs[M.index];if(!i){const n=d(),s=t(M,o);R.sdf[e.charAt(y.charIndex)]=d()-n,s.atlasIndex=r.glyphCount++,l||(l=[]),l.push(s),i=r.glyphs[M.index]={atlasIndex:s.atlasIndex,glyphObj:M,renderingBounds:s.renderingBounds}}const s=i.renderingBounds,f=4*n,m=y.x+$,g=c+Z;B[f]=m+s[0]*Q,B[f+1]=g+s[1]*Q,B[f+2]=m+s[2]*Q,B[f+3]=g+s[3]*Q;const A=m+M.xMin*Q,_=g+M.yMin*Q,v=m+M.xMax*Q,b=g+M.yMax*Q;A<L[0]&&(L[0]=A),_<L[1]&&(L[1]=_),v>L[2]&&(L[2]=v),b>L[3]&&(L[3]=b),n%T===0&&(u={start:n,end:n,rect:[a,a,-1/0,-1/0]},N.push(u)),u.end++;const x=u.rect;if(A<x[0]&&(x[0]=A),_<x[1]&&(x[1]=_),v>x[2]&&(x[2]=v),b>x[3]&&(x[3]=b),P[n]=i.atlasIndex,S){const e=3*n;D[e]=h>>16&255,D[e+1]=h>>8&255,D[e+2]=255&h}}}}c-=m}))}for(let e in R.sdf)R.sdfTotal+=R.sdf[e];R.layout=d()-V-R.sdfTotal,R.total=d()-I,M({glyphBounds:B,glyphAtlasIndices:P,caretPositions:O,caretHeight:q,glyphColors:D,chunkedBounds:N,ascender:z*Q,descender:G*Q,lineHeight:m,topBaseline:W,blockBounds:[$,Z-J.length*m,$+F,Z],visibleBounds:L,newGlyphSDFs:l,timings:R})}))}function h(e){let t=e.match(/^([\d.]+)%$/),n=t?parseFloat(t[1]):NaN;return isNaN(n)?0:n/100}function d(){return(self.performance||Date).now()}function p(){this.data=[]}const f=["glyphObj","x","width","charIndex"];return p.prototype={width:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/f.length)},glyphAt(e){let t=p.flyweight;return t.data=this.data,t.index=e,t},splitAt(e){let t=new p;return t.data=this.data.splice(e*f.length),t}},p.flyweight=f.reduce(((e,t,n,r)=>(Object.defineProperty(e,t,{get(){return this.data[this.index*f.length+n]},set(e){this.data[this.index*f.length+n]=e}}),e)),{data:null,index:0}),{process:u,measure:function(e,t){u(e,(e=>{const[n,r,i,s]=e.blockBounds;t({width:i-n,height:s-r})}),{metricsOnly:!0})},loadFont:l}},v],init(e,t,n,r,i,s){const{sdfExponent:o,sdfMargin:a,defaultFontURL:c}=e;return i(t,r(n,{sdfExponent:o,sdfMargin:a}),s(),{defaultFontURL:c})}}),V=g({name:"TextBuilder",dependencies:[j,_],init:(e,t)=>function(n){const r=new t;return e.process(n,r.resolve),r},getTransferables(e){const t=[e.glyphBounds.buffer,e.glyphAtlasIndices.buffer];return e.caretPositions&&t.push(e.caretPositions.buffer),e.newGlyphSDFs&&e.newGlyphSDFs.forEach((e=>{t.push(e.textureData.buffer)})),t}});const Q=(()=>{const e={};new r.Vector3;const t="aTroikaGlyphIndex";class n extends r.InstancedBufferGeometry{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new r.Sphere,this.boundingBox=new r.Box3}computeBoundingSphere(){}computeBoundingBox(){}set detail(t){if(t!==this._detail){this._detail=t,("number"!=typeof t||t<1)&&(t=1);let n=function(t){let n=e[t];return n||(n=e[t]=new r.PlaneGeometry(1,1,t,t).translate(.5,.5,0)),n}(t);["position","normal","uv"].forEach((e=>{this.attributes[e]=n.attributes[e].clone()})),this.setIndex(n.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,n,r,o,a){i(this,"aTroikaGlyphBounds",e,4),i(this,t,n,1),i(this,"aTroikaGlyphColor",a,3),this._blockBounds=r,this._chunkedBounds=o,s(this,n.length),this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:n}=this;if(t){const{PI:r,floor:i,min:s,max:o,sin:a,cos:c}=Math,l=r/2,u=2*r,h=Math.abs(t),d=e[0]/h,p=e[2]/h,f=i((d+l)/u)!==i((p+l)/u)?-h:s(a(d)*h,a(p)*h),m=i((d-l)/u)!==i((p-l)/u)?h:o(a(d)*h,a(p)*h),g=i((d+r)/u)!==i((p+r)/u)?2*h:o(h-c(d)*h,h-c(p)*h);n.min.set(f,e[1],t<0?-g:0),n.max.set(m,e[3],t<0?0:g)}else n.min.set(e[0],e[1],0),n.max.set(e[2],e[3],0);n.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let n=this.getAttribute(t).count,r=this._chunkedBounds;if(r)for(let t=r.length;t--;){n=r[t].end;let i=r[t].rect;if(i[1]<e.w&&i[3]>e.y&&i[0]<e.z&&i[2]>e.x)break}s(this,n)}}function i(e,t,n,i){const s=e.getAttribute(t);n?s&&s.array.length===n.length?(s.array.set(n),s.needsUpdate=!0):(e.setAttribute(t,new r.InstancedBufferAttribute(n,i)),delete e._maxInstanceCount,e.dispose()):s&&e.deleteAttribute(t)}function s(e,t){e[e.hasOwnProperty("instanceCount")?"instanceCount":"maxInstancedCount"]=t}return n.prototype.setAttribute||(n.prototype.setAttribute=function(e,t){return this.attributes[e]=t,this}),n})();const H=(()=>{const e=new r.MeshBasicMaterial({color:16777215,side:r.DoubleSide,transparent:!0}),t=8421504,n=new r.Matrix4,i=new r.Vector3,s=new r.Vector3,o=[],a=new r.Vector3,c="+x+y";function l(e){return Array.isArray(e)?e[0]:e}let u=()=>{const t=new r.Mesh(new r.PlaneGeometry(1,1),e);return u=()=>t,t},h=()=>{const t=new r.Mesh(new r.PlaneGeometry(1,1,32,1),e);return h=()=>t,t};const d={type:"syncstart"},p={type:"synccomplete"},f=["font","fontSize","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],m=f.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");class g extends r.Mesh{constructor(){super(new Q,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.fontSize=.1,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=t,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=c,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(d),k({text:this.text,font:this.font,fontSize:this.fontSize||.1,letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize},(t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const n=this._queuedSyncs;n&&(this._queuedSyncs=null,this._needsSync=!0,this.sync((()=>{n.forEach((e=>e&&e()))}))),this.dispatchEvent(p),e&&e()}))))}onBeforeRender(e,t,n,r,i,s){this.sync(),i.isTroikaTextMaterial&&this._prepareForRender(i)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}get material(){let t=this._derivedMaterial;const n=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=e.clone());if(t&&t.baseMaterial===n||(t=this._derivedMaterial=function(e){const t=I(e,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new r.Vector2},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new r.Vector4(0,0,0,0)},uTroikaClipRect:{value:new r.Vector4(0,0,0,0)},uTroikaDistanceOffset:{value:0},uTroikaOutlineOpacity:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new r.Vector2},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new r.Color},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new r.Matrix3},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:"\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform vec4 uTroikaTotalBounds;\nuniform vec4 uTroikaClipRect;\nuniform mat3 uTroikaOrient;\nuniform bool uTroikaUseGlyphColors;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaBlurRadius;\nuniform vec2 uTroikaPositionOffset;\nuniform float uTroikaCurveRadius;\nattribute vec4 aTroikaGlyphBounds;\nattribute float aTroikaGlyphIndex;\nattribute vec3 aTroikaGlyphColor;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec3 vTroikaGlyphColor;\nvarying vec2 vTroikaGlyphDimensions;\n",vertexTransform:"\nvec4 bounds = aTroikaGlyphBounds;\nbounds.xz += uTroikaPositionOffset.x;\nbounds.yw -= uTroikaPositionOffset.y;\n\nvec4 outlineBounds = vec4(\n  bounds.xy - uTroikaDistanceOffset - uTroikaBlurRadius,\n  bounds.zw + uTroikaDistanceOffset + uTroikaBlurRadius\n);\nvec4 clippedBounds = vec4(\n  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),\n  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)\n);\n\nvec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);\n\nposition.xy = mix(bounds.xy, bounds.zw, clippedXY);\n\nuv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);\n\nfloat rad = uTroikaCurveRadius;\nif (rad != 0.0) {\n  float angle = position.x / rad;\n  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);\n  normal.xz = vec2(sin(angle), cos(angle));\n}\n  \nposition = uTroikaOrient * position;\nnormal = uTroikaOrient * normal;\n\nvTroikaGlyphUV = clippedXY.xy;\nvTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);\n\n\nfloat txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;\nvec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;\nvec2 txStartUV = txUvPerSquare * vec2(\n  mod(floor(aTroikaGlyphIndex / 4.0), txCols),\n  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)\n);\nvTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);\nvTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);\n",fragmentDefs:"\nuniform sampler2D uTroikaSDFTexture;\nuniform vec2 uTroikaSDFTextureSize;\nuniform float uTroikaSDFGlyphSize;\nuniform float uTroikaSDFExponent;\nuniform float uTroikaDistanceOffset;\nuniform float uTroikaFillOpacity;\nuniform float uTroikaOutlineOpacity;\nuniform float uTroikaBlurRadius;\nuniform vec3 uTroikaStrokeColor;\nuniform float uTroikaStrokeWidth;\nuniform float uTroikaStrokeOpacity;\nuniform bool uTroikaSDFDebug;\nvarying vec2 vTroikaGlyphUV;\nvarying vec4 vTroikaTextureUVBounds;\nvarying float vTroikaTextureChannel;\nvarying vec2 vTroikaGlyphDimensions;\n\nfloat troikaSdfValueToSignedDistance(float alpha) {\n  // Inverse of encoding in SDFGenerator.js\n  \n  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);\n  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;\n  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);\n  return signedDist;\n}\n\nfloat troikaGlyphUvToSdfValue(vec2 glyphUV) {\n  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);\n  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);\n  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1\n  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;\n}\n\nfloat troikaGlyphUvToDistance(vec2 uv) {\n  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));\n}\n\nfloat troikaGetAADist() {\n  \n  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300\n  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;\n  #else\n  return vTroikaGlyphDimensions.x / 64.0;\n  #endif\n}\n\nfloat troikaGetFragDistValue() {\n  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);\n  float distance = troikaGlyphUvToDistance(clampedGlyphUV);\n \n  // Extrapolate distance when outside bounds:\n  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : \n    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);\n\n  \n\n  return distance;\n}\n\nfloat troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {\n  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)\n  float alpha = step(-distanceOffset, -distance);\n  #else\n\n  float alpha = smoothstep(\n    distanceOffset + aaDist,\n    distanceOffset - aaDist,\n    distance\n  );\n  #endif\n\n  return alpha;\n}\n",fragmentColorTransform:"\nfloat aaDist = troikaGetAADist();\nfloat distance = troikaGetFragDistValue();\nfloat edgeAlpha = uTroikaSDFDebug ?\n  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :\n  troikaGetEdgeAlpha(distance, uTroikaDistanceOffset, max(aaDist, uTroikaBlurRadius));\n\n#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)\nvec4 fillRGBA = gl_FragColor;\nfillRGBA.a *= uTroikaFillOpacity;\nvec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);\nif (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;\ngl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(\n  -uTroikaStrokeWidth - aaDist,\n  -uTroikaStrokeWidth + aaDist,\n  distance\n));\ngl_FragColor.a *= edgeAlpha;\n#endif\n\nif (edgeAlpha == 0.0) {\n  discard;\n}\n",customRewriter({vertexShader:e,fragmentShader:t}){let n=/\buniform\s+vec3\s+diffuse\b/;return n.test(t)&&(t=t.replace(n,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),n.test(e)||(e=e.replace(b,"uniform vec3 diffuse;\n$&\nvTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;\n"))),{vertexShader:e,fragmentShader:t}}});return t.transparent=!0,Object.defineProperties(t,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),t}(n),n.addEventListener("dispose",(function e(){n.removeEventListener("dispose",e),t.dispose()}))),this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY){let e=t._outlineMtl;return e||(e=t._outlineMtl=Object.create(t,{id:{value:t.id+.1}}),e.isTextOutlineMaterial=!0,e.depthWrite=!1,e.map=null,t.addEventListener("dispose",(function n(){t.removeEventListener("dispose",n),e.dispose()}))),[e,t]}return t}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return l(this.material).getDepthMaterial()}get customDistanceMaterial(){return l(this.material).getDistanceMaterial()}_prepareForRender(e){const o=e.isTextOutlineMaterial,l=e.uniforms,u=this.textRenderInfo;if(u){const{sdfTexture:e,blockBounds:n}=u;l.uTroikaSDFTexture.value=e,l.uTroikaSDFTextureSize.value.set(e.image.width,e.image.height),l.uTroikaSDFGlyphSize.value=u.sdfGlyphSize,l.uTroikaSDFExponent.value=u.sdfExponent,l.uTroikaTotalBounds.value.fromArray(n),l.uTroikaUseGlyphColors.value=!o&&!!u.glyphColors;let r,i,s,a=0,c=0,h=0,d=0,p=0;if(o){let{outlineWidth:e,outlineOffsetX:t,outlineOffsetY:n,outlineBlur:i,outlineOpacity:s}=this;a=this._parsePercent(e)||0,c=Math.max(0,this._parsePercent(i)||0),r=s,d=this._parsePercent(t)||0,p=this._parsePercent(n)||0}else h=Math.max(0,this._parsePercent(this.strokeWidth)||0),h&&(s=this.strokeColor,l.uTroikaStrokeColor.value.set(null==s?t:s),i=this.strokeOpacity,null==i&&(i=1)),r=this.fillOpacity;l.uTroikaDistanceOffset.value=a,l.uTroikaPositionOffset.value.set(d,p),l.uTroikaBlurRadius.value=c,l.uTroikaStrokeWidth.value=h,l.uTroikaStrokeOpacity.value=i,l.uTroikaFillOpacity.value=null==r?1:r,l.uTroikaCurveRadius.value=this.curveRadius||0;let f=this.clipRect;if(f&&Array.isArray(f)&&4===f.length)l.uTroikaClipRect.value.fromArray(f);else{const e=100*(this.fontSize||.1);l.uTroikaClipRect.value.set(n[0]-e,n[1]-e,n[2]+e,n[3]+e)}this.geometry.applyClipRect(l.uTroikaClipRect.value)}l.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const h=o?this.outlineColor||0:this.color;if(null==h)delete e.color;else{const t=e.hasOwnProperty("color")?e.color:e.color=new r.Color;h===t._input&&"object"!=typeof h||t.set(t._input=h)}let d=this.orientation||c;if(d!==e._orientation){let t=l.uTroikaOrient.value;d=d.replace(/[^-+xyz]/g,"");let r=d!==c&&d.match(/^([-+])([xyz])([-+])([xyz])$/);if(r){let[,e,o,c,l]=r;i.set(0,0,0)[o]="-"===e?1:-1,s.set(0,0,0)[l]="-"===c?-1:1,n.lookAt(a,i.cross(s),s),t.setFromMatrix4(n)}else t.identity();e._orientation=d}}_parsePercent(e){if("string"==typeof e){let t=e.match(/^(-?[\d.]+)%$/),n=t?parseFloat(t[1]):NaN;e=(isNaN(n)?0:n/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new r.Vector2){t.copy(e);const n=this.curveRadius;return n&&(t.x=Math.atan2(e.x,Math.abs(n)-Math.abs(e.z))*Math.abs(n)),t}worldPositionToTextCoords(e,t=new r.Vector2){return i.copy(e),this.localPositionToTextCoords(this.worldToLocal(i),t)}raycast(e,t){const{textRenderInfo:n,curveRadius:r}=this;if(n){const i=n.blockBounds,s=r?h():u(),a=s.geometry,{position:c,uv:l}=a.attributes;for(let e=0;e<l.count;e++){let t=i[0]+l.getX(e)*(i[2]-i[0]);const n=i[1]+l.getY(e)*(i[3]-i[1]);let s=0;r&&(s=r-Math.cos(t/r)*r,t=Math.sin(t/r)*r),c.setXYZ(e,t,n,s)}a.boundingSphere=this.geometry.boundingSphere,a.boundingBox=this.geometry.boundingBox,s.matrixWorld=this.matrixWorld,s.material.side=this.material.side,o.length=0,s.raycast(e,o);for(let e=0;e<o.length;e++)o[e].object=this,t.push(o[e])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,m.forEach((t=>{this[t]=e[t]})),this}clone(){return(new this.constructor).copy(this)}}f.forEach((e=>{const t="_private_"+e;Object.defineProperty(g.prototype,e,{get(){return this[t]},set(e){e!==this[t]&&(this[t]=e,this._needsSync=!0)}})}));let A=!1;return Object.defineProperty(g.prototype,"anchor",{get(){return this._deprecated_anchor},set(e){this._deprecated_anchor=e,A||(console.warn("TextMesh: `anchor` has been deprecated; use `anchorX` and `anchorY` instead."),A=!0),Array.isArray(e)?(this.anchorX=100*(+e[0]||0)+"%",this.anchorY=100*(+e[1]||0)+"%"):this.anchorX=this.anchorY=0}}),g})();new WeakMap;new WeakMap;const W={d:"°",c:"⌀",p:"±"},q=(e,t)=>{e=e.replace(/%%(.)/g,((e,t)=>W[t]||t));const n=t?.encoding;let r,i=n instanceof TextDecoder?n:void 0,s="";const o=[],a=e=>{s&&(o.push(s),s=""),o.push(e)};for(let t=0;t<e.length;t++)switch(r=e[t]){default:s+=r;break;case"\\":switch(r=e[++t]){default:s+=r;break;case"P":s+="\n";break;case"f":case"F":{let n="";for(;r=e[++t];){if(";"===r){a({f:n});break}if("|"===r){const r={f:n},i=e.indexOf(";",++t);for(const n of e.slice(t,i).split("|"))r[n[0]]=+n.slice(1);t=i,a(r);break}n+="\\"===r?e[++t]:r}break}case"S":{let n,i="",s="";for(;r=e[++t];){if(";"===r){n&&a({S:[i,n,s]});break}"\\"===r?n?s+=e[++t]:i+=e[++t]:n?s+=r:"^"===r||"/"===r||"#"===r?n=r:i+=r}break}case"H":case"W":const o=++t,[,c,l]=e.slice(o,t=e.indexOf(";",t)).match(/^(\d*(?:\.\d+)?)(\D*)$/);a({[r]:[+c,l]});break;case"Q":case"A":case"C":case"T":{const n=++t;a({[r]:+e.slice(n,t=e.indexOf(";",t))});break}case"L":case"O":case"K":a({[r]:1});break;case"l":case"o":case"k":a({[r.toUpperCase()]:0});break;case"U":case"u":"+"===e[t+1]?(s+=String.fromCodePoint(parseInt(e.substr(t+2,4),16)),t+=5):s+=r;break;case"M":case"m":n?"+"===e[t+1]&&"1"===e[t+2]?(s+=(i=i||new TextDecoder(n)).decode(new Uint8Array([parseInt(e.substr(t+3,2),16),parseInt(e.substr(t+5,2),16)])),t+=6):s+=r:s+="\\"+r}break;case"{":{let n=1;const i=t;for(;r=e[++t];)if("{"===r)n++;else if("}"===r){if(0==--n){a(q(e.slice(i+1,t)));break}}else"\\"===r&&t++;break}}return s&&o.push(s),o};var X=n(4385);var K={Math:{}};function Y(e,t,n,i){var s,o,a,c,l,u,h,d,p,f={};f.startPoint=c=e?new r.Vector2(e.x,e.y):new r.Vector2(0,0),f.endPoint=l=t?new r.Vector2(t.x,t.y):new r.Vector2(1,0),f.bulge=n=n||1,u=4*Math.atan(n),h=c.distanceTo(l)/2/Math.sin(u/2),a=K.Math.polar(e,h,K.Math.angle2(c,l)+(Math.PI/2-u/2)),f.segments=i=i||Math.max(Math.abs(Math.ceil(u/(Math.PI/18))),6),d=K.Math.angle2(a,c),p=u/i;var m=[];for(m.push(new r.Vector3(c.x,c.y,0)),o=1;o<=i-1;o++)s=K.Math.polar(a,Math.abs(h),d+p*o),m.push(new r.Vector3(s.x,s.y,0));return m}function J(e,t,n,o,a){!function(e){var t,n;if(!e.tables||!e.tables.lineType)return;var r=e.tables.lineType.lineTypes;for(n in r)(t=r[n]).pattern&&(t.material=I(t.pattern))}(e);var c,l,u=new r.Scene,h={min:{x:0,y:0,z:0},max:{x:0,y:0,z:0}};for(c=0;c<e.entities.length;c++){if(l=T(e.entities[c],e)){var d=(new r.Box3).setFromObject(l);isFinite(d.min.x)&&h.min.x>d.min.x&&(h.min.x=d.min.x),isFinite(d.min.y)&&h.min.y>d.min.y&&(h.min.y=d.min.y),isFinite(d.min.z)&&h.min.z>d.min.z&&(h.min.z=d.min.z),isFinite(d.max.x)&&h.max.x<d.max.x&&(h.max.x=d.max.x),isFinite(d.max.y)&&h.max.y<d.max.y&&(h.max.y=d.max.y),isFinite(d.max.z)&&h.max.z<d.max.z&&(h.max.z=d.max.z),u.add(l)}l=null}var p=(n=n||t.clientWidth)/(o=o||t.clientHeight),f=h.max.x,m=h.max.y,g=h.min.x,A=h.min.y,y=f-g,_=m-A,v=v||{x:y/2+g,y:_/2+A};p>Math.abs(y/_)?y=_*p:_=y/p;var b={bottom:-_/2,left:-y/2,top:_/2,right:y/2,center:{x:v.x,y:v.y}},x=new r.OrthographicCamera(b.left,b.right,b.top,b.bottom,1,19);x.position.z=10,x.position.x=b.center.x,x.position.y=b.center.y;var w=this.renderer=new r.WebGLRenderer;w.setSize(n,o),w.setClearColor(268435455,1),t.appendChild(w.domElement),t.style.display="block";var E=new i(x,t);function T(e,t){var n;if("CIRCLE"===e.type||"ARC"===e.type)n=function(e,t){var n,i;"CIRCLE"===e.type?i=(n=e.startAngle||0)+2*Math.PI:(n=e.startAngle,i=e.endAngle);var s=new r.ArcCurve(0,0,e.radius,n,i),o=s.getPoints(32),a=(new r.BufferGeometry).setFromPoints(o),c=new r.LineBasicMaterial({color:C(e,t)}),l=new r.Line(a,c);return l.position.x=e.center.x,l.position.y=e.center.y,l.position.z=e.center.z,l}(e,t);else if("LWPOLYLINE"===e.type||"LINE"===e.type||"POLYLINE"===e.type)n=function(e,t){let n=[],i=C(e,t);var s,o,a,c,l,u;if(!e.vertices)return console.log("entity missing vertices.");for(l=0;l<e.vertices.length;l++)if(e.vertices[l].bulge){c=e.vertices[l].bulge;let t=Y(e.vertices[l],l+1<e.vertices.length?e.vertices[l+1]:n[0],c);n.push.apply(n,t)}else a=e.vertices[l],n.push(new r.Vector3(a.x,a.y,0));e.shape&&n.push(n[0]);e.lineType&&(o=t.tables.lineType.lineTypes[e.lineType]);s=o&&o.pattern&&0!==o.pattern.length?new r.LineDashedMaterial({color:i,gapSize:4,dashSize:4}):new r.LineBasicMaterial({linewidth:1,color:i});var h=(new r.BufferGeometry).setFromPoints(n);return u=new r.Line(h,s),u}(e,t);else if("TEXT"===e.type)n=function(e,t){var n,i,s;if(!a)return console.warn("Text is not supported without a Three.js font loaded with THREE.FontLoader! Load a font of your choice and pass this into the constructor. See the sample for this repository or Three.js examples at http://threejs.org/examples/?q=text#webgl_geometry_text for more details.");if(n=new X.TextGeometry(e.text,{font:a,height:0,size:e.textHeight||12}),e.rotation){var o=e.rotation*Math.PI/180;n.rotateZ(o)}return i=new r.MeshBasicMaterial({color:C(e,t)}),s=new r.Mesh(n,i),s.position.x=e.startPoint.x,s.position.y=e.startPoint.y,s.position.z=e.startPoint.z,s}(e,t);else if("SOLID"===e.type)n=function(e,t){var n,i,s=new r.BufferGeometry,o=e.points;return M(i=[],o[0],o[1],o[2]),M(i,o[1],o[2],o[3]),n=new r.MeshBasicMaterial({color:C(e,t)}),s.setFromPoints(i),new r.Mesh(s,n)}(e,t);else if("POINT"===e.type)n=function(e,t){var n,i,s;n=new r.BufferGeometry,n.setAttribute("position",new r.Float32BufferAttribute([e.position.x,e.position.y,e.position.z],3));var o=C(e,t);i=new r.PointsMaterial({size:.1,color:new r.Color(o)}),s=new r.Points(n,i),u.add(s)}(e,t);else if("INSERT"===e.type)n=function(e,t){var n=t.blocks[e.name];if(!n.entities)return null;var i=new r.Object3D;e.xScale&&(i.scale.x=e.xScale);e.yScale&&(i.scale.y=e.yScale);e.rotation&&(i.rotation.z=e.rotation*Math.PI/180);e.position&&(i.position.x=e.position.x,i.position.y=e.position.y,i.position.z=e.position.z);for(var s=0;s<n.entities.length;s++){var o=T(n.entities[s],t);o&&i.add(o)}return i}(e,t);else if("SPLINE"===e.type)n=function(e,t){var n=C(e,t),i=function(e,t,n,i,o){const a=[],c=e.map((function(e){return[e.x,e.y]})),l=[n[t]],u=[n[t],n[n.length-1-t]];for(let e=t+1;e<n.length-t;++e)l[l.length-1]!==n[e]&&l.push(n[e]);i=i||25;for(let e=1;e<l.length;++e){const h=l[e-1],d=l[e];for(let e=0;e<=i;++e){let l=(e/i*(d-h)+h-u[0])/(u[1]-u[0]);l=Math.max(l,0),l=Math.min(l,1);const p=s(l,t,c,n,o);a.push(new r.Vector2(p[0],p[1]))}}return a}(e.controlPoints,e.degreeOfSplineCurve,e.knotValues,100),o=(new r.BufferGeometry).setFromPoints(i),a=new r.LineBasicMaterial({linewidth:1,color:n}),c=new r.Line(o,a);return c}(e,t);else if("MTEXT"===e.type)n=function(e,t){var n=C(e,t);if(!a)return console.log("font parameter not set. Ignoring text entity.");var i=q(e.text),s=S(i,e,n),o=function(e,t,n,i){if(!e)return null;let s=new H;s.text=e.replaceAll("\\P","\n").replaceAll("\\X","\n"),s.font=a,s.fontSize=t.textHeight,s.maxWidth=n.width,s.position.x=n.position.x,s.position.y=n.position.y,s.position.z=n.position.z,s.textAlign=t.horizontalAlignment,s.color=i,n.rotation&&(s.rotation.z=n.rotation*Math.PI/180);if(n.directionVector){var o=n.directionVector;s.rotation.z=new r.Vector3(1,0,0).angleTo(new r.Vector3(o.x,o.y,o.z))}switch(n.attachmentPoint){case 1:s.anchorX="left",s.anchorY="top";break;case 2:s.anchorX="center",s.anchorY="top";break;case 3:s.anchorX="right",s.anchorY="top";break;case 4:s.anchorX="left",s.anchorY="middle";break;case 5:s.anchorX="center",s.anchorY="middle";break;case 6:s.anchorX="right",s.anchorY="middle";break;case 7:s.anchorX="left",s.anchorY="bottom";break;case 8:s.anchorX="center",s.anchorY="bottom";break;case 9:s.anchorX="right",s.anchorY="bottom";break;default:return}return s.sync((()=>{if("left"!==s.textAlign){s.geometry.computeBoundingBox();var e=s.geometry.boundingBox.max.x-s.geometry.boundingBox.min.x;"center"===s.textAlign&&(s.position.x+=(n.width-e)/2),"right"===s.textAlign&&(s.position.x+=n.width-e)}})),s}(s.text,s.style,e,n);if(!o)return null;var c=new r.Object3D;return c.add(o),c}(e,t);else if("ELLIPSE"===e.type)n=function(e,t){var n=C(e,t),i=Math.sqrt(Math.pow(e.majorAxisEndPoint.x,2)+Math.pow(e.majorAxisEndPoint.y,2)),s=i*e.axisRatio,o=Math.atan2(e.majorAxisEndPoint.y,e.majorAxisEndPoint.x),a=new r.EllipseCurve(e.center.x,e.center.y,i,s,e.startAngle,e.endAngle,!1,o),c=a.getPoints(50),l=(new r.BufferGeometry).setFromPoints(c),u=new r.LineBasicMaterial({linewidth:1,color:n}),h=new r.Line(l,u);return h}(e,t);else if("DIMENSION"===e.type){var i=7&e.dimensionType;0===i?n=function(e,t){var n=t.blocks[e.block];if(!n||!n.entities)return null;for(var i=new r.Object3D,s=0;s<n.entities.length;s++){var o=T(n.entities[s],t);o&&i.add(o)}return i}(e,t):console.log("Unsupported Dimension type: "+i)}else console.log("Unsupported Entity Type: "+e.type);return n}function S(e,t,n){let r={horizontalAlignment:"left",textHeight:t.height};var i=[];for(let o of e)if("string"==typeof o)o.startsWith("pxq")&&o.endsWith(";")?-1!==o.indexOf("c")?r.horizontalAlignment="center":-1!==o.indexOf("l")?r.horizontalAlignment="left":-1!==o.indexOf("r")?r.horizontalAlignment="right":-1!==o.indexOf("j")&&(r.horizontalAlignment="justify"):i.push(o);else if(Array.isArray(o)){var s=S(o,t,n);i.push(s.text)}else"object"==typeof o&&o.S&&3===o.S.length&&i.push(o.S[0]+"/"+o.S[2]);return{text:i.join(),style:r}}function M(e,t,n,i){var s=new r.Vector3,o=new r.Vector3;s.subVectors(n,t),o.subVectors(i,t),s.cross(o);var a=new r.Vector3(t.x,t.y,t.z),c=new r.Vector3(n.x,n.y,n.z),l=new r.Vector3(i.x,i.y,i.z);s.z<0?e.push(l,c,a):e.push(a,c,l)}function C(e,t){var n=0;return e.color?n=e.color:t.tables&&t.tables.layer&&t.tables.layer.layers[e.layer]&&(n=t.tables.layer.layers[e.layer].color),null!=n&&16777215!==n||(n=0),n}function I(e){var t,n={},i=0;for(t=0;t<e.length;t++)i+=Math.abs(e[t]);return n.uniforms=r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.fog,{pattern:{type:"fv1",value:e},patternLength:{type:"f",value:i}}]),n.vertexShader=["attribute float lineDistance;","varying float vLineDistance;",r.ShaderChunk.color_pars_vertex,"void main() {",r.ShaderChunk.color_vertex,"vLineDistance = lineDistance;","gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),n.fragmentShader=["uniform vec3 diffuse;","uniform float opacity;","uniform float pattern["+e.length+"];","uniform float patternLength;","varying float vLineDistance;",r.ShaderChunk.color_pars_fragment,r.ShaderChunk.fog_pars_fragment,"void main() {","float pos = mod(vLineDistance, patternLength);","for ( int i = 0; i < "+e.length+"; i++ ) {","pos = pos - abs(pattern[i]);","if( pos < 0.0 ) {","if( pattern[i] > 0.0 ) {","gl_FragColor = vec4(1.0, 0.0, 0.0, opacity );","break;","}","discard;","}","}",r.ShaderChunk.color_fragment,r.ShaderChunk.fog_fragment,"}"].join("\n"),n}E.target.x=x.position.x,E.target.y=x.position.y,E.target.z=0,E.zoomSpeed=3,this.render=function(){w.render(u,x)},E.addEventListener("change",this.render),this.render(),E.update(),this.resize=function(e,t){var n=e/w.domElement.width,r=t/w.domElement.height;x.top=r*x.top,x.bottom=r*x.bottom,x.left=n*x.left,x.right=n*x.right,w.setSize(e,t),w.setClearColor(268435455,1),this.render()}}K.Math.angle2=function(e,t){var n=new r.Vector2(e.x,e.y),i=new r.Vector2(t.x,t.y);return i.sub(n),i.normalize(),i.y<0?-Math.acos(i.x):Math.acos(i.x)},K.Math.polar=function(e,t,n){var r={};return r.x=e.x+t*Math.cos(n),r.y=e.y+t*Math.sin(n),r}},4236:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AABB:()=>u,ArrayCollisionMatrix:()=>p,BODY_SLEEP_STATES:()=>B,BODY_TYPES:()=>R,Body:()=>P,Box:()=>M,Broadphase:()=>W,COLLISION_TYPES:()=>Ar,ConeTwistConstraint:()=>ht,Constraint:()=>ze,ContactEquation:()=>Ke,ContactMaterial:()=>bt,ConvexPolyhedron:()=>x,Cylinder:()=>bn,DistanceConstraint:()=>dt,Equation:()=>je,EventTarget:()=>f,FrictionEquation:()=>yt,GSSolver:()=>tr,GridBroadphase:()=>J,Heightfield:()=>Tn,HingeConstraint:()=>mt,JacobianElement:()=>Ge,LockConstraint:()=>pt,Mat3:()=>i,Material:()=>xt,NaiveBroadphase:()=>Z,Narrowphase:()=>yr,ObjectCollisionMatrix:()=>r,Particle:()=>xn,Plane:()=>wn,PointToPointConstraint:()=>it,Pool:()=>mr,Quaternion:()=>m,RAY_MODES:()=>ce,Ray:()=>le,RaycastResult:()=>ee,RaycastVehicle:()=>Ut,RigidVehicle:()=>un,RotationalEquation:()=>ct,RotationalMotorEquation:()=>ft,SAPBroadphase:()=>Ue,SHAPE_TYPES:()=>y,SPHSystem:()=>pn,Shape:()=>_,Solver:()=>er,Sphere:()=>ln,SplitSolver:()=>sr,Spring:()=>wt,Transform:()=>v,Trimesh:()=>zn,Vec3:()=>o,Vec3Pool:()=>gr,WheelInfo:()=>Lt,World:()=>ki});class r{constructor(){this.matrix={}}get(e,t){let{id:n}=e,{id:r}=t;if(r>n){const e=r;r=n,n=e}return`${n}-${r}`in this.matrix}set(e,t,n){let{id:r}=e,{id:i}=t;if(i>r){const e=i;i=r,r=e}n?this.matrix[`${r}-${i}`]=!0:delete this.matrix[`${r}-${i}`]}reset(){this.matrix={}}setNumObjects(e){}}class i{constructor(e){void 0===e&&(e=[0,0,0,0,0,0,0,0,0]),this.elements=e}identity(){const e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1}setZero(){const e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0}setTrace(e){const t=this.elements;t[0]=e.x,t[4]=e.y,t[8]=e.z}getTrace(e){void 0===e&&(e=new o);const t=this.elements;return e.x=t[0],e.y=t[4],e.z=t[8],e}vmult(e,t){void 0===t&&(t=new o);const n=this.elements,r=e.x,i=e.y,s=e.z;return t.x=n[0]*r+n[1]*i+n[2]*s,t.y=n[3]*r+n[4]*i+n[5]*s,t.z=n[6]*r+n[7]*i+n[8]*s,t}smult(e){for(let t=0;t<this.elements.length;t++)this.elements[t]*=e}mmult(e,t){void 0===t&&(t=new i);const n=this.elements,r=e.elements,s=t.elements,o=n[0],a=n[1],c=n[2],l=n[3],u=n[4],h=n[5],d=n[6],p=n[7],f=n[8],m=r[0],g=r[1],A=r[2],y=r[3],_=r[4],v=r[5],b=r[6],x=r[7],w=r[8];return s[0]=o*m+a*y+c*b,s[1]=o*g+a*_+c*x,s[2]=o*A+a*v+c*w,s[3]=l*m+u*y+h*b,s[4]=l*g+u*_+h*x,s[5]=l*A+u*v+h*w,s[6]=d*m+p*y+f*b,s[7]=d*g+p*_+f*x,s[8]=d*A+p*v+f*w,t}scale(e,t){void 0===t&&(t=new i);const n=this.elements,r=t.elements;for(let t=0;3!==t;t++)r[3*t+0]=e.x*n[3*t+0],r[3*t+1]=e.y*n[3*t+1],r[3*t+2]=e.z*n[3*t+2];return t}solve(e,t){void 0===t&&(t=new o);const n=[];let r,i;for(r=0;r<12;r++)n.push(0);for(r=0;r<3;r++)for(i=0;i<3;i++)n[r+4*i]=this.elements[r+3*i];n[3]=e.x,n[7]=e.y,n[11]=e.z;let s=3;const a=s;let c;let l;do{if(r=a-s,0===n[r+4*r])for(i=r+1;i<a;i++)if(0!==n[r+4*i]){c=4;do{l=4-c,n[l+4*r]+=n[l+4*i]}while(--c);break}if(0!==n[r+4*r])for(i=r+1;i<a;i++){const e=n[r+4*i]/n[r+4*r];c=4;do{l=4-c,n[l+4*i]=l<=r?0:n[l+4*i]-n[l+4*r]*e}while(--c)}}while(--s);if(t.z=n[11]/n[10],t.y=(n[7]-n[6]*t.z)/n[5],t.x=(n[3]-n[2]*t.z-n[1]*t.y)/n[0],isNaN(t.x)||isNaN(t.y)||isNaN(t.z)||t.x===1/0||t.y===1/0||t.z===1/0)throw`Could not solve equation! Got x=[${t.toString()}], b=[${e.toString()}], A=[${this.toString()}]`;return t}e(e,t,n){if(void 0===n)return this.elements[t+3*e];this.elements[t+3*e]=n}copy(e){for(let t=0;t<e.elements.length;t++)this.elements[t]=e.elements[t];return this}toString(){let e="";for(let t=0;t<9;t++)e+=this.elements[t]+",";return e}reverse(e){void 0===e&&(e=new i);const t=s;let n,r;for(n=0;n<3;n++)for(r=0;r<3;r++)t[n+6*r]=this.elements[n+3*r];t[3]=1,t[9]=0,t[15]=0,t[4]=0,t[10]=1,t[16]=0,t[5]=0,t[11]=0,t[17]=1;let o=3;const a=o;let c;let l;do{if(n=a-o,0===t[n+6*n])for(r=n+1;r<a;r++)if(0!==t[n+6*r]){c=6;do{l=6-c,t[l+6*n]+=t[l+6*r]}while(--c);break}if(0!==t[n+6*n])for(r=n+1;r<a;r++){const e=t[n+6*r]/t[n+6*n];c=6;do{l=6-c,t[l+6*r]=l<=n?0:t[l+6*r]-t[l+6*n]*e}while(--c)}}while(--o);n=2;do{r=n-1;do{const e=t[n+6*r]/t[n+6*n];c=6;do{l=6-c,t[l+6*r]=t[l+6*r]-t[l+6*n]*e}while(--c)}while(r--)}while(--n);n=2;do{const e=1/t[n+6*n];c=6;do{l=6-c,t[l+6*n]=t[l+6*n]*e}while(--c)}while(n--);n=2;do{r=2;do{if(l=t[3+r+6*n],isNaN(l)||l===1/0)throw`Could not reverse! A=[${this.toString()}]`;e.e(n,r,l)}while(r--)}while(n--);return e}setRotationFromQuaternion(e){const t=e.x,n=e.y,r=e.z,i=e.w,s=t+t,o=n+n,a=r+r,c=t*s,l=t*o,u=t*a,h=n*o,d=n*a,p=r*a,f=i*s,m=i*o,g=i*a,A=this.elements;return A[0]=1-(h+p),A[1]=l-g,A[2]=u+m,A[3]=l+g,A[4]=1-(c+p),A[5]=d-f,A[6]=u-m,A[7]=d+f,A[8]=1-(c+h),this}transpose(e){void 0===e&&(e=new i);const t=this.elements,n=e.elements;let r;return n[0]=t[0],n[4]=t[4],n[8]=t[8],r=t[1],n[1]=t[3],n[3]=r,r=t[2],n[2]=t[6],n[6]=r,r=t[5],n[5]=t[7],n[7]=r,e}}const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];class o{constructor(e,t,n){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),this.x=e,this.y=t,this.z=n}cross(e,t){void 0===t&&(t=new o);const n=e.x,r=e.y,i=e.z,s=this.x,a=this.y,c=this.z;return t.x=a*i-c*r,t.y=c*n-s*i,t.z=s*r-a*n,t}set(e,t,n){return this.x=e,this.y=t,this.z=n,this}setZero(){this.x=this.y=this.z=0}vadd(e,t){if(!t)return new o(this.x+e.x,this.y+e.y,this.z+e.z);t.x=e.x+this.x,t.y=e.y+this.y,t.z=e.z+this.z}vsub(e,t){if(!t)return new o(this.x-e.x,this.y-e.y,this.z-e.z);t.x=this.x-e.x,t.y=this.y-e.y,t.z=this.z-e.z}crossmat(){return new i([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])}normalize(){const e=this.x,t=this.y,n=this.z,r=Math.sqrt(e*e+t*t+n*n);if(r>0){const e=1/r;this.x*=e,this.y*=e,this.z*=e}else this.x=0,this.y=0,this.z=0;return r}unit(e){void 0===e&&(e=new o);const t=this.x,n=this.y,r=this.z;let i=Math.sqrt(t*t+n*n+r*r);return i>0?(i=1/i,e.x=t*i,e.y=n*i,e.z=r*i):(e.x=1,e.y=0,e.z=0),e}length(){const e=this.x,t=this.y,n=this.z;return Math.sqrt(e*e+t*t+n*n)}lengthSquared(){return this.dot(this)}distanceTo(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z;return Math.sqrt((i-t)*(i-t)+(s-n)*(s-n)+(o-r)*(o-r))}distanceSquared(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z;return(i-t)*(i-t)+(s-n)*(s-n)+(o-r)*(o-r)}scale(e,t){void 0===t&&(t=new o);const n=this.x,r=this.y,i=this.z;return t.x=e*n,t.y=e*r,t.z=e*i,t}vmul(e,t){return void 0===t&&(t=new o),t.x=e.x*this.x,t.y=e.y*this.y,t.z=e.z*this.z,t}addScaledVector(e,t,n){return void 0===n&&(n=new o),n.x=this.x+e*t.x,n.y=this.y+e*t.y,n.z=this.z+e*t.z,n}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}isZero(){return 0===this.x&&0===this.y&&0===this.z}negate(e){return void 0===e&&(e=new o),e.x=-this.x,e.y=-this.y,e.z=-this.z,e}tangents(e,t){const n=this.length();if(n>0){const r=a,i=1/n;r.set(this.x*i,this.y*i,this.z*i);const s=c;Math.abs(r.x)<.9?(s.set(1,0,0),r.cross(s,e)):(s.set(0,1,0),r.cross(s,e)),r.cross(e,t)}else e.set(1,0,0),t.set(0,1,0)}toString(){return`${this.x},${this.y},${this.z}`}toArray(){return[this.x,this.y,this.z]}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}lerp(e,t,n){const r=this.x,i=this.y,s=this.z;n.x=r+(e.x-r)*t,n.y=i+(e.y-i)*t,n.z=s+(e.z-s)*t}almostEquals(e,t){return void 0===t&&(t=1e-6),!(Math.abs(this.x-e.x)>t||Math.abs(this.y-e.y)>t||Math.abs(this.z-e.z)>t)}almostZero(e){return void 0===e&&(e=1e-6),!(Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e)}isAntiparallelTo(e,t){return this.negate(l),l.almostEquals(e,t)}clone(){return new o(this.x,this.y,this.z)}}o.ZERO=new o(0,0,0),o.UNIT_X=new o(1,0,0),o.UNIT_Y=new o(0,1,0),o.UNIT_Z=new o(0,0,1);const a=new o,c=new o,l=new o;class u{constructor(e){void 0===e&&(e={}),this.lowerBound=new o,this.upperBound=new o,e.lowerBound&&this.lowerBound.copy(e.lowerBound),e.upperBound&&this.upperBound.copy(e.upperBound)}setFromPoints(e,t,n,r){const i=this.lowerBound,s=this.upperBound,o=n;i.copy(e[0]),o&&o.vmult(i,i),s.copy(i);for(let t=1;t<e.length;t++){let n=e[t];o&&(o.vmult(n,h),n=h),n.x>s.x&&(s.x=n.x),n.x<i.x&&(i.x=n.x),n.y>s.y&&(s.y=n.y),n.y<i.y&&(i.y=n.y),n.z>s.z&&(s.z=n.z),n.z<i.z&&(i.z=n.z)}return t&&(t.vadd(i,i),t.vadd(s,s)),r&&(i.x-=r,i.y-=r,i.z-=r,s.x+=r,s.y+=r,s.z+=r),this}copy(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this}clone(){return(new u).copy(this)}extend(e){this.lowerBound.x=Math.min(this.lowerBound.x,e.lowerBound.x),this.upperBound.x=Math.max(this.upperBound.x,e.upperBound.x),this.lowerBound.y=Math.min(this.lowerBound.y,e.lowerBound.y),this.upperBound.y=Math.max(this.upperBound.y,e.upperBound.y),this.lowerBound.z=Math.min(this.lowerBound.z,e.lowerBound.z),this.upperBound.z=Math.max(this.upperBound.z,e.upperBound.z)}overlaps(e){const t=this.lowerBound,n=this.upperBound,r=e.lowerBound,i=e.upperBound,s=r.x<=n.x&&n.x<=i.x||t.x<=i.x&&i.x<=n.x,o=r.y<=n.y&&n.y<=i.y||t.y<=i.y&&i.y<=n.y,a=r.z<=n.z&&n.z<=i.z||t.z<=i.z&&i.z<=n.z;return s&&o&&a}volume(){const e=this.lowerBound,t=this.upperBound;return(t.x-e.x)*(t.y-e.y)*(t.z-e.z)}contains(e){const t=this.lowerBound,n=this.upperBound,r=e.lowerBound,i=e.upperBound;return t.x<=r.x&&n.x>=i.x&&t.y<=r.y&&n.y>=i.y&&t.z<=r.z&&n.z>=i.z}getCorners(e,t,n,r,i,s,o,a){const c=this.lowerBound,l=this.upperBound;e.copy(c),t.set(l.x,c.y,c.z),n.set(l.x,l.y,c.z),r.set(c.x,l.y,l.z),i.set(l.x,c.y,l.z),s.set(c.x,l.y,c.z),o.set(c.x,c.y,l.z),a.copy(l)}toLocalFrame(e,t){const n=d,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],c=n[5],l=n[6],u=n[7];this.getCorners(r,i,s,o,a,c,l,u);for(let t=0;8!==t;t++){const r=n[t];e.pointToLocal(r,r)}return t.setFromPoints(n)}toWorldFrame(e,t){const n=d,r=n[0],i=n[1],s=n[2],o=n[3],a=n[4],c=n[5],l=n[6],u=n[7];this.getCorners(r,i,s,o,a,c,l,u);for(let t=0;8!==t;t++){const r=n[t];e.pointToWorld(r,r)}return t.setFromPoints(n)}overlapsRay(e){const{direction:t,from:n}=e,r=1/t.x,i=1/t.y,s=1/t.z,o=(this.lowerBound.x-n.x)*r,a=(this.upperBound.x-n.x)*r,c=(this.lowerBound.y-n.y)*i,l=(this.upperBound.y-n.y)*i,u=(this.lowerBound.z-n.z)*s,h=(this.upperBound.z-n.z)*s,d=Math.max(Math.max(Math.min(o,a),Math.min(c,l)),Math.min(u,h)),p=Math.min(Math.min(Math.max(o,a),Math.max(c,l)),Math.max(u,h));return!(p<0)&&!(d>p)}}const h=new o,d=[new o,new o,new o,new o,new o,new o,new o,new o];class p{constructor(){this.matrix=[]}get(e,t){let{index:n}=e,{index:r}=t;if(r>n){const e=r;r=n,n=e}return this.matrix[(n*(n+1)>>1)+r-1]}set(e,t,n){let{index:r}=e,{index:i}=t;if(i>r){const e=i;i=r,r=e}this.matrix[(r*(r+1)>>1)+i-1]=n?1:0}reset(){for(let e=0,t=this.matrix.length;e!==t;e++)this.matrix[e]=0}setNumObjects(e){this.matrix.length=e*(e-1)>>1}}class f{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;return void 0===n[e]&&(n[e]=[]),n[e].includes(t)||n[e].push(t),this}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return!(void 0===n[e]||!n[e].includes(t))}hasAnyEventListener(e){if(void 0===this._listeners)return!1;return void 0!==this._listeners[e]}removeEventListener(e,t){if(void 0===this._listeners)return this;const n=this._listeners;if(void 0===n[e])return this;const r=n[e].indexOf(t);return-1!==r&&n[e].splice(r,1),this}dispatchEvent(e){if(void 0===this._listeners)return this;const t=this._listeners[e.type];if(void 0!==t){e.target=this;for(let n=0,r=t.length;n<r;n++)t[n].call(this,e)}return this}}class m{constructor(e,t,n,r){void 0===e&&(e=0),void 0===t&&(t=0),void 0===n&&(n=0),void 0===r&&(r=1),this.x=e,this.y=t,this.z=n,this.w=r}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}toString(){return`${this.x},${this.y},${this.z},${this.w}`}toArray(){return[this.x,this.y,this.z,this.w]}setFromAxisAngle(e,t){const n=Math.sin(.5*t);return this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*t),this}toAxisAngle(e){void 0===e&&(e=new o),this.normalize();const t=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return n<.001?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,t]}setFromVectors(e,t){if(e.isAntiparallelTo(t)){const t=g,n=A;e.tangents(t,n),this.setFromAxisAngle(t,Math.PI)}else{const n=e.cross(t);this.x=n.x,this.y=n.y,this.z=n.z,this.w=Math.sqrt(e.length()**2*t.length()**2)+e.dot(t),this.normalize()}return this}mult(e,t){void 0===t&&(t=new m);const n=this.x,r=this.y,i=this.z,s=this.w,o=e.x,a=e.y,c=e.z,l=e.w;return t.x=n*l+s*o+r*c-i*a,t.y=r*l+s*a+i*o-n*c,t.z=i*l+s*c+n*a-r*o,t.w=s*l-n*o-r*a-i*c,t}inverse(e){void 0===e&&(e=new m);const t=this.x,n=this.y,r=this.z,i=this.w;this.conjugate(e);const s=1/(t*t+n*n+r*r+i*i);return e.x*=s,e.y*=s,e.z*=s,e.w*=s,e}conjugate(e){return void 0===e&&(e=new m),e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e}normalize(){let e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}normalizeFast(){const e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;return 0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e),this}vmult(e,t){void 0===t&&(t=new o);const n=e.x,r=e.y,i=e.z,s=this.x,a=this.y,c=this.z,l=this.w,u=l*n+a*i-c*r,h=l*r+c*n-s*i,d=l*i+s*r-a*n,p=-s*n-a*r-c*i;return t.x=u*l+p*-s+h*-c-d*-a,t.y=h*l+p*-a+d*-s-u*-c,t.z=d*l+p*-c+u*-a-h*-s,t}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this}toEuler(e,t){let n,r,i;void 0===t&&(t="YZX");const s=this.x,o=this.y,a=this.z,c=this.w;if("YZX"!==t)throw new Error(`Euler order ${t} not supported yet.`);{const e=s*o+a*c;if(e>.499&&(n=2*Math.atan2(s,c),r=Math.PI/2,i=0),e<-.499&&(n=-2*Math.atan2(s,c),r=-Math.PI/2,i=0),void 0===n){const t=s*s,l=o*o,u=a*a;n=Math.atan2(2*o*c-2*s*a,1-2*l-2*u),r=Math.asin(2*e),i=Math.atan2(2*s*c-2*o*a,1-2*t-2*u)}}e.y=n,e.z=r,e.x=i}setFromEuler(e,t,n,r){void 0===r&&(r="XYZ");const i=Math.cos(e/2),s=Math.cos(t/2),o=Math.cos(n/2),a=Math.sin(e/2),c=Math.sin(t/2),l=Math.sin(n/2);return"XYZ"===r?(this.x=a*s*o+i*c*l,this.y=i*c*o-a*s*l,this.z=i*s*l+a*c*o,this.w=i*s*o-a*c*l):"YXZ"===r?(this.x=a*s*o+i*c*l,this.y=i*c*o-a*s*l,this.z=i*s*l-a*c*o,this.w=i*s*o+a*c*l):"ZXY"===r?(this.x=a*s*o-i*c*l,this.y=i*c*o+a*s*l,this.z=i*s*l+a*c*o,this.w=i*s*o-a*c*l):"ZYX"===r?(this.x=a*s*o-i*c*l,this.y=i*c*o+a*s*l,this.z=i*s*l-a*c*o,this.w=i*s*o+a*c*l):"YZX"===r?(this.x=a*s*o+i*c*l,this.y=i*c*o+a*s*l,this.z=i*s*l-a*c*o,this.w=i*s*o-a*c*l):"XZY"===r&&(this.x=a*s*o-i*c*l,this.y=i*c*o-a*s*l,this.z=i*s*l+a*c*o,this.w=i*s*o+a*c*l),this}clone(){return new m(this.x,this.y,this.z,this.w)}slerp(e,t,n){void 0===n&&(n=new m);const r=this.x,i=this.y,s=this.z,o=this.w;let a,c,l,u,h,d=e.x,p=e.y,f=e.z,g=e.w;return c=r*d+i*p+s*f+o*g,c<0&&(c=-c,d=-d,p=-p,f=-f,g=-g),1-c>1e-6?(a=Math.acos(c),l=Math.sin(a),u=Math.sin((1-t)*a)/l,h=Math.sin(t*a)/l):(u=1-t,h=t),n.x=u*r+h*d,n.y=u*i+h*p,n.z=u*s+h*f,n.w=u*o+h*g,n}integrate(e,t,n,r){void 0===r&&(r=new m);const i=e.x*n.x,s=e.y*n.y,o=e.z*n.z,a=this.x,c=this.y,l=this.z,u=this.w,h=.5*t;return r.x+=h*(i*u+s*l-o*c),r.y+=h*(s*u+o*a-i*l),r.z+=h*(o*u+i*c-s*a),r.w+=h*(-i*a-s*c-o*l),r}}const g=new o,A=new o,y={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256};class _{constructor(e){void 0===e&&(e={}),this.id=_.idCounter++,this.type=e.type||0,this.boundingSphereRadius=0,this.collisionResponse=!e.collisionResponse||e.collisionResponse,this.collisionFilterGroup=void 0!==e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask=void 0!==e.collisionFilterMask?e.collisionFilterMask:-1,this.material=e.material?e.material:null,this.body=null}updateBoundingSphereRadius(){throw`computeBoundingSphereRadius() not implemented for shape type ${this.type}`}volume(){throw`volume() not implemented for shape type ${this.type}`}calculateLocalInertia(e,t){throw`calculateLocalInertia() not implemented for shape type ${this.type}`}calculateWorldAABB(e,t,n,r){throw`calculateWorldAABB() not implemented for shape type ${this.type}`}}_.idCounter=0,_.types=y;class v{constructor(e){void 0===e&&(e={}),this.position=new o,this.quaternion=new m,e.position&&this.position.copy(e.position),e.quaternion&&this.quaternion.copy(e.quaternion)}pointToLocal(e,t){return v.pointToLocalFrame(this.position,this.quaternion,e,t)}pointToWorld(e,t){return v.pointToWorldFrame(this.position,this.quaternion,e,t)}vectorToWorldFrame(e,t){return void 0===t&&(t=new o),this.quaternion.vmult(e,t),t}static pointToLocalFrame(e,t,n,r){return void 0===r&&(r=new o),n.vsub(e,r),t.conjugate(b),b.vmult(r,r),r}static pointToWorldFrame(e,t,n,r){return void 0===r&&(r=new o),t.vmult(n,r),r.vadd(e,r),r}static vectorToWorldFrame(e,t,n){return void 0===n&&(n=new o),e.vmult(t,n),n}static vectorToLocalFrame(e,t,n,r){return void 0===r&&(r=new o),t.w*=-1,t.vmult(n,r),t.w*=-1,r}}const b=new m;class x extends _{constructor(e){void 0===e&&(e={});const{vertices:t=[],faces:n=[],normals:r=[],axes:i,boundingSphereRadius:s}=e;super({type:_.types.CONVEXPOLYHEDRON}),this.vertices=t,this.faces=n,this.faceNormals=r,0===this.faceNormals.length&&this.computeNormals(),s?this.boundingSphereRadius=s:this.updateBoundingSphereRadius(),this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.worldFaceNormals=[],this.worldFaceNormalsNeedsUpdate=!0,this.uniqueAxes=i?i.slice():null,this.uniqueEdges=[],this.computeEdges()}computeEdges(){const e=this.faces,t=this.vertices,n=this.uniqueEdges;n.length=0;const r=new o;for(let i=0;i!==e.length;i++){const s=e[i],o=s.length;for(let e=0;e!==o;e++){const i=(e+1)%o;t[s[e]].vsub(t[s[i]],r),r.normalize();let a=!1;for(let e=0;e!==n.length;e++)if(n[e].almostEquals(r)||n[e].almostEquals(r)){a=!0;break}a||n.push(r.clone())}}}computeNormals(){this.faceNormals.length=this.faces.length;for(let e=0;e<this.faces.length;e++){for(let t=0;t<this.faces[e].length;t++)if(!this.vertices[this.faces[e][t]])throw new Error(`Vertex ${this.faces[e][t]} not found!`);const t=this.faceNormals[e]||new o;this.getFaceNormal(e,t),t.negate(t),this.faceNormals[e]=t;const n=this.vertices[this.faces[e][0]];if(t.dot(n)<0){console.error(`.faceNormals[${e}] = Vec3(${t.toString()}) looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.`);for(let t=0;t<this.faces[e].length;t++)console.warn(`.vertices[${this.faces[e][t]}] = Vec3(${this.vertices[this.faces[e][t]].toString()})`)}}}getFaceNormal(e,t){const n=this.faces[e],r=this.vertices[n[0]],i=this.vertices[n[1]],s=this.vertices[n[2]];x.computeNormal(r,i,s,t)}static computeNormal(e,t,n,r){const i=new o,s=new o;t.vsub(e,s),n.vsub(t,i),i.cross(s,r),r.isZero()||r.normalize()}clipAgainstHull(e,t,n,r,i,s,a,c,l){const u=new o;let h=-1,d=-Number.MAX_VALUE;for(let e=0;e<n.faces.length;e++){u.copy(n.faceNormals[e]),i.vmult(u,u);const t=u.dot(s);t>d&&(d=t,h=e)}const p=[];for(let e=0;e<n.faces[h].length;e++){const t=n.vertices[n.faces[h][e]],s=new o;s.copy(t),i.vmult(s,s),r.vadd(s,s),p.push(s)}h>=0&&this.clipFaceAgainstHull(s,e,t,p,a,c,l)}findSeparatingAxis(e,t,n,r,i,s,a,c){const l=new o,u=new o,h=new o,d=new o,p=new o,f=new o;let m=Number.MAX_VALUE;const g=this;if(g.uniqueAxes)for(let o=0;o!==g.uniqueAxes.length;o++){n.vmult(g.uniqueAxes[o],l);const a=g.testSepAxis(l,e,t,n,r,i);if(!1===a)return!1;a<m&&(m=a,s.copy(l))}else{const o=a?a.length:g.faces.length;for(let c=0;c<o;c++){const o=a?a[c]:c;l.copy(g.faceNormals[o]),n.vmult(l,l);const u=g.testSepAxis(l,e,t,n,r,i);if(!1===u)return!1;u<m&&(m=u,s.copy(l))}}if(e.uniqueAxes)for(let o=0;o!==e.uniqueAxes.length;o++){i.vmult(e.uniqueAxes[o],u);const a=g.testSepAxis(u,e,t,n,r,i);if(!1===a)return!1;a<m&&(m=a,s.copy(u))}else{const o=c?c.length:e.faces.length;for(let a=0;a<o;a++){const o=c?c[a]:a;u.copy(e.faceNormals[o]),i.vmult(u,u);const l=g.testSepAxis(u,e,t,n,r,i);if(!1===l)return!1;l<m&&(m=l,s.copy(u))}}for(let o=0;o!==g.uniqueEdges.length;o++){n.vmult(g.uniqueEdges[o],d);for(let o=0;o!==e.uniqueEdges.length;o++)if(i.vmult(e.uniqueEdges[o],p),d.cross(p,f),!f.almostZero()){f.normalize();const o=g.testSepAxis(f,e,t,n,r,i);if(!1===o)return!1;o<m&&(m=o,s.copy(f))}}return r.vsub(t,h),h.dot(s)>0&&s.negate(s),!0}testSepAxis(e,t,n,r,i,s){x.project(this,e,n,r,w),x.project(t,e,i,s,E);const o=w[0],a=w[1],c=E[0],l=E[1];if(o<l||c<a)return!1;const u=o-l,h=c-a;return u<h?u:h}calculateLocalInertia(e,t){const n=new o,r=new o;this.computeLocalAABB(r,n);const i=n.x-r.x,s=n.y-r.y,a=n.z-r.z;t.x=1/12*e*(2*s*2*s+2*a*2*a),t.y=1/12*e*(2*i*2*i+2*a*2*a),t.z=1/12*e*(2*s*2*s+2*i*2*i)}getPlaneConstantOfFace(e){const t=this.faces[e],n=this.faceNormals[e],r=this.vertices[t[0]];return-n.dot(r)}clipFaceAgainstHull(e,t,n,r,i,s,a){const c=new o,l=new o,u=new o,h=new o,d=new o,p=new o,f=new o,m=new o,g=this,A=r,y=[];let _=-1,v=Number.MAX_VALUE;for(let t=0;t<g.faces.length;t++){c.copy(g.faceNormals[t]),n.vmult(c,c);const r=c.dot(e);r<v&&(v=r,_=t)}if(_<0)return;const b=g.faces[_];b.connectedFaces=[];for(let e=0;e<g.faces.length;e++)for(let t=0;t<g.faces[e].length;t++)-1!==b.indexOf(g.faces[e][t])&&e!==_&&-1===b.connectedFaces.indexOf(e)&&b.connectedFaces.push(e);const x=b.length;for(let e=0;e<x;e++){const r=g.vertices[b[e]],i=g.vertices[b[(e+1)%x]];r.vsub(i,l),u.copy(l),n.vmult(u,u),t.vadd(u,u),h.copy(this.faceNormals[_]),n.vmult(h,h),t.vadd(h,h),u.cross(h,d),d.negate(d),p.copy(r),n.vmult(p,p),t.vadd(p,p);const s=b.connectedFaces[e];f.copy(this.faceNormals[s]);const o=this.getPlaneConstantOfFace(s);m.copy(f),n.vmult(m,m);const a=o-m.dot(t);for(this.clipFaceAgainstPlane(A,y,m,a);A.length;)A.shift();for(;y.length;)A.push(y.shift())}f.copy(this.faceNormals[_]);const w=this.getPlaneConstantOfFace(_);m.copy(f),n.vmult(m,m);const E=w-m.dot(t);for(let e=0;e<A.length;e++){let t=m.dot(A[e])+E;if(t<=i&&(console.log(`clamped: depth=${t} to minDist=${i}`),t=i),t<=s){const n=A[e];if(t<=1e-6){const e={point:n,normal:m,depth:t};a.push(e)}}}}clipFaceAgainstPlane(e,t,n,r){let i,s;const a=e.length;if(a<2)return t;let c=e[e.length-1],l=e[0];i=n.dot(c)+r;for(let u=0;u<a;u++){if(l=e[u],s=n.dot(l)+r,i<0)if(s<0){const e=new o;e.copy(l),t.push(e)}else{const e=new o;c.lerp(l,i/(i-s),e),t.push(e)}else if(s<0){const e=new o;c.lerp(l,i/(i-s),e),t.push(e),t.push(l)}c=l,i=s}return t}computeWorldVertices(e,t){for(;this.worldVertices.length<this.vertices.length;)this.worldVertices.push(new o);const n=this.vertices,r=this.worldVertices;for(let i=0;i!==this.vertices.length;i++)t.vmult(n[i],r[i]),e.vadd(r[i],r[i]);this.worldVerticesNeedsUpdate=!1}computeLocalAABB(e,t){const n=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),t.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(let r=0;r<this.vertices.length;r++){const i=n[r];i.x<e.x?e.x=i.x:i.x>t.x&&(t.x=i.x),i.y<e.y?e.y=i.y:i.y>t.y&&(t.y=i.y),i.z<e.z?e.z=i.z:i.z>t.z&&(t.z=i.z)}}computeWorldFaceNormals(e){const t=this.faceNormals.length;for(;this.worldFaceNormals.length<t;)this.worldFaceNormals.push(new o);const n=this.faceNormals,r=this.worldFaceNormals;for(let i=0;i!==t;i++)e.vmult(n[i],r[i]);this.worldFaceNormalsNeedsUpdate=!1}updateBoundingSphereRadius(){let e=0;const t=this.vertices;for(let n=0;n!==t.length;n++){const r=t[n].lengthSquared();r>e&&(e=r)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,n,r){const i=this.vertices;let s,a,c,l,u,h,d=new o;for(let n=0;n<i.length;n++){d.copy(i[n]),t.vmult(d,d),e.vadd(d,d);const r=d;(void 0===s||r.x<s)&&(s=r.x),(void 0===l||r.x>l)&&(l=r.x),(void 0===a||r.y<a)&&(a=r.y),(void 0===u||r.y>u)&&(u=r.y),(void 0===c||r.z<c)&&(c=r.z),(void 0===h||r.z>h)&&(h=r.z)}n.set(s,a,c),r.set(l,u,h)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}getAveragePointLocal(e){void 0===e&&(e=new o);const t=this.vertices;for(let n=0;n<t.length;n++)e.vadd(t[n],e);return e.scale(1/t.length,e),e}transformAllPoints(e,t){const n=this.vertices.length,r=this.vertices;if(t){for(let e=0;e<n;e++){const n=r[e];t.vmult(n,n)}for(let e=0;e<this.faceNormals.length;e++){const n=this.faceNormals[e];t.vmult(n,n)}}if(e)for(let t=0;t<n;t++){const n=r[t];n.vadd(e,n)}}pointIsInside(e){const t=this.vertices,n=this.faces,r=this.faceNormals,i=new o;this.getAveragePointLocal(i);for(let s=0;s<this.faces.length;s++){let a=r[s];const c=t[n[s][0]],l=new o;e.vsub(c,l);const u=a.dot(l),h=new o;i.vsub(c,h);const d=a.dot(h);if(u<0&&d>0||u>0&&d<0)return!1}return-1}static project(e,t,n,r,i){const s=e.vertices.length,o=T;let a=0,c=0;const l=S,u=e.vertices;l.setZero(),v.vectorToLocalFrame(n,r,t,o),v.pointToLocalFrame(n,r,l,l);const h=l.dot(o);c=a=u[0].dot(o);for(let e=1;e<s;e++){const t=u[e].dot(o);t>a&&(a=t),t<c&&(c=t)}if(c-=h,a-=h,c>a){const e=c;c=a,a=e}i[0]=a,i[1]=c}}const w=[],E=[],T=(new o,new o),S=new o;class M extends _{constructor(e){super({type:_.types.BOX}),this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}updateConvexPolyhedronRepresentation(){const e=this.halfExtents.x,t=this.halfExtents.y,n=this.halfExtents.z,r=o,i=[new r(-e,-t,-n),new r(e,-t,-n),new r(e,t,-n),new r(-e,t,-n),new r(-e,-t,n),new r(e,-t,n),new r(e,t,n),new r(-e,t,n)],s=[new r(0,0,1),new r(0,1,0),new r(1,0,0)],a=new x({vertices:i,faces:[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],axes:s});this.convexPolyhedronRepresentation=a,a.material=this.material}calculateLocalInertia(e,t){return void 0===t&&(t=new o),M.calculateInertia(this.halfExtents,e,t),t}static calculateInertia(e,t,n){const r=e;n.x=1/12*t*(2*r.y*2*r.y+2*r.z*2*r.z),n.y=1/12*t*(2*r.x*2*r.x+2*r.z*2*r.z),n.z=1/12*t*(2*r.y*2*r.y+2*r.x*2*r.x)}getSideNormals(e,t){const n=e,r=this.halfExtents;if(n[0].set(r.x,0,0),n[1].set(0,r.y,0),n[2].set(0,0,r.z),n[3].set(-r.x,0,0),n[4].set(0,-r.y,0),n[5].set(0,0,-r.z),void 0!==t)for(let e=0;e!==n.length;e++)t.vmult(n[e],n[e]);return n}volume(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z}updateBoundingSphereRadius(){this.boundingSphereRadius=this.halfExtents.length()}forEachWorldCorner(e,t,n){const r=this.halfExtents,i=[[r.x,r.y,r.z],[-r.x,r.y,r.z],[-r.x,-r.y,r.z],[-r.x,-r.y,-r.z],[r.x,-r.y,-r.z],[r.x,r.y,-r.z],[-r.x,r.y,-r.z],[r.x,-r.y,r.z]];for(let r=0;r<i.length;r++)C.set(i[r][0],i[r][1],i[r][2]),t.vmult(C,C),e.vadd(C,C),n(C.x,C.y,C.z)}calculateWorldAABB(e,t,n,r){const i=this.halfExtents;I[0].set(i.x,i.y,i.z),I[1].set(-i.x,i.y,i.z),I[2].set(-i.x,-i.y,i.z),I[3].set(-i.x,-i.y,-i.z),I[4].set(i.x,-i.y,-i.z),I[5].set(i.x,i.y,-i.z),I[6].set(-i.x,i.y,-i.z),I[7].set(i.x,-i.y,i.z);const s=I[0];t.vmult(s,s),e.vadd(s,s),r.copy(s),n.copy(s);for(let i=1;i<8;i++){const s=I[i];t.vmult(s,s),e.vadd(s,s);const o=s.x,a=s.y,c=s.z;o>r.x&&(r.x=o),a>r.y&&(r.y=a),c>r.z&&(r.z=c),o<n.x&&(n.x=o),a<n.y&&(n.y=a),c<n.z&&(n.z=c)}}}const C=new o,I=[new o,new o,new o,new o,new o,new o,new o,new o],R={DYNAMIC:1,STATIC:2,KINEMATIC:4},B={AWAKE:0,SLEEPY:1,SLEEPING:2};class P extends f{constructor(e){void 0===e&&(e={}),super(),this.id=P.idCounter++,this.index=-1,this.world=null,this.vlambda=new o,this.collisionFilterGroup="number"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask="number"==typeof e.collisionFilterMask?e.collisionFilterMask:-1,this.collisionResponse="boolean"!=typeof e.collisionResponse||e.collisionResponse,this.position=new o,this.previousPosition=new o,this.interpolatedPosition=new o,this.initPosition=new o,e.position&&(this.position.copy(e.position),this.previousPosition.copy(e.position),this.interpolatedPosition.copy(e.position),this.initPosition.copy(e.position)),this.velocity=new o,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new o,this.force=new o;const t="number"==typeof e.mass?e.mass:0;this.mass=t,this.invMass=t>0?1/t:0,this.material=e.material||null,this.linearDamping="number"==typeof e.linearDamping?e.linearDamping:.01,this.type=t<=0?P.STATIC:P.DYNAMIC,typeof e.type==typeof P.STATIC&&(this.type=e.type),this.allowSleep=void 0===e.allowSleep||e.allowSleep,this.sleepState=P.AWAKE,this.sleepSpeedLimit=void 0!==e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit=void 0!==e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this.wakeUpAfterNarrowphase=!1,this.torque=new o,this.quaternion=new m,this.initQuaternion=new m,this.previousQuaternion=new m,this.interpolatedQuaternion=new m,e.quaternion&&(this.quaternion.copy(e.quaternion),this.initQuaternion.copy(e.quaternion),this.previousQuaternion.copy(e.quaternion),this.interpolatedQuaternion.copy(e.quaternion)),this.angularVelocity=new o,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new o,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new o,this.invInertia=new o,this.invInertiaWorld=new i,this.invMassSolve=0,this.invInertiaSolve=new o,this.invInertiaWorldSolve=new i,this.fixedRotation=void 0!==e.fixedRotation&&e.fixedRotation,this.angularDamping=void 0!==e.angularDamping?e.angularDamping:.01,this.linearFactor=new o(1,1,1),e.linearFactor&&this.linearFactor.copy(e.linearFactor),this.angularFactor=new o(1,1,1),e.angularFactor&&this.angularFactor.copy(e.angularFactor),this.aabb=new u,this.aabbNeedsUpdate=!0,this.boundingRadius=0,this.wlambda=new o,this.isTrigger=Boolean(e.isTrigger),e.shape&&this.addShape(e.shape),this.updateMassProperties()}wakeUp(){const e=this.sleepState;this.sleepState=P.AWAKE,this.wakeUpAfterNarrowphase=!1,e===P.SLEEPING&&this.dispatchEvent(P.wakeupEvent)}sleep(){this.sleepState=P.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0),this.wakeUpAfterNarrowphase=!1}sleepTick(e){if(this.allowSleep){const t=this.sleepState,n=this.velocity.lengthSquared()+this.angularVelocity.lengthSquared(),r=this.sleepSpeedLimit**2;t===P.AWAKE&&n<r?(this.sleepState=P.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(P.sleepyEvent)):t===P.SLEEPY&&n>r?this.wakeUp():t===P.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(P.sleepEvent))}}updateSolveMassProperties(){this.sleepState===P.SLEEPING||this.type===P.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))}pointToLocalFrame(e,t){return void 0===t&&(t=new o),e.vsub(this.position,t),this.quaternion.conjugate().vmult(t,t),t}vectorToLocalFrame(e,t){return void 0===t&&(t=new o),this.quaternion.conjugate().vmult(e,t),t}pointToWorldFrame(e,t){return void 0===t&&(t=new o),this.quaternion.vmult(e,t),t.vadd(this.position,t),t}vectorToWorldFrame(e,t){return void 0===t&&(t=new o),this.quaternion.vmult(e,t),t}addShape(e,t,n){const r=new o,i=new m;return t&&r.copy(t),n&&i.copy(n),this.shapes.push(e),this.shapeOffsets.push(r),this.shapeOrientations.push(i),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=this,this}removeShape(e){const t=this.shapes.indexOf(e);return-1===t?(console.warn("Shape does not belong to the body"),this):(this.shapes.splice(t,1),this.shapeOffsets.splice(t,1),this.shapeOrientations.splice(t,1),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,e.body=null,this)}updateBoundingRadius(){const e=this.shapes,t=this.shapeOffsets,n=e.length;let r=0;for(let i=0;i!==n;i++){const n=e[i];n.updateBoundingSphereRadius();const s=t[i].length(),o=n.boundingSphereRadius;s+o>r&&(r=s+o)}this.boundingRadius=r}updateAABB(){const e=this.shapes,t=this.shapeOffsets,n=this.shapeOrientations,r=e.length,i=D,s=O,o=this.quaternion,a=this.aabb,c=L;for(let l=0;l!==r;l++){const r=e[l];o.vmult(t[l],i),i.vadd(this.position,i),o.mult(n[l],s),r.calculateWorldAABB(i,s,c.lowerBound,c.upperBound),0===l?a.copy(c):a.extend(c)}this.aabbNeedsUpdate=!1}updateInertiaWorld(e){const t=this.invInertia;if(t.x!==t.y||t.y!==t.z||e){const e=N,n=F;e.setRotationFromQuaternion(this.quaternion),e.transpose(n),e.scale(t,e),e.mmult(n,this.invInertiaWorld)}else;}applyForce(e,t){if(void 0===t&&(t=new o),this.type!==P.DYNAMIC)return;this.sleepState===P.SLEEPING&&this.wakeUp();const n=U;t.cross(e,n),this.force.vadd(e,this.force),this.torque.vadd(n,this.torque)}applyLocalForce(e,t){if(void 0===t&&(t=new o),this.type!==P.DYNAMIC)return;const n=k,r=z;this.vectorToWorldFrame(e,n),this.vectorToWorldFrame(t,r),this.applyForce(n,r)}applyTorque(e){this.type===P.DYNAMIC&&(this.sleepState===P.SLEEPING&&this.wakeUp(),this.torque.vadd(e,this.torque))}applyImpulse(e,t){if(void 0===t&&(t=new o),this.type!==P.DYNAMIC)return;this.sleepState===P.SLEEPING&&this.wakeUp();const n=t,r=G;r.copy(e),r.scale(this.invMass,r),this.velocity.vadd(r,this.velocity);const i=j;n.cross(e,i),this.invInertiaWorld.vmult(i,i),this.angularVelocity.vadd(i,this.angularVelocity)}applyLocalImpulse(e,t){if(void 0===t&&(t=new o),this.type!==P.DYNAMIC)return;const n=V,r=Q;this.vectorToWorldFrame(e,n),this.vectorToWorldFrame(t,r),this.applyImpulse(n,r)}updateMassProperties(){const e=H;this.invMass=this.mass>0?1/this.mass:0;const t=this.inertia,n=this.fixedRotation;this.updateAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),M.calculateInertia(e,this.mass,t),this.invInertia.set(t.x>0&&!n?1/t.x:0,t.y>0&&!n?1/t.y:0,t.z>0&&!n?1/t.z:0),this.updateInertiaWorld(!0)}getVelocityAtWorldPoint(e,t){const n=new o;return e.vsub(this.position,n),this.angularVelocity.cross(n,t),this.velocity.vadd(t,t),t}integrate(e,t,n){if(this.previousPosition.copy(this.position),this.previousQuaternion.copy(this.quaternion),this.type!==P.DYNAMIC&&this.type!==P.KINEMATIC||this.sleepState===P.SLEEPING)return;const r=this.velocity,i=this.angularVelocity,s=this.position,o=this.force,a=this.torque,c=this.quaternion,l=this.invMass,u=this.invInertiaWorld,h=this.linearFactor,d=l*e;r.x+=o.x*d*h.x,r.y+=o.y*d*h.y,r.z+=o.z*d*h.z;const p=u.elements,f=this.angularFactor,m=a.x*f.x,g=a.y*f.y,A=a.z*f.z;i.x+=e*(p[0]*m+p[1]*g+p[2]*A),i.y+=e*(p[3]*m+p[4]*g+p[5]*A),i.z+=e*(p[6]*m+p[7]*g+p[8]*A),s.x+=r.x*e,s.y+=r.y*e,s.z+=r.z*e,c.integrate(this.angularVelocity,e,this.angularFactor,c),t&&(n?c.normalizeFast():c.normalize()),this.aabbNeedsUpdate=!0,this.updateInertiaWorld()}}P.idCounter=0,P.COLLIDE_EVENT_NAME="collide",P.DYNAMIC=R.DYNAMIC,P.STATIC=R.STATIC,P.KINEMATIC=R.KINEMATIC,P.AWAKE=B.AWAKE,P.SLEEPY=B.SLEEPY,P.SLEEPING=B.SLEEPING,P.wakeupEvent={type:"wakeup"},P.sleepyEvent={type:"sleepy"},P.sleepEvent={type:"sleep"};const D=new o,O=new m,L=new u,N=new i,F=new i,U=(new i,new o),k=new o,z=new o,G=new o,j=new o,V=new o,Q=new o,H=new o;class W{constructor(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}collisionPairs(e,t,n){throw new Error("collisionPairs not implemented for this BroadPhase class!")}needBroadphaseCollision(e,t){return 0!==(e.collisionFilterGroup&t.collisionFilterMask)&&0!==(t.collisionFilterGroup&e.collisionFilterMask)&&(0===(e.type&P.STATIC)&&e.sleepState!==P.SLEEPING||0===(t.type&P.STATIC)&&t.sleepState!==P.SLEEPING)}intersectionTest(e,t,n,r){this.useBoundingBoxes?this.doBoundingBoxBroadphase(e,t,n,r):this.doBoundingSphereBroadphase(e,t,n,r)}doBoundingSphereBroadphase(e,t,n,r){const i=q;t.position.vsub(e.position,i);const s=(e.boundingRadius+t.boundingRadius)**2;i.lengthSquared()<s&&(n.push(e),r.push(t))}doBoundingBoxBroadphase(e,t,n,r){e.aabbNeedsUpdate&&e.updateAABB(),t.aabbNeedsUpdate&&t.updateAABB(),e.aabb.overlaps(t.aabb)&&(n.push(e),r.push(t))}makePairsUnique(e,t){const n=X,r=K,i=Y,s=e.length;for(let n=0;n!==s;n++)r[n]=e[n],i[n]=t[n];e.length=0,t.length=0;for(let e=0;e!==s;e++){const t=r[e].id,s=i[e].id,o=t<s?`${t},${s}`:`${s},${t}`;n[o]=e,n.keys.push(o)}for(let s=0;s!==n.keys.length;s++){const s=n.keys.pop(),o=n[s];e.push(r[o]),t.push(i[o]),delete n[s]}}setWorld(e){}static boundingSphereCheck(e,t){const n=new o;e.position.vsub(t.position,n);const r=e.shapes[0],i=t.shapes[0];return Math.pow(r.boundingSphereRadius+i.boundingSphereRadius,2)>n.lengthSquared()}aabbQuery(e,t,n){return console.warn(".aabbQuery is not implemented in this Broadphase subclass."),[]}}const q=new o;new o,new m,new o;const X={keys:[]},K=[],Y=[];new o;class J extends W{constructor(e,t,n,r,i){void 0===e&&(e=new o(100,100,100)),void 0===t&&(t=new o(-100,-100,-100)),void 0===n&&(n=10),void 0===r&&(r=10),void 0===i&&(i=10),super(),this.nx=n,this.ny=r,this.nz=i,this.aabbMin=e,this.aabbMax=t;const s=this.nx*this.ny*this.nz;if(s<=0)throw"GridBroadphase: Each dimension's n must be >0";this.bins=[],this.binLengths=[],this.bins.length=s,this.binLengths.length=s;for(let e=0;e<s;e++)this.bins[e]=[],this.binLengths[e]=0}collisionPairs(e,t,n){const r=e.bodies.length,i=e.bodies,s=this.aabbMax,o=this.aabbMin,a=this.nx,c=this.ny,l=this.nz,u=c*l,h=l,d=s.x,p=s.y,f=s.z,m=o.x,g=o.y,A=o.z,y=a/(d-m),v=c/(p-g),b=l/(f-A),x=(d-m)/a,w=(p-g)/c,E=(f-A)/l,T=.5*Math.sqrt(x*x+w*w+E*E),S=_.types,M=S.SPHERE,C=S.PLANE;S.BOX,S.COMPOUND,S.CONVEXPOLYHEDRON;const I=this.bins,R=this.binLengths,B=this.bins.length;for(let e=0;e!==B;e++)R[e]=0;const P=Math.ceil;function D(e,t,n,r,i,s,o){let d=(e-m)*y|0,p=(t-g)*v|0,f=(n-A)*b|0,_=P((r-m)*y),x=P((i-g)*v),w=P((s-A)*b);d<0?d=0:d>=a&&(d=a-1),p<0?p=0:p>=c&&(p=c-1),f<0?f=0:f>=l&&(f=l-1),_<0?_=0:_>=a&&(_=a-1),x<0?x=0:x>=c&&(x=c-1),w<0?w=0:w>=l&&(w=l-1),d*=u,p*=h,f*=1,_*=u,x*=h,w*=1;for(let e=d;e<=_;e+=u)for(let t=p;t<=x;t+=h)for(let n=f;n<=w;n+=1){const r=e+t+n;I[r][R[r]++]=o}}for(let e=0;e!==r;e++){const t=i[e],n=t.shapes[0];switch(n.type){case M:{const e=n,r=t.position.x,i=t.position.y,s=t.position.z,o=e.radius;D(r-o,i-o,s-o,r+o,i+o,s+o,t);break}case C:{const e=n;e.worldNormalNeedsUpdate&&e.computeWorldNormal(t.quaternion);const r=e.worldNormal,i=m+.5*x-t.position.x,s=g+.5*w-t.position.y,o=A+.5*E-t.position.z,d=$;d.set(i,s,o);for(let e=0,n=0;e!==a;e++,n+=u,d.y=s,d.x+=x)for(let e=0,i=0;e!==c;e++,i+=h,d.z=o,d.y+=w)for(let e=0,s=0;e!==l;e++,s+=1,d.z+=E)if(d.dot(r)<T){const e=n+i+s;I[e][R[e]++]=t}break}default:t.aabbNeedsUpdate&&t.updateAABB(),D(t.aabb.lowerBound.x,t.aabb.lowerBound.y,t.aabb.lowerBound.z,t.aabb.upperBound.x,t.aabb.upperBound.y,t.aabb.upperBound.z,t)}}for(let e=0;e!==B;e++){const r=R[e];if(r>1){const i=I[e];for(let e=0;e!==r;e++){const r=i[e];for(let s=0;s!==e;s++){const e=i[s];this.needBroadphaseCollision(r,e)&&this.intersectionTest(r,e,t,n)}}}}this.makePairsUnique(t,n)}}const $=new o;new o;class Z extends W{constructor(){super()}collisionPairs(e,t,n){const r=e.bodies,i=r.length;let s,o;for(let e=0;e!==i;e++)for(let i=0;i!==e;i++)s=r[e],o=r[i],this.needBroadphaseCollision(s,o)&&this.intersectionTest(s,o,t,n)}aabbQuery(e,t,n){void 0===n&&(n=[]);for(let r=0;r<e.bodies.length;r++){const i=e.bodies[r];i.aabbNeedsUpdate&&i.updateAABB(),i.aabb.overlaps(t)&&n.push(i)}return n}}class ee{constructor(){this.rayFromWorld=new o,this.rayToWorld=new o,this.hitNormalWorld=new o,this.hitPointWorld=new o,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}reset(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this.shouldStop=!1}abort(){this.shouldStop=!0}set(e,t,n,r,i,s,o){this.rayFromWorld.copy(e),this.rayToWorld.copy(t),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(r),this.shape=i,this.body=s,this.distance=o}}let te,ne,re,ie,se,oe,ae;const ce={CLOSEST:1,ANY:2,ALL:4};te=_.types.SPHERE,ne=_.types.PLANE,re=_.types.BOX,ie=_.types.CYLINDER,se=_.types.CONVEXPOLYHEDRON,oe=_.types.HEIGHTFIELD,ae=_.types.TRIMESH;class le{get[te](){return this._intersectSphere}get[ne](){return this._intersectPlane}get[re](){return this._intersectBox}get[ie](){return this._intersectConvex}get[se](){return this._intersectConvex}get[oe](){return this._intersectHeightfield}get[ae](){return this._intersectTrimesh}constructor(e,t){void 0===e&&(e=new o),void 0===t&&(t=new o),this.from=e.clone(),this.to=t.clone(),this.direction=new o,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=le.ANY,this.result=new ee,this.hasHit=!1,this.callback=e=>{}}intersectWorld(e,t){return this.mode=t.mode||le.ANY,this.result=t.result||new ee,this.skipBackfaces=!!t.skipBackfaces,this.collisionFilterMask=void 0!==t.collisionFilterMask?t.collisionFilterMask:-1,this.collisionFilterGroup=void 0!==t.collisionFilterGroup?t.collisionFilterGroup:-1,this.checkCollisionResponse=void 0===t.checkCollisionResponse||t.checkCollisionResponse,t.from&&this.from.copy(t.from),t.to&&this.to.copy(t.to),this.callback=t.callback||(()=>{}),this.hasHit=!1,this.result.reset(),this.updateDirection(),this.getAABB(ue),he.length=0,e.broadphase.aabbQuery(e,ue,he),this.intersectBodies(he),this.hasHit}intersectBody(e,t){t&&(this.result=t,this.updateDirection());const n=this.checkCollisionResponse;if(n&&!e.collisionResponse)return;if(0===(this.collisionFilterGroup&e.collisionFilterMask)||0===(e.collisionFilterGroup&this.collisionFilterMask))return;const r=fe,i=me;for(let t=0,s=e.shapes.length;t<s;t++){const s=e.shapes[t];if((!n||s.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[t],i),e.quaternion.vmult(e.shapeOffsets[t],r),r.vadd(e.position,r),this.intersectShape(s,i,r,e),this.result.shouldStop))break}}intersectBodies(e,t){t&&(this.result=t,this.updateDirection());for(let t=0,n=e.length;!this.result.shouldStop&&t<n;t++)this.intersectBody(e[t])}updateDirection(){this.to.vsub(this.from,this.direction),this.direction.normalize()}intersectShape(e,t,n,r){const i=function(e,t,n){n.vsub(e,Ne);const r=Ne.dot(t);t.scale(r,Fe),Fe.vadd(e,Fe);const i=n.distanceTo(Fe);return i}(this.from,this.direction,n);if(i>e.boundingSphereRadius)return;const s=this[e.type];s&&s.call(this,e,t,n,r,e)}_intersectBox(e,t,n,r,i){return this._intersectConvex(e.convexPolyhedronRepresentation,t,n,r,i)}_intersectPlane(e,t,n,r,i){const s=this.from,a=this.to,c=this.direction,l=new o(0,0,1);t.vmult(l,l);const u=new o;s.vsub(n,u);const h=u.dot(l);a.vsub(n,u);if(h*u.dot(l)>0)return;if(s.distanceTo(a)<h)return;const d=l.dot(c);if(Math.abs(d)<this.precision)return;const p=new o,f=new o,m=new o;s.vsub(n,p);const g=-l.dot(p)/d;c.scale(g,f),s.vadd(f,m),this.reportIntersection(l,m,i,r,-1)}getAABB(e){const{lowerBound:t,upperBound:n}=e,r=this.to,i=this.from;t.x=Math.min(r.x,i.x),t.y=Math.min(r.y,i.y),t.z=Math.min(r.z,i.z),n.x=Math.max(r.x,i.x),n.y=Math.max(r.y,i.y),n.z=Math.max(r.z,i.z)}_intersectHeightfield(e,t,n,r,i){e.data,e.elementSize;const s=xe;s.from.copy(this.from),s.to.copy(this.to),v.pointToLocalFrame(n,t,s.from,s.from),v.pointToLocalFrame(n,t,s.to,s.to),s.updateDirection();const o=we;let a,c,l,h;a=c=0,l=h=e.data.length-1;const d=new u;s.getAABB(d),e.getIndexOfPosition(d.lowerBound.x,d.lowerBound.y,o,!0),a=Math.max(a,o[0]),c=Math.max(c,o[1]),e.getIndexOfPosition(d.upperBound.x,d.upperBound.y,o,!0),l=Math.min(l,o[0]+1),h=Math.min(h,o[1]+1);for(let o=a;o<l;o++)for(let a=c;a<h;a++){if(this.result.shouldStop)return;if(e.getAabbAtIndex(o,a,d),d.overlapsRay(s)){if(e.getConvexTrianglePillar(o,a,!1),v.pointToWorldFrame(n,t,e.pillarOffset,be),this._intersectConvex(e.pillarConvex,t,be,r,i,ve),this.result.shouldStop)return;e.getConvexTrianglePillar(o,a,!0),v.pointToWorldFrame(n,t,e.pillarOffset,be),this._intersectConvex(e.pillarConvex,t,be,r,i,ve)}}}_intersectSphere(e,t,n,r,i){const s=this.from,o=this.to,a=e.radius,c=(o.x-s.x)**2+(o.y-s.y)**2+(o.z-s.z)**2,l=2*((o.x-s.x)*(s.x-n.x)+(o.y-s.y)*(s.y-n.y)+(o.z-s.z)*(s.z-n.z)),u=l**2-4*c*((s.x-n.x)**2+(s.y-n.y)**2+(s.z-n.z)**2-a**2),h=Ee,d=Te;if(!(u<0))if(0===u)s.lerp(o,u,h),h.vsub(n,d),d.normalize(),this.reportIntersection(d,h,i,r,-1);else{const e=(-l-Math.sqrt(u))/(2*c),t=(-l+Math.sqrt(u))/(2*c);if(e>=0&&e<=1&&(s.lerp(o,e,h),h.vsub(n,d),d.normalize(),this.reportIntersection(d,h,i,r,-1)),this.result.shouldStop)return;t>=0&&t<=1&&(s.lerp(o,t,h),h.vsub(n,d),d.normalize(),this.reportIntersection(d,h,i,r,-1))}}_intersectConvex(e,t,n,r,i,s){const o=Se,a=Me,c=s&&s.faceList||null,l=e.faces,u=e.vertices,h=e.faceNormals,d=this.direction,p=this.from,f=this.to,m=p.distanceTo(f),g=c?c.length:l.length,A=this.result;for(let e=0;!A.shouldStop&&e<g;e++){const s=c?c[e]:e,f=l[s],g=h[s],y=t,_=n;a.copy(u[f[0]]),y.vmult(a,a),a.vadd(_,a),a.vsub(p,a),y.vmult(g,o);const v=d.dot(o);if(Math.abs(v)<this.precision)continue;const b=o.dot(a)/v;if(!(b<0)){d.scale(b,ge),ge.vadd(p,ge),Ae.copy(u[f[0]]),y.vmult(Ae,Ae),_.vadd(Ae,Ae);for(let e=1;!A.shouldStop&&e<f.length-1;e++){ye.copy(u[f[e]]),_e.copy(u[f[e+1]]),y.vmult(ye,ye),y.vmult(_e,_e),_.vadd(ye,ye),_.vadd(_e,_e);const t=ge.distanceTo(p);!le.pointInTriangle(ge,Ae,ye,_e)&&!le.pointInTriangle(ge,ye,Ae,_e)||t>m||this.reportIntersection(o,ge,i,r,s)}}}}_intersectTrimesh(e,t,n,r,i,s){const o=Ce,a=Oe,c=Le,l=Me,u=Ie,h=Re,d=Be,p=De,f=Pe,m=e.indices;e.vertices;const g=this.from,A=this.to,y=this.direction;c.position.copy(n),c.quaternion.copy(t),v.vectorToLocalFrame(n,t,y,u),v.pointToLocalFrame(n,t,g,h),v.pointToLocalFrame(n,t,A,d),d.x*=e.scale.x,d.y*=e.scale.y,d.z*=e.scale.z,h.x*=e.scale.x,h.y*=e.scale.y,h.z*=e.scale.z,d.vsub(h,u),u.normalize();const _=h.distanceSquared(d);e.tree.rayQuery(this,c,a);for(let s=0,c=a.length;!this.result.shouldStop&&s!==c;s++){const c=a[s];e.getNormal(c,o),e.getVertex(m[3*c],Ae),Ae.vsub(h,l);const d=u.dot(o),g=o.dot(l)/d;if(g<0)continue;u.scale(g,ge),ge.vadd(h,ge),e.getVertex(m[3*c+1],ye),e.getVertex(m[3*c+2],_e);const A=ge.distanceSquared(h);!le.pointInTriangle(ge,ye,Ae,_e)&&!le.pointInTriangle(ge,Ae,ye,_e)||A>_||(v.vectorToWorldFrame(t,o,f),v.pointToWorldFrame(n,t,ge,p),this.reportIntersection(f,p,i,r,c))}a.length=0}reportIntersection(e,t,n,r,i){const s=this.from,o=this.to,a=s.distanceTo(t),c=this.result;if(!(this.skipBackfaces&&e.dot(this.direction)>0))switch(c.hitFaceIndex=void 0!==i?i:-1,this.mode){case le.ALL:this.hasHit=!0,c.set(s,o,e,t,n,r,a),c.hasHit=!0,this.callback(c);break;case le.CLOSEST:(a<c.distance||!c.hasHit)&&(this.hasHit=!0,c.hasHit=!0,c.set(s,o,e,t,n,r,a));break;case le.ANY:this.hasHit=!0,c.hasHit=!0,c.set(s,o,e,t,n,r,a),c.shouldStop=!0}}static pointInTriangle(e,t,n,r){r.vsub(t,Ne),n.vsub(t,de),e.vsub(t,pe);const i=Ne.dot(Ne),s=Ne.dot(de),o=Ne.dot(pe),a=de.dot(de),c=de.dot(pe);let l,u;return(l=a*o-s*c)>=0&&(u=i*c-s*o)>=0&&l+u<i*a-s*s}}le.CLOSEST=ce.CLOSEST,le.ANY=ce.ANY,le.ALL=ce.ALL;const ue=new u,he=[],de=new o,pe=new o,fe=new o,me=new m,ge=new o,Ae=new o,ye=new o,_e=new o;new o,new ee;const ve={faceList:[0]},be=new o,xe=new le,we=[],Ee=new o,Te=new o,Se=new o,Me=(new o,new o,new o),Ce=new o,Ie=new o,Re=new o,Be=new o,Pe=new o,De=new o;new u;const Oe=[],Le=new v,Ne=new o,Fe=new o;class Ue extends W{static checkBounds(e,t,n){let r,i;0===n?(r=e.position.x,i=t.position.x):1===n?(r=e.position.y,i=t.position.y):2===n&&(r=e.position.z,i=t.position.z);const s=e.boundingRadius;return i-t.boundingRadius<r+s}static insertionSortX(e){for(let t=1,n=e.length;t<n;t++){const n=e[t];let r;for(r=t-1;r>=0&&!(e[r].aabb.lowerBound.x<=n.aabb.lowerBound.x);r--)e[r+1]=e[r];e[r+1]=n}return e}static insertionSortY(e){for(let t=1,n=e.length;t<n;t++){const n=e[t];let r;for(r=t-1;r>=0&&!(e[r].aabb.lowerBound.y<=n.aabb.lowerBound.y);r--)e[r+1]=e[r];e[r+1]=n}return e}static insertionSortZ(e){for(let t=1,n=e.length;t<n;t++){const n=e[t];let r;for(r=t-1;r>=0&&!(e[r].aabb.lowerBound.z<=n.aabb.lowerBound.z);r--)e[r+1]=e[r];e[r+1]=n}return e}constructor(e){super(),this.axisList=[],this.world=null,this.axisIndex=0;const t=this.axisList;this._addBodyHandler=e=>{t.push(e.body)},this._removeBodyHandler=e=>{const n=t.indexOf(e.body);-1!==n&&t.splice(n,1)},e&&this.setWorld(e)}setWorld(e){this.axisList.length=0;for(let t=0;t<e.bodies.length;t++)this.axisList.push(e.bodies[t]);e.removeEventListener("addBody",this._addBodyHandler),e.removeEventListener("removeBody",this._removeBodyHandler),e.addEventListener("addBody",this._addBodyHandler),e.addEventListener("removeBody",this._removeBodyHandler),this.world=e,this.dirty=!0}collisionPairs(e,t,n){const r=this.axisList,i=r.length,s=this.axisIndex;let o,a;for(this.dirty&&(this.sortList(),this.dirty=!1),o=0;o!==i;o++){const e=r[o];for(a=o+1;a<i;a++){const i=r[a];if(this.needBroadphaseCollision(e,i)){if(!Ue.checkBounds(e,i,s))break;this.intersectionTest(e,i,t,n)}}}}sortList(){const e=this.axisList,t=this.axisIndex,n=e.length;for(let t=0;t!==n;t++){const n=e[t];n.aabbNeedsUpdate&&n.updateAABB()}0===t?Ue.insertionSortX(e):1===t?Ue.insertionSortY(e):2===t&&Ue.insertionSortZ(e)}autoDetectAxis(){let e=0,t=0,n=0,r=0,i=0,s=0;const o=this.axisList,a=o.length,c=1/a;for(let c=0;c!==a;c++){const a=o[c],l=a.position.x;e+=l,t+=l*l;const u=a.position.y;n+=u,r+=u*u;const h=a.position.z;i+=h,s+=h*h}const l=t-e*e*c,u=r-n*n*c,h=s-i*i*c;this.axisIndex=l>u?l>h?0:2:u>h?1:2}aabbQuery(e,t,n){void 0===n&&(n=[]),this.dirty&&(this.sortList(),this.dirty=!1);const r=this.axisIndex;let i="x";1===r&&(i="y"),2===r&&(i="z");const s=this.axisList;t.lowerBound[i],t.upperBound[i];for(let e=0;e<s.length;e++){const r=s[e];r.aabbNeedsUpdate&&r.updateAABB(),r.aabb.overlaps(t)&&n.push(r)}return n}}class ke{static defaults(e,t){void 0===e&&(e={});for(let n in t)n in e||(e[n]=t[n]);return e}}class ze{constructor(e,t,n){void 0===n&&(n={}),n=ke.defaults(n,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=t,this.id=ze.idCounter++,this.collideConnected=n.collideConnected,n.wakeUpBodies&&(e&&e.wakeUp(),t&&t.wakeUp())}update(){throw new Error("method update() not implmemented in this Constraint subclass!")}enable(){const e=this.equations;for(let t=0;t<e.length;t++)e[t].enabled=!0}disable(){const e=this.equations;for(let t=0;t<e.length;t++)e[t].enabled=!1}}ze.idCounter=0;class Ge{constructor(){this.spatial=new o,this.rotational=new o}multiplyElement(e){return e.spatial.dot(this.spatial)+e.rotational.dot(this.rotational)}multiplyVectors(e,t){return e.dot(this.spatial)+t.dot(this.rotational)}}class je{constructor(e,t,n,r){void 0===n&&(n=-1e6),void 0===r&&(r=1e6),this.id=je.idCounter++,this.minForce=n,this.maxForce=r,this.bi=e,this.bj=t,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new Ge,this.jacobianElementB=new Ge,this.enabled=!0,this.multiplier=0,this.setSpookParams(1e7,4,1/60)}setSpookParams(e,t,n){const r=t,i=e,s=n;this.a=4/(s*(1+4*r)),this.b=4*r/(1+4*r),this.eps=4/(s*s*i*(1+4*r))}computeB(e,t,n){const r=this.computeGW();return-this.computeGq()*e-r*t-this.computeGiMf()*n}computeGq(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.position,s=r.position;return e.spatial.dot(i)+t.spatial.dot(s)}computeGW(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.velocity,s=r.velocity,o=n.angularVelocity,a=r.angularVelocity;return e.multiplyVectors(i,o)+t.multiplyVectors(s,a)}computeGWlambda(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.vlambda,s=r.vlambda,o=n.wlambda,a=r.wlambda;return e.multiplyVectors(i,o)+t.multiplyVectors(s,a)}computeGiMf(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.force,s=n.torque,o=r.force,a=r.torque,c=n.invMassSolve,l=r.invMassSolve;return i.scale(c,Ve),o.scale(l,Qe),n.invInertiaWorldSolve.vmult(s,He),r.invInertiaWorldSolve.vmult(a,We),e.multiplyVectors(Ve,He)+t.multiplyVectors(Qe,We)}computeGiMGt(){const e=this.jacobianElementA,t=this.jacobianElementB,n=this.bi,r=this.bj,i=n.invMassSolve,s=r.invMassSolve,o=n.invInertiaWorldSolve,a=r.invInertiaWorldSolve;let c=i+s;return o.vmult(e.rotational,qe),c+=qe.dot(e.rotational),a.vmult(t.rotational,qe),c+=qe.dot(t.rotational),c}addToWlambda(e){const t=this.jacobianElementA,n=this.jacobianElementB,r=this.bi,i=this.bj,s=Xe;r.vlambda.addScaledVector(r.invMassSolve*e,t.spatial,r.vlambda),i.vlambda.addScaledVector(i.invMassSolve*e,n.spatial,i.vlambda),r.invInertiaWorldSolve.vmult(t.rotational,s),r.wlambda.addScaledVector(e,s,r.wlambda),i.invInertiaWorldSolve.vmult(n.rotational,s),i.wlambda.addScaledVector(e,s,i.wlambda)}computeC(){return this.computeGiMGt()+this.eps}}je.idCounter=0;const Ve=new o,Qe=new o,He=new o,We=new o,qe=new o,Xe=new o;class Ke extends je{constructor(e,t,n){void 0===n&&(n=1e6),super(e,t,0,n),this.restitution=0,this.ri=new o,this.rj=new o,this.ni=new o}computeB(e){const t=this.a,n=this.b,r=this.bi,i=this.bj,s=this.ri,o=this.rj,a=Ye,c=Je,l=r.velocity,u=r.angularVelocity;r.force,r.torque;const h=i.velocity,d=i.angularVelocity;i.force,i.torque;const p=$e,f=this.jacobianElementA,m=this.jacobianElementB,g=this.ni;s.cross(g,a),o.cross(g,c),g.negate(f.spatial),a.negate(f.rotational),m.spatial.copy(g),m.rotational.copy(c),p.copy(i.position),p.vadd(o,p),p.vsub(r.position,p),p.vsub(s,p);const A=g.dot(p),y=this.restitution+1;return-A*t-(y*h.dot(g)-y*l.dot(g)+d.dot(c)-u.dot(a))*n-e*this.computeGiMf()}getImpactVelocityAlongNormal(){const e=Ze,t=et,n=tt,r=nt,i=rt;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,r),this.bi.getVelocityAtWorldPoint(n,e),this.bj.getVelocityAtWorldPoint(r,t),e.vsub(t,i),this.ni.dot(i)}}const Ye=new o,Je=new o,$e=new o,Ze=new o,et=new o,tt=new o,nt=new o,rt=new o;class it extends ze{constructor(e,t,n,r,i){void 0===t&&(t=new o),void 0===r&&(r=new o),void 0===i&&(i=1e6),super(e,n),this.pivotA=t.clone(),this.pivotB=r.clone();const s=this.equationX=new Ke(e,n),a=this.equationY=new Ke(e,n),c=this.equationZ=new Ke(e,n);this.equations.push(s,a,c),s.minForce=a.minForce=c.minForce=-i,s.maxForce=a.maxForce=c.maxForce=i,s.ni.set(1,0,0),a.ni.set(0,1,0),c.ni.set(0,0,1)}update(){const e=this.bodyA,t=this.bodyB,n=this.equationX,r=this.equationY,i=this.equationZ;e.quaternion.vmult(this.pivotA,n.ri),t.quaternion.vmult(this.pivotB,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),i.ri.copy(n.ri),i.rj.copy(n.rj)}}class st extends je{constructor(e,t,n){void 0===n&&(n={});const r=void 0!==n.maxForce?n.maxForce:1e6;super(e,t,-r,r),this.axisA=n.axisA?n.axisA.clone():new o(1,0,0),this.axisB=n.axisB?n.axisB.clone():new o(0,1,0),this.angle=void 0!==n.angle?n.angle:0}computeB(e){const t=this.a,n=this.b,r=this.axisA,i=this.axisB,s=ot,o=at,a=this.jacobianElementA,c=this.jacobianElementB;r.cross(i,s),i.cross(r,o),a.rotational.copy(o),c.rotational.copy(s);return-(Math.cos(this.angle)-r.dot(i))*t-this.computeGW()*n-e*this.computeGiMf()}}const ot=new o,at=new o;class ct extends je{constructor(e,t,n){void 0===n&&(n={});const r=void 0!==n.maxForce?n.maxForce:1e6;super(e,t,-r,r),this.axisA=n.axisA?n.axisA.clone():new o(1,0,0),this.axisB=n.axisB?n.axisB.clone():new o(0,1,0),this.maxAngle=Math.PI/2}computeB(e){const t=this.a,n=this.b,r=this.axisA,i=this.axisB,s=lt,o=ut,a=this.jacobianElementA,c=this.jacobianElementB;r.cross(i,s),i.cross(r,o),a.rotational.copy(o),c.rotational.copy(s);return-(Math.cos(this.maxAngle)-r.dot(i))*t-this.computeGW()*n-e*this.computeGiMf()}}const lt=new o,ut=new o;class ht extends it{constructor(e,t,n){void 0===n&&(n={});const r=void 0!==n.maxForce?n.maxForce:1e6;super(e,n.pivotA?n.pivotA.clone():new o,t,n.pivotB?n.pivotB.clone():new o,r),this.axisA=n.axisA?n.axisA.clone():new o,this.axisB=n.axisB?n.axisB.clone():new o,this.collideConnected=!!n.collideConnected,this.angle=void 0!==n.angle?n.angle:0;const i=this.coneEquation=new st(e,t,n),s=this.twistEquation=new ct(e,t,n);this.twistAngle=void 0!==n.twistAngle?n.twistAngle:0,i.maxForce=0,i.minForce=-r,s.maxForce=0,s.minForce=-r,this.equations.push(i,s)}update(){const e=this.bodyA,t=this.bodyB,n=this.coneEquation,r=this.twistEquation;super.update(),e.vectorToWorldFrame(this.axisA,n.axisA),t.vectorToWorldFrame(this.axisB,n.axisB),this.axisA.tangents(r.axisA,r.axisA),e.vectorToWorldFrame(r.axisA,r.axisA),this.axisB.tangents(r.axisB,r.axisB),t.vectorToWorldFrame(r.axisB,r.axisB),n.angle=this.angle,r.maxAngle=this.twistAngle}}new o,new o;class dt extends ze{constructor(e,t,n,r){void 0===r&&(r=1e6),super(e,t),void 0===n&&(n=e.position.distanceTo(t.position)),this.distance=n;const i=this.distanceEquation=new Ke(e,t);this.equations.push(i),i.minForce=-r,i.maxForce=r}update(){const e=this.bodyA,t=this.bodyB,n=this.distanceEquation,r=.5*this.distance,i=n.ni;t.position.vsub(e.position,i),i.normalize(),i.scale(r,n.ri),i.scale(-r,n.rj)}}class pt extends it{constructor(e,t,n){void 0===n&&(n={});const r=void 0!==n.maxForce?n.maxForce:1e6,i=new o,s=new o,a=new o;e.position.vadd(t.position,a),a.scale(.5,a),t.pointToLocalFrame(a,s),e.pointToLocalFrame(a,i),super(e,i,t,s,r),this.xA=e.vectorToLocalFrame(o.UNIT_X),this.xB=t.vectorToLocalFrame(o.UNIT_X),this.yA=e.vectorToLocalFrame(o.UNIT_Y),this.yB=t.vectorToLocalFrame(o.UNIT_Y),this.zA=e.vectorToLocalFrame(o.UNIT_Z),this.zB=t.vectorToLocalFrame(o.UNIT_Z);const c=this.rotationalEquation1=new ct(e,t,n),l=this.rotationalEquation2=new ct(e,t,n),u=this.rotationalEquation3=new ct(e,t,n);this.equations.push(c,l,u)}update(){const e=this.bodyA,t=this.bodyB;this.motorEquation;const n=this.rotationalEquation1,r=this.rotationalEquation2,i=this.rotationalEquation3;super.update(),e.vectorToWorldFrame(this.xA,n.axisA),t.vectorToWorldFrame(this.yB,n.axisB),e.vectorToWorldFrame(this.yA,r.axisA),t.vectorToWorldFrame(this.zB,r.axisB),e.vectorToWorldFrame(this.zA,i.axisA),t.vectorToWorldFrame(this.xB,i.axisB)}}new o,new o;class ft extends je{constructor(e,t,n){void 0===n&&(n=1e6),super(e,t,-n,n),this.axisA=new o,this.axisB=new o,this.targetVelocity=0}computeB(e){this.a;const t=this.b;this.bi,this.bj;const n=this.axisA,r=this.axisB,i=this.jacobianElementA,s=this.jacobianElementB;i.rotational.copy(n),r.negate(s.rotational);return-(this.computeGW()-this.targetVelocity)*t-e*this.computeGiMf()}}class mt extends it{constructor(e,t,n){void 0===n&&(n={});const r=void 0!==n.maxForce?n.maxForce:1e6;super(e,n.pivotA?n.pivotA.clone():new o,t,n.pivotB?n.pivotB.clone():new o,r);(this.axisA=n.axisA?n.axisA.clone():new o(1,0,0)).normalize();(this.axisB=n.axisB?n.axisB.clone():new o(1,0,0)).normalize(),this.collideConnected=!!n.collideConnected;const i=this.rotationalEquation1=new ct(e,t,n),s=this.rotationalEquation2=new ct(e,t,n),a=this.motorEquation=new ft(e,t,r);a.enabled=!1,this.equations.push(i,s,a)}enableMotor(){this.motorEquation.enabled=!0}disableMotor(){this.motorEquation.enabled=!1}setMotorSpeed(e){this.motorEquation.targetVelocity=e}setMotorMaxForce(e){this.motorEquation.maxForce=e,this.motorEquation.minForce=-e}update(){const e=this.bodyA,t=this.bodyB,n=this.motorEquation,r=this.rotationalEquation1,i=this.rotationalEquation2,s=gt,o=At,a=this.axisA,c=this.axisB;super.update(),e.quaternion.vmult(a,s),t.quaternion.vmult(c,o),s.tangents(r.axisA,i.axisA),r.axisB.copy(o),i.axisB.copy(o),this.motorEquation.enabled&&(e.quaternion.vmult(this.axisA,n.axisA),t.quaternion.vmult(this.axisB,n.axisB))}}const gt=new o,At=new o;class yt extends je{constructor(e,t,n){super(e,t,-n,n),this.ri=new o,this.rj=new o,this.t=new o}computeB(e){this.a;const t=this.b;this.bi,this.bj;const n=this.ri,r=this.rj,i=_t,s=vt,o=this.t;n.cross(o,i),r.cross(o,s);const a=this.jacobianElementA,c=this.jacobianElementB;o.negate(a.spatial),i.negate(a.rotational),c.spatial.copy(o),c.rotational.copy(s);return-this.computeGW()*t-e*this.computeGiMf()}}const _t=new o,vt=new o;class bt{constructor(e,t,n){n=ke.defaults(n,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=bt.idCounter++,this.materials=[e,t],this.friction=n.friction,this.restitution=n.restitution,this.contactEquationStiffness=n.contactEquationStiffness,this.contactEquationRelaxation=n.contactEquationRelaxation,this.frictionEquationStiffness=n.frictionEquationStiffness,this.frictionEquationRelaxation=n.frictionEquationRelaxation}}bt.idCounter=0;class xt{constructor(e){void 0===e&&(e={});let t="";"string"==typeof e&&(t=e,e={}),this.name=t,this.id=xt.idCounter++,this.friction=void 0!==e.friction?e.friction:-1,this.restitution=void 0!==e.restitution?e.restitution:-1}}xt.idCounter=0;class wt{constructor(e,t,n){void 0===n&&(n={}),this.restLength="number"==typeof n.restLength?n.restLength:1,this.stiffness=n.stiffness||100,this.damping=n.damping||1,this.bodyA=e,this.bodyB=t,this.localAnchorA=new o,this.localAnchorB=new o,n.localAnchorA&&this.localAnchorA.copy(n.localAnchorA),n.localAnchorB&&this.localAnchorB.copy(n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB)}setWorldAnchorA(e){this.bodyA.pointToLocalFrame(e,this.localAnchorA)}setWorldAnchorB(e){this.bodyB.pointToLocalFrame(e,this.localAnchorB)}getWorldAnchorA(e){this.bodyA.pointToWorldFrame(this.localAnchorA,e)}getWorldAnchorB(e){this.bodyB.pointToWorldFrame(this.localAnchorB,e)}applyForce(){const e=this.stiffness,t=this.damping,n=this.restLength,r=this.bodyA,i=this.bodyB,s=Et,o=Tt,a=St,c=Mt,l=Ot,u=Ct,h=It,d=Rt,p=Bt,f=Pt,m=Dt;this.getWorldAnchorA(u),this.getWorldAnchorB(h),u.vsub(r.position,d),h.vsub(i.position,p),h.vsub(u,s);const g=s.length();o.copy(s),o.normalize(),i.velocity.vsub(r.velocity,a),i.angularVelocity.cross(p,l),a.vadd(l,a),r.angularVelocity.cross(d,l),a.vsub(l,a),o.scale(-e*(g-n)-t*a.dot(o),c),r.force.vsub(c,r.force),i.force.vadd(c,i.force),d.cross(c,f),p.cross(c,m),r.torque.vsub(f,r.torque),i.torque.vadd(m,i.torque)}}const Et=new o,Tt=new o,St=new o,Mt=new o,Ct=new o,It=new o,Rt=new o,Bt=new o,Pt=new o,Dt=new o,Ot=new o;class Lt{constructor(e){void 0===e&&(e={}),e=ke.defaults(e,{chassisConnectionPointLocal:new o,chassisConnectionPointWorld:new o,directionLocal:new o,directionWorld:new o,axleLocal:new o,axleWorld:new o,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:10.5,forwardAcceleration:1,sideAcceleration:1,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,slipInfo:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=e.maxSuspensionTravel,this.customSlidingRotationalSpeed=e.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=e.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=e.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=e.chassisConnectionPointWorld.clone(),this.directionLocal=e.directionLocal.clone(),this.directionWorld=e.directionWorld.clone(),this.axleLocal=e.axleLocal.clone(),this.axleWorld=e.axleWorld.clone(),this.suspensionRestLength=e.suspensionRestLength,this.suspensionMaxLength=e.suspensionMaxLength,this.radius=e.radius,this.suspensionStiffness=e.suspensionStiffness,this.dampingCompression=e.dampingCompression,this.dampingRelaxation=e.dampingRelaxation,this.frictionSlip=e.frictionSlip,this.forwardAcceleration=e.forwardAcceleration,this.sideAcceleration=e.sideAcceleration,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=e.rollInfluence,this.maxSuspensionForce=e.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=e.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.slipInfo=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new ee,this.worldTransform=new v,this.isInContact=!1}updateWheel(e){const t=this.raycastResult;if(this.isInContact){const n=t.hitNormalWorld.dot(t.directionWorld);t.hitPointWorld.vsub(e.position,Ft),e.getVelocityAtWorldPoint(Ft,Nt);const r=t.hitNormalWorld.dot(Nt);if(n>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{const e=-1/n;this.suspensionRelativeVelocity=r*e,this.clippedInvContactDotSuspension=e}}else t.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,t.directionWorld.scale(-1,t.hitNormalWorld),this.clippedInvContactDotSuspension=1}}const Nt=new o,Ft=new o;class Ut{constructor(e){this.chassisBody=e.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=void 0!==e.indexRightAxis?e.indexRightAxis:2,this.indexForwardAxis=void 0!==e.indexForwardAxis?e.indexForwardAxis:0,this.indexUpAxis=void 0!==e.indexUpAxis?e.indexUpAxis:1,this.constraints=[],this.preStepCallback=()=>{},this.currentVehicleSpeedKmHour=0,this.numWheelsOnGround=0}addWheel(e){void 0===e&&(e={});const t=new Lt(e),n=this.wheelInfos.length;return this.wheelInfos.push(t),n}setSteeringValue(e,t){this.wheelInfos[t].steering=e}applyEngineForce(e,t){this.wheelInfos[t].engineForce=e}setBrake(e,t){this.wheelInfos[t].brake=e}addToWorld(e){e.addBody(this.chassisBody);const t=this;this.preStepCallback=()=>{t.updateVehicle(e.dt)},e.addEventListener("preStep",this.preStepCallback),this.world=e}getVehicleAxisWorld(e,t){t.set(0===e?1:0,1===e?1:0,2===e?1:0),this.chassisBody.vectorToWorldFrame(t,t)}updateVehicle(e){const t=this.wheelInfos,n=t.length,r=this.chassisBody;for(let e=0;e<n;e++)this.updateWheelTransform(e);this.currentVehicleSpeedKmHour=3.6*r.velocity.length();const i=new o;this.getVehicleAxisWorld(this.indexForwardAxis,i),i.dot(r.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(let e=0;e<n;e++)this.castRay(t[e]);this.updateSuspension(e);const s=new o,a=new o;for(let i=0;i<n;i++){const n=t[i];let o=n.suspensionForce;o>n.maxSuspensionForce&&(o=n.maxSuspensionForce),n.raycastResult.hitNormalWorld.scale(o*e,s),n.raycastResult.hitPointWorld.vsub(r.position,a),r.applyImpulse(s,a)}this.updateFriction(e);const c=new o,l=new o,u=new o;for(let i=0;i<n;i++){const n=t[i];r.getVelocityAtWorldPoint(n.chassisConnectionPointWorld,u);let s=1;if(1===this.indexUpAxis)s=-1;if(n.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,l);const t=l.dot(n.raycastResult.hitNormalWorld);n.raycastResult.hitNormalWorld.scale(t,c),l.vsub(c,l);const r=l.dot(u);n.deltaRotation=s*r*e/n.radius}!n.sliding&&n.isInContact||0===n.engineForce||!n.useCustomSlidingRotationalSpeed||(n.deltaRotation=(n.engineForce>0?1:-1)*n.customSlidingRotationalSpeed*e),Math.abs(n.brake)>Math.abs(n.engineForce)&&(n.deltaRotation=0),n.rotation+=n.deltaRotation,n.deltaRotation*=.99}}updateSuspension(e){const t=this.chassisBody.mass,n=this.wheelInfos,r=n.length;for(let e=0;e<r;e++){const r=n[e];if(r.isInContact){let e;const n=r.suspensionRestLength-r.suspensionLength;e=r.suspensionStiffness*n*r.clippedInvContactDotSuspension;const i=r.suspensionRelativeVelocity;let s;s=i<0?r.dampingCompression:r.dampingRelaxation,e-=s*i,r.suspensionForce=e*t,r.suspensionForce<0&&(r.suspensionForce=0)}else r.suspensionForce=0}}removeFromWorld(e){this.constraints,e.removeBody(this.chassisBody),e.removeEventListener("preStep",this.preStepCallback),this.world=null}castRay(e){const t=jt,n=Vt;this.updateWheelTransformWorld(e);const r=this.chassisBody;let i=-1;const s=e.suspensionRestLength+e.radius;e.directionWorld.scale(s,t);const a=e.chassisConnectionPointWorld;a.vadd(t,n);const c=e.raycastResult;c.reset();const l=r.collisionResponse;r.collisionResponse=!1,this.world.rayTest(a,n,c),r.collisionResponse=l;const u=c.body;if(e.raycastResult.groundObject=0,u){i=c.distance,e.raycastResult.hitNormalWorld=c.hitNormalWorld,e.isInContact=!0;const t=c.distance;e.suspensionLength=t-e.radius;const n=e.suspensionRestLength-e.maxSuspensionTravel,s=e.suspensionRestLength+e.maxSuspensionTravel;e.suspensionLength<n&&(e.suspensionLength=n),e.suspensionLength>s&&(e.suspensionLength=s,e.raycastResult.reset());const a=e.raycastResult.hitNormalWorld.dot(e.directionWorld),l=new o;r.getVelocityAtWorldPoint(e.raycastResult.hitPointWorld,l);const u=e.raycastResult.hitNormalWorld.dot(l);if(a>=-.1)e.suspensionRelativeVelocity=0,e.clippedInvContactDotSuspension=10;else{const t=-1/a;e.suspensionRelativeVelocity=u*t,e.clippedInvContactDotSuspension=t}}else e.suspensionLength=e.suspensionRestLength+0*e.maxSuspensionTravel,e.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.raycastResult.hitNormalWorld),e.clippedInvContactDotSuspension=1;return i}updateWheelTransformWorld(e){e.isInContact=!1;const t=this.chassisBody;t.pointToWorldFrame(e.chassisConnectionPointLocal,e.chassisConnectionPointWorld),t.vectorToWorldFrame(e.directionLocal,e.directionWorld),t.vectorToWorldFrame(e.axleLocal,e.axleWorld)}updateWheelTransform(e){const t=kt,n=zt,r=Gt,i=this.wheelInfos[e];this.updateWheelTransformWorld(i),i.directionLocal.scale(-1,t),n.copy(i.axleLocal),t.cross(n,r),r.normalize(),n.normalize();const s=i.steering,o=new m;o.setFromAxisAngle(t,s);const a=new m;a.setFromAxisAngle(n,i.rotation);const c=i.worldTransform.quaternion;this.chassisBody.quaternion.mult(o,c),c.mult(a,c),c.normalize();const l=i.worldTransform.position;l.copy(i.directionWorld),l.scale(i.suspensionLength,l),l.vadd(i.chassisConnectionPointWorld,l)}getWheelTransformWorld(e){return this.wheelInfos[e].worldTransform}updateFriction(e){const t=Ht,n=this.wheelInfos,r=n.length,i=this.chassisBody,s=qt,a=Wt;this.numWheelsOnGround=0;for(let e=0;e<r;e++){const t=n[e];t.raycastResult.body&&this.numWheelsOnGround++,t.sideImpulse=0,t.forwardImpulse=0,s[e]||(s[e]=new o),a[e]||(a[e]=new o)}for(let e=0;e<r;e++){const r=n[e],o=r.raycastResult.body;if(o){const n=a[e];this.getWheelTransformWorld(e).vectorToWorldFrame(Qt[this.indexRightAxis],n);const c=r.raycastResult.hitNormalWorld,l=n.dot(c);c.scale(l,t),n.vsub(t,n),n.normalize(),c.cross(n,s[e]),s[e].normalize(),r.sideImpulse=cn(i,r.raycastResult.hitPointWorld,o,r.raycastResult.hitPointWorld,n),r.sideImpulse*=Xt}}this.sliding=!1;for(let t=0;t<r;t++){const r=n[t],o=r.raycastResult.body;let a=0;if(r.slipInfo=1,o){const n=0,c=r.brake?r.brake:n;a=$t(i,o,r.raycastResult.hitPointWorld,s[t],c),a+=r.engineForce*e;const l=c/a;r.slipInfo*=l}if(r.forwardImpulse=0,r.skidInfo=1,o){r.skidInfo=1;const t=r.suspensionForce*e*r.frictionSlip,n=t*t;r.forwardImpulse=a;const i=.5*r.forwardImpulse/r.forwardAcceleration,s=1*r.sideImpulse/r.sideAcceleration,o=i*i+s*s;if(r.sliding=!1,o>n){this.sliding=!0,r.sliding=!0;const e=t/Math.sqrt(o);r.skidInfo*=e}}}if(this.sliding)for(let e=0;e<r;e++){const t=n[e];0!==t.sideImpulse&&t.skidInfo<1&&(t.forwardImpulse*=t.skidInfo,t.sideImpulse*=t.skidInfo)}for(let e=0;e<r;e++){const t=n[e],r=new o;if(t.raycastResult.hitPointWorld.vsub(i.position,r),0!==t.forwardImpulse){const n=new o;s[e].scale(t.forwardImpulse,n),i.applyImpulse(n,r)}if(0!==t.sideImpulse){const n=t.raycastResult.body,s=new o;t.raycastResult.hitPointWorld.vsub(n.position,s);const c=new o;a[e].scale(t.sideImpulse,c),i.vectorToLocalFrame(r,r),r["xyz"[this.indexUpAxis]]*=t.rollInfluence,i.vectorToWorldFrame(r,r),i.applyImpulse(c,r),c.scale(-1,c),n.applyImpulse(c,s)}}}}new o,new o,new o;const kt=new o,zt=new o,Gt=new o;new le,new o;const jt=new o,Vt=new o,Qt=[new o(1,0,0),new o(0,1,0),new o(0,0,1)],Ht=new o,Wt=[],qt=[],Xt=1,Kt=new o,Yt=new o,Jt=new o;function $t(e,t,n,r,i){let s=0;const o=n,a=Kt,c=Yt,l=Jt;e.getVelocityAtWorldPoint(o,a),t.getVelocityAtWorldPoint(o,c),a.vsub(c,l);return s=-r.dot(l)*(1/(rn(e,n,r)+rn(t,n,r))),i<s&&(s=i),s<-i&&(s=-i),s}const Zt=new o,en=new o,tn=new o,nn=new o;function rn(e,t,n){const r=Zt,i=en,s=tn,o=nn;return t.vsub(e.position,r),r.cross(n,i),e.invInertiaWorld.vmult(i,o),o.cross(r,s),e.invMass+n.dot(s)}const sn=new o,on=new o,an=new o;function cn(e,t,n,r,i){if(i.lengthSquared()>1.1)return 0;const s=sn,o=on,a=an;e.getVelocityAtWorldPoint(t,s),n.getVelocityAtWorldPoint(r,o),s.vsub(o,a);return-.2*i.dot(a)*(1/(e.invMass+n.invMass))}class ln extends _{constructor(e){if(super({type:_.types.SPHERE}),this.radius=void 0!==e?e:1,this.radius<0)throw new Error("The sphere radius cannot be negative.");this.updateBoundingSphereRadius()}calculateLocalInertia(e,t){void 0===t&&(t=new o);const n=2*e*this.radius*this.radius/5;return t.x=n,t.y=n,t.z=n,t}volume(){return 4*Math.PI*Math.pow(this.radius,3)/3}updateBoundingSphereRadius(){this.boundingSphereRadius=this.radius}calculateWorldAABB(e,t,n,r){const i=this.radius,s=["x","y","z"];for(let t=0;t<s.length;t++){const o=s[t];n[o]=e[o]-i,r[o]=e[o]+i}}}class un{constructor(e){void 0===e&&(e={}),this.wheelBodies=[],this.coordinateSystem=void 0!==e.coordinateSystem?e.coordinateSystem.clone():new o(1,2,3),e.chassisBody?this.chassisBody=e.chassisBody:this.chassisBody=new P({mass:1,shape:new M(new o(5,.5,2))}),this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}addWheel(e){let t;void 0===e&&(e={}),t=e.body?e.body:new P({mass:1,shape:new ln(1.2)}),this.wheelBodies.push(t),this.wheelForces.push(0);const n=void 0!==e.position?e.position.clone():new o,r=new o;this.chassisBody.pointToWorldFrame(n,r),t.position.set(r.x,r.y,r.z);const i=void 0!==e.axis?e.axis.clone():new o(0,0,1);this.wheelAxes.push(i);const s=new mt(this.chassisBody,t,{pivotA:n,axisA:i,pivotB:o.ZERO,axisB:i,collideConnected:!1});return this.constraints.push(s),this.wheelBodies.length-1}setSteeringValue(e,t){const n=this.wheelAxes[t],r=Math.cos(e),i=Math.sin(e),s=n.x,o=n.z;this.constraints[t].axisA.set(-r*s+i*o,0,i*s+r*o)}setMotorSpeed(e,t){const n=this.constraints[t];n.enableMotor(),n.motorTargetVelocity=e}disableMotor(e){this.constraints[e].disableMotor()}setWheelForce(e,t){this.wheelForces[t]=e}applyWheelForce(e,t){const n=this.wheelAxes[t],r=this.wheelBodies[t],i=r.torque;n.scale(e,hn),r.vectorToWorldFrame(hn,hn),i.vadd(hn,i)}addToWorld(e){const t=this.constraints,n=this.wheelBodies.concat([this.chassisBody]);for(let t=0;t<n.length;t++)e.addBody(n[t]);for(let n=0;n<t.length;n++)e.addConstraint(t[n]);e.addEventListener("preStep",this._update.bind(this))}_update(){const e=this.wheelForces;for(let t=0;t<e.length;t++)this.applyWheelForce(e[t],t)}removeFromWorld(e){const t=this.constraints,n=this.wheelBodies.concat([this.chassisBody]);for(let t=0;t<n.length;t++)e.removeBody(n[t]);for(let n=0;n<t.length;n++)e.removeConstraint(t[n])}getWheelSpeed(e){const t=this.wheelAxes[e],n=this.wheelBodies[e].angularVelocity;return this.chassisBody.vectorToWorldFrame(t,dn),n.dot(dn)}}const hn=new o,dn=new o;class pn{constructor(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}add(e){this.particles.push(e),this.neighbors.length<this.particles.length&&this.neighbors.push([])}remove(e){const t=this.particles.indexOf(e);-1!==t&&(this.particles.splice(t,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())}getNeighbors(e,t){const n=this.particles.length,r=e.id,i=this.smoothingRadius*this.smoothingRadius,s=fn;for(let o=0;o!==n;o++){const n=this.particles[o];n.position.vsub(e.position,s),r!==n.id&&s.lengthSquared()<i&&t.push(n)}}update(){const e=this.particles.length,t=mn,n=this.speedOfSound,r=this.eps;for(let r=0;r!==e;r++){const e=this.particles[r],i=this.neighbors[r];i.length=0,this.getNeighbors(e,i),i.push(this.particles[r]);const s=i.length;let o=0;for(let n=0;n!==s;n++){e.position.vsub(i[n].position,t);const r=t.length(),s=this.w(r);o+=i[n].mass*s}this.densities[r]=o,this.pressures[r]=n*n*(this.densities[r]-this.density)}const i=gn,s=An,o=yn,a=_n,c=vn;for(let t=0;t!==e;t++){const e=this.particles[t];let n,l;i.set(0,0,0),s.set(0,0,0);const u=this.neighbors[t],h=u.length;for(let d=0;d!==h;d++){const h=u[d];e.position.vsub(h.position,a);const p=a.length();n=-h.mass*(this.pressures[t]/(this.densities[t]*this.densities[t]+r)+this.pressures[d]/(this.densities[d]*this.densities[d]+r)),this.gradw(a,o),o.scale(n,o),i.vadd(o,i),h.velocity.vsub(e.velocity,c),c.scale(1/(1e-4+this.densities[t]*this.densities[d])*this.viscosity*h.mass,c),l=this.nablaw(p),c.scale(l,c),s.vadd(c,s)}s.scale(e.mass,s),i.scale(e.mass,i),e.force.vadd(s,e.force),e.force.vadd(i,e.force)}}w(e){const t=this.smoothingRadius;return 315/(64*Math.PI*t**9)*(t*t-e*e)**3}gradw(e,t){const n=e.length(),r=this.smoothingRadius;e.scale(945/(32*Math.PI*r**9)*(r*r-n*n)**2,t)}nablaw(e){const t=this.smoothingRadius;return 945/(32*Math.PI*t**9)*(t*t-e*e)*(7*e*e-3*t*t)}}const fn=new o,mn=new o,gn=new o,An=new o,yn=new o,_n=new o,vn=new o;class bn extends x{constructor(e,t,n,r){if(void 0===e&&(e=1),void 0===t&&(t=1),void 0===n&&(n=1),void 0===r&&(r=8),e<0)throw new Error("The cylinder radiusTop cannot be negative.");if(t<0)throw new Error("The cylinder radiusBottom cannot be negative.");const i=r,s=[],a=[],c=[],l=[],u=[],h=Math.cos,d=Math.sin;s.push(new o(-t*d(0),.5*-n,t*h(0))),l.push(0),s.push(new o(-e*d(0),.5*n,e*h(0))),u.push(1);for(let r=0;r<i;r++){const p=2*Math.PI/i*(r+1),f=2*Math.PI/i*(r+.5);r<i-1?(s.push(new o(-t*d(p),.5*-n,t*h(p))),l.push(2*r+2),s.push(new o(-e*d(p),.5*n,e*h(p))),u.push(2*r+3),c.push([2*r,2*r+1,2*r+3,2*r+2])):c.push([2*r,2*r+1,1,0]),(i%2==1||r<i/2)&&a.push(new o(-d(f),0,h(f)))}c.push(l),a.push(new o(0,1,0));const p=[];for(let e=0;e<u.length;e++)p.push(u[u.length-e-1]);c.push(p),super({vertices:s,faces:c,axes:a}),this.type=_.types.CYLINDER,this.radiusTop=e,this.radiusBottom=t,this.height=n,this.numSegments=r}}class xn extends _{constructor(){super({type:_.types.PARTICLE})}calculateLocalInertia(e,t){return void 0===t&&(t=new o),t.set(0,0,0),t}volume(){return 0}updateBoundingSphereRadius(){this.boundingSphereRadius=0}calculateWorldAABB(e,t,n,r){n.copy(e),r.copy(e)}}class wn extends _{constructor(){super({type:_.types.PLANE}),this.worldNormal=new o,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}computeWorldNormal(e){const t=this.worldNormal;t.set(0,0,1),e.vmult(t,t),this.worldNormalNeedsUpdate=!1}calculateLocalInertia(e,t){return void 0===t&&(t=new o),t}volume(){return Number.MAX_VALUE}calculateWorldAABB(e,t,n,r){En.set(0,0,1),t.vmult(En,En);const i=Number.MAX_VALUE;n.set(-i,-i,-i),r.set(i,i,i),1===En.x?r.x=e.x:-1===En.x&&(n.x=e.x),1===En.y?r.y=e.y:-1===En.y&&(n.y=e.y),1===En.z?r.z=e.z:-1===En.z&&(n.z=e.z)}updateBoundingSphereRadius(){this.boundingSphereRadius=Number.MAX_VALUE}}const En=new o;class Tn extends _{constructor(e,t){void 0===t&&(t={}),t=ke.defaults(t,{maxValue:null,minValue:null,elementSize:1}),super({type:_.types.HEIGHTFIELD}),this.data=e,this.maxValue=t.maxValue,this.minValue=t.minValue,this.elementSize=t.elementSize,null===t.minValue&&this.updateMinValue(),null===t.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,this.pillarConvex=new x,this.pillarOffset=new o,this.updateBoundingSphereRadius(),this._cachedPillars={}}update(){this._cachedPillars={}}updateMinValue(){const e=this.data;let t=e[0][0];for(let n=0;n!==e.length;n++)for(let r=0;r!==e[n].length;r++){const i=e[n][r];i<t&&(t=i)}this.minValue=t}updateMaxValue(){const e=this.data;let t=e[0][0];for(let n=0;n!==e.length;n++)for(let r=0;r!==e[n].length;r++){const i=e[n][r];i>t&&(t=i)}this.maxValue=t}setHeightValueAtIndex(e,t,n){this.data[e][t]=n,this.clearCachedConvexTrianglePillar(e,t,!1),e>0&&(this.clearCachedConvexTrianglePillar(e-1,t,!0),this.clearCachedConvexTrianglePillar(e-1,t,!1)),t>0&&(this.clearCachedConvexTrianglePillar(e,t-1,!0),this.clearCachedConvexTrianglePillar(e,t-1,!1)),t>0&&e>0&&this.clearCachedConvexTrianglePillar(e-1,t-1,!0)}getRectMinMax(e,t,n,r,i){void 0===i&&(i=[]);const s=this.data;let o=this.minValue;for(let i=e;i<=n;i++)for(let e=t;e<=r;e++){const t=s[i][e];t>o&&(o=t)}i[0]=this.minValue,i[1]=o}getIndexOfPosition(e,t,n,r){const i=this.elementSize,s=this.data;let o=Math.floor(e/i),a=Math.floor(t/i);return n[0]=o,n[1]=a,r&&(o<0&&(o=0),a<0&&(a=0),o>=s.length-1&&(o=s.length-1),a>=s[0].length-1&&(a=s[0].length-1)),!(o<0||a<0||o>=s.length-1||a>=s[0].length-1)}getTriangleAt(e,t,n,r,i,s){const o=Sn;this.getIndexOfPosition(e,t,o,n);let a=o[0],c=o[1];const l=this.data;n&&(a=Math.min(l.length-2,Math.max(0,a)),c=Math.min(l[0].length-2,Math.max(0,c)));const u=this.elementSize,h=(e/u-a)**2+(t/u-c)**2>(e/u-(a+1))**2+(t/u-(c+1))**2;return this.getTriangle(a,c,h,r,i,s),h}getNormalAt(e,t,n,r){const i=Bn,s=Pn,o=Dn,a=On,c=Ln;this.getTriangleAt(e,t,n,i,s,o),s.vsub(i,a),o.vsub(i,c),a.cross(c,r),r.normalize()}getAabbAtIndex(e,t,n){let{lowerBound:r,upperBound:i}=n;const s=this.data,o=this.elementSize;r.set(e*o,t*o,s[e][t]),i.set((e+1)*o,(t+1)*o,s[e+1][t+1])}getHeightAt(e,t,n){const r=this.data,i=Cn,s=In,o=Rn,a=Sn;this.getIndexOfPosition(e,t,a,n);let c=a[0],l=a[1];n&&(c=Math.min(r.length-2,Math.max(0,c)),l=Math.min(r[0].length-2,Math.max(0,l)));const u=this.getTriangleAt(e,t,n,i,s,o);!function(e,t,n,r,i,s,o,a,c){c.x=((s-a)*(e-o)+(o-i)*(t-a))/((s-a)*(n-o)+(o-i)*(r-a)),c.y=((a-r)*(e-o)+(n-o)*(t-a))/((s-a)*(n-o)+(o-i)*(r-a)),c.z=1-c.x-c.y}(e,t,i.x,i.y,s.x,s.y,o.x,o.y,Mn);const h=Mn;return u?r[c+1][l+1]*h.x+r[c][l+1]*h.y+r[c+1][l]*h.z:r[c][l]*h.x+r[c+1][l]*h.y+r[c][l+1]*h.z}getCacheConvexTrianglePillarKey(e,t,n){return`${e}_${t}_${n?1:0}`}getCachedConvexTrianglePillar(e,t,n){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,n)]}setCachedConvexTrianglePillar(e,t,n,r,i){this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,n)]={convex:r,offset:i}}clearCachedConvexTrianglePillar(e,t,n){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,t,n)]}getTriangle(e,t,n,r,i,s){const o=this.data,a=this.elementSize;n?(r.set((e+1)*a,(t+1)*a,o[e+1][t+1]),i.set(e*a,(t+1)*a,o[e][t+1]),s.set((e+1)*a,t*a,o[e+1][t])):(r.set(e*a,t*a,o[e][t]),i.set((e+1)*a,t*a,o[e+1][t]),s.set(e*a,(t+1)*a,o[e][t+1]))}getConvexTrianglePillar(e,t,n){let r=this.pillarConvex,i=this.pillarOffset;if(this.cacheEnabled){const s=this.getCachedConvexTrianglePillar(e,t,n);if(s)return this.pillarConvex=s.convex,void(this.pillarOffset=s.offset);r=new x,i=new o,this.pillarConvex=r,this.pillarOffset=i}const s=this.data,a=this.elementSize,c=r.faces;r.vertices.length=6;for(let e=0;e<6;e++)r.vertices[e]||(r.vertices[e]=new o);c.length=5;for(let e=0;e<5;e++)c[e]||(c[e]=[]);const l=r.vertices,u=(Math.min(s[e][t],s[e+1][t],s[e][t+1],s[e+1][t+1])-this.minValue)/2+this.minValue;n?(i.set((e+.75)*a,(t+.75)*a,u),l[0].set(.25*a,.25*a,s[e+1][t+1]-u),l[1].set(-.75*a,.25*a,s[e][t+1]-u),l[2].set(.25*a,-.75*a,s[e+1][t]-u),l[3].set(.25*a,.25*a,-Math.abs(u)-1),l[4].set(-.75*a,.25*a,-Math.abs(u)-1),l[5].set(.25*a,-.75*a,-Math.abs(u)-1),c[0][0]=0,c[0][1]=1,c[0][2]=2,c[1][0]=5,c[1][1]=4,c[1][2]=3,c[2][0]=2,c[2][1]=5,c[2][2]=3,c[2][3]=0,c[3][0]=3,c[3][1]=4,c[3][2]=1,c[3][3]=0,c[4][0]=1,c[4][1]=4,c[4][2]=5,c[4][3]=2):(i.set((e+.25)*a,(t+.25)*a,u),l[0].set(-.25*a,-.25*a,s[e][t]-u),l[1].set(.75*a,-.25*a,s[e+1][t]-u),l[2].set(-.25*a,.75*a,s[e][t+1]-u),l[3].set(-.25*a,-.25*a,-Math.abs(u)-1),l[4].set(.75*a,-.25*a,-Math.abs(u)-1),l[5].set(-.25*a,.75*a,-Math.abs(u)-1),c[0][0]=0,c[0][1]=1,c[0][2]=2,c[1][0]=5,c[1][1]=4,c[1][2]=3,c[2][0]=0,c[2][1]=2,c[2][2]=5,c[2][3]=3,c[3][0]=1,c[3][1]=0,c[3][2]=3,c[3][3]=4,c[4][0]=4,c[4][1]=5,c[4][2]=2,c[4][3]=1),r.computeNormals(),r.computeEdges(),r.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(e,t,n,r,i)}calculateLocalInertia(e,t){return void 0===t&&(t=new o),t.set(0,0,0),t}volume(){return Number.MAX_VALUE}calculateWorldAABB(e,t,n,r){n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),r.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)}updateBoundingSphereRadius(){const e=this.data,t=this.elementSize;this.boundingSphereRadius=new o(e.length*t,e[0].length*t,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).length()}setHeightsFromImage(e,t){const{x:n,z:r,y:i}=t,s=document.createElement("canvas");s.width=e.width,s.height=e.height;const o=s.getContext("2d");o.drawImage(e,0,0);const a=o.getImageData(0,0,e.width,e.height),c=this.data;c.length=0,this.elementSize=Math.abs(n)/a.width;for(let e=0;e<a.height;e++){const t=[];for(let i=0;i<a.width;i++){const s=(a.data[4*(e*a.height+i)]+a.data[4*(e*a.height+i)+1]+a.data[4*(e*a.height+i)+2])/4/255*r;n<0?t.push(s):t.unshift(s)}i<0?c.unshift(t):c.push(t)}this.updateMaxValue(),this.updateMinValue(),this.update()}}const Sn=[],Mn=new o,Cn=new o,In=new o,Rn=new o,Bn=new o,Pn=new o,Dn=new o,On=new o,Ln=new o;class Nn{constructor(e){void 0===e&&(e={}),this.root=e.root||null,this.aabb=e.aabb?e.aabb.clone():new u,this.data=[],this.children=[]}reset(){this.children.length=this.data.length=0}insert(e,t,n){void 0===n&&(n=0);const r=this.data;if(!this.aabb.contains(e))return!1;const i=this.children;if(n<(this.maxDepth||this.root.maxDepth)){let r=!1;i.length||(this.subdivide(),r=!0);for(let r=0;8!==r;r++)if(i[r].insert(e,t,n+1))return!0;r&&(i.length=0)}return r.push(t),!0}subdivide(){const e=this.aabb,t=e.lowerBound,n=e.upperBound,r=this.children;r.push(new Nn({aabb:new u({lowerBound:new o(0,0,0)})}),new Nn({aabb:new u({lowerBound:new o(1,0,0)})}),new Nn({aabb:new u({lowerBound:new o(1,1,0)})}),new Nn({aabb:new u({lowerBound:new o(1,1,1)})}),new Nn({aabb:new u({lowerBound:new o(0,1,1)})}),new Nn({aabb:new u({lowerBound:new o(0,0,1)})}),new Nn({aabb:new u({lowerBound:new o(1,0,1)})}),new Nn({aabb:new u({lowerBound:new o(0,1,0)})})),n.vsub(t,Un),Un.scale(.5,Un);const i=this.root||this;for(let e=0;8!==e;e++){const n=r[e];n.root=i;const s=n.aabb.lowerBound;s.x*=Un.x,s.y*=Un.y,s.z*=Un.z,s.vadd(t,s),s.vadd(Un,n.aabb.upperBound)}}aabbQuery(e,t){this.data,this.children;const n=[this];for(;n.length;){const r=n.pop();r.aabb.overlaps(e)&&Array.prototype.push.apply(t,r.data),Array.prototype.push.apply(n,r.children)}return t}rayQuery(e,t,n){return e.getAABB(kn),kn.toLocalFrame(t,kn),this.aabbQuery(kn,n),n}removeEmptyNodes(){for(let e=this.children.length-1;e>=0;e--)this.children[e].removeEmptyNodes(),this.children[e].children.length||this.children[e].data.length||this.children.splice(e,1)}}class Fn extends Nn{constructor(e,t){void 0===t&&(t={}),super({root:null,aabb:e}),this.maxDepth=void 0!==t.maxDepth?t.maxDepth:8}}const Un=new o,kn=new u;class zn extends _{constructor(e,t){super({type:_.types.TRIMESH}),this.vertices=new Float32Array(e),this.indices=new Int16Array(t),this.normals=new Float32Array(t.length),this.aabb=new u,this.edges=null,this.scale=new o(1,1,1),this.tree=new Fn,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}updateTree(){const e=this.tree;e.reset(),e.aabb.copy(this.aabb);const t=this.scale;e.aabb.lowerBound.x*=1/t.x,e.aabb.lowerBound.y*=1/t.y,e.aabb.lowerBound.z*=1/t.z,e.aabb.upperBound.x*=1/t.x,e.aabb.upperBound.y*=1/t.y,e.aabb.upperBound.z*=1/t.z;const n=new u,r=new o,i=new o,s=new o,a=[r,i,s];for(let t=0;t<this.indices.length/3;t++){const o=3*t;this._getUnscaledVertex(this.indices[o],r),this._getUnscaledVertex(this.indices[o+1],i),this._getUnscaledVertex(this.indices[o+2],s),n.setFromPoints(a),e.insert(n,t)}e.removeEmptyNodes()}getTrianglesInAABB(e,t){jn.copy(e);const n=this.scale,r=n.x,i=n.y,s=n.z,o=jn.lowerBound,a=jn.upperBound;return o.x/=r,o.y/=i,o.z/=s,a.x/=r,a.y/=i,a.z/=s,this.tree.aabbQuery(jn,t)}setScale(e){const t=this.scale.x===this.scale.y&&this.scale.y===this.scale.z,n=e.x===e.y&&e.y===e.z;t&&n||this.updateNormals(),this.scale.copy(e),this.updateAABB(),this.updateBoundingSphereRadius()}updateNormals(){const e=Gn,t=this.normals;for(let n=0;n<this.indices.length/3;n++){const r=3*n,i=this.indices[r],s=this.indices[r+1],o=this.indices[r+2];this.getVertex(i,qn),this.getVertex(s,Xn),this.getVertex(o,Kn),zn.computeNormal(Xn,qn,Kn,e),t[r]=e.x,t[r+1]=e.y,t[r+2]=e.z}}updateEdges(){const e={},t=(t,n)=>{e[t<n?`${t}_${n}`:`${n}_${t}`]=!0};for(let e=0;e<this.indices.length/3;e++){const n=3*e,r=this.indices[n],i=this.indices[n+1],s=this.indices[n+2];t(r,i),t(i,s),t(s,r)}const n=Object.keys(e);this.edges=new Int16Array(2*n.length);for(let e=0;e<n.length;e++){const t=n[e].split("_");this.edges[2*e]=parseInt(t[0],10),this.edges[2*e+1]=parseInt(t[1],10)}}getEdgeVertex(e,t,n){const r=this.edges[2*e+(t?1:0)];this.getVertex(r,n)}getEdgeVector(e,t){const n=Vn,r=Qn;this.getEdgeVertex(e,0,n),this.getEdgeVertex(e,1,r),r.vsub(n,t)}static computeNormal(e,t,n,r){t.vsub(e,Wn),n.vsub(t,Hn),Hn.cross(Wn,r),r.isZero()||r.normalize()}getVertex(e,t){const n=this.scale;return this._getUnscaledVertex(e,t),t.x*=n.x,t.y*=n.y,t.z*=n.z,t}_getUnscaledVertex(e,t){const n=3*e,r=this.vertices;return t.set(r[n],r[n+1],r[n+2])}getWorldVertex(e,t,n,r){return this.getVertex(e,r),v.pointToWorldFrame(t,n,r,r),r}getTriangleVertices(e,t,n,r){const i=3*e;this.getVertex(this.indices[i],t),this.getVertex(this.indices[i+1],n),this.getVertex(this.indices[i+2],r)}getNormal(e,t){const n=3*e;return t.set(this.normals[n],this.normals[n+1],this.normals[n+2])}calculateLocalInertia(e,t){this.computeLocalAABB(Yn);const n=Yn.upperBound.x-Yn.lowerBound.x,r=Yn.upperBound.y-Yn.lowerBound.y,i=Yn.upperBound.z-Yn.lowerBound.z;return t.set(1/12*e*(2*r*2*r+2*i*2*i),1/12*e*(2*n*2*n+2*i*2*i),1/12*e*(2*r*2*r+2*n*2*n))}computeLocalAABB(e){const t=e.lowerBound,n=e.upperBound,r=this.vertices.length;this.vertices;const i=Jn;this.getVertex(0,i),t.copy(i),n.copy(i);for(let e=0;e!==r;e++)this.getVertex(e,i),i.x<t.x?t.x=i.x:i.x>n.x&&(n.x=i.x),i.y<t.y?t.y=i.y:i.y>n.y&&(n.y=i.y),i.z<t.z?t.z=i.z:i.z>n.z&&(n.z=i.z)}updateAABB(){this.computeLocalAABB(this.aabb)}updateBoundingSphereRadius(){let e=0;const t=this.vertices,n=new o;for(let r=0,i=t.length/3;r!==i;r++){this.getVertex(r,n);const t=n.lengthSquared();t>e&&(e=t)}this.boundingSphereRadius=Math.sqrt(e)}calculateWorldAABB(e,t,n,r){const i=$n,s=Zn;i.position=e,i.quaternion=t,this.aabb.toWorldFrame(i,s),n.copy(s.lowerBound),r.copy(s.upperBound)}volume(){return 4*Math.PI*this.boundingSphereRadius/3}static createTorus(e,t,n,r,i){void 0===e&&(e=1),void 0===t&&(t=.5),void 0===n&&(n=8),void 0===r&&(r=6),void 0===i&&(i=2*Math.PI);const s=[],o=[];for(let o=0;o<=n;o++)for(let a=0;a<=r;a++){const c=a/r*i,l=o/n*Math.PI*2,u=(e+t*Math.cos(l))*Math.cos(c),h=(e+t*Math.cos(l))*Math.sin(c),d=t*Math.sin(l);s.push(u,h,d)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,s=(r+1)*(e-1)+t,a=(r+1)*e+t;o.push(n,i,a),o.push(i,s,a)}return new zn(s,o)}}const Gn=new o,jn=new u,Vn=new o,Qn=new o,Hn=new o,Wn=new o,qn=new o,Xn=new o,Kn=new o,Yn=new u,Jn=new o,$n=new v,Zn=new u;class er{constructor(){this.equations=[]}solve(e,t){return 0}addEquation(e){!e.enabled||e.bi.isTrigger||e.bj.isTrigger||this.equations.push(e)}removeEquation(e){const t=this.equations,n=t.indexOf(e);-1!==n&&t.splice(n,1)}removeAllEquations(){this.equations.length=0}}class tr extends er{constructor(){super(),this.iterations=10,this.tolerance=1e-7}solve(e,t){let n=0;const r=this.iterations,i=this.tolerance*this.tolerance,s=this.equations,o=s.length,a=t.bodies,c=a.length,l=e;let u,h,d,p,f,m;if(0!==o)for(let e=0;e!==c;e++)a[e].updateSolveMassProperties();const g=rr,A=ir,y=nr;g.length=o,A.length=o,y.length=o;for(let e=0;e!==o;e++){const t=s[e];y[e]=0,A[e]=t.computeB(l),g[e]=1/t.computeC()}if(0!==o){for(let e=0;e!==c;e++){const t=a[e],n=t.vlambda,r=t.wlambda;n.set(0,0,0),r.set(0,0,0)}for(n=0;n!==r;n++){p=0;for(let e=0;e!==o;e++){const t=s[e];u=A[e],h=g[e],m=y[e],f=t.computeGWlambda(),d=h*(u-f-t.eps*m),m+d<t.minForce?d=t.minForce-m:m+d>t.maxForce&&(d=t.maxForce-m),y[e]+=d,p+=d>0?d:-d,t.addToWlambda(d)}if(p*p<i)break}for(let e=0;e!==c;e++){const t=a[e],n=t.velocity,r=t.angularVelocity;t.vlambda.vmul(t.linearFactor,t.vlambda),n.vadd(t.vlambda,n),t.wlambda.vmul(t.angularFactor,t.wlambda),r.vadd(t.wlambda,r)}let e=s.length;const t=1/l;for(;e--;)s[e].multiplier=y[e]*t}return n}}const nr=[],rr=[],ir=[];class sr extends er{constructor(e){for(super(),this.iterations=10,this.tolerance=1e-7,this.subsolver=e,this.nodes=[],this.nodePool=[];this.nodePool.length<128;)this.nodePool.push(this.createNode())}createNode(){return{body:null,children:[],eqs:[],visited:!1}}solve(e,t){const n=or,r=this.nodePool,i=t.bodies,s=this.equations,o=s.length,a=i.length,c=this.subsolver;for(;r.length<a;)r.push(this.createNode());n.length=a;for(let e=0;e<a;e++)n[e]=r[e];for(let e=0;e!==a;e++){const t=n[e];t.body=i[e],t.children.length=0,t.eqs.length=0,t.visited=!1}for(let e=0;e!==o;e++){const t=s[e],r=i.indexOf(t.bi),o=i.indexOf(t.bj),a=n[r],c=n[o];a.children.push(c),a.eqs.push(t),c.children.push(a),c.eqs.push(t)}let l,u=0,h=ar;c.tolerance=this.tolerance,c.iterations=this.iterations;const d=cr;for(;l=ur(n);){h.length=0,d.bodies.length=0,dr(l,pr,d.bodies,h);const t=h.length;h=h.sort(fr);for(let e=0;e!==t;e++)c.addEquation(h[e]);c.solve(e,d),c.removeAllEquations(),u++}return u}}const or=[],ar=[],cr={bodies:[]},lr=P.STATIC;function ur(e){const t=e.length;for(let n=0;n!==t;n++){const t=e[n];if(!(t.visited||t.body.type&lr))return t}return!1}const hr=[];function dr(e,t,n,r){for(hr.push(e),e.visited=!0,t(e,n,r);hr.length;){const e=hr.pop();let i;for(;i=ur(e.children);)i.visited=!0,t(i,n,r),hr.push(i)}}function pr(e,t,n){t.push(e.body);const r=e.eqs.length;for(let t=0;t!==r;t++){const r=e.eqs[t];n.includes(r)||n.push(r)}}function fr(e,t){return t.id-e.id}class mr{constructor(){this.objects=[],this.type=Object}release(){const e=arguments.length;for(let t=0;t!==e;t++)this.objects.push(t<0||arguments.length<=t?void 0:arguments[t]);return this}get(){return 0===this.objects.length?this.constructObject():this.objects.pop()}constructObject(){throw new Error("constructObject() not implemented in this Pool subclass yet!")}resize(e){const t=this.objects;for(;t.length>e;)t.pop();for(;t.length<e;)t.push(this.constructObject());return this}}class gr extends mr{constructor(){super(...arguments),this.type=o}constructObject(){return new o}}const Ar={sphereSphere:_.types.SPHERE,spherePlane:_.types.SPHERE|_.types.PLANE,boxBox:_.types.BOX|_.types.BOX,sphereBox:_.types.SPHERE|_.types.BOX,planeBox:_.types.PLANE|_.types.BOX,convexConvex:_.types.CONVEXPOLYHEDRON,sphereConvex:_.types.SPHERE|_.types.CONVEXPOLYHEDRON,planeConvex:_.types.PLANE|_.types.CONVEXPOLYHEDRON,boxConvex:_.types.BOX|_.types.CONVEXPOLYHEDRON,sphereHeightfield:_.types.SPHERE|_.types.HEIGHTFIELD,boxHeightfield:_.types.BOX|_.types.HEIGHTFIELD,convexHeightfield:_.types.CONVEXPOLYHEDRON|_.types.HEIGHTFIELD,sphereParticle:_.types.PARTICLE|_.types.SPHERE,planeParticle:_.types.PLANE|_.types.PARTICLE,boxParticle:_.types.BOX|_.types.PARTICLE,convexParticle:_.types.PARTICLE|_.types.CONVEXPOLYHEDRON,cylinderCylinder:_.types.CYLINDER,sphereCylinder:_.types.SPHERE|_.types.CYLINDER,planeCylinder:_.types.PLANE|_.types.CYLINDER,boxCylinder:_.types.BOX|_.types.CYLINDER,convexCylinder:_.types.CONVEXPOLYHEDRON|_.types.CYLINDER,heightfieldCylinder:_.types.HEIGHTFIELD|_.types.CYLINDER,particleCylinder:_.types.PARTICLE|_.types.CYLINDER,sphereTrimesh:_.types.SPHERE|_.types.TRIMESH,planeTrimesh:_.types.PLANE|_.types.TRIMESH};class yr{get[Ar.sphereSphere](){return this.sphereSphere}get[Ar.spherePlane](){return this.spherePlane}get[Ar.boxBox](){return this.boxBox}get[Ar.sphereBox](){return this.sphereBox}get[Ar.planeBox](){return this.planeBox}get[Ar.convexConvex](){return this.convexConvex}get[Ar.sphereConvex](){return this.sphereConvex}get[Ar.planeConvex](){return this.planeConvex}get[Ar.boxConvex](){return this.boxConvex}get[Ar.sphereHeightfield](){return this.sphereHeightfield}get[Ar.boxHeightfield](){return this.boxHeightfield}get[Ar.convexHeightfield](){return this.convexHeightfield}get[Ar.sphereParticle](){return this.sphereParticle}get[Ar.planeParticle](){return this.planeParticle}get[Ar.boxParticle](){return this.boxParticle}get[Ar.convexParticle](){return this.convexParticle}get[Ar.cylinderCylinder](){return this.convexConvex}get[Ar.sphereCylinder](){return this.sphereConvex}get[Ar.planeCylinder](){return this.planeConvex}get[Ar.boxCylinder](){return this.boxConvex}get[Ar.convexCylinder](){return this.convexConvex}get[Ar.heightfieldCylinder](){return this.heightfieldCylinder}get[Ar.particleCylinder](){return this.particleCylinder}get[Ar.sphereTrimesh](){return this.sphereTrimesh}get[Ar.planeTrimesh](){return this.planeTrimesh}constructor(e){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new gr,this.world=e,this.currentContactMaterial=e.defaultContactMaterial,this.enableFrictionReduction=!1}createContactEquation(e,t,n,r,i,s){let o;this.contactPointPool.length?(o=this.contactPointPool.pop(),o.bi=e,o.bj=t):o=new Ke(e,t),o.enabled=e.collisionResponse&&t.collisionResponse&&n.collisionResponse&&r.collisionResponse;const a=this.currentContactMaterial;o.restitution=a.restitution,o.setSpookParams(a.contactEquationStiffness,a.contactEquationRelaxation,this.world.dt);const c=n.material||e.material,l=r.material||t.material;return c&&l&&c.restitution>=0&&l.restitution>=0&&(o.restitution=c.restitution*l.restitution),o.si=i||n,o.sj=s||r,o}createFrictionEquationsFromContact(e,t){const n=e.bi,r=e.bj,i=e.si,s=e.sj,o=this.world,a=this.currentContactMaterial;let c=a.friction;const l=i.material||n.material,u=s.material||r.material;if(l&&u&&l.friction>=0&&u.friction>=0&&(c=l.friction*u.friction),c>0){const i=c*(o.frictionGravity||o.gravity).length();let s=n.invMass+r.invMass;s>0&&(s=1/s);const l=this.frictionEquationPool,u=l.length?l.pop():new yt(n,r,i*s),h=l.length?l.pop():new yt(n,r,i*s);return u.bi=h.bi=n,u.bj=h.bj=r,u.minForce=h.minForce=-i*s,u.maxForce=h.maxForce=i*s,u.ri.copy(e.ri),u.rj.copy(e.rj),h.ri.copy(e.ri),h.rj.copy(e.rj),e.ni.tangents(u.t,h.t),u.setSpookParams(a.frictionEquationStiffness,a.frictionEquationRelaxation,o.dt),h.setSpookParams(a.frictionEquationStiffness,a.frictionEquationRelaxation,o.dt),u.enabled=h.enabled=e.enabled,t.push(u,h),!0}return!1}createFrictionFromAverage(e){let t=this.result[this.result.length-1];if(!this.createFrictionEquationsFromContact(t,this.frictionResult)||1===e)return;const n=this.frictionResult[this.frictionResult.length-2],r=this.frictionResult[this.frictionResult.length-1];_r.setZero(),vr.setZero(),br.setZero();const i=t.bi;t.bj;for(let n=0;n!==e;n++)t=this.result[this.result.length-1-n],t.bi!==i?(_r.vadd(t.ni,_r),vr.vadd(t.ri,vr),br.vadd(t.rj,br)):(_r.vsub(t.ni,_r),vr.vadd(t.rj,vr),br.vadd(t.ri,br));const s=1/e;vr.scale(s,n.ri),br.scale(s,n.rj),r.ri.copy(n.ri),r.rj.copy(n.rj),_r.normalize(),_r.tangents(n.t,r.t)}getContacts(e,t,n,r,i,s,o){this.contactPointPool=i,this.frictionEquationPool=o,this.result=r,this.frictionResult=s;const a=Er,c=Tr,l=xr,u=wr;for(let r=0,i=e.length;r!==i;r++){const i=e[r],s=t[r];let o=null;i.material&&s.material&&(o=n.getContactMaterial(i.material,s.material)||null);const h=i.type&P.KINEMATIC&&s.type&P.STATIC||i.type&P.STATIC&&s.type&P.KINEMATIC||i.type&P.KINEMATIC&&s.type&P.KINEMATIC;for(let e=0;e<i.shapes.length;e++){i.quaternion.mult(i.shapeOrientations[e],a),i.quaternion.vmult(i.shapeOffsets[e],l),l.vadd(i.position,l);const t=i.shapes[e];for(let e=0;e<s.shapes.length;e++){s.quaternion.mult(s.shapeOrientations[e],c),s.quaternion.vmult(s.shapeOffsets[e],u),u.vadd(s.position,u);const r=s.shapes[e];if(!(t.collisionFilterMask&r.collisionFilterGroup&&r.collisionFilterMask&t.collisionFilterGroup))continue;if(l.distanceTo(u)>t.boundingSphereRadius+r.boundingSphereRadius)continue;let d=null;t.material&&r.material&&(d=n.getContactMaterial(t.material,r.material)||null),this.currentContactMaterial=d||o||n.defaultContactMaterial;const p=this[t.type|r.type];if(p){let e=!1;e=t.type<r.type?p.call(this,t,r,l,u,a,c,i,s,t,r,h):p.call(this,r,t,u,l,c,a,s,i,t,r,h),e&&h&&(n.shapeOverlapKeeper.set(t.id,r.id),n.bodyOverlapKeeper.set(i.id,s.id))}}}}}sphereSphere(e,t,n,r,i,s,o,a,c,l,u){if(u)return n.distanceSquared(r)<(e.radius+t.radius)**2;const h=this.createContactEquation(o,a,e,t,c,l);r.vsub(n,h.ni),h.ni.normalize(),h.ri.copy(h.ni),h.rj.copy(h.ni),h.ri.scale(e.radius,h.ri),h.rj.scale(-t.radius,h.rj),h.ri.vadd(n,h.ri),h.ri.vsub(o.position,h.ri),h.rj.vadd(r,h.rj),h.rj.vsub(a.position,h.rj),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)}spherePlane(e,t,n,r,i,s,o,a,c,l,u){const h=this.createContactEquation(o,a,e,t,c,l);if(h.ni.set(0,0,1),s.vmult(h.ni,h.ni),h.ni.negate(h.ni),h.ni.normalize(),h.ni.scale(e.radius,h.ri),n.vsub(r,Qr),h.ni.scale(h.ni.dot(Qr),Hr),Qr.vsub(Hr,h.rj),-Qr.dot(h.ni)<=e.radius){if(u)return!0;const e=h.ri,t=h.rj;e.vadd(n,e),e.vsub(o.position,e),t.vadd(r,t),t.vsub(a.position,t),this.result.push(h),this.createFrictionEquationsFromContact(h,this.frictionResult)}}boxBox(e,t,n,r,i,s,o,a,c,l,u){return e.convexPolyhedronRepresentation.material=e.material,t.convexPolyhedronRepresentation.material=t.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t.convexPolyhedronRepresentation,n,r,i,s,o,a,e,t,u)}sphereBox(e,t,n,r,i,s,o,a,c,l,u){const h=this.v3pool,d=ei;n.vsub(r,Yr),t.getSideNormals(d,s);const p=e.radius;let f=!1;const m=ni,g=ri,A=ii;let y=null,_=0,v=0,b=0,x=null;for(let e=0,t=d.length;e!==t&&!1===f;e++){const t=Jr;t.copy(d[e]);const n=t.length();t.normalize();const r=Yr.dot(t);if(r<n+p&&r>0){const i=$r,s=Zr;i.copy(d[(e+1)%3]),s.copy(d[(e+2)%3]);const o=i.length(),a=s.length();i.normalize(),s.normalize();const c=Yr.dot(i),l=Yr.dot(s);if(c<o&&c>-o&&l<a&&l>-a){const e=Math.abs(r-n-p);if((null===x||e<x)&&(x=e,v=c,b=l,y=n,m.copy(t),g.copy(i),A.copy(s),_++,u))return!0}}}if(_){f=!0;const i=this.createContactEquation(o,a,e,t,c,l);m.scale(-p,i.ri),i.ni.copy(m),i.ni.negate(i.ni),m.scale(y,m),g.scale(v,g),m.vadd(g,m),A.scale(b,A),m.vadd(A,i.rj),i.ri.vadd(n,i.ri),i.ri.vsub(o.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(a.position,i.rj),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}let w=h.get();const E=ti;for(let i=0;2!==i&&!f;i++)for(let s=0;2!==s&&!f;s++)for(let h=0;2!==h&&!f;h++)if(w.set(0,0,0),i?w.vadd(d[0],w):w.vsub(d[0],w),s?w.vadd(d[1],w):w.vsub(d[1],w),h?w.vadd(d[2],w):w.vsub(d[2],w),r.vadd(w,E),E.vsub(n,E),E.lengthSquared()<p*p){if(u)return!0;f=!0;const i=this.createContactEquation(o,a,e,t,c,l);i.ri.copy(E),i.ri.normalize(),i.ni.copy(i.ri),i.ri.scale(p,i.ri),i.rj.copy(w),i.ri.vadd(n,i.ri),i.ri.vsub(o.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(a.position,i.rj),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}h.release(w),w=null;const T=h.get(),S=h.get(),M=h.get(),C=h.get(),I=h.get(),R=d.length;for(let i=0;i!==R&&!f;i++)for(let s=0;s!==R&&!f;s++)if(i%3!=s%3){d[s].cross(d[i],T),T.normalize(),d[i].vadd(d[s],S),M.copy(n),M.vsub(S,M),M.vsub(r,M);const h=M.dot(T);T.scale(h,C);let m=0;for(;m===i%3||m===s%3;)m++;I.copy(n),I.vsub(C,I),I.vsub(S,I),I.vsub(r,I);const g=Math.abs(h),A=I.length();if(g<d[m].length()&&A<p){if(u)return!0;f=!0;const i=this.createContactEquation(o,a,e,t,c,l);S.vadd(C,i.rj),i.rj.copy(i.rj),I.negate(i.ni),i.ni.normalize(),i.ri.copy(i.rj),i.ri.vadd(r,i.ri),i.ri.vsub(n,i.ri),i.ri.normalize(),i.ri.scale(p,i.ri),i.ri.vadd(n,i.ri),i.ri.vsub(o.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(a.position,i.rj),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}}h.release(T,S,M,C,I)}planeBox(e,t,n,r,i,s,o,a,c,l,u){return t.convexPolyhedronRepresentation.material=t.material,t.convexPolyhedronRepresentation.collisionResponse=t.collisionResponse,t.convexPolyhedronRepresentation.id=t.id,this.planeConvex(e,t.convexPolyhedronRepresentation,n,r,i,s,o,a,e,t,u)}convexConvex(e,t,n,r,i,s,o,a,c,l,u,h,d){const p=_i;if(!(n.distanceTo(r)>e.boundingSphereRadius+t.boundingSphereRadius)&&e.findSeparatingAxis(t,n,i,r,s,p,h,d)){const h=[],d=vi;e.clipAgainstHull(n,i,t,r,s,p,-100,100,h);let f=0;for(let i=0;i!==h.length;i++){if(u)return!0;const s=this.createContactEquation(o,a,e,t,c,l),m=s.ri,g=s.rj;p.negate(s.ni),h[i].normal.negate(d),d.scale(h[i].depth,d),h[i].point.vadd(d,m),g.copy(h[i].point),m.vsub(n,m),g.vsub(r,g),m.vadd(n,m),m.vsub(o.position,m),g.vadd(r,g),g.vsub(a.position,g),this.result.push(s),f++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(s,this.frictionResult)}this.enableFrictionReduction&&f&&this.createFrictionFromAverage(f)}}sphereConvex(e,t,n,r,i,s,o,a,c,l,u){const h=this.v3pool;n.vsub(r,si);const d=t.faceNormals,p=t.faces,f=t.vertices,m=e.radius;let g=!1;for(let i=0;i!==f.length;i++){const h=f[i],d=li;s.vmult(h,d),r.vadd(d,d);const p=ci;if(d.vsub(n,p),p.lengthSquared()<m*m){if(u)return!0;g=!0;const i=this.createContactEquation(o,a,e,t,c,l);return i.ri.copy(p),i.ri.normalize(),i.ni.copy(i.ri),i.ri.scale(m,i.ri),d.vsub(r,i.rj),i.ri.vadd(n,i.ri),i.ri.vsub(o.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(a.position,i.rj),this.result.push(i),void this.createFrictionEquationsFromContact(i,this.frictionResult)}}for(let i=0,A=p.length;i!==A&&!1===g;i++){const A=d[i],y=p[i],_=ui;s.vmult(A,_);const v=hi;s.vmult(f[y[0]],v),v.vadd(r,v);const b=di;_.scale(-m,b),n.vadd(b,b);const x=pi;b.vsub(v,x);const w=x.dot(_),E=fi;if(n.vsub(v,E),w<0&&E.dot(_)>0){const i=[];for(let e=0,t=y.length;e!==t;e++){const t=h.get();s.vmult(f[y[e]],t),r.vadd(t,t),i.push(t)}if(Kr(i,_,n)){if(u)return!0;g=!0;const s=this.createContactEquation(o,a,e,t,c,l);_.scale(-m,s.ri),_.negate(s.ni);const d=h.get();_.scale(-w,d);const p=h.get();_.scale(-m,p),n.vsub(r,s.rj),s.rj.vadd(p,s.rj),s.rj.vadd(d,s.rj),s.rj.vadd(r,s.rj),s.rj.vsub(a.position,s.rj),s.ri.vadd(n,s.ri),s.ri.vsub(o.position,s.ri),h.release(d),h.release(p),this.result.push(s),this.createFrictionEquationsFromContact(s,this.frictionResult);for(let e=0,t=i.length;e!==t;e++)h.release(i[e]);return}for(let d=0;d!==y.length;d++){const p=h.get(),g=h.get();s.vmult(f[y[(d+1)%y.length]],p),s.vmult(f[y[(d+2)%y.length]],g),r.vadd(p,p),r.vadd(g,g);const A=oi;g.vsub(p,A);const _=ai;A.unit(_);const v=h.get(),b=h.get();n.vsub(p,b);const x=b.dot(_);_.scale(x,v),v.vadd(p,v);const w=h.get();if(v.vsub(n,w),x>0&&x*x<A.lengthSquared()&&w.lengthSquared()<m*m){if(u)return!0;const s=this.createContactEquation(o,a,e,t,c,l);v.vsub(r,s.rj),v.vsub(n,s.ni),s.ni.normalize(),s.ni.scale(m,s.ri),s.rj.vadd(r,s.rj),s.rj.vsub(a.position,s.rj),s.ri.vadd(n,s.ri),s.ri.vsub(o.position,s.ri),this.result.push(s),this.createFrictionEquationsFromContact(s,this.frictionResult);for(let e=0,t=i.length;e!==t;e++)h.release(i[e]);return h.release(p),h.release(g),h.release(v),h.release(w),void h.release(b)}h.release(p),h.release(g),h.release(v),h.release(w),h.release(b)}for(let e=0,t=i.length;e!==t;e++)h.release(i[e])}}}planeConvex(e,t,n,r,i,s,o,a,c,l,u){const h=mi,d=gi;d.set(0,0,1),i.vmult(d,d);let p=0;const f=Ai;for(let i=0;i!==t.vertices.length;i++){h.copy(t.vertices[i]),s.vmult(h,h),r.vadd(h,h),h.vsub(n,f);if(d.dot(f)<=0){if(u)return!0;const i=this.createContactEquation(o,a,e,t,c,l),s=yi;d.scale(d.dot(f),s),h.vsub(s,s),s.vsub(n,i.ri),i.ni.copy(d),h.vsub(r,i.rj),i.ri.vadd(n,i.ri),i.ri.vsub(o.position,i.ri),i.rj.vadd(r,i.rj),i.rj.vsub(a.position,i.rj),this.result.push(i),p++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(i,this.frictionResult)}}this.enableFrictionReduction&&p&&this.createFrictionFromAverage(p)}boxConvex(e,t,n,r,i,s,o,a,c,l,u){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,t,n,r,i,s,o,a,e,t,u)}sphereHeightfield(e,t,n,r,i,s,o,a,c,l,u){const h=t.data,d=e.radius,p=t.elementSize,f=Oi,m=Di;v.pointToLocalFrame(r,s,n,m);let g=Math.floor((m.x-d)/p)-1,A=Math.ceil((m.x+d)/p)+1,y=Math.floor((m.y-d)/p)-1,_=Math.ceil((m.y+d)/p)+1;if(A<0||_<0||g>h.length||y>h[0].length)return;g<0&&(g=0),A<0&&(A=0),y<0&&(y=0),_<0&&(_=0),g>=h.length&&(g=h.length-1),A>=h.length&&(A=h.length-1),_>=h[0].length&&(_=h[0].length-1),y>=h[0].length&&(y=h[0].length-1);const b=[];t.getRectMinMax(g,y,A,_,b);const x=b[0],w=b[1];if(m.z-d>w||m.z+d<x)return;const E=this.result;for(let c=g;c<A;c++)for(let l=y;l<_;l++){const h=E.length;let d=!1;if(t.getConvexTrianglePillar(c,l,!1),v.pointToWorldFrame(r,s,t.pillarOffset,f),n.distanceTo(f)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(d=this.sphereConvex(e,t.pillarConvex,n,f,i,s,o,a,e,t,u)),u&&d)return!0;if(t.getConvexTrianglePillar(c,l,!0),v.pointToWorldFrame(r,s,t.pillarOffset,f),n.distanceTo(f)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(d=this.sphereConvex(e,t.pillarConvex,n,f,i,s,o,a,e,t,u)),u&&d)return!0;if(E.length-h>2)return}}boxHeightfield(e,t,n,r,i,s,o,a,c,l,u){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexHeightfield(e.convexPolyhedronRepresentation,t,n,r,i,s,o,a,e,t,u)}convexHeightfield(e,t,n,r,i,s,o,a,c,l,u){const h=t.data,d=t.elementSize,p=e.boundingSphereRadius,f=Bi,m=Pi,g=Ri;v.pointToLocalFrame(r,s,n,g);let A=Math.floor((g.x-p)/d)-1,y=Math.ceil((g.x+p)/d)+1,_=Math.floor((g.y-p)/d)-1,b=Math.ceil((g.y+p)/d)+1;if(y<0||b<0||A>h.length||_>h[0].length)return;A<0&&(A=0),y<0&&(y=0),_<0&&(_=0),b<0&&(b=0),A>=h.length&&(A=h.length-1),y>=h.length&&(y=h.length-1),b>=h[0].length&&(b=h[0].length-1),_>=h[0].length&&(_=h[0].length-1);const x=[];t.getRectMinMax(A,_,y,b,x);const w=x[0],E=x[1];if(!(g.z-p>E||g.z+p<w))for(let c=A;c<y;c++)for(let l=_;l<b;l++){let h=!1;if(t.getConvexTrianglePillar(c,l,!1),v.pointToWorldFrame(r,s,t.pillarOffset,f),n.distanceTo(f)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(h=this.convexConvex(e,t.pillarConvex,n,f,i,s,o,a,null,null,u,m,null)),u&&h)return!0;if(t.getConvexTrianglePillar(c,l,!0),v.pointToWorldFrame(r,s,t.pillarOffset,f),n.distanceTo(f)<t.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&(h=this.convexConvex(e,t.pillarConvex,n,f,i,s,o,a,null,null,u,m,null)),u&&h)return!0}}sphereParticle(e,t,n,r,i,s,o,a,c,l,u){const h=Ei;h.set(0,0,1),r.vsub(n,h);if(h.lengthSquared()<=e.radius*e.radius){if(u)return!0;const n=this.createContactEquation(a,o,t,e,c,l);h.normalize(),n.rj.copy(h),n.rj.scale(e.radius,n.rj),n.ni.copy(h),n.ni.negate(n.ni),n.ri.set(0,0,0),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}planeParticle(e,t,n,r,i,s,o,a,c,l,u){const h=bi;h.set(0,0,1),o.quaternion.vmult(h,h);const d=xi;r.vsub(o.position,d);if(h.dot(d)<=0){if(u)return!0;const n=this.createContactEquation(a,o,t,e,c,l);n.ni.copy(h),n.ni.negate(n.ni),n.ri.set(0,0,0);const i=wi;h.scale(h.dot(r),i),r.vsub(i,i),n.rj.copy(i),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}boxParticle(e,t,n,r,i,s,o,a,c,l,u){return e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexParticle(e.convexPolyhedronRepresentation,t,n,r,i,s,o,a,e,t,u)}convexParticle(e,t,n,r,i,s,o,a,c,l,u){let h=-1;const d=Mi,p=Ii;let f=null;const m=Si;if(m.copy(r),m.vsub(n,m),i.conjugate(Ti),Ti.vmult(m,m),e.pointIsInside(m)){e.worldVerticesNeedsUpdate&&e.computeWorldVertices(n,i),e.worldFaceNormalsNeedsUpdate&&e.computeWorldFaceNormals(i);for(let t=0,n=e.faces.length;t!==n;t++){const n=[e.worldVertices[e.faces[t][0]]],i=e.worldFaceNormals[t];r.vsub(n[0],Ci);const s=-i.dot(Ci);if(null===f||Math.abs(s)<Math.abs(f)){if(u)return!0;f=s,h=t,d.copy(i)}}if(-1!==h){const i=this.createContactEquation(a,o,t,e,c,l);d.scale(f,p),p.vadd(r,p),p.vsub(n,p),i.rj.copy(p),d.negate(i.ni),i.ri.set(0,0,0);const s=i.ri,u=i.rj;s.vadd(r,s),s.vsub(a.position,s),u.vadd(n,u),u.vsub(o.position,u),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}else console.warn("Point found inside convex, but did not find penetrating face!")}}heightfieldCylinder(e,t,n,r,i,s,o,a,c,l,u){return this.convexHeightfield(t,e,r,n,s,i,a,o,c,l,u)}particleCylinder(e,t,n,r,i,s,o,a,c,l,u){return this.convexParticle(t,e,r,n,s,i,a,o,c,l,u)}sphereTrimesh(e,t,n,r,i,s,o,a,c,l,u){const h=Dr,d=Or,p=Lr,f=Nr,m=Fr,g=Ur,A=jr,y=Pr,_=Rr,b=Vr;v.pointToLocalFrame(r,s,n,m);const x=e.radius;A.lowerBound.set(m.x-x,m.y-x,m.z-x),A.upperBound.set(m.x+x,m.y+x,m.z+x),t.getTrianglesInAABB(A,b);const w=Br,E=e.radius*e.radius;for(let i=0;i<b.length;i++)for(let h=0;h<3;h++)if(t.getVertex(t.indices[3*b[i]+h],w),w.vsub(m,_),_.lengthSquared()<=E){if(y.copy(w),v.pointToWorldFrame(r,s,y,w),w.vsub(n,_),u)return!0;let i=this.createContactEquation(o,a,e,t,c,l);i.ni.copy(_),i.ni.normalize(),i.ri.copy(i.ni),i.ri.scale(e.radius,i.ri),i.ri.vadd(n,i.ri),i.ri.vsub(o.position,i.ri),i.rj.copy(w),i.rj.vsub(a.position,i.rj),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}for(let i=0;i<b.length;i++)for(let A=0;A<3;A++){t.getVertex(t.indices[3*b[i]+A],h),t.getVertex(t.indices[3*b[i]+(A+1)%3],d),d.vsub(h,p),m.vsub(d,g);const y=g.dot(p);m.vsub(h,g);let _=g.dot(p);if(_>0&&y<0){m.vsub(h,g),f.copy(p),f.normalize(),_=g.dot(f),f.scale(_,g),g.vadd(h,g);if(g.distanceTo(m)<e.radius){if(u)return!0;const i=this.createContactEquation(o,a,e,t,c,l);g.vsub(m,i.ni),i.ni.normalize(),i.ni.scale(e.radius,i.ri),i.ri.vadd(n,i.ri),i.ri.vsub(o.position,i.ri),v.pointToWorldFrame(r,s,g,g),g.vsub(a.position,i.rj),v.vectorToWorldFrame(s,i.ni,i.ni),v.vectorToWorldFrame(s,i.ri,i.ri),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}}}const T=kr,S=zr,M=Gr,C=Ir;for(let i=0,h=b.length;i!==h;i++){t.getTriangleVertices(b[i],T,S,M),t.getNormal(b[i],C),m.vsub(T,g);let h=g.dot(C);if(C.scale(h,g),m.vsub(g,g),h=g.distanceTo(m),le.pointInTriangle(g,T,S,M)&&h<e.radius){if(u)return!0;let i=this.createContactEquation(o,a,e,t,c,l);g.vsub(m,i.ni),i.ni.normalize(),i.ni.scale(e.radius,i.ri),i.ri.vadd(n,i.ri),i.ri.vsub(o.position,i.ri),v.pointToWorldFrame(r,s,g,g),g.vsub(a.position,i.rj),v.vectorToWorldFrame(s,i.ni,i.ni),v.vectorToWorldFrame(s,i.ri,i.ri),this.result.push(i),this.createFrictionEquationsFromContact(i,this.frictionResult)}}b.length=0}planeTrimesh(e,t,n,r,i,s,a,c,l,u,h){const d=new o,p=Sr;p.set(0,0,1),i.vmult(p,p);for(let i=0;i<t.vertices.length/3;i++){t.getVertex(i,d);const f=new o;f.copy(d),v.pointToWorldFrame(r,s,f,d);const m=Mr;d.vsub(n,m);if(p.dot(m)<=0){if(h)return!0;const n=this.createContactEquation(a,c,e,t,l,u);n.ni.copy(p);const r=Cr;p.scale(m.dot(p),r),d.vsub(r,r),n.ri.copy(r),n.ri.vsub(a.position,n.ri),n.rj.copy(d),n.rj.vsub(c.position,n.rj),this.result.push(n),this.createFrictionEquationsFromContact(n,this.frictionResult)}}}}const _r=new o,vr=new o,br=new o,xr=new o,wr=new o,Er=new m,Tr=new m,Sr=new o,Mr=new o,Cr=new o,Ir=new o,Rr=new o;new o;const Br=new o,Pr=new o,Dr=new o,Or=new o,Lr=new o,Nr=new o,Fr=new o,Ur=new o,kr=new o,zr=new o,Gr=new o,jr=new u,Vr=[],Qr=new o,Hr=new o,Wr=new o,qr=new o,Xr=new o;function Kr(e,t,n){let r=null;const i=e.length;for(let s=0;s!==i;s++){const o=e[s],a=Wr;e[(s+1)%i].vsub(o,a);const c=qr;a.cross(t,c);const l=Xr;n.vsub(o,l);const u=c.dot(l);if(!(null===r||u>0&&!0===r||u<=0&&!1===r))return!1;null===r&&(r=u>0)}return!0}const Yr=new o,Jr=new o,$r=new o,Zr=new o,ei=[new o,new o,new o,new o,new o,new o],ti=new o,ni=new o,ri=new o,ii=new o,si=new o,oi=new o,ai=new o,ci=new o,li=new o,ui=new o,hi=new o,di=new o,pi=new o,fi=new o;new o,new o;const mi=new o,gi=new o,Ai=new o,yi=new o,_i=new o,vi=new o,bi=new o,xi=new o,wi=new o,Ei=new o,Ti=new m,Si=new o;new o;const Mi=new o,Ci=new o,Ii=new o,Ri=new o,Bi=new o,Pi=[0],Di=new o,Oi=new o;class Li{constructor(){this.current=[],this.previous=[]}getKey(e,t){if(t<e){const n=t;t=e,e=n}return e<<16|t}set(e,t){const n=this.getKey(e,t),r=this.current;let i=0;for(;n>r[i];)i++;if(n!==r[i]){for(let e=r.length-1;e>=i;e--)r[e+1]=r[e];r[i]=n}}tick(){const e=this.current;this.current=this.previous,this.previous=e,this.current.length=0}getDiff(e,t){const n=this.current,r=this.previous,i=n.length,s=r.length;let o=0;for(let t=0;t<i;t++){let i=!1;const s=n[t];for(;s>r[o];)o++;i=s===r[o],i||Ni(e,s)}o=0;for(let e=0;e<s;e++){let i=!1;const s=r[e];for(;s>n[o];)o++;i=n[o]===s,i||Ni(t,s)}}}function Ni(e,t){e.push((4294901760&t)>>16,65535&t)}const Fi=(e,t)=>e<t?`${e}-${t}`:`${t}-${e}`;class Ui{constructor(){this.data={keys:[]}}get(e,t){const n=Fi(e,t);return this.data[n]}set(e,t,n){const r=Fi(e,t);this.get(e,t)||this.data.keys.push(r),this.data[r]=n}delete(e,t){const n=Fi(e,t),r=this.data.keys.indexOf(n);-1!==r&&this.data.keys.splice(r,1),delete this.data[n]}reset(){const e=this.data,t=e.keys;for(;t.length>0;){delete e[t.pop()]}}}class ki extends f{constructor(e){void 0===e&&(e={}),super(),this.dt=-1,this.allowSleep=!!e.allowSleep,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=void 0!==e.quatNormalizeSkip?e.quatNormalizeSkip:0,this.quatNormalizeFast=void 0!==e.quatNormalizeFast&&e.quatNormalizeFast,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new o,e.gravity&&this.gravity.copy(e.gravity),e.frictionGravity&&(this.frictionGravity=new o,this.frictionGravity.copy(e.frictionGravity)),this.broadphase=void 0!==e.broadphase?e.broadphase:new Z,this.bodies=[],this.hasActiveBodies=!1,this.solver=void 0!==e.solver?e.solver:new tr,this.constraints=[],this.narrowphase=new yr(this),this.collisionMatrix=new p,this.collisionMatrixPrevious=new p,this.bodyOverlapKeeper=new Li,this.shapeOverlapKeeper=new Li,this.contactmaterials=[],this.contactMaterialTable=new Ui,this.defaultMaterial=new xt("default"),this.defaultContactMaterial=new bt(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.accumulator=0,this.subsystems=[],this.addBodyEvent={type:"addBody",body:null},this.removeBodyEvent={type:"removeBody",body:null},this.idToBodyMap={},this.broadphase.setWorld(this)}getContactMaterial(e,t){return this.contactMaterialTable.get(e.id,t.id)}collisionMatrixTick(){const e=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=e,this.collisionMatrix.reset(),this.bodyOverlapKeeper.tick(),this.shapeOverlapKeeper.tick()}addConstraint(e){this.constraints.push(e)}removeConstraint(e){const t=this.constraints.indexOf(e);-1!==t&&this.constraints.splice(t,1)}rayTest(e,t,n){n instanceof ee?this.raycastClosest(e,t,{skipBackfaces:!0},n):this.raycastAll(e,t,{skipBackfaces:!0},n)}raycastAll(e,t,n,r){return void 0===n&&(n={}),n.mode=le.ALL,n.from=e,n.to=t,n.callback=r,zi.intersectWorld(this,n)}raycastAny(e,t,n,r){return void 0===n&&(n={}),n.mode=le.ANY,n.from=e,n.to=t,n.result=r,zi.intersectWorld(this,n)}raycastClosest(e,t,n,r){return void 0===n&&(n={}),n.mode=le.CLOSEST,n.from=e,n.to=t,n.result=r,zi.intersectWorld(this,n)}addBody(e){this.bodies.includes(e)||(e.index=this.bodies.length,this.bodies.push(e),e.world=this,e.initPosition.copy(e.position),e.initVelocity.copy(e.velocity),e.timeLastSleepy=this.time,e instanceof P&&(e.initAngularVelocity.copy(e.angularVelocity),e.initQuaternion.copy(e.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=e,this.idToBodyMap[e.id]=e,this.dispatchEvent(this.addBodyEvent))}removeBody(e){e.world=null;const t=this.bodies.length-1,n=this.bodies,r=n.indexOf(e);if(-1!==r){n.splice(r,1);for(let e=0;e!==n.length;e++)n[e].index=e;this.collisionMatrix.setNumObjects(t),this.removeBodyEvent.body=e,delete this.idToBodyMap[e.id],this.dispatchEvent(this.removeBodyEvent)}}getBodyById(e){return this.idToBodyMap[e]}getShapeById(e){const t=this.bodies;for(let n=0;n<t.length;n++){const r=t[n].shapes;for(let t=0;t<r.length;t++){const n=r[t];if(n.id===e)return n}}return null}addContactMaterial(e){this.contactmaterials.push(e),this.contactMaterialTable.set(e.materials[0].id,e.materials[1].id,e)}removeContactMaterial(e){const t=this.contactmaterials.indexOf(e);-1!==t&&(this.contactmaterials.splice(t,1),this.contactMaterialTable.delete(e.materials[0].id,e.materials[1].id))}fixedStep(e,t){void 0===e&&(e=1/60),void 0===t&&(t=10);const n=Gi.now()/1e3;if(this.lastCallTime){const r=n-this.lastCallTime;this.step(e,r,t)}else this.step(e,void 0,t);this.lastCallTime=n}step(e,t,n){if(void 0===n&&(n=10),void 0===t)this.internalStep(e),this.time+=e;else{this.accumulator+=t;const r=Gi.now();let i=0;for(;this.accumulator>=e&&i<n&&(this.internalStep(e),this.accumulator-=e,i++,!(Gi.now()-r>1e3*e)););this.accumulator=this.accumulator%e;const s=this.accumulator/e;for(let e=0;e!==this.bodies.length;e++){const t=this.bodies[e];t.previousPosition.lerp(t.position,s,t.interpolatedPosition),t.previousQuaternion.slerp(t.quaternion,s,t.interpolatedQuaternion),t.previousQuaternion.normalize()}this.time+=t}}internalStep(e){this.dt=e;const t=this.contacts,n=qi,r=Xi,i=this.bodies.length,s=this.bodies,o=this.solver,a=this.gravity,c=this.doProfiling,l=this.profile,u=P.DYNAMIC;let h=-1/0;const d=this.constraints,p=Wi;a.length();const f=a.x,m=a.y,g=a.z;let A=0;for(c&&(h=Gi.now()),A=0;A!==i;A++){const e=s[A];if(e.type===u){const t=e.force,n=e.mass;t.x+=n*f,t.y+=n*m,t.z+=n*g}}for(let e=0,t=this.subsystems.length;e!==t;e++)this.subsystems[e].update();c&&(h=Gi.now()),n.length=0,r.length=0,this.broadphase.collisionPairs(this,n,r),c&&(l.broadphase=Gi.now()-h);let y=d.length;for(A=0;A!==y;A++){const e=d[A];if(!e.collideConnected)for(let t=n.length-1;t>=0;t-=1)(e.bodyA===n[t]&&e.bodyB===r[t]||e.bodyB===n[t]&&e.bodyA===r[t])&&(n.splice(t,1),r.splice(t,1))}this.collisionMatrixTick(),c&&(h=Gi.now());const _=Hi,v=t.length;for(A=0;A!==v;A++)_.push(t[A]);t.length=0;const b=this.frictionEquations.length;for(A=0;A!==b;A++)p.push(this.frictionEquations[A]);for(this.frictionEquations.length=0,this.narrowphase.getContacts(n,r,this,t,_,this.frictionEquations,p),c&&(l.narrowphase=Gi.now()-h),c&&(h=Gi.now()),A=0;A<this.frictionEquations.length;A++)o.addEquation(this.frictionEquations[A]);const x=t.length;for(let e=0;e!==x;e++){const n=t[e],r=n.bi,i=n.bj,s=n.si,a=n.sj;let c;if(c=r.material&&i.material&&this.getContactMaterial(r.material,i.material)||this.defaultContactMaterial,c.friction,r.material&&i.material&&(r.material.friction>=0&&i.material.friction>=0&&(r.material.friction,i.material.friction),r.material.restitution>=0&&i.material.restitution>=0&&(n.restitution=r.material.restitution*i.material.restitution)),o.addEquation(n),r.allowSleep&&r.type===P.DYNAMIC&&r.sleepState===P.SLEEPING&&i.sleepState===P.AWAKE&&i.type!==P.STATIC){i.velocity.lengthSquared()+i.angularVelocity.lengthSquared()>=2*i.sleepSpeedLimit**2&&(r.wakeUpAfterNarrowphase=!0)}if(i.allowSleep&&i.type===P.DYNAMIC&&i.sleepState===P.SLEEPING&&r.sleepState===P.AWAKE&&r.type!==P.STATIC){r.velocity.lengthSquared()+r.angularVelocity.lengthSquared()>=2*r.sleepSpeedLimit**2&&(i.wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(r,i,!0),this.collisionMatrixPrevious.get(r,i)||(Qi.body=i,Qi.contact=n,r.dispatchEvent(Qi),Qi.body=r,i.dispatchEvent(Qi)),this.bodyOverlapKeeper.set(r.id,i.id),this.shapeOverlapKeeper.set(s.id,a.id)}for(this.emitContactEvents(),c&&(l.makeContactConstraints=Gi.now()-h,h=Gi.now()),A=0;A!==i;A++){const e=s[A];e.wakeUpAfterNarrowphase&&(e.wakeUp(),e.wakeUpAfterNarrowphase=!1)}for(y=d.length,A=0;A!==y;A++){const e=d[A];e.update();for(let t=0,n=e.equations.length;t!==n;t++){const n=e.equations[t];o.addEquation(n)}}o.solve(e,this),c&&(l.solve=Gi.now()-h),o.removeAllEquations();const w=Math.pow;for(A=0;A!==i;A++){const t=s[A];if(t.type&u){const n=w(1-t.linearDamping,e),r=t.velocity;r.scale(n,r);const i=t.angularVelocity;if(i){const n=w(1-t.angularDamping,e);i.scale(n,i)}}}this.dispatchEvent(Vi),c&&(h=Gi.now());const E=this.stepnumber%(this.quatNormalizeSkip+1)===0,T=this.quatNormalizeFast;for(A=0;A!==i;A++)s[A].integrate(e,E,T);this.clearForces(),this.broadphase.dirty=!0,c&&(l.integrate=Gi.now()-h),this.stepnumber+=1,this.dispatchEvent(ji);let S=!0;if(this.allowSleep)for(S=!1,A=0;A!==i;A++){const e=s[A];e.sleepTick(this.time),e.sleepState!==P.SLEEPING&&(S=!0)}this.hasActiveBodies=S}emitContactEvents(){const e=this.hasAnyEventListener("beginContact"),t=this.hasAnyEventListener("endContact");if((e||t)&&this.bodyOverlapKeeper.getDiff(Ki,Yi),e){for(let e=0,t=Ki.length;e<t;e+=2)Ji.bodyA=this.getBodyById(Ki[e]),Ji.bodyB=this.getBodyById(Ki[e+1]),this.dispatchEvent(Ji);Ji.bodyA=Ji.bodyB=null}if(t){for(let e=0,t=Yi.length;e<t;e+=2)$i.bodyA=this.getBodyById(Yi[e]),$i.bodyB=this.getBodyById(Yi[e+1]),this.dispatchEvent($i);$i.bodyA=$i.bodyB=null}Ki.length=Yi.length=0;const n=this.hasAnyEventListener("beginShapeContact"),r=this.hasAnyEventListener("endShapeContact");if((n||r)&&this.shapeOverlapKeeper.getDiff(Ki,Yi),n){for(let e=0,t=Ki.length;e<t;e+=2){const t=this.getShapeById(Ki[e]),n=this.getShapeById(Ki[e+1]);Zi.shapeA=t,Zi.shapeB=n,t&&(Zi.bodyA=t.body),n&&(Zi.bodyB=n.body),this.dispatchEvent(Zi)}Zi.bodyA=Zi.bodyB=Zi.shapeA=Zi.shapeB=null}if(r){for(let e=0,t=Yi.length;e<t;e+=2){const t=this.getShapeById(Yi[e]),n=this.getShapeById(Yi[e+1]);es.shapeA=t,es.shapeB=n,t&&(es.bodyA=t.body),n&&(es.bodyB=n.body),this.dispatchEvent(es)}es.bodyA=es.bodyB=es.shapeA=es.shapeB=null}}clearForces(){const e=this.bodies,t=e.length;for(let n=0;n!==t;n++){const t=e[n];t.force,t.torque,t.force.set(0,0,0),t.torque.set(0,0,0)}}}new u;const zi=new le,Gi=globalThis.performance||{};if(!Gi.now){let e=Date.now();Gi.timing&&Gi.timing.navigationStart&&(e=Gi.timing.navigationStart),Gi.now=()=>Date.now()-e}new o;const ji={type:"postStep"},Vi={type:"preStep"},Qi={type:P.COLLIDE_EVENT_NAME,body:null,contact:null},Hi=[],Wi=[],qi=[],Xi=[],Ki=[],Yi=[],Ji={type:"beginContact",bodyA:null,bodyB:null},$i={type:"endContact",bodyA:null,bodyB:null},Zi={type:"beginShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null},es={type:"endShapeContact",bodyA:null,bodyB:null,shapeA:null,shapeB:null}},9543:(e,t,n)=>{"use strict";var r=n(3644);function i(){this.argTypes=[],this.shimArgs=[],this.arrayArgs=[],this.arrayBlockIndices=[],this.scalarArgs=[],this.offsetArgs=[],this.offsetArgIndex=[],this.indexArgs=[],this.shapeArgs=[],this.funcName="",this.pre=null,this.body=null,this.post=null,this.debug=!1}e.exports=function(e){var t=new i;t.pre=e.pre,t.body=e.body,t.post=e.post;var n=e.args.slice(0);t.argTypes=n;for(var s=0;s<n.length;++s){var o=n[s];if("array"===o||"object"==typeof o&&o.blockIndices){if(t.argTypes[s]="array",t.arrayArgs.push(s),t.arrayBlockIndices.push(o.blockIndices?o.blockIndices:0),t.shimArgs.push("array"+s),s<t.pre.args.length&&t.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array args");if(s<t.post.args.length&&t.post.args[s].count>0)throw new Error("cwise: post() block may not reference array args")}else if("scalar"===o)t.scalarArgs.push(s),t.shimArgs.push("scalar"+s);else if("index"===o){if(t.indexArgs.push(s),s<t.pre.args.length&&t.pre.args[s].count>0)throw new Error("cwise: pre() block may not reference array index");if(s<t.body.args.length&&t.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array index");if(s<t.post.args.length&&t.post.args[s].count>0)throw new Error("cwise: post() block may not reference array index")}else if("shape"===o){if(t.shapeArgs.push(s),s<t.pre.args.length&&t.pre.args[s].lvalue)throw new Error("cwise: pre() block may not write to array shape");if(s<t.body.args.length&&t.body.args[s].lvalue)throw new Error("cwise: body() block may not write to array shape");if(s<t.post.args.length&&t.post.args[s].lvalue)throw new Error("cwise: post() block may not write to array shape")}else{if("object"!=typeof o||!o.offset)throw new Error("cwise: Unknown argument type "+n[s]);t.argTypes[s]="offset",t.offsetArgs.push({array:o.array,offset:o.offset}),t.offsetArgIndex.push(s)}}if(t.arrayArgs.length<=0)throw new Error("cwise: No array arguments specified");if(t.pre.args.length>n.length)throw new Error("cwise: Too many arguments in pre() block");if(t.body.args.length>n.length)throw new Error("cwise: Too many arguments in body() block");if(t.post.args.length>n.length)throw new Error("cwise: Too many arguments in post() block");return t.debug=!!e.printCode||!!e.debug,t.funcName=e.funcName||"cwise",t.blockSize=e.blockSize||64,r(t)}},2121:(e,t,n)=>{"use strict";var r=n(7887);function i(e,t,n){var r,i,s=e.length,o=t.arrayArgs.length,a=t.indexArgs.length>0,c=[],l=[],u=0,h=0;for(r=0;r<s;++r)l.push(["i",r,"=0"].join(""));for(i=0;i<o;++i)for(r=0;r<s;++r)h=u,u=e[r],0===r?l.push(["d",i,"s",r,"=t",i,"p",u].join("")):l.push(["d",i,"s",r,"=(t",i,"p",u,"-s",h,"*t",i,"p",h,")"].join(""));for(l.length>0&&c.push("var "+l.join(",")),r=s-1;r>=0;--r)u=e[r],c.push(["for(i",r,"=0;i",r,"<s",u,";++i",r,"){"].join(""));for(c.push(n),r=0;r<s;++r){for(h=u,u=e[r],i=0;i<o;++i)c.push(["p",i,"+=d",i,"s",r].join(""));a&&(r>0&&c.push(["index[",h,"]-=s",h].join("")),c.push(["++index[",u,"]"].join(""))),c.push("}")}return c.join("\n")}function s(e,t,n){for(var r=e.body,i=[],s=[],o=0;o<e.args.length;++o){var a=e.args[o];if(!(a.count<=0)){var c=new RegExp(a.name,"g"),l="",u=t.arrayArgs.indexOf(o);switch(t.argTypes[o]){case"offset":var h=t.offsetArgIndex.indexOf(o);u=t.offsetArgs[h].array,l="+q"+h;case"array":l="p"+u+l;var d="l"+o,p="a"+u;if(0===t.arrayBlockIndices[u])1===a.count?"generic"===n[u]?a.lvalue?(i.push(["var ",d,"=",p,".get(",l,")"].join("")),r=r.replace(c,d),s.push([p,".set(",l,",",d,")"].join(""))):r=r.replace(c,[p,".get(",l,")"].join("")):r=r.replace(c,[p,"[",l,"]"].join("")):"generic"===n[u]?(i.push(["var ",d,"=",p,".get(",l,")"].join("")),r=r.replace(c,d),a.lvalue&&s.push([p,".set(",l,",",d,")"].join(""))):(i.push(["var ",d,"=",p,"[",l,"]"].join("")),r=r.replace(c,d),a.lvalue&&s.push([p,"[",l,"]=",d].join("")));else{for(var f=[a.name],m=[l],g=0;g<Math.abs(t.arrayBlockIndices[u]);g++)f.push("\\s*\\[([^\\]]+)\\]"),m.push("$"+(g+1)+"*t"+u+"b"+g);if(c=new RegExp(f.join(""),"g"),l=m.join("+"),"generic"===n[u])throw new Error("cwise: Generic arrays not supported in combination with blocks!");r=r.replace(c,[p,"[",l,"]"].join(""))}break;case"scalar":r=r.replace(c,"Y"+t.scalarArgs.indexOf(o));break;case"index":r=r.replace(c,"index");break;case"shape":r=r.replace(c,"shape")}}}return[i.join("\n"),r,s.join("\n")].join("\n").trim()}function o(e){for(var t=new Array(e.length),n=!0,r=0;r<e.length;++r){var i=e[r],s=i.match(/\d+/);s=s?s[0]:"",0===i.charAt(0)?t[r]="u"+i.charAt(1)+s:t[r]=i.charAt(0)+s,r>0&&(n=n&&t[r]===t[r-1])}return n?t[0]:t.join("")}e.exports=function(e,t){for(var n=t[1].length-Math.abs(e.arrayBlockIndices[0])|0,a=new Array(e.arrayArgs.length),c=new Array(e.arrayArgs.length),l=0;l<e.arrayArgs.length;++l)c[l]=t[2*l],a[l]=t[2*l+1];var u=[],h=[],d=[],p=[],f=[];for(l=0;l<e.arrayArgs.length;++l){e.arrayBlockIndices[l]<0?(d.push(0),p.push(n),u.push(n),h.push(n+e.arrayBlockIndices[l])):(d.push(e.arrayBlockIndices[l]),p.push(e.arrayBlockIndices[l]+n),u.push(0),h.push(e.arrayBlockIndices[l]));for(var m=[],g=0;g<a[l].length;g++)d[l]<=a[l][g]&&a[l][g]<p[l]&&m.push(a[l][g]-d[l]);f.push(m)}var A=["SS"],y=["'use strict'"],_=[];for(g=0;g<n;++g)_.push(["s",g,"=SS[",g,"]"].join(""));for(l=0;l<e.arrayArgs.length;++l){A.push("a"+l),A.push("t"+l),A.push("p"+l);for(g=0;g<n;++g)_.push(["t",l,"p",g,"=t",l,"[",d[l]+g,"]"].join(""));for(g=0;g<Math.abs(e.arrayBlockIndices[l]);++g)_.push(["t",l,"b",g,"=t",l,"[",u[l]+g,"]"].join(""))}for(l=0;l<e.scalarArgs.length;++l)A.push("Y"+l);if(e.shapeArgs.length>0&&_.push("shape=SS.slice(0)"),e.indexArgs.length>0){var v=new Array(n);for(l=0;l<n;++l)v[l]="0";_.push(["index=[",v.join(","),"]"].join(""))}for(l=0;l<e.offsetArgs.length;++l){var b=e.offsetArgs[l],x=[];for(g=0;g<b.offset.length;++g)0!==b.offset[g]&&(1===b.offset[g]?x.push(["t",b.array,"p",g].join("")):x.push([b.offset[g],"*t",b.array,"p",g].join("")));0===x.length?_.push("q"+l+"=0"):_.push(["q",l,"=",x.join("+")].join(""))}var w=r([].concat(e.pre.thisVars).concat(e.body.thisVars).concat(e.post.thisVars));for((_=_.concat(w)).length>0&&y.push("var "+_.join(",")),l=0;l<e.arrayArgs.length;++l)y.push("p"+l+"|=0");e.pre.body.length>3&&y.push(s(e.pre,e,c));var E=s(e.body,e,c),T=function(e){for(var t=0,n=e[0].length;t<n;){for(var r=1;r<e.length;++r)if(e[r][t]!==e[0][t])return t;++t}return t}(f);T<n?y.push(function(e,t,n,r){for(var s=t.length,o=n.arrayArgs.length,a=n.blockSize,c=n.indexArgs.length>0,l=[],u=0;u<o;++u)l.push(["var offset",u,"=p",u].join(""));for(u=e;u<s;++u)l.push(["for(var j"+u+"=SS[",t[u],"]|0;j",u,">0;){"].join("")),l.push(["if(j",u,"<",a,"){"].join("")),l.push(["s",t[u],"=j",u].join("")),l.push(["j",u,"=0"].join("")),l.push(["}else{s",t[u],"=",a].join("")),l.push(["j",u,"-=",a,"}"].join("")),c&&l.push(["index[",t[u],"]=j",u].join(""));for(u=0;u<o;++u){for(var h=["offset"+u],d=e;d<s;++d)h.push(["j",d,"*t",u,"p",t[d]].join(""));l.push(["p",u,"=(",h.join("+"),")"].join(""))}for(l.push(i(t,n,r)),u=e;u<s;++u)l.push("}");return l.join("\n")}(T,f[0],e,E)):y.push(i(f[0],e,E)),e.post.body.length>3&&y.push(s(e.post,e,c)),e.debug&&console.log("-----Generated cwise routine for ",t,":\n"+y.join("\n")+"\n----------");var S=[e.funcName||"unnamed","_cwise_loop_",a[0].join("s"),"m",T,o(c)].join("");return new Function(["function ",S,"(",A.join(","),"){",y.join("\n"),"} return ",S].join(""))()}},3644:(e,t,n)=>{"use strict";var r=n(2121);e.exports=function(e){var t=["'use strict'","var CACHED={}"],n=[],i=e.funcName+"_cwise_thunk";t.push(["return function ",i,"(",e.shimArgs.join(","),"){"].join(""));for(var s=[],o=[],a=[["array",e.arrayArgs[0],".shape.slice(",Math.max(0,e.arrayBlockIndices[0]),e.arrayBlockIndices[0]<0?","+e.arrayBlockIndices[0]+")":")"].join("")],c=[],l=[],u=0;u<e.arrayArgs.length;++u){var h=e.arrayArgs[u];n.push(["t",h,"=array",h,".dtype,","r",h,"=array",h,".order"].join("")),s.push("t"+h),s.push("r"+h),o.push("t"+h),o.push("r"+h+".join()"),a.push("array"+h+".data"),a.push("array"+h+".stride"),a.push("array"+h+".offset|0"),u>0&&(c.push("array"+e.arrayArgs[0]+".shape.length===array"+h+".shape.length+"+(Math.abs(e.arrayBlockIndices[0])-Math.abs(e.arrayBlockIndices[u]))),l.push("array"+e.arrayArgs[0]+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[0])+"]===array"+h+".shape[shapeIndex+"+Math.max(0,e.arrayBlockIndices[u])+"]"))}for(e.arrayArgs.length>1&&(t.push("if (!("+c.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same dimensionality!')"),t.push("for(var shapeIndex=array"+e.arrayArgs[0]+".shape.length-"+Math.abs(e.arrayBlockIndices[0])+"; shapeIndex--\x3e0;) {"),t.push("if (!("+l.join(" && ")+")) throw new Error('cwise: Arrays do not all have the same shape!')"),t.push("}")),u=0;u<e.scalarArgs.length;++u)a.push("scalar"+e.scalarArgs[u]);return n.push(["type=[",o.join(","),"].join()"].join("")),n.push("proc=CACHED[type]"),t.push("var "+n.join(",")),t.push(["if(!proc){","CACHED[type]=proc=compile([",s.join(","),"])}","return proc(",a.join(","),")}"].join("")),e.debug&&console.log("-----Generated thunk:\n"+t.join("\n")+"\n----------"),new Function("compile",t.join("\n"))(r.bind(void 0,e))}},1119:(e,t,n)=>{var r=n(9488),i=n(1668);e.exports={createEncoderModule:r,createDecoderModule:i}},1668:function(e,t,n){var r=r||{};r.scope={},r.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},r.arrayIterator=function(e){return{next:r.arrayIteratorImpl(e)}},r.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):r.arrayIterator(e)},r.ASSUME_ES5=!1,r.ASSUME_NO_NATIVE_MAP=!1,r.ASSUME_NO_NATIVE_SET=!1,r.SIMPLE_FROUND_POLYFILL=!1,r.ISOLATE_POLYFILLS=!1,r.FORCE_POLYFILL_PROMISE=!1,r.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,r.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},r.global=r.getGlobal(this),r.defineProperty=r.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},r.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),r.TRUST_ES6_POLYFILLS=!r.ISOLATE_POLYFILLS||r.IS_SYMBOL_NATIVE,r.polyfills={},r.propertyToPolyfillSymbol={},r.POLYFILL_PREFIX="$jscp$";r.polyfill=function(e,t,n,i){t&&(r.ISOLATE_POLYFILLS?r.polyfillIsolated(e,t,n,i):r.polyfillUnisolated(e,t,n,i))},r.polyfillUnisolated=function(e,t,n,i){for(n=r.global,e=e.split("."),i=0;i<e.length-1;i++){var s=e[i];if(!(s in n))return;n=n[s]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},r.polyfillIsolated=function(e,t,n,i){var s=e.split(".");e=1===s.length,i=s[0],i=!e&&i in r.polyfills?r.polyfills:r.global;for(var o=0;o<s.length-1;o++){var a=s[o];if(!(a in i))return;i=i[a]}s=s[s.length-1],null!=(t=t(n=r.IS_SYMBOL_NATIVE&&"es6"===n?i[s]:null))&&(e?r.defineProperty(r.polyfills,s,{configurable:!0,writable:!0,value:t}):t!==n&&(void 0===r.propertyToPolyfillSymbol[s]&&(n=1e9*Math.random()>>>0,r.propertyToPolyfillSymbol[s]=r.IS_SYMBOL_NATIVE?r.global.Symbol(s):r.POLYFILL_PREFIX+n+"$"+s),r.defineProperty(i,r.propertyToPolyfillSymbol[s],{configurable:!0,writable:!0,value:t})))},r.polyfill("Promise",(function(e){function t(){this.batch_=null}function n(e){return e instanceof s?e:new s((function(t,n){t(e)}))}if(e&&(!(r.FORCE_POLYFILL_PROMISE||r.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&void 0===r.global.PromiseRejectionEvent)||!r.global.Promise||-1===r.global.Promise.toString().indexOf("[native code]")))return e;t.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var t=this;this.asyncExecuteFunction((function(){t.executeBatch_()}))}this.batch_.push(e)};var i=r.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){i(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction((function(){throw e}))};var s=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};s.prototype.createResolveAndReject_=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},s.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof s)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},s.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},s.prototype.reject_=function(e){this.settle_(2,e)},s.prototype.fulfill_=function(e){this.settle_(1,e)},s.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,2===this.state_&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},s.prototype.scheduleUnhandledRejectionCheck_=function(){var e=this;i((function(){if(e.notifyUnhandledRejection_()){var t=r.global.console;void 0!==t&&t.error(e.result_)}}),1)},s.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var e=r.global.CustomEvent,t=r.global.Event,n=r.global.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.global.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.result_,n(e))},s.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)o.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}};var o=new t;return s.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},s.prototype.settleSameAsThenable_=function(e,t){var n=this.createResolveAndReject_();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},s.prototype.then=function(e,t){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){i(e)}}:t}var r,i,o=new s((function(e,t){r=e,i=t}));return this.callWhenSettled_(n(e,r),n(t,i)),o},s.prototype.catch=function(e){return this.then(void 0,e)},s.prototype.callWhenSettled_=function(e,t){function n(){switch(r.state_){case 1:e(r.result_);break;case 2:t(r.result_);break;default:throw Error("Unexpected state: "+r.state_)}}var r=this;null==this.onSettledCallbacks_?o.asyncExecute(n):this.onSettledCallbacks_.push(n),this.isRejectionHandled_=!0},s.resolve=n,s.reject=function(e){return new s((function(t,n){n(e)}))},s.race=function(e){return new s((function(t,i){for(var s=r.makeIterator(e),o=s.next();!o.done;o=s.next())n(o.value).callWhenSettled_(t,i)}))},s.all=function(e){var t=r.makeIterator(e),i=t.next();return i.done?n([]):new s((function(e,r){function s(t){return function(n){o[t]=n,0==--a&&e(o)}}var o=[],a=0;do{o.push(void 0),a++,n(i.value).callWhenSettled_(s(o.length-1),r),i=t.next()}while(!i.done)}))},s}),"es6","es3"),r.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.assign=r.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var s in i)r.owns(i,s)&&(e[s]=i[s])}return e},r.polyfill("Object.assign",(function(e){return e||r.assign}),"es6","es3"),r.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},r.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var n=r.checkStringArgs(this,e,"startsWith");e+="";var i=n.length,s=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<s&&t<i;)if(n[t++]!=e[o++])return!1;return o>=s}}),"es6","es3"),r.polyfill("Array.prototype.copyWithin",(function(e){function t(e){return 1/0===(e=Number(e))||-1/0===e?e:0|e}return e||function(e,n,r){var i=this.length;if(e=t(e),n=t(n),r=void 0===r?i:t(r),e=0>e?Math.max(i+e,0):Math.min(e,i),n=0>n?Math.max(i+n,0):Math.min(n,i),r=0>r?Math.max(i+r,0):Math.min(r,i),e<n)for(;n<r;)n in this?this[e++]=this[n++]:(delete this[e++],n++);else for(e+=(r=Math.min(r,i+n-e))-n;r>n;)--r in this?this[--e]=this[r]:delete this[--e];return this}}),"es6","es3"),r.typedArrayCopyWithin=function(e){return e||Array.prototype.copyWithin},r.polyfill("Int8Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Uint8Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Uint8ClampedArray.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Int16Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Uint16Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Int32Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Uint32Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Float32Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Float64Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5");var i,s=(i=(i="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){function t(e,t){if(e){var n=ee,r=e+t;for(t=e;n[t]&&!(t>=r);)++t;if(16<t-e&&n.buffer&&se)n=se.decode(n.subarray(e,t));else{for(r="";e<t;){var i=n[e++];if(128&i){var s=63&n[e++];if(192==(224&i))r+=String.fromCharCode((31&i)<<6|s);else{var o=63&n[e++];65536>(i=224==(240&i)?(15&i)<<12|s<<6|o:(7&i)<<18|s<<12|o<<6|63&n[e++])?r+=String.fromCharCode(i):(i-=65536,r+=String.fromCharCode(55296|i>>10,56320|1023&i))}}else r+=String.fromCharCode(i)}n=r}}else n="";return n}function r(){var e=$.buffer;F.HEAP8=Z=new Int8Array(e),F.HEAP16=new Int16Array(e),F.HEAP32=te=new Int32Array(e),F.HEAPU8=ee=new Uint8Array(e),F.HEAPU16=new Uint16Array(e),F.HEAPU32=ne=new Uint32Array(e),F.HEAPF32=new Float32Array(e),F.HEAPF64=new Float64Array(e)}function s(e){throw F.onAbort&&F.onAbort(e),J(e="Aborted("+e+")"),ie=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),N(e),e}function o(e){try{if(e==pe&&Y)return new Uint8Array(Y);if(X)return X(e);throw"both async and sync fetching of the wasm failed"}catch(e){s(e)}}function a(e){for(;0<e.length;)e.shift()(F)}function c(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){ne[this.ptr+4>>2]=e},this.get_type=function(){return ne[this.ptr+4>>2]},this.set_destructor=function(e){ne[this.ptr+8>>2]=e},this.get_destructor=function(){return ne[this.ptr+8>>2]},this.set_refcount=function(e){te[this.ptr>>2]=e},this.set_caught=function(e){Z[this.ptr+12|0]=e?1:0},this.get_caught=function(){return 0!=Z[this.ptr+12|0]},this.set_rethrown=function(e){Z[this.ptr+13|0]=e?1:0},this.get_rethrown=function(){return 0!=Z[this.ptr+13|0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){te[this.ptr>>2]+=1},this.release_ref=function(){var e=te[this.ptr>>2];return te[this.ptr>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){ne[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return ne[this.ptr+16>>2]},this.get_exception_ptr=function(){if($n(this.get_type()))return ne[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}function l(){function e(){if(!Jn&&(Jn=!0,F.calledRun=!0,!ie)){if(le=!0,a(ae),L(F),F.onRuntimeInitialized&&F.onRuntimeInitialized(),F.postRun)for("function"==typeof F.postRun&&(F.postRun=[F.postRun]);F.postRun.length;)ce.unshift(F.postRun.shift());a(ce)}}if(!(0<ue)){if(F.preRun)for("function"==typeof F.preRun&&(F.preRun=[F.preRun]);F.preRun.length;)oe.unshift(F.preRun.shift());a(oe),0<ue||(F.setStatus?(F.setStatus("Running..."),setTimeout((function(){setTimeout((function(){F.setStatus("")}),1),e()}),1)):e())}}function u(){}function h(e){return(e||u).__cache__}function d(e,t){var n=h(t),r=n[e];return r||((r=Object.create((t||u).prototype)).ptr=e,n[e]=r)}function p(e){if("string"==typeof e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}if(n=0,0<(r=(t=Array(t+1)).length)){r=n+r-1;for(var i=0;i<e.length;++i){var s=e.charCodeAt(i);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),127>=s){if(n>=r)break;t[n++]=s}else{if(2047>=s){if(n+1>=r)break;t[n++]=192|s>>6}else{if(65535>=s){if(n+2>=r)break;t[n++]=224|s>>12}else{if(n+3>=r)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63}t[n++]=128|s>>6&63}t[n++]=128|63&s}}t[n]=0}return e=Zn.alloc(t,Z),Zn.copy(t,Z,e),e}return e}function f(e){if("object"==typeof e){var t=Zn.alloc(e,Z);return Zn.copy(e,Z,t),t}return e}function m(){throw"cannot construct a VoidPtr, no constructor in IDL"}function g(){this.ptr=ge(),h(g)[this.ptr]=this}function A(){this.ptr=_e(),h(A)[this.ptr]=this}function y(){this.ptr=xe(),h(y)[this.ptr]=this}function _(){this.ptr=Ee(),h(_)[this.ptr]=this}function v(){this.ptr=Le(),h(v)[this.ptr]=this}function b(){this.ptr=Ge(),h(b)[this.ptr]=this}function x(){this.ptr=He(),h(x)[this.ptr]=this}function w(){this.ptr=Ke(),h(w)[this.ptr]=this}function E(){this.ptr=et(),h(E)[this.ptr]=this}function T(){throw"cannot construct a Status, no constructor in IDL"}function S(){this.ptr=ot(),h(S)[this.ptr]=this}function M(){this.ptr=ut(),h(M)[this.ptr]=this}function C(){this.ptr=ft(),h(C)[this.ptr]=this}function I(){this.ptr=yt(),h(I)[this.ptr]=this}function R(){this.ptr=xt(),h(R)[this.ptr]=this}function B(){this.ptr=St(),h(B)[this.ptr]=this}function P(){this.ptr=Rt(),h(P)[this.ptr]=this}function D(){this.ptr=Ot(),h(D)[this.ptr]=this}function O(){this.ptr=Vt(),h(O)[this.ptr]=this}var L,N,F=void 0!==(e=void 0===e?{}:e)?e:{};F.ready=new Promise((function(e,t){L=e,N=t}));var U=!1,k=!1;F.onRuntimeInitialized=function(){U=!0,k&&"function"==typeof F.onModuleLoaded&&F.onModuleLoaded(F)},F.onModuleParsed=function(){k=!0,U&&"function"==typeof F.onModuleLoaded&&F.onModuleLoaded(F)},F.isVersionSupported=function(e){return"string"==typeof e&&!(2>(e=e.split(".")).length||3<e.length)&&(1==e[0]&&0<=e[1]&&5>=e[1]||!(0!=e[0]||10<e[1]))};var z=Object.assign({},F),G="object"==typeof window,j="function"==typeof importScripts,V="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,Q="";if(V){var H=n(1721),W=n(7573);Q=j?W.dirname(Q)+"/":"//";var q=function(e,t){return e=e.startsWith("file://")?new URL(e):W.normalize(e),H.readFileSync(e,t?void 0:"utf8")},X=function(e){return(e=q(e,!0)).buffer||(e=new Uint8Array(e)),e},K=function(e,t,n){e=e.startsWith("file://")?new URL(e):W.normalize(e),H.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),F.inspect=function(){return"[Emscripten Module object]"}}else(G||j)&&(j?Q=self.location.href:"undefined"!=typeof document&&document.currentScript&&(Q=document.currentScript.src),i&&(Q=i),Q=0!==Q.indexOf("blob:")?Q.substr(0,Q.replace(/[?#].*/,"").lastIndexOf("/")+1):"",q=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},j&&(X=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),K=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});F.print||console.log.bind(console);var Y,J=F.printErr||console.warn.bind(console);Object.assign(F,z),z=null,F.wasmBinary&&(Y=F.wasmBinary),"object"!=typeof WebAssembly&&s("no native wasm support detected");var $,Z,ee,te,ne,re,ie=!1,se="undefined"!=typeof TextDecoder?new TextDecoder("utf8"):void 0,oe=[],ae=[],ce=[],le=!1,ue=0,he=null,de=null,pe="draco_decoder_gltf.wasm";pe.startsWith("data:application/octet-stream;base64,")||(re=pe,pe=F.locateFile?F.locateFile(re,Q):Q+re);var fe={b:function(e,t,n){throw new c(e).init(t,n),e},a:function(){s("")},d:function(e,t,n){ee.copyWithin(e,t,t+n)},c:function(e){var t=ee.length;if(2147483648<(e>>>=0))return!1;for(var n=1;4>=n;n*=2){var i=t*(1+.2/n);i=Math.min(i,e+100663296);var s=Math;i=Math.max(e,i),s=s.min.call(s,2147483648,i+(65536-i%65536)%65536);e:{i=$.buffer;try{$.grow(s-i.byteLength+65535>>>16),r();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1}};!function(){function e(e,t){F.asm=e.exports,$=F.asm.e,r(),ae.unshift(F.asm.f),ue--,F.monitorRunDependencies&&F.monitorRunDependencies(ue),0==ue&&(null!==he&&(clearInterval(he),he=null),de&&(e=de,de=null,e()))}function t(t){e(t.instance)}function n(e){return function(){if(!Y&&(G||j)){if("function"==typeof fetch&&!pe.startsWith("file://"))return fetch(pe,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+pe+"'";return e.arrayBuffer()})).catch((function(){return o(pe)}));if(K)return new Promise((function(e,t){K(pe,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return o(pe)}))}().then((function(e){return WebAssembly.instantiate(e,i)})).then((function(e){return e})).then(e,(function(e){J("failed to asynchronously prepare wasm: "+e),s(e)}))}var i={a:fe};if(ue++,F.monitorRunDependencies&&F.monitorRunDependencies(ue),F.instantiateWasm)try{return F.instantiateWasm(i,e)}catch(e){J("Module.instantiateWasm callback failed with error: "+e),N(e)}(Y||"function"!=typeof WebAssembly.instantiateStreaming||pe.startsWith("data:application/octet-stream;base64,")||pe.startsWith("file://")||V||"function"!=typeof fetch?n(t):fetch(pe,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,i).then(t,(function(e){return J("wasm streaming compile failed: "+e),J("falling back to ArrayBuffer instantiation"),n(t)}))}))).catch(N)}();var me=F._emscripten_bind_VoidPtr___destroy___0=function(){return(me=F._emscripten_bind_VoidPtr___destroy___0=F.asm.h).apply(null,arguments)},ge=F._emscripten_bind_DecoderBuffer_DecoderBuffer_0=function(){return(ge=F._emscripten_bind_DecoderBuffer_DecoderBuffer_0=F.asm.i).apply(null,arguments)},Ae=F._emscripten_bind_DecoderBuffer_Init_2=function(){return(Ae=F._emscripten_bind_DecoderBuffer_Init_2=F.asm.j).apply(null,arguments)},ye=F._emscripten_bind_DecoderBuffer___destroy___0=function(){return(ye=F._emscripten_bind_DecoderBuffer___destroy___0=F.asm.k).apply(null,arguments)},_e=F._emscripten_bind_AttributeTransformData_AttributeTransformData_0=function(){return(_e=F._emscripten_bind_AttributeTransformData_AttributeTransformData_0=F.asm.l).apply(null,arguments)},ve=F._emscripten_bind_AttributeTransformData_transform_type_0=function(){return(ve=F._emscripten_bind_AttributeTransformData_transform_type_0=F.asm.m).apply(null,arguments)},be=F._emscripten_bind_AttributeTransformData___destroy___0=function(){return(be=F._emscripten_bind_AttributeTransformData___destroy___0=F.asm.n).apply(null,arguments)},xe=F._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(xe=F._emscripten_bind_GeometryAttribute_GeometryAttribute_0=F.asm.o).apply(null,arguments)},we=F._emscripten_bind_GeometryAttribute___destroy___0=function(){return(we=F._emscripten_bind_GeometryAttribute___destroy___0=F.asm.p).apply(null,arguments)},Ee=F._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(Ee=F._emscripten_bind_PointAttribute_PointAttribute_0=F.asm.q).apply(null,arguments)},Te=F._emscripten_bind_PointAttribute_size_0=function(){return(Te=F._emscripten_bind_PointAttribute_size_0=F.asm.r).apply(null,arguments)},Se=F._emscripten_bind_PointAttribute_GetAttributeTransformData_0=function(){return(Se=F._emscripten_bind_PointAttribute_GetAttributeTransformData_0=F.asm.s).apply(null,arguments)},Me=F._emscripten_bind_PointAttribute_attribute_type_0=function(){return(Me=F._emscripten_bind_PointAttribute_attribute_type_0=F.asm.t).apply(null,arguments)},Ce=F._emscripten_bind_PointAttribute_data_type_0=function(){return(Ce=F._emscripten_bind_PointAttribute_data_type_0=F.asm.u).apply(null,arguments)},Ie=F._emscripten_bind_PointAttribute_num_components_0=function(){return(Ie=F._emscripten_bind_PointAttribute_num_components_0=F.asm.v).apply(null,arguments)},Re=F._emscripten_bind_PointAttribute_normalized_0=function(){return(Re=F._emscripten_bind_PointAttribute_normalized_0=F.asm.w).apply(null,arguments)},Be=F._emscripten_bind_PointAttribute_byte_stride_0=function(){return(Be=F._emscripten_bind_PointAttribute_byte_stride_0=F.asm.x).apply(null,arguments)},Pe=F._emscripten_bind_PointAttribute_byte_offset_0=function(){return(Pe=F._emscripten_bind_PointAttribute_byte_offset_0=F.asm.y).apply(null,arguments)},De=F._emscripten_bind_PointAttribute_unique_id_0=function(){return(De=F._emscripten_bind_PointAttribute_unique_id_0=F.asm.z).apply(null,arguments)},Oe=F._emscripten_bind_PointAttribute___destroy___0=function(){return(Oe=F._emscripten_bind_PointAttribute___destroy___0=F.asm.A).apply(null,arguments)},Le=F._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=function(){return(Le=F._emscripten_bind_AttributeQuantizationTransform_AttributeQuantizationTransform_0=F.asm.B).apply(null,arguments)},Ne=F._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=function(){return(Ne=F._emscripten_bind_AttributeQuantizationTransform_InitFromAttribute_1=F.asm.C).apply(null,arguments)},Fe=F._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=function(){return(Fe=F._emscripten_bind_AttributeQuantizationTransform_quantization_bits_0=F.asm.D).apply(null,arguments)},Ue=F._emscripten_bind_AttributeQuantizationTransform_min_value_1=function(){return(Ue=F._emscripten_bind_AttributeQuantizationTransform_min_value_1=F.asm.E).apply(null,arguments)},ke=F._emscripten_bind_AttributeQuantizationTransform_range_0=function(){return(ke=F._emscripten_bind_AttributeQuantizationTransform_range_0=F.asm.F).apply(null,arguments)},ze=F._emscripten_bind_AttributeQuantizationTransform___destroy___0=function(){return(ze=F._emscripten_bind_AttributeQuantizationTransform___destroy___0=F.asm.G).apply(null,arguments)},Ge=F._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=function(){return(Ge=F._emscripten_bind_AttributeOctahedronTransform_AttributeOctahedronTransform_0=F.asm.H).apply(null,arguments)},je=F._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=function(){return(je=F._emscripten_bind_AttributeOctahedronTransform_InitFromAttribute_1=F.asm.I).apply(null,arguments)},Ve=F._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=function(){return(Ve=F._emscripten_bind_AttributeOctahedronTransform_quantization_bits_0=F.asm.J).apply(null,arguments)},Qe=F._emscripten_bind_AttributeOctahedronTransform___destroy___0=function(){return(Qe=F._emscripten_bind_AttributeOctahedronTransform___destroy___0=F.asm.K).apply(null,arguments)},He=F._emscripten_bind_PointCloud_PointCloud_0=function(){return(He=F._emscripten_bind_PointCloud_PointCloud_0=F.asm.L).apply(null,arguments)},We=F._emscripten_bind_PointCloud_num_attributes_0=function(){return(We=F._emscripten_bind_PointCloud_num_attributes_0=F.asm.M).apply(null,arguments)},qe=F._emscripten_bind_PointCloud_num_points_0=function(){return(qe=F._emscripten_bind_PointCloud_num_points_0=F.asm.N).apply(null,arguments)},Xe=F._emscripten_bind_PointCloud___destroy___0=function(){return(Xe=F._emscripten_bind_PointCloud___destroy___0=F.asm.O).apply(null,arguments)},Ke=F._emscripten_bind_Mesh_Mesh_0=function(){return(Ke=F._emscripten_bind_Mesh_Mesh_0=F.asm.P).apply(null,arguments)},Ye=F._emscripten_bind_Mesh_num_faces_0=function(){return(Ye=F._emscripten_bind_Mesh_num_faces_0=F.asm.Q).apply(null,arguments)},Je=F._emscripten_bind_Mesh_num_attributes_0=function(){return(Je=F._emscripten_bind_Mesh_num_attributes_0=F.asm.R).apply(null,arguments)},$e=F._emscripten_bind_Mesh_num_points_0=function(){return($e=F._emscripten_bind_Mesh_num_points_0=F.asm.S).apply(null,arguments)},Ze=F._emscripten_bind_Mesh___destroy___0=function(){return(Ze=F._emscripten_bind_Mesh___destroy___0=F.asm.T).apply(null,arguments)},et=F._emscripten_bind_Metadata_Metadata_0=function(){return(et=F._emscripten_bind_Metadata_Metadata_0=F.asm.U).apply(null,arguments)},tt=F._emscripten_bind_Metadata___destroy___0=function(){return(tt=F._emscripten_bind_Metadata___destroy___0=F.asm.V).apply(null,arguments)},nt=F._emscripten_bind_Status_code_0=function(){return(nt=F._emscripten_bind_Status_code_0=F.asm.W).apply(null,arguments)},rt=F._emscripten_bind_Status_ok_0=function(){return(rt=F._emscripten_bind_Status_ok_0=F.asm.X).apply(null,arguments)},it=F._emscripten_bind_Status_error_msg_0=function(){return(it=F._emscripten_bind_Status_error_msg_0=F.asm.Y).apply(null,arguments)},st=F._emscripten_bind_Status___destroy___0=function(){return(st=F._emscripten_bind_Status___destroy___0=F.asm.Z).apply(null,arguments)},ot=F._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=function(){return(ot=F._emscripten_bind_DracoFloat32Array_DracoFloat32Array_0=F.asm._).apply(null,arguments)},at=F._emscripten_bind_DracoFloat32Array_GetValue_1=function(){return(at=F._emscripten_bind_DracoFloat32Array_GetValue_1=F.asm.$).apply(null,arguments)},ct=F._emscripten_bind_DracoFloat32Array_size_0=function(){return(ct=F._emscripten_bind_DracoFloat32Array_size_0=F.asm.aa).apply(null,arguments)},lt=F._emscripten_bind_DracoFloat32Array___destroy___0=function(){return(lt=F._emscripten_bind_DracoFloat32Array___destroy___0=F.asm.ba).apply(null,arguments)},ut=F._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(ut=F._emscripten_bind_DracoInt8Array_DracoInt8Array_0=F.asm.ca).apply(null,arguments)},ht=F._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(ht=F._emscripten_bind_DracoInt8Array_GetValue_1=F.asm.da).apply(null,arguments)},dt=F._emscripten_bind_DracoInt8Array_size_0=function(){return(dt=F._emscripten_bind_DracoInt8Array_size_0=F.asm.ea).apply(null,arguments)},pt=F._emscripten_bind_DracoInt8Array___destroy___0=function(){return(pt=F._emscripten_bind_DracoInt8Array___destroy___0=F.asm.fa).apply(null,arguments)},ft=F._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=function(){return(ft=F._emscripten_bind_DracoUInt8Array_DracoUInt8Array_0=F.asm.ga).apply(null,arguments)},mt=F._emscripten_bind_DracoUInt8Array_GetValue_1=function(){return(mt=F._emscripten_bind_DracoUInt8Array_GetValue_1=F.asm.ha).apply(null,arguments)},gt=F._emscripten_bind_DracoUInt8Array_size_0=function(){return(gt=F._emscripten_bind_DracoUInt8Array_size_0=F.asm.ia).apply(null,arguments)},At=F._emscripten_bind_DracoUInt8Array___destroy___0=function(){return(At=F._emscripten_bind_DracoUInt8Array___destroy___0=F.asm.ja).apply(null,arguments)},yt=F._emscripten_bind_DracoInt16Array_DracoInt16Array_0=function(){return(yt=F._emscripten_bind_DracoInt16Array_DracoInt16Array_0=F.asm.ka).apply(null,arguments)},_t=F._emscripten_bind_DracoInt16Array_GetValue_1=function(){return(_t=F._emscripten_bind_DracoInt16Array_GetValue_1=F.asm.la).apply(null,arguments)},vt=F._emscripten_bind_DracoInt16Array_size_0=function(){return(vt=F._emscripten_bind_DracoInt16Array_size_0=F.asm.ma).apply(null,arguments)},bt=F._emscripten_bind_DracoInt16Array___destroy___0=function(){return(bt=F._emscripten_bind_DracoInt16Array___destroy___0=F.asm.na).apply(null,arguments)},xt=F._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=function(){return(xt=F._emscripten_bind_DracoUInt16Array_DracoUInt16Array_0=F.asm.oa).apply(null,arguments)},wt=F._emscripten_bind_DracoUInt16Array_GetValue_1=function(){return(wt=F._emscripten_bind_DracoUInt16Array_GetValue_1=F.asm.pa).apply(null,arguments)},Et=F._emscripten_bind_DracoUInt16Array_size_0=function(){return(Et=F._emscripten_bind_DracoUInt16Array_size_0=F.asm.qa).apply(null,arguments)},Tt=F._emscripten_bind_DracoUInt16Array___destroy___0=function(){return(Tt=F._emscripten_bind_DracoUInt16Array___destroy___0=F.asm.ra).apply(null,arguments)},St=F._emscripten_bind_DracoInt32Array_DracoInt32Array_0=function(){return(St=F._emscripten_bind_DracoInt32Array_DracoInt32Array_0=F.asm.sa).apply(null,arguments)},Mt=F._emscripten_bind_DracoInt32Array_GetValue_1=function(){return(Mt=F._emscripten_bind_DracoInt32Array_GetValue_1=F.asm.ta).apply(null,arguments)},Ct=F._emscripten_bind_DracoInt32Array_size_0=function(){return(Ct=F._emscripten_bind_DracoInt32Array_size_0=F.asm.ua).apply(null,arguments)},It=F._emscripten_bind_DracoInt32Array___destroy___0=function(){return(It=F._emscripten_bind_DracoInt32Array___destroy___0=F.asm.va).apply(null,arguments)},Rt=F._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=function(){return(Rt=F._emscripten_bind_DracoUInt32Array_DracoUInt32Array_0=F.asm.wa).apply(null,arguments)},Bt=F._emscripten_bind_DracoUInt32Array_GetValue_1=function(){return(Bt=F._emscripten_bind_DracoUInt32Array_GetValue_1=F.asm.xa).apply(null,arguments)},Pt=F._emscripten_bind_DracoUInt32Array_size_0=function(){return(Pt=F._emscripten_bind_DracoUInt32Array_size_0=F.asm.ya).apply(null,arguments)},Dt=F._emscripten_bind_DracoUInt32Array___destroy___0=function(){return(Dt=F._emscripten_bind_DracoUInt32Array___destroy___0=F.asm.za).apply(null,arguments)},Ot=F._emscripten_bind_MetadataQuerier_MetadataQuerier_0=function(){return(Ot=F._emscripten_bind_MetadataQuerier_MetadataQuerier_0=F.asm.Aa).apply(null,arguments)},Lt=F._emscripten_bind_MetadataQuerier_HasEntry_2=function(){return(Lt=F._emscripten_bind_MetadataQuerier_HasEntry_2=F.asm.Ba).apply(null,arguments)},Nt=F._emscripten_bind_MetadataQuerier_GetIntEntry_2=function(){return(Nt=F._emscripten_bind_MetadataQuerier_GetIntEntry_2=F.asm.Ca).apply(null,arguments)},Ft=F._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=function(){return(Ft=F._emscripten_bind_MetadataQuerier_GetIntEntryArray_3=F.asm.Da).apply(null,arguments)},Ut=F._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=function(){return(Ut=F._emscripten_bind_MetadataQuerier_GetDoubleEntry_2=F.asm.Ea).apply(null,arguments)},kt=F._emscripten_bind_MetadataQuerier_GetStringEntry_2=function(){return(kt=F._emscripten_bind_MetadataQuerier_GetStringEntry_2=F.asm.Fa).apply(null,arguments)},zt=F._emscripten_bind_MetadataQuerier_NumEntries_1=function(){return(zt=F._emscripten_bind_MetadataQuerier_NumEntries_1=F.asm.Ga).apply(null,arguments)},Gt=F._emscripten_bind_MetadataQuerier_GetEntryName_2=function(){return(Gt=F._emscripten_bind_MetadataQuerier_GetEntryName_2=F.asm.Ha).apply(null,arguments)},jt=F._emscripten_bind_MetadataQuerier___destroy___0=function(){return(jt=F._emscripten_bind_MetadataQuerier___destroy___0=F.asm.Ia).apply(null,arguments)},Vt=F._emscripten_bind_Decoder_Decoder_0=function(){return(Vt=F._emscripten_bind_Decoder_Decoder_0=F.asm.Ja).apply(null,arguments)},Qt=F._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=function(){return(Qt=F._emscripten_bind_Decoder_DecodeArrayToPointCloud_3=F.asm.Ka).apply(null,arguments)},Ht=F._emscripten_bind_Decoder_DecodeArrayToMesh_3=function(){return(Ht=F._emscripten_bind_Decoder_DecodeArrayToMesh_3=F.asm.La).apply(null,arguments)},Wt=F._emscripten_bind_Decoder_GetAttributeId_2=function(){return(Wt=F._emscripten_bind_Decoder_GetAttributeId_2=F.asm.Ma).apply(null,arguments)},qt=F._emscripten_bind_Decoder_GetAttributeIdByName_2=function(){return(qt=F._emscripten_bind_Decoder_GetAttributeIdByName_2=F.asm.Na).apply(null,arguments)},Xt=F._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=function(){return(Xt=F._emscripten_bind_Decoder_GetAttributeIdByMetadataEntry_3=F.asm.Oa).apply(null,arguments)},Kt=F._emscripten_bind_Decoder_GetAttribute_2=function(){return(Kt=F._emscripten_bind_Decoder_GetAttribute_2=F.asm.Pa).apply(null,arguments)},Yt=F._emscripten_bind_Decoder_GetAttributeByUniqueId_2=function(){return(Yt=F._emscripten_bind_Decoder_GetAttributeByUniqueId_2=F.asm.Qa).apply(null,arguments)},Jt=F._emscripten_bind_Decoder_GetMetadata_1=function(){return(Jt=F._emscripten_bind_Decoder_GetMetadata_1=F.asm.Ra).apply(null,arguments)},$t=F._emscripten_bind_Decoder_GetAttributeMetadata_2=function(){return($t=F._emscripten_bind_Decoder_GetAttributeMetadata_2=F.asm.Sa).apply(null,arguments)},Zt=F._emscripten_bind_Decoder_GetFaceFromMesh_3=function(){return(Zt=F._emscripten_bind_Decoder_GetFaceFromMesh_3=F.asm.Ta).apply(null,arguments)},en=F._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=function(){return(en=F._emscripten_bind_Decoder_GetTriangleStripsFromMesh_2=F.asm.Ua).apply(null,arguments)},tn=F._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=function(){return(tn=F._emscripten_bind_Decoder_GetTrianglesUInt16Array_3=F.asm.Va).apply(null,arguments)},nn=F._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=function(){return(nn=F._emscripten_bind_Decoder_GetTrianglesUInt32Array_3=F.asm.Wa).apply(null,arguments)},rn=F._emscripten_bind_Decoder_GetAttributeFloat_3=function(){return(rn=F._emscripten_bind_Decoder_GetAttributeFloat_3=F.asm.Xa).apply(null,arguments)},sn=F._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=function(){return(sn=F._emscripten_bind_Decoder_GetAttributeFloatForAllPoints_3=F.asm.Ya).apply(null,arguments)},on=F._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=function(){return(on=F._emscripten_bind_Decoder_GetAttributeIntForAllPoints_3=F.asm.Za).apply(null,arguments)},an=F._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=function(){return(an=F._emscripten_bind_Decoder_GetAttributeInt8ForAllPoints_3=F.asm._a).apply(null,arguments)},cn=F._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=function(){return(cn=F._emscripten_bind_Decoder_GetAttributeUInt8ForAllPoints_3=F.asm.$a).apply(null,arguments)},ln=F._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=function(){return(ln=F._emscripten_bind_Decoder_GetAttributeInt16ForAllPoints_3=F.asm.ab).apply(null,arguments)},un=F._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=function(){return(un=F._emscripten_bind_Decoder_GetAttributeUInt16ForAllPoints_3=F.asm.bb).apply(null,arguments)},hn=F._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=function(){return(hn=F._emscripten_bind_Decoder_GetAttributeInt32ForAllPoints_3=F.asm.cb).apply(null,arguments)},dn=F._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=function(){return(dn=F._emscripten_bind_Decoder_GetAttributeUInt32ForAllPoints_3=F.asm.db).apply(null,arguments)},pn=F._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=function(){return(pn=F._emscripten_bind_Decoder_GetAttributeDataArrayForAllPoints_5=F.asm.eb).apply(null,arguments)},fn=F._emscripten_bind_Decoder_SkipAttributeTransform_1=function(){return(fn=F._emscripten_bind_Decoder_SkipAttributeTransform_1=F.asm.fb).apply(null,arguments)},mn=F._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=function(){return(mn=F._emscripten_bind_Decoder_GetEncodedGeometryType_Deprecated_1=F.asm.gb).apply(null,arguments)},gn=F._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=function(){return(gn=F._emscripten_bind_Decoder_DecodeBufferToPointCloud_2=F.asm.hb).apply(null,arguments)},An=F._emscripten_bind_Decoder_DecodeBufferToMesh_2=function(){return(An=F._emscripten_bind_Decoder_DecodeBufferToMesh_2=F.asm.ib).apply(null,arguments)},yn=F._emscripten_bind_Decoder___destroy___0=function(){return(yn=F._emscripten_bind_Decoder___destroy___0=F.asm.jb).apply(null,arguments)},_n=F._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=function(){return(_n=F._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_INVALID_TRANSFORM=F.asm.kb).apply(null,arguments)},vn=F._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=function(){return(vn=F._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_NO_TRANSFORM=F.asm.lb).apply(null,arguments)},bn=F._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=function(){return(bn=F._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_QUANTIZATION_TRANSFORM=F.asm.mb).apply(null,arguments)},xn=F._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=function(){return(xn=F._emscripten_enum_draco_AttributeTransformType_ATTRIBUTE_OCTAHEDRON_TRANSFORM=F.asm.nb).apply(null,arguments)},wn=F._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(wn=F._emscripten_enum_draco_GeometryAttribute_Type_INVALID=F.asm.ob).apply(null,arguments)},En=F._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(En=F._emscripten_enum_draco_GeometryAttribute_Type_POSITION=F.asm.pb).apply(null,arguments)},Tn=F._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(Tn=F._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=F.asm.qb).apply(null,arguments)},Sn=F._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(Sn=F._emscripten_enum_draco_GeometryAttribute_Type_COLOR=F.asm.rb).apply(null,arguments)},Mn=F._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(Mn=F._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=F.asm.sb).apply(null,arguments)},Cn=F._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(Cn=F._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=F.asm.tb).apply(null,arguments)},In=F._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(In=F._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=F.asm.ub).apply(null,arguments)},Rn=F._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(Rn=F._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=F.asm.vb).apply(null,arguments)},Bn=F._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(Bn=F._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=F.asm.wb).apply(null,arguments)},Pn=F._emscripten_enum_draco_DataType_DT_INVALID=function(){return(Pn=F._emscripten_enum_draco_DataType_DT_INVALID=F.asm.xb).apply(null,arguments)},Dn=F._emscripten_enum_draco_DataType_DT_INT8=function(){return(Dn=F._emscripten_enum_draco_DataType_DT_INT8=F.asm.yb).apply(null,arguments)},On=F._emscripten_enum_draco_DataType_DT_UINT8=function(){return(On=F._emscripten_enum_draco_DataType_DT_UINT8=F.asm.zb).apply(null,arguments)},Ln=F._emscripten_enum_draco_DataType_DT_INT16=function(){return(Ln=F._emscripten_enum_draco_DataType_DT_INT16=F.asm.Ab).apply(null,arguments)},Nn=F._emscripten_enum_draco_DataType_DT_UINT16=function(){return(Nn=F._emscripten_enum_draco_DataType_DT_UINT16=F.asm.Bb).apply(null,arguments)},Fn=F._emscripten_enum_draco_DataType_DT_INT32=function(){return(Fn=F._emscripten_enum_draco_DataType_DT_INT32=F.asm.Cb).apply(null,arguments)},Un=F._emscripten_enum_draco_DataType_DT_UINT32=function(){return(Un=F._emscripten_enum_draco_DataType_DT_UINT32=F.asm.Db).apply(null,arguments)},kn=F._emscripten_enum_draco_DataType_DT_INT64=function(){return(kn=F._emscripten_enum_draco_DataType_DT_INT64=F.asm.Eb).apply(null,arguments)},zn=F._emscripten_enum_draco_DataType_DT_UINT64=function(){return(zn=F._emscripten_enum_draco_DataType_DT_UINT64=F.asm.Fb).apply(null,arguments)},Gn=F._emscripten_enum_draco_DataType_DT_FLOAT32=function(){return(Gn=F._emscripten_enum_draco_DataType_DT_FLOAT32=F.asm.Gb).apply(null,arguments)},jn=F._emscripten_enum_draco_DataType_DT_FLOAT64=function(){return(jn=F._emscripten_enum_draco_DataType_DT_FLOAT64=F.asm.Hb).apply(null,arguments)},Vn=F._emscripten_enum_draco_DataType_DT_BOOL=function(){return(Vn=F._emscripten_enum_draco_DataType_DT_BOOL=F.asm.Ib).apply(null,arguments)},Qn=F._emscripten_enum_draco_DataType_DT_TYPES_COUNT=function(){return(Qn=F._emscripten_enum_draco_DataType_DT_TYPES_COUNT=F.asm.Jb).apply(null,arguments)},Hn=F._emscripten_enum_draco_StatusCode_OK=function(){return(Hn=F._emscripten_enum_draco_StatusCode_OK=F.asm.Kb).apply(null,arguments)},Wn=F._emscripten_enum_draco_StatusCode_DRACO_ERROR=function(){return(Wn=F._emscripten_enum_draco_StatusCode_DRACO_ERROR=F.asm.Lb).apply(null,arguments)},qn=F._emscripten_enum_draco_StatusCode_IO_ERROR=function(){return(qn=F._emscripten_enum_draco_StatusCode_IO_ERROR=F.asm.Mb).apply(null,arguments)},Xn=F._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=function(){return(Xn=F._emscripten_enum_draco_StatusCode_INVALID_PARAMETER=F.asm.Nb).apply(null,arguments)},Kn=F._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=function(){return(Kn=F._emscripten_enum_draco_StatusCode_UNSUPPORTED_VERSION=F.asm.Ob).apply(null,arguments)},Yn=F._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=function(){return(Yn=F._emscripten_enum_draco_StatusCode_UNKNOWN_VERSION=F.asm.Pb).apply(null,arguments)};F._malloc=function(){return(F._malloc=F.asm.Qb).apply(null,arguments)},F._free=function(){return(F._free=F.asm.Rb).apply(null,arguments)};var Jn,$n=function(){return($n=F.asm.Sb).apply(null,arguments)};if(F.___start_em_js=11660,F.___stop_em_js=11758,de=function e(){Jn||l(),Jn||(de=e)},F.preInit)for("function"==typeof F.preInit&&(F.preInit=[F.preInit]);0<F.preInit.length;)F.preInit.pop()();l(),u.prototype=Object.create(u.prototype),u.prototype.constructor=u,u.prototype.__class__=u,u.__cache__={},F.WrapperObject=u,F.getCache=h,F.wrapPointer=d,F.castObject=function(e,t){return d(e.ptr,t)},F.NULL=d(0),F.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete h(e.__class__)[e.ptr]},F.compare=function(e,t){return e.ptr===t.ptr},F.getPointer=function(e){return e.ptr},F.getClass=function(e){return e.__class__};var Zn={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Zn.needed){for(var e=0;e<Zn.temps.length;e++)F._free(Zn.temps[e]);Zn.temps.length=0,F._free(Zn.buffer),Zn.buffer=0,Zn.size+=Zn.needed,Zn.needed=0}Zn.buffer||(Zn.size+=128,Zn.buffer=F._malloc(Zn.size),Zn.buffer||s(void 0)),Zn.pos=0},alloc:function(e,t){return Zn.buffer||s(void 0),e=7+(e=e.length*t.BYTES_PER_ELEMENT)&-8,Zn.pos+e>=Zn.size?(0<e||s(void 0),Zn.needed+=e,t=F._malloc(e),Zn.temps.push(t)):(t=Zn.buffer+Zn.pos,Zn.pos+=e),t},copy:function(e,t,n){switch(n>>>=0,t.BYTES_PER_ELEMENT){case 2:n>>>=1;break;case 4:n>>>=2;break;case 8:n>>>=3}for(var r=0;r<e.length;r++)t[n+r]=e[r]}};return m.prototype=Object.create(u.prototype),m.prototype.constructor=m,m.prototype.__class__=m,m.__cache__={},F.VoidPtr=m,m.prototype.__destroy__=m.prototype.__destroy__=function(){me(this.ptr)},g.prototype=Object.create(u.prototype),g.prototype.constructor=g,g.prototype.__class__=g,g.__cache__={},F.DecoderBuffer=g,g.prototype.Init=g.prototype.Init=function(e,t){var n=this.ptr;Zn.prepare(),"object"==typeof e&&(e=f(e)),t&&"object"==typeof t&&(t=t.ptr),Ae(n,e,t)},g.prototype.__destroy__=g.prototype.__destroy__=function(){ye(this.ptr)},A.prototype=Object.create(u.prototype),A.prototype.constructor=A,A.prototype.__class__=A,A.__cache__={},F.AttributeTransformData=A,A.prototype.transform_type=A.prototype.transform_type=function(){return ve(this.ptr)},A.prototype.__destroy__=A.prototype.__destroy__=function(){be(this.ptr)},y.prototype=Object.create(u.prototype),y.prototype.constructor=y,y.prototype.__class__=y,y.__cache__={},F.GeometryAttribute=y,y.prototype.__destroy__=y.prototype.__destroy__=function(){we(this.ptr)},_.prototype=Object.create(u.prototype),_.prototype.constructor=_,_.prototype.__class__=_,_.__cache__={},F.PointAttribute=_,_.prototype.size=_.prototype.size=function(){return Te(this.ptr)},_.prototype.GetAttributeTransformData=_.prototype.GetAttributeTransformData=function(){return d(Se(this.ptr),A)},_.prototype.attribute_type=_.prototype.attribute_type=function(){return Me(this.ptr)},_.prototype.data_type=_.prototype.data_type=function(){return Ce(this.ptr)},_.prototype.num_components=_.prototype.num_components=function(){return Ie(this.ptr)},_.prototype.normalized=_.prototype.normalized=function(){return!!Re(this.ptr)},_.prototype.byte_stride=_.prototype.byte_stride=function(){return Be(this.ptr)},_.prototype.byte_offset=_.prototype.byte_offset=function(){return Pe(this.ptr)},_.prototype.unique_id=_.prototype.unique_id=function(){return De(this.ptr)},_.prototype.__destroy__=_.prototype.__destroy__=function(){Oe(this.ptr)},v.prototype=Object.create(u.prototype),v.prototype.constructor=v,v.prototype.__class__=v,v.__cache__={},F.AttributeQuantizationTransform=v,v.prototype.InitFromAttribute=v.prototype.InitFromAttribute=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!Ne(t,e)},v.prototype.quantization_bits=v.prototype.quantization_bits=function(){return Fe(this.ptr)},v.prototype.min_value=v.prototype.min_value=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Ue(t,e)},v.prototype.range=v.prototype.range=function(){return ke(this.ptr)},v.prototype.__destroy__=v.prototype.__destroy__=function(){ze(this.ptr)},b.prototype=Object.create(u.prototype),b.prototype.constructor=b,b.prototype.__class__=b,b.__cache__={},F.AttributeOctahedronTransform=b,b.prototype.InitFromAttribute=b.prototype.InitFromAttribute=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),!!je(t,e)},b.prototype.quantization_bits=b.prototype.quantization_bits=function(){return Ve(this.ptr)},b.prototype.__destroy__=b.prototype.__destroy__=function(){Qe(this.ptr)},x.prototype=Object.create(u.prototype),x.prototype.constructor=x,x.prototype.__class__=x,x.__cache__={},F.PointCloud=x,x.prototype.num_attributes=x.prototype.num_attributes=function(){return We(this.ptr)},x.prototype.num_points=x.prototype.num_points=function(){return qe(this.ptr)},x.prototype.__destroy__=x.prototype.__destroy__=function(){Xe(this.ptr)},w.prototype=Object.create(u.prototype),w.prototype.constructor=w,w.prototype.__class__=w,w.__cache__={},F.Mesh=w,w.prototype.num_faces=w.prototype.num_faces=function(){return Ye(this.ptr)},w.prototype.num_attributes=w.prototype.num_attributes=function(){return Je(this.ptr)},w.prototype.num_points=w.prototype.num_points=function(){return $e(this.ptr)},w.prototype.__destroy__=w.prototype.__destroy__=function(){Ze(this.ptr)},E.prototype=Object.create(u.prototype),E.prototype.constructor=E,E.prototype.__class__=E,E.__cache__={},F.Metadata=E,E.prototype.__destroy__=E.prototype.__destroy__=function(){tt(this.ptr)},T.prototype=Object.create(u.prototype),T.prototype.constructor=T,T.prototype.__class__=T,T.__cache__={},F.Status=T,T.prototype.code=T.prototype.code=function(){return nt(this.ptr)},T.prototype.ok=T.prototype.ok=function(){return!!rt(this.ptr)},T.prototype.error_msg=T.prototype.error_msg=function(){return t(it(this.ptr))},T.prototype.__destroy__=T.prototype.__destroy__=function(){st(this.ptr)},S.prototype=Object.create(u.prototype),S.prototype.constructor=S,S.prototype.__class__=S,S.__cache__={},F.DracoFloat32Array=S,S.prototype.GetValue=S.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),at(t,e)},S.prototype.size=S.prototype.size=function(){return ct(this.ptr)},S.prototype.__destroy__=S.prototype.__destroy__=function(){lt(this.ptr)},M.prototype=Object.create(u.prototype),M.prototype.constructor=M,M.prototype.__class__=M,M.__cache__={},F.DracoInt8Array=M,M.prototype.GetValue=M.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),ht(t,e)},M.prototype.size=M.prototype.size=function(){return dt(this.ptr)},M.prototype.__destroy__=M.prototype.__destroy__=function(){pt(this.ptr)},C.prototype=Object.create(u.prototype),C.prototype.constructor=C,C.prototype.__class__=C,C.__cache__={},F.DracoUInt8Array=C,C.prototype.GetValue=C.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),mt(t,e)},C.prototype.size=C.prototype.size=function(){return gt(this.ptr)},C.prototype.__destroy__=C.prototype.__destroy__=function(){At(this.ptr)},I.prototype=Object.create(u.prototype),I.prototype.constructor=I,I.prototype.__class__=I,I.__cache__={},F.DracoInt16Array=I,I.prototype.GetValue=I.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),_t(t,e)},I.prototype.size=I.prototype.size=function(){return vt(this.ptr)},I.prototype.__destroy__=I.prototype.__destroy__=function(){bt(this.ptr)},R.prototype=Object.create(u.prototype),R.prototype.constructor=R,R.prototype.__class__=R,R.__cache__={},F.DracoUInt16Array=R,R.prototype.GetValue=R.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),wt(t,e)},R.prototype.size=R.prototype.size=function(){return Et(this.ptr)},R.prototype.__destroy__=R.prototype.__destroy__=function(){Tt(this.ptr)},B.prototype=Object.create(u.prototype),B.prototype.constructor=B,B.prototype.__class__=B,B.__cache__={},F.DracoInt32Array=B,B.prototype.GetValue=B.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Mt(t,e)},B.prototype.size=B.prototype.size=function(){return Ct(this.ptr)},B.prototype.__destroy__=B.prototype.__destroy__=function(){It(this.ptr)},P.prototype=Object.create(u.prototype),P.prototype.constructor=P,P.prototype.__class__=P,P.__cache__={},F.DracoUInt32Array=P,P.prototype.GetValue=P.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Bt(t,e)},P.prototype.size=P.prototype.size=function(){return Pt(this.ptr)},P.prototype.__destroy__=P.prototype.__destroy__=function(){Dt(this.ptr)},D.prototype=Object.create(u.prototype),D.prototype.constructor=D,D.prototype.__class__=D,D.__cache__={},F.MetadataQuerier=D,D.prototype.HasEntry=D.prototype.HasEntry=function(e,t){var n=this.ptr;return Zn.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:p(t),!!Lt(n,e,t)},D.prototype.GetIntEntry=D.prototype.GetIntEntry=function(e,t){var n=this.ptr;return Zn.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:p(t),Nt(n,e,t)},D.prototype.GetIntEntryArray=D.prototype.GetIntEntryArray=function(e,t,n){var r=this.ptr;Zn.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:p(t),n&&"object"==typeof n&&(n=n.ptr),Ft(r,e,t,n)},D.prototype.GetDoubleEntry=D.prototype.GetDoubleEntry=function(e,t){var n=this.ptr;return Zn.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:p(t),Ut(n,e,t)},D.prototype.GetStringEntry=D.prototype.GetStringEntry=function(e,n){var r=this.ptr;return Zn.prepare(),e&&"object"==typeof e&&(e=e.ptr),n=n&&"object"==typeof n?n.ptr:p(n),t(kt(r,e,n))},D.prototype.NumEntries=D.prototype.NumEntries=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),zt(t,e)},D.prototype.GetEntryName=D.prototype.GetEntryName=function(e,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),n&&"object"==typeof n&&(n=n.ptr),t(Gt(r,e,n))},D.prototype.__destroy__=D.prototype.__destroy__=function(){jt(this.ptr)},O.prototype=Object.create(u.prototype),O.prototype.constructor=O,O.prototype.__class__=O,O.__cache__={},F.Decoder=O,O.prototype.DecodeArrayToPointCloud=O.prototype.DecodeArrayToPointCloud=function(e,t,n){var r=this.ptr;return Zn.prepare(),"object"==typeof e&&(e=f(e)),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),d(Qt(r,e,t,n),T)},O.prototype.DecodeArrayToMesh=O.prototype.DecodeArrayToMesh=function(e,t,n){var r=this.ptr;return Zn.prepare(),"object"==typeof e&&(e=f(e)),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),d(Ht(r,e,t,n),T)},O.prototype.GetAttributeId=O.prototype.GetAttributeId=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Wt(n,e,t)},O.prototype.GetAttributeIdByName=O.prototype.GetAttributeIdByName=function(e,t){var n=this.ptr;return Zn.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:p(t),qt(n,e,t)},O.prototype.GetAttributeIdByMetadataEntry=O.prototype.GetAttributeIdByMetadataEntry=function(e,t,n){var r=this.ptr;return Zn.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:p(t),n=n&&"object"==typeof n?n.ptr:p(n),Xt(r,e,t,n)},O.prototype.GetAttribute=O.prototype.GetAttribute=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),d(Kt(n,e,t),_)},O.prototype.GetAttributeByUniqueId=O.prototype.GetAttributeByUniqueId=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),d(Yt(n,e,t),_)},O.prototype.GetMetadata=O.prototype.GetMetadata=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),d(Jt(t,e),E)},O.prototype.GetAttributeMetadata=O.prototype.GetAttributeMetadata=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),d($t(n,e,t),E)},O.prototype.GetFaceFromMesh=O.prototype.GetFaceFromMesh=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!Zt(r,e,t,n)},O.prototype.GetTriangleStripsFromMesh=O.prototype.GetTriangleStripsFromMesh=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),en(n,e,t)},O.prototype.GetTrianglesUInt16Array=O.prototype.GetTrianglesUInt16Array=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!tn(r,e,t,n)},O.prototype.GetTrianglesUInt32Array=O.prototype.GetTrianglesUInt32Array=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!nn(r,e,t,n)},O.prototype.GetAttributeFloat=O.prototype.GetAttributeFloat=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!rn(r,e,t,n)},O.prototype.GetAttributeFloatForAllPoints=O.prototype.GetAttributeFloatForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!sn(r,e,t,n)},O.prototype.GetAttributeIntForAllPoints=O.prototype.GetAttributeIntForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!on(r,e,t,n)},O.prototype.GetAttributeInt8ForAllPoints=O.prototype.GetAttributeInt8ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!an(r,e,t,n)},O.prototype.GetAttributeUInt8ForAllPoints=O.prototype.GetAttributeUInt8ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!cn(r,e,t,n)},O.prototype.GetAttributeInt16ForAllPoints=O.prototype.GetAttributeInt16ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!ln(r,e,t,n)},O.prototype.GetAttributeUInt16ForAllPoints=O.prototype.GetAttributeUInt16ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!un(r,e,t,n)},O.prototype.GetAttributeInt32ForAllPoints=O.prototype.GetAttributeInt32ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!hn(r,e,t,n)},O.prototype.GetAttributeUInt32ForAllPoints=O.prototype.GetAttributeUInt32ForAllPoints=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!dn(r,e,t,n)},O.prototype.GetAttributeDataArrayForAllPoints=O.prototype.GetAttributeDataArrayForAllPoints=function(e,t,n,r,i){var s=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),i&&"object"==typeof i&&(i=i.ptr),!!pn(s,e,t,n,r,i)},O.prototype.SkipAttributeTransform=O.prototype.SkipAttributeTransform=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),fn(t,e)},O.prototype.GetEncodedGeometryType_Deprecated=O.prototype.GetEncodedGeometryType_Deprecated=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),mn(t,e)},O.prototype.DecodeBufferToPointCloud=O.prototype.DecodeBufferToPointCloud=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),d(gn(n,e,t),T)},O.prototype.DecodeBufferToMesh=O.prototype.DecodeBufferToMesh=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),d(An(n,e,t),T)},O.prototype.__destroy__=O.prototype.__destroy__=function(){yn(this.ptr)},function(){function e(){F.ATTRIBUTE_INVALID_TRANSFORM=_n(),F.ATTRIBUTE_NO_TRANSFORM=vn(),F.ATTRIBUTE_QUANTIZATION_TRANSFORM=bn(),F.ATTRIBUTE_OCTAHEDRON_TRANSFORM=xn(),F.INVALID=wn(),F.POSITION=En(),F.NORMAL=Tn(),F.COLOR=Sn(),F.TEX_COORD=Mn(),F.GENERIC=Cn(),F.INVALID_GEOMETRY_TYPE=In(),F.POINT_CLOUD=Rn(),F.TRIANGULAR_MESH=Bn(),F.DT_INVALID=Pn(),F.DT_INT8=Dn(),F.DT_UINT8=On(),F.DT_INT16=Ln(),F.DT_UINT16=Nn(),F.DT_INT32=Fn(),F.DT_UINT32=Un(),F.DT_INT64=kn(),F.DT_UINT64=zn(),F.DT_FLOAT32=Gn(),F.DT_FLOAT64=jn(),F.DT_BOOL=Vn(),F.DT_TYPES_COUNT=Qn(),F.OK=Hn(),F.DRACO_ERROR=Wn(),F.IO_ERROR=qn(),F.INVALID_PARAMETER=Xn(),F.UNSUPPORTED_VERSION=Kn(),F.UNKNOWN_VERSION=Yn()}le?e():ae.unshift(e)}(),"function"==typeof F.onModuleParsed&&F.onModuleParsed(),F.Decoder.prototype.GetEncodedGeometryType=function(e){if(e.__class__&&e.__class__===F.DecoderBuffer)return F.Decoder.prototype.GetEncodedGeometryType_Deprecated(e);if(8>e.byteLength)return F.INVALID_GEOMETRY_TYPE;switch(e[7]){case 0:return F.POINT_CLOUD;case 1:return F.TRIANGULAR_MESH;default:return F.INVALID_GEOMETRY_TYPE}},e.ready});e.exports=s},9488:function(e,t,n){var r=r||{};r.scope={},r.arrayIteratorImpl=function(e){var t=0;return function(){return t<e.length?{done:!1,value:e[t++]}:{done:!0}}},r.arrayIterator=function(e){return{next:r.arrayIteratorImpl(e)}},r.makeIterator=function(e){var t="undefined"!=typeof Symbol&&Symbol.iterator&&e[Symbol.iterator];return t?t.call(e):r.arrayIterator(e)},r.ASSUME_ES5=!1,r.ASSUME_NO_NATIVE_MAP=!1,r.ASSUME_NO_NATIVE_SET=!1,r.SIMPLE_FROUND_POLYFILL=!1,r.ISOLATE_POLYFILLS=!1,r.FORCE_POLYFILL_PROMISE=!1,r.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,r.getGlobal=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof n.g&&n.g];for(var t=0;t<e.length;++t){var r=e[t];if(r&&r.Math==Math)return r}throw Error("Cannot find global object")},r.global=r.getGlobal(this),r.defineProperty=r.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e},r.IS_SYMBOL_NATIVE="function"==typeof Symbol&&"symbol"==typeof Symbol("x"),r.TRUST_ES6_POLYFILLS=!r.ISOLATE_POLYFILLS||r.IS_SYMBOL_NATIVE,r.polyfills={},r.propertyToPolyfillSymbol={},r.POLYFILL_PREFIX="$jscp$";r.polyfill=function(e,t,n,i){t&&(r.ISOLATE_POLYFILLS?r.polyfillIsolated(e,t,n,i):r.polyfillUnisolated(e,t,n,i))},r.polyfillUnisolated=function(e,t,n,i){for(n=r.global,e=e.split("."),i=0;i<e.length-1;i++){var s=e[i];if(!(s in n))return;n=n[s]}(t=t(i=n[e=e[e.length-1]]))!=i&&null!=t&&r.defineProperty(n,e,{configurable:!0,writable:!0,value:t})},r.polyfillIsolated=function(e,t,n,i){var s=e.split(".");e=1===s.length,i=s[0],i=!e&&i in r.polyfills?r.polyfills:r.global;for(var o=0;o<s.length-1;o++){var a=s[o];if(!(a in i))return;i=i[a]}s=s[s.length-1],null!=(t=t(n=r.IS_SYMBOL_NATIVE&&"es6"===n?i[s]:null))&&(e?r.defineProperty(r.polyfills,s,{configurable:!0,writable:!0,value:t}):t!==n&&(void 0===r.propertyToPolyfillSymbol[s]&&(n=1e9*Math.random()>>>0,r.propertyToPolyfillSymbol[s]=r.IS_SYMBOL_NATIVE?r.global.Symbol(s):r.POLYFILL_PREFIX+n+"$"+s),r.defineProperty(i,r.propertyToPolyfillSymbol[s],{configurable:!0,writable:!0,value:t})))},r.polyfill("Promise",(function(e){function t(){this.batch_=null}function n(e){return e instanceof s?e:new s((function(t,n){t(e)}))}if(e&&(!(r.FORCE_POLYFILL_PROMISE||r.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION&&void 0===r.global.PromiseRejectionEvent)||!r.global.Promise||-1===r.global.Promise.toString().indexOf("[native code]")))return e;t.prototype.asyncExecute=function(e){if(null==this.batch_){this.batch_=[];var t=this;this.asyncExecuteFunction((function(){t.executeBatch_()}))}this.batch_.push(e)};var i=r.global.setTimeout;t.prototype.asyncExecuteFunction=function(e){i(e,0)},t.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var e=this.batch_;this.batch_=[];for(var t=0;t<e.length;++t){var n=e[t];e[t]=null;try{n()}catch(e){this.asyncThrow_(e)}}}this.batch_=null},t.prototype.asyncThrow_=function(e){this.asyncExecuteFunction((function(){throw e}))};var s=function(e){this.state_=0,this.result_=void 0,this.onSettledCallbacks_=[],this.isRejectionHandled_=!1;var t=this.createResolveAndReject_();try{e(t.resolve,t.reject)}catch(e){t.reject(e)}};s.prototype.createResolveAndReject_=function(){function e(e){return function(r){n||(n=!0,e.call(t,r))}}var t=this,n=!1;return{resolve:e(this.resolveTo_),reject:e(this.reject_)}},s.prototype.resolveTo_=function(e){if(e===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(e instanceof s)this.settleSameAsPromise_(e);else{e:switch(typeof e){case"object":var t=null!=e;break e;case"function":t=!0;break e;default:t=!1}t?this.resolveToNonPromiseObj_(e):this.fulfill_(e)}},s.prototype.resolveToNonPromiseObj_=function(e){var t=void 0;try{t=e.then}catch(e){return void this.reject_(e)}"function"==typeof t?this.settleSameAsThenable_(t,e):this.fulfill_(e)},s.prototype.reject_=function(e){this.settle_(2,e)},s.prototype.fulfill_=function(e){this.settle_(1,e)},s.prototype.settle_=function(e,t){if(0!=this.state_)throw Error("Cannot settle("+e+", "+t+"): Promise already settled in state"+this.state_);this.state_=e,this.result_=t,2===this.state_&&this.scheduleUnhandledRejectionCheck_(),this.executeOnSettledCallbacks_()},s.prototype.scheduleUnhandledRejectionCheck_=function(){var e=this;i((function(){if(e.notifyUnhandledRejection_()){var t=r.global.console;void 0!==t&&t.error(e.result_)}}),1)},s.prototype.notifyUnhandledRejection_=function(){if(this.isRejectionHandled_)return!1;var e=r.global.CustomEvent,t=r.global.Event,n=r.global.dispatchEvent;return void 0===n||("function"==typeof e?e=new e("unhandledrejection",{cancelable:!0}):"function"==typeof t?e=new t("unhandledrejection",{cancelable:!0}):(e=r.global.document.createEvent("CustomEvent")).initCustomEvent("unhandledrejection",!1,!0,e),e.promise=this,e.reason=this.result_,n(e))},s.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var e=0;e<this.onSettledCallbacks_.length;++e)o.asyncExecute(this.onSettledCallbacks_[e]);this.onSettledCallbacks_=null}};var o=new t;return s.prototype.settleSameAsPromise_=function(e){var t=this.createResolveAndReject_();e.callWhenSettled_(t.resolve,t.reject)},s.prototype.settleSameAsThenable_=function(e,t){var n=this.createResolveAndReject_();try{e.call(t,n.resolve,n.reject)}catch(e){n.reject(e)}},s.prototype.then=function(e,t){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(e){i(e)}}:t}var r,i,o=new s((function(e,t){r=e,i=t}));return this.callWhenSettled_(n(e,r),n(t,i)),o},s.prototype.catch=function(e){return this.then(void 0,e)},s.prototype.callWhenSettled_=function(e,t){function n(){switch(r.state_){case 1:e(r.result_);break;case 2:t(r.result_);break;default:throw Error("Unexpected state: "+r.state_)}}var r=this;null==this.onSettledCallbacks_?o.asyncExecute(n):this.onSettledCallbacks_.push(n),this.isRejectionHandled_=!0},s.resolve=n,s.reject=function(e){return new s((function(t,n){n(e)}))},s.race=function(e){return new s((function(t,i){for(var s=r.makeIterator(e),o=s.next();!o.done;o=s.next())n(o.value).callWhenSettled_(t,i)}))},s.all=function(e){var t=r.makeIterator(e),i=t.next();return i.done?n([]):new s((function(e,r){function s(t){return function(n){o[t]=n,0==--a&&e(o)}}var o=[],a=0;do{o.push(void 0),a++,n(i.value).callWhenSettled_(s(o.length-1),r),i=t.next()}while(!i.done)}))},s}),"es6","es3"),r.owns=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.assign=r.TRUST_ES6_POLYFILLS&&"function"==typeof Object.assign?Object.assign:function(e,t){for(var n=1;n<arguments.length;n++){var i=arguments[n];if(i)for(var s in i)r.owns(i,s)&&(e[s]=i[s])}return e},r.polyfill("Object.assign",(function(e){return e||r.assign}),"es6","es3"),r.checkStringArgs=function(e,t,n){if(null==e)throw new TypeError("The 'this' value for String.prototype."+n+" must not be null or undefined");if(t instanceof RegExp)throw new TypeError("First argument to String.prototype."+n+" must not be a regular expression");return e+""},r.polyfill("String.prototype.startsWith",(function(e){return e||function(e,t){var n=r.checkStringArgs(this,e,"startsWith");e+="";var i=n.length,s=e.length;t=Math.max(0,Math.min(0|t,n.length));for(var o=0;o<s&&t<i;)if(n[t++]!=e[o++])return!1;return o>=s}}),"es6","es3"),r.polyfill("Array.prototype.copyWithin",(function(e){function t(e){return 1/0===(e=Number(e))||-1/0===e?e:0|e}return e||function(e,n,r){var i=this.length;if(e=t(e),n=t(n),r=void 0===r?i:t(r),e=0>e?Math.max(i+e,0):Math.min(e,i),n=0>n?Math.max(i+n,0):Math.min(n,i),r=0>r?Math.max(i+r,0):Math.min(r,i),e<n)for(;n<r;)n in this?this[e++]=this[n++]:(delete this[e++],n++);else for(e+=(r=Math.min(r,i+n-e))-n;r>n;)--r in this?this[--e]=this[r]:delete this[--e];return this}}),"es6","es3"),r.typedArrayCopyWithin=function(e){return e||Array.prototype.copyWithin},r.polyfill("Int8Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Uint8Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Uint8ClampedArray.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Int16Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Uint16Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Int32Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Uint32Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Float32Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5"),r.polyfill("Float64Array.prototype.copyWithin",r.typedArrayCopyWithin,"es6","es5");var i,s=(i=(i="undefined"!=typeof document&&document.currentScript?document.currentScript.src:void 0)||"/index.js",function(e){function t(){var e=W.buffer;B.HEAP8=q=new Int8Array(e),B.HEAP16=K=new Int16Array(e),B.HEAP32=Y=new Int32Array(e),B.HEAPU8=X=new Uint8Array(e),B.HEAPU16=new Uint16Array(e),B.HEAPU32=J=new Uint32Array(e),B.HEAPF32=$=new Float32Array(e),B.HEAPF64=new Float64Array(e)}function r(e){throw B.onAbort&&B.onAbort(e),H(e="Aborted("+e+")"),ee=!0,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),R(e),e}function s(e){try{if(e==ce&&Q)return new Uint8Array(Q);if(j)return j(e);throw"both async and sync fetching of the wasm failed"}catch(e){r(e)}}function o(e){for(;0<e.length;)e.shift()(B)}function a(e){this.excPtr=e,this.ptr=e-24,this.set_type=function(e){J[this.ptr+4>>2]=e},this.get_type=function(){return J[this.ptr+4>>2]},this.set_destructor=function(e){J[this.ptr+8>>2]=e},this.get_destructor=function(){return J[this.ptr+8>>2]},this.set_refcount=function(e){Y[this.ptr>>2]=e},this.set_caught=function(e){q[this.ptr+12|0]=e?1:0},this.get_caught=function(){return 0!=q[this.ptr+12|0]},this.set_rethrown=function(e){q[this.ptr+13|0]=e?1:0},this.get_rethrown=function(){return 0!=q[this.ptr+13|0]},this.init=function(e,t){this.set_adjusted_ptr(0),this.set_type(e),this.set_destructor(t),this.set_refcount(0),this.set_caught(!1),this.set_rethrown(!1)},this.add_ref=function(){Y[this.ptr>>2]+=1},this.release_ref=function(){var e=Y[this.ptr>>2];return Y[this.ptr>>2]=e-1,1===e},this.set_adjusted_ptr=function(e){J[this.ptr+16>>2]=e},this.get_adjusted_ptr=function(){return J[this.ptr+16>>2]},this.get_exception_ptr=function(){if($t(this.get_type()))return J[this.excPtr>>2];var e=this.get_adjusted_ptr();return 0!==e?e:this.excPtr}}function c(){function e(){if(!Jt&&(Jt=!0,B.calledRun=!0,!ee)){if(ie=!0,o(ne),I(B),B.onRuntimeInitialized&&B.onRuntimeInitialized(),B.postRun)for("function"==typeof B.postRun&&(B.postRun=[B.postRun]);B.postRun.length;)re.unshift(B.postRun.shift());o(re)}}if(!(0<se)){if(B.preRun)for("function"==typeof B.preRun&&(B.preRun=[B.preRun]);B.preRun.length;)te.unshift(B.preRun.shift());o(te),0<se||(B.setStatus?(B.setStatus("Running..."),setTimeout((function(){setTimeout((function(){B.setStatus("")}),1),e()}),1)):e())}}function l(){}function u(e){return(e||l).__cache__}function h(e,t){var n=u(t),r=n[e];return r||((r=Object.create((t||l).prototype)).ptr=e,n[e]=r)}function d(e){if("string"==typeof e){for(var t=0,n=0;n<e.length;++n){var r=e.charCodeAt(n);127>=r?t++:2047>=r?t+=2:55296<=r&&57343>=r?(t+=4,++n):t+=3}if(n=0,0<(r=(t=Array(t+1)).length)){r=n+r-1;for(var i=0;i<e.length;++i){var s=e.charCodeAt(i);if(55296<=s&&57343>=s&&(s=65536+((1023&s)<<10)|1023&e.charCodeAt(++i)),127>=s){if(n>=r)break;t[n++]=s}else{if(2047>=s){if(n+1>=r)break;t[n++]=192|s>>6}else{if(65535>=s){if(n+2>=r)break;t[n++]=224|s>>12}else{if(n+3>=r)break;t[n++]=240|s>>18,t[n++]=128|s>>12&63}t[n++]=128|s>>6&63}t[n++]=128|63&s}}t[n]=0}return e=Zt.alloc(t,q),Zt.copy(t,q,e),e}return e}function p(e){if("object"==typeof e){var t=Zt.alloc(e,q);return Zt.copy(e,q,t),t}return e}function f(e){if("object"==typeof e){var t=Zt.alloc(e,K);return Zt.copy(e,K,t),t}return e}function m(e){if("object"==typeof e){var t=Zt.alloc(e,Y);return Zt.copy(e,Y,t),t}return e}function g(e){if("object"==typeof e){var t=Zt.alloc(e,$);return Zt.copy(e,$,t),t}return e}function A(){throw"cannot construct a VoidPtr, no constructor in IDL"}function y(){this.ptr=he(),u(y)[this.ptr]=this}function _(){this.ptr=pe(),u(_)[this.ptr]=this}function v(){this.ptr=we(),u(v)[this.ptr]=this}function b(){this.ptr=Me(),u(b)[this.ptr]=this}function x(){this.ptr=De(),u(x)[this.ptr]=this}function w(){this.ptr=Le(),u(w)[this.ptr]=this}function E(){this.ptr=ke(),u(E)[this.ptr]=this}function T(){this.ptr=He(),u(T)[this.ptr]=this}function S(){this.ptr=rt(),u(S)[this.ptr]=this}function M(){this.ptr=_t(),u(M)[this.ptr]=this}function C(e){e&&"object"==typeof e&&(e=e.ptr),this.ptr=Rt(e),u(C)[this.ptr]=this}var I,R,B=void 0!==(e=void 0===e?{}:e)?e:{};B.ready=new Promise((function(e,t){I=e,R=t}));var P=!1,D=!1;B.onRuntimeInitialized=function(){P=!0,D&&"function"==typeof B.onModuleLoaded&&B.onModuleLoaded(B)},B.onModuleParsed=function(){D=!0,P&&"function"==typeof B.onModuleLoaded&&B.onModuleLoaded(B)},B.isVersionSupported=function(e){return"string"==typeof e&&!(2>(e=e.split(".")).length||3<e.length)&&(1==e[0]&&0<=e[1]&&5>=e[1]||!(0!=e[0]||10<e[1]))};var O=Object.assign({},B),L="object"==typeof window,N="function"==typeof importScripts,F="object"==typeof process&&"object"==typeof process.versions&&"string"==typeof process.versions.node,U="";if(F){var k=n(1721),z=n(7573);U=N?z.dirname(U)+"/":"//";var G=function(e,t){return e=e.startsWith("file://")?new URL(e):z.normalize(e),k.readFileSync(e,t?void 0:"utf8")},j=function(e){return(e=G(e,!0)).buffer||(e=new Uint8Array(e)),e},V=function(e,t,n){e=e.startsWith("file://")?new URL(e):z.normalize(e),k.readFile(e,(function(e,r){e?n(e):t(r.buffer)}))};1<process.argv.length&&process.argv[1].replace(/\\/g,"/"),process.argv.slice(2),B.inspect=function(){return"[Emscripten Module object]"}}else(L||N)&&(N?U=self.location.href:"undefined"!=typeof document&&document.currentScript&&(U=document.currentScript.src),i&&(U=i),U=0!==U.indexOf("blob:")?U.substr(0,U.replace(/[?#].*/,"").lastIndexOf("/")+1):"",G=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},N&&(j=function(e){var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),V=function(e,t,n){var r=new XMLHttpRequest;r.open("GET",e,!0),r.responseType="arraybuffer",r.onload=function(){200==r.status||0==r.status&&r.response?t(r.response):n()},r.onerror=n,r.send(null)});B.print||console.log.bind(console);var Q,H=B.printErr||console.warn.bind(console);Object.assign(B,O),O=null,B.wasmBinary&&(Q=B.wasmBinary),"object"!=typeof WebAssembly&&r("no native wasm support detected");var W,q,X,K,Y,J,$,Z,ee=!1,te=[],ne=[],re=[],ie=!1,se=0,oe=null,ae=null,ce="draco_encoder.wasm";ce.startsWith("data:application/octet-stream;base64,")||(Z=ce,ce=B.locateFile?B.locateFile(Z,U):U+Z);var le={b:function(e,t,n){throw new a(e).init(t,n),e},a:function(){r("")},d:function(e,t,n){X.copyWithin(e,t,t+n)},c:function(e){var n=X.length;if(2147483648<(e>>>=0))return!1;for(var r=1;4>=r;r*=2){var i=n*(1+.2/r);i=Math.min(i,e+100663296);var s=Math;i=Math.max(e,i),s=s.min.call(s,2147483648,i+(65536-i%65536)%65536);e:{i=W.buffer;try{W.grow(s-i.byteLength+65535>>>16),t();var o=1;break e}catch(e){}o=void 0}if(o)return!0}return!1}};!function(){function e(e,n){B.asm=e.exports,W=B.asm.e,t(),ne.unshift(B.asm.f),se--,B.monitorRunDependencies&&B.monitorRunDependencies(se),0==se&&(null!==oe&&(clearInterval(oe),oe=null),ae&&(e=ae,ae=null,e()))}function n(t){e(t.instance)}function i(e){return function(){if(!Q&&(L||N)){if("function"==typeof fetch&&!ce.startsWith("file://"))return fetch(ce,{credentials:"same-origin"}).then((function(e){if(!e.ok)throw"failed to load wasm binary file at '"+ce+"'";return e.arrayBuffer()})).catch((function(){return s(ce)}));if(V)return new Promise((function(e,t){V(ce,(function(t){e(new Uint8Array(t))}),t)}))}return Promise.resolve().then((function(){return s(ce)}))}().then((function(e){return WebAssembly.instantiate(e,o)})).then((function(e){return e})).then(e,(function(e){H("failed to asynchronously prepare wasm: "+e),r(e)}))}var o={a:le};if(se++,B.monitorRunDependencies&&B.monitorRunDependencies(se),B.instantiateWasm)try{return B.instantiateWasm(o,e)}catch(e){H("Module.instantiateWasm callback failed with error: "+e),R(e)}(Q||"function"!=typeof WebAssembly.instantiateStreaming||ce.startsWith("data:application/octet-stream;base64,")||ce.startsWith("file://")||F||"function"!=typeof fetch?i(n):fetch(ce,{credentials:"same-origin"}).then((function(e){return WebAssembly.instantiateStreaming(e,o).then(n,(function(e){return H("wasm streaming compile failed: "+e),H("falling back to ArrayBuffer instantiation"),i(n)}))}))).catch(R)}();var ue=B._emscripten_bind_VoidPtr___destroy___0=function(){return(ue=B._emscripten_bind_VoidPtr___destroy___0=B.asm.h).apply(null,arguments)},he=B._emscripten_bind_GeometryAttribute_GeometryAttribute_0=function(){return(he=B._emscripten_bind_GeometryAttribute_GeometryAttribute_0=B.asm.i).apply(null,arguments)},de=B._emscripten_bind_GeometryAttribute___destroy___0=function(){return(de=B._emscripten_bind_GeometryAttribute___destroy___0=B.asm.j).apply(null,arguments)},pe=B._emscripten_bind_PointAttribute_PointAttribute_0=function(){return(pe=B._emscripten_bind_PointAttribute_PointAttribute_0=B.asm.k).apply(null,arguments)},fe=B._emscripten_bind_PointAttribute_size_0=function(){return(fe=B._emscripten_bind_PointAttribute_size_0=B.asm.l).apply(null,arguments)},me=B._emscripten_bind_PointAttribute_attribute_type_0=function(){return(me=B._emscripten_bind_PointAttribute_attribute_type_0=B.asm.m).apply(null,arguments)},ge=B._emscripten_bind_PointAttribute_data_type_0=function(){return(ge=B._emscripten_bind_PointAttribute_data_type_0=B.asm.n).apply(null,arguments)},Ae=B._emscripten_bind_PointAttribute_num_components_0=function(){return(Ae=B._emscripten_bind_PointAttribute_num_components_0=B.asm.o).apply(null,arguments)},ye=B._emscripten_bind_PointAttribute_normalized_0=function(){return(ye=B._emscripten_bind_PointAttribute_normalized_0=B.asm.p).apply(null,arguments)},_e=B._emscripten_bind_PointAttribute_byte_stride_0=function(){return(_e=B._emscripten_bind_PointAttribute_byte_stride_0=B.asm.q).apply(null,arguments)},ve=B._emscripten_bind_PointAttribute_byte_offset_0=function(){return(ve=B._emscripten_bind_PointAttribute_byte_offset_0=B.asm.r).apply(null,arguments)},be=B._emscripten_bind_PointAttribute_unique_id_0=function(){return(be=B._emscripten_bind_PointAttribute_unique_id_0=B.asm.s).apply(null,arguments)},xe=B._emscripten_bind_PointAttribute___destroy___0=function(){return(xe=B._emscripten_bind_PointAttribute___destroy___0=B.asm.t).apply(null,arguments)},we=B._emscripten_bind_PointCloud_PointCloud_0=function(){return(we=B._emscripten_bind_PointCloud_PointCloud_0=B.asm.u).apply(null,arguments)},Ee=B._emscripten_bind_PointCloud_num_attributes_0=function(){return(Ee=B._emscripten_bind_PointCloud_num_attributes_0=B.asm.v).apply(null,arguments)},Te=B._emscripten_bind_PointCloud_num_points_0=function(){return(Te=B._emscripten_bind_PointCloud_num_points_0=B.asm.w).apply(null,arguments)},Se=B._emscripten_bind_PointCloud___destroy___0=function(){return(Se=B._emscripten_bind_PointCloud___destroy___0=B.asm.x).apply(null,arguments)},Me=B._emscripten_bind_Mesh_Mesh_0=function(){return(Me=B._emscripten_bind_Mesh_Mesh_0=B.asm.y).apply(null,arguments)},Ce=B._emscripten_bind_Mesh_num_faces_0=function(){return(Ce=B._emscripten_bind_Mesh_num_faces_0=B.asm.z).apply(null,arguments)},Ie=B._emscripten_bind_Mesh_num_attributes_0=function(){return(Ie=B._emscripten_bind_Mesh_num_attributes_0=B.asm.A).apply(null,arguments)},Re=B._emscripten_bind_Mesh_num_points_0=function(){return(Re=B._emscripten_bind_Mesh_num_points_0=B.asm.B).apply(null,arguments)},Be=B._emscripten_bind_Mesh_set_num_points_1=function(){return(Be=B._emscripten_bind_Mesh_set_num_points_1=B.asm.C).apply(null,arguments)},Pe=B._emscripten_bind_Mesh___destroy___0=function(){return(Pe=B._emscripten_bind_Mesh___destroy___0=B.asm.D).apply(null,arguments)},De=B._emscripten_bind_Metadata_Metadata_0=function(){return(De=B._emscripten_bind_Metadata_Metadata_0=B.asm.E).apply(null,arguments)},Oe=B._emscripten_bind_Metadata___destroy___0=function(){return(Oe=B._emscripten_bind_Metadata___destroy___0=B.asm.F).apply(null,arguments)},Le=B._emscripten_bind_DracoInt8Array_DracoInt8Array_0=function(){return(Le=B._emscripten_bind_DracoInt8Array_DracoInt8Array_0=B.asm.G).apply(null,arguments)},Ne=B._emscripten_bind_DracoInt8Array_GetValue_1=function(){return(Ne=B._emscripten_bind_DracoInt8Array_GetValue_1=B.asm.H).apply(null,arguments)},Fe=B._emscripten_bind_DracoInt8Array_size_0=function(){return(Fe=B._emscripten_bind_DracoInt8Array_size_0=B.asm.I).apply(null,arguments)},Ue=B._emscripten_bind_DracoInt8Array___destroy___0=function(){return(Ue=B._emscripten_bind_DracoInt8Array___destroy___0=B.asm.J).apply(null,arguments)},ke=B._emscripten_bind_MetadataBuilder_MetadataBuilder_0=function(){return(ke=B._emscripten_bind_MetadataBuilder_MetadataBuilder_0=B.asm.K).apply(null,arguments)},ze=B._emscripten_bind_MetadataBuilder_AddStringEntry_3=function(){return(ze=B._emscripten_bind_MetadataBuilder_AddStringEntry_3=B.asm.L).apply(null,arguments)},Ge=B._emscripten_bind_MetadataBuilder_AddIntEntry_3=function(){return(Ge=B._emscripten_bind_MetadataBuilder_AddIntEntry_3=B.asm.M).apply(null,arguments)},je=B._emscripten_bind_MetadataBuilder_AddIntEntryArray_4=function(){return(je=B._emscripten_bind_MetadataBuilder_AddIntEntryArray_4=B.asm.N).apply(null,arguments)},Ve=B._emscripten_bind_MetadataBuilder_AddDoubleEntry_3=function(){return(Ve=B._emscripten_bind_MetadataBuilder_AddDoubleEntry_3=B.asm.O).apply(null,arguments)},Qe=B._emscripten_bind_MetadataBuilder___destroy___0=function(){return(Qe=B._emscripten_bind_MetadataBuilder___destroy___0=B.asm.P).apply(null,arguments)},He=B._emscripten_bind_PointCloudBuilder_PointCloudBuilder_0=function(){return(He=B._emscripten_bind_PointCloudBuilder_PointCloudBuilder_0=B.asm.Q).apply(null,arguments)},We=B._emscripten_bind_PointCloudBuilder_AddFloatAttribute_5=function(){return(We=B._emscripten_bind_PointCloudBuilder_AddFloatAttribute_5=B.asm.R).apply(null,arguments)},qe=B._emscripten_bind_PointCloudBuilder_AddInt8Attribute_5=function(){return(qe=B._emscripten_bind_PointCloudBuilder_AddInt8Attribute_5=B.asm.S).apply(null,arguments)},Xe=B._emscripten_bind_PointCloudBuilder_AddUInt8Attribute_5=function(){return(Xe=B._emscripten_bind_PointCloudBuilder_AddUInt8Attribute_5=B.asm.T).apply(null,arguments)},Ke=B._emscripten_bind_PointCloudBuilder_AddInt16Attribute_5=function(){return(Ke=B._emscripten_bind_PointCloudBuilder_AddInt16Attribute_5=B.asm.U).apply(null,arguments)},Ye=B._emscripten_bind_PointCloudBuilder_AddUInt16Attribute_5=function(){return(Ye=B._emscripten_bind_PointCloudBuilder_AddUInt16Attribute_5=B.asm.V).apply(null,arguments)},Je=B._emscripten_bind_PointCloudBuilder_AddInt32Attribute_5=function(){return(Je=B._emscripten_bind_PointCloudBuilder_AddInt32Attribute_5=B.asm.W).apply(null,arguments)},$e=B._emscripten_bind_PointCloudBuilder_AddUInt32Attribute_5=function(){return($e=B._emscripten_bind_PointCloudBuilder_AddUInt32Attribute_5=B.asm.X).apply(null,arguments)},Ze=B._emscripten_bind_PointCloudBuilder_AddMetadata_2=function(){return(Ze=B._emscripten_bind_PointCloudBuilder_AddMetadata_2=B.asm.Y).apply(null,arguments)},et=B._emscripten_bind_PointCloudBuilder_SetMetadataForAttribute_3=function(){return(et=B._emscripten_bind_PointCloudBuilder_SetMetadataForAttribute_3=B.asm.Z).apply(null,arguments)},tt=B._emscripten_bind_PointCloudBuilder_SetNormalizedFlagForAttribute_3=function(){return(tt=B._emscripten_bind_PointCloudBuilder_SetNormalizedFlagForAttribute_3=B.asm._).apply(null,arguments)},nt=B._emscripten_bind_PointCloudBuilder___destroy___0=function(){return(nt=B._emscripten_bind_PointCloudBuilder___destroy___0=B.asm.$).apply(null,arguments)},rt=B._emscripten_bind_MeshBuilder_MeshBuilder_0=function(){return(rt=B._emscripten_bind_MeshBuilder_MeshBuilder_0=B.asm.aa).apply(null,arguments)},it=B._emscripten_bind_MeshBuilder_AddFacesToMesh_3=function(){return(it=B._emscripten_bind_MeshBuilder_AddFacesToMesh_3=B.asm.ba).apply(null,arguments)},st=B._emscripten_bind_MeshBuilder_AddFloatAttributeToMesh_5=function(){return(st=B._emscripten_bind_MeshBuilder_AddFloatAttributeToMesh_5=B.asm.ca).apply(null,arguments)},ot=B._emscripten_bind_MeshBuilder_AddInt32AttributeToMesh_5=function(){return(ot=B._emscripten_bind_MeshBuilder_AddInt32AttributeToMesh_5=B.asm.da).apply(null,arguments)},at=B._emscripten_bind_MeshBuilder_AddMetadataToMesh_2=function(){return(at=B._emscripten_bind_MeshBuilder_AddMetadataToMesh_2=B.asm.ea).apply(null,arguments)},ct=B._emscripten_bind_MeshBuilder_AddFloatAttribute_5=function(){return(ct=B._emscripten_bind_MeshBuilder_AddFloatAttribute_5=B.asm.fa).apply(null,arguments)},lt=B._emscripten_bind_MeshBuilder_AddInt8Attribute_5=function(){return(lt=B._emscripten_bind_MeshBuilder_AddInt8Attribute_5=B.asm.ga).apply(null,arguments)},ut=B._emscripten_bind_MeshBuilder_AddUInt8Attribute_5=function(){return(ut=B._emscripten_bind_MeshBuilder_AddUInt8Attribute_5=B.asm.ha).apply(null,arguments)},ht=B._emscripten_bind_MeshBuilder_AddInt16Attribute_5=function(){return(ht=B._emscripten_bind_MeshBuilder_AddInt16Attribute_5=B.asm.ia).apply(null,arguments)},dt=B._emscripten_bind_MeshBuilder_AddUInt16Attribute_5=function(){return(dt=B._emscripten_bind_MeshBuilder_AddUInt16Attribute_5=B.asm.ja).apply(null,arguments)},pt=B._emscripten_bind_MeshBuilder_AddInt32Attribute_5=function(){return(pt=B._emscripten_bind_MeshBuilder_AddInt32Attribute_5=B.asm.ka).apply(null,arguments)},ft=B._emscripten_bind_MeshBuilder_AddUInt32Attribute_5=function(){return(ft=B._emscripten_bind_MeshBuilder_AddUInt32Attribute_5=B.asm.la).apply(null,arguments)},mt=B._emscripten_bind_MeshBuilder_AddMetadata_2=function(){return(mt=B._emscripten_bind_MeshBuilder_AddMetadata_2=B.asm.ma).apply(null,arguments)},gt=B._emscripten_bind_MeshBuilder_SetMetadataForAttribute_3=function(){return(gt=B._emscripten_bind_MeshBuilder_SetMetadataForAttribute_3=B.asm.na).apply(null,arguments)},At=B._emscripten_bind_MeshBuilder_SetNormalizedFlagForAttribute_3=function(){return(At=B._emscripten_bind_MeshBuilder_SetNormalizedFlagForAttribute_3=B.asm.oa).apply(null,arguments)},yt=B._emscripten_bind_MeshBuilder___destroy___0=function(){return(yt=B._emscripten_bind_MeshBuilder___destroy___0=B.asm.pa).apply(null,arguments)},_t=B._emscripten_bind_Encoder_Encoder_0=function(){return(_t=B._emscripten_bind_Encoder_Encoder_0=B.asm.qa).apply(null,arguments)},vt=B._emscripten_bind_Encoder_SetEncodingMethod_1=function(){return(vt=B._emscripten_bind_Encoder_SetEncodingMethod_1=B.asm.ra).apply(null,arguments)},bt=B._emscripten_bind_Encoder_SetAttributeQuantization_2=function(){return(bt=B._emscripten_bind_Encoder_SetAttributeQuantization_2=B.asm.sa).apply(null,arguments)},xt=B._emscripten_bind_Encoder_SetAttributeExplicitQuantization_5=function(){return(xt=B._emscripten_bind_Encoder_SetAttributeExplicitQuantization_5=B.asm.ta).apply(null,arguments)},wt=B._emscripten_bind_Encoder_SetSpeedOptions_2=function(){return(wt=B._emscripten_bind_Encoder_SetSpeedOptions_2=B.asm.ua).apply(null,arguments)},Et=B._emscripten_bind_Encoder_SetTrackEncodedProperties_1=function(){return(Et=B._emscripten_bind_Encoder_SetTrackEncodedProperties_1=B.asm.va).apply(null,arguments)},Tt=B._emscripten_bind_Encoder_EncodeMeshToDracoBuffer_2=function(){return(Tt=B._emscripten_bind_Encoder_EncodeMeshToDracoBuffer_2=B.asm.wa).apply(null,arguments)},St=B._emscripten_bind_Encoder_EncodePointCloudToDracoBuffer_3=function(){return(St=B._emscripten_bind_Encoder_EncodePointCloudToDracoBuffer_3=B.asm.xa).apply(null,arguments)},Mt=B._emscripten_bind_Encoder_GetNumberOfEncodedPoints_0=function(){return(Mt=B._emscripten_bind_Encoder_GetNumberOfEncodedPoints_0=B.asm.ya).apply(null,arguments)},Ct=B._emscripten_bind_Encoder_GetNumberOfEncodedFaces_0=function(){return(Ct=B._emscripten_bind_Encoder_GetNumberOfEncodedFaces_0=B.asm.za).apply(null,arguments)},It=B._emscripten_bind_Encoder___destroy___0=function(){return(It=B._emscripten_bind_Encoder___destroy___0=B.asm.Aa).apply(null,arguments)},Rt=B._emscripten_bind_ExpertEncoder_ExpertEncoder_1=function(){return(Rt=B._emscripten_bind_ExpertEncoder_ExpertEncoder_1=B.asm.Ba).apply(null,arguments)},Bt=B._emscripten_bind_ExpertEncoder_SetEncodingMethod_1=function(){return(Bt=B._emscripten_bind_ExpertEncoder_SetEncodingMethod_1=B.asm.Ca).apply(null,arguments)},Pt=B._emscripten_bind_ExpertEncoder_SetAttributeQuantization_2=function(){return(Pt=B._emscripten_bind_ExpertEncoder_SetAttributeQuantization_2=B.asm.Da).apply(null,arguments)},Dt=B._emscripten_bind_ExpertEncoder_SetAttributeExplicitQuantization_5=function(){return(Dt=B._emscripten_bind_ExpertEncoder_SetAttributeExplicitQuantization_5=B.asm.Ea).apply(null,arguments)},Ot=B._emscripten_bind_ExpertEncoder_SetSpeedOptions_2=function(){return(Ot=B._emscripten_bind_ExpertEncoder_SetSpeedOptions_2=B.asm.Fa).apply(null,arguments)},Lt=B._emscripten_bind_ExpertEncoder_SetTrackEncodedProperties_1=function(){return(Lt=B._emscripten_bind_ExpertEncoder_SetTrackEncodedProperties_1=B.asm.Ga).apply(null,arguments)},Nt=B._emscripten_bind_ExpertEncoder_EncodeToDracoBuffer_2=function(){return(Nt=B._emscripten_bind_ExpertEncoder_EncodeToDracoBuffer_2=B.asm.Ha).apply(null,arguments)},Ft=B._emscripten_bind_ExpertEncoder_GetNumberOfEncodedPoints_0=function(){return(Ft=B._emscripten_bind_ExpertEncoder_GetNumberOfEncodedPoints_0=B.asm.Ia).apply(null,arguments)},Ut=B._emscripten_bind_ExpertEncoder_GetNumberOfEncodedFaces_0=function(){return(Ut=B._emscripten_bind_ExpertEncoder_GetNumberOfEncodedFaces_0=B.asm.Ja).apply(null,arguments)},kt=B._emscripten_bind_ExpertEncoder___destroy___0=function(){return(kt=B._emscripten_bind_ExpertEncoder___destroy___0=B.asm.Ka).apply(null,arguments)},zt=B._emscripten_enum_draco_GeometryAttribute_Type_INVALID=function(){return(zt=B._emscripten_enum_draco_GeometryAttribute_Type_INVALID=B.asm.La).apply(null,arguments)},Gt=B._emscripten_enum_draco_GeometryAttribute_Type_POSITION=function(){return(Gt=B._emscripten_enum_draco_GeometryAttribute_Type_POSITION=B.asm.Ma).apply(null,arguments)},jt=B._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=function(){return(jt=B._emscripten_enum_draco_GeometryAttribute_Type_NORMAL=B.asm.Na).apply(null,arguments)},Vt=B._emscripten_enum_draco_GeometryAttribute_Type_COLOR=function(){return(Vt=B._emscripten_enum_draco_GeometryAttribute_Type_COLOR=B.asm.Oa).apply(null,arguments)},Qt=B._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=function(){return(Qt=B._emscripten_enum_draco_GeometryAttribute_Type_TEX_COORD=B.asm.Pa).apply(null,arguments)},Ht=B._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=function(){return(Ht=B._emscripten_enum_draco_GeometryAttribute_Type_GENERIC=B.asm.Qa).apply(null,arguments)},Wt=B._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=function(){return(Wt=B._emscripten_enum_draco_EncodedGeometryType_INVALID_GEOMETRY_TYPE=B.asm.Ra).apply(null,arguments)},qt=B._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=function(){return(qt=B._emscripten_enum_draco_EncodedGeometryType_POINT_CLOUD=B.asm.Sa).apply(null,arguments)},Xt=B._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=function(){return(Xt=B._emscripten_enum_draco_EncodedGeometryType_TRIANGULAR_MESH=B.asm.Ta).apply(null,arguments)},Kt=B._emscripten_enum_draco_MeshEncoderMethod_MESH_SEQUENTIAL_ENCODING=function(){return(Kt=B._emscripten_enum_draco_MeshEncoderMethod_MESH_SEQUENTIAL_ENCODING=B.asm.Ua).apply(null,arguments)},Yt=B._emscripten_enum_draco_MeshEncoderMethod_MESH_EDGEBREAKER_ENCODING=function(){return(Yt=B._emscripten_enum_draco_MeshEncoderMethod_MESH_EDGEBREAKER_ENCODING=B.asm.Va).apply(null,arguments)};B._malloc=function(){return(B._malloc=B.asm.Wa).apply(null,arguments)},B._free=function(){return(B._free=B.asm.Xa).apply(null,arguments)};var Jt,$t=function(){return($t=B.asm.Ya).apply(null,arguments)};if(B.___start_em_js=19116,B.___stop_em_js=19214,ae=function e(){Jt||c(),Jt||(ae=e)},B.preInit)for("function"==typeof B.preInit&&(B.preInit=[B.preInit]);0<B.preInit.length;)B.preInit.pop()();c(),l.prototype=Object.create(l.prototype),l.prototype.constructor=l,l.prototype.__class__=l,l.__cache__={},B.WrapperObject=l,B.getCache=u,B.wrapPointer=h,B.castObject=function(e,t){return h(e.ptr,t)},B.NULL=h(0),B.destroy=function(e){if(!e.__destroy__)throw"Error: Cannot destroy object. (Did you create it yourself?)";e.__destroy__(),delete u(e.__class__)[e.ptr]},B.compare=function(e,t){return e.ptr===t.ptr},B.getPointer=function(e){return e.ptr},B.getClass=function(e){return e.__class__};var Zt={buffer:0,size:0,pos:0,temps:[],needed:0,prepare:function(){if(Zt.needed){for(var e=0;e<Zt.temps.length;e++)B._free(Zt.temps[e]);Zt.temps.length=0,B._free(Zt.buffer),Zt.buffer=0,Zt.size+=Zt.needed,Zt.needed=0}Zt.buffer||(Zt.size+=128,Zt.buffer=B._malloc(Zt.size),Zt.buffer||r(void 0)),Zt.pos=0},alloc:function(e,t){return Zt.buffer||r(void 0),e=7+(e=e.length*t.BYTES_PER_ELEMENT)&-8,Zt.pos+e>=Zt.size?(0<e||r(void 0),Zt.needed+=e,t=B._malloc(e),Zt.temps.push(t)):(t=Zt.buffer+Zt.pos,Zt.pos+=e),t},copy:function(e,t,n){switch(n>>>=0,t.BYTES_PER_ELEMENT){case 2:n>>>=1;break;case 4:n>>>=2;break;case 8:n>>>=3}for(var r=0;r<e.length;r++)t[n+r]=e[r]}};return A.prototype=Object.create(l.prototype),A.prototype.constructor=A,A.prototype.__class__=A,A.__cache__={},B.VoidPtr=A,A.prototype.__destroy__=A.prototype.__destroy__=function(){ue(this.ptr)},y.prototype=Object.create(l.prototype),y.prototype.constructor=y,y.prototype.__class__=y,y.__cache__={},B.GeometryAttribute=y,y.prototype.__destroy__=y.prototype.__destroy__=function(){de(this.ptr)},_.prototype=Object.create(l.prototype),_.prototype.constructor=_,_.prototype.__class__=_,_.__cache__={},B.PointAttribute=_,_.prototype.size=_.prototype.size=function(){return fe(this.ptr)},_.prototype.attribute_type=_.prototype.attribute_type=function(){return me(this.ptr)},_.prototype.data_type=_.prototype.data_type=function(){return ge(this.ptr)},_.prototype.num_components=_.prototype.num_components=function(){return Ae(this.ptr)},_.prototype.normalized=_.prototype.normalized=function(){return!!ye(this.ptr)},_.prototype.byte_stride=_.prototype.byte_stride=function(){return _e(this.ptr)},_.prototype.byte_offset=_.prototype.byte_offset=function(){return ve(this.ptr)},_.prototype.unique_id=_.prototype.unique_id=function(){return be(this.ptr)},_.prototype.__destroy__=_.prototype.__destroy__=function(){xe(this.ptr)},v.prototype=Object.create(l.prototype),v.prototype.constructor=v,v.prototype.__class__=v,v.__cache__={},B.PointCloud=v,v.prototype.num_attributes=v.prototype.num_attributes=function(){return Ee(this.ptr)},v.prototype.num_points=v.prototype.num_points=function(){return Te(this.ptr)},v.prototype.__destroy__=v.prototype.__destroy__=function(){Se(this.ptr)},b.prototype=Object.create(l.prototype),b.prototype.constructor=b,b.prototype.__class__=b,b.__cache__={},B.Mesh=b,b.prototype.num_faces=b.prototype.num_faces=function(){return Ce(this.ptr)},b.prototype.num_attributes=b.prototype.num_attributes=function(){return Ie(this.ptr)},b.prototype.num_points=b.prototype.num_points=function(){return Re(this.ptr)},b.prototype.set_num_points=b.prototype.set_num_points=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),Be(t,e)},b.prototype.__destroy__=b.prototype.__destroy__=function(){Pe(this.ptr)},x.prototype=Object.create(l.prototype),x.prototype.constructor=x,x.prototype.__class__=x,x.__cache__={},B.Metadata=x,x.prototype.__destroy__=x.prototype.__destroy__=function(){Oe(this.ptr)},w.prototype=Object.create(l.prototype),w.prototype.constructor=w,w.prototype.__class__=w,w.__cache__={},B.DracoInt8Array=w,w.prototype.GetValue=w.prototype.GetValue=function(e){var t=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),Ne(t,e)},w.prototype.size=w.prototype.size=function(){return Fe(this.ptr)},w.prototype.__destroy__=w.prototype.__destroy__=function(){Ue(this.ptr)},E.prototype=Object.create(l.prototype),E.prototype.constructor=E,E.prototype.__class__=E,E.__cache__={},B.MetadataBuilder=E,E.prototype.AddStringEntry=E.prototype.AddStringEntry=function(e,t,n){var r=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:d(t),n=n&&"object"==typeof n?n.ptr:d(n),!!ze(r,e,t,n)},E.prototype.AddIntEntry=E.prototype.AddIntEntry=function(e,t,n){var r=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:d(t),n&&"object"==typeof n&&(n=n.ptr),!!Ge(r,e,t,n)},E.prototype.AddIntEntryArray=E.prototype.AddIntEntryArray=function(e,t,n,r){var i=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:d(t),"object"==typeof n&&(n=m(n)),r&&"object"==typeof r&&(r=r.ptr),!!je(i,e,t,n,r)},E.prototype.AddDoubleEntry=E.prototype.AddDoubleEntry=function(e,t,n){var r=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t=t&&"object"==typeof t?t.ptr:d(t),n&&"object"==typeof n&&(n=n.ptr),!!Ve(r,e,t,n)},E.prototype.__destroy__=E.prototype.__destroy__=function(){Qe(this.ptr)},T.prototype=Object.create(l.prototype),T.prototype.constructor=T,T.prototype.__class__=T,T.__cache__={},B.PointCloudBuilder=T,T.prototype.AddFloatAttribute=T.prototype.AddFloatAttribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=g(i)),We(s,e,t,n,r,i)},T.prototype.AddInt8Attribute=T.prototype.AddInt8Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=p(i)),qe(s,e,t,n,r,i)},T.prototype.AddUInt8Attribute=T.prototype.AddUInt8Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=p(i)),Xe(s,e,t,n,r,i)},T.prototype.AddInt16Attribute=T.prototype.AddInt16Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=f(i)),Ke(s,e,t,n,r,i)},T.prototype.AddUInt16Attribute=T.prototype.AddUInt16Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=f(i)),Ye(s,e,t,n,r,i)},T.prototype.AddInt32Attribute=T.prototype.AddInt32Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=m(i)),Je(s,e,t,n,r,i)},T.prototype.AddUInt32Attribute=T.prototype.AddUInt32Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=m(i)),$e(s,e,t,n,r,i)},T.prototype.AddMetadata=T.prototype.AddMetadata=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),!!Ze(n,e,t)},T.prototype.SetMetadataForAttribute=T.prototype.SetMetadataForAttribute=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!et(r,e,t,n)},T.prototype.SetNormalizedFlagForAttribute=T.prototype.SetNormalizedFlagForAttribute=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!tt(r,e,t,n)},T.prototype.__destroy__=T.prototype.__destroy__=function(){nt(this.ptr)},S.prototype=Object.create(l.prototype),S.prototype.constructor=S,S.prototype.__class__=S,S.__cache__={},B.MeshBuilder=S,S.prototype.AddFacesToMesh=S.prototype.AddFacesToMesh=function(e,t,n){var r=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),"object"==typeof n&&(n=m(n)),!!it(r,e,t,n)},S.prototype.AddFloatAttributeToMesh=S.prototype.AddFloatAttributeToMesh=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=g(i)),st(s,e,t,n,r,i)},S.prototype.AddInt32AttributeToMesh=S.prototype.AddInt32AttributeToMesh=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=m(i)),ot(s,e,t,n,r,i)},S.prototype.AddMetadataToMesh=S.prototype.AddMetadataToMesh=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),!!at(n,e,t)},S.prototype.AddFloatAttribute=S.prototype.AddFloatAttribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=g(i)),ct(s,e,t,n,r,i)},S.prototype.AddInt8Attribute=S.prototype.AddInt8Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=p(i)),lt(s,e,t,n,r,i)},S.prototype.AddUInt8Attribute=S.prototype.AddUInt8Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=p(i)),ut(s,e,t,n,r,i)},S.prototype.AddInt16Attribute=S.prototype.AddInt16Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=f(i)),ht(s,e,t,n,r,i)},S.prototype.AddUInt16Attribute=S.prototype.AddUInt16Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=f(i)),dt(s,e,t,n,r,i)},S.prototype.AddInt32Attribute=S.prototype.AddInt32Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=m(i)),pt(s,e,t,n,r,i)},S.prototype.AddUInt32Attribute=S.prototype.AddUInt32Attribute=function(e,t,n,r,i){var s=this.ptr;return Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),r&&"object"==typeof r&&(r=r.ptr),"object"==typeof i&&(i=m(i)),ft(s,e,t,n,r,i)},S.prototype.AddMetadata=S.prototype.AddMetadata=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),!!mt(n,e,t)},S.prototype.SetMetadataForAttribute=S.prototype.SetMetadataForAttribute=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!gt(r,e,t,n)},S.prototype.SetNormalizedFlagForAttribute=S.prototype.SetNormalizedFlagForAttribute=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),!!At(r,e,t,n)},S.prototype.__destroy__=S.prototype.__destroy__=function(){yt(this.ptr)},M.prototype=Object.create(l.prototype),M.prototype.constructor=M,M.prototype.__class__=M,M.__cache__={},B.Encoder=M,M.prototype.SetEncodingMethod=M.prototype.SetEncodingMethod=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),vt(t,e)},M.prototype.SetAttributeQuantization=M.prototype.SetAttributeQuantization=function(e,t){var n=this.ptr;e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),bt(n,e,t)},M.prototype.SetAttributeExplicitQuantization=M.prototype.SetAttributeExplicitQuantization=function(e,t,n,r,i){var s=this.ptr;Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof r&&(r=g(r)),i&&"object"==typeof i&&(i=i.ptr),xt(s,e,t,n,r,i)},M.prototype.SetSpeedOptions=M.prototype.SetSpeedOptions=function(e,t){var n=this.ptr;e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),wt(n,e,t)},M.prototype.SetTrackEncodedProperties=M.prototype.SetTrackEncodedProperties=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),Et(t,e)},M.prototype.EncodeMeshToDracoBuffer=M.prototype.EncodeMeshToDracoBuffer=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Tt(n,e,t)},M.prototype.EncodePointCloudToDracoBuffer=M.prototype.EncodePointCloudToDracoBuffer=function(e,t,n){var r=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),St(r,e,t,n)},M.prototype.GetNumberOfEncodedPoints=M.prototype.GetNumberOfEncodedPoints=function(){return Mt(this.ptr)},M.prototype.GetNumberOfEncodedFaces=M.prototype.GetNumberOfEncodedFaces=function(){return Ct(this.ptr)},M.prototype.__destroy__=M.prototype.__destroy__=function(){It(this.ptr)},C.prototype=Object.create(l.prototype),C.prototype.constructor=C,C.prototype.__class__=C,C.__cache__={},B.ExpertEncoder=C,C.prototype.SetEncodingMethod=C.prototype.SetEncodingMethod=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),Bt(t,e)},C.prototype.SetAttributeQuantization=C.prototype.SetAttributeQuantization=function(e,t){var n=this.ptr;e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Pt(n,e,t)},C.prototype.SetAttributeExplicitQuantization=C.prototype.SetAttributeExplicitQuantization=function(e,t,n,r,i){var s=this.ptr;Zt.prepare(),e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),n&&"object"==typeof n&&(n=n.ptr),"object"==typeof r&&(r=g(r)),i&&"object"==typeof i&&(i=i.ptr),Dt(s,e,t,n,r,i)},C.prototype.SetSpeedOptions=C.prototype.SetSpeedOptions=function(e,t){var n=this.ptr;e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Ot(n,e,t)},C.prototype.SetTrackEncodedProperties=C.prototype.SetTrackEncodedProperties=function(e){var t=this.ptr;e&&"object"==typeof e&&(e=e.ptr),Lt(t,e)},C.prototype.EncodeToDracoBuffer=C.prototype.EncodeToDracoBuffer=function(e,t){var n=this.ptr;return e&&"object"==typeof e&&(e=e.ptr),t&&"object"==typeof t&&(t=t.ptr),Nt(n,e,t)},C.prototype.GetNumberOfEncodedPoints=C.prototype.GetNumberOfEncodedPoints=function(){return Ft(this.ptr)},C.prototype.GetNumberOfEncodedFaces=C.prototype.GetNumberOfEncodedFaces=function(){return Ut(this.ptr)},C.prototype.__destroy__=C.prototype.__destroy__=function(){kt(this.ptr)},function(){function e(){B.INVALID=zt(),B.POSITION=Gt(),B.NORMAL=jt(),B.COLOR=Vt(),B.TEX_COORD=Qt(),B.GENERIC=Ht(),B.INVALID_GEOMETRY_TYPE=Wt(),B.POINT_CLOUD=qt(),B.TRIANGULAR_MESH=Xt(),B.MESH_SEQUENTIAL_ENCODING=Kt(),B.MESH_EDGEBREAKER_ENCODING=Yt()}ie?e():ne.unshift(e)}(),"function"==typeof B.onModuleParsed&&B.onModuleParsed(),e.ready});e.exports=s},2879:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DxfParser:()=>I,default:()=>D});class r{constructor(e){this._pointer=0,this._eof=!1,this._data=e}next(){if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);const e={code:parseInt(this._data[this._pointer])};return this._pointer++,e.value=i(e.code,this._data[this._pointer].trim()),this._pointer++,0===e.code&&"EOF"===e.value&&(this._eof=!0),this.lastReadGroup=e,e}peek(){if(!this.hasNext())throw this._eof?new Error("Cannot call 'next' after EOF group has been read"):new Error("Unexpected end of input: EOF group not read before end of file. Ended on code "+this._data[this._pointer]);const e={code:parseInt(this._data[this._pointer])};return e.value=i(e.code,this._data[this._pointer+1].trim()),e}rewind(e=1){this._pointer=this._pointer-2*e}hasNext(){return!this._eof&&!(this._pointer>this._data.length-2)}isEOF(){return this._eof}}function i(e,t){return e<=9?t:e>=10&&e<=59?parseFloat(t):e>=60&&e<=99?parseInt(t):e>=100&&e<=109?t:e>=110&&e<=149?parseFloat(t):e>=160&&e<=179?parseInt(t):e>=210&&e<=239?parseFloat(t):e>=270&&e<=289?parseInt(t):e>=290&&e<=299?function(e){if("0"===e)return!1;if("1"===e)return!0;throw TypeError("String '"+e+"' cannot be cast to Boolean type")}(t):e>=300&&e<=369?t:e>=370&&e<=389?parseInt(t):e>=390&&e<=399?t:e>=400&&e<=409?parseInt(t):e>=410&&e<=419?t:e>=420&&e<=429?parseInt(t):e>=430&&e<=439?t:e>=440&&e<=459?parseInt(t):e>=460&&e<=469?parseFloat(t):e>=470&&e<=481||999===e||e>=1e3&&e<=1009?t:e>=1010&&e<=1059?parseFloat(t):e>=1060&&e<=1071?parseInt(t):(console.log("WARNING: Group code does not have a defined type: %j",{code:e,value:t}),t)}const s=[0,16711680,16776960,65280,65535,255,16711935,16777215,8421504,12632256,16711680,16744319,13369344,13395558,10027008,10046540,8323072,8339263,4980736,4990502,16727808,16752511,13382400,13401958,10036736,10051404,8331008,8343359,4985600,4992806,16744192,16760703,13395456,13408614,10046464,10056268,8339200,8347455,4990464,4995366,16760576,16768895,13408512,13415014,10056192,10061132,8347392,8351551,4995328,4997670,16776960,16777087,13421568,13421670,10000384,10000460,8355584,8355647,5000192,5000230,12582656,14679935,10079232,11717734,7510016,8755276,6258432,7307071,3755008,4344870,8388352,12582783,6736896,10079334,5019648,7510092,4161280,6258495,2509824,3755046,4194048,10485631,3394560,8375398,2529280,6264908,2064128,5209919,1264640,3099686,65280,8388479,52224,6736998,38912,5019724,32512,4161343,19456,2509862,65343,8388511,52275,6737023,38950,5019743,32543,4161359,19475,2509871,65407,8388543,52326,6737049,38988,5019762,32575,4161375,19494,2509881,65471,8388575,52377,6737074,39026,5019781,32607,4161391,19513,2509890,65535,8388607,52428,6737100,39064,5019800,32639,4161407,19532,2509900,49151,8380415,39372,6730444,29336,5014936,24447,4157311,14668,2507340,32767,8372223,26316,6724044,19608,5010072,16255,4153215,9804,2505036,16383,8364031,13260,6717388,9880,5005208,8063,4149119,4940,2502476,255,8355839,204,6710988,152,5000344,127,4145023,76,2500172,4129023,10452991,3342540,8349388,2490520,6245528,2031743,5193599,1245260,3089996,8323327,12550143,6684876,10053324,4980888,7490712,4128895,6242175,2490444,3745356,12517631,14647295,10027212,11691724,7471256,8735896,6226047,7290751,3735628,4335180,16711935,16744447,13369548,13395660,9961624,9981080,8323199,8339327,4980812,4990540,16711871,16744415,13369497,13395634,9961586,9981061,8323167,8339311,4980793,4990530,16711807,16744383,13369446,13395609,9961548,9981042,8323135,8339295,4980774,4990521,16711743,16744351,13369395,13395583,9961510,9981023,8323103,8339279,4980755,4990511,3355443,5987163,8684676,11382189,14079702,16777215];function o(e){const t={};e.rewind();let n=e.next(),r=n.code;if(t.x=n.value,r+=10,n=e.next(),n.code!=r)throw new Error("Expected code for point value to be "+r+" but got "+n.code+".");return t.y=n.value,r+=10,n=e.next(),n.code!=r?(e.rewind(),t):(t.z=n.value,t)}function a(e,t,n){switch(t.code){case 0:e.type=t.value;break;case 5:e.handle=t.value;break;case 6:e.lineType=t.value;break;case 8:e.layer=t.value;break;case 48:e.lineTypeScale=t.value;break;case 60:e.visible=0===t.value;break;case 62:e.colorIndex=t.value,e.color=(r=Math.abs(t.value),s[r]);break;case 67:e.inPaperSpace=0!==t.value;break;case 100:break;case 101:for(;0!=t.code;)t=n.next();n.rewind();break;case 330:e.ownerHandle=t.value;break;case 347:e.materialObjectHandle=t.value;break;case 370:e.lineweight=t.value;break;case 420:e.color=t.value;break;case 1e3:e.extendedData=e.extendedData||{},e.extendedData.customStrings=e.extendedData.customStrings||[],e.extendedData.customStrings.push(t.value);break;case 1001:e.extendedData=e.extendedData||{},e.extendedData.applicationName=t.value;break;default:return!1}var r;return!0}class c{constructor(){this.ForEntityName="3DFACE"}parseEntity(e,t){const n={type:t.value,vertices:[]};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 70:n.shape=!(1&~t.value),n.hasContinuousLinetypePattern=!(128&~t.value);break;case 10:n.vertices=l(e,t),t=e.lastReadGroup;break;default:a(n,t,e)}t=e.next()}return n}}function l(e,t){var n=[],r=!1,i=!1;for(let o=0;o<=4;o++){for(var s={};!e.isEOF()&&0!==t.code&&!i;){switch(t.code){case 10:case 11:case 12:case 13:if(r){i=!0;continue}s.x=t.value,r=!0;break;case 20:case 21:case 22:case 23:s.y=t.value;break;case 30:case 31:case 32:case 33:s.z=t.value;break;default:return n}t=e.next()}n.push(s),r=!1,i=!1}return e.rewind(),n}class u{constructor(){this.ForEntityName="ARC"}parseEntity(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:n.center=o(e);break;case 40:n.radius=t.value;break;case 50:n.startAngle=Math.PI/180*t.value;break;case 51:n.endAngle=Math.PI/180*t.value,n.angleLength=n.endAngle-n.startAngle;break;case 210:n.extrusionDirectionX=t.value;break;case 220:n.extrusionDirectionY=t.value;break;case 230:n.extrusionDirectionZ=t.value;break;default:a(n,t,e)}t=e.next()}return n}}class h{constructor(){this.ForEntityName="ATTDEF"}parseEntity(e,t){var n={type:t.value,scale:1,textStyle:"STANDARD"};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 1:n.text=t.value;break;case 2:n.tag=t.value;break;case 3:n.prompt=t.value;break;case 7:n.textStyle=t.value;break;case 10:n.startPoint=o(e);break;case 11:n.endPoint=o(e);break;case 39:n.thickness=t.value;break;case 40:n.textHeight=t.value;break;case 41:n.scale=t.value;break;case 50:n.rotation=t.value;break;case 51:n.obliqueAngle=t.value;break;case 70:n.invisible=!!(1&t.value),n.constant=!!(2&t.value),n.verificationRequired=!!(4&t.value),n.preset=!!(8&t.value);break;case 71:n.backwards=!!(2&t.value),n.mirrored=!!(4&t.value);break;case 72:n.horizontalJustification=t.value;break;case 73:n.fieldLength=t.value;break;case 74:n.verticalJustification=t.value;break;case 100:break;case 210:n.extrusionDirectionX=t.value;break;case 220:n.extrusionDirectionY=t.value;break;case 230:n.extrusionDirectionZ=t.value;break;default:a(n,t,e)}t=e.next()}return n}}class d{constructor(){this.ForEntityName="CIRCLE"}parseEntity(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:n.center=o(e);break;case 40:n.radius=t.value;break;case 50:n.startAngle=Math.PI/180*t.value;break;case 51:const r=Math.PI/180*t.value;r<n.startAngle?n.angleLength=r+2*Math.PI-n.startAngle:n.angleLength=r-n.startAngle,n.endAngle=r;break;default:a(n,t,e)}t=e.next()}return n}}class p{constructor(){this.ForEntityName="DIMENSION"}parseEntity(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 2:n.block=t.value;break;case 10:n.anchorPoint=o(e);break;case 11:n.middleOfText=o(e);break;case 12:n.insertionPoint=o(e);break;case 13:n.linearOrAngularPoint1=o(e);break;case 14:n.linearOrAngularPoint2=o(e);break;case 15:n.diameterOrRadiusPoint=o(e);break;case 16:n.arcPoint=o(e);break;case 70:n.dimensionType=t.value;break;case 71:n.attachmentPoint=t.value;break;case 42:n.actualMeasurement=t.value;break;case 1:n.text=t.value;break;case 50:n.angle=t.value;break;default:a(n,t,e)}t=e.next()}return n}}class f{constructor(){this.ForEntityName="ELLIPSE"}parseEntity(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:n.center=o(e);break;case 11:n.majorAxisEndPoint=o(e);break;case 40:n.axisRatio=t.value;break;case 41:n.startAngle=t.value;break;case 42:n.endAngle=t.value;break;case 2:n.name=t.value;break;default:a(n,t,e)}t=e.next()}return n}}class m{constructor(){this.ForEntityName="INSERT"}parseEntity(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 2:n.name=t.value;break;case 41:n.xScale=t.value;break;case 42:n.yScale=t.value;break;case 43:n.zScale=t.value;break;case 10:n.position=o(e);break;case 50:n.rotation=t.value;break;case 70:n.columnCount=t.value;break;case 71:n.rowCount=t.value;break;case 44:n.columnSpacing=t.value;break;case 45:n.rowSpacing=t.value;break;case 210:n.extrusionDirection=o(e);break;default:a(n,t,e)}t=e.next()}return n}}class g{constructor(){this.ForEntityName="LINE"}parseEntity(e,t){const n={type:t.value,vertices:[]};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:n.vertices.unshift(o(e));break;case 11:n.vertices.push(o(e));break;case 210:n.extrusionDirection=o(e);break;case 100:break;default:a(n,t,e)}t=e.next()}return n}}class A{constructor(){this.ForEntityName="LWPOLYLINE"}parseEntity(e,t){const n={type:t.value,vertices:[]};let r=0;for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 38:n.elevation=t.value;break;case 39:n.depth=t.value;break;case 70:n.shape=!(1&~t.value),n.hasContinuousLinetypePattern=!(128&~t.value);break;case 90:r=t.value;break;case 10:n.vertices=y(r,e);break;case 43:0!==t.value&&(n.width=t.value);break;case 210:n.extrusionDirectionX=t.value;break;case 220:n.extrusionDirectionY=t.value;break;case 230:n.extrusionDirectionZ=t.value;break;default:a(n,t,e)}t=e.next()}return n}}function y(e,t){if(!e||e<=0)throw Error("n must be greater than 0 verticies");const n=[];let r=!1,i=!1,s=t.lastReadGroup;for(let o=0;o<e;o++){const e={};for(;!t.isEOF()&&0!==s.code&&!i;){switch(s.code){case 10:if(r){i=!0;continue}e.x=s.value,r=!0;break;case 20:e.y=s.value;break;case 30:e.z=s.value;break;case 40:e.startWidth=s.value;break;case 41:e.endWidth=s.value;break;case 42:0!=s.value&&(e.bulge=s.value);break;default:return t.rewind(),r&&n.push(e),t.rewind(),n}s=t.next()}n.push(e),r=!1,i=!1}return t.rewind(),n}class _{constructor(){this.ForEntityName="MTEXT"}parseEntity(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 3:case 1:n.text?n.text+=t.value:n.text=t.value;break;case 10:n.position=o(e);break;case 11:n.directionVector=o(e);break;case 40:n.height=t.value;break;case 41:n.width=t.value;break;case 50:n.rotation=t.value;break;case 71:n.attachmentPoint=t.value;break;case 72:n.drawingDirection=t.value;break;default:a(n,t,e)}t=e.next()}return n}}class v{constructor(){this.ForEntityName="POINT"}parseEntity(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:n.position=o(e);break;case 39:n.thickness=t.value;break;case 210:n.extrusionDirection=o(e);break;case 100:break;default:a(n,t,e)}t=e.next()}return n}}class b{constructor(){this.ForEntityName="VERTEX"}parseEntity(e,t){var n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:n.x=t.value;break;case 20:n.y=t.value;break;case 30:n.z=t.value;break;case 40:case 41:case 50:break;case 42:0!=t.value&&(n.bulge=t.value);break;case 70:n.curveFittingVertex=!!(1&t.value),n.curveFitTangent=!!(2&t.value),n.splineVertex=!!(8&t.value),n.splineControlPoint=!!(16&t.value),n.threeDPolylineVertex=!!(32&t.value),n.threeDPolylineMesh=!!(64&t.value),n.polyfaceMeshVertex=!!(128&t.value);break;case 71:n.faceA=t.value;break;case 72:n.faceB=t.value;break;case 73:n.faceC=t.value;break;case 74:n.faceD=t.value;break;default:a(n,t,e)}t=e.next()}return n}}class x{constructor(){this.ForEntityName="POLYLINE"}parseEntity(e,t){var n={type:t.value,vertices:[]};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:case 20:case 30:case 40:case 41:case 71:case 72:case 73:case 74:case 75:break;case 39:n.thickness=t.value;break;case 70:n.shape=!!(1&t.value),n.includesCurveFitVertices=!!(2&t.value),n.includesSplineFitVertices=!!(4&t.value),n.is3dPolyline=!!(8&t.value),n.is3dPolygonMesh=!!(16&t.value),n.is3dPolygonMeshClosed=!!(32&t.value),n.isPolyfaceMesh=!!(64&t.value),n.hasContinuousLinetypePattern=!!(128&t.value);break;case 210:n.extrusionDirection=o(e);break;default:a(n,t,e)}t=e.next()}return n.vertices=function(e,t){const n=new b,r=[];for(;!e.isEOF();)if(0===t.code)if("VERTEX"===t.value)r.push(n.parseEntity(e,t)),t=e.lastReadGroup;else if("SEQEND"===t.value){w(e,t);break}return r}(e,t),n}}function w(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!=t.code;)a(n,t,e),t=e.next();return n}class E{constructor(){this.ForEntityName="SOLID"}parseEntity(e,t){const n={type:t.value,points:[]};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:n.points[0]=o(e);break;case 11:n.points[1]=o(e);break;case 12:n.points[2]=o(e);break;case 13:n.points[3]=o(e);break;case 210:n.extrusionDirection=o(e);break;default:a(n,t,e)}t=e.next()}return n}}class T{constructor(){this.ForEntityName="SPLINE"}parseEntity(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:n.controlPoints||(n.controlPoints=[]),n.controlPoints.push(o(e));break;case 11:n.fitPoints||(n.fitPoints=[]),n.fitPoints.push(o(e));break;case 12:n.startTangent=o(e);break;case 13:n.endTangent=o(e);break;case 40:n.knotValues||(n.knotValues=[]),n.knotValues.push(t.value);break;case 70:1&t.value&&(n.closed=!0),2&t.value&&(n.periodic=!0),4&t.value&&(n.rational=!0),8&t.value&&(n.planar=!0),16&t.value&&(n.planar=!0,n.linear=!0);break;case 71:n.degreeOfSplineCurve=t.value;break;case 72:n.numberOfKnots=t.value;break;case 73:n.numberOfControlPoints=t.value;break;case 74:n.numberOfFitPoints=t.value;break;case 210:n.normalVector=o(e);break;default:a(n,t,e)}t=e.next()}return n}}class S{constructor(){this.ForEntityName="TEXT"}parseEntity(e,t){const n={type:t.value};for(t=e.next();!e.isEOF()&&0!==t.code;){switch(t.code){case 10:n.startPoint=o(e);break;case 11:n.endPoint=o(e);break;case 40:n.textHeight=t.value;break;case 41:n.xScale=t.value;break;case 50:n.rotation=t.value;break;case 1:n.text=t.value;break;case 72:n.halign=t.value;break;case 73:n.valign=t.value;break;default:a(n,t,e)}t=e.next()}return n}}var M=n(3065),C=n.n(M);C().setLevel("error");class I{constructor(){var e;this._entityHandlers={},(e=this).registerEntityHandler(c),e.registerEntityHandler(u),e.registerEntityHandler(h),e.registerEntityHandler(d),e.registerEntityHandler(p),e.registerEntityHandler(f),e.registerEntityHandler(m),e.registerEntityHandler(g),e.registerEntityHandler(A),e.registerEntityHandler(_),e.registerEntityHandler(v),e.registerEntityHandler(x),e.registerEntityHandler(E),e.registerEntityHandler(T),e.registerEntityHandler(S)}parse(e){return"string"==typeof e?this._parse(e):(console.error("Cannot read dxf source of type `"+typeof e),null)}registerEntityHandler(e){const t=new e;this._entityHandlers[t.ForEntityName]=t}parseSync(e){return this.parse(e)}parseStream(e){let t="";const n=this;return new Promise(((r,i)=>{e.on("data",(e=>{t+=e})),e.on("end",(()=>{try{r(n._parse(t))}catch(e){i(e)}})),e.on("error",(e=>{i(e)}))}))}_parse(e){const t={};let n=0;const i=e.split(/\r\n|\r|\n/g),o=new r(i);if(!o.hasNext())throw Error("Empty file");const a=this;let c;function l(){let e=null,t=null;const n={};for(c=o.next();;){if(R(c,0,"ENDSEC")){e&&(n[e]=t);break}9===c.code?(e&&(n[e]=t),e=c.value):10===c.code?t={x:c.value}:20===c.code?t.y=c.value:30===c.code?t.z=c.value:t=c.value,c=o.next()}return c=o.next(),n}function u(){const e={};for(c=o.next();"EOF"!==c.value&&!R(c,0,"ENDSEC");)if(R(c,0,"BLOCK")){C().debug("block {");const t=h();C().debug("}"),y(t),t.name?e[t.name]=t:C().error('block with handle "'+t.handle+'" is missing a name.')}else B(c),c=o.next();return e}function h(){const e={};for(c=o.next();"EOF"!==c.value;){switch(c.code){case 1:e.xrefPath=c.value,c=o.next();break;case 2:e.name=c.value,c=o.next();break;case 3:e.name2=c.value,c=o.next();break;case 5:e.handle=c.value,c=o.next();break;case 8:e.layer=c.value,c=o.next();break;case 10:e.position=A(c),c=o.next();break;case 67:e.paperSpace=!(!c.value||1!=c.value),c=o.next();break;case 70:0!=c.value&&(e.type=c.value),c=o.next();break;case 100:c=o.next();break;case 330:e.ownerHandle=c.value,c=o.next();break;case 0:if("ENDBLK"==c.value)break;e.entities=g(!0);break;default:B(c),c=o.next()}if(R(c,0,"ENDBLK")){c=o.next();break}}return e}function d(){const e={};for(c=o.next();"EOF"!==c.value&&!R(c,0,"ENDSEC");)if(R(c,0,"TABLE")){c=o.next();m[c.value]?(C().debug(c.value+" Table {"),e[m[c.value].tableName]=f(c),C().debug("}")):C().debug("Unhandled Table "+c.value)}else c=o.next();return c=o.next(),e}const p="ENDTAB";function f(e){const t=m[e.value],n={};let r=0;for(c=o.next();!R(c,0,p);)switch(c.code){case 5:n.handle=c.value,c=o.next();break;case 330:n.ownerHandle=c.value,c=o.next();break;case 100:"AcDbSymbolTable"===c.value||B(c),c=o.next();break;case 70:r=c.value,c=o.next();break;case 0:c.value===t.dxfSymbolName?n[t.tableRecordsProperty]=t.parseTableRecords():(B(c),c=o.next());break;default:B(c),c=o.next()}const i=n[t.tableRecordsProperty];if(i){let e=i.constructor===Array?i.length:"object"==typeof i?Object.keys(i).length:void 0;r!==e&&C().warn("Parsed "+e+" "+t.dxfSymbolName+"'s but expected "+r)}return c=o.next(),n}const m={VPORT:{tableRecordsProperty:"viewPorts",tableName:"viewPort",dxfSymbolName:"VPORT",parseTableRecords:function(){const e=[];let t={};for(C().debug("ViewPort {"),c=o.next();!R(c,0,p);)switch(c.code){case 2:t.name=c.value,c=o.next();break;case 10:t.lowerLeftCorner=A(c),c=o.next();break;case 11:t.upperRightCorner=A(c),c=o.next();break;case 12:t.center=A(c),c=o.next();break;case 13:t.snapBasePoint=A(c),c=o.next();break;case 14:t.snapSpacing=A(c),c=o.next();break;case 15:t.gridSpacing=A(c),c=o.next();break;case 16:t.viewDirectionFromTarget=A(c),c=o.next();break;case 17:t.viewTarget=A(c),c=o.next();break;case 42:t.lensLength=c.value,c=o.next();break;case 43:t.frontClippingPlane=c.value,c=o.next();break;case 44:t.backClippingPlane=c.value,c=o.next();break;case 45:t.viewHeight=c.value,c=o.next();break;case 50:t.snapRotationAngle=c.value,c=o.next();break;case 51:t.viewTwistAngle=c.value,c=o.next();break;case 79:t.orthographicType=c.value,c=o.next();break;case 110:case 110:t.ucsOrigin=A(c),c=o.next();break;case 111:t.ucsXAxis=A(c),c=o.next();break;case 112:t.ucsYAxis=A(c),c=o.next();break;case 281:t.renderMode=c.value,c=o.next();break;case 281:t.defaultLightingType=c.value,c=o.next();break;case 292:t.defaultLightingOn=c.value,c=o.next();break;case 330:t.ownerHandle=c.value,c=o.next();break;case 63:case 421:case 431:t.ambientColor=c.value,c=o.next();break;case 0:"VPORT"===c.value&&(C().debug("}"),e.push(t),C().debug("ViewPort {"),t={},c=o.next());break;default:B(c),c=o.next()}return C().debug("}"),e.push(t),e}},LTYPE:{tableRecordsProperty:"lineTypes",tableName:"lineType",dxfSymbolName:"LTYPE",parseTableRecords:function(){const e={};let t,n={},r=0;for(C().debug("LType {"),c=o.next();!R(c,0,"ENDTAB");)switch(c.code){case 2:n.name=c.value,t=c.value,c=o.next();break;case 3:n.description=c.value,c=o.next();break;case 73:r=c.value,r>0&&(n.pattern=[]),c=o.next();break;case 40:n.patternLength=c.value,c=o.next();break;case 49:n.pattern.push(c.value),c=o.next();break;case 0:C().debug("}"),r>0&&r!==n.pattern.length&&C().warn("lengths do not match on LTYPE pattern"),e[t]=n,n={},C().debug("LType {"),c=o.next();break;default:c=o.next()}return C().debug("}"),e[t]=n,e}},LAYER:{tableRecordsProperty:"layers",tableName:"layer",dxfSymbolName:"LAYER",parseTableRecords:function(){const e={};let t,n={};for(C().debug("Layer {"),c=o.next();!R(c,0,"ENDTAB");)switch(c.code){case 2:n.name=c.value,t=c.value,c=o.next();break;case 62:n.visible=c.value>=0,n.colorIndex=Math.abs(c.value),n.color=(r=n.colorIndex,s[r]),c=o.next();break;case 70:n.frozen=!!(1&c.value)||!!(2&c.value),c=o.next();break;case 0:"LAYER"===c.value&&(C().debug("}"),e[t]=n,C().debug("Layer {"),n={},t=void 0,c=o.next());break;default:B(c),c=o.next()}var r;return C().debug("}"),e[t]=n,e}}};function g(e){const t=[],n=e?"ENDBLK":"ENDSEC";for(e||(c=o.next());;)if(0===c.code){if(c.value===n)break;const e=a._entityHandlers[c.value];if(null==e){C().warn("Unhandled entity "+c.value),c=o.next();continue}{C().debug(c.value+" {");const n=e.parseEntity(o,c);c=o.lastReadGroup,C().debug("}"),y(n),t.push(n)}}else c=o.next();return"ENDSEC"==n&&(c=o.next()),t}function A(e){const t={};let n=e.code;if(t.x=e.value,n+=10,(e=o.next()).code!=n)throw new Error("Expected code for point value to be "+n+" but got "+e.code+".");return t.y=e.value,n+=10,(e=o.next()).code!=n?(o.rewind(),t):(t.z=e.value,t)}function y(e){if(!e)throw new TypeError("entity cannot be undefined or null");e.handle||(e.handle=n++)}return function(){for(c=o.next();!o.isEOF();)if(0===c.code&&"SECTION"===c.value){if(c=o.next(),2!==c.code){console.error("Unexpected code %s after 0:SECTION",P(c)),c=o.next();continue}"HEADER"===c.value?(C().debug("> HEADER"),t.header=l(),C().debug("<")):"BLOCKS"===c.value?(C().debug("> BLOCKS"),t.blocks=u(),C().debug("<")):"ENTITIES"===c.value?(C().debug("> ENTITIES"),t.entities=g(!1),C().debug("<")):"TABLES"===c.value?(C().debug("> TABLES"),t.tables=d(),C().debug("<")):"EOF"===c.value?C().debug("EOF"):C().warn("Skipping section '%s'",c.value)}else c=o.next()}(),t}}function R(e,t,n){return e.code===t&&e.value===n}function B(e){C().debug("unhandled group "+P(e))}function P(e){return e.code+":"+e.value}const D=I},2219:e=>{"use strict";e.exports=function(e){for(var t=new Array(e),n=0;n<e;++n)t[n]=n;return t}},7206:e=>{function t(e){return!!e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}e.exports=function(e){return null!=e&&(t(e)||function(e){return"function"==typeof e.readFloatLE&&"function"==typeof e.slice&&t(e.slice(0,0))}(e)||!!e._isBuffer)}},1710:(e,t,n)=>{e.exports=function e(t,n,r){function i(o,a){if(!n[o]){if(!t[o]){if(s)return s(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var l=n[o]={exports:{}};t[o][0].call(l.exports,(function(e){return i(t[o][1][e]||e)}),l,l.exports,e,t,n,r)}return n[o].exports}for(var s=void 0,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./support"),s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";n.encode=function(e){for(var t,n,i,o,a,c,l,u=[],h=0,d=e.length,p=d,f="string"!==r.getTypeOf(e);h<e.length;)p=d-h,i=f?(t=e[h++],n=h<d?e[h++]:0,h<d?e[h++]:0):(t=e.charCodeAt(h++),n=h<d?e.charCodeAt(h++):0,h<d?e.charCodeAt(h++):0),o=t>>2,a=(3&t)<<4|n>>4,c=1<p?(15&n)<<2|i>>6:64,l=2<p?63&i:64,u.push(s.charAt(o)+s.charAt(a)+s.charAt(c)+s.charAt(l));return u.join("")},n.decode=function(e){var t,n,r,o,a,c,l=0,u=0,h="data:";if(e.substr(0,h.length)===h)throw new Error("Invalid base64 input, it looks like a data url.");var d,p=3*(e=e.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(e.charAt(e.length-1)===s.charAt(64)&&p--,e.charAt(e.length-2)===s.charAt(64)&&p--,p%1!=0)throw new Error("Invalid base64 input, bad content length.");for(d=i.uint8array?new Uint8Array(0|p):new Array(0|p);l<e.length;)t=s.indexOf(e.charAt(l++))<<2|(o=s.indexOf(e.charAt(l++)))>>4,n=(15&o)<<4|(a=s.indexOf(e.charAt(l++)))>>2,r=(3&a)<<6|(c=s.indexOf(e.charAt(l++))),d[u++]=t,64!==a&&(d[u++]=n),64!==c&&(d[u++]=r);return d}},{"./support":30,"./utils":32}],2:[function(e,t,n){"use strict";var r=e("./external"),i=e("./stream/DataWorker"),s=e("./stream/Crc32Probe"),o=e("./stream/DataLengthProbe");function a(e,t,n,r,i){this.compressedSize=e,this.uncompressedSize=t,this.crc32=n,this.compression=r,this.compressedContent=i}a.prototype={getContentWorker:function(){var e=new i(r.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),t=this;return e.on("end",(function(){if(this.streamInfo.data_length!==t.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")})),e},getCompressedWorker:function(){return new i(r.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},a.createWorkerFrom=function(e,t,n){return e.pipe(new s).pipe(new o("uncompressedSize")).pipe(t.compressWorker(n)).pipe(new o("compressedSize")).withStreamInfo("compression",t)},t.exports=a},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(e,t,n){"use strict";var r=e("./stream/GenericWorker");n.STORE={magic:"\0\0",compressWorker:function(){return new r("STORE compression")},uncompressWorker:function(){return new r("STORE decompression")}},n.DEFLATE=e("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(e,t,n){"use strict";var r=e("./utils"),i=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t){return void 0!==e&&e.length?"string"!==r.getTypeOf(e)?function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}(0|t,e,e.length,0):function(e,t,n,r){var s=i,o=r+n;e^=-1;for(var a=r;a<o;a++)e=e>>>8^s[255&(e^t.charCodeAt(a))];return-1^e}(0|t,e,e.length,0):0}},{"./utils":32}],5:[function(e,t,n){"use strict";n.base64=!1,n.binary=!1,n.dir=!1,n.createFolders=!0,n.date=null,n.compression=null,n.compressionOptions=null,n.comment=null,n.unixPermissions=null,n.dosPermissions=null},{}],6:[function(e,t,n){"use strict";var r=null;r="undefined"!=typeof Promise?Promise:e("lie"),t.exports={Promise:r}},{lie:37}],7:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako"),s=e("./utils"),o=e("./stream/GenericWorker"),a=r?"uint8array":"array";function c(e,t){o.call(this,"FlateWorker/"+e),this._pako=null,this._pakoAction=e,this._pakoOptions=t,this.meta={}}n.magic="\b\0",s.inherits(c,o),c.prototype.processChunk=function(e){this.meta=e.meta,null===this._pako&&this._createPako(),this._pako.push(s.transformTo(a,e.data),!1)},c.prototype.flush=function(){o.prototype.flush.call(this),null===this._pako&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var e=this;this._pako.onData=function(t){e.push({data:t,meta:e.meta})}},n.compressWorker=function(e){return new c("Deflate",e)},n.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(e,t,n){"use strict";function r(e,t){var n,r="";for(n=0;n<t;n++)r+=String.fromCharCode(255&e),e>>>=8;return r}function i(e,t,n,i,o,u){var h,d,p=e.file,f=e.compression,m=u!==a.utf8encode,g=s.transformTo("string",u(p.name)),A=s.transformTo("string",a.utf8encode(p.name)),y=p.comment,_=s.transformTo("string",u(y)),v=s.transformTo("string",a.utf8encode(y)),b=A.length!==p.name.length,x=v.length!==y.length,w="",E="",T="",S=p.dir,M=p.date,C={crc32:0,compressedSize:0,uncompressedSize:0};t&&!n||(C.crc32=e.crc32,C.compressedSize=e.compressedSize,C.uncompressedSize=e.uncompressedSize);var I=0;t&&(I|=8),m||!b&&!x||(I|=2048);var R=0,B=0;S&&(R|=16),"UNIX"===o?(B=798,R|=function(e,t){var n=e;return e||(n=t?16893:33204),(65535&n)<<16}(p.unixPermissions,S)):(B=20,R|=function(e){return 63&(e||0)}(p.dosPermissions)),h=M.getUTCHours(),h<<=6,h|=M.getUTCMinutes(),h<<=5,h|=M.getUTCSeconds()/2,d=M.getUTCFullYear()-1980,d<<=4,d|=M.getUTCMonth()+1,d<<=5,d|=M.getUTCDate(),b&&(E=r(1,1)+r(c(g),4)+A,w+="up"+r(E.length,2)+E),x&&(T=r(1,1)+r(c(_),4)+v,w+="uc"+r(T.length,2)+T);var P="";return P+="\n\0",P+=r(I,2),P+=f.magic,P+=r(h,2),P+=r(d,2),P+=r(C.crc32,4),P+=r(C.compressedSize,4),P+=r(C.uncompressedSize,4),P+=r(g.length,2),P+=r(w.length,2),{fileRecord:l.LOCAL_FILE_HEADER+P+g+w,dirRecord:l.CENTRAL_FILE_HEADER+r(B,2)+P+r(_.length,2)+"\0\0\0\0"+r(R,4)+r(i,4)+g+w+_}}var s=e("../utils"),o=e("../stream/GenericWorker"),a=e("../utf8"),c=e("../crc32"),l=e("../signature");function u(e,t,n,r){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=t,this.zipPlatform=n,this.encodeFileName=r,this.streamFiles=e,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(u,o),u.prototype.push=function(e){var t=e.meta.percent||0,n=this.entriesCount,r=this._sources.length;this.accumulate?this.contentBuffer.push(e):(this.bytesWritten+=e.data.length,o.prototype.push.call(this,{data:e.data,meta:{currentFile:this.currentFile,percent:n?(t+100*(n-r-1))/n:100}}))},u.prototype.openedSource=function(e){this.currentSourceOffset=this.bytesWritten,this.currentFile=e.file.name;var t=this.streamFiles&&!e.file.dir;if(t){var n=i(e,t,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},u.prototype.closedSource=function(e){this.accumulate=!1;var t=this.streamFiles&&!e.file.dir,n=i(e,t,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),t)this.push({data:function(e){return l.DATA_DESCRIPTOR+r(e.crc32,4)+r(e.compressedSize,4)+r(e.uncompressedSize,4)}(e),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},u.prototype.flush=function(){for(var e=this.bytesWritten,t=0;t<this.dirRecords.length;t++)this.push({data:this.dirRecords[t],meta:{percent:100}});var n=this.bytesWritten-e,i=function(e,t,n,i,o){var a=s.transformTo("string",o(i));return l.CENTRAL_DIRECTORY_END+"\0\0\0\0"+r(e,2)+r(e,2)+r(t,4)+r(n,4)+r(a.length,2)+a}(this.dirRecords.length,n,e,this.zipComment,this.encodeFileName);this.push({data:i,meta:{percent:100}})},u.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},u.prototype.registerPrevious=function(e){this._sources.push(e);var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.closedSource(t.previous.streamInfo),t._sources.length?t.prepareNextSource():t.end()})),e.on("error",(function(e){t.error(e)})),this},u.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},u.prototype.error=function(e){var t=this._sources;if(!o.prototype.error.call(this,e))return!1;for(var n=0;n<t.length;n++)try{t[n].error(e)}catch(e){}return!0},u.prototype.lock=function(){o.prototype.lock.call(this);for(var e=this._sources,t=0;t<e.length;t++)e[t].lock()},t.exports=u},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(e,t,n){"use strict";var r=e("../compressions"),i=e("./ZipFileWorker");n.generateWorker=function(e,t,n){var s=new i(t.streamFiles,n,t.platform,t.encodeFileName),o=0;try{e.forEach((function(e,n){o++;var i=function(e,t){var n=e||t,i=r[n];if(!i)throw new Error(n+" is not a valid compression method !");return i}(n.options.compression,t.compression),a=n.options.compressionOptions||t.compressionOptions||{},c=n.dir,l=n.date;n._compressWorker(i,a).withStreamInfo("file",{name:e,dir:c,date:l,comment:n.comment||"",unixPermissions:n.unixPermissions,dosPermissions:n.dosPermissions}).pipe(s)})),s.entriesCount=o}catch(e){s.error(e)}return s}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(e,t,n){"use strict";function r(){if(!(this instanceof r))return new r;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var e=new r;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e}}(r.prototype=e("./object")).loadAsync=e("./load"),r.support=e("./support"),r.defaults=e("./defaults"),r.version="3.10.1",r.loadAsync=function(e,t){return(new r).loadAsync(e,t)},r.external=e("./external"),t.exports=r},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(e,t,n){"use strict";var r=e("./utils"),i=e("./external"),s=e("./utf8"),o=e("./zipEntries"),a=e("./stream/Crc32Probe"),c=e("./nodejsUtils");function l(e){return new i.Promise((function(t,n){var r=e.decompressed.getContentWorker().pipe(new a);r.on("error",(function(e){n(e)})).on("end",(function(){r.streamInfo.crc32!==e.decompressed.crc32?n(new Error("Corrupted zip : CRC32 mismatch")):t()})).resume()}))}t.exports=function(e,t){var n=this;return t=r.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:s.utf8decode}),c.isNode&&c.isStream(e)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):r.prepareContent("the loaded zip file",e,!0,t.optimizedBinaryString,t.base64).then((function(e){var n=new o(t);return n.load(e),n})).then((function(e){var n=[i.Promise.resolve(e)],r=e.files;if(t.checkCRC32)for(var s=0;s<r.length;s++)n.push(l(r[s]));return i.Promise.all(n)})).then((function(e){for(var i=e.shift(),s=i.files,o=0;o<s.length;o++){var a=s[o],c=a.fileNameStr,l=r.resolve(a.fileNameStr);n.file(l,a.decompressed,{binary:!0,optimizedBinaryString:!0,date:a.date,dir:a.dir,comment:a.fileCommentStr.length?a.fileCommentStr:null,unixPermissions:a.unixPermissions,dosPermissions:a.dosPermissions,createFolders:t.createFolders}),a.dir||(n.file(l).unsafeOriginalName=c)}return i.zipComment.length&&(n.comment=i.zipComment),n}))}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../stream/GenericWorker");function s(e,t){i.call(this,"Nodejs stream input adapter for "+e),this._upstreamEnded=!1,this._bindStream(t)}r.inherits(s,i),s.prototype._bindStream=function(e){var t=this;(this._stream=e).pause(),e.on("data",(function(e){t.push({data:e,meta:{percent:0}})})).on("error",(function(e){t.isPaused?this.generatedError=e:t.error(e)})).on("end",(function(){t.isPaused?t._upstreamEnded=!0:t.end()}))},s.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},t.exports=s},{"../stream/GenericWorker":28,"../utils":32}],13:[function(e,t,n){"use strict";var r=e("readable-stream").Readable;function i(e,t,n){r.call(this,t),this._helper=e;var i=this;e.on("data",(function(e,t){i.push(e)||i._helper.pause(),n&&n(t)})).on("error",(function(e){i.emit("error",e)})).on("end",(function(){i.push(null)}))}e("../utils").inherits(i,r),i.prototype._read=function(){this._helper.resume()},t.exports=i},{"../utils":32,"readable-stream":16}],14:[function(e,t,n){"use strict";t.exports={isNode:"undefined"!=typeof Buffer,newBufferFrom:function(e,t){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(e,t);if("number"==typeof e)throw new Error('The "data" argument must not be a number');return new Buffer(e,t)},allocBuffer:function(e){if(Buffer.alloc)return Buffer.alloc(e);var t=new Buffer(e);return t.fill(0),t},isBuffer:function(e){return Buffer.isBuffer(e)},isStream:function(e){return e&&"function"==typeof e.on&&"function"==typeof e.pause&&"function"==typeof e.resume}}},{}],15:[function(e,t,n){"use strict";function r(e,t,n){var r,i=s.getTypeOf(t),a=s.extend(n||{},c);a.date=a.date||new Date,null!==a.compression&&(a.compression=a.compression.toUpperCase()),"string"==typeof a.unixPermissions&&(a.unixPermissions=parseInt(a.unixPermissions,8)),a.unixPermissions&&16384&a.unixPermissions&&(a.dir=!0),a.dosPermissions&&16&a.dosPermissions&&(a.dir=!0),a.dir&&(e=m(e)),a.createFolders&&(r=f(e))&&g.call(this,r,!0);var h="string"===i&&!1===a.binary&&!1===a.base64;n&&void 0!==n.binary||(a.binary=!h),(t instanceof l&&0===t.uncompressedSize||a.dir||!t||0===t.length)&&(a.base64=!1,a.binary=!0,t="",a.compression="STORE",i="string");var A=null;A=t instanceof l||t instanceof o?t:d.isNode&&d.isStream(t)?new p(e,t):s.prepareContent(e,t,a.binary,a.optimizedBinaryString,a.base64);var y=new u(e,A,a);this.files[e]=y}var i=e("./utf8"),s=e("./utils"),o=e("./stream/GenericWorker"),a=e("./stream/StreamHelper"),c=e("./defaults"),l=e("./compressedObject"),u=e("./zipObject"),h=e("./generate"),d=e("./nodejsUtils"),p=e("./nodejs/NodejsStreamInputAdapter"),f=function(e){"/"===e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return 0<t?e.substring(0,t):""},m=function(e){return"/"!==e.slice(-1)&&(e+="/"),e},g=function(e,t){return t=void 0!==t?t:c.createFolders,e=m(e),this.files[e]||r.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]};function A(e){return"[object RegExp]"===Object.prototype.toString.call(e)}var y={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(e){var t,n,r;for(t in this.files)r=this.files[t],(n=t.slice(this.root.length,t.length))&&t.slice(0,this.root.length)===this.root&&e(n,r)},filter:function(e){var t=[];return this.forEach((function(n,r){e(n,r)&&t.push(r)})),t},file:function(e,t,n){if(1!==arguments.length)return e=this.root+e,r.call(this,e,t,n),this;if(A(e)){var i=e;return this.filter((function(e,t){return!t.dir&&i.test(e)}))}var s=this.files[this.root+e];return s&&!s.dir?s:null},folder:function(e){if(!e)return this;if(A(e))return this.filter((function(t,n){return n.dir&&e.test(t)}));var t=this.root+e,n=g.call(this,t),r=this.clone();return r.root=n.name,r},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!==e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var n=this.filter((function(t,n){return n.name.slice(0,e.length)===e})),r=0;r<n.length;r++)delete this.files[n[r].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(e){var t,n={};try{if((n=s.extend(e||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=n.type.toLowerCase(),n.compression=n.compression.toUpperCase(),"binarystring"===n.type&&(n.type="string"),!n.type)throw new Error("No output type specified.");s.checkSupport(n.type),"darwin"!==n.platform&&"freebsd"!==n.platform&&"linux"!==n.platform&&"sunos"!==n.platform||(n.platform="UNIX"),"win32"===n.platform&&(n.platform="DOS");var r=n.comment||this.comment||"";t=h.generateWorker(this,n,r)}catch(e){(t=new o("error")).error(e)}return new a(t,n.type||"string",n.mimeType)},generateAsync:function(e,t){return this.generateInternalStream(e).accumulate(t)},generateNodeStream:function(e,t){return(e=e||{}).type||(e.type="nodebuffer"),this.generateInternalStream(e).toNodejsStream(t)}};t.exports=y},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(e,t,n){"use strict";t.exports=e("stream")},{stream:void 0}],17:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e);for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data[this.zero+e]},i.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.length-4;0<=s;--s)if(this.data[s]===t&&this.data[s+1]===n&&this.data[s+2]===r&&this.data[s+3]===i)return s-this.zero;return-1},i.prototype.readAndCheckSignature=function(e){var t=e.charCodeAt(0),n=e.charCodeAt(1),r=e.charCodeAt(2),i=e.charCodeAt(3),s=this.readData(4);return t===s[0]&&n===s[1]&&r===s[2]&&i===s[3]},i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],18:[function(e,t,n){"use strict";var r=e("../utils");function i(e){this.data=e,this.length=e.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||e<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(){},readInt:function(e){var t,n=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)n=(n<<8)+this.byteAt(t);return this.index+=e,n},readString:function(e){return r.transformTo("string",this.readData(e))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var e=this.readInt(4);return new Date(Date.UTC(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1))}},t.exports=i},{"../utils":32}],19:[function(e,t,n){"use strict";var r=e("./Uint8ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(e,t,n){"use strict";var r=e("./DataReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},i.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},i.prototype.readAndCheckSignature=function(e){return e===this.readData(4)},i.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./DataReader":18}],21:[function(e,t,n){"use strict";var r=e("./ArrayReader");function i(e){r.call(this,e)}e("../utils").inherits(i,r),i.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(e,t,n){"use strict";var r=e("../utils"),i=e("../support"),s=e("./ArrayReader"),o=e("./StringReader"),a=e("./NodeBufferReader"),c=e("./Uint8ArrayReader");t.exports=function(e){var t=r.getTypeOf(e);return r.checkSupport(t),"string"!==t||i.uint8array?"nodebuffer"===t?new a(e):i.uint8array?new c(r.transformTo("uint8array",e)):new s(r.transformTo("array",e)):new o(e)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(e,t,n){"use strict";n.LOCAL_FILE_HEADER="PK",n.CENTRAL_FILE_HEADER="PK",n.CENTRAL_DIRECTORY_END="PK",n.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",n.ZIP64_CENTRAL_DIRECTORY_END="PK",n.DATA_DESCRIPTOR="PK\b"},{}],24:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../utils");function s(e){r.call(this,"ConvertWorker to "+e),this.destType=e}i.inherits(s,r),s.prototype.processChunk=function(e){this.push({data:i.transformTo(this.destType,e.data),meta:e.meta})},t.exports=s},{"../utils":32,"./GenericWorker":28}],25:[function(e,t,n){"use strict";var r=e("./GenericWorker"),i=e("../crc32");function s(){r.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}e("../utils").inherits(s,r),s.prototype.processChunk=function(e){this.streamInfo.crc32=i(e.data,this.streamInfo.crc32||0),this.push(e)},t.exports=s},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataLengthProbe for "+e),this.propName=e,this.withStreamInfo(e,0)}r.inherits(s,i),s.prototype.processChunk=function(e){if(e){var t=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=t+e.data.length}i.prototype.processChunk.call(this,e)},t.exports=s},{"../utils":32,"./GenericWorker":28}],27:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./GenericWorker");function s(e){i.call(this,"DataWorker");var t=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,e.then((function(e){t.dataIsReady=!0,t.data=e,t.max=e&&e.length||0,t.type=r.getTypeOf(e),t.isPaused||t._tickAndRepeat()}),(function(e){t.error(e)}))}r.inherits(s,i),s.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},s.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,r.delay(this._tickAndRepeat,[],this)),!0)},s.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(r.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},s.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var e=null,t=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":e=this.data.substring(this.index,t);break;case"uint8array":e=this.data.subarray(this.index,t);break;case"array":case"nodebuffer":e=this.data.slice(this.index,t)}return this.index=t,this.push({data:e,meta:{percent:this.max?this.index/this.max*100:0}})},t.exports=s},{"../utils":32,"./GenericWorker":28}],28:[function(e,t,n){"use strict";function r(e){this.name=e||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}r.prototype={push:function(e){this.emit("data",e)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(e){this.emit("error",e)}return!0},error:function(e){return!this.isFinished&&(this.isPaused?this.generatedError=e:(this.isFinished=!0,this.emit("error",e),this.previous&&this.previous.error(e),this.cleanUp()),!0)},on:function(e,t){return this._listeners[e].push(t),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(e,t){if(this._listeners[e])for(var n=0;n<this._listeners[e].length;n++)this._listeners[e][n].call(this,t)},pipe:function(e){return e.registerPrevious(this)},registerPrevious:function(e){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=e.streamInfo,this.mergeStreamInfo(),this.previous=e;var t=this;return e.on("data",(function(e){t.processChunk(e)})),e.on("end",(function(){t.end()})),e.on("error",(function(e){t.error(e)})),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var e=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),e=!0),this.previous&&this.previous.resume(),!e},flush:function(){},processChunk:function(e){this.push(e)},withStreamInfo:function(e,t){return this.extraStreamInfo[e]=t,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var e in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,e)&&(this.streamInfo[e]=this.extraStreamInfo[e])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var e="Worker "+this.name;return this.previous?this.previous+" -> "+e:e}},t.exports=r},{}],29:[function(e,t,n){"use strict";var r=e("../utils"),i=e("./ConvertWorker"),s=e("./GenericWorker"),o=e("../base64"),a=e("../support"),c=e("../external"),l=null;if(a.nodestream)try{l=e("../nodejs/NodejsStreamOutputAdapter")}catch(e){}function u(e,t){return new c.Promise((function(n,i){var s=[],a=e._internalType,c=e._outputType,l=e._mimeType;e.on("data",(function(e,n){s.push(e),t&&t(n)})).on("error",(function(e){s=[],i(e)})).on("end",(function(){try{var e=function(e,t,n){switch(e){case"blob":return r.newBlob(r.transformTo("arraybuffer",t),n);case"base64":return o.encode(t);default:return r.transformTo(e,t)}}(c,function(e,t){var n,r=0,i=null,s=0;for(n=0;n<t.length;n++)s+=t[n].length;switch(e){case"string":return t.join("");case"array":return Array.prototype.concat.apply([],t);case"uint8array":for(i=new Uint8Array(s),n=0;n<t.length;n++)i.set(t[n],r),r+=t[n].length;return i;case"nodebuffer":return Buffer.concat(t);default:throw new Error("concat : unsupported type '"+e+"'")}}(a,s),l);n(e)}catch(e){i(e)}s=[]})).resume()}))}function h(e,t,n){var o=t;switch(t){case"blob":case"arraybuffer":o="uint8array";break;case"base64":o="string"}try{this._internalType=o,this._outputType=t,this._mimeType=n,r.checkSupport(o),this._worker=e.pipe(new i(o)),e.lock()}catch(e){this._worker=new s("error"),this._worker.error(e)}}h.prototype={accumulate:function(e){return u(this,e)},on:function(e,t){var n=this;return"data"===e?this._worker.on(e,(function(e){t.call(n,e.data,e.meta)})):this._worker.on(e,(function(){r.delay(t,arguments,n)})),this},resume:function(){return r.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(e){if(r.checkSupport("nodestream"),"nodebuffer"!==this._outputType)throw new Error(this._outputType+" is not supported by this method");return new l(this,{objectMode:"nodebuffer"!==this._outputType},e)}},t.exports=h},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(e,t,n){"use strict";if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer="undefined"!=typeof Buffer,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var r=new ArrayBuffer(0);try{n.blob=0===new Blob([r],{type:"application/zip"}).size}catch(e){try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(r),n.blob=0===i.getBlob("application/zip").size}catch(e){n.blob=!1}}}try{n.nodestream=!!e("readable-stream").Readable}catch(e){n.nodestream=!1}},{"readable-stream":16}],31:[function(e,t,n){"use strict";for(var r=e("./utils"),i=e("./support"),s=e("./nodejsUtils"),o=e("./stream/GenericWorker"),a=new Array(256),c=0;c<256;c++)a[c]=252<=c?6:248<=c?5:240<=c?4:224<=c?3:192<=c?2:1;function l(){o.call(this,"utf-8 decode"),this.leftOver=null}function u(){o.call(this,"utf-8 encode")}a[254]=a[254]=1,n.utf8encode=function(e){return i.nodebuffer?s.newBufferFrom(e,"utf-8"):function(e){var t,n,r,s,o,a=e.length,c=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=i.uint8array?new Uint8Array(c):new Array(c),s=o=0;o<c;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(r=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(r-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t}(e)},n.utf8decode=function(e){return i.nodebuffer?r.transformTo("nodebuffer",e).toString("utf-8"):function(e){var t,n,i,s,o=e.length,c=new Array(2*o);for(t=n=0;t<o;)if((i=e[t++])<128)c[n++]=i;else if(4<(s=a[i]))c[n++]=65533,t+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&t<o;)i=i<<6|63&e[t++],s--;1<s?c[n++]=65533:i<65536?c[n++]=i:(i-=65536,c[n++]=55296|i>>10&1023,c[n++]=56320|1023&i)}return c.length!==n&&(c.subarray?c=c.subarray(0,n):c.length=n),r.applyFromCharCode(c)}(e=r.transformTo(i.uint8array?"uint8array":"array",e))},r.inherits(l,o),l.prototype.processChunk=function(e){var t=r.transformTo(i.uint8array?"uint8array":"array",e.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var s=t;(t=new Uint8Array(s.length+this.leftOver.length)).set(this.leftOver,0),t.set(s,this.leftOver.length)}else t=this.leftOver.concat(t);this.leftOver=null}var o=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+a[e[n]]>t?n:t}(t),c=t;o!==t.length&&(i.uint8array?(c=t.subarray(0,o),this.leftOver=t.subarray(o,t.length)):(c=t.slice(0,o),this.leftOver=t.slice(o,t.length))),this.push({data:n.utf8decode(c),meta:e.meta})},l.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:n.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},n.Utf8DecodeWorker=l,r.inherits(u,o),u.prototype.processChunk=function(e){this.push({data:n.utf8encode(e.data),meta:e.meta})},n.Utf8EncodeWorker=u},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(e,t,n){"use strict";var r=e("./support"),i=e("./base64"),s=e("./nodejsUtils"),o=e("./external");function a(e){return e}function c(e,t){for(var n=0;n<e.length;++n)t[n]=255&e.charCodeAt(n);return t}e("setimmediate"),n.newBlob=function(e,t){n.checkSupport("blob");try{return new Blob([e],{type:t})}catch(n){try{var r=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return r.append(e),r.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}};var l={stringifyByChunk:function(e,t,n){var r=[],i=0,s=e.length;if(s<=n)return String.fromCharCode.apply(null,e);for(;i<s;)"array"===t||"nodebuffer"===t?r.push(String.fromCharCode.apply(null,e.slice(i,Math.min(i+n,s)))):r.push(String.fromCharCode.apply(null,e.subarray(i,Math.min(i+n,s)))),i+=n;return r.join("")},stringifyByChar:function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t},applyCanBeUsed:{uint8array:function(){try{return r.uint8array&&1===String.fromCharCode.apply(null,new Uint8Array(1)).length}catch(e){return!1}}(),nodebuffer:function(){try{return r.nodebuffer&&1===String.fromCharCode.apply(null,s.allocBuffer(1)).length}catch(e){return!1}}()}};function u(e){var t=65536,r=n.getTypeOf(e),i=!0;if("uint8array"===r?i=l.applyCanBeUsed.uint8array:"nodebuffer"===r&&(i=l.applyCanBeUsed.nodebuffer),i)for(;1<t;)try{return l.stringifyByChunk(e,r,t)}catch(e){t=Math.floor(t/2)}return l.stringifyByChar(e)}function h(e,t){for(var n=0;n<e.length;n++)t[n]=e[n];return t}n.applyFromCharCode=u;var d={};d.string={string:a,array:function(e){return c(e,new Array(e.length))},arraybuffer:function(e){return d.string.uint8array(e).buffer},uint8array:function(e){return c(e,new Uint8Array(e.length))},nodebuffer:function(e){return c(e,s.allocBuffer(e.length))}},d.array={string:u,array:a,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(e)}},d.arraybuffer={string:function(e){return u(new Uint8Array(e))},array:function(e){return h(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:a,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return s.newBufferFrom(new Uint8Array(e))}},d.uint8array={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:a,nodebuffer:function(e){return s.newBufferFrom(e)}},d.nodebuffer={string:u,array:function(e){return h(e,new Array(e.length))},arraybuffer:function(e){return d.nodebuffer.uint8array(e).buffer},uint8array:function(e){return h(e,new Uint8Array(e.length))},nodebuffer:a},n.transformTo=function(e,t){if(t=t||"",!e)return t;n.checkSupport(e);var r=n.getTypeOf(t);return d[r][e](t)},n.resolve=function(e){for(var t=e.split("/"),n=[],r=0;r<t.length;r++){var i=t[r];"."===i||""===i&&0!==r&&r!==t.length-1||(".."===i?n.pop():n.push(i))}return n.join("/")},n.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":r.nodebuffer&&s.isBuffer(e)?"nodebuffer":r.uint8array&&e instanceof Uint8Array?"uint8array":r.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},n.checkSupport=function(e){if(!r[e.toLowerCase()])throw new Error(e+" is not supported by this platform")},n.MAX_VALUE_16BITS=65535,n.MAX_VALUE_32BITS=-1,n.pretty=function(e){var t,n,r="";for(n=0;n<(e||"").length;n++)r+="\\x"+((t=e.charCodeAt(n))<16?"0":"")+t.toString(16).toUpperCase();return r},n.delay=function(e,t,n){setImmediate((function(){e.apply(n||null,t||[])}))},n.inherits=function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n},n.extend=function(){var e,t,n={};for(e=0;e<arguments.length;e++)for(t in arguments[e])Object.prototype.hasOwnProperty.call(arguments[e],t)&&void 0===n[t]&&(n[t]=arguments[e][t]);return n},n.prepareContent=function(e,t,s,a,l){return o.Promise.resolve(t).then((function(e){return r.blob&&(e instanceof Blob||-1!==["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(e)))&&"undefined"!=typeof FileReader?new o.Promise((function(t,n){var r=new FileReader;r.onload=function(e){t(e.target.result)},r.onerror=function(e){n(e.target.error)},r.readAsArrayBuffer(e)})):e})).then((function(t){var u=n.getTypeOf(t);return u?("arraybuffer"===u?t=n.transformTo("uint8array",t):"string"===u&&(l?t=i.decode(t):s&&!0!==a&&(t=function(e){return c(e,r.uint8array?new Uint8Array(e.length):new Array(e.length))}(t))),t):o.Promise.reject(new Error("Can't read the data of '"+e+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))}))}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),s=e("./signature"),o=e("./zipEntry"),a=e("./support");function c(e){this.files=[],this.loadOptions=e}c.prototype={checkSignature:function(e){if(!this.reader.readAndCheckSignature(e)){this.reader.index-=4;var t=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(t)+", expected "+i.pretty(e)+")")}},isSignature:function(e,t){var n=this.reader.index;this.reader.setIndex(e);var r=this.reader.readString(4)===t;return this.reader.setIndex(n),r},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=a.uint8array?"uint8array":"array",n=i.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(n)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,n,r=this.zip64EndOfCentralSize-44;0<r;)e=this.reader.readInt(2),t=this.reader.readInt(4),n=this.reader.readData(t),this.zip64ExtensibleData[e]={id:e,length:t,value:n}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(s.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(s.CENTRAL_FILE_HEADER);)(e=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(s.CENTRAL_DIRECTORY_END);if(e<0)throw this.isSignature(0,s.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(e);var t=e;if(this.checkSignature(s.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(e=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,s.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(s.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var n=this.centralDirOffset+this.centralDirSize;this.zip64&&(n+=20,n+=12+this.zip64EndOfCentralSize);var r=t-n;if(0<r)this.isSignature(t,s.CENTRAL_FILE_HEADER)||(this.reader.zero=r);else if(r<0)throw new Error("Corrupted zip: missing "+Math.abs(r)+" bytes.")},prepareReader:function(e){this.reader=r(e)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(e,t,n){"use strict";var r=e("./reader/readerFor"),i=e("./utils"),s=e("./compressedObject"),o=e("./crc32"),a=e("./utf8"),c=e("./compressions"),l=e("./support");function u(e,t){this.options=e,this.loadOptions=t}u.prototype={isEncrypted:function(){return!(1&~this.bitFlag)},useUTF8:function(){return!(2048&~this.bitFlag)},readLocalPart:function(e){var t,n;if(e.skip(22),this.fileNameLength=e.readInt(2),n=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(n),-1===this.compressedSize||-1===this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(null===(t=function(e){for(var t in c)if(Object.prototype.hasOwnProperty.call(c,t)&&c[t].magic===e)return c[t];return null}(this.compressionMethod)))throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new s(this.compressedSize,this.uncompressedSize,this.crc32,t,e.readData(this.compressedSize))},readCentralPart:function(e){this.versionMadeBy=e.readInt(2),e.skip(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4);var t=e.readInt(2);if(this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");e.skip(t),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0==e&&(this.dosPermissions=63&this.externalFileAttributes),3==e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var e=r(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=e.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=e.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=e.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=e.readInt(4))}},readExtraFields:function(e){var t,n,r,i=e.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});e.index+4<i;)t=e.readInt(2),n=e.readInt(2),r=e.readData(n),this.extraFields[t]={id:t,length:n,value:r};e.setIndex(i)},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=a.utf8decode(this.fileName),this.fileCommentStr=a.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var n=i.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var r=this.findExtraFieldUnicodeComment();if(null!==r)this.fileCommentStr=r;else{var s=i.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(s)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileName)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=r(e.value);return 1!==t.readInt(1)||o(this.fileComment)!==t.readInt(4)?null:a.utf8decode(t.readData(e.length-5))}return null}},t.exports=u},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(e,t,n){"use strict";function r(e,t,n){this.name=e,this.dir=n.dir,this.date=n.date,this.comment=n.comment,this.unixPermissions=n.unixPermissions,this.dosPermissions=n.dosPermissions,this._data=t,this._dataBinary=n.binary,this.options={compression:n.compression,compressionOptions:n.compressionOptions}}var i=e("./stream/StreamHelper"),s=e("./stream/DataWorker"),o=e("./utf8"),a=e("./compressedObject"),c=e("./stream/GenericWorker");r.prototype={internalStream:function(e){var t=null,n="string";try{if(!e)throw new Error("No output type specified.");var r="string"===(n=e.toLowerCase())||"text"===n;"binarystring"!==n&&"text"!==n||(n="string"),t=this._decompressWorker();var s=!this._dataBinary;s&&!r&&(t=t.pipe(new o.Utf8EncodeWorker)),!s&&r&&(t=t.pipe(new o.Utf8DecodeWorker))}catch(e){(t=new c("error")).error(e)}return new i(t,n,"")},async:function(e,t){return this.internalStream(e).accumulate(t)},nodeStream:function(e,t){return this.internalStream(e||"nodebuffer").toNodejsStream(t)},_compressWorker:function(e,t){if(this._data instanceof a&&this._data.compression.magic===e.magic)return this._data.getCompressedWorker();var n=this._decompressWorker();return this._dataBinary||(n=n.pipe(new o.Utf8EncodeWorker)),a.createWorkerFrom(n,e,t)},_decompressWorker:function(){return this._data instanceof a?this._data.getContentWorker():this._data instanceof c?this._data:new s(this._data)}};for(var l=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],u=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},h=0;h<l.length;h++)r.prototype[l[h]]=u;t.exports=r},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(e,t,r){(function(e){"use strict";var n,r,i=e.MutationObserver||e.WebKitMutationObserver;if(i){var s=0,o=new i(u),a=e.document.createTextNode("");o.observe(a,{characterData:!0}),n=function(){a.data=s=++s%2}}else if(e.setImmediate||void 0===e.MessageChannel)n="document"in e&&"onreadystatechange"in e.document.createElement("script")?function(){var t=e.document.createElement("script");t.onreadystatechange=function(){u(),t.onreadystatechange=null,t.parentNode.removeChild(t),t=null},e.document.documentElement.appendChild(t)}:function(){setTimeout(u,0)};else{var c=new e.MessageChannel;c.port1.onmessage=u,n=function(){c.port2.postMessage(0)}}var l=[];function u(){var e,t;r=!0;for(var n=l.length;n;){for(t=l,l=[],e=-1;++e<n;)t[e]();n=l.length}r=!1}t.exports=function(e){1!==l.push(e)||r||n()}}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],37:[function(e,t,n){"use strict";var r=e("immediate");function i(){}var s={},o=["REJECTED"],a=["FULFILLED"],c=["PENDING"];function l(e){if("function"!=typeof e)throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,e!==i&&p(this,e)}function u(e,t,n){this.promise=e,"function"==typeof t&&(this.onFulfilled=t,this.callFulfilled=this.otherCallFulfilled),"function"==typeof n&&(this.onRejected=n,this.callRejected=this.otherCallRejected)}function h(e,t,n){r((function(){var r;try{r=t(n)}catch(r){return s.reject(e,r)}r===e?s.reject(e,new TypeError("Cannot resolve promise with itself")):s.resolve(e,r)}))}function d(e){var t=e&&e.then;if(e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof t)return function(){t.apply(e,arguments)}}function p(e,t){var n=!1;function r(t){n||(n=!0,s.reject(e,t))}function i(t){n||(n=!0,s.resolve(e,t))}var o=f((function(){t(i,r)}));"error"===o.status&&r(o.value)}function f(e,t){var n={};try{n.value=e(t),n.status="success"}catch(e){n.status="error",n.value=e}return n}(t.exports=l).prototype.finally=function(e){if("function"!=typeof e)return this;var t=this.constructor;return this.then((function(n){return t.resolve(e()).then((function(){return n}))}),(function(n){return t.resolve(e()).then((function(){throw n}))}))},l.prototype.catch=function(e){return this.then(null,e)},l.prototype.then=function(e,t){if("function"!=typeof e&&this.state===a||"function"!=typeof t&&this.state===o)return this;var n=new this.constructor(i);return this.state!==c?h(n,this.state===a?e:t,this.outcome):this.queue.push(new u(n,e,t)),n},u.prototype.callFulfilled=function(e){s.resolve(this.promise,e)},u.prototype.otherCallFulfilled=function(e){h(this.promise,this.onFulfilled,e)},u.prototype.callRejected=function(e){s.reject(this.promise,e)},u.prototype.otherCallRejected=function(e){h(this.promise,this.onRejected,e)},s.resolve=function(e,t){var n=f(d,t);if("error"===n.status)return s.reject(e,n.value);var r=n.value;if(r)p(e,r);else{e.state=a,e.outcome=t;for(var i=-1,o=e.queue.length;++i<o;)e.queue[i].callFulfilled(t)}return e},s.reject=function(e,t){e.state=o,e.outcome=t;for(var n=-1,r=e.queue.length;++n<r;)e.queue[n].callRejected(t);return e},l.resolve=function(e){return e instanceof this?e:s.resolve(new this(i),e)},l.reject=function(e){var t=new this(i);return s.reject(t,e)},l.all=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o=new Array(n),a=0,c=-1,l=new this(i);++c<n;)u(e[c],c);return l;function u(e,i){t.resolve(e).then((function(e){o[i]=e,++a!==n||r||(r=!0,s.resolve(l,o))}),(function(e){r||(r=!0,s.reject(l,e))}))}},l.race=function(e){var t=this;if("[object Array]"!==Object.prototype.toString.call(e))return this.reject(new TypeError("must be an array"));var n=e.length,r=!1;if(!n)return this.resolve([]);for(var o,a=-1,c=new this(i);++a<n;)o=e[a],t.resolve(o).then((function(e){r||(r=!0,s.resolve(c,e))}),(function(e){r||(r=!0,s.reject(c,e))}));return c}},{immediate:36}],38:[function(e,t,n){"use strict";var r={};(0,e("./lib/utils/common").assign)(r,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=r},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(e,t,n){"use strict";var r=e("./zlib/deflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/messages"),a=e("./zlib/zstream"),c=Object.prototype.toString,l=0,u=-1,h=0,d=8;function p(e){if(!(this instanceof p))return new p(e);this.options=i.assign({level:u,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:h,to:""},e||{});var t=this.options;t.raw&&0<t.windowBits?t.windowBits=-t.windowBits:t.gzip&&0<t.windowBits&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new a,this.strm.avail_out=0;var n=r.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==l)throw new Error(o[n]);if(t.header&&r.deflateSetHeader(this.strm,t.header),t.dictionary){var f;if(f="string"==typeof t.dictionary?s.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=r.deflateSetDictionary(this.strm,f))!==l)throw new Error(o[n]);this._dict_set=!0}}function f(e,t){var n=new p(t);if(n.push(e,!0),n.err)throw n.msg||o[n.err];return n.result}p.prototype.push=function(e,t){var n,o,a=this.strm,u=this.options.chunkSize;if(this.ended)return!1;o=t===~~t?t:!0===t?4:0,"string"==typeof e?a.input=s.string2buf(e):"[object ArrayBuffer]"===c.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;do{if(0===a.avail_out&&(a.output=new i.Buf8(u),a.next_out=0,a.avail_out=u),1!==(n=r.deflate(a,o))&&n!==l)return this.onEnd(n),!(this.ended=!0);0!==a.avail_out&&(0!==a.avail_in||4!==o&&2!==o)||("string"===this.options.to?this.onData(s.buf2binstring(i.shrinkBuf(a.output,a.next_out))):this.onData(i.shrinkBuf(a.output,a.next_out)))}while((0<a.avail_in||0===a.avail_out)&&1!==n);return 4===o?(n=r.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===l):2!==o||(this.onEnd(l),!(a.avail_out=0))},p.prototype.onData=function(e){this.chunks.push(e)},p.prototype.onEnd=function(e){e===l&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Deflate=p,n.deflate=f,n.deflateRaw=function(e,t){return(t=t||{}).raw=!0,f(e,t)},n.gzip=function(e,t){return(t=t||{}).gzip=!0,f(e,t)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(e,t,n){"use strict";var r=e("./zlib/inflate"),i=e("./utils/common"),s=e("./utils/strings"),o=e("./zlib/constants"),a=e("./zlib/messages"),c=e("./zlib/zstream"),l=e("./zlib/gzheader"),u=Object.prototype.toString;function h(e){if(!(this instanceof h))return new h(e);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&0<=t.windowBits&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(0<=t.windowBits&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),15<t.windowBits&&t.windowBits<48&&!(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var n=r.inflateInit2(this.strm,t.windowBits);if(n!==o.Z_OK)throw new Error(a[n]);this.header=new l,r.inflateGetHeader(this.strm,this.header)}function d(e,t){var n=new h(t);if(n.push(e,!0),n.err)throw n.msg||a[n.err];return n.result}h.prototype.push=function(e,t){var n,a,c,l,h,d,p=this.strm,f=this.options.chunkSize,m=this.options.dictionary,g=!1;if(this.ended)return!1;a=t===~~t?t:!0===t?o.Z_FINISH:o.Z_NO_FLUSH,"string"==typeof e?p.input=s.binstring2buf(e):"[object ArrayBuffer]"===u.call(e)?p.input=new Uint8Array(e):p.input=e,p.next_in=0,p.avail_in=p.input.length;do{if(0===p.avail_out&&(p.output=new i.Buf8(f),p.next_out=0,p.avail_out=f),(n=r.inflate(p,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&m&&(d="string"==typeof m?s.string2buf(m):"[object ArrayBuffer]"===u.call(m)?new Uint8Array(m):m,n=r.inflateSetDictionary(this.strm,d)),n===o.Z_BUF_ERROR&&!0===g&&(n=o.Z_OK,g=!1),n!==o.Z_STREAM_END&&n!==o.Z_OK)return this.onEnd(n),!(this.ended=!0);p.next_out&&(0!==p.avail_out&&n!==o.Z_STREAM_END&&(0!==p.avail_in||a!==o.Z_FINISH&&a!==o.Z_SYNC_FLUSH)||("string"===this.options.to?(c=s.utf8border(p.output,p.next_out),l=p.next_out-c,h=s.buf2string(p.output,c),p.next_out=l,p.avail_out=f-l,l&&i.arraySet(p.output,p.output,c,l,0),this.onData(h)):this.onData(i.shrinkBuf(p.output,p.next_out)))),0===p.avail_in&&0===p.avail_out&&(g=!0)}while((0<p.avail_in||0===p.avail_out)&&n!==o.Z_STREAM_END);return n===o.Z_STREAM_END&&(a=o.Z_FINISH),a===o.Z_FINISH?(n=r.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===o.Z_OK):a!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(p.avail_out=0))},h.prototype.onData=function(e){this.chunks.push(e)},h.prototype.onEnd=function(e){e===o.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},n.Inflate=h,n.inflate=d,n.inflateRaw=function(e,t){return(t=t||{}).raw=!0,d(e,t)},n.ungzip=d},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(e,t,n){"use strict";var r="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;n.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var n=t.shift();if(n){if("object"!=typeof n)throw new TypeError(n+"must be non-object");for(var r in n)n.hasOwnProperty(r)&&(e[r]=n[r])}}return e},n.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,n,r,i){if(t.subarray&&e.subarray)e.set(t.subarray(n,n+r),i);else for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){var t,n,r,i,s,o;for(t=r=0,n=e.length;t<n;t++)r+=e[t].length;for(o=new Uint8Array(r),t=i=0,n=e.length;t<n;t++)s=e[t],o.set(s,i),i+=s.length;return o}},s={arraySet:function(e,t,n,r,i){for(var s=0;s<r;s++)e[i+s]=t[n+s]},flattenChunks:function(e){return[].concat.apply([],e)}};n.setTyped=function(e){e?(n.Buf8=Uint8Array,n.Buf16=Uint16Array,n.Buf32=Int32Array,n.assign(n,i)):(n.Buf8=Array,n.Buf16=Array,n.Buf32=Array,n.assign(n,s))},n.setTyped(r)},{}],42:[function(e,t,n){"use strict";var r=e("./common"),i=!0,s=!0;try{String.fromCharCode.apply(null,[0])}catch(e){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){s=!1}for(var o=new r.Buf8(256),a=0;a<256;a++)o[a]=252<=a?6:248<=a?5:240<=a?4:224<=a?3:192<=a?2:1;function c(e,t){if(t<65537&&(e.subarray&&s||!e.subarray&&i))return String.fromCharCode.apply(null,r.shrinkBuf(e,t));for(var n="",o=0;o<t;o++)n+=String.fromCharCode(e[o]);return n}o[254]=o[254]=1,n.string2buf=function(e){var t,n,i,s,o,a=e.length,c=0;for(s=0;s<a;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),c+=n<128?1:n<2048?2:n<65536?3:4;for(t=new r.Buf8(c),s=o=0;o<c;s++)55296==(64512&(n=e.charCodeAt(s)))&&s+1<a&&56320==(64512&(i=e.charCodeAt(s+1)))&&(n=65536+(n-55296<<10)+(i-56320),s++),n<128?t[o++]=n:(n<2048?t[o++]=192|n>>>6:(n<65536?t[o++]=224|n>>>12:(t[o++]=240|n>>>18,t[o++]=128|n>>>12&63),t[o++]=128|n>>>6&63),t[o++]=128|63&n);return t},n.buf2binstring=function(e){return c(e,e.length)},n.binstring2buf=function(e){for(var t=new r.Buf8(e.length),n=0,i=t.length;n<i;n++)t[n]=e.charCodeAt(n);return t},n.buf2string=function(e,t){var n,r,i,s,a=t||e.length,l=new Array(2*a);for(n=r=0;n<a;)if((i=e[n++])<128)l[r++]=i;else if(4<(s=o[i]))l[r++]=65533,n+=s-1;else{for(i&=2===s?31:3===s?15:7;1<s&&n<a;)i=i<<6|63&e[n++],s--;1<s?l[r++]=65533:i<65536?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return c(l,r)},n.utf8border=function(e,t){var n;for((t=t||e.length)>e.length&&(t=e.length),n=t-1;0<=n&&128==(192&e[n]);)n--;return n<0||0===n?t:n+o[e[n]]>t?n:t}},{"./common":41}],43:[function(e,t,n){"use strict";t.exports=function(e,t,n,r){for(var i=65535&e,s=e>>>16&65535,o=0;0!==n;){for(n-=o=2e3<n?2e3:n;s=s+(i=i+t[r++]|0)|0,--o;);i%=65521,s%=65521}return i|s<<16}},{}],44:[function(e,t,n){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(e,t,n){"use strict";var r=function(){for(var e,t=[],n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;t[n]=e}return t}();t.exports=function(e,t,n,i){var s=r,o=i+n;e^=-1;for(var a=i;a<o;a++)e=e>>>8^s[255&(e^t[a])];return-1^e}},{}],46:[function(e,t,n){"use strict";var r,i=e("../utils/common"),s=e("./trees"),o=e("./adler32"),a=e("./crc32"),c=e("./messages"),l=0,u=4,h=0,d=-2,p=-1,f=4,m=2,g=8,A=9,y=286,_=30,v=19,b=2*y+1,x=15,w=3,E=258,T=E+w+1,S=42,M=113,C=1,I=2,R=3,B=4;function P(e,t){return e.msg=c[t],t}function D(e){return(e<<1)-(4<e?9:0)}function O(e){for(var t=e.length;0<=--t;)e[t]=0}function L(e){var t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(i.arraySet(e.output,t.pending_buf,t.pending_out,n,e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))}function N(e,t){s._tr_flush_block(e,0<=e.block_start?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,L(e.strm)}function F(e,t){e.pending_buf[e.pending++]=t}function U(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function k(e,t){var n,r,i=e.max_chain_length,s=e.strstart,o=e.prev_length,a=e.nice_match,c=e.strstart>e.w_size-T?e.strstart-(e.w_size-T):0,l=e.window,u=e.w_mask,h=e.prev,d=e.strstart+E,p=l[s+o-1],f=l[s+o];e.prev_length>=e.good_match&&(i>>=2),a>e.lookahead&&(a=e.lookahead);do{if(l[(n=t)+o]===f&&l[n+o-1]===p&&l[n]===l[s]&&l[++n]===l[s+1]){s+=2,n++;do{}while(l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&l[++s]===l[++n]&&s<d);if(r=E-(d-s),s=d-E,o<r){if(e.match_start=t,a<=(o=r))break;p=l[s+o-1],f=l[s+o]}}}while((t=h[t&u])>c&&0!=--i);return o<=e.lookahead?o:e.lookahead}function z(e){var t,n,r,s,c,l,u,h,d,p,f=e.w_size;do{if(s=e.window_size-e.lookahead-e.strstart,e.strstart>=f+(f-T)){for(i.arraySet(e.window,e.window,f,f,0),e.match_start-=f,e.strstart-=f,e.block_start-=f,t=n=e.hash_size;r=e.head[--t],e.head[t]=f<=r?r-f:0,--n;);for(t=n=f;r=e.prev[--t],e.prev[t]=f<=r?r-f:0,--n;);s+=f}if(0===e.strm.avail_in)break;if(l=e.strm,u=e.window,h=e.strstart+e.lookahead,p=void 0,(d=s)<(p=l.avail_in)&&(p=d),n=0===p?0:(l.avail_in-=p,i.arraySet(u,l.input,l.next_in,p,h),1===l.state.wrap?l.adler=o(l.adler,u,p,h):2===l.state.wrap&&(l.adler=a(l.adler,u,p,h)),l.next_in+=p,l.total_in+=p,p),e.lookahead+=n,e.lookahead+e.insert>=w)for(c=e.strstart-e.insert,e.ins_h=e.window[c],e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[c+w-1])&e.hash_mask,e.prev[c&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=c,c++,e.insert--,!(e.lookahead+e.insert<w)););}while(e.lookahead<T&&0!==e.strm.avail_in)}function G(e,t){for(var n,r;;){if(e.lookahead<T){if(z(e),e.lookahead<T&&t===l)return C;if(0===e.lookahead)break}if(n=0,e.lookahead>=w&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-T&&(e.match_length=k(e,n)),e.match_length>=w)if(r=s._tr_tally(e,e.strstart-e.match_start,e.match_length-w),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=w){for(e.match_length--;e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart,0!=--e.match_length;);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else r=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(N(e,!1),0===e.strm.avail_out))return C}return e.insert=e.strstart<w-1?e.strstart:w-1,t===u?(N(e,!0),0===e.strm.avail_out?R:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?C:I}function j(e,t){for(var n,r,i;;){if(e.lookahead<T){if(z(e),e.lookahead<T&&t===l)return C;if(0===e.lookahead)break}if(n=0,e.lookahead>=w&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=w-1,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-T&&(e.match_length=k(e,n),e.match_length<=5&&(1===e.strategy||e.match_length===w&&4096<e.strstart-e.match_start)&&(e.match_length=w-1)),e.prev_length>=w&&e.match_length<=e.prev_length){for(i=e.strstart+e.lookahead-w,r=s._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-w),e.lookahead-=e.prev_length-1,e.prev_length-=2;++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+w-1])&e.hash_mask,n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!=--e.prev_length;);if(e.match_available=0,e.match_length=w-1,e.strstart++,r&&(N(e,!1),0===e.strm.avail_out))return C}else if(e.match_available){if((r=s._tr_tally(e,0,e.window[e.strstart-1]))&&N(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return C}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=s._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<w-1?e.strstart:w-1,t===u?(N(e,!0),0===e.strm.avail_out?R:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?C:I}function V(e,t,n,r,i){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=i}function Q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=g,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*b),this.dyn_dtree=new i.Buf16(2*(2*_+1)),this.bl_tree=new i.Buf16(2*(2*v+1)),O(this.dyn_ltree),O(this.dyn_dtree),O(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(x+1),this.heap=new i.Buf16(2*y+1),O(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*y+1),O(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function H(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=m,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?S:M,e.adler=2===t.wrap?0:1,t.last_flush=l,s._tr_init(t),h):P(e,d)}function W(e){var t=H(e);return t===h&&function(e){e.window_size=2*e.w_size,O(e.head),e.max_lazy_match=r[e.level].max_lazy,e.good_match=r[e.level].good_length,e.nice_match=r[e.level].nice_length,e.max_chain_length=r[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=w-1,e.match_available=0,e.ins_h=0}(e.state),t}function q(e,t,n,r,s,o){if(!e)return d;var a=1;if(t===p&&(t=6),r<0?(a=0,r=-r):15<r&&(a=2,r-=16),s<1||A<s||n!==g||r<8||15<r||t<0||9<t||o<0||f<o)return P(e,d);8===r&&(r=9);var c=new Q;return(e.state=c).strm=e,c.wrap=a,c.gzhead=null,c.w_bits=r,c.w_size=1<<c.w_bits,c.w_mask=c.w_size-1,c.hash_bits=s+7,c.hash_size=1<<c.hash_bits,c.hash_mask=c.hash_size-1,c.hash_shift=~~((c.hash_bits+w-1)/w),c.window=new i.Buf8(2*c.w_size),c.head=new i.Buf16(c.hash_size),c.prev=new i.Buf16(c.w_size),c.lit_bufsize=1<<s+6,c.pending_buf_size=4*c.lit_bufsize,c.pending_buf=new i.Buf8(c.pending_buf_size),c.d_buf=1*c.lit_bufsize,c.l_buf=3*c.lit_bufsize,c.level=t,c.strategy=o,c.method=n,W(e)}r=[new V(0,0,0,0,(function(e,t){var n=65535;for(n>e.pending_buf_size-5&&(n=e.pending_buf_size-5);;){if(e.lookahead<=1){if(z(e),0===e.lookahead&&t===l)return C;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var r=e.block_start+n;if((0===e.strstart||e.strstart>=r)&&(e.lookahead=e.strstart-r,e.strstart=r,N(e,!1),0===e.strm.avail_out))return C;if(e.strstart-e.block_start>=e.w_size-T&&(N(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===u?(N(e,!0),0===e.strm.avail_out?R:B):(e.strstart>e.block_start&&(N(e,!1),e.strm.avail_out),C)})),new V(4,4,8,4,G),new V(4,5,16,8,G),new V(4,6,32,32,G),new V(4,4,16,16,j),new V(8,16,32,32,j),new V(8,16,128,128,j),new V(8,32,128,256,j),new V(32,128,258,1024,j),new V(32,258,258,4096,j)],n.deflateInit=function(e,t){return q(e,t,g,15,8,0)},n.deflateInit2=q,n.deflateReset=W,n.deflateResetKeep=H,n.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?d:(e.state.gzhead=t,h):d},n.deflate=function(e,t){var n,i,o,c;if(!e||!e.state||5<t||t<0)return e?P(e,d):d;if(i=e.state,!e.output||!e.input&&0!==e.avail_in||666===i.status&&t!==u)return P(e,0===e.avail_out?-5:d);if(i.strm=e,n=i.last_flush,i.last_flush=t,i.status===S)if(2===i.wrap)e.adler=0,F(i,31),F(i,139),F(i,8),i.gzhead?(F(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),F(i,255&i.gzhead.time),F(i,i.gzhead.time>>8&255),F(i,i.gzhead.time>>16&255),F(i,i.gzhead.time>>24&255),F(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),F(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(F(i,255&i.gzhead.extra.length),F(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(e.adler=a(e.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=69):(F(i,0),F(i,0),F(i,0),F(i,0),F(i,0),F(i,9===i.level?2:2<=i.strategy||i.level<2?4:0),F(i,3),i.status=M);else{var p=g+(i.w_bits-8<<4)<<8;p|=(2<=i.strategy||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(p|=32),p+=31-p%31,i.status=M,U(i,p),0!==i.strstart&&(U(i,e.adler>>>16),U(i,65535&e.adler)),e.adler=1}if(69===i.status)if(i.gzhead.extra){for(o=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),L(e),o=i.pending,i.pending!==i.pending_buf_size));)F(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=73)}else i.status=73;if(73===i.status)if(i.gzhead.name){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),L(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,F(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.gzindex=0,i.status=91)}else i.status=91;if(91===i.status)if(i.gzhead.comment){o=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),L(e),o=i.pending,i.pending===i.pending_buf_size)){c=1;break}c=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,F(i,c)}while(0!==c);i.gzhead.hcrc&&i.pending>o&&(e.adler=a(e.adler,i.pending_buf,i.pending-o,o)),0===c&&(i.status=103)}else i.status=103;if(103===i.status&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&L(e),i.pending+2<=i.pending_buf_size&&(F(i,255&e.adler),F(i,e.adler>>8&255),e.adler=0,i.status=M)):i.status=M),0!==i.pending){if(L(e),0===e.avail_out)return i.last_flush=-1,h}else if(0===e.avail_in&&D(t)<=D(n)&&t!==u)return P(e,-5);if(666===i.status&&0!==e.avail_in)return P(e,-5);if(0!==e.avail_in||0!==i.lookahead||t!==l&&666!==i.status){var f=2===i.strategy?function(e,t){for(var n;;){if(0===e.lookahead&&(z(e),0===e.lookahead)){if(t===l)return C;break}if(e.match_length=0,n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(N(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===u?(N(e,!0),0===e.strm.avail_out?R:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?C:I}(i,t):3===i.strategy?function(e,t){for(var n,r,i,o,a=e.window;;){if(e.lookahead<=E){if(z(e),e.lookahead<=E&&t===l)return C;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=w&&0<e.strstart&&(r=a[i=e.strstart-1])===a[++i]&&r===a[++i]&&r===a[++i]){o=e.strstart+E;do{}while(r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&r===a[++i]&&i<o);e.match_length=E-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=w?(n=s._tr_tally(e,1,e.match_length-w),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=s._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(N(e,!1),0===e.strm.avail_out))return C}return e.insert=0,t===u?(N(e,!0),0===e.strm.avail_out?R:B):e.last_lit&&(N(e,!1),0===e.strm.avail_out)?C:I}(i,t):r[i.level].func(i,t);if(f!==R&&f!==B||(i.status=666),f===C||f===R)return 0===e.avail_out&&(i.last_flush=-1),h;if(f===I&&(1===t?s._tr_align(i):5!==t&&(s._tr_stored_block(i,0,0,!1),3===t&&(O(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),L(e),0===e.avail_out))return i.last_flush=-1,h}return t!==u?h:i.wrap<=0?1:(2===i.wrap?(F(i,255&e.adler),F(i,e.adler>>8&255),F(i,e.adler>>16&255),F(i,e.adler>>24&255),F(i,255&e.total_in),F(i,e.total_in>>8&255),F(i,e.total_in>>16&255),F(i,e.total_in>>24&255)):(U(i,e.adler>>>16),U(i,65535&e.adler)),L(e),0<i.wrap&&(i.wrap=-i.wrap),0!==i.pending?h:1)},n.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==S&&69!==t&&73!==t&&91!==t&&103!==t&&t!==M&&666!==t?P(e,d):(e.state=null,t===M?P(e,-3):h):d},n.deflateSetDictionary=function(e,t){var n,r,s,a,c,l,u,p,f=t.length;if(!e||!e.state)return d;if(2===(a=(n=e.state).wrap)||1===a&&n.status!==S||n.lookahead)return d;for(1===a&&(e.adler=o(e.adler,t,f,0)),n.wrap=0,f>=n.w_size&&(0===a&&(O(n.head),n.strstart=0,n.block_start=0,n.insert=0),p=new i.Buf8(n.w_size),i.arraySet(p,t,f-n.w_size,n.w_size,0),t=p,f=n.w_size),c=e.avail_in,l=e.next_in,u=e.input,e.avail_in=f,e.next_in=0,e.input=t,z(n);n.lookahead>=w;){for(r=n.strstart,s=n.lookahead-(w-1);n.ins_h=(n.ins_h<<n.hash_shift^n.window[r+w-1])&n.hash_mask,n.prev[r&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=r,r++,--s;);n.strstart=r,n.lookahead=w-1,z(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=w-1,n.match_available=0,e.next_in=l,e.input=u,e.avail_in=c,n.wrap=a,h},n.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(e,t,n){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(e,t,n){"use strict";t.exports=function(e,t){var n,r,i,s,o,a,c,l,u,h,d,p,f,m,g,A,y,_,v,b,x,w,E,T,S;n=e.state,r=e.next_in,T=e.input,i=r+(e.avail_in-5),s=e.next_out,S=e.output,o=s-(t-e.avail_out),a=s+(e.avail_out-257),c=n.dmax,l=n.wsize,u=n.whave,h=n.wnext,d=n.window,p=n.hold,f=n.bits,m=n.lencode,g=n.distcode,A=(1<<n.lenbits)-1,y=(1<<n.distbits)-1;e:do{f<15&&(p+=T[r++]<<f,f+=8,p+=T[r++]<<f,f+=8),_=m[p&A];t:for(;;){if(p>>>=v=_>>>24,f-=v,0==(v=_>>>16&255))S[s++]=65535&_;else{if(!(16&v)){if(!(64&v)){_=m[(65535&_)+(p&(1<<v)-1)];continue t}if(32&v){n.mode=12;break e}e.msg="invalid literal/length code",n.mode=30;break e}b=65535&_,(v&=15)&&(f<v&&(p+=T[r++]<<f,f+=8),b+=p&(1<<v)-1,p>>>=v,f-=v),f<15&&(p+=T[r++]<<f,f+=8,p+=T[r++]<<f,f+=8),_=g[p&y];n:for(;;){if(p>>>=v=_>>>24,f-=v,!(16&(v=_>>>16&255))){if(!(64&v)){_=g[(65535&_)+(p&(1<<v)-1)];continue n}e.msg="invalid distance code",n.mode=30;break e}if(x=65535&_,f<(v&=15)&&(p+=T[r++]<<f,(f+=8)<v&&(p+=T[r++]<<f,f+=8)),c<(x+=p&(1<<v)-1)){e.msg="invalid distance too far back",n.mode=30;break e}if(p>>>=v,f-=v,(v=s-o)<x){if(u<(v=x-v)&&n.sane){e.msg="invalid distance too far back",n.mode=30;break e}if(E=d,(w=0)===h){if(w+=l-v,v<b){for(b-=v;S[s++]=d[w++],--v;);w=s-x,E=S}}else if(h<v){if(w+=l+h-v,(v-=h)<b){for(b-=v;S[s++]=d[w++],--v;);if(w=0,h<b){for(b-=v=h;S[s++]=d[w++],--v;);w=s-x,E=S}}}else if(w+=h-v,v<b){for(b-=v;S[s++]=d[w++],--v;);w=s-x,E=S}for(;2<b;)S[s++]=E[w++],S[s++]=E[w++],S[s++]=E[w++],b-=3;b&&(S[s++]=E[w++],1<b&&(S[s++]=E[w++]))}else{for(w=s-x;S[s++]=S[w++],S[s++]=S[w++],S[s++]=S[w++],2<(b-=3););b&&(S[s++]=S[w++],1<b&&(S[s++]=S[w++]))}break}}break}}while(r<i&&s<a);r-=b=f>>3,p&=(1<<(f-=b<<3))-1,e.next_in=r,e.next_out=s,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=s<a?a-s+257:257-(s-a),n.hold=p,n.bits=f}},{}],49:[function(e,t,n){"use strict";var r=e("../utils/common"),i=e("./adler32"),s=e("./crc32"),o=e("./inffast"),a=e("./inftrees"),c=1,l=2,u=0,h=-2,d=1,p=852,f=592;function m(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function g(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new r.Buf16(320),this.work=new r.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function A(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=d,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new r.Buf32(p),t.distcode=t.distdyn=new r.Buf32(f),t.sane=1,t.back=-1,u):h}function y(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,A(e)):h}function _(e,t){var n,r;return e&&e.state?(r=e.state,t<0?(n=0,t=-t):(n=1+(t>>4),t<48&&(t&=15)),t&&(t<8||15<t)?h:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,y(e))):h}function v(e,t){var n,r;return e?(r=new g,(e.state=r).window=null,(n=_(e,t))!==u&&(e.state=null),n):h}var b,x,w=!0;function E(e){if(w){var t;for(b=new r.Buf32(512),x=new r.Buf32(32),t=0;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(a(c,e.lens,0,288,b,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;a(l,e.lens,0,32,x,0,e.work,{bits:5}),w=!1}e.lencode=b,e.lenbits=9,e.distcode=x,e.distbits=5}function T(e,t,n,i){var s,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new r.Buf8(o.wsize)),i>=o.wsize?(r.arraySet(o.window,t,n-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):(i<(s=o.wsize-o.wnext)&&(s=i),r.arraySet(o.window,t,n-i,s,o.wnext),(i-=s)?(r.arraySet(o.window,t,n-i,i,0),o.wnext=i,o.whave=o.wsize):(o.wnext+=s,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=s))),0}n.inflateReset=y,n.inflateReset2=_,n.inflateResetKeep=A,n.inflateInit=function(e){return v(e,15)},n.inflateInit2=v,n.inflate=function(e,t){var n,p,f,g,A,y,_,v,b,x,w,S,M,C,I,R,B,P,D,O,L,N,F,U,k=0,z=new r.Buf8(4),G=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return h;12===(n=e.state).mode&&(n.mode=13),A=e.next_out,f=e.output,_=e.avail_out,g=e.next_in,p=e.input,y=e.avail_in,v=n.hold,b=n.bits,x=y,w=_,N=u;e:for(;;)switch(n.mode){case d:if(0===n.wrap){n.mode=13;break}for(;b<16;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if(2&n.wrap&&35615===v){z[n.check=0]=255&v,z[1]=v>>>8&255,n.check=s(n.check,z,2,0),b=v=0,n.mode=2;break}if(n.flags=0,n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&v)<<8)+(v>>8))%31){e.msg="incorrect header check",n.mode=30;break}if(8!=(15&v)){e.msg="unknown compression method",n.mode=30;break}if(b-=4,L=8+(15&(v>>>=4)),0===n.wbits)n.wbits=L;else if(L>n.wbits){e.msg="invalid window size",n.mode=30;break}n.dmax=1<<L,e.adler=n.check=1,n.mode=512&v?10:12,b=v=0;break;case 2:for(;b<16;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if(n.flags=v,8!=(255&n.flags)){e.msg="unknown compression method",n.mode=30;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=30;break}n.head&&(n.head.text=v>>8&1),512&n.flags&&(z[0]=255&v,z[1]=v>>>8&255,n.check=s(n.check,z,2,0)),b=v=0,n.mode=3;case 3:for(;b<32;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}n.head&&(n.head.time=v),512&n.flags&&(z[0]=255&v,z[1]=v>>>8&255,z[2]=v>>>16&255,z[3]=v>>>24&255,n.check=s(n.check,z,4,0)),b=v=0,n.mode=4;case 4:for(;b<16;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}n.head&&(n.head.xflags=255&v,n.head.os=v>>8),512&n.flags&&(z[0]=255&v,z[1]=v>>>8&255,n.check=s(n.check,z,2,0)),b=v=0,n.mode=5;case 5:if(1024&n.flags){for(;b<16;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}n.length=v,n.head&&(n.head.extra_len=v),512&n.flags&&(z[0]=255&v,z[1]=v>>>8&255,n.check=s(n.check,z,2,0)),b=v=0}else n.head&&(n.head.extra=null);n.mode=6;case 6:if(1024&n.flags&&(y<(S=n.length)&&(S=y),S&&(n.head&&(L=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Array(n.head.extra_len)),r.arraySet(n.head.extra,p,g,S,L)),512&n.flags&&(n.check=s(n.check,p,S,g)),y-=S,g+=S,n.length-=S),n.length))break e;n.length=0,n.mode=7;case 7:if(2048&n.flags){if(0===y)break e;for(S=0;L=p[g+S++],n.head&&L&&n.length<65536&&(n.head.name+=String.fromCharCode(L)),L&&S<y;);if(512&n.flags&&(n.check=s(n.check,p,S,g)),y-=S,g+=S,L)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=8;case 8:if(4096&n.flags){if(0===y)break e;for(S=0;L=p[g+S++],n.head&&L&&n.length<65536&&(n.head.comment+=String.fromCharCode(L)),L&&S<y;);if(512&n.flags&&(n.check=s(n.check,p,S,g)),y-=S,g+=S,L)break e}else n.head&&(n.head.comment=null);n.mode=9;case 9:if(512&n.flags){for(;b<16;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if(v!==(65535&n.check)){e.msg="header crc mismatch",n.mode=30;break}b=v=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=12;break;case 10:for(;b<32;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}e.adler=n.check=m(v),b=v=0,n.mode=11;case 11:if(0===n.havedict)return e.next_out=A,e.avail_out=_,e.next_in=g,e.avail_in=y,n.hold=v,n.bits=b,2;e.adler=n.check=1,n.mode=12;case 12:if(5===t||6===t)break e;case 13:if(n.last){v>>>=7&b,b-=7&b,n.mode=27;break}for(;b<3;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}switch(n.last=1&v,b-=1,3&(v>>>=1)){case 0:n.mode=14;break;case 1:if(E(n),n.mode=20,6!==t)break;v>>>=2,b-=2;break e;case 2:n.mode=17;break;case 3:e.msg="invalid block type",n.mode=30}v>>>=2,b-=2;break;case 14:for(v>>>=7&b,b-=7&b;b<32;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if((65535&v)!=(v>>>16^65535)){e.msg="invalid stored block lengths",n.mode=30;break}if(n.length=65535&v,b=v=0,n.mode=15,6===t)break e;case 15:n.mode=16;case 16:if(S=n.length){if(y<S&&(S=y),_<S&&(S=_),0===S)break e;r.arraySet(f,p,g,S,A),y-=S,g+=S,_-=S,A+=S,n.length-=S;break}n.mode=12;break;case 17:for(;b<14;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if(n.nlen=257+(31&v),v>>>=5,b-=5,n.ndist=1+(31&v),v>>>=5,b-=5,n.ncode=4+(15&v),v>>>=4,b-=4,286<n.nlen||30<n.ndist){e.msg="too many length or distance symbols",n.mode=30;break}n.have=0,n.mode=18;case 18:for(;n.have<n.ncode;){for(;b<3;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}n.lens[G[n.have++]]=7&v,v>>>=3,b-=3}for(;n.have<19;)n.lens[G[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,F={bits:n.lenbits},N=a(0,n.lens,0,19,n.lencode,0,n.work,F),n.lenbits=F.bits,N){e.msg="invalid code lengths set",n.mode=30;break}n.have=0,n.mode=19;case 19:for(;n.have<n.nlen+n.ndist;){for(;R=(k=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,B=65535&k,!((I=k>>>24)<=b);){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if(B<16)v>>>=I,b-=I,n.lens[n.have++]=B;else{if(16===B){for(U=I+2;b<U;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if(v>>>=I,b-=I,0===n.have){e.msg="invalid bit length repeat",n.mode=30;break}L=n.lens[n.have-1],S=3+(3&v),v>>>=2,b-=2}else if(17===B){for(U=I+3;b<U;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}b-=I,L=0,S=3+(7&(v>>>=I)),v>>>=3,b-=3}else{for(U=I+7;b<U;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}b-=I,L=0,S=11+(127&(v>>>=I)),v>>>=7,b-=7}if(n.have+S>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=30;break}for(;S--;)n.lens[n.have++]=L}}if(30===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=30;break}if(n.lenbits=9,F={bits:n.lenbits},N=a(c,n.lens,0,n.nlen,n.lencode,0,n.work,F),n.lenbits=F.bits,N){e.msg="invalid literal/lengths set",n.mode=30;break}if(n.distbits=6,n.distcode=n.distdyn,F={bits:n.distbits},N=a(l,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,F),n.distbits=F.bits,N){e.msg="invalid distances set",n.mode=30;break}if(n.mode=20,6===t)break e;case 20:n.mode=21;case 21:if(6<=y&&258<=_){e.next_out=A,e.avail_out=_,e.next_in=g,e.avail_in=y,n.hold=v,n.bits=b,o(e,w),A=e.next_out,f=e.output,_=e.avail_out,g=e.next_in,p=e.input,y=e.avail_in,v=n.hold,b=n.bits,12===n.mode&&(n.back=-1);break}for(n.back=0;R=(k=n.lencode[v&(1<<n.lenbits)-1])>>>16&255,B=65535&k,!((I=k>>>24)<=b);){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if(R&&!(240&R)){for(P=I,D=R,O=B;R=(k=n.lencode[O+((v&(1<<P+D)-1)>>P)])>>>16&255,B=65535&k,!(P+(I=k>>>24)<=b);){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}v>>>=P,b-=P,n.back+=P}if(v>>>=I,b-=I,n.back+=I,n.length=B,0===R){n.mode=26;break}if(32&R){n.back=-1,n.mode=12;break}if(64&R){e.msg="invalid literal/length code",n.mode=30;break}n.extra=15&R,n.mode=22;case 22:if(n.extra){for(U=n.extra;b<U;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}n.length+=v&(1<<n.extra)-1,v>>>=n.extra,b-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=23;case 23:for(;R=(k=n.distcode[v&(1<<n.distbits)-1])>>>16&255,B=65535&k,!((I=k>>>24)<=b);){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if(!(240&R)){for(P=I,D=R,O=B;R=(k=n.distcode[O+((v&(1<<P+D)-1)>>P)])>>>16&255,B=65535&k,!(P+(I=k>>>24)<=b);){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}v>>>=P,b-=P,n.back+=P}if(v>>>=I,b-=I,n.back+=I,64&R){e.msg="invalid distance code",n.mode=30;break}n.offset=B,n.extra=15&R,n.mode=24;case 24:if(n.extra){for(U=n.extra;b<U;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}n.offset+=v&(1<<n.extra)-1,v>>>=n.extra,b-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=30;break}n.mode=25;case 25:if(0===_)break e;if(S=w-_,n.offset>S){if((S=n.offset-S)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=30;break}M=S>n.wnext?(S-=n.wnext,n.wsize-S):n.wnext-S,S>n.length&&(S=n.length),C=n.window}else C=f,M=A-n.offset,S=n.length;for(_<S&&(S=_),_-=S,n.length-=S;f[A++]=C[M++],--S;);0===n.length&&(n.mode=21);break;case 26:if(0===_)break e;f[A++]=n.length,_--,n.mode=21;break;case 27:if(n.wrap){for(;b<32;){if(0===y)break e;y--,v|=p[g++]<<b,b+=8}if(w-=_,e.total_out+=w,n.total+=w,w&&(e.adler=n.check=n.flags?s(n.check,f,w,A-w):i(n.check,f,w,A-w)),w=_,(n.flags?v:m(v))!==n.check){e.msg="incorrect data check",n.mode=30;break}b=v=0}n.mode=28;case 28:if(n.wrap&&n.flags){for(;b<32;){if(0===y)break e;y--,v+=p[g++]<<b,b+=8}if(v!==(4294967295&n.total)){e.msg="incorrect length check",n.mode=30;break}b=v=0}n.mode=29;case 29:N=1;break e;case 30:N=-3;break e;case 31:return-4;default:return h}return e.next_out=A,e.avail_out=_,e.next_in=g,e.avail_in=y,n.hold=v,n.bits=b,(n.wsize||w!==e.avail_out&&n.mode<30&&(n.mode<27||4!==t))&&T(e,e.output,e.next_out,w-e.avail_out)?(n.mode=31,-4):(x-=e.avail_in,w-=e.avail_out,e.total_in+=x,e.total_out+=w,n.total+=w,n.wrap&&w&&(e.adler=n.check=n.flags?s(n.check,f,w,e.next_out-w):i(n.check,f,w,e.next_out-w)),e.data_type=n.bits+(n.last?64:0)+(12===n.mode?128:0)+(20===n.mode||15===n.mode?256:0),(0==x&&0===w||4===t)&&N===u&&(N=-5),N)},n.inflateEnd=function(e){if(!e||!e.state)return h;var t=e.state;return t.window&&(t.window=null),e.state=null,u},n.inflateGetHeader=function(e,t){var n;return e&&e.state&&2&(n=e.state).wrap?((n.head=t).done=!1,u):h},n.inflateSetDictionary=function(e,t){var n,r=t.length;return e&&e.state?0!==(n=e.state).wrap&&11!==n.mode?h:11===n.mode&&i(1,t,r,0)!==n.check?-3:T(e,t,r,r)?(n.mode=31,-4):(n.havedict=1,u):h},n.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(e,t,n){"use strict";var r=e("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],s=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],a=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,n,c,l,u,h,d){var p,f,m,g,A,y,_,v,b,x=d.bits,w=0,E=0,T=0,S=0,M=0,C=0,I=0,R=0,B=0,P=0,D=null,O=0,L=new r.Buf16(16),N=new r.Buf16(16),F=null,U=0;for(w=0;w<=15;w++)L[w]=0;for(E=0;E<c;E++)L[t[n+E]]++;for(M=x,S=15;1<=S&&0===L[S];S--);if(S<M&&(M=S),0===S)return l[u++]=20971520,l[u++]=20971520,d.bits=1,0;for(T=1;T<S&&0===L[T];T++);for(M<T&&(M=T),w=R=1;w<=15;w++)if(R<<=1,(R-=L[w])<0)return-1;if(0<R&&(0===e||1!==S))return-1;for(N[1]=0,w=1;w<15;w++)N[w+1]=N[w]+L[w];for(E=0;E<c;E++)0!==t[n+E]&&(h[N[t[n+E]]++]=E);if(y=0===e?(D=F=h,19):1===e?(D=i,O-=257,F=s,U-=257,256):(D=o,F=a,-1),w=T,A=u,I=E=P=0,m=-1,g=(B=1<<(C=M))-1,1===e&&852<B||2===e&&592<B)return 1;for(;;){for(_=w-I,b=h[E]<y?(v=0,h[E]):h[E]>y?(v=F[U+h[E]],D[O+h[E]]):(v=96,0),p=1<<w-I,T=f=1<<C;l[A+(P>>I)+(f-=p)]=_<<24|v<<16|b,0!==f;);for(p=1<<w-1;P&p;)p>>=1;if(0!==p?(P&=p-1,P+=p):P=0,E++,0==--L[w]){if(w===S)break;w=t[n+h[E]]}if(M<w&&(P&g)!==m){for(0===I&&(I=M),A+=T,R=1<<(C=w-I);C+I<S&&!((R-=L[C+I])<=0);)C++,R<<=1;if(B+=1<<C,1===e&&852<B||2===e&&592<B)return 1;l[m=P&g]=M<<24|C<<16|A-u}}return 0!==P&&(l[A+P]=w-I<<24|64<<16),d.bits=M,0}},{"../utils/common":41}],51:[function(e,t,n){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(e,t,n){"use strict";var r=e("../utils/common"),i=0,s=1;function o(e){for(var t=e.length;0<=--t;)e[t]=0}var a=0,c=29,l=256,u=l+1+c,h=30,d=19,p=2*u+1,f=15,m=16,g=7,A=256,y=16,_=17,v=18,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],x=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],w=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],E=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],T=new Array(2*(u+2));o(T);var S=new Array(2*h);o(S);var M=new Array(512);o(M);var C=new Array(256);o(C);var I=new Array(c);o(I);var R,B,P,D=new Array(h);function O(e,t,n,r,i){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}function L(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function N(e){return e<256?M[e]:M[256+(e>>>7)]}function F(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function U(e,t,n){e.bi_valid>m-n?(e.bi_buf|=t<<e.bi_valid&65535,F(e,e.bi_buf),e.bi_buf=t>>m-e.bi_valid,e.bi_valid+=n-m):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)}function k(e,t,n){U(e,n[2*t],n[2*t+1])}function z(e,t){for(var n=0;n|=1&e,e>>>=1,n<<=1,0<--t;);return n>>>1}function G(e,t,n){var r,i,s=new Array(f+1),o=0;for(r=1;r<=f;r++)s[r]=o=o+n[r-1]<<1;for(i=0;i<=t;i++){var a=e[2*i+1];0!==a&&(e[2*i]=z(s[a]++,a))}}function j(e){var t;for(t=0;t<u;t++)e.dyn_ltree[2*t]=0;for(t=0;t<h;t++)e.dyn_dtree[2*t]=0;for(t=0;t<d;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*A]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function V(e){8<e.bi_valid?F(e,e.bi_buf):0<e.bi_valid&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function Q(e,t,n,r){var i=2*t,s=2*n;return e[i]<e[s]||e[i]===e[s]&&r[t]<=r[n]}function H(e,t,n){for(var r=e.heap[n],i=n<<1;i<=e.heap_len&&(i<e.heap_len&&Q(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!Q(t,r,e.heap[i],e.depth));)e.heap[n]=e.heap[i],n=i,i<<=1;e.heap[n]=r}function W(e,t,n){var r,i,s,o,a=0;if(0!==e.last_lit)for(;r=e.pending_buf[e.d_buf+2*a]<<8|e.pending_buf[e.d_buf+2*a+1],i=e.pending_buf[e.l_buf+a],a++,0===r?k(e,i,t):(k(e,(s=C[i])+l+1,t),0!==(o=b[s])&&U(e,i-=I[s],o),k(e,s=N(--r),n),0!==(o=x[s])&&U(e,r-=D[s],o)),a<e.last_lit;);k(e,A,t)}function q(e,t){var n,r,i,s=t.dyn_tree,o=t.stat_desc.static_tree,a=t.stat_desc.has_stree,c=t.stat_desc.elems,l=-1;for(e.heap_len=0,e.heap_max=p,n=0;n<c;n++)0!==s[2*n]?(e.heap[++e.heap_len]=l=n,e.depth[n]=0):s[2*n+1]=0;for(;e.heap_len<2;)s[2*(i=e.heap[++e.heap_len]=l<2?++l:0)]=1,e.depth[i]=0,e.opt_len--,a&&(e.static_len-=o[2*i+1]);for(t.max_code=l,n=e.heap_len>>1;1<=n;n--)H(e,s,n);for(i=c;n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],H(e,s,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,s[2*i]=s[2*n]+s[2*r],e.depth[i]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,s[2*n+1]=s[2*r+1]=i,e.heap[1]=i++,H(e,s,1),2<=e.heap_len;);e.heap[--e.heap_max]=e.heap[1],function(e,t){var n,r,i,s,o,a,c=t.dyn_tree,l=t.max_code,u=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,m=t.stat_desc.extra_base,g=t.stat_desc.max_length,A=0;for(s=0;s<=f;s++)e.bl_count[s]=0;for(c[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<p;n++)g<(s=c[2*c[2*(r=e.heap[n])+1]+1]+1)&&(s=g,A++),c[2*r+1]=s,l<r||(e.bl_count[s]++,o=0,m<=r&&(o=d[r-m]),a=c[2*r],e.opt_len+=a*(s+o),h&&(e.static_len+=a*(u[2*r+1]+o)));if(0!==A){do{for(s=g-1;0===e.bl_count[s];)s--;e.bl_count[s]--,e.bl_count[s+1]+=2,e.bl_count[g]--,A-=2}while(0<A);for(s=g;0!==s;s--)for(r=e.bl_count[s];0!==r;)l<(i=e.heap[--n])||(c[2*i+1]!==s&&(e.opt_len+=(s-c[2*i+1])*c[2*i],c[2*i+1]=s),r--)}}(e,t),G(s,l,e.bl_count)}function X(e,t,n){var r,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),t[2*(n+1)+1]=65535,r=0;r<=n;r++)i=o,o=t[2*(r+1)+1],++a<c&&i===o||(a<l?e.bl_tree[2*i]+=a:0!==i?(i!==s&&e.bl_tree[2*i]++,e.bl_tree[2*y]++):a<=10?e.bl_tree[2*_]++:e.bl_tree[2*v]++,s=i,l=(a=0)===o?(c=138,3):i===o?(c=6,3):(c=7,4))}function K(e,t,n){var r,i,s=-1,o=t[1],a=0,c=7,l=4;for(0===o&&(c=138,l=3),r=0;r<=n;r++)if(i=o,o=t[2*(r+1)+1],!(++a<c&&i===o)){if(a<l)for(;k(e,i,e.bl_tree),0!=--a;);else 0!==i?(i!==s&&(k(e,i,e.bl_tree),a--),k(e,y,e.bl_tree),U(e,a-3,2)):a<=10?(k(e,_,e.bl_tree),U(e,a-3,3)):(k(e,v,e.bl_tree),U(e,a-11,7));s=i,l=(a=0)===o?(c=138,3):i===o?(c=6,3):(c=7,4)}}o(D);var Y=!1;function J(e,t,n,i){U(e,(a<<1)+(i?1:0),3),function(e,t,n,i){V(e),i&&(F(e,n),F(e,~n)),r.arraySet(e.pending_buf,e.window,t,n,e.pending),e.pending+=n}(e,t,n,!0)}n._tr_init=function(e){Y||(function(){var e,t,n,r,i,s=new Array(f+1);for(r=n=0;r<c-1;r++)for(I[r]=n,e=0;e<1<<b[r];e++)C[n++]=r;for(C[n-1]=r,r=i=0;r<16;r++)for(D[r]=i,e=0;e<1<<x[r];e++)M[i++]=r;for(i>>=7;r<h;r++)for(D[r]=i<<7,e=0;e<1<<x[r]-7;e++)M[256+i++]=r;for(t=0;t<=f;t++)s[t]=0;for(e=0;e<=143;)T[2*e+1]=8,e++,s[8]++;for(;e<=255;)T[2*e+1]=9,e++,s[9]++;for(;e<=279;)T[2*e+1]=7,e++,s[7]++;for(;e<=287;)T[2*e+1]=8,e++,s[8]++;for(G(T,u+1,s),e=0;e<h;e++)S[2*e+1]=5,S[2*e]=z(e,5);R=new O(T,b,l+1,u,f),B=new O(S,x,0,h,f),P=new O(new Array(0),w,0,d,g)}(),Y=!0),e.l_desc=new L(e.dyn_ltree,R),e.d_desc=new L(e.dyn_dtree,B),e.bl_desc=new L(e.bl_tree,P),e.bi_buf=0,e.bi_valid=0,j(e)},n._tr_stored_block=J,n._tr_flush_block=function(e,t,n,r){var o,a,c=0;0<e.level?(2===e.strm.data_type&&(e.strm.data_type=function(e){var t,n=4093624447;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return i;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return s;for(t=32;t<l;t++)if(0!==e.dyn_ltree[2*t])return s;return i}(e)),q(e,e.l_desc),q(e,e.d_desc),c=function(e){var t;for(X(e,e.dyn_ltree,e.l_desc.max_code),X(e,e.dyn_dtree,e.d_desc.max_code),q(e,e.bl_desc),t=d-1;3<=t&&0===e.bl_tree[2*E[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),o=e.opt_len+3+7>>>3,(a=e.static_len+3+7>>>3)<=o&&(o=a)):o=a=n+5,n+4<=o&&-1!==t?J(e,t,n,r):4===e.strategy||a===o?(U(e,2+(r?1:0),3),W(e,T,S)):(U(e,4+(r?1:0),3),function(e,t,n,r){var i;for(U(e,t-257,5),U(e,n-1,5),U(e,r-4,4),i=0;i<r;i++)U(e,e.bl_tree[2*E[i]+1],3);K(e,e.dyn_ltree,t-1),K(e,e.dyn_dtree,n-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,c+1),W(e,e.dyn_ltree,e.dyn_dtree)),j(e),r&&V(e)},n._tr_tally=function(e,t,n){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&n,e.last_lit++,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[2*(C[n]+l+1)]++,e.dyn_dtree[2*N(t)]++),e.last_lit===e.lit_bufsize-1},n._tr_align=function(e){U(e,2,3),k(e,A,T),function(e){16===e.bi_valid?(F(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):8<=e.bi_valid&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":41}],53:[function(e,t,n){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(e,t,r){(function(e){!function(e,t){"use strict";if(!e.setImmediate){var n,r,i,s,o=1,a={},c=!1,l=e.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(e);u=u&&u.setTimeout?u:e,n="[object process]"==={}.toString.call(e.process)?function(e){process.nextTick((function(){d(e)}))}:function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?(s="setImmediate$"+Math.random()+"$",e.addEventListener?e.addEventListener("message",p,!1):e.attachEvent("onmessage",p),function(t){e.postMessage(s+t,"*")}):e.MessageChannel?((i=new MessageChannel).port1.onmessage=function(e){d(e.data)},function(e){i.port2.postMessage(e)}):l&&"onreadystatechange"in l.createElement("script")?(r=l.documentElement,function(e){var t=l.createElement("script");t.onreadystatechange=function(){d(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):function(e){setTimeout(d,0,e)},u.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),r=0;r<t.length;r++)t[r]=arguments[r+1];var i={callback:e,args:t};return a[o]=i,n(o),o++},u.clearImmediate=h}function h(e){delete a[e]}function d(e){if(c)setTimeout(d,0,e);else{var n=a[e];if(n){c=!0;try{!function(e){var n=e.callback,r=e.args;switch(r.length){case 0:n();break;case 1:n(r[0]);break;case 2:n(r[0],r[1]);break;case 3:n(r[0],r[1],r[2]);break;default:n.apply(t,r)}}(n)}finally{h(e),c=!1}}}}function p(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(s)&&d(+t.data.slice(s.length))}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,void 0!==n.g?n.g:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[10])(10)},3065:function(e,t,n){var r,i;!function(){"use strict";r=function(){var e=function(){},t="undefined",n=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),r=["trace","debug","info","warn","error"],i={},s=null;function o(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function a(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function c(r){return"debug"===r&&(r="log"),typeof console!==t&&("trace"===r&&n?a:void 0!==console[r]?o(console,r):void 0!==console.log?o(console,"log"):e)}function l(){for(var n=this.getLevel(),i=0;i<r.length;i++){var s=r[i];this[s]=i<n?e:this.methodFactory(s,n,this.name)}if(this.log=this.debug,typeof console===t&&n<this.levels.SILENT)return"No console available for logging"}function u(e){return function(){typeof console!==t&&(l.call(this),this[e].apply(this,arguments))}}function h(e,t,n){return c(e)||u.apply(this,arguments)}function d(e,n){var o,a,c,u=this,d="loglevel";function p(e){var n=(r[e]||"silent").toUpperCase();if(typeof window!==t&&d){try{return void(window.localStorage[d]=n)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+n+";"}catch(e){}}}function f(){var e;if(typeof window!==t&&d){try{e=window.localStorage[d]}catch(e){}if(typeof e===t)try{var n=window.document.cookie,r=encodeURIComponent(d),i=n.indexOf(r+"=");-1!==i&&(e=/^([^;]+)/.exec(n.slice(i+r.length+1))[1])}catch(e){}return void 0===u.levels[e]&&(e=void 0),e}}function m(){if(typeof window!==t&&d){try{window.localStorage.removeItem(d)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}function g(e){var t=e;if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),"number"==typeof t&&t>=0&&t<=u.levels.SILENT)return t;throw new TypeError("log.setLevel() called with invalid level: "+e)}"string"==typeof e?d+=":"+e:"symbol"==typeof e&&(d=void 0),u.name=e,u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||h,u.getLevel=function(){return null!=c?c:null!=a?a:o},u.setLevel=function(e,t){return c=g(e),!1!==t&&p(c),l.call(u)},u.setDefaultLevel=function(e){a=g(e),f()||u.setLevel(e,!1)},u.resetLevel=function(){c=null,m(),l.call(u)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)},u.rebuild=function(){if(s!==u&&(o=g(s.getLevel())),l.call(u),s===u)for(var e in i)i[e].rebuild()},o=g(s?s.getLevel():"WARN");var A=f();null!=A&&(c=g(A)),l.call(u)}(s=new d).getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=i[e];return t||(t=i[e]=new d(e,s.methodFactory)),t};var p=typeof window!==t?window.log:void 0;return s.noConflict=function(){return typeof window!==t&&window.log===s&&(window.log=p),s},s.getLoggers=function(){return i},s.default=s,s},void 0===(i="function"==typeof r?r.call(t,n,t,e):r)||(e.exports=i)}()},9231:(e,t,n)=>{"use strict";var r=n(9543),i={body:"",args:[],thisVars:[],localVars:[]};function s(e){if(!e)return i;for(var t=0;t<e.args.length;++t){var n=e.args[t];e.args[t]=0===t?{name:n,lvalue:!0,rvalue:!!e.rvalue,count:e.count||1}:{name:n,lvalue:!1,rvalue:!0,count:1}}return e.thisVars||(e.thisVars=[]),e.localVars||(e.localVars=[]),e}function o(e){for(var t=[],n=0;n<e.args.length;++n)t.push("a"+n);return new Function("P",["return function ",e.funcName,"_ndarrayops(",t.join(","),") {P(",t.join(","),");return a0}"].join(""))(function(e){return r({args:e.args,pre:s(e.pre),body:s(e.body),post:s(e.proc),funcName:e.funcName})}(e))}var a={add:"+",sub:"-",mul:"*",div:"/",mod:"%",band:"&",bor:"|",bxor:"^",lshift:"<<",rshift:">>",rrshift:">>>"};!function(){for(var e in a){var n=a[e];t[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a"+n+"=b"},rvalue:!0,funcName:e+"eq"}),t[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a"+n+"=s"},rvalue:!0,funcName:e+"seq"})}}();var c={not:"!",bnot:"~",neg:"-",recip:"1.0/"};!function(){for(var e in c){var n=c[e];t[e]=o({args:["array","array"],body:{args:["a","b"],body:"a="+n+"b"},funcName:e}),t[e+"eq"]=o({args:["array"],body:{args:["a"],body:"a="+n+"a"},rvalue:!0,count:2,funcName:e+"eq"})}}();var l={and:"&&",or:"||",eq:"===",neq:"!==",lt:"<",gt:">",leq:"<=",geq:">="};!function(){for(var e in l){var n=l[e];t[e]=o({args:["array","array","array"],body:{args:["a","b","c"],body:"a=b"+n+"c"},funcName:e}),t[e+"s"]=o({args:["array","array","scalar"],body:{args:["a","b","s"],body:"a=b"+n+"s"},funcName:e+"s"}),t[e+"eq"]=o({args:["array","array"],body:{args:["a","b"],body:"a=a"+n+"b"},rvalue:!0,count:2,funcName:e+"eq"}),t[e+"seq"]=o({args:["array","scalar"],body:{args:["a","s"],body:"a=a"+n+"s"},rvalue:!0,count:2,funcName:e+"seq"})}}();var u=["abs","acos","asin","atan","ceil","cos","exp","floor","log","round","sin","sqrt","tan"];!function(){for(var e=0;e<u.length;++e){var n=u[e];t[n]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b)",thisVars:["this_f"]},funcName:n}),t[n+"eq"]=o({args:["array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a"],body:"a=this_f(a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"})}}();var h=["max","min","atan2","pow"];!function(){for(var e=0;e<h.length;++e){var n=h[e];t[n]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n}),t[n+"s"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(b,c)",thisVars:["this_f"]},funcName:n+"s"}),t[n+"eq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"eq"}),t[n+"seq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(a,b)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"seq"})}}();var d=["atan2","pow"];!function(){for(var e=0;e<d.length;++e){var n=d[e];t[n+"op"]=o({args:["array","array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"op"}),t[n+"ops"]=o({args:["array","array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b","c"],body:"a=this_f(c,b)",thisVars:["this_f"]},funcName:n+"ops"}),t[n+"opeq"]=o({args:["array","array"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opeq"}),t[n+"opseq"]=o({args:["array","scalar"],pre:{args:[],body:"this_f=Math."+n,thisVars:["this_f"]},body:{args:["a","b"],body:"a=this_f(b,a)",thisVars:["this_f"]},rvalue:!0,count:2,funcName:n+"opseq"})}}(),t.any=r({args:["array"],pre:i,body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"if(a){return true}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return false"},funcName:"any"}),t.all=r({args:["array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1}],body:"if(!x){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"all"}),t.sum=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s+=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"sum"}),t.prod=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=1"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:1}],body:"this_s*=a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"prod"}),t.norm2squared=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm2squared"}),t.norm2=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:2}],body:"this_s+=a*a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return Math.sqrt(this_s)"},funcName:"norm2"}),t.norminf=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:4}],body:"if(-a>this_s){this_s=-a}else if(a>this_s){this_s=a}",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norminf"}),t.norm1=r({args:["array"],pre:{args:[],localVars:[],thisVars:["this_s"],body:"this_s=0"},body:{args:[{name:"a",lvalue:!1,rvalue:!0,count:3}],body:"this_s+=a<0?-a:a",localVars:[],thisVars:["this_s"]},post:{args:[],localVars:[],thisVars:["this_s"],body:"return this_s"},funcName:"norm1"}),t.sup=r({args:["array"],pre:{body:"this_h=-Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_>this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.inf=r({args:["array"],pre:{body:"this_h=Infinity",args:[],thisVars:["this_h"],localVars:[]},body:{body:"if(_inline_1_arg0_<this_h)this_h=_inline_1_arg0_",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_h"],localVars:[]},post:{body:"return this_h",args:[],thisVars:["this_h"],localVars:[]}}),t.argmin=r({args:["index","array","shape"],pre:{body:"{this_v=Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_<this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.argmax=r({args:["index","array","shape"],pre:{body:"{this_v=-Infinity;this_i=_inline_0_arg2_.slice(0)}",args:[{name:"_inline_0_arg0_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg1_",lvalue:!1,rvalue:!1,count:0},{name:"_inline_0_arg2_",lvalue:!1,rvalue:!0,count:1}],thisVars:["this_i","this_v"],localVars:[]},body:{body:"{if(_inline_1_arg1_>this_v){this_v=_inline_1_arg1_;for(var _inline_1_k=0;_inline_1_k<_inline_1_arg0_.length;++_inline_1_k){this_i[_inline_1_k]=_inline_1_arg0_[_inline_1_k]}}}",args:[{name:"_inline_1_arg0_",lvalue:!1,rvalue:!0,count:2},{name:"_inline_1_arg1_",lvalue:!1,rvalue:!0,count:2}],thisVars:["this_i","this_v"],localVars:["_inline_1_k"]},post:{body:"{return this_i}",args:[],thisVars:["this_i"],localVars:[]}}),t.random=o({args:["array"],pre:{args:[],body:"this_f=Math.random",thisVars:["this_f"]},body:{args:["a"],body:"a=this_f()",thisVars:["this_f"]},funcName:"random"}),t.assign=o({args:["array","array"],body:{args:["a","b"],body:"a=b"},funcName:"assign"}),t.assigns=o({args:["array","scalar"],body:{args:["a","b"],body:"a=b"},funcName:"assigns"}),t.equals=r({args:["array","array"],pre:i,body:{args:[{name:"x",lvalue:!1,rvalue:!0,count:1},{name:"y",lvalue:!1,rvalue:!0,count:1}],body:"if(x!==y){return false}",localVars:[],thisVars:[]},post:{args:[],localVars:[],thisVars:[],body:"return true"},funcName:"equals"})},8655:(e,t,n)=>{var r=n(2219),i=n(7206),s="undefined"!=typeof Float64Array;function o(e,t){return e[0]-t[0]}function a(){var e,t=this.stride,n=new Array(t.length);for(e=0;e<n.length;++e)n[e]=[Math.abs(t[e]),e];n.sort(o);var r=new Array(n.length);for(e=0;e<r.length;++e)r[e]=n[e][1];return r}function c(e,t){var n=["View",t,"d",e].join("");t<0&&(n="View_Nil"+e);var i="generic"===e;if(-1===t){var s="function "+n+"(a){this.data=a;};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return -1};proto.size=0;proto.dimension=-1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function(){return new "+n+"(this.data);};proto.get=proto.set=function(){};proto.pick=function(){return null};return function construct_"+n+"(a){return new "+n+"(a);}";return new Function(s)()}if(0===t){s="function "+n+"(a,d) {this.data = a;this.offset = d};var proto="+n+".prototype;proto.dtype='"+e+"';proto.index=function(){return this.offset};proto.dimension=0;proto.size=1;proto.shape=proto.stride=proto.order=[];proto.lo=proto.hi=proto.transpose=proto.step=function "+n+"_copy() {return new "+n+"(this.data,this.offset)};proto.pick=function "+n+"_pick(){return TrivialArray(this.data);};proto.valueOf=proto.get=function "+n+"_get(){return "+(i?"this.data.get(this.offset)":"this.data[this.offset]")+"};proto.set=function "+n+"_set(v){return "+(i?"this.data.set(this.offset,v)":"this.data[this.offset]=v")+"};return function construct_"+n+"(a,b,c,d){return new "+n+"(a,d)}";return new Function("TrivialArray",s)(l[e][0])}s=["'use strict'"];var o=r(t),c=o.map((function(e){return"i"+e})),u="this.offset+"+o.map((function(e){return"this.stride["+e+"]*i"+e})).join("+"),h=o.map((function(e){return"b"+e})).join(","),d=o.map((function(e){return"c"+e})).join(",");s.push("function "+n+"(a,"+h+","+d+",d){this.data=a","this.shape=["+h+"]","this.stride=["+d+"]","this.offset=d|0}","var proto="+n+".prototype","proto.dtype='"+e+"'","proto.dimension="+t),s.push("Object.defineProperty(proto,'size',{get:function "+n+"_size(){return "+o.map((function(e){return"this.shape["+e+"]"})).join("*"),"}})"),1===t?s.push("proto.order=[0]"):(s.push("Object.defineProperty(proto,'order',{get:"),t<4?(s.push("function "+n+"_order(){"),2===t?s.push("return (Math.abs(this.stride[0])>Math.abs(this.stride[1]))?[1,0]:[0,1]}})"):3===t&&s.push("var s0=Math.abs(this.stride[0]),s1=Math.abs(this.stride[1]),s2=Math.abs(this.stride[2]);if(s0>s1){if(s1>s2){return [2,1,0];}else if(s0>s2){return [1,2,0];}else{return [1,0,2];}}else if(s0>s2){return [2,0,1];}else if(s2>s1){return [0,1,2];}else{return [0,2,1];}}})")):s.push("ORDER})")),s.push("proto.set=function "+n+"_set("+c.join(",")+",v){"),i?s.push("return this.data.set("+u+",v)}"):s.push("return this.data["+u+"]=v}"),s.push("proto.get=function "+n+"_get("+c.join(",")+"){"),i?s.push("return this.data.get("+u+")}"):s.push("return this.data["+u+"]}"),s.push("proto.index=function "+n+"_index(",c.join(),"){return "+u+"}"),s.push("proto.hi=function "+n+"_hi("+c.join(",")+"){return new "+n+"(this.data,"+o.map((function(e){return["(typeof i",e,"!=='number'||i",e,"<0)?this.shape[",e,"]:i",e,"|0"].join("")})).join(",")+","+o.map((function(e){return"this.stride["+e+"]"})).join(",")+",this.offset)}");var p=o.map((function(e){return"a"+e+"=this.shape["+e+"]"})),f=o.map((function(e){return"c"+e+"=this.stride["+e+"]"}));s.push("proto.lo=function "+n+"_lo("+c.join(",")+"){var b=this.offset,d=0,"+p.join(",")+","+f.join(","));for(var m=0;m<t;++m)s.push("if(typeof i"+m+"==='number'&&i"+m+">=0){d=i"+m+"|0;b+=c"+m+"*d;a"+m+"-=d}");s.push("return new "+n+"(this.data,"+o.map((function(e){return"a"+e})).join(",")+","+o.map((function(e){return"c"+e})).join(",")+",b)}"),s.push("proto.step=function "+n+"_step("+c.join(",")+"){var "+o.map((function(e){return"a"+e+"=this.shape["+e+"]"})).join(",")+","+o.map((function(e){return"b"+e+"=this.stride["+e+"]"})).join(",")+",c=this.offset,d=0,ceil=Math.ceil");for(m=0;m<t;++m)s.push("if(typeof i"+m+"==='number'){d=i"+m+"|0;if(d<0){c+=b"+m+"*(a"+m+"-1);a"+m+"=ceil(-a"+m+"/d)}else{a"+m+"=ceil(a"+m+"/d)}b"+m+"*=d}");s.push("return new "+n+"(this.data,"+o.map((function(e){return"a"+e})).join(",")+","+o.map((function(e){return"b"+e})).join(",")+",c)}");var g=new Array(t),A=new Array(t);for(m=0;m<t;++m)g[m]="a[i"+m+"]",A[m]="b[i"+m+"]";s.push("proto.transpose=function "+n+"_transpose("+c+"){"+c.map((function(e,t){return e+"=("+e+"===undefined?"+t+":"+e+"|0)"})).join(";"),"var a=this.shape,b=this.stride;return new "+n+"(this.data,"+g.join(",")+","+A.join(",")+",this.offset)}"),s.push("proto.pick=function "+n+"_pick("+c+"){var a=[],b=[],c=this.offset");for(m=0;m<t;++m)s.push("if(typeof i"+m+"==='number'&&i"+m+">=0){c=(c+this.stride["+m+"]*i"+m+")|0}else{a.push(this.shape["+m+"]);b.push(this.stride["+m+"])}");return s.push("var ctor=CTOR_LIST[a.length+1];return ctor(this.data,a,b,c)}"),s.push("return function construct_"+n+"(data,shape,stride,offset){return new "+n+"(data,"+o.map((function(e){return"shape["+e+"]"})).join(",")+","+o.map((function(e){return"stride["+e+"]"})).join(",")+",offset)}"),new Function("CTOR_LIST","ORDER",s.join("\n"))(l[e],a)}var l={float32:[],float64:[],int8:[],int16:[],int32:[],uint8:[],uint16:[],uint32:[],array:[],uint8_clamped:[],bigint64:[],biguint64:[],buffer:[],generic:[]};e.exports=function(e,t,n,r){if(void 0===e)return(0,l.array[0])([]);"number"==typeof e&&(e=[e]),void 0===t&&(t=[e.length]);var o=t.length;if(void 0===n){n=new Array(o);for(var a=o-1,u=1;a>=0;--a)n[a]=u,u*=t[a]}if(void 0===r){r=0;for(a=0;a<o;++a)n[a]<0&&(r-=(t[a]-1)*n[a])}for(var h=function(e){if(i(e))return"buffer";if(s)switch(Object.prototype.toString.call(e)){case"[object Float64Array]":return"float64";case"[object Float32Array]":return"float32";case"[object Int8Array]":return"int8";case"[object Int16Array]":return"int16";case"[object Int32Array]":return"int32";case"[object Uint8Array]":return"uint8";case"[object Uint16Array]":return"uint16";case"[object Uint32Array]":return"uint32";case"[object Uint8ClampedArray]":return"uint8_clamped";case"[object BigInt64Array]":return"bigint64";case"[object BigUint64Array]":return"biguint64"}return Array.isArray(e)?"array":"generic"}(e),d=l[h];d.length<=o+1;)d.push(c(h,d.length-1));return(0,d[o+1])(e,t,n,r)}},9662:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),o=0;o<n.length;o++)"default"!==n[o]&&i(t,e,n[o]);return s(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.ThingOrigin=void 0;const c=n(9271),l=o(n(484)),u=n(4034),h=n(9437),d=a(n(9777)),p=n(1833),f=n(7295),m=n(3215),g=n(3574),A=n(3277),y=n(3655),_=n(9623),v=n(7368),b=n(2281),x=n(876),w=n(785),E=n(1086),T=n(6422),S=n(2895),M=n(9145),C=n(7542),I=n(5755),R=n(1772),B=n(8147),P=n(2479),D=n(9388),O=n(8754),L=n(2745);let N=new h.Clock;class F{constructor(e,t,n){this.toUpdate={material:[]},this.createScene=async(e,t,n)=>{this.sceneName=e,this.container=t;let r=(0,c.cloneDeep)(u.sceneData);if(F.sceneData=(0,c.merge)(r,n),console.log("sceneData",F.sceneData),(null==n?void 0:n.lights)&&(F.sceneData.lights=n.lights),(null==n?void 0:n.modelList)&&0!=n.modelList.length&&(F.sceneData.modelList=n.modelList),(null==n?void 0:n.markerList)&&0!=n.markerList.length&&(F.sceneData.markerList=n.markerList),this.initRender(),this.initLight(),this.effect.initEffect(),F.sceneData.scene.fog.show&&(F.sceneData.scene.fog.cameraView?this.scene.fog=new h.FogExp2(F.sceneData.scene.fog.color):this.scene.fog=new h.Fog(F.sceneData.scene.fog.color)),F.sceneData.scene.stats.show&&this.showStats(),0!=F.sceneData.markerList.length&&this.loadMarker(),this.initAttach(),this.initControl(),this.initGround(),this.update(),0!=F.sceneData.modelList.length)for(const e of F.sceneData.modelList){let t=await this.model.loadModel(e);this.scene.add(t)}},this.sceneName=e,this.container=t;let r=(0,c.cloneDeep)(u.sceneData);F.sceneData=(0,c.merge)(r,n),this.camera=new f.TCamera(this),this.controls=new m.TControl(this),this.CAD=new g.TCAD,this.GUI=new L.TGUI,this.tool=new R.Tool,this.font=new b.TFont,this.line=new T.TLine,this.snap=new D.TSnap,this.animate=new p.TAnimate,this.material=new M.TMaterial,this.indexedDB=new w.TIndexedDB,this.eDispatcher=new y.TEventDispatcher,this.model=new I.TModel,this.renderer=new P.TRenderer(this),this.scene=new O.TScene(this),this.effect=new A.TEffect(this),this.marker=new C.TMarker(this),this.machine=new S.TMachine(this),this.explode=new _.TExplode(this),this.physics=new B.TPhysics(this),this.light=new E.TLight(this.scene),this.helper=new x.THelper(this.scene),this.exporters=new v.TExporters(this.scene),this.createScene(e,t,n)}resize(){this.camera.camera&&("PerspectiveCamera"==this.camera.type?this.camera.camera.aspect=this.container.clientWidth/this.container.clientHeight:"OrthographicCamera"==this.camera.type&&(this.camera.camera.left=this.container.clientLeft,this.camera.camera.right=this.container.clientLeft+this.container.clientWidth,this.camera.camera.top=this.container.clientTop,this.camera.camera.bottom=this.container.clientTop+this.container.clientHeight),this.camera.camera.updateProjectionMatrix()),setTimeout((()=>{this.renderer&&this.renderer.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.CSS2DRenderer&&this.renderer.CSS2DRenderer.setSize(this.container.clientWidth,this.container.clientHeight)}),100)}update(){if(this.camera.camera.updateProjectionMatrix(),this.renderer.CSS2DRenderer.render(this.scene,this.camera.camera),this.effect.effectComposer&&this.effect.effectComposer.render(),this.effect.effectComposer&&this.effect.effectComposer.render(),this.helper.box&&this.helper.updateBox(),this.controls.pointerLock&&this.controls.updatePointerLock(),this.stats&&this.stats.update(),this.mixer&&this.mixer.update(N.getDelta()),this.toUpdate.material.length>0)for(let e=0;e<this.toUpdate.material.length;e++){this.toUpdate.material[e].uniforms.time.value+=1/60}this.camera.cameraView.forEach((e=>{const t=this.renderer.rendererView.get(e.name).renderer,n=this.camera.cameraView.get(e.name).camera;let r=this.scene.getObjectByProperty("name",e.lookAt);r?(n.lookAt(r.position),n.position.set(r.position.x+e.offset.x,r.position.y+e.offset.y,r.position.z+e.offset.z)):n.lookAt(0,0,0),t.render(this,n)})),l.update(),this.updateId=requestAnimationFrame(this.update.bind(this))}dispose(){for(console.log("dispose",this.scene),this.scene.traverse((e=>{if(e.isMesh||e.isLine)if(e.geometry.dispose(),e.material.isMaterial)e.material.dispose();else for(let t=0;t<e.material.length;t++)e.material[t].dispose();this.scene.remove(e)})),this.controls.disposeOrbit(),this.controls.disposeDrag(),this.controls.disposePointerLock(),this.controls.disposeRaycaster(),this.controls.disposeTransform(),this.helper.removeAxes(),this.helper.removeBox(),this.helper.removeGrid();this.container.hasChildNodes();)this.container.removeChild(this.container.firstChild);this.renderer.renderer.dispose(),this.renderer.renderer.forceContextLoss();let e=this.renderer.renderer.domElement.getContext("webgl");e&&e.getExtension("WEBGL_lose_context").loseContext(),cancelAnimationFrame(this.updateId)}initLight(){for(let e=0;e<F.sceneData.lights.length;e++){let t=F.sceneData.lights[e];switch(t.type.toLocaleLowerCase()){case"directionallight":this.light.addDirectionalLight({name:t.name,color:t.color,intensity:t.intensity,position:t.position}).visible=t.visible;break;case"ambientlight":this.light.addAmbientLight({name:t.name,color:t.color,intensity:t.intensity}).visible=t.visible;break;case"pointLight":this.light.addPointLight({name:t.name,color:t.color,intensity:t.intensity,distance:t.distance,position:t.position}).visible=t.visible}}}initControl(){this.controls=new m.TControl(this),F.sceneData.helper.axes.active&&this.helper.initAxes(F.sceneData.helper.axes.length),F.sceneData.helper.grid.active&&this.helper.initGrid(F.sceneData.helper.grid),F.sceneData.controls.orbit.active&&this.controls.initOrbit(),F.sceneData.controls.raycaster.active&&this.controls.initRaycaster(F.sceneData.controls.raycaster.events),F.sceneData.controls.transform.active&&this.controls.initTransform(),F.sceneData.controls.drag.active&&this.controls.initDrag()}initAttach(){F.sceneData.attachList.forEach((e=>{let t=setInterval((()=>{let n=this.scene.getObjectByProperty("name",e.parent),r=this.scene.getObjectByProperty("name",e.child);n&&r&&("arm&jaw"==e.type&&(n=n.getObjectByProperty("name",e.armEnd)),this.animate.attachModel(n,r,e.scale),clearInterval(t))}),100)}))}async initGround(){if(!F.sceneData.scene.ground.active)return;(0,c.merge)(F.sceneData.scene.ground,{position:{x:0,y:.001,z:0}});let e=await this.model.initPlane(F.sceneData.scene.ground);e.name="TO-ground",this.scene.add(e)}loadMarker(){F.sceneData.markerList.forEach((e=>{let t=setInterval((()=>{let n=this.scene.getObjectByProperty("name",e.modelName);n&&(clearInterval(t),this.marker.addMarker(n,e.configs.html,{modelName:e.markerName,position:e.position,base:e.base}))}),100)}))}initRender(){this.scene.setEnvironment(),this.scene.setBackground(),this.scene.setToneMapping()}showStats(){this.stats=new d.default,this.stats.dom.style.position="absolute",this.stats.dom.style.left="0px",this.stats.dom.style.top="0px",this.stats.dom.style.zIndex="100",this.container.appendChild(this.stats.dom)}}t.ThingOrigin=F,console.log("ThingOrigin2.0.js \n        by - SIA8"),window.ThingOrigin=F},1445:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setModelConfig=void 0;const r=n(9271);t.setModelConfig=(e,t)=>{var n;return e.traverse((e=>{e.userData=(0,r.merge)(e.userData,{parent:t.modelName})})),t.scale&&e.scale.set(t.scale.x,t.scale.y,t.scale.z),t.rotation&&("x"in t.rotation?e.rotation.set(t.rotation.x,t.rotation.y,t.rotation.z):"_x"in t.rotation&&e.rotation.set(t.rotation._x,t.rotation._y,t.rotation._z)),t.position&&e.position.set(t.position.x,t.position.y,t.position.z),e.name=t.modelName,e.userData=(0,r.merge)(t.userData?t.userData:{},{by:"ThingOrigin3D",base:t.base,material:t.material,loadType:t.loadType,modelType:t.modelType}),e.updateMatrixWorld(!0),e.visible=null===(n=t.visible)||void 0===n||n,e}},1833:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),o=0;o<n.length;o++)"default"!==n[o]&&i(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.TAnimate=void 0;const a=n(1772),c=n(9437),l=o(n(484));t.TAnimate=class{constructor(){this.tool=new a.Tool,this.motionMap=new Map([["linear",l.Easing.Linear.None],["bounceOut",l.Easing.Bounce.Out]])}rotateAngle(e,t,n,r,i,s="linear"){if(!e)return void console.warn("旋转（角度）失败，物体不存在");e.updateWorldMatrix(!0,!0);let o={t:n};return new l.Tween(o).to({t:r},i).easing(this.motionMap.get(s)).onUpdate((function(){"x"==t?e.rotation.x=o.t/180*Math.PI:"y"==t?e.rotation.y=o.t/180*Math.PI:"z"==t&&(e.rotation.z=o.t/180*Math.PI)})).start()}rotateRadian(e,t,n,r,i){if(!e)return void console.warn("旋转（弧度）失败，物体不存在");e.updateWorldMatrix(!0,!0);let s={t:n};return new l.Tween(s).to({t:r},i).easing(l.Easing.Linear.None).onUpdate((function(){"x"==t?e.rotation.x=s.t:"y"==t?e.rotation.y=s.t:"z"==t&&(e.rotation.z=s.t)})).start()}move(e,t,n,r,i){if(!e)return void console.warn("平移失败，物体不存在");e.updateWorldMatrix(!0,!0);let s={t:n};return new l.Tween(s).to({t:r},i).easing(l.Easing.Linear.None).onUpdate((function(){"x"==t?e.position.x=s.t:"y"==t?e.position.y=s.t:"z"==t&&(e.position.z=s.t)})).start()}modelFadeIn(e,t){e?(e.traverse((e=>{e.isMesh&&(e.material.transparent=!0,e.material.opacity=0)})),e.traverse((e=>{e instanceof c.Mesh&&e.material&&new l.Tween(e.material).to({opacity:1},t).start()}))):console.warn("物体不存在")}modelFadeOut(e,t){e?(e.traverse((e=>{e.isMesh&&(e.material.transparent=!0,e.material.opacity=1)})),e.traverse((e=>{e instanceof c.Mesh&&e.material&&new l.Tween(e.material).to({opacity:0},t).start()}))):console.warn("物体不存在")}attachModel(e,t,n){var r,i;let s=Object.assign({position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},scale:{x:1,y:1,z:1}},n);return s.scale&&t.scale.set(s.scale.x,s.scale.y,s.scale.z),(null===(r=e.userData.sim)||void 0===r?void 0:r.positionOffset)?t.position.set(e.userData.sim.positionOffset.x+s.position.x,e.userData.sim.positionOffset.y+s.position.y,e.userData.sim.positionOffset.z+s.position.z):t.position.set(s.position.x,s.position.y,s.position.z),(null===(i=e.userData.sim)||void 0===i?void 0:i.rotationOffset)?t.rotation.set(e.userData.sim.rotationOffset.x,e.userData.sim.rotationOffset.y,e.userData.sim.rotationOffset.z):t.rotation.set(s.rotation.x,s.rotation.y,s.rotation.z),e.add(t),{scale:t.scale,position:t.position,rotation:t.rotation}}removeAttach(e,t){let n=this.tool.initVector3();return t.getWorldPosition(n),e.remove(t),t.position.set(n.x,n.y,n.z),t}detachModel(e,t){let n=this.tool.initVector3();return t.getWorldPosition(n),e.remove(t),{position:n}}}},3574:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TCAD=void 0;const i=n(8366),s=r(n(2879)),o=n(2281);t.TCAD=class{constructor(){this.font=new o.TFont}async getDXF(e){console.log("xdf",new Date);const t=await fetch(e),n=await t.text();let r=new Blob([n],{type:"text/plain"});return console.log("xdf-end",new Date),r}async drawDXF(e,t){console.log("draw",new Date);let n=await this.getDXF(e);this.font.loadFont({fontUrl:"public/dxf/helvetiker_regular.typeface.json",fontName:"helvetiker_regular.typeface",indexedDB:{active:!0,id:2}}).then((async e=>{const r=new FileReader;r.readAsText(n),r.onloadend=n=>{console.log("draw1",new Date);const r=n.target.result,o=(new s.default).parseSync(r);let a=document.getElementById(t);new i.Viewer(o,a,300,300,e);console.log("draw2",new Date),console.log("draw-end",new Date)}}))}}},7295:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),o=0;o<n.length;o++)"default"!==n[o]&&i(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.TCamera=void 0;const a=n(9437),c=o(n(484)),l=n(9662);t.TCamera=class{get camera(){return this._camera}get cameraView(){return this._cameraView}constructor(e){this._cameraView=new Map,this.TO=e,console.log("TCAmera",l.ThingOrigin.sceneData),this.PerspectiveCamera=this.initPerspectiveCamera(this.TO.container,l.ThingOrigin.sceneData.camera.perspective);this.OrthographicCamera=this.initOrthographicCamera(this.TO.container,1e3,l.ThingOrigin.sceneData.camera.perspective),this.setCamera("PerspectiveCamera"),this.camera.position.set(l.ThingOrigin.sceneData.camera.position.x,l.ThingOrigin.sceneData.camera.position.y,l.ThingOrigin.sceneData.camera.position.z),this.camera.lookAt(l.ThingOrigin.sceneData.camera.lookAt.x,l.ThingOrigin.sceneData.camera.lookAt.y,l.ThingOrigin.sceneData.camera.lookAt.z)}initPerspectiveCamera(e,t){let n=e.clientWidth/e.clientHeight;return new a.PerspectiveCamera(t.fov,n,t.near,t.far)}initOrthographicCamera(e,t,n){let r=e.clientWidth/e.clientHeight;return new a.OrthographicCamera(t*r/-2,t*r/2,t*r/2,t*r/-2,n.near,n.far)}setCamera(e="PerspectiveCamera"){switch(this.type=e,e){case"PerspectiveCamera":this._camera=this.PerspectiveCamera;break;case"OrthographicCamera":this._camera=this.OrthographicCamera}}lockCamera(e,t=1.1,n){let r=n?this.TO.tool.getModelSphere(n):this.TO.tool.getModelSphere(this.TO.scene);switch(e){case"top":this.camera.position.set(r.center.x,r.radius*t,r.center.z);break;case"bottom":this.camera.position.set(r.center.x,-r.radius*t,r.center.z);break;case"left":this.camera.position.set(-r.radius*t,r.center.y,r.center.z);break;case"right":this.camera.position.set(r.radius*t,r.center.y,r.center.z);break;case"front":this.camera.position.set(r.center.x,r.center.y,r.radius*t);break;case"back":this.camera.position.set(r.center.x,r.center.y,-r.radius*t)}this.camera.lookAt(r.center),this.TO.controls.orbit.target.set(r.center.x,r.center.y,r.center.z)}lookAt(e,t,n=1){let r=this.TO.scene.getObjectByProperty("name",e);if(!r)return void console.warn("相机追踪失败，物体不存在");let i=this.TO.tool.getModelSphere(r),s=this.camera.position.clone(),o=this.camera.position.x<0?-1:1,l=this.camera.position.y<0?-1:1,u=this.camera.position.z<0?-1:1,h=r.position.clone().add(new a.Vector3(i.radius*n*o,i.radius*n*l,i.radius*n*u));new c.Tween(s).to(h,t).easing(c.Easing.Linear.None).onUpdate((()=>{this.camera.position.set(s.x,s.y,s.z),this.camera.lookAt(r.position)})).start()}focusOn(e){if(!e)return void console.warn("相机追踪失败，物体不存在");this.TO.effect.initBreath(e);let t=this.TO.tool.getWorldPosition(e),n=this.TO.tool.getModelSphere(e);this.TO.camera.camera.position.set(t.x,t.y+2*n.radius,t.z+2*n.radius),this.TO.camera.camera.lookAt(n.center)}}},3215:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TControl=void 0;const r=n(9437),i=n(532),s=n(7024),o=n(9318),a=n(5e3),c=n(9662);t.TControl=class{constructor(e){this.transformCallback=e=>{this.orbit&&(this.orbit.enabled=!e.value)},this.unResponseType=["BoxHelper","GridHelper","AxesHelper","TransformControlsPlane","Line"],this.unResponseName=["sky","X","Y","Z","E","XY","YZ","XZ","XYZY"],this.dragStartWorldPosition=new r.Vector3,this.dragStartParentMatrix=new r.Matrix4,this.dragstartListener=e=>{const t=e.object;t.getWorldPosition(this.dragStartWorldPosition),t.userData.parent&&this.dragStartParentMatrix.copy(this.TO.scene.getObjectByName(t.userData.parent).matrixWorld),-1==this.unResponseType.indexOf(e.object.type)&&-1==this.unResponseName.indexOf(e.object.name)&&(this.orbit.enabled=!1)},this.dragListener=e=>{const t=e.object,n=new r.Vector3;t.getWorldPosition(n),this.delta=n.sub(this.dragStartWorldPosition)},this.dragendListener=e=>{this.orbit.enabled=!0;const t=e.object;let n=this.TO.scene.getObjectByName(t.userData.parent);t.userData.parent&&(n.position.add(this.delta),t.position.sub(this.delta))},this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.moveUp=!1,this.moveDown=!1,this.clock=new r.Clock,this.velocity=new r.Vector3,this.direction=new r.Vector3,this.rotation=new r.Vector3,this.TO=e,this.speed=c.ThingOrigin.sceneData.controls.pointerLock.speed}initDrag(){const e=this.TO.scene.children.filter((e=>-1==this.unResponseType.indexOf(e.type)&&-1==this.unResponseName.indexOf(e.name)));this.drag=new i.DragControls(e,this.TO.camera.camera,this.TO.container),this.drag.addEventListener("dragstart",this.dragstartListener),this.drag.addEventListener("drag",this.dragListener),this.drag.addEventListener("dragend",this.dragendListener)}updateDragObjects(e=[]){const t=this.TO.scene.children.filter((t=>-1==[this.unResponseType,...e].indexOf(t.type)&&-1==this.unResponseName.indexOf(t.name)));this.drag.setObjects(t)}disposeDrag(){this.drag&&(this.drag.removeEventListener("dragstart",this.dragstartListener),this.drag.removeEventListener("dragend",this.dragendListener),this.drag.deactivate(),this.drag.dispose(),this.drag=null)}initTransform(){this.transform=new a.TransformControls(this.TO.camera.camera,this.TO.container),this.transform.name="transformControls",this.transform.addEventListener("dragging-changed",this.transformCallback),this.TO.scene.add(this.transform)}setTransformMode(e,t){let n=this.TO.scene.getObjectByProperty("name",e);n?(this.transform.attach(n),this.transform.setMode(t)):console.warn("变换器设置失败，物体不存在")}clearTransform(){this.transform?this.transform.detach():console.log("未开启变换器")}disposeTransform(){this.transform&&(this.TO.scene.remove(this.transform),this.transform.detach(),this.transform.dispose(),this.transform=null)}initOrbit(){this.orbit=new s.OrbitControls(this.TO.camera.camera,this.TO.container),this.orbit.minDistance=c.ThingOrigin.sceneData.controls.orbit.minDistance,this.orbit.maxDistance=c.ThingOrigin.sceneData.controls.orbit.maxDistance,this.orbit.screenSpacePanning=!1,this.orbit.maxPolarAngle=Math.PI/2,c.ThingOrigin.sceneData.controls.orbit.autoRotate&&(this.orbit.autoRotate=!0,this.orbit.autoRotateSpeed=c.ThingOrigin.sceneData.controls.orbit.autoRotateSpeed),c.ThingOrigin.sceneData.controls.orbit.enableDamping&&(this.orbit.enableDamping=!0,this.orbit.dampingFactor=c.ThingOrigin.sceneData.controls.orbit.dampingFactor)}disposeOrbit(){this.orbit&&(this.orbit.dispose(),this.orbit=null)}initRaycaster(e){this.raycaster=new r.Raycaster,e.click&&(this.raycasterClick=e=>{let t=new r.Vector2,n=this.TO.container.getBoundingClientRect();t.x=(e.clientX-n.left)/n.width*2-1,t.y=-(e.clientY-n.top)/n.height*2+1,this.raycaster.setFromCamera(t,this.TO.camera.camera);let i=this.raycaster.intersectObject(this.TO.scene,!0);var s=new r.Vector3;s.set(t.x,t.y,.5),s.unproject(this.TO.camera.camera),console.log("鼠标选中物体",i),this.TO.eDispatcher.dispatchEvent({type:"CLICK",mouse:0==e.button?"left":"right",event:i,position:s})},this.TO.container.addEventListener("pointerdown",this.raycasterClick)),e.mousemove&&(this.raycasterMousemove=e=>{let t=new r.Vector2,n=this.TO.container.getBoundingClientRect();t.x=(e.clientX-n.left)/n.width*2-1,t.y=-(e.clientY-n.top)/n.height*2+1,this.raycaster.setFromCamera(t,this.TO.camera.camera);let i=this.raycaster.intersectObject(this.TO.scene,!0);this.TO.eDispatcher.dispatchEvent({type:"MOUSEOVER",event:i})},this.TO.container.addEventListener("mousemove",this.raycasterMousemove))}disposeRaycaster(){this.raycaster&&(this.raycaster=null,this.TO.container.removeEventListener("pointerdown",this.raycasterClick),this.TO.container.removeEventListener("mousemove",this.raycasterMousemove))}initPointerLock(){this.pointerLock=new o.PointerLockControls(this.TO.camera.camera,this.TO.container),this.TO.scene.add(this.pointerLock.getObject()),this.pointerKeyDownCallback=e=>{switch(e.code){case"ArrowUp":this.moveUp=!0;break;case"KeyW":this.moveForward=!0;break;case"ArrowLeft":case"KeyA":this.moveLeft=!0;break;case"ArrowDown":this.moveDown=!0;break;case"KeyS":this.moveBackward=!0;break;case"ArrowRight":case"KeyD":this.moveRight=!0}},this.pointerKeyUpCallback=e=>{switch(e.code){case"ArrowUp":this.moveUp=!1;break;case"KeyW":this.moveForward=!1;break;case"ArrowLeft":case"KeyA":this.moveLeft=!1;break;case"ArrowDown":this.moveDown=!1;break;case"KeyS":this.moveBackward=!1;break;case"ArrowRight":case"KeyD":this.moveRight=!1}},document.addEventListener("keydown",this.pointerKeyDownCallback,!1),document.addEventListener("keyup",this.pointerKeyUpCallback,!1),this.TO.container.requestPointerLock()}updatePointerLock(){if(this.pointerLock&&this.pointerLock.isLocked){var e=this.clock.getDelta();this.velocity.x-=10*this.velocity.x*e,this.velocity.z-=10*this.velocity.z*e,this.direction.x=Number(this.moveLeft)-Number(this.moveRight),this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z-=this.direction.z*this.speed*e),(this.moveLeft||this.moveRight)&&(this.velocity.x-=this.direction.x*this.speed*e),this.pointerLock.getObject().translateX(this.velocity.x*e),this.pointerLock.getObject().translateZ(this.velocity.z*e)}}disposePointerLock(){this.pointerLock&&(this.pointerLock.disconnect(),this.pointerLock=null)}}},3277:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEffect=void 0;const r=n(9437),i=n(7439),s=n(4742),o=n(5804),a=n(1185),c=n(8383),l=n(3885),u=n(9662);class h{constructor(e){this.localClipPlane=[],this.TO=e}initEffect(){this.effectComposer=new i.EffectComposer(this.TO.renderer.renderer),this.effectComposer.setSize(this.TO.container.clientWidth,this.TO.container.clientHeight),this.renderPass=new o.RenderPass(this.TO.scene,this.TO.camera.camera),this.effectComposer.addPass(this.renderPass),this.outlinePass=new s.OutlinePass(new r.Vector2(this.TO.container.clientWidth,this.TO.container.clientHeight),this.TO.scene,this.TO.camera.camera),this.outlinePass.edgeStrength=u.ThingOrigin.sceneData.effectComposer.outlinePass.edgeStrength,this.outlinePass.edgeGlow=u.ThingOrigin.sceneData.effectComposer.outlinePass.edgeGlow,this.outlinePass.edgeThickness=u.ThingOrigin.sceneData.effectComposer.outlinePass.edgeThickness,this.outlinePass.pulsePeriod=u.ThingOrigin.sceneData.effectComposer.outlinePass.pulsePeriod,this.outlinePass.usePatternTexture=u.ThingOrigin.sceneData.effectComposer.outlinePass.usePatternTexture,this.outlinePass.visibleEdgeColor.set(u.ThingOrigin.sceneData.effectComposer.outlinePass.visibleEdgeColor),this.outlinePass.hiddenEdgeColor.set(u.ThingOrigin.sceneData.effectComposer.outlinePass.hiddenEdgeColor),this.effectComposer.addPass(this.outlinePass),this.effectFXAA=new a.ShaderPass(l.FXAAShader),this.effectFXAA.uniforms.resolution.value.set(1/this.TO.container.clientWidth,1/this.TO.container.clientHeight),this.effectFXAA.needsSwap=!0,this.effectComposer.addPass(this.effectFXAA),this.bloomPass=new c.UnrealBloomPass(new r.Vector2(this.TO.container.clientWidth,this.TO.container.clientHeight),1.5,.4,.85),this.bloomPass.threshold=u.ThingOrigin.sceneData.effectComposer.bloomPass.threshold,this.bloomPass.strength=u.ThingOrigin.sceneData.effectComposer.bloomPass.strength,this.bloomPass.radius=u.ThingOrigin.sceneData.effectComposer.bloomPass.radius,this.bloomPass.renderToScreen=!0,this.bloomComposer=new i.EffectComposer(this.TO.renderer.renderer),this.bloomComposer.addPass(this.renderPass),this.bloomComposer.addPass(this.bloomPass),this.bloomLayer=new r.Layers,this.bloomLayer.set(h.BLOOM_SCENE);const e=new a.ShaderPass(new r.ShaderMaterial({uniforms:{baseTexture:{value:null}},vertexShader:"\n        varying vec2 vUv;\n        void main() {\n          vUv = uv;\n          gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n        }\n        ",fragmentShader:"\n        uniform sampler2D baseTexture;\n        uniform sampler2D bloomTexture;\n        varying vec2 vUv;\n        void main() {\n          gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n        }uniform sampler2D baseTexture;\n          uniform sampler2D bloomTexture;\n          varying vec2 vUv;\n          void main() {\n            gl_FragColor = ( texture2D( baseTexture, vUv ) + vec4( 1.0 ) * texture2D( bloomTexture, vUv ) );\n          }\n        ",defines:{}}),"baseTexture");e.needsSwap=!0,this.finalComposer=new i.EffectComposer(this.TO.renderer.renderer),this.finalComposer.addPass(this.renderPass),this.finalComposer.addPass(e)}initSceneClip(e,t){let n=this.TO.tool.initVector3ByAxis(e,1);this.sceneClipPlane=new r.Plane(n,t),this.TO.renderer.renderer.clippingPlanes=[this.sceneClipPlane]}updateSceneClip(e){this.sceneClipPlane.constant=e}deleteSceneClip(){this.sceneClipPlane=null;let e=Object.freeze([]);this.TO.renderer.clippingPlanes=e}initModelClip(e,t){e?(t.forEach((e=>{let t=this.TO.tool.initVector3ByAxis(e.axis,-1);this.localClipPlane.push(new r.Plane(t,e.constant))})),this.TO.renderer.renderer.localClippingEnabled=!0,e.traverse((e=>{"Mesh"==e.type&&(e.material.clippingPlanes=this.localClipPlane,e.material.clipShadows=!0,e.material.shadowSide=r.DoubleSide,e.castShadow=!0,e.renderOrder=6),e.clippingPlanes=this.localClipPlane,e.clipShadows=!0}))):console.warn("剖切失败，物体不存在")}updateModelClip(e){this.localClipPlane[0].constant=e}deleteModelClip(){this.localClipPlane=[];let e=Object.freeze([]);this.TO.renderer.clippingPlanes=e}initBreath(e){e?this.outlinePass.selectedObjects=[e]:console.warn("呼吸效果添加失败，物体不存在")}initMultipleBreath(e){if(!e.length)return void console.warn("呼吸效果添加失败，模型列表不存在");this.disposeBreath();let t=[];e.forEach((e=>{let n=this.TO.scene.getObjectByName(e.modelName);t.push(n)})),this.outlinePass.selectedObjects=t}disposeBreath(){this.outlinePass.selectedObjects=[]}disposeBloom(e){e?e.traverse((e=>{e instanceof r.Mesh&&e.layers.disable(h.BLOOM_SCENE)})):console.warn("发光效果取消失败，物体不存在")}}t.TEffect=h,h.BLOOM_SCENE=1},3655:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TEventDispatcher=void 0;const r=n(9437),i=n(1772),s=n(5755),o=n(9145),a=n(6422);class c extends r.EventDispatcher{constructor(){super(...arguments),this.tool=new i.Tool,this.model=new s.TModel,this.line=new a.TLine,this.material=new o.TMaterial}getIntersectPoint(e,t){const n=e.object.geometry.attributes.position.array,r=[this.tool.initVector3().fromArray(n,3*e.face.a),this.tool.initVector3().fromArray(n,3*e.face.b),this.tool.initVector3().fromArray(n,3*e.face.c)];r.forEach((t=>t.applyMatrix4(e.object.matrixWorld)));const i=r.map((t=>t.distanceTo(e.point))),s=i.indexOf(Math.min(...i)),o=(e.face.a,e.face.b,e.face.c,r[s]);let a=this.model.initSphere({base:{radius:t}});return a.position.copy(o),a}getIntersectFace(e){const t=e.object.geometry,n=e.face,r=[n.a,n.b,n.c],i=[];r.forEach((n=>{const r=this.tool.initVector3().fromBufferAttribute(t.attributes.position,n).applyMatrix4(e.object.matrixWorld);i.push(r)}));var s=this.model.initBufferGeometry(),o=new Float32Array([i[0].x,i[0].y,i[0].z,i[1].x,i[1].y,i[1].z,i[2].x,i[2].y,i[2].z]);s.setAttribute("position",this.model.initBufferAttribute(o,3)),s.setIndex([0,1,2]);var a=this.material.initBasicMaterial({color:"#00ff00"});let c=this.model.initMesh(s,a);return c.renderOrder=9999,c}getIntersectLine(e){const t=e.face,n=e.object,r=n.geometry.attributes.position.array,i=e=>this.tool.initVector3(r[3*e],r[3*e+1],r[3*e+2]).applyMatrix4(n.matrixWorld),s=i(t.a),o=i(t.b),a=i(t.c),c=[{start:s,end:o},{start:o,end:a},{start:a,end:s}],l=c.map((t=>this.tool.getPointLineDistance({x:e.point.x,y:e.point.y,z:e.point.z},{start:{x:t.start.x,y:t.start.y,z:t.start.z},end:{x:t.end.x,y:t.end.y,z:t.end.z}}))),u=l.indexOf(Math.min(...l));return this.line.initLine({base:{p1:{x:c[u].start.x,y:c[u].start.y,z:c[u].start.z},p2:{x:c[u].end.x,y:c[u].end.y,z:c[u].end.z}}})}}t.TEventDispatcher=c},9623:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TExplode=void 0;t.TExplode=class{constructor(e){this.TO=e}explode(e,t){if(e)for(var n=this.TO.tool.getChildrenInfo(e),r=0;r<n.length;r++){var i=e.getObjectByProperty("uuid",n[r].uuid);this.TO.animate.move(i,"x",n[r].position.x,n[r].position.x*t.ratio,t.time),this.TO.animate.move(i,"y",n[r].position.y,n[r].position.y*t.ratio,t.time),this.TO.animate.move(i,"z",n[r].position.z,n[r].position.z*t.ratio,t.time)}else console.warn("爆炸失败，物体不存在")}showExplode(e,t){let n=e.clone();this.TO.marker.removeMarker(n),this.TO.scene.add(n),this.TO.effect.initBreath(n);let r=this.TO.tool.getModelSphere(n);return this.TO.camera.camera.position.set(0,r.radius*t.ratio*2,r.radius*t.ratio*2),this.TO.camera.camera.lookAt(r.center),this.explode(n,t),n}}},7368:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TExporters=void 0;const i=n(5006),s=n(394),o=n(5999),a=n(6789),c=r(n(1119));t.TExporters=class{constructor(e){this.tScene=e,this.io=new s.NodeIO}exportGLTF(e="ThingOrigin"){(new i.GLTFExporter).parse(this.tScene,(t=>{if(t instanceof ArrayBuffer){let n=this.getBlob(t);this.save(n,e+".glb")}else{var n=JSON.stringify(t,null,2);this.generateFileName(n,e+".gltf")}}),(function(e){console.log("An error happened during parsing",e)}),{trs:!1,onlyVisible:!0,truncateDrawRange:!0,binary:!1,forceIndices:!1,forcePowerOfTwoTextures:!1})}modelCompressByUrl(e,t="ThingOrigin"){try{var n=new XMLHttpRequest;let r;n.open("get",e),n.send(),n.onreadystatechange=async()=>{if(4==n.readyState&&200==n.status){r=n.response,console.log("arrayBuffer",r),await this.registerNodeIo();const e=String(r),i={json:JSON.parse(e)},s=await this.io.readJSON(i);await s.transform((0,a.draco)({method:"edgebreaker"}));const o=await this.io.writeBinary(s);this.generateFileName(o,t+".glb")}}}catch(e){console.error(e)}}async modelCompressByFile(e,t="ThingOrigin"){try{const n=new FileReader,r=e.name.endsWith(".glb");r?n.readAsArrayBuffer(e):n.readAsText(e),await new Promise(((e,i)=>{n.onload=async()=>{try{let i;if(await this.registerNodeIo(),r){const e=n.result,t=new Uint8Array(e);i=await this.io.readBinary(t)}else{const e=String(n.result),t={json:JSON.parse(e)};i=await this.io.readJSON(t)}await i.transform((0,a.draco)({method:"edgebreaker"}));const s=await this.io.writeBinary(i);this.generateFileName(s,t+".glb"),e(!0)}catch(e){i(e)}},n.onerror=()=>i(new Error("文件读取失败"))}))}catch(e){console.error(e)}}async registerNodeIo(e){this.io.registerExtensions([o.KHRDracoMeshCompression,o.KHRMaterialsIOR,o.KHRMaterialsSpecular]).registerDependencies({"draco3d.decoder":await c.default.createDecoderModule({wasmBinaryFile:"/draco_decoder_gltf.wasm"}),"draco3d.encoder":await c.default.createEncoderModule({wasmBinaryFile:"/draco_encoder_gltf.wasm"})})}generateFileName(e,t){this.save(new Blob([e],{type:"text/plain"}),t)}getBlob(e){return new Blob([e],{type:"application/octet-stream"})}save(e,t){var n=document.createElement("a");n.style.display="none",document.body.appendChild(n),n.href=URL.createObjectURL(e),n.download=t,n.click()}}},2281:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TFont=void 0;const r=n(9271),i=n(9437),s=n(4385),o=n(4264),a=n(1445),c=n(785),l=n(9662);t.TFont=class{constructor(){this.fontLoader=new o.FontLoader,this.indexedDB=new c.TIndexedDB}async loadFont(e){let t={fontUrl:l.ThingOrigin.sceneData.params.resource.font_Microsoft,fontName:"Microsoft",indexedDB:{active:!0,id:1}},n=(0,r.merge)(t,e);if(!n.indexedDB.active)return console.log("no indexedDB"),new Promise((e=>this.fontLoader.load(n.fontUrl,(t=>{e(t)}))));if(n.indexedDB.id<10){let e=await this.indexedDB.accessInsertModel({id:n.indexedDB.id,modelName:n.fontName,base:{modelUrl:n.fontUrl},modelType:"font"});return console.log("huncun",e),new Promise((t=>this.fontLoader.load(e.modelUrl,(e=>{t(e)}))))}console.warn("文字缓存失败，请控制缓存id小于10")}initText(e){let t={modelName:"text-"+(new Date).getTime(),modelType:"text",position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{text:"ThingOrigin 3D",fontUrl:l.ThingOrigin.sceneData.params.resource.font_Microsoft,color:"#f00",size:100,depth:10,curveSegments:12,textType:"text",bevelEnabled:!1,bevelThickness:20,bevelSize:8,bevelSegments:3,sideColor:"#fff"}},n=(0,r.merge)(t,e);return new Promise((e=>{this.loadFont().then((t=>{const r=new s.TextGeometry(n.base.text,{font:t,size:n.base.size,depth:n.base.depth,curveSegments:n.base.curveSegments,bevelEnabled:n.base.bevelEnabled,bevelThickness:n.base.bevelThickness,bevelSize:n.base.bevelSize,bevelSegments:n.base.bevelSegments});var o=[new i.MeshPhongMaterial({color:n.base.color,flatShading:!0}),new i.MeshPhongMaterial({color:n.base.sideColor})];const c=new i.Mesh(r,o);e((0,a.setModelConfig)(c,n))}))}))}initTextShape(e){let t={modelName:"textShape-"+(new Date).getTime(),modelType:"text",base:{text:"ThingOrigin 3D",textType:"shapeText",fontUrl:l.ThingOrigin.sceneData.params.resource.font_Microsoft,color:"#f00",transparent:!0,opacity:.4,size:100},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}},n=(0,r.merge)(t,e);return new Promise((e=>{this.loadFont().then((t=>{var r=new i.MeshBasicMaterial({color:n.base.color,transparent:n.base.transparent,opacity:n.base.opacity,side:i.DoubleSide}),s=t.generateShapes(n.base.text,n.base.size),o=new i.ShapeGeometry(s);o.computeBoundingBox();const c=new i.Mesh(o,r);e((0,a.setModelConfig)(c,n))}))}))}initTextLine(e){let t={modelName:"textLine-"+(new Date).getTime(),modelType:"text",base:{text:"ThingOrigin 3D",textType:"traceText",fontUrl:l.ThingOrigin.sceneData.params.resource.font_Microsoft,color:"#f00",size:100,lineWidth:2,opacity:1},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}},n=(0,r.merge)(t,e);return new Promise((e=>{this.loadFont().then((t=>{var r=new i.LineBasicMaterial({color:n.base.color,transparent:!0,opacity:n.base.opacity,linewidth:n.base.lineWidth}),s=t.generateShapes(n.base.text,n.base.size);new i.ShapeGeometry(s).computeBoundingBox();for(var o=[],c=0;c<s.length;c++){if((d=s[c]).holes&&d.holes.length>0)for(var l=0;l<d.holes.length;l++){var u=d.holes[l];o.push(u)}}s.push.apply(s,o);var h=new i.Object3D;for(c=0;c<s.length;c++){var d,p=(d=s[c]).getPoints();const e=(new i.BufferGeometry).setFromPoints(p);var f=new i.Line(e,r);h.add(f)}e((0,a.setModelConfig)(h,n))}))}))}}},2745:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TGUI=void 0;const r=n(3619);t.TGUI=class{init(){}initControls(){this.panel=new r.GUI;let e={minScale:10,maxScale:20,rotate:!0,select:"10",clear:function(){console.log("点击")}},t={minScale:{type:"number",min:0,max:15,onchange:function(e){console.log(e)}},maxScale:{type:"number",min:20,max:25,onchange:function(e){console.log(e)}},rotate:{type:"status",onchange:function(e){console.log(e)}},select:{type:"select",options:["10","20"],onchange:function(e){console.log(e)}}};Object.keys(e).forEach((n=>{if(n in t)switch(t[n].type){case"number":this.panel.add(e,n,t[n].min,t[n].max).onChange(t[n].onchange);break;case"select":this.panel.add(e,n,t[n].options).onChange(t[n].onchange);break;default:this.panel.add(e,n).onChange(t[n].onchange)}else this.panel.add(e,n)}))}initSwitch(e){let t={};t[e.options.key]=e.options.value,this.panel.add(t,e.options.key).onChange(e.function)}initSingle(e){let t=Object.keys(e.options),n={"modify time scale":1};const r=[];for(let i=0,s=t.length;i!==s;++i){const s=t[i],o=e.options[s];n[s]=function(){const n=e.options[t[0]],r=n?n.action:null,i=o?o.action:null;r!==i&&this.prepareCrossFade(r,i,.35)},r.push(this.panel.children.filter((t=>t._title==e.name))[0].add(n,s))}}prepareCrossFade(e,t,n){}}},876:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.THelper=void 0;const r=n(9437),i=n(9271),s=n(1445);t.THelper=class{constructor(e){this.boxList=[],this.tScene=e}initAxes(e=50){this.axes=new r.AxesHelper(e),this.tScene.add(this.axes)}removeAxes(){this.axes&&(this.tScene.remove(this.axes),this.axes=null)}initBox(e){let t=this.tScene.getObjectByProperty("uuid",e);t?(this.box=new r.BoxHelper(t),this.box.name=t.name+"-boxHelper",this.boxList.push(this.box),this.tScene.add(this.box)):console.warn("包围盒加载失败，物体不存在")}removeBox(e){if(e){let t=this.boxList.findIndex((t=>t.name===e+"-boxHelper"));-1!=t&&(this.tScene.remove(this.boxList[t]),this.boxList.splice(t,1))}else this.boxList.forEach((e=>{this.tScene.remove(e)})),this.boxList=[]}updateBox(){this.box&&this.box.update()}initGrid(e){let t=(0,i.merge)({size:100,divisions:30,colorCenterLine:"#000000",colorGrid:"#000000"},e);this.grid=new r.GridHelper(t.size,t.divisions,new r.Color(t.colorCenterLine),new r.Color(t.colorGrid)),this.grid.name="gridHelper",this.grid.position.y-=1,this.tScene.add(this.grid)}removeGrid(){this.grid&&(this.tScene.remove(this.grid),this.grid=null)}initPlaneHelper(e){let t={modelName:"planeHelper-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:-Math.PI/2,y:0,z:0},base:{normal:{x:1,y:0,z:0},distance:0,size:1},material:{color:"0xffff00"}},n=(0,i.merge)(t,e);const o=new r.Plane(new r.Vector3(n.base.normal.x,n.base.normal.y,n.base.normal.z),n.base.distance),a=new r.PlaneHelper(o,n.base.size,new r.Color(n.material.color).getHex());return(0,s.setModelConfig)(a,n)}}},785:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TIndexedDB=void 0;const r=n(9271),i=n(9662);t.TIndexedDB=class{constructor(){this.DBs=new Map}accessModel(e){let t,n=window.indexedDB.open(i.ThingOrigin.sceneData.params.indexedDB.dataBaseName,1);return new Promise((r=>{n.onerror=e=>{console.log("数据库打开失败")},n.onsuccess=s=>{t=n.result,this.DBs.get(i.ThingOrigin.sceneData.params.indexedDB.dataBaseName)||this.DBs.set(i.ThingOrigin.sceneData.params.indexedDB.dataBaseName,t),t.transaction(i.ThingOrigin.sceneData.params.indexedDB.tableName,"readwrite").objectStore(i.ThingOrigin.sceneData.params.indexedDB.tableName).index("id").get(e.id).onsuccess=t=>{if(console.log("缓存结果",t),null!=t.target.result){let n=Object.assign(e,{saved:!0}),i=URL.createObjectURL(new Blob([t.target.result.model],{type:"application/octet-stream"}));r({info:n,modelUrl:i})}else r({info:{saved:!1}})}},n.onupgradeneeded=e=>{var n;t=e.target.result,t.objectStoreNames.contains(i.ThingOrigin.sceneData.params.indexedDB.tableName)||((n=t.createObjectStore(i.ThingOrigin.sceneData.params.indexedDB.tableName,{keyPath:"id"})).createIndex("id","id",{unique:!0}),n.createIndex("name","name"),n.createIndex("modelName","modelName"),n.createIndex("model","model"),n.createIndex("modelUrl","modelUrl"),n.createIndex("modelSize","modelSize"),n.createIndex("modelType","modelType"),n.createIndex("loadType","loadType"),n.createIndex("position","position"),n.createIndex("scale","scale"),n.createIndex("rotation","rotation"),n.createIndex("dataBaseName","dataBaseName"),n.createIndex("tableName","tableName"),n.createIndex("userData","userData")),console.log("数据库升级成功")}}))}insertModel(e){return new Promise((t=>{var n=new XMLHttpRequest;let s="text"==e.modelType?e.base.fontUrl:e.base.modelUrl;n.open("get",s),n.responseType="blob",n.send(),n.onreadystatechange=()=>{if(4==n.readyState&&200==n.status){e=Object.assign(e,{modelSize:n.response.size,model:new Blob([n.response]),dataBaseName:i.ThingOrigin.sceneData.params.indexedDB.dataBaseName,tableName:i.ThingOrigin.sceneData.params.indexedDB.tableName});let o=this.DBs.get(i.ThingOrigin.sceneData.params.indexedDB.dataBaseName).transaction([i.ThingOrigin.sceneData.params.indexedDB.tableName],"readwrite").objectStore(i.ThingOrigin.sceneData.params.indexedDB.tableName),a=(0,r.cloneDeep)(e);var s=o.add(a);s.onsuccess=n=>{console.log("数据写入成功",n),o.index("id").get(e.id).onsuccess=n=>{let i=(0,r.merge)(e,{saved:!0}),s=window.URL.createObjectURL(n.target.result.model);t({info:i,modelUrl:s})}},s.onerror=e=>{console.log("数据写入失败")}}}}))}deleteModel(e){let t=this.DBs.get(i.ThingOrigin.sceneData.params.indexedDB.dataBaseName);return new Promise((n=>{let r=t.transaction([i.ThingOrigin.sceneData.params.indexedDB.tableName],"readwrite").objectStore(i.ThingOrigin.sceneData.params.indexedDB.tableName).delete(e);r.onsuccess=e=>{console.log("数据删除成功"),n(!0)},r.onerror=e=>{console.log("数据写入失败"),n(!1)}}))}updateModel(e){if(e.modelInfo.id)return new Promise(((t,n)=>{const r=i.ThingOrigin.sceneData.params.indexedDB.dataBaseName,s=i.ThingOrigin.sceneData.params.indexedDB.tableName,o=window.indexedDB.open(r);o.onerror=e=>{console.error("Database open failed:",e),n(new Error("Database open failed"))},o.onsuccess=i=>{const a=o.result;this.DBs.has(r)||this.DBs.set(r,a);const c=a.transaction(s,"readwrite"),l=c.objectStore(s);c.onerror=e=>{console.error("Transaction error:",e),n(new Error("Transaction failed"))};const u=l.index("id").get(e.modelInfo.id);u.onsuccess=()=>{const r=u.result,i=Object.assign(Object.assign({},r),e.modelInfo),s=l.put(i);s.onsuccess=()=>t(),s.onerror=e=>{console.error("Data update failed:",e),n(new Error("Data update failed"))}},u.onerror=e=>{console.error("Data retrieval failed:",e),n(new Error("Data retrieval failed"))}}}));console.warn("请传入id")}async accessInsertModel(e){const t=await this.accessModel(e);return new Promise((async(n,r)=>{if(t.info.saved)n({saved:!0,inserted:!1,modelUrl:t.modelUrl});else{const t=await this.insertModel(e);t.info.saved?n({saved:!0,inserted:!0,modelUrl:t.modelUrl}):n({saved:!1,inserted:!1})}}))}async getIDBModelInfo(e){let t=await this.accessInsertModel(e),n=(0,r.cloneDeep)(e);return n.base.modelUrl=t.modelUrl,n}}},1086:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TLight=void 0;const r=n(9437),i=n(7044);n(4302).RectAreaLightUniformsLib.init();const s=n(9271);t.TLight=class{constructor(e){this.helpers=new Map,this.tScene=e}addDirectionalLight(e={}){const t={color:16777215,intensity:1,position:[0,10,10],target:{x:0,y:0,z:0},castShadow:!0,shadowNear:.5,shadowFar:500,shadowMapSize:1024,name:`directionalLight_${Date.now()}`,helper:!1,helperSize:1,helperColor:void 0};let n=(0,s.merge)((0,s.cloneDeep)(t),e);const i=new r.DirectionalLight(n.color,n.intensity);if(this.setPosition(i,n.position),i.castShadow=n.castShadow,n.castShadow){const e=i.shadow;e.camera.near=n.shadowNear,e.camera.far=n.shadowFar,e.mapSize.width=n.shadowMapSize,e.mapSize.height=n.shadowMapSize}if(i.name=n.name,this.tScene.add(i),n.target instanceof r.Object3D)i.target=n.target,this.tScene.add(n.target);else{const e=new r.Object3D;e.position.set(n.target.x,n.target.y,n.target.z),i.target=e,this.tScene.add(e)}return n.helper&&this.addDirectionalLightHelper(i,n.helperSize,n.helperColor),i}addAmbientLight(e={}){const t={color:16777215,intensity:.5,name:`ambientLight_${Date.now()}`,helper:!1};let n=(0,s.merge)((0,s.cloneDeep)(t),e);const i=new r.AmbientLight(n.color,n.intensity);return i.name=n.name,this.tScene.add(i),n.helper&&console.warn("环境光没有辅助工具"),i}addPointLight(e={}){const t={color:16777215,intensity:1,distance:0,decay:1,position:[0,10,0],castShadow:!1,shadowNear:.5,shadowFar:500,shadowMapSize:1024,name:`pointLight_${Date.now()}`,helper:!1,helperSize:1,helperColor:void 0};let n=(0,s.merge)((0,s.cloneDeep)(t),e);const i=new r.PointLight(n.color,n.intensity,n.distance,n.decay);if(this.setPosition(i,n.position),i.castShadow=n.castShadow,n.castShadow){const e=i.shadow;e.camera.near=n.shadowNear,e.camera.far=n.shadowFar,e.mapSize.width=n.shadowMapSize,e.mapSize.height=n.shadowMapSize}return i.name=n.name,this.tScene.add(i),n.helper&&this.addPointLightHelper(i,n.helperSize,n.helperColor),i}addHemisphereLight(e={}){const t={skyColor:16777215,groundColor:0,intensity:1,position:[0,10,0],name:`hemisphereLight_${Date.now()}`,helper:!1,helperSize:1,helperColor:void 0};let n=(0,s.merge)((0,s.cloneDeep)(t),e);const i=new r.HemisphereLight(n.skyColor,n.groundColor,n.intensity);return this.setPosition(i,n.position),i.name=n.name,this.tScene.add(i),n.helper&&this.addHemisphereLightHelper(i,n.helperSize,n.helperColor),i}addRectAreaLight(e={}){const t={color:16777215,intensity:5,width:10,height:10,position:[0,10,0],rotation:[0,0,0],name:`rectAreaLight_${Date.now()}`,helper:!1,helperSize:1,helperColor:void 0};let n=(0,s.merge)((0,s.cloneDeep)(t),e);const i=new r.RectAreaLight(n.color,n.intensity,n.width,n.height);return this.setPosition(i,n.position),n.rotation&&this.setRotation(i,n.rotation),i.name=n.name,this.tScene.add(i),n.helper&&this.addRectAreaLightHelper(i,n.helperSize,n.helperColor),i}addSpotLight(e={}){const t={color:16777215,intensity:1,distance:0,angle:Math.PI/3,penumbra:0,decay:1,position:[0,10,0],target:{x:0,y:0,z:0},castShadow:!1,shadowNear:.5,shadowFar:500,shadowMapSize:1024,name:`spotLight_${Date.now()}`,helper:!1,helperSize:1,helperColor:void 0};let n=(0,s.merge)((0,s.cloneDeep)(t),e);const i=new r.SpotLight(n.color,n.intensity,n.distance,n.angle,n.penumbra,n.decay);if(this.setPosition(i,n.position),i.castShadow=n.castShadow,n.castShadow){const e=i.shadow;e.camera.near=n.shadowNear,e.camera.far=n.shadowFar,e.mapSize.width=n.shadowMapSize,e.mapSize.height=n.shadowMapSize}if(i.name=n.name,this.tScene.add(i),n.target instanceof r.Object3D)i.target=n.target,this.tScene.add(n.target);else{const e=new r.Object3D;e.position.set(n.target.x,n.target.y,n.target.z),i.target=e,this.tScene.add(e)}return n.helper&&this.addSpotLightHelper(i,n.helperSize,n.helperColor),i}addDirectionalLightHelper(e,t=1,n){this.ensureLightInScene(e);const i=new r.DirectionalLightHelper(e,t,n);return i.name=`${e.name}_helper`,this.tScene.add(i),this.helpers.set(e.name,i),i}addHemisphereLightHelper(e,t=1,n){this.ensureLightInScene(e);const i=new r.HemisphereLightHelper(e,t,n);return i.name=`${e.name}_helper`,this.tScene.add(i),this.helpers.set(e.name,i),i}addPointLightHelper(e,t=1,n){this.ensureLightInScene(e);const i=new r.PointLightHelper(e,t,n);return i.name=`${e.name}_helper`,this.tScene.add(i),this.helpers.set(e.name,i),i}addRectAreaLightHelper(e,t=1,n){this.ensureLightInScene(e);const r=new i.RectAreaLightHelper(e,t,n);return r.name=`${e.name}_helper`,this.tScene.add(r),this.helpers.set(e.name,r),r}addSpotLightHelper(e,t=1,n){this.ensureLightInScene(e);const i=new r.SpotLightHelper(e,n);return i.name=`${e.name}_helper`,this.tScene.add(i),this.helpers.set(e.name,i),i}removeLight(e){const t=this.getLight(e);return!!t&&(this.removeLightHelper(e),(t instanceof r.SpotLight||t instanceof r.DirectionalLight)&&t.target&&t.target.parent===this.tScene&&this.tScene.remove(t.target),this.tScene.remove(t),!0)}removeLightHelper(e){const t=this.helpers.get(e);return!!t&&(this.tScene.remove(t),this.helpers.delete(e),!0)}getLight(e){return this.tScene.getObjectByName(e)}getLightHelper(e){return this.helpers.get(e)}ensureLightInScene(e){e.parent||this.tScene.add(e)}setPosition(e,t){t instanceof r.Vector3?e.position.copy(t):Array.isArray(t)?e.position.set(t[0],t[1],t[2]):e.position.set(t.x,t.y,t.z)}setRotation(e,t){t instanceof r.Euler?e.rotation.copy(t):Array.isArray(t)?e.rotation.set(t[0],t[1],t[2]):e.rotation.set(t.x,t.y,t.z)}}},6422:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TLine=void 0;const r=n(9437),i=n(9271),s=n(1445),o=n(1949),a=n(5088),c=n(122),l=n(9145);t.TLine=class{constructor(){this.material=new l.TMaterial}initLine(e){let t={modelName:"line-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{p1:{x:0,y:0,z:0},p2:{x:10,y:10,z:10}},material:{color:"#f00"}},n=(0,i.merge)(t,e),o=new r.LineBasicMaterial({color:n.material.color}),a=[];a.push(new r.Vector3(n.base.p1.x,n.base.p1.y,n.base.p1.z)),a.push(new r.Vector3(n.base.p2.x,n.base.p2.y,n.base.p2.z));let c=(new r.BufferGeometry).setFromPoints(a),l=new r.Line(c,o);return(0,s.setModelConfig)(l,n)}initFatLine(e){let t={modelName:"fatLine-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{points:[{x:0,y:0,z:0},{x:20,y:20,z:20}],colors:[{r:1,g:0,b:0},{r:1,g:0,b:0}]},material:{lineWidth:5,dash:!1}},n=(0,i.merge)(t,e);const r=new o.LineGeometry;let l=[];n.base.points.map((e=>{l.push(e.x,e.y,e.z)})),r.setPositions(l);let u=[];n.base.colors.map((e=>{u.push(e.r,e.g,e.b)})),r.setColors(u);let h=new a.LineMaterial({color:16777215,linewidth:n.material.lineWidth,vertexColors:!0,dashed:n.material.dash,alphaToCoverage:!0}),d=new c.Line2(r,h);return d.computeLineDistances(),(0,s.setModelConfig)(d,n)}initPipe(e){let t={modelName:"pipe-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{points:[{x:0,y:0,z:0},{x:20,y:20,z:20}],radius:1,imgUrl:"",repeatX:"auto",repeatY:4},userData:{}},n=(0,i.merge)(t,e),o=[];n.base.points.forEach(((e,t)=>{let n=new r.Vector3(e.x,e.y,e.z);o.push(n)}));const a=new r.CatmullRomCurve3(o);let c=a.getLength(),l="auto"==n.base.repeatX?Math.ceil(c/10):n.base.repeatX;const u=this.material.initTextureMap({url:n.base.imgUrl,mapType:"map",repeat:[l,n.base.repeatY]}),h=new r.TubeGeometry(a,64,n.base.radius),d=new r.MeshPhongMaterial({map:u,transparent:!0}),p=new r.Mesh(h,d);return n.userData.repeat={x:l,y:n.base.repeatY},(0,s.setModelConfig)(p,n)}initFlowLine(e){let t={modelName:"flowLine-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{points:[{x:0,y:0,z:0},{x:20,y:20,z:20}],radius:1,imgUrl:"",speed:100,repeatX:"auto",repeatY:4},userData:{}},n=(0,i.merge)(t,e),o=[];n.base.points.forEach(((e,t)=>{let n=new r.Vector3(e.x,e.y,e.z);o.push(n)}));var a=new r.CatmullRomCurve3(o),c=new r.TubeGeometry(a,64,n.base.radius);let l=a.getLength(),u="auto"==n.base.repeatX?Math.ceil(l/10):n.base.repeatX,h=this.material.initTextureMap({url:n.base.imgUrl,mapType:"map",repeat:[u,n.base.repeatY]});h.offset.y=.5;var d=new r.MeshPhongMaterial({map:h,transparent:!0}),p=new r.Mesh(c,d);return setInterval((()=>{h.offset.x-=.0076}),n.base.speed),n.userData.repeat={x:u,y:n.base.repeatY},(0,s.setModelConfig)(p,n)}initArrow(e){let t={modelName:"arrow-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{start:{x:0,y:0,z:0},end:{x:10,y:10,z:10},headLength:3,headWidth:2,length:10},material:{color:"#f00"}},n=(0,i.merge)(t,e);const o=new r.Vector3(n.base.start.x,n.base.start.y,n.base.start.z);o.normalize();const a=new r.Vector3(n.base.end.x,n.base.end.y,n.base.end.z),c=new r.ArrowHelper(o,a,n.base.length,new r.Color(n.material.color).getHex(),n.base.headLength,n.base.headWidth);return(0,s.setModelConfig)(c,n)}getLineDirection(e){const t=e.geometry.attributes.position.array;if(t.length>6)return void console.warn("非直线线段");const n=new r.Vector3(t[0],t[1],t[2]),i=new r.Vector3(t[3],t[4],t[5]);return n.applyMatrix4(e.matrixWorld),i.applyMatrix4(e.matrixWorld),i.clone().sub(n).normalize()}getLineCenter(e){e.updateMatrixWorld();const t=e.geometry;t.computeBoundingBox();const n=new r.Vector3;return t.boundingBox.getCenter(n),n.applyMatrix4(e.matrixWorld)}}},2895:function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TMachine=void 0;const i=n(9271),s=r(n(9012));t.TMachine=class{constructor(e){this.getData=(e,t)=>{if(1==t.length)return Number(e[t[0]]);{let n=e[t[0]],r=t.slice(1);return null==n?Number(e[t.join(".")]):this.getData(n,r)}},this.TO=e}setModel(e,t,n){t.forEach((t=>{let r=e.getObjectByName(t.modelName),i=t.dataUrl.split("root.")[1].split(".");switch(t.animateType){case"move":r.position[t.axis]=this.getData(n,i)*t.reverse;break;case"rotate":let e=t.correct?t.correct:0,s=t.reverse?t.reverse:1;"rad"==t.rotateUnit?r.rotation[t.axis]=this.getData(n,i)*s+e:r.rotation[t.axis]=this.getData(n,i)*s*Math.PI/180+e}}))}twinModel(e,t,n,r,i){t.forEach((t=>{let s=e.getObjectByName(t.modelName),o=t.dataUrl.split("root.")[1].split(".");switch(t.animateType){case"move":this.TO.animate.move(s,t.axis,this.getData(n,o)*t.reverse,this.getData(r,o)*t.reverse,i);break;case"rotate":let e=t.correct?t.correct:0,a=t.reverse?t.reverse:1;"rad"==t.rotateUnit?this.TO.animate.rotateRadian(s,t.axis,this.getData(n,o)*a+e,this.getData(r,o)*a+e,i):this.TO.animate.rotateAngle(s,t.axis,this.getData(n,o)*a+e,this.getData(r,o)*a+e,i)}}))}setJointAngle(e,t,n){e?0!==Object.keys(n).length?t.forEach(((t,r)=>{const i=t.dataUrl.split("root.")[1],s=n[i];if(void 0!==s){const n=e.getObjectByName(t.modelName);n&&n.rotation?n.rotation[t.axis]=t.reverse*(s/180)*Math.PI:console.warn(`关节对象 '${t.modelName}' 未找到或缺少 rotation 属性。`)}else console.warn(`索引 ${r} 的 '${i}' 关节数据无效。`)})):console.warn(`${e.name}：关节数据为空，无法重置关节角度。`):console.warn("重置关节角度失败：机器人对象不存在。")}setJointRadian(e,t,n){if(e)if("{}"!=JSON.stringify(n))for(var r=0;r<t.length;r++){let i=t[r].dataUrl.split("root.")[1];i in n?(console.log("重置方法：",t[r].modelName,t[r].axis,t[r].reverse*Number(n[i])),e.getObjectByName(t[r].modelName).rotation[t[r].axis]=t[r].reverse*Number(n[i])):console.warn("【"+e.name+"】数据异常："+r+"="+n[i])}else console.warn(e.name+"：关节数据为空，无法运行重置弧度");else console.warn("重置【"+e.name+"】（弧度）失败，物体不存在")}setJointEuler(e,t,n){for(let r=0;r<t.length;r++){let i=e.getObjectByName(t[r].modelName),s={x:"x"==t[r].axis?n["joint"+(r+1)]*(Math.PI/180):void 0,y:"y"==t[r].axis?n["joint"+(r+1)]*(Math.PI/180):void 0,z:"z"==t[r].axis?n["joint"+(r+1)]*(Math.PI/180)*-1:void 0};i.setRotationFromEuler(this.TO.tool.initEuler(s.x,s.y,s.z,"XYZ"))}}twinAngle(e,t,n,r,i){if(e)for(var s=0;s<t.length;s++){let o=t[s].dataUrl.split("root.")[1];null!=n[o]&&null!=r[o]?n[o]!=r[o]&&this.TO.animate.rotateAngle(e.getObjectByName(t[s].modelName),t[s].axis,t[s].reverse*Number(n[o]),t[s].reverse*Number(r[o]),i):console.warn(t[s].modelName+"数据异常：pre="+n[o]+",cur="+r[o])}else console.warn("旋转角度失败，物体不存在")}twinRadian(e,t,n,r,i){if(e)for(var s=0;s<t.length;s++){let o=t[s].dataUrl.split("root.")[1];null!=n[o]&&null!=r[o]?n[o]!=r[o]&&this.TO.animate.rotateRadian(e.getObjectByName(t[s].modelName),t[s].axis,t[s].reverse*Number(n[o]),t[s].reverse*Number(r[o]),i):console.warn(t[s].modelName+"数据异常：pre="+n[o]+",cur="+r[o])}else console.warn("旋转弧度失败，物体不存在")}playRadian(e,t,n,r){if(!e)return void console.warn("旋转弧度失败，物体不存在");if(n.length<2)return void console.warn("动作数据不足，无法播放");let i=0,s=setInterval((()=>{this.twinRadian(e,t,n[i],n[i+1],r),i++,i==n.length-2&&clearInterval(s)}),r)}twinAobo(e,t,n,r){this.twinAngle(e,s.default.aubo.joints,t,n,r)}resetAobo(e,t){this.setJointAngle(e,s.default.aubo.joints,t)}getModelPose(e){let t=e.userData.hierarchy,n=[];if(t){for(let r=0;r<t.joints.length;r++){let s=e.getObjectByName(t.joints[r].modelName);n.push({modelName:s.name,position:{x:s.position.x,y:s.position.y,z:s.position.z},rotation:{x:s.rotation.x,y:s.rotation.y,z:s.rotation.z},scale:{x:s.scale.x,y:s.scale.y,z:s.scale.z},matrixWorld:(0,i.cloneDeep)(s.matrixWorld)})}return n}return e.traverse((e=>{n.push({modelName:e.name,position:{x:e.position.x,y:e.position.y,z:e.position.z},rotation:{x:e.rotation.x,y:e.rotation.y,z:e.rotation.z},scale:{x:e.scale.x,y:e.scale.y,z:e.scale.z},matrixWorld:(0,i.cloneDeep)(e.matrixWorld)})})),n}setPose(e,t){for(let n=0;n<t.length;n++){let r=e.getObjectByName(t[n].modelName);r.position.x=t[n].position.x,r.position.y=t[n].position.y,r.position.z=t[n].position.z,r.rotation.x=t[n].rotation.x,r.rotation.y=t[n].rotation.y,r.rotation.z=t[n].rotation.z}}}},7542:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),o=0;o<n.length;o++)"default"!==n[o]&&i(t,e,n[o]);return s(t,e),t});Object.defineProperty(t,"__esModule",{value:!0}),t.TMarker=void 0;const a=o(n(484)),c=n(9271),l=n(6074),u=n(1445);t.TMarker=class{constructor(e){this.TO=e}addMarker(e,t,n){if(!e)return void console.warn("标注添加失败，物体不存在");let r,i,s={modelName:e.name+"/marker-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{ratio:1.1,offset:{x:0,y:0,z:0},intervalY:40}},o=(0,c.merge)(s,n);if(t instanceof HTMLElement)i=t;else{let e=document.createElement("div");e.innerHTML=t,i=e}return i.className=e.name+"-thingOrigin-marker",i.id=o.modelName,document.body.appendChild(i),r=new l.CSS2DObject(i),r.userData.modelName=e.name,r.name=o.modelName,this.setMarkerPosition(e,r,o,!0)}setMarkerPosition(e,t,n,r){let i=document.querySelectorAll("."+e.name+"-thingOrigin-marker");return 0!==n.base.intervalY&&i.length>1&&i.forEach(((e,r)=>{if(e.id==t.element.id){const e=r*n.base.intervalY;n.position.y+=e}})),n.position.x+=n.base.offset.x,n.position.y+=n.base.offset.y,n.position.z+=n.base.offset.z,t.position.set(n.position.x,n.position.y,n.position.z),r&&e.attach(t),(0,u.setModelConfig)(t,n)}removeMarker(e,t){let n=[];e.traverse((e=>{e.isCSS2DObject&&n.push(e)})),n.length>0?n.forEach(((n,r)=>{t?n.element.id===t?e.remove(n):(n.position.y-=r*n.userData.base.intervalY,this.setMarkerPosition(e,n,{modelName:n.element.id,position:n.position,base:n.userData.base},!1)):e.remove(n)})):console.log("挂载模型暂无标记元素")}setMarkerInfo(e,t,n){let r=this.TO.scene.getObjectByName(e);r.traverse((e=>{e.isCSS2DObject&&e.element.id==n.modelName&&(e.element.innerHTML=t,this.setMarkerPosition(r,e,n,!1))}))}removeMarkerByModelName(e,t){let n=this.TO.scene.getObjectByName(e);this.removeMarker(n,t)}markerFadeIn(e,t){if(!e)return void console.warn("标签元素不存在");let n={opacity:"0.0"};new a.Tween(n).to({opacity:"1.0"},t).onUpdate((function(){e.element.style.opacity=n.opacity})).start()}markerFadeOut(e,t){if(!e)return void console.warn("标签元素不存在");let n={opacity:"1.0"};new a.Tween(n).to({opacity:"0.0"},t).onUpdate((function(){e.element.style.opacity=n.opacity})).start()}}},9145:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TMaterial=void 0;const r=n(9437),i=n(4667);t.TMaterial=class{constructor(){this.textureLoader=new r.TextureLoader}async initImageMaterial(e){let t=await this.textureLoader.load(e.url);return e.repeat&&(e.repeat.width&&e.repeat.width>1&&(t.wrapS=r.RepeatWrapping),e.repeat.height&&e.repeat.height>1&&(t.wrapT=r.RepeatWrapping),t.repeat.set(e.repeat.width,e.repeat.height)),new r.MeshPhongMaterial({color:"#fff",map:t})}initBasicMaterial(e={}){const t={color:16777215,transparent:!1,opacity:1,wireframe:!1,side:r.FrontSide},n=Object.assign(Object.assign({},t),e);return new r.MeshBasicMaterial(n)}initLambertMaterial(e={}){const t={color:16777215,transparent:!1,opacity:1,side:r.FrontSide,emissive:0,emissiveIntensity:1};return new r.MeshLambertMaterial(Object.assign(Object.assign({},t),e))}initPhongMaterial(e={}){const t={color:16777215,transparent:!1,opacity:1,side:r.FrontSide,emissive:0,emissiveIntensity:1,shininess:30};return new r.MeshPhongMaterial(Object.assign(Object.assign({},t),e))}initStandardMaterial(e={}){const t={color:16777215,transparent:!1,opacity:1,side:r.FrontSide,emissive:0,emissiveIntensity:1,metalness:0,roughness:1};return new r.MeshStandardMaterial(Object.assign(Object.assign({},t),e))}initPhysicalMaterial(e={}){const t={color:16777215,transparent:!1,opacity:1,side:r.FrontSide,emissive:0,emissiveIntensity:1,metalness:0,roughness:1,clearcoat:0,clearcoatRoughness:0};return new r.MeshPhysicalMaterial(Object.assign(Object.assign({},t),e))}initPointsMaterial(e={}){return new r.PointsMaterial(Object.assign(Object.assign({},{color:16777215,size:1,sizeAttenuation:!0,transparent:!1,opacity:1}),e))}initToonMaterial(e={}){const t={color:16777215,transparent:!1,opacity:1,side:r.FrontSide,emissive:0,emissiveIntensity:1};return new r.MeshToonMaterial(Object.assign(Object.assign({},t),e))}initSpriteMaterial(e={}){return new r.SpriteMaterial(Object.assign(Object.assign({},{color:16777215,transparent:!1,opacity:1,rotation:0,fog:!0}),e))}initShadowMaterial(e={}){return new r.ShadowMaterial(Object.assign(Object.assign({},{color:0,transparent:!0,opacity:.5}),e))}initDepthMaterial(e={}){const t={depthPacking:r.BasicDepthPacking,wireframe:!1,side:r.FrontSide};return new r.MeshDepthMaterial(Object.assign(Object.assign({},t),e))}initDistanceMaterial(e={}){const t={referencePosition:new r.Vector3,nearDistance:0,farDistance:1,side:r.FrontSide};return new r.MeshDistanceMaterial(Object.assign(Object.assign({},t),e))}initNormalMaterial(e={}){const t={flatShading:!1,transparent:!1,opacity:1,wireframe:!1,side:r.FrontSide,normalScale:new r.Vector2(1,1)};return new r.MeshNormalMaterial(Object.assign(Object.assign({},t),e))}initLineMaterial(e={}){return new r.LineBasicMaterial(Object.assign(Object.assign({},{color:16777215,linewidth:1,linecap:"round",linejoin:"round",transparent:!1,opacity:1}),e))}initLineDashedMaterial(e={}){return new r.LineDashedMaterial(Object.assign(Object.assign({},{color:16777215,linewidth:1,scale:1,dashSize:3,gapSize:1,transparent:!1,opacity:1}),e))}initRawShaderMaterial(e={}){const t={vertexShader:"",fragmentShader:"",uniforms:{},transparent:!1,side:r.FrontSide};return new r.RawShaderMaterial(Object.assign(Object.assign({},t),e))}initShaderMaterial(e={}){const t={vertexShader:"",fragmentShader:"",uniforms:{},transparent:!1,side:r.FrontSide,wireframe:!1};return new r.ShaderMaterial(Object.assign(Object.assign({},t),e))}setWaterSkin(e,t,n,s,o,a,c){return new i.Water(e,{textureWidth:t,textureHeight:n,waterNormals:this.textureLoader.load(s,(function(e){e.wrapS=e.wrapT=r.RepeatWrapping})),sunDirection:a,sunColor:c,waterColor:o})}initTextureMap(e){const t=this.getDefaultMapParams(e.mapType),n=Object.assign(Object.assign({},t),e),i=new r.TextureLoader(n.loadingManager).load(n.url,n.onLoad,n.onProgress,n.onError||(e=>{console.error(`未能加载${n.mapType}映射：`,e)}));return this.configureCommonTextureProperties(i,n),i}initTextureMaps(e){const t={};return["map","normal","roughness","metalness","ao","emissive","displacement","alpha","bump"].forEach((n=>{e[n]&&(t[n]=this.initTextureMap(Object.assign(Object.assign({},e[n]),{mapType:n})))})),t}configureCommonTextureProperties(e,t){void 0!==t.wrapS&&(e.wrapS=t.wrapS),void 0!==t.wrapT&&(e.wrapT=t.wrapT),void 0!==t.magFilter&&(e.magFilter=t.magFilter),void 0!==t.minFilter&&(e.minFilter=t.minFilter),void 0!==t.anisotropy&&(e.anisotropy=t.anisotropy),void 0!==t.repeat&&(Array.isArray(t.repeat)?e.repeat.set(t.repeat[0],t.repeat[1]):e.repeat.copy(t.repeat)),void 0!==t.offset&&(Array.isArray(t.offset)?e.offset.set(t.offset[0],t.offset[1]):e.offset.copy(t.offset)),void 0!==t.flipY&&(e.flipY=t.flipY),void 0!==t.mapping&&(e.mapping=t.mapping),void 0!==t.format&&(e.format=t.format),void 0!==t.type&&(e.type=t.type),void 0!==t.generateMipmaps&&(e.generateMipmaps=t.generateMipmaps),void 0!==t.premultiplyAlpha&&(e.premultiplyAlpha=t.premultiplyAlpha),void 0!==t.unpackAlignment&&(e.unpackAlignment=t.unpackAlignment)}getDefaultMapParams(e){return{url:"",mapType:e,wrapS:r.RepeatWrapping,wrapT:r.RepeatWrapping,magFilter:r.LinearFilter,minFilter:r.LinearMipmapLinearFilter,anisotropy:1,repeat:new r.Vector2(1,1),offset:new r.Vector2(0,0),flipY:!0,mapping:r.UVMapping,format:r.RGBFormat,type:r.UnsignedByteType,generateMipmaps:!0,premultiplyAlpha:!1,unpackAlignment:4,aoMapIntensity:1,bumpScale:1,roughnessScale:1,metalnessScale:1,displacementScale:1,emissiveIntensity:1}}initCubeTexture(e){const t=new r.CubeTextureLoader(e.loadingManager);e.urls&&6!==e.urls.length&&console.warn("CubeTextureParams.urls 必须是长度为 6 的数组。");const n=e.pathPrefix||"",i=[`${n}${e.urls[0]}`,`${n}${e.urls[1]}`,`${n}${e.urls[2]}`,`${n}${e.urls[3]}`,`${n}${e.urls[4]}`,`${n}${e.urls[5]}`],s=t.load(i,e.onLoad,e.onProgress,e.onError||(e=>{console.error("未能加载 cube texture:",e)}));return void 0!==e.magFilter&&(s.magFilter=e.magFilter),void 0!==e.minFilter&&(s.minFilter=e.minFilter),void 0!==e.anisotropy&&(s.anisotropy=e.anisotropy),void 0!==e.format&&(s.format=e.format),void 0!==e.type&&(s.type=e.type),void 0!==e.generateMipmaps&&(s.generateMipmaps=e.generateMipmaps),void 0!==e.unpackAlignment&&(s.unpackAlignment=e.unpackAlignment),s}initDataTexture(e){const t={type:r.UnsignedByteType,magFilter:r.LinearFilter,minFilter:r.LinearMipmapLinearFilter,anisotropy:1,wrapS:r.ClampToEdgeWrapping,wrapT:r.ClampToEdgeWrapping,repeat:new r.Vector2(1,1),offset:new r.Vector2(0,0),flipY:!1,mapping:r.UVMapping,generateMipmaps:!0,premultiplyAlpha:!1,unpackAlignment:4},n=Object.assign(Object.assign({},t),e),i=new r.DataTexture(n.data,n.width,n.height,n.format,n.type);return i.magFilter=n.magFilter,i.minFilter=n.minFilter,i.anisotropy=n.anisotropy,i.wrapS=n.wrapS,i.wrapT=n.wrapT,Array.isArray(n.repeat)?i.repeat.set(n.repeat[0],n.repeat[1]):i.repeat.copy(n.repeat),Array.isArray(n.offset)?i.offset.set(n.offset[0],n.offset[1]):i.offset.copy(n.offset),i.flipY=n.flipY,i.mapping=n.mapping,i.generateMipmaps=n.generateMipmaps,i.premultiplyAlpha=n.premultiplyAlpha,i.unpackAlignment=n.unpackAlignment,i.needsUpdate=!0,i}initVideoTexture(e){const t={videoDom:null,wrapS:r.ClampToEdgeWrapping,wrapT:r.ClampToEdgeWrapping,magFilter:r.LinearFilter,minFilter:r.LinearFilter,anisotropy:1,repeat:new r.Vector2(1,1),offset:new r.Vector2(0,0),flipY:!0,mapping:r.UVMapping,format:r.RGBFormat,type:r.UnsignedByteType,generateMipmaps:!0,premultiplyAlpha:!1,unpackAlignment:4,needsUpdate:!0,autoplay:!0,loop:!0,muted:!0,playsinline:!0},n=Object.assign(Object.assign({},t),e),i=new r.VideoTexture(n.videoDom);return i.wrapS=n.wrapS,i.wrapT=n.wrapT,i.magFilter=n.magFilter,i.minFilter=n.minFilter,i.anisotropy=n.anisotropy,Array.isArray(n.repeat)?i.repeat.set(n.repeat[0],n.repeat[1]):i.repeat.copy(n.repeat),Array.isArray(n.offset)?i.offset.set(n.offset[0],n.offset[1]):i.offset.copy(n.offset),i.flipY=n.flipY,i.mapping=n.mapping,i.format=n.format,i.type=n.type,i.generateMipmaps=n.generateMipmaps,i.premultiplyAlpha=n.premultiplyAlpha,i.unpackAlignment=n.unpackAlignment,i.needsUpdate=n.needsUpdate,i}}},5755:function(e,t,n){"use strict";var r,i=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),o=this&&this.__importStar||(r=function(e){return r=Object.getOwnPropertyNames||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[t.length]=n);return t},r(e)},function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n=r(e),o=0;o<n.length;o++)"default"!==n[o]&&i(t,e,n[o]);return s(t,e),t}),a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TModel=void 0;const c=o(n(8074)),l=n(9437),u=n(1728),h=n(2933),d=n(4092),p=n(9702),f=n(7070),m=n(9289),g=n(8263),A=n(1051),y=n(9145),_=n(9271),v=n(785),b=n(2281),x=a(n(1710)),w=n(9662),E=n(1445);t.TModel=class{constructor(){this.MANAGER=new l.LoadingManager,this.FBXLoader=new h.FBXLoader,this.STLLoader=new p.STLLoader,this.OBJLoader=new f.OBJLoader,this.SVGLoader=new m.SVGLoader,this.ObjectLoader=new l.ObjectLoader,this.GLTFLoader=new d.GLTFLoader(this.MANAGER),this.DRACO_LOADER=new u.DRACOLoader(this.MANAGER),this.KTX2_LOADER=new g.KTX2Loader(this.MANAGER),this.material=new y.TMaterial,this.font=new b.TFont,this.indexedDB=new v.TIndexedDB,console.log("ThingOrigin",w.ThingOrigin.sceneData),this.DRACO_LOADER.setDecoderPath(w.ThingOrigin.sceneData.params.loader.draco),this.KTX2_LOADER.setTranscoderPath(w.ThingOrigin.sceneData.params.loader.ktx2),this.GLTFLoader.setCrossOrigin("anonymous").setDRACOLoader(this.DRACO_LOADER).setKTX2Loader(this.KTX2_LOADER).setMeshoptDecoder(A.MeshoptDecoder)}async loadModel(e){let t;switch(e.modelType){case"sphere":let n=this.initSphere(e);t=(0,E.setModelConfig)(n,e);break;case"cube":let r=this.initCube(e);t=(0,E.setModelConfig)(r,e);break;case"cylinder":let i=this.initCylinder(e);t=(0,E.setModelConfig)(i,e);break;case"cone":let s=this.initCone(e);t=(0,E.setModelConfig)(s,e);break;case"circle":let o=this.initCircle(e);t=(0,E.setModelConfig)(o,e);break;case"gltf":case"glb":case"fbx":case"obj":case"stl":case"json":let a=await this.indexedDB.getIDBModelInfo(e);return new Promise(((t,n)=>{this.initFileModel(a).then((n=>{let r;-1!==["gltf","glb"].indexOf(e.modelType)?(r=n.scene,r.animations=n.animations):r=n,t((0,E.setModelConfig)(r,a))}))}));case"zip":let c=await this.initZip(e);return new Promise(((t,n)=>{t((0,E.setModelConfig)(c.scene,e))}));case"text":let l=(0,_.cloneDeep)(e);switch(e.base.textType){case"text":let n=await this.font.initText(l);t=(0,E.setModelConfig)(n,e);break;case"traceText":let r=await this.font.initTextLine(l);t=(0,E.setModelConfig)(r,e);break;case"shapeText":let i=await this.font.initTextShape(l);t=(0,E.setModelConfig)(i,e)}break;case"assemble":let u=await this.initAssemble(e);t=(0,E.setModelConfig)(u,e)}return t}async initSimTexts(e,t){var n,r;const i={id:2002,text:"形状文字",modelName:"traceText",modelType:"text",modelSize:null,scale:{x:1,y:1,z:1},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0},base:{fontUrl:w.ThingOrigin.sceneData.params.resource.font_Microsoft,height:100,text:"形状文字",textType:"shapeText",color:"#f00",lineWidth:2,opacity:1,size:1.5},material:null,userData:null},s=await this.indexedDB.accessModel(i);if(s.info.saved)i.base.fontUrl=s.modelUrl;else{const e=await this.indexedDB.insertModel(i);e.info.saved&&(i.base.fontUrl=e.modelUrl)}for(const s of null===(r=null===(n=e.userData)||void 0===n?void 0:n.sim)||void 0===r?void 0:r.simTexts)Object.assign(i,s),i.base.text=s.text,this.font.initTextShape(i).then((e=>{"夹取"===i.base.text?t.traverse((t=>{"WS30-5"===t.name&&t.attach(e)})):t.attach(e)}))}initFileModel(e){let t={modelType:"gltf",modelName:"fileModel-"+(new Date).getTime(),base:{modelUrl:"http://124.70.30.193:8084/model2/loadFileAsId/3011"},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}},n=(0,_.merge)(t,e);return new Promise((async t=>{switch(n.modelType){case"fbx":console.log(this.FBXLoader),this.FBXLoader.load(e.base.modelUrl,(e=>{let r=(0,E.setModelConfig)(e,n);t(r)}));break;case"obj":this.OBJLoader.load(e.base.modelUrl,(e=>{let r=(0,E.setModelConfig)(e,n);t(r)}));break;case"stl":this.STLLoader.load(e.base.modelUrl,(e=>{var r=new l.MeshLambertMaterial;r.side=l.DoubleSide;var i=new l.Mesh(e,r);let s=(0,E.setModelConfig)(i,n);t(s)}));break;case"gltf":case"glb":this.GLTFLoader.load(e.base.modelUrl,(e=>{let r=(0,E.setModelConfig)(e.scene,n);e.scene=r,t(e)}));break;case"json":this.ObjectLoader.load(e.base.modelUrl,(e=>{let r=(0,E.setModelConfig)(e,n);t(r)}));break;default:console.warn("未定义模型类型，导入失败"),t(null)}}))}async initZip(e){const t=await fetch(e.base.modelUrl),n=await t.arrayBuffer(),r=await x.default.loadAsync(n),i=new Map;let s,o;await Promise.all(Object.values(r.files).map((async e=>{if(e.dir)return;const t=await e.async("blob");Object.defineProperty(t,"name",{value:e.name,writable:!1,enumerable:!0,configurable:!0}),i.set(e.name,t)}))),Array.from(i).forEach((([e,t])=>{t.name.match(/\.(gltf|glb)$/)&&(s=t,o=e.replace(t.name,""))})),s||console.error(".gltf 或者 .glb文件没找到");const a="string"==typeof s?s:URL.createObjectURL(s),c=l.LoaderUtils.extractUrlBase(a);return new Promise(((e,t)=>{this.MANAGER.setURLModifier((e=>{const t=o+decodeURI(e).replace(c,"").replace(/^(\.?\/)/,"");if(i.has(t)){const e=i.get(t),r=URL.createObjectURL(e);return n.push(r),r}return e}));const n=[];this.GLTFLoader.load(a,(t=>{if(!(t.scene||t.scenes[0]))throw new Error("此模型不包含场景");n.forEach(URL.revokeObjectURL),e(t)}),void 0,t)}))}async initAssemble(e){let t={modelName:"assemble-"+(new Date).getTime(),base:{children:[]},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}},n=(0,_.merge)(t,e),r=[];for(let e=0;e<n.base.children.length;e++)if(-1!=["gltf"].indexOf(n.base.children[e].modelType)){let t={id:n.base.children[e].id,modelName:n.base.children[e].name,base:{modelUrl:n.base.children[e].base.modelUrl},modelType:"gltf",loadType:"userModel",scale:{x:1,y:1,z:1},position:{x:0,y:0,z:0},rotation:{x:0,y:0,z:0}};(await this.indexedDB.accessInsertModel(t)).saved?r.push(!0):r.push(!1)}else r.push(!0);let i=null;if(r.length==n.base.children.length)switch(console.log("组合内模型全部加载完成",n),e.base.loadType){case"shelf":i=await this.initShelf(n);break;case"normal":i=this.initGroup(e);for(const t of e.base.children)switch(t.modelType){case"sphere":let e=this.initSphere(t);i.add(e);break;case"cube":let n=this.initCube(t);i.add(n);break;case"cylinder":let r=this.initCylinder(t);i.add(r);break;case"cone":let s=this.initCone(t);i.add(s);break;case"circle":let o=this.initCircle(t);i.add(o);break;case"gltf":let a,c=await this.indexedDB.getIDBModelInfo(t),l=await this.initFileModel(c);"gltf"===t.modelType?(a=l.scene,a.animations=l.animations):a=l,i.add(a)}}return(0,E.setModelConfig)(i,n)}initGroup(e){let t={modelName:"group-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}},n=(0,_.merge)(t,e),r=new l.Group;return(0,E.setModelConfig)(r,n)}initCube(e,t){let n={modelName:"cube-"+(new Date).getTime(),modelType:"cube",position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{width:10,height:10,depth:10,widthSegments:1,heightSegments:1,depthSegments:1},material:{color:"#f00",type:"MeshLambertMaterial"}},r=(0,_.merge)(n,e),i=new l.BoxGeometry(r.base.width,r.base.height,r.base.depth,r.base.widthSegments,r.base.heightSegments,r.base.depthSegments);t||(t=new l.MeshLambertMaterial({color:r.material.color}));const s=new l.Mesh(i,t);return(0,E.setModelConfig)(s,r)}async initPlane(e){let t,n={modelName:"plane-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:-Math.PI/2,y:0,z:0},base:{width:10,height:10,widthSegments:32,heightSegments:32,doubleSide:!1},material:{type:"color",color:{color:"#eee",opacity:1},image:{url:"/public/image/ground.jpg",repeat:{width:1e3,height:1e3}}}},r=(0,_.merge)(n,e),i=this.initPlaneGeometry(r.base.width,r.base.height);switch(r.material.type){case"color":t=new l.MeshBasicMaterial({color:r.material.color.color,transparent:!0,opacity:r.material.color.opacity});break;case"image":t=await this.material.initImageMaterial(r.material.image),console.log(t)}r.base.doubleSide&&(t.side=l.DoubleSide);const s=new l.Mesh(i,t);return(0,E.setModelConfig)(s,r)}async initShelf(e){let t,n,r,i={modelName:"shelf-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{rows:3,columns:4,height:7.9,depth:9,width:9,children:[{name:"shelf-Footer",id:300,modelType:"gltf",base:{modelUrl:w.ThingOrigin.sceneData.params.resource.model+"/shelf-Footer.gltf"}},{name:"shelf-OneSide",id:301,modelType:"gltf",base:{modelUrl:w.ThingOrigin.sceneData.params.resource.model+"/shelf-OneSide.gltf"}},{name:"shelf-ThreeSide",id:302,modelType:"gltf",base:{modelUrl:w.ThingOrigin.sceneData.params.resource.model+"/shelf-ThreeSide.gltf"}}]}},s=(0,_.merge)(i,e);for(let e=0;e<s.base.children.length;e++)await this.initFileModel(s.base.children[e]).then((i=>{"shelf-Footer"==s.base.children[e].name?t=i.scene:"shelf-ThreeSide"==s.base.children[e].name?n=i.scene:"shelf-OneSide"==s.base.children[e].name&&(r=i.scene)}));let o=this.initGroup(),a=this.initGroup(),c=this.initGroup();for(let e=0;e<s.base.columns;e++){let t=n.clone();t.name="threeSide"+(e+1),t.position.set(0,e*s.base.height,0),n.name="shelf-row-column"+(e+1),a.add(t);let i=r.clone();i.position.set(s.base.width*s.base.rows,e*s.base.height,0),i.name="shelf-right-column"+(e+1),c.add(i)}c.name="shelf-right",o.add(c);for(let e=0;e<s.base.rows;e++){let t=a.clone();t.position.set(s.base.width*e,0,0),t.name="shelf-row"+(e+1),o.add(t)}return(0,E.setModelConfig)(o,s)}initSphere(e,t){var n,r,i,s;let o,a={modelName:"sphere-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{radius:10,widthSegments:15,heightSegments:15},material:{color:"#f00"}},c=(0,_.merge)(a,e);o=new l.SphereGeometry(c.base.radius,c.base.widthSegments,c.base.heightSegments,null===(n=c.base)||void 0===n?void 0:n.phiStart,null===(r=c.base)||void 0===r?void 0:r.phiLength,null===(i=c.base)||void 0===i?void 0:i.thetaStart,null===(s=c.base)||void 0===s?void 0:s.thetaLength),t||(t=new l.MeshLambertMaterial({color:c.material.color}));const u=new l.Mesh(o,t);return(0,E.setModelConfig)(u,c)}initCone(e){var t,n,r,i,s,o,a;let c,u={modelName:"cone-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{radius:10,height:20},material:{color:"#f00"}},h=(0,_.merge)(u,e);c=new l.ConeGeometry(null===(t=h.base)||void 0===t?void 0:t.radius,null===(n=h.base)||void 0===n?void 0:n.height,null===(r=h.base)||void 0===r?void 0:r.radialSegments,null===(i=h.base)||void 0===i?void 0:i.heightSegments,null===(s=h.base)||void 0===s?void 0:s.openEnded,null===(o=h.base)||void 0===o?void 0:o.thetaStart,null===(a=h.base)||void 0===a?void 0:a.thetaLength);let d=new l.MeshLambertMaterial({color:h.material.color});const p=new l.Mesh(c,d);return p.name=h.name,(0,E.setModelConfig)(p,h)}initCylinder(e){var t,n,r,i,s,o,a,c;let u,h={modelName:"cylinder-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{radiusTop:10,radiusBottom:10,height:20,radialSegments:32},material:{color:"#f00"}},d=(0,_.merge)(h,e);u=new l.CylinderGeometry(null===(t=d.base)||void 0===t?void 0:t.radiusTop,null===(n=d.base)||void 0===n?void 0:n.radiusBottom,null===(r=d.base)||void 0===r?void 0:r.height,null===(i=d.base)||void 0===i?void 0:i.radialSegments,null===(s=d.base)||void 0===s?void 0:s.heightSegments,null===(o=d.base)||void 0===o?void 0:o.openEnded,null===(a=d.base)||void 0===a?void 0:a.thetaStart,null===(c=d.base)||void 0===c?void 0:c.thetaLength);let p=new l.MeshLambertMaterial({color:d.material.color});const f=new l.Mesh(u,p);return f.name=d.name,(0,E.setModelConfig)(f,d)}initCircle(e){let t={modelName:"circle-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{radius:5,segments:32,thetaStart:0,thetaLength:2*Math.PI},material:{color:"#f00",doubleSide:!0}},n=(0,_.merge)(t,e),r=new l.CircleGeometry(n.base.radius,n.base.segments,n.base.thetaStart,n.base.thetaLength),i=new l.MeshBasicMaterial({color:n.material.color});i.side=l.DoubleSide;let s=new l.Mesh(r,i);return(0,E.setModelConfig)(s,n)}initMap(e){let t={modelName:"map-"+(new Date).getTime(),base:{url:""},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}},n=(0,_.merge)(t,e),r=new l.FileLoader;return new Promise((e=>{r.load(n.base.url,(t=>{let r=JSON.parse(t);var i=new l.Object3D;const s=c.geoMercator().center([104,37.5]).scale(80).translate([0,0]);r.features.forEach((e=>{const t=new l.Object3D;if(e.geometry.coordinates.forEach((e=>{e.forEach((e=>{const n=new l.Shape,r=new l.LineBasicMaterial({color:"white"});let i=[];for(let t=0;t<e.length;t++){const[r,o]=s(e[t]);0===t&&n.moveTo(r,-o),n.lineTo(r,-o),i.push(new l.Vector3(r,-o,4.01))}const o=(new l.BufferGeometry).setFromPoints(i),a=new l.ExtrudeGeometry(n,{depth:4,bevelEnabled:!1}),c=new l.MeshBasicMaterial({color:"#02A1E2",transparent:!0,opacity:.6}),u=new l.MeshBasicMaterial({color:"#3480C4",transparent:!0,opacity:.5}),h=new l.Mesh(a,[c,u]),d=new l.Line(o,r);t.add(h),t.add(d)}))})),t.properties=e.properties,e.properties.contorid){const[n,r]=s(e.properties.contorid);t.properties._centroid=[n,r]}i.add(t)})),e((0,E.setModelConfig)(i,n))}))}))}initVideoPlane(e,t){let n={modelName:"videoPlane-"+(new Date).getTime(),base:{width:250,height:100},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}},r=(0,_.merge)(n,t),i=this.initPlaneGeometry(r.base.width,r.base.height);var s=new l.MeshPhongMaterial;s.side=l.DoubleSide,s.map=this.material.initVideoTexture({videoDom:e});var o=new l.Mesh(i,s);return(0,E.setModelConfig)(o,r)}initPoints(e){let t={modelName:"points-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{positions:[],pointConfigs:{color:"#f00",size:1.5},offset:{x:0,y:0,z:0},scale:1}};for(let e=0;e<100;e++)t.base.positions.push({x:100*Math.random(),y:100*Math.random(),z:100*Math.random()});let n=(0,_.merge)(t,e),r=[];for(let e=0;e<n.base.positions.length;e++)r.push(new l.Vector3((n.base.positions[e].x+n.base.offset.x)*n.base.scale,(n.base.positions[e].y+n.base.offset.y)*n.base.scale,(n.base.positions[e].z+n.base.offset.z)*n.base.scale));var i=(new l.BufferGeometry).setFromPoints(r),s=this.material.initPointsMaterial({color:n.base.pointConfigs.color,size:n.base.pointConfigs.size}),o=new l.Points(i,s);return(0,E.setModelConfig)(o,n)}initPoints2(e){let t={modelName:"points-"+(new Date).getTime(),position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0},base:{positions:[],pointConfigs:{colorType:"unite",color:{r:1,g:0,b:0},size:1.5},offset:{x:0,y:0,z:0},scale:1}},n=(0,_.merge)(t,e),r=new Float32Array(3*n.base.positions.length),i=new Float32Array(3*n.base.positions.length);for(let e=0;e<n.base.positions.length;e++)r[3*e]=(n.base.positions[e][n.base.property.x]+n.base.offset.x)*n.base.scale,r[3*e+1]=(n.base.positions[e][n.base.property.y]+n.base.offset.y)*n.base.scale,r[3*e+2]=(n.base.positions[e][n.base.property.z]+n.base.offset.z)*n.base.scale,"unite"===n.base.pointConfigs.colorType?(i[3*e]=n.base.pointConfigs.color.r,i[3*e+1]=n.base.pointConfigs.color.g,i[3*e+2]=n.base.pointConfigs.color.b):"onself"===n.base.pointConfigs.colorType?(i[3*e]=n.base.pointConfigs[e].r,i[3*e+1]=n.base.pointConfigs[e].g,i[3*e+2]=n.base.pointConfigs[e].b):"random"===n.base.pointConfigs.colorType&&(i[3*e]=Math.random(),i[3*e+1]=Math.random(),i[3*e+2]=Math.random());var s=new l.BufferGeometry;s.setAttribute("position",new l.BufferAttribute(r,3)),s.setAttribute("color",new l.BufferAttribute(i,3));const o=new l.PointsMaterial({size:n.base.pointConfigs.size,vertexColors:!0});let a=new l.Points(s,o);return(0,E.setModelConfig)(a,n)}initSpriteShape(e){let t={modelName:"spriteShape-"+(new Date).getTime(),base:{positions:[],spriteShape:{shape:"sphere",color:"#f00",radius:5}},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}};for(let e=0;e<100;e++)t.base.positions.push({name:"sprite"+e,x:100*Math.random(),y:100*Math.random(),z:100*Math.random()});let n=(0,_.merge)(t,e),r=document.createElement("canvas");r.width=20,r.height=20;let i=r.getContext("2d");"sphere"==n.base.spriteShape.shape?i.arc(10,10,10,0,2*Math.PI):"triangle"==n.base.spriteShape.shape&&(i.beginPath(),i.moveTo(10,15),i.lineTo(20,0),i.lineTo(0,0),i.closePath(),i.lineWidth=10),i.fillStyle=n.base.spriteShape.color,i.fill();let s=new l.Texture(r);s.needsUpdate=!0;let o=new l.SpriteMaterial({map:s}),a=new l.Group;for(var c=0;c<n.base.positions.length;c++){var u=new l.Sprite(o.clone());n.base.positions[c].name&&(u.name=n.base.positions[c].name),u.position.set(n.base.positions[c].x,n.base.positions[c].y,n.base.positions[c].z),u.scale.set(n.base.spriteShape.radius,n.base.spriteShape.radius,1),a.add(u)}return(0,E.setModelConfig)(a,n)}initSpritePic(e){let t={modelName:"spritePic-"+(new Date).getTime(),base:{positions:[],spriteShape:{url:"",size:10}},position:{x:0,y:0,z:0},scale:{x:1,y:1,z:1},rotation:{x:0,y:0,z:0}};for(let e=0;e<100;e++)t.base.positions.push({name:"sprite"+e,x:100*Math.random(),y:100*Math.random(),z:100*Math.random()});let n=(0,_.merge)(t,e);const r=(new l.TextureLoader).load(n.base.spritePic.url),i=new l.SpriteMaterial({map:r});let s=new l.Group;for(var o=0;o<n.base.positions.length;o++){var a=new l.Sprite(i.clone());n.base.positions[o].name&&(a.name=n.base.positions[o].name),a.position.set(n.base.positions[o].x,n.base.positions[o].y,n.base.positions[o].z),a.scale.set(n.base.spritePic.size,n.base.spritePic.size,1),s.add(a)}return(0,E.setModelConfig)(s,n)}initPlaneGeometry(e,t){return new l.PlaneGeometry(e,t)}initBufferGeometry(){return new l.BufferGeometry}initBufferAttribute(e,t){return new l.BufferAttribute(e,t)}initMesh(e,t){return new l.Mesh(e,t)}}},8147:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TPhysics=void 0;const r=n(4236),i=n(9437),s=n(9271);t.TPhysics=class{constructor(e){this.TO=e}initWorld(e){let t=(0,s.merge)({allowSleep:!1,gravity:{x:0,y:-9.82,z:0}},e);return this.world=new r.World({gravity:new r.Vec3(t.gravity.x,t.gravity.y,t.gravity.z)}),this.world}initVec3(e,t,n){return new r.Vec3(e,t,n)}initRay(e,t){return new r.Ray(e,t)}initPlane(e){let t={mass:0,friction:0,restitution:.5,position:{x:0,y:0,z:0},quaternion:{x:-Math.PI/2,y:0,z:0}},n=(0,s.merge)(t,e),i=new r.Plane;const o=new r.Material("planeMaterial");o.friction=n.friction,o.restitution=n.restitution;let a=new r.Body({mass:n.mass,shape:i,material:o,position:new r.Vec3(n.position.x,n.position.y,n.position.z)});return a.quaternion.setFromEuler(-Math.PI/2,0,0),a}initBox(e){let t=Object.assign({x:1,y:1,z:1},e);return new r.Box(new r.Vec3(t.x,t.y,t.z))}initBoxBody(e){let t={mass:1,friction:0,restitution:.5,position:{x:0,y:0,z:0},quaternion:{x:-Math.PI/2,y:0,z:0},base:{width:5,height:5,depth:5}},n=(0,s.merge)(t,e);const i=new r.Vec3(n.base.width/2,n.base.height/2,n.base.depth/2),o=new r.Box(i),a=new r.Material("boxMaterial");a.friction=n.friction,a.restitution=n.restitution;const c=new r.Body({mass:n.mass,shape:o,material:a,position:new r.Vec3(n.position.x,n.position.y,n.position.z),allowSleep:!0});return c.name=n.modelName,c.userData=n.userData,c}initSphere(e){let t={mass:1,friction:0,restitution:.5,position:{x:0,y:0,z:0},quaternion:{x:-Math.PI/2,y:0,z:0},base:{radius:5}},n=(0,s.merge)(t,e);const i=new r.Sphere(n.base.radius/2),o=new r.Material("sphereMaterial");o.friction=n.friction,o.restitution=n.restitution;return new r.Body({mass:1,shape:i,material:o,position:new r.Vec3(n.position.x,n.position.y,n.position.z)})}initCylinder(e){let t={mass:1,friction:0,restitution:.5,position:{x:0,y:0,z:0},quaternion:{x:-Math.PI/2,y:0,z:0},base:{radiusTop:2,radiusBottom:2,height:2,numSegments:12}},n=(0,s.merge)(t,e);const i=new r.Cylinder(n.base.radiusTop/2,n.base.radiusBottom/2,n.base.height/2,n.base.numSegments/2),o=new r.Material("cylinderMaterial");o.friction=n.friction,o.restitution=n.restitution;return new r.Body({mass:1,shape:i,material:o,position:new r.Vec3(n.position.x,n.position.y,n.position.z)})}initPhyModelByBox(e,t){let n=(0,s.merge)({mass:0,friction:0,restitution:.5,position:{x:0,y:0,z:0},quaternion:{x:0,y:0,z:0}},t);const o=new r.Material("modelMaterial");o.friction=n.friction,o.restitution=n.restitution;let a=new r.Body({mass:0,position:new r.Vec3(e.position.x,e.position.y,e.position.z),material:o});return e.traverse((e=>{if(e.isMesh){let t=this.TO.tool.getModelBox(e);const n=this.TO.tool.getModelSphere(e),r=t.getSize(new i.Vector3),s=t.getCenter(new i.Vector3);console.log("boundBox:",t),console.log("boundSphere:",n),console.log("size:",r),console.log("center:",s);const o={x:r.x/2,y:r.y/2,z:r.z/2};let c=this.initBox(o);c.name=e.name,console.log("shape:",c),a.addShape(c),c.body.position.set(s.x,s.y,s.z)}})),a.name=e.name,a}initPhyModelByTrimesh(e){let t=new r.Body({mass:0,position:new r.Vec3(e.position.x,e.position.y,e.position.z)});return e.traverse((e=>{var n;if(e.isMesh){console.log("child",e);const o=this.TO.tool.getModelSphere(e);console.log("boundSphere",o);let a=new r.Trimesh(e.geometry.attributes.position.array,null===(n=e.geometry.index)||void 0===n?void 0:n.array);const c=e.localToWorld(this.TO.tool.initVector3()),l=e.quaternion.clone();var i=new r.Vec3(c.x,c.y,c.z),s=new r.Quaternion(l.x,l.y,l.z,l.w);a.name=e.name,t.addShape(a,i,s)}})),t.name=e.name,t}initBody(e){return new r.Body(e)}initPointConstraint(e){return new r.PointToPointConstraint(e.bodyA,new r.Vec3(e.pivotA.x,e.pivotA.y,e.pivotA.z),e.bodyB,new r.Vec3(e.pivotB.x,e.pivotB.y,e.pivotB.z))}initLockConstraint(e,t){return new r.LockConstraint(e,t)}initRaycastResult(){return new r.RaycastResult}}},2479:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TRenderer=void 0;const r=n(9437),i=n(6074),s=n(9662);t.TRenderer=class{constructor(e){this.rendererView=new Map,this.TO=e;let t={logarithmicDepthBuffer:s.ThingOrigin.sceneData.scene.renderQuality.logarithmicDepthBuffer,antialias:s.ThingOrigin.sceneData.scene.renderQuality.antialias};this.renderer=new r.WebGLRenderer(t),this.renderer.autoClear=s.ThingOrigin.sceneData.scene.renderQuality.autoClear,this.renderer.setPixelRatio(2*window.devicePixelRatio),this.renderer.setSize(this.TO.container.clientWidth,this.TO.container.clientHeight),s.ThingOrigin.sceneData&&s.ThingOrigin.sceneData.scene.renderQuality.shadowMap.enabled&&(this.renderer.shadowMap.enabled=s.ThingOrigin.sceneData.scene.renderQuality.shadowMap.enabled,this.renderer.shadowMap.type=r.PCFSoftShadowMap),this.renderer.domElement.style.position="absolute",this.renderer.domElement.style.bottom="0",this.TO.container.appendChild(this.renderer.domElement),this.CSS2DRenderer=new i.CSS2DRenderer,this.CSS2DRenderer.setSize(this.TO.container.clientWidth,this.TO.container.clientHeight),this.CSS2DRenderer.domElement.id="CSS2DDom",this.CSS2DRenderer.domElement.style.position="absolute",this.CSS2DRenderer.domElement.style.bottom="0",this.TO.container.appendChild(this.CSS2DRenderer.domElement)}}},8754:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TScene=void 0;const r=n(9437),i=n(9662),s=n(9271),o=n(3950),a=n(7231),c=n(5755);class l extends r.Scene{constructor(e){super(),this.model=new c.TModel,this.TO=e,console.log("TScene",i.ThingOrigin.sceneData)}traverse(e){e(this);for(const t of this.children)t.traverse(e)}getModelByName(e){return this.getObjectByProperty("name",e)}setBackground(){switch(i.ThingOrigin.sceneData.scene.background.type){case"sky":this.initSky();break;case"color":this.setBackgroundColor({color:i.ThingOrigin.sceneData.scene.background.color.color,alpha:i.ThingOrigin.sceneData.scene.background.color.alpha});break;case"img":this.setBackgroundImg(i.ThingOrigin.sceneData.scene.background.img.url);break;case"cubeMap":this.setBackgroundCubeMap(i.ThingOrigin.sceneData.scene.background.cubeMap);break;case"workshop":this.setWorkshop(i.ThingOrigin.sceneData.scene.background.workshop)}}initSky(e={top:"#86b6f5",line:"#ffffff",bottom:"#999999"},t={radius:4e3,widthSegments:32,heightSegments:15,skyCenter:{x:0,y:0,z:0}}){const n=new r.SphereGeometry(t.radius,t.widthSegments,t.heightSegments),i=new r.ShaderMaterial({uniforms:{topColor:{value:new r.Color(e.top)},skylineColor:{value:new r.Color(e.line)},bottomColor:{value:new r.Color(e.bottom)},offset:{value:400},exponent:{value:.9},skyCenter:{value:new r.Vector3(t.skyCenter.x,t.skyCenter.y,t.skyCenter.z)||new r.Vector3}},vertexShader:"\n            varying vec3 vWorldPosition;\n            void main() {\n              vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n              vWorldPosition = worldPosition.xyz;\n              gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n            }",fragmentShader:"\n            uniform vec3 topColor;\n            uniform vec3 skylineColor;\n            uniform vec3 bottomColor;\n            uniform float offset;\n            uniform float exponent;\n            uniform vec3 skyCenter;\n            varying vec3 vWorldPosition;\n            void main() {\n              vec3 position = vec3(vWorldPosition.x - skyCenter.x, vWorldPosition.y - skyCenter.y, vWorldPosition.z - skyCenter.z);\n              float h = normalize( position + offset ).y;\n              vec3 color;\n              if (h > 0.0) {\n                color = mix( skylineColor, topColor, max( pow( max( h, 0.0 ), exponent ), 0.0 ) );\n              } else {\n                color = mix( skylineColor, bottomColor, max( pow( max( -h, 0.0 ), exponent ), 0.0 ) );\n              }\n              gl_FragColor = vec4(color , 1.0 );\n            }",side:r.BackSide}),s=new r.Mesh(n,i);s.name="sky",s.userData.selectable=!1,this.add(s)}setBackgroundColor(e){let t=this.getObjectByName("sky");t&&this.remove(t),1!=e.alpha?(this.TO.renderer.renderer.setClearColor(e.color,e.alpha),this.background=null):this.background=new r.Color(e.color)}setBackgroundCubeMap(e){const t=(new r.CubeTextureLoader).load(e.url);this.background=t}setWorkshop(e){this.background=null;let t=this.getObjectByName("TO_workshop");t&&this.remove(t),this.model.initFileModel({modelType:e.modelType,modelName:"TO_workshop",base:{modelUrl:e.url},scale:{x:15,y:15,z:15}}).then((e=>{this.add(e.scene)}))}setEnvironment(){switch(i.ThingOrigin.sceneData.scene.environment.type){case"roomEnvironment":this.setRoomEnvironment();break;case"EquirectangularReflectionMapping":this.setEquirectangularReflectionMapping(i.ThingOrigin.sceneData.scene.environment.EquirectangularReflectionMappingConfig)}}setRoomEnvironment(){const e=new r.PMREMGenerator(this.TO.renderer.renderer).fromScene(new o.RoomEnvironment).texture;this.environment=e}setEquirectangularReflectionMapping(e){(new a.RGBELoader).load(e.url,(e=>{e.mapping=r.EquirectangularReflectionMapping,this.environment=e}))}setToneMapping(){switch(i.ThingOrigin.sceneData.scene.renderQuality.toneMapping.type){case"NoToneMapping":this.TO.renderer.renderer.toneMapping=r.NoToneMapping;break;case"LinearToneMapping":this.TO.renderer.renderer.toneMapping=r.LinearToneMapping;break;case"ReinhardToneMapping":this.TO.renderer.renderer.toneMapping=r.ReinhardToneMapping;break;case"CineonToneMapping":this.TO.renderer.renderer.toneMapping=r.CineonToneMapping;break;case"ACESFilmicToneMapping":this.TO.renderer.renderer.toneMapping=r.ACESFilmicToneMapping}this.TO.renderer.renderer.toneMappingExposure=1}setBackgroundImg(e){this.background=(new r.TextureLoader).load(e)}cloneObject(e,t){if(!e)return void console.warn("克隆失败失败，物体不存在");let n=new r.Group,i=e.clone();return e.parent.matrixWorld.decompose(n.position,n.quaternion,n.scale),n.updateMatrixWorld(!0),e.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld(!0),i.position.set(t.x,t.y,t.z),n.attach(i),n}removeModelByName(e){let t=this.getObjectByProperty("name",e);t?(t.traverse((e=>{if(t.uuid!=e.uuid&&e.isCSS2DObject&&this.TO.marker.removeMarker(e.parent),e.material)if(Array.isArray(e.material))for(let t=0;t<e.material.length;t++)e.material[t].dispose();else e.material.dispose();e.geometry&&e.geometry.dispose()})),t.parent.remove(t),this.TO.helper.removeBox()):console.warn("删除模型失败，物体不存在")}playAnimation(e,t,n,i=1){if(this.TO.mixer=new r.AnimationMixer(e),this.TO.tool.isArray(t))console.log("数组类型,要求播放多个动画");else if(e.animations[t]){let s=this.TO.mixer.clipAction(e.animations[t]);n&&(s.clampWhenFinished=!0,s.loop=r.LoopOnce),s.timeScale=i,s.play()}else console.warn("模型不存在下标为"+t+"的动画")}getOrderModelName(e){let t=1;for(;this.getObjectByName(e+"-"+t);)t++;return{modelName:e+"-"+t,id:t}}cloneModel(e,t){if(!e)return void console.warn("克隆模型失败，物体不存在");let n=e.clone(),r=this.getOrderModelName(e.name+"-copy").modelName;n.name=r,n.modelName=r,n.userData.rootName=r;let i=this.TO.tool.getModelBox(n);n.position.x=e.position.x+1.1*(i.max.x-i.min.x);let o=this.TO.tool.getModelInfo(n);return{model:n,info:(0,s.merge)((0,s.cloneDeep)(t),o)}}setVisible(e,t){let n=this.TO.scene.getObjectByProperty("name",e);n?n.visible=t:console.warn("物体控制显示隐藏失败，物体不存在")}generateSnapshot(e=1){return new Promise(((t,n)=>{this.TO.renderer.renderer.render(this.TO.scene,this.TO.camera.camera);try{const{width:i,height:s}=this.TO.renderer.renderer.getSize(new r.Vector2),o=Math.floor(i*e),a=Math.floor(s*e);let c=document.createElement("canvas");c.width=o,c.height=a;if(!c.getContext("2d"))throw new Error("无法获取canvas上下文");const l=this.TO.renderer.renderer.domElement;if(c instanceof HTMLCanvasElement){const e=c.getContext("2d");e&&e.drawImage(l,0,0,o,a)}c instanceof HTMLCanvasElement?c.toBlob((e=>{e?t(e):n(new Error("生成Blob失败"))}),"image/webp",1):n(new Error("不支持的canvas类型"))}catch(e){console.error("生成快照失败:",e),n(e)}}))}}t.TScene=l},9388:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TSnap=void 0;const r=n(6422),i=n(1772);t.TSnap=class{constructor(){this.tool=new i.Tool,this.line=new r.TLine}snapPoint(e,t){const n=t.position.clone().sub(e.position);e.model.position.add(n),e.model.updateMatrixWorld(!0)}snapLine(e,t){const n=this.line.getLineDirection(e.line),r=this.line.getLineDirection(t.line),i=n.clone(),s=r.clone();s.angleTo(i.negate())<s.angleTo(i)&&i.negate();const o=this.tool.initQuaternion().setFromUnitVectors(s.normalize(),i.normalize());t.model.applyQuaternion(o);const a=this.tool.initBox3().setFromObject(e.line).getCenter(this.tool.initVector3()),c=this.tool.initBox3().setFromObject(t.line).getCenter(this.tool.initVector3());t.model.position.add(a.sub(c))}snapFace(e,t){const n=e.normal.clone().normalize(),r=t.normal.clone().normalize(),i=e=>{const t=e.geometry.attributes.position,n=this.tool.initVector3();for(let r=0;r<3;r++){const i=this.tool.initVector3().fromBufferAttribute(t,r).applyMatrix4(e.matrixWorld);n.add(i)}return n.divideScalar(3)},s=i(e.face),o=i(t.face),a=t.model.position.clone(),c=(t.model.quaternion.clone(),t.model.scale.clone(),this.tool.initQuaternion().setFromUnitVectors(r,n)),l=o.clone().sub(a).applyQuaternion(c).add(a),u=s.clone().sub(l);t.model.position.add(u),t.model.applyQuaternion(c)}}},1772:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Tool=void 0;const r=n(9437);t.Tool=class{initColor(e){return e?new r.Color(e):new r.Color}initVector2(e,t){return new r.Vector2(e,t)}initVector3(e,t,n){return new r.Vector3(e,t,n)}initVector4(e,t,n,i){return new r.Vector4(e,t,n,i)}initVector3ByAxis(e,t=1){let n;return"x"==e?n=new r.Vector3(t,0,0):"y"==e?n=new r.Vector3(0,t,0):"z"==e&&(n=new r.Vector3(0,0,t)),n}initMatrix3(){return new r.Matrix3}initMatrix4(){return new r.Matrix4}initQuaternion(){return new r.Quaternion}initBox3(){return new r.Box3}initEuler(e,t,n,i){return new r.Euler(e,t,n,i)}getModelCenter(e){return this.getModelBox(e).getCenter(new r.Vector3)}getModelBox(e){let t=new r.Box3;return t.expandByObject(e),t}getModelSize(e){let t=this.getModelBox(e);return{max:t.max,min:t.min,width:t.max.x-t.min.x,height:t.max.y-t.min.y,depth:t.max.z-t.min.z,center:t.getCenter(new r.Vector3)}}getModelSphere(e){if(!e)return void console.warn("获取包裹球失败，物体不存在");let t=this.getModelCenter(e),n=this.getModelBox(e),i=t.distanceTo(new r.Vector3(n.max.x,n.max.y,n.max.z));return new r.Sphere(t,i)}getChildrenInfo(e){if(!e)return void console.warn("获取子模型失败，物体不存在");let t=[];return e.traverse((e=>{let n={name:e.name,uuid:e.uuid,parent:e.parent.uuid,type:e.type,position:e.position,rotation:e.rotation,scale:e.scale,ownMarker:this.ownMarker(e)};t.push(n)})),t.splice(0,1),t}getModelInfo(e){if(!e)return void console.warn("获取信息失败，物体不存在");let t=new Object;return t.name=e.name,t.modelName=e.name,t.position=e.position,t.rotation=e.rotation,t.scale=e.scale,t.type=e.type,t.uuid=e.uuid,t.ownMarker=this.ownMarker(e),t.visible=e.visible,t.userData=e.userData,t.box3=this.getModelSize(e),t}getModelVertex(e){if(!e)return void console.warn("获取信息失败，物体不存在");let t=0;return e.traverseVisible((e=>{if(e.isMesh){let n=e.geometry;n&&n.isBufferGeometry&&(t+=n.attributes.position.count)}})),t}getModelFace(e){if(!e)return void console.warn("获取信息失败，物体不存在");let t=0;return e.traverseVisible((e=>{if(e.isMesh){let n=e.geometry;n&&n.isBufferGeometry&&n.index&&(t+=n.index.array.length/3)}})),t}getPointDistance(e,t){return new r.Vector3(e.x,e.y,e.z).distanceTo(new r.Vector3(t.x,t.y,t.z))}getPointLineDistance(e,t){let n=new r.Vector3(t.start.x,t.start.y,t.start.z),i=new r.Vector3(t.end.x,t.end.y,t.end.z),s=new r.Vector3(e.x,e.y,e.z);const o=(new r.Vector3).subVectors(i,n),a=(new r.Vector3).subVectors(s,n).dot(o)/o.lengthSq(),c=Math.max(0,Math.min(1,a)),l=this.initVector3().copy(n).add(o.multiplyScalar(c));return s.distanceTo(l)}getWorldPosition(e){let t=new r.Vector3;return e.getWorldPosition(t),t}ownMarker(e,t){let n=!1;return e.traverse((e=>{e.isCSS2DObject&&(!t||t&&e.element.id===t)&&(n=!0)})),n}isArray(e){return e&&"object"==typeof e&&"number"==typeof e.length&&"function"==typeof e.splice&&!e.propertyIsEnumerable("length")}initClock(){return new r.Clock}}},7887:e=>{"use strict";e.exports=function(e,t,n){return 0===e.length?e:t?(n||e.sort(t),function(e,t){for(var n=1,r=e.length,i=e[0],s=e[0],o=1;o<r;++o)if(s=i,t(i=e[o],s)){if(o===n){n++;continue}e[n++]=i}return e.length=n,e}(e,t)):(n||e.sort(),function(e){for(var t=1,n=e.length,r=e[0],i=e[0],s=1;s<n;++s,i=r)if(i=r,(r=e[s])!==i){if(s===t){t++;continue}e[t++]=r}return e.length=t,e}(e))}},9012:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>r});const r={aubo:{joints:[{name:"对象001",modelName:"对象001",axis:"y",animateType:"rotate",rotateUnit:"deg",reverse:1,dataSource:"root.joint1"},{name:"对象002",modelName:"对象002",axis:"x",animateType:"rotate",rotateUnit:"deg",reverse:1,dataSource:"root.joint2"},{name:"对象003",modelName:"对象003",axis:"x",animateType:"rotate",rotateUnit:"deg",reverse:-1,dataSource:"root.joint3"},{name:"对象004",modelName:"对象004",axis:"x",animateType:"rotate",rotateUnit:"deg",reverse:1,dataSource:"root.joint4"},{name:"AGV2",modelName:"AGV2",axis:"y",animateType:"rotate",rotateUnit:"deg",reverse:1,dataSource:"root.joint5"},{name:"对象005",modelName:"对象005",axis:"x",animateType:"rotate",rotateUnit:"deg",reverse:1,dataSource:"root.joint6"}]}}},4034:(e,t,n)=>{"use strict";n.r(t),n.d(t,{sceneData:()=>r});const r={params:{indexedDB:{dataBaseName:"ThingOrigin3D",tableName:"ThingOrigin3D"},loader:{draco:"https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/libs/draco/gltf/",ktx2:"https://cdn.jsdelivr.net/npm/three@0.165.0/examples/jsm/libs/basis/"},resource:{serverAddress:"http://124.70.30.193:8084",model:"http://124.70.30.193:8084/model2/load/ae5636a6-99f4-4780-9e3d-7affeb1c62da",font_Microsoft:"http://124.70.30.193:8084/model2/load/Microsoft.json"}},scene:{renderQuality:{alpha:!0,autoClear:!0,antialias:!0,logarithmicDepthBuffer:!0,shadowMap:{enabled:!0},toneMapping:{type:"ReinhardToneMapping",typeList:["NoToneMapping","LinearToneMapping","ReinhardToneMapping","CineonToneMapping","ACESFilmicToneMapping"]}},stats:{show:!1,mode:0},environment:{type:"roomEnvironment",typeList:["roomEnvironment","EquirectangularReflectionMapping"],EquirectangularReflectionMappingConfig:{url:""}},background:{type:"sky",color:{alpha:.5,color:"#666"},sky:{color:{top:"#86b6f5",line:"#ffffff",bottom:"#999999"},params:{radius:5e3,widthSegments:32,heightSegments:15,skyCenter:[0,0,0]}},img:{url:"/public/img/sky.jpg"},cubeMap:{url:["/public/cubmap/pos-x.jpg","/public/cubmap/neg-x.jpg","/public/cubmap/pos-y.jpg","/public/cubmap/neg-y.jpg","/public/cubmap/pos-z.jpg","/public/cubmap/neg-z.jpg"]},workshop:{url:"public/models/workshop.glb",modelType:"glb"}},ground:{active:!0,base:{width:1e4,height:1e4},material:{type:"color",color:{color:"#eee",opacity:1},image:{url:"/public/image/ground.jpg",repeat:{width:1e3,height:1e3}}}},fog:{show:!1,cameraView:!1,color:"#fff"}},controls:{orbit:{active:!0,autoRotate:!1,autoRotateSpeed:.5,enableDamping:!0,dampingFactor:.05,minDistance:1,maxDistance:2e3},drag:{active:!1},raycaster:{active:!0,events:{click:!0,mousemove:!0}},transform:{active:!1},pointerLock:{speed:1e3}},helper:{axes:{active:!1,length:60},grid:{active:!1,size:150,divisions:30,centerLineColor:"black",gridColor:"black"}},camera:{type:"PerspectiveCamera",position:{x:90,y:60,z:200},lookAt:{x:0,y:0,z:0},perspective:{fov:45,near:.1,far:6e3}},lights:[{name:"light1",type:"AmbientLight",color:"#fff",intensity:1,visible:!0,position:{x:150,y:150,z:150}},{name:"light2",visible:!0,type:"AmbientLight",color:"#fff",intensity:1,position:{x:-150,y:150,z:-150}},{name:"light3",visible:!0,type:"DirectionalLight",color:"#fff",intensity:1,position:{x:-150,y:150,z:150}},{name:"light4",visible:!0,type:"DirectionalLight",color:"#fff",intensity:1,position:{x:150,y:150,z:-150}}],effectComposer:{outlinePass:{edgeStrength:3,edgeGlow:1,edgeThickness:6,pulsePeriod:1,usePatternTexture:!1,visibleEdgeColor:"yellow",hiddenEdgeColor:"#190a05"},bloomPass:{strength:1.5,radius:1,threshold:.8}},physicsSim:{open:!0,gravity:{x:0,y:-9.82,z:0}},modelList:[],animationList:[],markerList:[],handleList:[],attachList:[]}},9523:()=>{},751:()=>{},1721:()=>{},7573:()=>{},394:(e,t,n)=>{var r=n(2596);function i(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,t}const s="v4.2.0",o="@glb.bin";var a,c,l,u,h;t.PropertyType=void 0,(a=t.PropertyType||(t.PropertyType={})).ACCESSOR="Accessor",a.ANIMATION="Animation",a.ANIMATION_CHANNEL="AnimationChannel",a.ANIMATION_SAMPLER="AnimationSampler",a.BUFFER="Buffer",a.CAMERA="Camera",a.MATERIAL="Material",a.MESH="Mesh",a.PRIMITIVE="Primitive",a.PRIMITIVE_TARGET="PrimitiveTarget",a.NODE="Node",a.ROOT="Root",a.SCENE="Scene",a.SKIN="Skin",a.TEXTURE="Texture",a.TEXTURE_INFO="TextureInfo",t.VertexLayout=void 0,(c=t.VertexLayout||(t.VertexLayout={})).INTERLEAVED="interleaved",c.SEPARATE="separate",function(e){e.ARRAY_BUFFER="ARRAY_BUFFER",e.ELEMENT_ARRAY_BUFFER="ELEMENT_ARRAY_BUFFER",e.INVERSE_BIND_MATRICES="INVERSE_BIND_MATRICES",e.OTHER="OTHER",e.SPARSE="SPARSE"}(l||(l={})),t.TextureChannel=void 0,(u=t.TextureChannel||(t.TextureChannel={}))[u.R=4096]="R",u[u.G=256]="G",u[u.B=16]="B",u[u.A=1]="A",t.Format=void 0,(h=t.Format||(t.Format={})).GLTF="GLTF",h.GLB="GLB";const d={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array};var p,f,m,g="undefined"!=typeof Float32Array?Float32Array:Array;function A(e){var t=e[0],n=e[1],r=e[2];return Math.hypot(t,n,r)}function y(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,e}function _(e,t){const n=b();for(const r of e.listPrimitives()){const e=r.getAttribute("POSITION"),i=r.getIndices();if(!e)continue;let s=[0,0,0],o=[0,0,0];for(let r=0,a=i?i.getCount():e.getCount();r<a;r++){const a=i?i.getScalar(r):r;s=e.getElement(a,s),o=y(o,s,t),v(o,n)}}return n}function v(e,t){for(let n=0;n<3;n++)t.min[n]=Math.min(e[n],t.min[n]),t.max[n]=Math.max(e[n],t.max[n])}function b(){return{min:[1/0,1/0,1/0],max:[-1/0,-1/0,-1/0]}}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)}),p=new g(3),g!=Float32Array&&(p[0]=0,p[1]=0,p[2]=0);class x{static createBufferFromDataURI(e){if("undefined"==typeof Buffer){const t=atob(e.split(",")[1]),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return n}{const t=e.split(",")[1],n=e.indexOf("base64")>=0;return Buffer.from(t,n?"base64":"utf8")}}static encodeText(e){return(new TextEncoder).encode(e)}static decodeText(e){return(new TextDecoder).decode(e)}static concat(e){let t=0;for(const n of e)t+=n.byteLength;const n=new Uint8Array(t);let r=0;for(const t of e)n.set(t,r),r+=t.byteLength;return n}static pad(e,t=0){const n=this.padNumber(e.byteLength);if(n===e.byteLength)return e;const r=new Uint8Array(n);if(r.set(e),0!==t)for(let i=e.byteLength;i<n;i++)r[i]=t;return r}static padNumber(e){return 4*Math.ceil(e/4)}static equals(e,t){if(e===t)return!0;if(e.byteLength!==t.byteLength)return!1;let n=e.byteLength;for(;n--;)if(e[n]!==t[n])return!1;return!0}static toView(e,t=0,n=1/0){return new Uint8Array(e.buffer,e.byteOffset+t,Math.min(e.byteLength,n))}static assertView(e){if(e&&!ArrayBuffer.isView(e))throw new Error(`Method requires Uint8Array parameter; received "${typeof e}".`);return e}}class w{match(e){return e.length>=8&&137===e[0]&&80===e[1]&&78===e[2]&&71===e[3]&&13===e[4]&&10===e[5]&&26===e[6]&&10===e[7]}getSize(e){const t=new DataView(e.buffer,e.byteOffset);return x.decodeText(e.slice(12,16))===w.PNG_FRIED_CHUNK_NAME?[t.getUint32(32,!1),t.getUint32(36,!1)]:[t.getUint32(16,!1),t.getUint32(20,!1)]}getChannels(e){return 4}}w.PNG_FRIED_CHUNK_NAME="CgBI";class E{static registerFormat(e,t){this.impls[e]=t}static getMimeType(e){for(const t in this.impls)if(this.impls[t].match(e))return t;return null}static getSize(e,t){return this.impls[t]?this.impls[t].getSize(e):null}static getChannels(e,t){return this.impls[t]?this.impls[t].getChannels(e):null}static getVRAMByteLength(e,t){if(!this.impls[t])return null;if(this.impls[t].getVRAMByteLength)return this.impls[t].getVRAMByteLength(e);let n=0;const r=this.getSize(e,t);if(!r)return null;for(;r[0]>1||r[1]>1;)n+=r[0]*r[1]*4,r[0]=Math.max(Math.floor(r[0]/2),1),r[1]=Math.max(Math.floor(r[1]/2),1);return n+=4,n}static mimeTypeToExtension(e){return"image/jpeg"===e?"jpg":e.split("/").pop()}static extensionToMimeType(e){return"jpg"===e?"image/jpeg":e?`image/${e}`:""}}function T(e,t){if(t>e.byteLength)throw new TypeError("Corrupt JPG, exceeded buffer limits");if(255!==e.getUint8(t))throw new TypeError("Invalid JPG, marker table corrupted");return e}E.impls={"image/jpeg":new class{match(e){return e.length>=3&&255===e[0]&&216===e[1]&&255===e[2]}getSize(e){let t,n,r=new DataView(e.buffer,e.byteOffset+4);for(;r.byteLength;){if(t=r.getUint16(0,!1),T(r,t),n=r.getUint8(t+1),192===n||193===n||194===n)return[r.getUint16(t+7,!1),r.getUint16(t+5,!1)];r=new DataView(e.buffer,r.byteOffset+t+2)}throw new TypeError("Invalid JPG, no size found")}getChannels(e){return 3}},"image/png":new w};class S{static basename(e){const t=e.split(/[\\/]/).pop();return t.substring(0,t.lastIndexOf("."))}static extension(e){if(e.startsWith("data:image/")){const t=e.match(/data:(image\/\w+)/)[1];return E.mimeTypeToExtension(t)}return e.startsWith("data:model/gltf+json")?"gltf":e.startsWith("data:model/gltf-binary")?"glb":e.startsWith("data:application/")?"bin":e.split(/[\\/]/).pop().split(/[.]/).pop()}}function M(e){return"[object Object]"===Object.prototype.toString.call(e)}function C(e){if(!1===M(e))return!1;const t=e.constructor;if(void 0===t)return!0;const n=t.prototype;return!1!==M(n)&&!1!==Object.prototype.hasOwnProperty.call(n,"isPrototypeOf")}t.Verbosity=void 0,(m=t.Verbosity||(t.Verbosity={}))[m.SILENT=4]="SILENT",m[m.ERROR=3]="ERROR",m[m.WARN=2]="WARN",m[m.INFO=1]="INFO",m[m.DEBUG=0]="DEBUG";class I{constructor(e){this.verbosity=void 0,this.verbosity=e}debug(e){this.verbosity<=I.Verbosity.DEBUG&&console.debug(e)}info(e){this.verbosity<=I.Verbosity.INFO&&console.info(e)}warn(e){this.verbosity<=I.Verbosity.WARN&&console.warn(e)}error(e){this.verbosity<=I.Verbosity.ERROR&&console.error(e)}}function R(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],A=t[14],y=t[15],_=n[0],v=n[1],b=n[2],x=n[3];return e[0]=_*r+v*a+b*h+x*m,e[1]=_*i+v*c+b*d+x*g,e[2]=_*s+v*l+b*p+x*A,e[3]=_*o+v*u+b*f+x*y,_=n[4],v=n[5],b=n[6],x=n[7],e[4]=_*r+v*a+b*h+x*m,e[5]=_*i+v*c+b*d+x*g,e[6]=_*s+v*l+b*p+x*A,e[7]=_*o+v*u+b*f+x*y,_=n[8],v=n[9],b=n[10],x=n[11],e[8]=_*r+v*a+b*h+x*m,e[9]=_*i+v*c+b*d+x*g,e[10]=_*s+v*l+b*p+x*A,e[11]=_*o+v*u+b*f+x*y,_=n[12],v=n[13],b=n[14],x=n[15],e[12]=_*r+v*a+b*h+x*m,e[13]=_*i+v*c+b*d+x*g,e[14]=_*s+v*l+b*p+x*A,e[15]=_*o+v*u+b*f+x*y,e}function B(e,t){var n=new g(3);!function(e,t){var n=t[0],r=t[1],i=t[2],s=t[4],o=t[5],a=t[6],c=t[8],l=t[9],u=t[10];e[0]=Math.hypot(n,r,i),e[1]=Math.hypot(s,o,a),e[2]=Math.hypot(c,l,u)}(n,t);var r=1/n[0],i=1/n[1],s=1/n[2],o=t[0]*r,a=t[1]*i,c=t[2]*s,l=t[4]*r,u=t[5]*i,h=t[6]*s,d=t[8]*r,p=t[9]*i,f=t[10]*s,m=o+u+f,A=0;return m>0?(A=2*Math.sqrt(m+1),e[3]=.25*A,e[0]=(h-p)/A,e[1]=(d-c)/A,e[2]=(a-l)/A):o>u&&o>f?(A=2*Math.sqrt(1+o-u-f),e[3]=(h-p)/A,e[0]=.25*A,e[1]=(a+l)/A,e[2]=(d+c)/A):u>f?(A=2*Math.sqrt(1+u-o-f),e[3]=(d-c)/A,e[0]=(a+l)/A,e[1]=.25*A,e[2]=(h+p)/A):(A=2*Math.sqrt(1+f-o-u),e[3]=(a-l)/A,e[0]=(d+c)/A,e[1]=(h+p)/A,e[2]=.25*A),e}f=I,I.Verbosity=t.Verbosity,I.DEFAULT_INSTANCE=new f(f.Verbosity.INFO);class P{static identity(e){return e}static eq(e,t,n=1e-5){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-t[r])>n)return!1;return!0}static clamp(e,t,n){return e<t?t:e>n?n:e}static decodeNormalizedInt(e,t){switch(t){case 5126:return e;case 5123:return e/65535;case 5121:return e/255;case 5122:return Math.max(e/32767,-1);case 5120:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}static encodeNormalizedInt(e,t){switch(t){case 5126:return e;case 5123:return Math.round(65535*P.clamp(e,0,1));case 5121:return Math.round(255*P.clamp(e,0,1));case 5122:return Math.round(32767*P.clamp(e,-1,1));case 5120:return Math.round(127*P.clamp(e,-1,1));default:throw new Error("Invalid component type.")}}static decompose(e,t,n,r){let i=A([e[0],e[1],e[2]]);const s=A([e[4],e[5],e[6]]),o=A([e[8],e[9],e[10]]);var a,c,l,u,h,d,p,f,m,g,y,_,v,b,x,w,E;(c=(a=e)[0],l=a[1],u=a[2],h=a[3],d=a[4],p=a[5],f=a[6],m=a[7],g=a[8],y=a[9],_=a[10],v=a[11],b=a[12],x=a[13],w=a[14],E=a[15],(c*p-l*d)*(_*E-v*w)-(c*f-u*d)*(y*E-v*x)+(c*m-h*d)*(y*w-_*x)+(l*f-u*p)*(g*E-v*b)-(l*m-h*p)*(g*w-_*b)+(u*m-h*f)*(g*x-y*b))<0&&(i=-i),t[0]=e[12],t[1]=e[13],t[2]=e[14];const T=e.slice(),S=1/i,M=1/s,C=1/o;T[0]*=S,T[1]*=S,T[2]*=S,T[4]*=M,T[5]*=M,T[6]*=M,T[8]*=C,T[9]*=C,T[10]*=C,B(n,T),r[0]=i,r[1]=s,r[2]=o}static compose(e,t,n,r){const i=r,s=t[0],o=t[1],a=t[2],c=t[3],l=s+s,u=o+o,h=a+a,d=s*l,p=s*u,f=s*h,m=o*u,g=o*h,A=a*h,y=c*l,_=c*u,v=c*h,b=n[0],x=n[1],w=n[2];return i[0]=(1-(m+A))*b,i[1]=(p+v)*b,i[2]=(f-_)*b,i[3]=0,i[4]=(p-v)*x,i[5]=(1-(d+A))*x,i[6]=(g+y)*x,i[7]=0,i[8]=(f+_)*w,i[9]=(g-y)*w,i[10]=(1-(d+m))*w,i[11]=0,i[12]=e[0],i[13]=e[1],i[14]=e[2],i[15]=1,i}}function D(e,t){if(!!e!=!!t)return!1;const n=e.getChild(),r=t.getChild();return n===r||n.equals(r)}function O(e,t){if(!!e!=!!t)return!1;const n=e.values(),r=t.values();if(n.length!==r.length)return!1;for(let e=0;e<n.length;e++){const t=n[e],i=r[e];if(t.getChild()!==i.getChild()&&!t.getChild().equals(i.getChild()))return!1}return!0}function L(e,t){if(!!e!=!!t)return!1;const n=e.keys(),r=t.keys();if(n.length!==r.length)return!1;for(const r of n){const n=e.get(r),i=t.get(r);if(!!n!=!!i)return!1;const s=n.getChild(),o=i.getChild();if(s!==o&&!s.equals(o))return!1}return!0}function N(e,t){if(e===t)return!0;if(!!e!=!!t||!e||!t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function F(e,t){if(e===t)return!0;if(!!e!=!!t)return!1;if(!C(e)||!C(t))return e===t;const n=e,r=t;let i,s=0,o=0;for(i in n)s++;for(i in r)o++;if(s!==o)return!1;for(i in n){const e=n[i],t=r[i];if(U(e)&&U(t)){if(!N(e,t))return!1}else if(C(e)&&C(t)){if(!F(e,t))return!1}else if(e!==t)return!1}return!0}function U(e){return Array.isArray(e)||ArrayBuffer.isView(e)}const k="23456789abdegjkmnpqrvwxyzABDEGJKMNPQRVWXYZ",z=new Set,G=function(){let e="";for(let t=0;t<6;t++)e+=k.charAt(Math.floor(42*Math.random()));return e},j=function(){for(let e=0;e<999;e++){const e=G();if(!z.has(e))return z.add(e),e}return""},V="https://null.example";class Q{static dirname(e){const t=e.lastIndexOf("/");return-1===t?"./":e.substring(0,t+1)}static basename(e){return S.basename(new URL(e,V).pathname)}static extension(e){return S.extension(new URL(e,V).pathname)}static resolve(e,t){if(!this.isRelativePath(t))return t;const n=e.split("/"),r=t.split("/");n.pop();for(let e=0;e<r.length;e++)"."!==r[e]&&(".."===r[e]?n.pop():n.push(r[e]));return n.join("/")}static isAbsoluteURL(e){return this.PROTOCOL_REGEXP.test(e)}static isRelativePath(e){return!/^(?:[a-zA-Z]+:)?\//.test(e)}}Q.DEFAULT_INIT={},Q.PROTOCOL_REGEXP=/^[a-zA-Z]+:\/\//;const H=e=>e,W=new Set;class q extends r.GraphNode{constructor(e,t=""){super(e),this[r.$attributes].name=t,this.init(),this.dispatchEvent({type:"create"})}getGraph(){return this.graph}getDefaults(){return Object.assign(super.getDefaults(),{name:"",extras:{}})}set(e,t){return Array.isArray(t)&&(t=t.slice()),super.set(e,t)}getName(){return this.get("name")}setName(e){return this.set("name",e)}getExtras(){return this.get("extras")}setExtras(e){return this.set("extras",e)}clone(){return new(0,this.constructor)(this.graph).copy(this,H)}copy(e,t=H){for(const e in this[r.$attributes]){const t=this[r.$attributes][e];if(t instanceof r.GraphEdge)this[r.$immutableKeys].has(e)||t.dispose();else if(t instanceof r.RefList||t instanceof r.RefSet)for(const e of t.values())e.dispose();else if(t instanceof r.RefMap)for(const e of t.values())e.dispose()}for(const n in e[r.$attributes]){const i=this[r.$attributes][n],s=e[r.$attributes][n];if(s instanceof r.GraphEdge)if(this[r.$immutableKeys].has(n)){i.getChild().copy(t(s.getChild()),t)}else this.setRef(n,t(s.getChild()),s.getAttributes());else if(s instanceof r.RefSet||s instanceof r.RefList)for(const e of s.values())this.addRef(n,t(e.getChild()),e.getAttributes());else if(s instanceof r.RefMap)for(const e of s.keys()){const r=s.get(e);this.setRefMap(n,e,t(r.getChild()),r.getAttributes())}else C(s)?this[r.$attributes][n]=JSON.parse(JSON.stringify(s)):Array.isArray(s)||s instanceof ArrayBuffer||ArrayBuffer.isView(s)?this[r.$attributes][n]=s.slice():this[r.$attributes][n]=s}return this}equals(e,t=W){if(this===e)return!0;if(this.propertyType!==e.propertyType)return!1;for(const n in this[r.$attributes]){if(t.has(n))continue;const i=this[r.$attributes][n],s=e[r.$attributes][n];if(i instanceof r.GraphEdge||s instanceof r.GraphEdge){if(!D(i,s))return!1}else if(i instanceof r.RefSet||s instanceof r.RefSet||i instanceof r.RefList||s instanceof r.RefList){if(!O(i,s))return!1}else if(i instanceof r.RefMap||s instanceof r.RefMap){if(!L(i,s))return!1}else if(C(i)||C(s)){if(!F(i,s))return!1}else if(U(i)||U(s)){if(!N(i,s))return!1}else if(i!==s)return!1}return!0}detach(){return this.graph.disconnectParents(this,(e=>"Root"!==e.propertyType)),this}listParents(){return this.graph.listParents(this)}}class X extends q{getDefaults(){return Object.assign(super.getDefaults(),{extensions:new r.RefMap})}getExtension(e){return this.getRefMap("extensions",e)}setExtension(e,t){return t&&t._validateParent(this),this.setRefMap("extensions",e,t)}listExtensions(){return this.listRefMapValues("extensions")}}class K extends X{init(){this.propertyType=t.PropertyType.ACCESSOR}getDefaults(){return Object.assign(super.getDefaults(),{array:null,type:K.Type.SCALAR,componentType:K.ComponentType.FLOAT,normalized:!1,sparse:!1,buffer:null})}static getElementSize(e){switch(e){case K.Type.SCALAR:return 1;case K.Type.VEC2:return 2;case K.Type.VEC3:return 3;case K.Type.VEC4:case K.Type.MAT2:return 4;case K.Type.MAT3:return 9;case K.Type.MAT4:return 16;default:throw new Error("Unexpected type: "+e)}}static getComponentSize(e){switch(e){case K.ComponentType.BYTE:case K.ComponentType.UNSIGNED_BYTE:return 1;case K.ComponentType.SHORT:case K.ComponentType.UNSIGNED_SHORT:return 2;case K.ComponentType.UNSIGNED_INT:case K.ComponentType.FLOAT:return 4;default:throw new Error("Unexpected component type: "+e)}}getMinNormalized(e){const t=this.getNormalized(),n=this.getElementSize(),r=this.getComponentType();if(this.getMin(e),t)for(let t=0;t<n;t++)e[t]=P.decodeNormalizedInt(e[t],r);return e}getMin(e){const t=this.getArray(),n=this.getCount(),r=this.getElementSize();for(let t=0;t<r;t++)e[t]=1/0;for(let i=0;i<n*r;i+=r)for(let n=0;n<r;n++){const r=t[i+n];Number.isFinite(r)&&(e[n]=Math.min(e[n],r))}return e}getMaxNormalized(e){const t=this.getNormalized(),n=this.getElementSize(),r=this.getComponentType();if(this.getMax(e),t)for(let t=0;t<n;t++)e[t]=P.decodeNormalizedInt(e[t],r);return e}getMax(e){const t=this.get("array"),n=this.getCount(),r=this.getElementSize();for(let t=0;t<r;t++)e[t]=-1/0;for(let i=0;i<n*r;i+=r)for(let n=0;n<r;n++){const r=t[i+n];Number.isFinite(r)&&(e[n]=Math.max(e[n],r))}return e}getCount(){const e=this.get("array");return e?e.length/this.getElementSize():0}getType(){return this.get("type")}setType(e){return this.set("type",e)}getElementSize(){return K.getElementSize(this.get("type"))}getComponentSize(){return this.get("array").BYTES_PER_ELEMENT}getComponentType(){return this.get("componentType")}getNormalized(){return this.get("normalized")}setNormalized(e){return this.set("normalized",e)}getScalar(e){const t=this.getElementSize(),n=this.getComponentType(),r=this.getArray();return this.getNormalized()?P.decodeNormalizedInt(r[e*t],n):r[e*t]}setScalar(e,t){const n=this.getElementSize(),r=this.getComponentType(),i=this.getArray();return this.getNormalized()?i[e*n]=P.encodeNormalizedInt(t,r):i[e*n]=t,this}getElement(e,t){const n=this.getNormalized(),r=this.getElementSize(),i=this.getComponentType(),s=this.getArray();for(let o=0;o<r;o++)t[o]=n?P.decodeNormalizedInt(s[e*r+o],i):s[e*r+o];return t}setElement(e,t){const n=this.getNormalized(),r=this.getElementSize(),i=this.getComponentType(),s=this.getArray();for(let o=0;o<r;o++)s[e*r+o]=n?P.encodeNormalizedInt(t[o],i):t[o];return this}getSparse(){return this.get("sparse")}setSparse(e){return this.set("sparse",e)}getBuffer(){return this.getRef("buffer")}setBuffer(e){return this.setRef("buffer",e)}getArray(){return this.get("array")}setArray(e){return this.set("componentType",e?function(e){switch(e.constructor){case Float32Array:return K.ComponentType.FLOAT;case Uint32Array:return K.ComponentType.UNSIGNED_INT;case Uint16Array:return K.ComponentType.UNSIGNED_SHORT;case Uint8Array:return K.ComponentType.UNSIGNED_BYTE;case Int16Array:return K.ComponentType.SHORT;case Int8Array:return K.ComponentType.BYTE;default:throw new Error("Unknown accessor componentType.")}}(e):K.ComponentType.FLOAT),this.set("array",e),this}getByteLength(){const e=this.get("array");return e?e.byteLength:0}}K.Type={SCALAR:"SCALAR",VEC2:"VEC2",VEC3:"VEC3",VEC4:"VEC4",MAT2:"MAT2",MAT3:"MAT3",MAT4:"MAT4"},K.ComponentType={BYTE:5120,UNSIGNED_BYTE:5121,SHORT:5122,UNSIGNED_SHORT:5123,UNSIGNED_INT:5125,FLOAT:5126};class Y extends X{init(){this.propertyType=t.PropertyType.ANIMATION}getDefaults(){return Object.assign(super.getDefaults(),{channels:new r.RefSet,samplers:new r.RefSet})}addChannel(e){return this.addRef("channels",e)}removeChannel(e){return this.removeRef("channels",e)}listChannels(){return this.listRefs("channels")}addSampler(e){return this.addRef("samplers",e)}removeSampler(e){return this.removeRef("samplers",e)}listSamplers(){return this.listRefs("samplers")}}class J extends X{init(){this.propertyType=t.PropertyType.ANIMATION_CHANNEL}getDefaults(){return Object.assign(super.getDefaults(),{targetPath:null,targetNode:null,sampler:null})}getTargetPath(){return this.get("targetPath")}setTargetPath(e){return this.set("targetPath",e)}getTargetNode(){return this.getRef("targetNode")}setTargetNode(e){return this.setRef("targetNode",e)}getSampler(){return this.getRef("sampler")}setSampler(e){return this.setRef("sampler",e)}}J.TargetPath={TRANSLATION:"translation",ROTATION:"rotation",SCALE:"scale",WEIGHTS:"weights"};class $ extends X{init(){this.propertyType=t.PropertyType.ANIMATION_SAMPLER}getDefaultAttributes(){return Object.assign(super.getDefaults(),{interpolation:$.Interpolation.LINEAR,input:null,output:null})}getInterpolation(){return this.get("interpolation")}setInterpolation(e){return this.set("interpolation",e)}getInput(){return this.getRef("input")}setInput(e){return this.setRef("input",e,{usage:l.OTHER})}getOutput(){return this.getRef("output")}setOutput(e){return this.setRef("output",e,{usage:l.OTHER})}}$.Interpolation={LINEAR:"LINEAR",STEP:"STEP",CUBICSPLINE:"CUBICSPLINE"};class Z extends X{init(){this.propertyType=t.PropertyType.BUFFER}getDefaults(){return Object.assign(super.getDefaults(),{uri:""})}getURI(){return this.get("uri")}setURI(e){return this.set("uri",e)}}class ee extends X{init(){this.propertyType=t.PropertyType.CAMERA}getDefaults(){return Object.assign(super.getDefaults(),{type:ee.Type.PERSPECTIVE,znear:.1,zfar:100,aspectRatio:null,yfov:2*Math.PI*50/360,xmag:1,ymag:1})}getType(){return this.get("type")}setType(e){return this.set("type",e)}getZNear(){return this.get("znear")}setZNear(e){return this.set("znear",e)}getZFar(){return this.get("zfar")}setZFar(e){return this.set("zfar",e)}getAspectRatio(){return this.get("aspectRatio")}setAspectRatio(e){return this.set("aspectRatio",e)}getYFov(){return this.get("yfov")}setYFov(e){return this.set("yfov",e)}getXMag(){return this.get("xmag")}setXMag(e){return this.set("xmag",e)}getYMag(){return this.get("ymag")}setYMag(e){return this.set("ymag",e)}}ee.Type={PERSPECTIVE:"perspective",ORTHOGRAPHIC:"orthographic"};class te extends q{_validateParent(e){if(!this.parentTypes.includes(e.propertyType))throw new Error(`Parent "${e.propertyType}" invalid for child "${this.propertyType}".`)}}te.EXTENSION_NAME=void 0;class ne extends X{init(){this.propertyType=t.PropertyType.TEXTURE_INFO}getDefaults(){return Object.assign(super.getDefaults(),{texCoord:0,magFilter:null,minFilter:null,wrapS:ne.WrapMode.REPEAT,wrapT:ne.WrapMode.REPEAT})}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}getMagFilter(){return this.get("magFilter")}setMagFilter(e){return this.set("magFilter",e)}getMinFilter(){return this.get("minFilter")}setMinFilter(e){return this.set("minFilter",e)}getWrapS(){return this.get("wrapS")}setWrapS(e){return this.set("wrapS",e)}getWrapT(){return this.get("wrapT")}setWrapT(e){return this.set("wrapT",e)}}ne.WrapMode={CLAMP_TO_EDGE:33071,MIRRORED_REPEAT:33648,REPEAT:10497},ne.MagFilter={NEAREST:9728,LINEAR:9729},ne.MinFilter={NEAREST:9728,LINEAR:9729,NEAREST_MIPMAP_NEAREST:9984,LINEAR_MIPMAP_NEAREST:9985,NEAREST_MIPMAP_LINEAR:9986,LINEAR_MIPMAP_LINEAR:9987};const{R:re,G:ie,B:se,A:oe}=t.TextureChannel;class ae extends X{init(){this.propertyType=t.PropertyType.MATERIAL}getDefaults(){return Object.assign(super.getDefaults(),{alphaMode:ae.AlphaMode.OPAQUE,alphaCutoff:.5,doubleSided:!1,baseColorFactor:[1,1,1,1],baseColorTexture:null,baseColorTextureInfo:new ne(this.graph,"baseColorTextureInfo"),emissiveFactor:[0,0,0],emissiveTexture:null,emissiveTextureInfo:new ne(this.graph,"emissiveTextureInfo"),normalScale:1,normalTexture:null,normalTextureInfo:new ne(this.graph,"normalTextureInfo"),occlusionStrength:1,occlusionTexture:null,occlusionTextureInfo:new ne(this.graph,"occlusionTextureInfo"),roughnessFactor:1,metallicFactor:1,metallicRoughnessTexture:null,metallicRoughnessTextureInfo:new ne(this.graph,"metallicRoughnessTextureInfo")})}getDoubleSided(){return this.get("doubleSided")}setDoubleSided(e){return this.set("doubleSided",e)}getAlpha(){return this.get("baseColorFactor")[3]}setAlpha(e){const t=this.get("baseColorFactor").slice();return t[3]=e,this.set("baseColorFactor",t)}getAlphaMode(){return this.get("alphaMode")}setAlphaMode(e){return this.set("alphaMode",e)}getAlphaCutoff(){return this.get("alphaCutoff")}setAlphaCutoff(e){return this.set("alphaCutoff",e)}getBaseColorFactor(){return this.get("baseColorFactor")}setBaseColorFactor(e){return this.set("baseColorFactor",e)}getBaseColorTexture(){return this.getRef("baseColorTexture")}getBaseColorTextureInfo(){return this.getRef("baseColorTexture")?this.getRef("baseColorTextureInfo"):null}setBaseColorTexture(e){return this.setRef("baseColorTexture",e,{channels:re|ie|se|oe,isColor:!0})}getEmissiveFactor(){return this.get("emissiveFactor")}setEmissiveFactor(e){return this.set("emissiveFactor",e)}getEmissiveTexture(){return this.getRef("emissiveTexture")}getEmissiveTextureInfo(){return this.getRef("emissiveTexture")?this.getRef("emissiveTextureInfo"):null}setEmissiveTexture(e){return this.setRef("emissiveTexture",e,{channels:re|ie|se,isColor:!0})}getNormalScale(){return this.get("normalScale")}setNormalScale(e){return this.set("normalScale",e)}getNormalTexture(){return this.getRef("normalTexture")}getNormalTextureInfo(){return this.getRef("normalTexture")?this.getRef("normalTextureInfo"):null}setNormalTexture(e){return this.setRef("normalTexture",e,{channels:re|ie|se})}getOcclusionStrength(){return this.get("occlusionStrength")}setOcclusionStrength(e){return this.set("occlusionStrength",e)}getOcclusionTexture(){return this.getRef("occlusionTexture")}getOcclusionTextureInfo(){return this.getRef("occlusionTexture")?this.getRef("occlusionTextureInfo"):null}setOcclusionTexture(e){return this.setRef("occlusionTexture",e,{channels:re})}getRoughnessFactor(){return this.get("roughnessFactor")}setRoughnessFactor(e){return this.set("roughnessFactor",e)}getMetallicFactor(){return this.get("metallicFactor")}setMetallicFactor(e){return this.set("metallicFactor",e)}getMetallicRoughnessTexture(){return this.getRef("metallicRoughnessTexture")}getMetallicRoughnessTextureInfo(){return this.getRef("metallicRoughnessTexture")?this.getRef("metallicRoughnessTextureInfo"):null}setMetallicRoughnessTexture(e){return this.setRef("metallicRoughnessTexture",e,{channels:ie|se})}}ae.AlphaMode={OPAQUE:"OPAQUE",MASK:"MASK",BLEND:"BLEND"};class ce extends X{init(){this.propertyType=t.PropertyType.MESH}getDefaults(){return Object.assign(super.getDefaults(),{weights:[],primitives:new r.RefSet})}addPrimitive(e){return this.addRef("primitives",e)}removePrimitive(e){return this.removeRef("primitives",e)}listPrimitives(){return this.listRefs("primitives")}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}}class le extends X{init(){this.propertyType=t.PropertyType.NODE}getDefaults(){return Object.assign(super.getDefaults(),{translation:[0,0,0],rotation:[0,0,0,1],scale:[1,1,1],weights:[],camera:null,mesh:null,skin:null,children:new r.RefSet})}copy(e,t=H){if(t===H)throw new Error("Node cannot be copied.");return super.copy(e,t)}getTranslation(){return this.get("translation")}getRotation(){return this.get("rotation")}getScale(){return this.get("scale")}setTranslation(e){return this.set("translation",e)}setRotation(e){return this.set("rotation",e)}setScale(e){return this.set("scale",e)}getMatrix(){return P.compose(this.get("translation"),this.get("rotation"),this.get("scale"),[])}setMatrix(e){const t=this.get("translation").slice(),n=this.get("rotation").slice(),r=this.get("scale").slice();return P.decompose(e,t,n,r),this.set("translation",t).set("rotation",n).set("scale",r)}getWorldTranslation(){const e=[0,0,0];return P.decompose(this.getWorldMatrix(),e,[0,0,0,1],[1,1,1]),e}getWorldRotation(){const e=[0,0,0,1];return P.decompose(this.getWorldMatrix(),[0,0,0],e,[1,1,1]),e}getWorldScale(){const e=[1,1,1];return P.decompose(this.getWorldMatrix(),[0,0,0],[0,0,0,1],e),e}getWorldMatrix(){const e=[];for(let t=this;null!=t;t=t.getParentNode())e.push(t);let t;const n=e.pop().getMatrix();for(;t=e.pop();)R(n,n,t.getMatrix());return n}addChild(e){const n=e.getParentNode();n&&n.removeChild(e);for(const n of e.listParents())n.propertyType===t.PropertyType.SCENE&&n.removeChild(e);return this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}getParentNode(){for(const e of this.listParents())if(e.propertyType===t.PropertyType.NODE)return e;return null}getMesh(){return this.getRef("mesh")}setMesh(e){return this.setRef("mesh",e)}getCamera(){return this.getRef("camera")}setCamera(e){return this.setRef("camera",e)}getSkin(){return this.getRef("skin")}setSkin(e){return this.setRef("skin",e)}getWeights(){return this.get("weights")}setWeights(e){return this.set("weights",e)}traverse(e){e(this);for(const t of this.listChildren())t.traverse(e);return this}}class ue extends X{init(){this.propertyType=t.PropertyType.PRIMITIVE}getDefaults(){return Object.assign(super.getDefaults(),{mode:ue.Mode.TRIANGLES,material:null,indices:null,attributes:new r.RefMap,targets:new r.RefSet})}getIndices(){return this.getRef("indices")}setIndices(e){return this.setRef("indices",e,{usage:l.ELEMENT_ARRAY_BUFFER})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:l.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}getMode(){return this.get("mode")}setMode(e){return this.set("mode",e)}listTargets(){return this.listRefs("targets")}addTarget(e){return this.addRef("targets",e)}removeTarget(e){return this.removeRef("targets",e)}}ue.Mode={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6};class he extends q{init(){this.propertyType=t.PropertyType.PRIMITIVE_TARGET}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new r.RefMap})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:l.ARRAY_BUFFER})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}class de extends X{init(){this.propertyType=t.PropertyType.SCENE}getDefaults(){return Object.assign(super.getDefaults(),{children:new r.RefSet})}copy(e,t=H){if(t===H)throw new Error("Scene cannot be copied.");return super.copy(e,t)}addChild(e){const t=e.getParentNode();return t&&t.removeChild(e),this.addRef("children",e)}removeChild(e){return this.removeRef("children",e)}listChildren(){return this.listRefs("children")}traverse(e){for(const t of this.listChildren())t.traverse(e);return this}}class pe extends X{init(){this.propertyType=t.PropertyType.SKIN}getDefaults(){return Object.assign(super.getDefaults(),{skeleton:null,inverseBindMatrices:null,joints:new r.RefSet})}getSkeleton(){return this.getRef("skeleton")}setSkeleton(e){return this.setRef("skeleton",e)}getInverseBindMatrices(){return this.getRef("inverseBindMatrices")}setInverseBindMatrices(e){return this.setRef("inverseBindMatrices",e,{usage:l.INVERSE_BIND_MATRICES})}addJoint(e){return this.addRef("joints",e)}removeJoint(e){return this.removeRef("joints",e)}listJoints(){return this.listRefs("joints")}}class fe extends X{init(){this.propertyType=t.PropertyType.TEXTURE}getDefaults(){return Object.assign(super.getDefaults(),{image:null,mimeType:"",uri:""})}getMimeType(){return this.get("mimeType")||E.extensionToMimeType(S.extension(this.get("uri")))}setMimeType(e){return this.set("mimeType",e)}getURI(){return this.get("uri")}setURI(e){this.set("uri",e);const t=E.extensionToMimeType(S.extension(e));return t&&this.set("mimeType",t),this}getImage(){return this.get("image")}setImage(e){return this.set("image",x.assertView(e))}getSize(){const e=this.get("image");return e?E.getSize(e,this.getMimeType()):null}}class me extends X{init(){this.propertyType=t.PropertyType.ROOT}getDefaults(){return Object.assign(super.getDefaults(),{asset:{generator:`glTF-Transform ${s}`,version:"2.0"},defaultScene:null,accessors:new r.RefSet,animations:new r.RefSet,buffers:new r.RefSet,cameras:new r.RefSet,materials:new r.RefSet,meshes:new r.RefSet,nodes:new r.RefSet,scenes:new r.RefSet,skins:new r.RefSet,textures:new r.RefSet})}constructor(e){super(e),this._extensions=new Set,e.addEventListener("node:create",(e=>{this._addChildOfRoot(e.target)}))}clone(){throw new Error("Root cannot be cloned.")}copy(e,t=H){if(t===H)throw new Error("Root cannot be copied.");this.set("asset",{...e.get("asset")}),this.setName(e.getName()),this.setExtras({...e.getExtras()}),this.setDefaultScene(e.getDefaultScene()?t(e.getDefaultScene()):null);for(const n of e.listRefMapKeys("extensions")){const r=e.getExtension(n);this.setExtension(n,t(r))}return this}_addChildOfRoot(e){return e instanceof de?this.addRef("scenes",e):e instanceof le?this.addRef("nodes",e):e instanceof ee?this.addRef("cameras",e):e instanceof pe?this.addRef("skins",e):e instanceof ce?this.addRef("meshes",e):e instanceof ae?this.addRef("materials",e):e instanceof fe?this.addRef("textures",e):e instanceof Y?this.addRef("animations",e):e instanceof K?this.addRef("accessors",e):e instanceof Z&&this.addRef("buffers",e),this}getAsset(){return this.get("asset")}listExtensionsUsed(){return Array.from(this._extensions)}listExtensionsRequired(){return this.listExtensionsUsed().filter((e=>e.isRequired()))}_enableExtension(e){return this._extensions.add(e),this}_disableExtension(e){return this._extensions.delete(e),this}listScenes(){return this.listRefs("scenes")}setDefaultScene(e){return this.setRef("defaultScene",e)}getDefaultScene(){return this.getRef("defaultScene")}listNodes(){return this.listRefs("nodes")}listCameras(){return this.listRefs("cameras")}listSkins(){return this.listRefs("skins")}listMeshes(){return this.listRefs("meshes")}listMaterials(){return this.listRefs("materials")}listTextures(){return this.listRefs("textures")}listAnimations(){return this.listRefs("animations")}listAccessors(){return this.listRefs("accessors")}listBuffers(){return this.listRefs("buffers")}}const ge="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Ae(e,t,n){if(!e.s){if(n instanceof ye){if(!n.s)return void(n.o=Ae.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(Ae.bind(null,e,t),Ae.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}const ye=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,i=this.s;if(i){const e=1&i?t:n;if(e){try{Ae(r,1,e(this.v))}catch(e){Ae(r,2,e)}return r}return this}return this.o=function(e){try{const i=e.v;1&e.s?Ae(r,1,t?t(i):i):n?Ae(r,1,n(i)):Ae(r,2,i)}catch(e){Ae(r,2,e)}},r},e}();function _e(e){return e instanceof ye&&1&e.s}function ve(e,t,n){if("function"==typeof e[ge]){var r,i,s,o=e[ge]();if(function e(a){try{for(;!((r=o.next()).done||n&&n());)if((a=t(r.value))&&a.then){if(!_e(a))return void a.then(e,s||(s=Ae.bind(null,i=new ye,2)));a=a.v}i?Ae(i,1,a):i=a}catch(e){Ae(i||(i=new ye),2,e)}}(),o.return){var a=function(e){try{r.done||o.return()}catch(e){}return e};if(i&&i.then)return i.then(a,(function(e){throw a(e)}));a()}return i}if(!("length"in e))throw new TypeError("Object is not iterable");for(var c=[],l=0;l<e.length;l++)c.push(e[l]);return function(e,t,n){var r,i,s=-1;return function o(a){try{for(;++s<e.length&&(!n||!n());)if((a=t(s))&&a.then){if(!_e(a))return void a.then(o,i||(i=Ae.bind(null,r=new ye,2)));a=a.v}r?Ae(r,1,a):r=a}catch(e){Ae(r||(r=new ye),2,e)}}(),r}(c,(function(e){return t(c[e])}),n)}class be{static fromGraph(e){return be._GRAPH_DOCUMENTS.get(e)||null}constructor(){this._graph=new r.Graph,this._root=new me(this._graph),this._logger=I.DEFAULT_INSTANCE,be._GRAPH_DOCUMENTS.set(this._graph,this)}getRoot(){return this._root}getGraph(){return this._graph}getLogger(){return this._logger}setLogger(e){return this._logger=e,this}clone(){throw new Error("Use 'cloneDocument(source)' from '@gltf-transform/functions'.")}merge(e){throw new Error("Use 'mergeDocuments(target, source)' from '@gltf-transform/functions'.")}transform(){try{const t=arguments,n=this;var e=[].slice.call(t);const r=e.map((e=>e.name)),i=ve(e,(function(e){return Promise.resolve(e(n,{stack:r})).then((function(){}))}));return Promise.resolve(i&&i.then?i.then((function(){return n})):n)}catch(e){return Promise.reject(e)}}createExtension(e){const t=e.EXTENSION_NAME;return this.getRoot().listExtensionsUsed().find((e=>e.extensionName===t))||new e(this)}createScene(e=""){return new de(this._graph,e)}createNode(e=""){return new le(this._graph,e)}createCamera(e=""){return new ee(this._graph,e)}createSkin(e=""){return new pe(this._graph,e)}createMesh(e=""){return new ce(this._graph,e)}createPrimitive(){return new ue(this._graph)}createPrimitiveTarget(e=""){return new he(this._graph,e)}createMaterial(e=""){return new ae(this._graph,e)}createTexture(e=""){return new fe(this._graph,e)}createAnimation(e=""){return new Y(this._graph,e)}createAnimationChannel(e=""){return new J(this._graph,e)}createAnimationSampler(e=""){return new $(this._graph,e)}createAccessor(e="",t=null){return t||(t=this.getRoot().listBuffers()[0]),new K(this._graph,e).setBuffer(t)}createBuffer(e=""){return new Z(this._graph,e)}}be._GRAPH_DOCUMENTS=new WeakMap;class xe{constructor(e){this.extensionName="",this.prereadTypes=[],this.prewriteTypes=[],this.readDependencies=[],this.writeDependencies=[],this.document=void 0,this.required=!1,this.properties=new Set,this._listener=void 0,this.document=e,e.getRoot()._enableExtension(this),this._listener=e=>{const t=e,n=t.target;n instanceof te&&n.extensionName===this.extensionName&&("node:create"===t.type&&this._addExtensionProperty(n),"node:dispose"===t.type&&this._removeExtensionProperty(n))};const t=e.getGraph();t.addEventListener("node:create",this._listener),t.addEventListener("node:dispose",this._listener)}dispose(){this.document.getRoot()._disableExtension(this);const e=this.document.getGraph();e.removeEventListener("node:create",this._listener),e.removeEventListener("node:dispose",this._listener);for(const e of this.properties)e.dispose()}static register(){}isRequired(){return this.required}setRequired(e){return this.required=e,this}listProperties(){return Array.from(this.properties)}_addExtensionProperty(e){return this.properties.add(e),this}_removeExtensionProperty(e){return this.properties.delete(e),this}install(e,t){return this}preread(e,t){return this}prewrite(e,t){return this}}xe.EXTENSION_NAME=void 0;class we{constructor(e){this.jsonDoc=void 0,this.buffers=[],this.bufferViews=[],this.bufferViewBuffers=[],this.accessors=[],this.textures=[],this.textureInfos=new Map,this.materials=[],this.meshes=[],this.cameras=[],this.nodes=[],this.skins=[],this.animations=[],this.scenes=[],this.jsonDoc=e}setTextureInfo(e,t){this.textureInfos.set(e,t),void 0!==t.texCoord&&e.setTexCoord(t.texCoord),void 0!==t.extras&&e.setExtras(t.extras);const n=this.jsonDoc.json.textures[t.index];if(void 0===n.sampler)return;const r=this.jsonDoc.json.samplers[n.sampler];void 0!==r.magFilter&&e.setMagFilter(r.magFilter),void 0!==r.minFilter&&e.setMinFilter(r.minFilter),void 0!==r.wrapS&&e.setWrapS(r.wrapS),void 0!==r.wrapT&&e.setWrapT(r.wrapT)}}const Ee={logger:I.DEFAULT_INSTANCE,extensions:[],dependencies:{}},Te=new Set([t.PropertyType.BUFFER,t.PropertyType.TEXTURE,t.PropertyType.MATERIAL,t.PropertyType.MESH,t.PropertyType.PRIMITIVE,t.PropertyType.NODE,t.PropertyType.SCENE]);class Se{static read(e,n=Ee){const r={...Ee,...n},{json:i}=e,s=(new be).setLogger(r.logger);this.validate(e,r);const a=new we(e),c=i.asset,l=s.getRoot().getAsset();c.copyright&&(l.copyright=c.copyright),c.extras&&(l.extras=c.extras),void 0!==i.extras&&s.getRoot().setExtras({...i.extras});const u=i.extensionsUsed||[],h=i.extensionsRequired||[];r.extensions.sort(((e,t)=>e.EXTENSION_NAME>t.EXTENSION_NAME?1:-1));for(const e of r.extensions)if(u.includes(e.EXTENSION_NAME)){const t=s.createExtension(e).setRequired(h.includes(e.EXTENSION_NAME)),n=t.prereadTypes.filter((e=>!Te.has(e)));n.length&&r.logger.warn(`Preread hooks for some types (${n.join()}), requested by extension ${t.extensionName}, are unsupported. Please file an issue or a PR.`);for(const e of t.readDependencies)t.install(e,r.dependencies[e])}const p=i.buffers||[];s.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(t.PropertyType.BUFFER))).forEach((e=>e.preread(a,t.PropertyType.BUFFER))),a.buffers=p.map((e=>{const t=s.createBuffer(e.name);return e.extras&&t.setExtras(e.extras),e.uri&&0!==e.uri.indexOf("__")&&t.setURI(e.uri),t}));const f=i.bufferViews||[];a.bufferViewBuffers=f.map(((t,n)=>{if(!a.bufferViews[n]){const r=e.json.buffers[t.buffer],i=r.uri?e.resources[r.uri]:e.resources[o],s=t.byteOffset||0;a.bufferViews[n]=x.toView(i,s,t.byteLength)}return a.buffers[t.buffer]}));const m=i.accessors||[];a.accessors=m.map((e=>{const t=a.bufferViewBuffers[e.bufferView],n=s.createAccessor(e.name,t).setType(e.type);return e.extras&&n.setExtras(e.extras),void 0!==e.normalized&&n.setNormalized(e.normalized),void 0===e.bufferView||n.setArray(Me(e,a)),n}));const g=i.images||[],A=i.textures||[];s.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(t.PropertyType.TEXTURE))).forEach((e=>e.preread(a,t.PropertyType.TEXTURE))),a.textures=g.map((t=>{const n=s.createTexture(t.name);if(t.extras&&n.setExtras(t.extras),void 0!==t.bufferView){const r=i.bufferViews[t.bufferView],s=e.json.buffers[r.buffer],a=s.uri?e.resources[s.uri]:e.resources[o],c=r.byteOffset||0,l=r.byteLength,u=a.slice(c,c+l);n.setImage(u)}else void 0!==t.uri&&(n.setImage(e.resources[t.uri]),0!==t.uri.indexOf("__")&&n.setURI(t.uri));if(void 0!==t.mimeType)n.setMimeType(t.mimeType);else if(t.uri){const e=S.extension(t.uri);n.setMimeType(E.extensionToMimeType(e))}return n})),s.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(t.PropertyType.MATERIAL))).forEach((e=>e.preread(a,t.PropertyType.MATERIAL)));const y=i.materials||[];a.materials=y.map((e=>{const t=s.createMaterial(e.name);e.extras&&t.setExtras(e.extras),void 0!==e.alphaMode&&t.setAlphaMode(e.alphaMode),void 0!==e.alphaCutoff&&t.setAlphaCutoff(e.alphaCutoff),void 0!==e.doubleSided&&t.setDoubleSided(e.doubleSided);const n=e.pbrMetallicRoughness||{};if(void 0!==n.baseColorFactor&&t.setBaseColorFactor(n.baseColorFactor),void 0!==e.emissiveFactor&&t.setEmissiveFactor(e.emissiveFactor),void 0!==n.metallicFactor&&t.setMetallicFactor(n.metallicFactor),void 0!==n.roughnessFactor&&t.setRoughnessFactor(n.roughnessFactor),void 0!==n.baseColorTexture){const e=n.baseColorTexture,r=a.textures[A[e.index].source];t.setBaseColorTexture(r),a.setTextureInfo(t.getBaseColorTextureInfo(),e)}if(void 0!==e.emissiveTexture){const n=e.emissiveTexture,r=a.textures[A[n.index].source];t.setEmissiveTexture(r),a.setTextureInfo(t.getEmissiveTextureInfo(),n)}if(void 0!==e.normalTexture){const n=e.normalTexture,r=a.textures[A[n.index].source];t.setNormalTexture(r),a.setTextureInfo(t.getNormalTextureInfo(),n),void 0!==e.normalTexture.scale&&t.setNormalScale(e.normalTexture.scale)}if(void 0!==e.occlusionTexture){const n=e.occlusionTexture,r=a.textures[A[n.index].source];t.setOcclusionTexture(r),a.setTextureInfo(t.getOcclusionTextureInfo(),n),void 0!==e.occlusionTexture.strength&&t.setOcclusionStrength(e.occlusionTexture.strength)}if(void 0!==n.metallicRoughnessTexture){const e=n.metallicRoughnessTexture,r=a.textures[A[e.index].source];t.setMetallicRoughnessTexture(r),a.setTextureInfo(t.getMetallicRoughnessTextureInfo(),e)}return t})),s.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(t.PropertyType.MESH))).forEach((e=>e.preread(a,t.PropertyType.MESH)));const _=i.meshes||[];s.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(t.PropertyType.PRIMITIVE))).forEach((e=>e.preread(a,t.PropertyType.PRIMITIVE))),a.meshes=_.map((e=>{const t=s.createMesh(e.name);e.extras&&t.setExtras(e.extras),void 0!==e.weights&&t.setWeights(e.weights);return(e.primitives||[]).forEach((n=>{const r=s.createPrimitive();n.extras&&r.setExtras(n.extras),void 0!==n.material&&r.setMaterial(a.materials[n.material]),void 0!==n.mode&&r.setMode(n.mode);for(const[e,t]of Object.entries(n.attributes||{}))r.setAttribute(e,a.accessors[t]);void 0!==n.indices&&r.setIndices(a.accessors[n.indices]);const i=e.extras&&e.extras.targetNames||[];(n.targets||[]).forEach(((e,t)=>{const n=i[t]||t.toString(),o=s.createPrimitiveTarget(n);for(const[t,n]of Object.entries(e))o.setAttribute(t,a.accessors[n]);r.addTarget(o)})),t.addPrimitive(r)})),t}));const v=i.cameras||[];a.cameras=v.map((e=>{const t=s.createCamera(e.name).setType(e.type);if(e.extras&&t.setExtras(e.extras),e.type===ee.Type.PERSPECTIVE){const n=e.perspective;t.setYFov(n.yfov),t.setZNear(n.znear),void 0!==n.zfar&&t.setZFar(n.zfar),void 0!==n.aspectRatio&&t.setAspectRatio(n.aspectRatio)}else{const n=e.orthographic;t.setZNear(n.znear).setZFar(n.zfar).setXMag(n.xmag).setYMag(n.ymag)}return t}));const b=i.nodes||[];s.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(t.PropertyType.NODE))).forEach((e=>e.preread(a,t.PropertyType.NODE))),a.nodes=b.map((e=>{const t=s.createNode(e.name);if(e.extras&&t.setExtras(e.extras),void 0!==e.translation&&t.setTranslation(e.translation),void 0!==e.rotation&&t.setRotation(e.rotation),void 0!==e.scale&&t.setScale(e.scale),void 0!==e.matrix){const n=[0,0,0],r=[0,0,0,1],i=[1,1,1];P.decompose(e.matrix,n,r,i),t.setTranslation(n),t.setRotation(r),t.setScale(i)}return void 0!==e.weights&&t.setWeights(e.weights),t}));const w=i.skins||[];a.skins=w.map((e=>{const t=s.createSkin(e.name);e.extras&&t.setExtras(e.extras),void 0!==e.inverseBindMatrices&&t.setInverseBindMatrices(a.accessors[e.inverseBindMatrices]),void 0!==e.skeleton&&t.setSkeleton(a.nodes[e.skeleton]);for(const n of e.joints)t.addJoint(a.nodes[n]);return t})),b.map(((e,t)=>{const n=a.nodes[t];(e.children||[]).forEach((e=>n.addChild(a.nodes[e]))),void 0!==e.mesh&&n.setMesh(a.meshes[e.mesh]),void 0!==e.camera&&n.setCamera(a.cameras[e.camera]),void 0!==e.skin&&n.setSkin(a.skins[e.skin])}));const T=i.animations||[];a.animations=T.map((e=>{const t=s.createAnimation(e.name);e.extras&&t.setExtras(e.extras);const n=(e.samplers||[]).map((e=>{const n=s.createAnimationSampler().setInput(a.accessors[e.input]).setOutput(a.accessors[e.output]).setInterpolation(e.interpolation||$.Interpolation.LINEAR);return e.extras&&n.setExtras(e.extras),t.addSampler(n),n}));return(e.channels||[]).forEach((e=>{const r=s.createAnimationChannel().setSampler(n[e.sampler]).setTargetPath(e.target.path);void 0!==e.target.node&&r.setTargetNode(a.nodes[e.target.node]),e.extras&&r.setExtras(e.extras),t.addChannel(r)})),t}));const M=i.scenes||[];return s.getRoot().listExtensionsUsed().filter((e=>e.prereadTypes.includes(t.PropertyType.SCENE))).forEach((e=>e.preread(a,t.PropertyType.SCENE))),a.scenes=M.map((e=>{const t=s.createScene(e.name);e.extras&&t.setExtras(e.extras);return(e.nodes||[]).map((e=>a.nodes[e])).forEach((e=>t.addChild(e))),t})),void 0!==i.scene&&s.getRoot().setDefaultScene(a.scenes[i.scene]),s.getRoot().listExtensionsUsed().forEach((e=>e.read(a))),m.forEach(((e,t)=>{const n=a.accessors[t],r=!!e.sparse,i=!e.bufferView&&!n.getArray();(r||i)&&n.setSparse(!0).setArray(function(e,t){const n=d[e.componentType],r=K.getElementSize(e.type);let i;i=void 0!==e.bufferView?Me(e,t):new n(e.count*r);const s=e.sparse;if(!s)return i;const o=s.count,a={...e,...s.indices,count:o,type:"SCALAR"},c={...e,...s.values,count:o},l=Me(a,t),u=Me(c,t);for(let e=0;e<a.count;e++)for(let t=0;t<r;t++)i[l[e]*r+t]=u[e*r+t];return i}(e,a))})),s}static validate(e,t){const n=e.json;if("2.0"!==n.asset.version)throw new Error(`Unsupported glTF version, "${n.asset.version}".`);if(n.extensionsRequired)for(const e of n.extensionsRequired)if(!t.extensions.find((t=>t.EXTENSION_NAME===e)))throw new Error(`Missing required extension, "${e}".`);if(n.extensionsUsed)for(const e of n.extensionsUsed)t.extensions.find((t=>t.EXTENSION_NAME===e))||t.logger.warn(`Missing optional extension, "${e}".`)}}function Me(e,t){const n=t.jsonDoc,r=t.bufferViews[e.bufferView],i=n.json.bufferViews[e.bufferView],s=d[e.componentType],o=K.getElementSize(e.type),a=s.BYTES_PER_ELEMENT,c=o*a;if(void 0!==i.byteStride&&i.byteStride!==c)return function(e,t){const n=t.jsonDoc,r=t.bufferViews[e.bufferView],i=n.json.bufferViews[e.bufferView],s=d[e.componentType],o=K.getElementSize(e.type),a=s.BYTES_PER_ELEMENT,c=e.byteOffset||0,l=new s(e.count*o),u=new DataView(r.buffer,r.byteOffset,r.byteLength),h=i.byteStride;for(let t=0;t<e.count;t++)for(let n=0;n<o;n++){const r=c+t*h+n*a;let i;switch(e.componentType){case K.ComponentType.FLOAT:i=u.getFloat32(r,!0);break;case K.ComponentType.UNSIGNED_INT:i=u.getUint32(r,!0);break;case K.ComponentType.UNSIGNED_SHORT:i=u.getUint16(r,!0);break;case K.ComponentType.UNSIGNED_BYTE:i=u.getUint8(r);break;case K.ComponentType.SHORT:i=u.getInt16(r,!0);break;case K.ComponentType.BYTE:i=u.getInt8(r);break;default:throw new Error(`Unexpected componentType "${e.componentType}".`)}l[t*o+n]=i}return l}(e,t);const l=r.byteOffset+(e.byteOffset||0),u=e.count*o*a;return new s(r.buffer.slice(l,l+u))}var Ce;!function(e){e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER"}(Ce||(Ce={}));class Ie{constructor(e,t,n){this._doc=void 0,this.jsonDoc=void 0,this.options=void 0,this.accessorIndexMap=new Map,this.animationIndexMap=new Map,this.bufferIndexMap=new Map,this.cameraIndexMap=new Map,this.skinIndexMap=new Map,this.materialIndexMap=new Map,this.meshIndexMap=new Map,this.nodeIndexMap=new Map,this.imageIndexMap=new Map,this.textureDefIndexMap=new Map,this.textureInfoDefMap=new Map,this.samplerDefIndexMap=new Map,this.sceneIndexMap=new Map,this.imageBufferViews=[],this.otherBufferViews=new Map,this.otherBufferViewsIndexMap=new Map,this.extensionData={},this.bufferURIGenerator=void 0,this.imageURIGenerator=void 0,this.logger=void 0,this._accessorUsageMap=new Map,this.accessorUsageGroupedByParent=new Set(["ARRAY_BUFFER"]),this.accessorParents=new Map,this._doc=e,this.jsonDoc=t,this.options=n;const r=e.getRoot(),i=r.listBuffers().length,s=r.listTextures().length;this.bufferURIGenerator=new Re(i>1,(()=>n.basename||"buffer")),this.imageURIGenerator=new Re(s>1,(t=>function(e,t){const n=e.getGraph().listParentEdges(t).find((t=>t.getParent()!==e.getRoot()));return n?n.getName().replace(/texture$/i,""):""}(e,t)||n.basename||"texture")),this.logger=e.getLogger()}createTextureInfoDef(e,t){const n={magFilter:t.getMagFilter()||void 0,minFilter:t.getMinFilter()||void 0,wrapS:t.getWrapS(),wrapT:t.getWrapT()},r=JSON.stringify(n);this.samplerDefIndexMap.has(r)||(this.samplerDefIndexMap.set(r,this.jsonDoc.json.samplers.length),this.jsonDoc.json.samplers.push(n));const i={source:this.imageIndexMap.get(e),sampler:this.samplerDefIndexMap.get(r)},s=JSON.stringify(i);this.textureDefIndexMap.has(s)||(this.textureDefIndexMap.set(s,this.jsonDoc.json.textures.length),this.jsonDoc.json.textures.push(i));const o={index:this.textureDefIndexMap.get(s)};return 0!==t.getTexCoord()&&(o.texCoord=t.getTexCoord()),Object.keys(t.getExtras()).length>0&&(o.extras=t.getExtras()),this.textureInfoDefMap.set(t,o),o}createPropertyDef(e){const t={};return e.getName()&&(t.name=e.getName()),Object.keys(e.getExtras()).length>0&&(t.extras=e.getExtras()),t}createAccessorDef(e){const t=this.createPropertyDef(e);t.type=e.getType(),t.componentType=e.getComponentType(),t.count=e.getCount();return this._doc.getGraph().listParentEdges(e).some((e=>"attributes"===e.getName()&&"POSITION"===e.getAttributes().key||"input"===e.getName()))&&(t.max=e.getMax([]).map(Math.fround),t.min=e.getMin([]).map(Math.fround)),e.getNormalized()&&(t.normalized=e.getNormalized()),t}createImageData(e,n,r){if(this.options.format===t.Format.GLB)this.imageBufferViews.push(n),e.bufferView=this.jsonDoc.json.bufferViews.length,this.jsonDoc.json.bufferViews.push({buffer:0,byteOffset:-1,byteLength:n.byteLength});else{const t=E.mimeTypeToExtension(r.getMimeType());e.uri=this.imageURIGenerator.createURI(r,t),this.assignResourceURI(e.uri,n,!1)}}assignResourceURI(e,t,n){const r=this.jsonDoc.resources;if(!(e in r))return void(r[e]=t);if(t===r[e])return void this.logger.warn(`Duplicate resource URI, "${e}".`);const i=`Resource URI "${e}" already assigned to different data.`;if(n)throw new Error(i);this.logger.warn(i)}getAccessorUsage(e){const n=this._accessorUsageMap.get(e);if(n)return n;if(e.getSparse())return l.SPARSE;for(const n of this._doc.getGraph().listParentEdges(e)){const{usage:e}=n.getAttributes();if(e)return e;n.getParent().propertyType!==t.PropertyType.ROOT&&this.logger.warn(`Missing attribute ".usage" on edge, "${n.getName()}".`)}return l.OTHER}addAccessorToUsageGroup(e,t){const n=this._accessorUsageMap.get(e);if(n&&n!==t)throw new Error(`Accessor with usage "${n}" cannot be reused as "${t}".`);return this._accessorUsageMap.set(e,t),this}}Ie.BufferViewTarget=Ce,Ie.BufferViewUsage=l,Ie.USAGE_TO_TARGET={[l.ARRAY_BUFFER]:Ce.ARRAY_BUFFER,[l.ELEMENT_ARRAY_BUFFER]:Ce.ELEMENT_ARRAY_BUFFER};class Re{constructor(e,t){this.multiple=void 0,this.basename=void 0,this.counter={},this.multiple=e,this.basename=t}createURI(e,t){if(e.getURI())return e.getURI();if(this.multiple){const n=this.basename(e);return this.counter[n]=this.counter[n]||1,`${n}_${this.counter[n]++}.${t}`}return`${this.basename(e)}.${t}`}}const{BufferViewUsage:Be}=Ie,{UNSIGNED_INT:Pe,UNSIGNED_SHORT:De,UNSIGNED_BYTE:Oe}=K.ComponentType,Le=new Set([t.PropertyType.ACCESSOR,t.PropertyType.BUFFER,t.PropertyType.MATERIAL,t.PropertyType.MESH]);class Ne{static write(e,n){const r=e.getGraph(),i=e.getRoot(),a={asset:{generator:`glTF-Transform ${s}`,...i.getAsset()},extras:{...i.getExtras()}},c={json:a,resources:{}},l=new Ie(e,c,n),u=n.logger||I.DEFAULT_INSTANCE,h=new Set(n.extensions.map((e=>e.EXTENSION_NAME))),p=e.getRoot().listExtensionsUsed().filter((e=>h.has(e.extensionName))).sort(((e,t)=>e.extensionName>t.extensionName?1:-1)),f=e.getRoot().listExtensionsRequired().filter((e=>h.has(e.extensionName))).sort(((e,t)=>e.extensionName>t.extensionName?1:-1));p.length<e.getRoot().listExtensionsUsed().length&&u.warn("Some extensions were not registered for I/O, and will not be written.");for(const e of p){const t=e.prewriteTypes.filter((e=>!Le.has(e)));t.length&&u.warn(`Prewrite hooks for some types (${t.join()}), requested by extension ${e.extensionName}, are unsupported. Please file an issue or a PR.`);for(const t of e.writeDependencies)e.install(t,n.dependencies[t])}function m(e,t,n,r){const i=[];let s=0;for(const t of e){const e=l.createAccessorDef(t);e.bufferView=a.bufferViews.length;const n=t.getArray(),r=x.pad(x.toView(n));e.byteOffset=s,s+=r.byteLength,i.push(r),l.accessorIndexMap.set(t,a.accessors.length),a.accessors.push(e)}const o={buffer:t,byteOffset:n,byteLength:x.concat(i).byteLength};return r&&(o.target=r),a.bufferViews.push(o),{buffers:i,byteLength:s}}function g(e,t,n){const r=e[0].getCount();let i=0;for(const t of e){const e=l.createAccessorDef(t);e.bufferView=a.bufferViews.length,e.byteOffset=i;const n=t.getElementSize(),r=t.getComponentSize();i+=x.padNumber(n*r),l.accessorIndexMap.set(t,a.accessors.length),a.accessors.push(e)}const s=r*i,o=new ArrayBuffer(s),c=new DataView(o);for(let t=0;t<r;t++){let n=0;for(const r of e){const e=r.getElementSize(),s=r.getComponentSize(),o=r.getComponentType(),a=r.getArray();for(let r=0;r<e;r++){const l=t*i+n+r*s,u=a[t*e+r];switch(o){case K.ComponentType.FLOAT:c.setFloat32(l,u,!0);break;case K.ComponentType.BYTE:c.setInt8(l,u);break;case K.ComponentType.SHORT:c.setInt16(l,u,!0);break;case K.ComponentType.UNSIGNED_BYTE:c.setUint8(l,u);break;case K.ComponentType.UNSIGNED_SHORT:c.setUint16(l,u,!0);break;case K.ComponentType.UNSIGNED_INT:c.setUint32(l,u,!0);break;default:throw new Error("Unexpected component type: "+o)}}n+=x.padNumber(e*s)}}const u={buffer:t,byteOffset:n,byteLength:s,byteStride:i,target:Ie.BufferViewTarget.ARRAY_BUFFER};return a.bufferViews.push(u),{byteLength:s,buffers:[new Uint8Array(o)]}}function A(e,t,n){const r=[];let i=0;const s=new Map;let o=-1/0,c=!1;for(const t of e){const e=l.createAccessorDef(t);a.accessors.push(e),l.accessorIndexMap.set(t,a.accessors.length-1);const n=[],r=[],i=[],u=new Array(t.getElementSize()).fill(0);for(let e=0,s=t.getCount();e<s;e++)if(t.getElement(e,i),!P.eq(i,u,0)){o=Math.max(e,o),n.push(e);for(let e=0;e<i.length;e++)r.push(i[e])}const h=n.length,p={accessorDef:e,count:h};if(s.set(t,p),0===h)continue;h>t.getCount()/2&&(c=!0);const f=d[t.getComponentType()];p.indices=n,p.values=new f(r)}if(!Number.isFinite(o))return{buffers:r,byteLength:i};c&&u.warn("Some sparse accessors have >50% non-zero elements, which may increase file size.");const h=o<255?Uint8Array:o<65535?Uint16Array:Uint32Array,p=o<255?Oe:o<65535?De:Pe,f={buffer:t,byteOffset:n+i,byteLength:0};for(const t of e){const e=s.get(t);if(0===e.count)continue;e.indicesByteOffset=f.byteLength;const n=x.pad(x.toView(new h(e.indices)));r.push(n),i+=n.byteLength,f.byteLength+=n.byteLength}a.bufferViews.push(f);const m=a.bufferViews.length-1,g={buffer:t,byteOffset:n+i,byteLength:0};for(const t of e){const e=s.get(t);if(0===e.count)continue;e.valuesByteOffset=g.byteLength;const n=x.pad(x.toView(e.values));r.push(n),i+=n.byteLength,g.byteLength+=n.byteLength}a.bufferViews.push(g);const A=a.bufferViews.length-1;for(const t of e){const e=s.get(t);0!==e.count&&(e.accessorDef.sparse={count:e.count,indices:{bufferView:m,byteOffset:e.indicesByteOffset,componentType:p},values:{bufferView:A,byteOffset:e.valuesByteOffset}})}return{buffers:r,byteLength:i}}a.accessors=[],a.bufferViews=[],a.samplers=[],a.textures=[],a.images=i.listTextures().map(((e,t)=>{const n=l.createPropertyDef(e);e.getMimeType()&&(n.mimeType=e.getMimeType());const r=e.getImage();return r&&l.createImageData(n,r,e),l.imageIndexMap.set(e,t),n})),p.filter((e=>e.prewriteTypes.includes(t.PropertyType.ACCESSOR))).forEach((e=>e.prewrite(l,t.PropertyType.ACCESSOR))),i.listAccessors().forEach((e=>{const n=l.accessorUsageGroupedByParent,i=l.accessorParents;if(l.accessorIndexMap.has(e))return;const s=l.getAccessorUsage(e);if(l.addAccessorToUsageGroup(e,s),n.has(s)){const n=r.listParents(e).find((e=>e.propertyType!==t.PropertyType.ROOT));i.set(e,n)}})),p.filter((e=>e.prewriteTypes.includes(t.PropertyType.BUFFER))).forEach((e=>e.prewrite(l,t.PropertyType.BUFFER)));if((i.listAccessors().length>0||l.otherBufferViews.size>0||i.listTextures().length>0&&n.format===t.Format.GLB)&&0===i.listBuffers().length)throw new Error("Buffer required for Document resources, but none was found.");a.buffers=[],i.listBuffers().forEach(((e,r)=>{const i=l.createPropertyDef(e),s=l.accessorUsageGroupedByParent,c=e.listParents().filter((e=>e instanceof K)),u=new Set(c.map((e=>l.accessorParents.get(e)))),h=new Map(Array.from(u).map(((e,t)=>[e,t]))),d={};for(const e of c){var p;if(l.accessorIndexMap.has(e))continue;const t=l.getAccessorUsage(e);let n=t;if(s.has(t)){const t=l.accessorParents.get(e);n+=`:${h.get(t)}`}d[p=n]||(d[p]={usage:t,accessors:[]}),d[n].accessors.push(e)}const f=[],y=a.buffers.length;let _=0;for(const{usage:e,accessors:r}of Object.values(d))if(e===Be.ARRAY_BUFFER&&n.vertexLayout===t.VertexLayout.INTERLEAVED){const e=g(r,y,_);_+=e.byteLength;for(const t of e.buffers)f.push(t)}else if(e===Be.ARRAY_BUFFER)for(const e of r){const t=g([e],y,_);_+=t.byteLength;for(const e of t.buffers)f.push(e)}else if(e===Be.SPARSE){const e=A(r,y,_);_+=e.byteLength;for(const t of e.buffers)f.push(t)}else if(e===Be.ELEMENT_ARRAY_BUFFER){const e=m(r,y,_,Ie.BufferViewTarget.ELEMENT_ARRAY_BUFFER);_+=e.byteLength;for(const t of e.buffers)f.push(t)}else{const e=m(r,y,_);_+=e.byteLength;for(const t of e.buffers)f.push(t)}if(l.imageBufferViews.length&&0===r)for(let e=0;e<l.imageBufferViews.length;e++)if(a.bufferViews[a.images[e].bufferView].byteOffset=_,_+=l.imageBufferViews[e].byteLength,f.push(l.imageBufferViews[e]),_%8){const e=8-_%8;_+=e,f.push(new Uint8Array(e))}if(l.otherBufferViews.has(e))for(const t of l.otherBufferViews.get(e))a.bufferViews.push({buffer:y,byteOffset:_,byteLength:t.byteLength}),l.otherBufferViewsIndexMap.set(t,a.bufferViews.length-1),_+=t.byteLength,f.push(t);if(_){let r;n.format===t.Format.GLB?r=o:(r=l.bufferURIGenerator.createURI(e,"bin"),i.uri=r),i.byteLength=_,l.assignResourceURI(r,x.concat(f),!0)}a.buffers.push(i),l.bufferIndexMap.set(e,r)})),i.listAccessors().find((e=>!e.getBuffer()))&&u.warn("Skipped writing one or more Accessors: no Buffer assigned."),p.filter((e=>e.prewriteTypes.includes(t.PropertyType.MATERIAL))).forEach((e=>e.prewrite(l,t.PropertyType.MATERIAL))),a.materials=i.listMaterials().map(((e,t)=>{const n=l.createPropertyDef(e);if(e.getAlphaMode()!==ae.AlphaMode.OPAQUE&&(n.alphaMode=e.getAlphaMode()),e.getAlphaMode()===ae.AlphaMode.MASK&&(n.alphaCutoff=e.getAlphaCutoff()),e.getDoubleSided()&&(n.doubleSided=!0),n.pbrMetallicRoughness={},P.eq(e.getBaseColorFactor(),[1,1,1,1])||(n.pbrMetallicRoughness.baseColorFactor=e.getBaseColorFactor()),P.eq(e.getEmissiveFactor(),[0,0,0])||(n.emissiveFactor=e.getEmissiveFactor()),1!==e.getRoughnessFactor()&&(n.pbrMetallicRoughness.roughnessFactor=e.getRoughnessFactor()),1!==e.getMetallicFactor()&&(n.pbrMetallicRoughness.metallicFactor=e.getMetallicFactor()),e.getBaseColorTexture()){const t=e.getBaseColorTexture(),r=e.getBaseColorTextureInfo();n.pbrMetallicRoughness.baseColorTexture=l.createTextureInfoDef(t,r)}if(e.getEmissiveTexture()){const t=e.getEmissiveTexture(),r=e.getEmissiveTextureInfo();n.emissiveTexture=l.createTextureInfoDef(t,r)}if(e.getNormalTexture()){const t=e.getNormalTexture(),r=e.getNormalTextureInfo(),i=l.createTextureInfoDef(t,r);1!==e.getNormalScale()&&(i.scale=e.getNormalScale()),n.normalTexture=i}if(e.getOcclusionTexture()){const t=e.getOcclusionTexture(),r=e.getOcclusionTextureInfo(),i=l.createTextureInfoDef(t,r);1!==e.getOcclusionStrength()&&(i.strength=e.getOcclusionStrength()),n.occlusionTexture=i}if(e.getMetallicRoughnessTexture()){const t=e.getMetallicRoughnessTexture(),r=e.getMetallicRoughnessTextureInfo();n.pbrMetallicRoughness.metallicRoughnessTexture=l.createTextureInfoDef(t,r)}return l.materialIndexMap.set(e,t),n})),p.filter((e=>e.prewriteTypes.includes(t.PropertyType.MESH))).forEach((e=>e.prewrite(l,t.PropertyType.MESH))),a.meshes=i.listMeshes().map(((e,t)=>{const n=l.createPropertyDef(e);let r=null;return n.primitives=e.listPrimitives().map((e=>{const t={attributes:{}};t.mode=e.getMode();const n=e.getMaterial();n&&(t.material=l.materialIndexMap.get(n)),Object.keys(e.getExtras()).length&&(t.extras=e.getExtras());const i=e.getIndices();i&&(t.indices=l.accessorIndexMap.get(i));for(const n of e.listSemantics())t.attributes[n]=l.accessorIndexMap.get(e.getAttribute(n));for(const n of e.listTargets()){const e={};for(const t of n.listSemantics())e[t]=l.accessorIndexMap.get(n.getAttribute(t));t.targets=t.targets||[],t.targets.push(e)}return e.listTargets().length&&!r&&(r=e.listTargets().map((e=>e.getName()))),t})),e.getWeights().length&&(n.weights=e.getWeights()),r&&(n.extras=n.extras||{},n.extras.targetNames=r),l.meshIndexMap.set(e,t),n})),a.cameras=i.listCameras().map(((e,t)=>{const n=l.createPropertyDef(e);if(n.type=e.getType(),n.type===ee.Type.PERSPECTIVE){n.perspective={znear:e.getZNear(),zfar:e.getZFar(),yfov:e.getYFov()};const t=e.getAspectRatio();null!==t&&(n.perspective.aspectRatio=t)}else n.orthographic={znear:e.getZNear(),zfar:e.getZFar(),xmag:e.getXMag(),ymag:e.getYMag()};return l.cameraIndexMap.set(e,t),n})),a.nodes=i.listNodes().map(((e,t)=>{const n=l.createPropertyDef(e);return P.eq(e.getTranslation(),[0,0,0])||(n.translation=e.getTranslation()),P.eq(e.getRotation(),[0,0,0,1])||(n.rotation=e.getRotation()),P.eq(e.getScale(),[1,1,1])||(n.scale=e.getScale()),e.getWeights().length&&(n.weights=e.getWeights()),l.nodeIndexMap.set(e,t),n})),a.skins=i.listSkins().map(((e,t)=>{const n=l.createPropertyDef(e),r=e.getInverseBindMatrices();r&&(n.inverseBindMatrices=l.accessorIndexMap.get(r));const i=e.getSkeleton();return i&&(n.skeleton=l.nodeIndexMap.get(i)),n.joints=e.listJoints().map((e=>l.nodeIndexMap.get(e))),l.skinIndexMap.set(e,t),n})),i.listNodes().forEach(((e,t)=>{const n=a.nodes[t],r=e.getMesh();r&&(n.mesh=l.meshIndexMap.get(r));const i=e.getCamera();i&&(n.camera=l.cameraIndexMap.get(i));const s=e.getSkin();s&&(n.skin=l.skinIndexMap.get(s)),e.listChildren().length>0&&(n.children=e.listChildren().map((e=>l.nodeIndexMap.get(e))))})),a.animations=i.listAnimations().map(((e,t)=>{const n=l.createPropertyDef(e),r=new Map;return n.samplers=e.listSamplers().map(((e,t)=>{const n=l.createPropertyDef(e);return n.input=l.accessorIndexMap.get(e.getInput()),n.output=l.accessorIndexMap.get(e.getOutput()),n.interpolation=e.getInterpolation(),r.set(e,t),n})),n.channels=e.listChannels().map((e=>{const t=l.createPropertyDef(e);return t.sampler=r.get(e.getSampler()),t.target={node:l.nodeIndexMap.get(e.getTargetNode()),path:e.getTargetPath()},t})),l.animationIndexMap.set(e,t),n})),a.scenes=i.listScenes().map(((e,t)=>{const n=l.createPropertyDef(e);return n.nodes=e.listChildren().map((e=>l.nodeIndexMap.get(e))),l.sceneIndexMap.set(e,t),n}));const y=i.getDefaultScene();return y&&(a.scene=i.listScenes().indexOf(y)),a.extensionsUsed=p.map((e=>e.extensionName)),a.extensionsRequired=f.map((e=>e.extensionName)),p.forEach((e=>e.write(l))),function(e){const t=[];for(const n in e){const r=e[n];(Array.isArray(r)&&0===r.length||null===r||""===r||r&&"object"==typeof r&&0===Object.keys(r).length)&&t.push(n)}for(const n of t)delete e[n]}(a),c}}var Fe;!function(e){e[e.JSON=1313821514]="JSON",e[e.BIN=5130562]="BIN"}(Fe||(Fe={}));class Ue{constructor(){this._logger=I.DEFAULT_INSTANCE,this._extensions=new Set,this._dependencies={},this._vertexLayout=t.VertexLayout.INTERLEAVED,this.lastReadBytes=0,this.lastWriteBytes=0}setLogger(e){return this._logger=e,this}registerExtensions(e){for(const t of e)this._extensions.add(t),t.register();return this}registerDependencies(e){return Object.assign(this._dependencies,e),this}setVertexLayout(e){return this._vertexLayout=e,this}read(e){try{const t=this,n=t.readJSON;return Promise.resolve(t.readAsJSON(e)).then((function(e){return Promise.resolve(n.call(t,e))}))}catch(e){return Promise.reject(e)}}readAsJSON(e){try{const t=this;return Promise.resolve(t.readURI(e,"view")).then((function(n){t.lastReadBytes=n.byteLength;const r=ke(n)?t._binaryToJSON(n):{json:JSON.parse(x.decodeText(n)),resources:{}};return Promise.resolve(t._readResourcesExternal(r,t.dirname(e))).then((function(){return t._readResourcesInternal(r),r}))}))}catch(e){return Promise.reject(e)}}readJSON(e){try{const t=this;return e=t._copyJSON(e),t._readResourcesInternal(e),Promise.resolve(Se.read(e,{extensions:Array.from(t._extensions),dependencies:t._dependencies,logger:t._logger}))}catch(e){return Promise.reject(e)}}binaryToJSON(e){try{const t=this,n=t._binaryToJSON(x.assertView(e));t._readResourcesInternal(n);const r=n.json;if(r.buffers&&r.buffers.some((e=>function(e,t){return void 0!==t.uri&&!(t.uri in e.resources)}(n,e))))throw new Error("Cannot resolve external buffers with binaryToJSON().");if(r.images&&r.images.some((e=>function(e,t){return void 0!==t.uri&&!(t.uri in e.resources)&&void 0===t.bufferView}(n,e))))throw new Error("Cannot resolve external images with binaryToJSON().");return Promise.resolve(n)}catch(e){return Promise.reject(e)}}readBinary(e){try{const t=this,n=t.readJSON;return Promise.resolve(t.binaryToJSON(x.assertView(e))).then((function(e){return n.call(t,e)}))}catch(e){return Promise.reject(e)}}writeJSON(e,n={}){try{const r=this;if(n.format===t.Format.GLB&&e.getRoot().listBuffers().length>1)throw new Error("GLB must have 0–1 buffers.");return Promise.resolve(Ne.write(e,{format:n.format||t.Format.GLTF,basename:n.basename||"",logger:r._logger,vertexLayout:r._vertexLayout,dependencies:{...r._dependencies},extensions:Array.from(r._extensions)}))}catch(e){return Promise.reject(e)}}writeBinary(e){try{const n=this;return Promise.resolve(n.writeJSON(e,{format:t.Format.GLB})).then((function({json:e,resources:t}){const n=new Uint32Array([1179937895,2,12]),r=JSON.stringify(e),i=x.pad(x.encodeText(r),32),s=x.toView(new Uint32Array([i.byteLength,1313821514])),o=x.concat([s,i]);n[n.length-1]+=o.byteLength;const a=Object.values(t)[0];if(!a||!a.byteLength)return x.concat([x.toView(n),o]);const c=x.pad(a,0),l=x.toView(new Uint32Array([c.byteLength,5130562])),u=x.concat([l,c]);return n[n.length-1]+=u.byteLength,x.concat([x.toView(n),o,u])}))}catch(e){return Promise.reject(e)}}_readResourcesExternal(e,t){try{const n=this,r=e.json.images||[],i=e.json.buffers||[],s=[...r,...i].map((function(r){try{const i=r.uri;return!i||i.match(/data:/)?Promise.resolve():Promise.resolve(n.readURI(n.resolve(t,i),"view")).then((function(t){e.resources[i]=t,n.lastReadBytes+=e.resources[i].byteLength}))}catch(e){return Promise.reject(e)}}));return Promise.resolve(Promise.all(s)).then((function(){}))}catch(e){return Promise.reject(e)}}_readResourcesInternal(e){function t(t){if(t.uri)if(t.uri in e.resources)x.assertView(e.resources[t.uri]);else if(t.uri.match(/data:/)){const n=`__${j()}.${S.extension(t.uri)}`;e.resources[n]=x.createBufferFromDataURI(t.uri),t.uri=n}}(e.json.images||[]).forEach((e=>{if(void 0===e.bufferView&&void 0===e.uri)throw new Error("Missing resource URI or buffer view.");t(e)}));(e.json.buffers||[]).forEach(t)}_copyJSON(e){const{images:t,buffers:n}=e.json;return e={json:{...e.json},resources:{...e.resources}},t&&(e.json.images=t.map((e=>({...e})))),n&&(e.json.buffers=n.map((e=>({...e})))),e}_binaryToJSON(e){if(!ke(e))throw new Error("Invalid glTF 2.0 binary.");const t=new Uint32Array(e.buffer,e.byteOffset+12,2);if(t[1]!==Fe.JSON)throw new Error("Missing required GLB JSON chunk.");const n=t[0],r=x.decodeText(x.toView(e,20,n)),i=JSON.parse(r),s=20+n;if(e.byteLength<=s)return{json:i,resources:{}};const a=new Uint32Array(e.buffer,e.byteOffset+s,2);if(a[1]!==Fe.BIN)return{json:i,resources:{}};const c=a[0],l=x.toView(e,s+8,c);return{json:i,resources:{[o]:l}}}}function ke(e){if(e.byteLength<3*Uint32Array.BYTES_PER_ELEMENT)return!1;const t=new Uint32Array(e.buffer,e.byteOffset,3);return 1179937895===t[0]&&2===t[1]}function ze(e,t,n){if(!e.s){if(n instanceof Ge){if(!n.s)return void(n.o=ze.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(ze.bind(null,e,t),ze.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}const Ge=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,i=this.s;if(i){const e=1&i?t:n;if(e){try{ze(r,1,e(this.v))}catch(e){ze(r,2,e)}return r}return this}return this.o=function(e){try{const i=e.v;1&e.s?ze(r,1,t?t(i):i):n?ze(r,1,n(i)):ze(r,2,i)}catch(e){ze(r,2,e)}},r},e}();const je="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Ve(e){return e instanceof Ge&&1&e.s}function Qe(e,t,n){if("function"==typeof e[je]){var r,i,s,o=e[je]();if(function e(a){try{for(;!((r=o.next()).done||n&&n());)if((a=t(r.value))&&a.then){if(!Ve(a))return void a.then(e,s||(s=ze.bind(null,i=new Ge,2)));a=a.v}i?ze(i,1,a):i=a}catch(e){ze(i||(i=new Ge),2,e)}}(),o.return){var a=function(e){try{r.done||o.return()}catch(e){}return e};if(i&&i.then)return i.then(a,(function(e){throw a(e)}));a()}return i}if(!("length"in e))throw new TypeError("Object is not iterable");for(var c=[],l=0;l<e.length;l++)c.push(e[l]);return function(e,t,n){var r,i,s=-1;return function o(a){try{for(;++s<e.length&&(!n||!n());)if((a=t(s))&&a.then){if(!Ve(a))return void a.then(o,i||(i=ze.bind(null,r=new Ge,2)));a=a.v}r?ze(r,1,a):r=a}catch(e){ze(r||(r=new Ge),2,e)}}(),r}(c,(function(e){return t(c[e])}),n)}function He(e,t,n){if(!e.s){if(n instanceof We){if(!n.s)return void(n.o=He.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(He.bind(null,e,t),He.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}const We=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,i=this.s;if(i){const e=1&i?t:n;if(e){try{He(r,1,e(this.v))}catch(e){He(r,2,e)}return r}return this}return this.o=function(e){try{const i=e.v;1&e.s?He(r,1,t?t(i):i):n?He(r,1,n(i)):He(r,2,i)}catch(e){He(r,2,e)}},r},e}();Object.defineProperty(t,"Graph",{enumerable:!0,get:function(){return r.Graph}}),Object.defineProperty(t,"GraphEdge",{enumerable:!0,get:function(){return r.GraphEdge}}),Object.defineProperty(t,"RefList",{enumerable:!0,get:function(){return r.RefList}}),Object.defineProperty(t,"RefMap",{enumerable:!0,get:function(){return r.RefMap}}),Object.defineProperty(t,"RefSet",{enumerable:!0,get:function(){return r.RefSet}}),t.Accessor=K,t.Animation=Y,t.AnimationChannel=J,t.AnimationSampler=$,t.Buffer=Z,t.BufferUtils=x,t.COPY_IDENTITY=H,t.Camera=ee,t.ColorUtils=class{static hexToFactor(e,t){e=Math.floor(e);const n=t;return n[0]=(e>>16&255)/255,n[1]=(e>>8&255)/255,n[2]=(255&e)/255,this.convertSRGBToLinear(t,t)}static factorToHex(e){const t=[...e],[n,r,i]=this.convertLinearToSRGB(e,t);return 255*n<<16^255*r<<8^255*i}static convertSRGBToLinear(e,t){const n=e,r=t;for(let e=0;e<3;e++)r[e]=n[e]<.04045?.0773993808*n[e]:Math.pow(.9478672986*n[e]+.0521327014,2.4);return t}static convertLinearToSRGB(e,t){const n=e,r=t;for(let e=0;e<3;e++)r[e]=n[e]<.0031308?12.92*n[e]:1.055*Math.pow(n[e],.41666)-.055;return t}},t.ComponentTypeToTypedArray=d,t.DenoIO=class extends Ue{constructor(e){super(),this._path=void 0,this._path=e}readURI(e,t){try{switch(t){case"view":return Promise.resolve(Deno.readFile(e));case"text":return Promise.resolve(Deno.readTextFile(e))}return Promise.resolve()}catch(e){return Promise.reject(e)}}resolve(e,t){return this._path.resolve(e,decodeURIComponent(t))}dirname(e){return this._path.dirname(e)}},t.Document=be,t.ExtensibleProperty=X,t.Extension=xe,t.ExtensionProperty=te,t.FileUtils=S,t.GLB_BUFFER=o,t.HTTPUtils=Q,t.ImageUtils=E,t.Logger=I,t.Material=ae,t.MathUtils=P,t.Mesh=ce,t.Node=le,t.NodeIO=class extends Ue{constructor(e=null,t=Q.DEFAULT_INIT){super(),this._fetch=void 0,this._fetchConfig=void 0,this._init=void 0,this._fetchEnabled=!1,this._fetch=e,this._fetchConfig=t,this._init=this.init()}init(){try{const e=this;return e._init?Promise.resolve(e._init):Promise.all([Promise.resolve().then((function(){return i(n(9523))})),Promise.resolve().then((function(){return i(n(751))}))]).then((([t,n])=>{e._fs=t.promises,e._path=n}))}catch(e){return Promise.reject(e)}}setAllowNetwork(e){if(e&&!this._fetch)throw new Error("NodeIO requires a Fetch API implementation for HTTP requests.");return this._fetchEnabled=e,this}readURI(e,t){try{const n=this;return Promise.resolve(n.init()).then((function(){return function(){if(Q.isAbsoluteURL(e)){if(!n._fetchEnabled||!n._fetch)throw new Error("Network request blocked. Allow HTTP requests explicitly, if needed.");return Promise.resolve(n._fetch(e,n._fetchConfig)).then((function(e){return function(e,t){var n,r=-1;e:{for(var i=0;i<t.length;i++){var s=t[i][0];if(s){var o=s();if(o&&o.then)break e;if(o===e){r=i;break}}else r=i}if(-1!==r){do{for(var a=t[r][1];!a;)r++,a=t[r][1];var c=a();if(c&&c.then){n=!0;break e}var l=t[r][2];r++}while(l&&!l());return c}}const u=new Ge,h=ze.bind(null,u,2);return(n?c.then(d):o.then((function n(o){for(;;){if(o===e){r=i;break}if(++i===t.length){if(-1!==r)break;return void ze(u,1,c)}if(s=t[i][0]){if((o=s())&&o.then)return void o.then(n).then(void 0,h)}else r=i}do{for(var a=t[r][1];!a;)r++,a=t[r][1];var c=a();if(c&&c.then)return void c.then(d).then(void 0,h);var l=t[r][2];r++}while(l&&!l());ze(u,1,c)}))).then(void 0,h),u;function d(e){for(;;){var n=t[r][2];if(!n||n())break;r++;for(var i=t[r][1];!i;)r++,i=t[r][1];if((e=i())&&e.then)return void e.then(d).then(void 0,h)}ze(u,1,e)}}(t,[[function(){return"view"},function(){return Promise.resolve(e.arrayBuffer()).then((function(e){return new Uint8Array(e)}))}],[function(){return"text"},function(){return e.text()}]])}))}switch(t){case"view":return n._fs.readFile(e);case"text":return n._fs.readFile(e,"utf8")}}()}))}catch(e){return Promise.reject(e)}}resolve(e,t){return Q.isAbsoluteURL(e)||Q.isAbsoluteURL(t)?Q.resolve(e,t):this._path.resolve(e,decodeURIComponent(t))}dirname(e){return Q.isAbsoluteURL(e)?Q.dirname(e):this._path.dirname(e)}write(e,t){try{const n=this;return Promise.resolve(n.init()).then((function(){const r=!!e.match(/\.glb$/);return Promise.resolve(r?n._writeGLB(e,t):n._writeGLTF(e,t)).then((function(){}))}))}catch(e){return Promise.reject(e)}}_writeGLTF(e,n){try{const r=this;return r.lastWriteBytes=0,Promise.resolve(r.writeJSON(n,{format:t.Format.GLTF,basename:S.basename(e)})).then((function({json:t,resources:n}){const{_fs:i,_path:s}=r,o=s.dirname(e),a=JSON.stringify(t,null,2);return Promise.resolve(i.writeFile(e,a)).then((function(){r.lastWriteBytes+=a.length;const e=Qe(function(e,t){const n=[];for(let r=0,i=e.length;r<i;r+=t){const s=[];for(let n=0;n<t&&r+n<i;n++)s.push(e[r+n]);n.push(s)}return n}(Object.keys(n),10),(function(e){return Promise.resolve(Promise.all(e.map((function(e){try{if(Q.isAbsoluteURL(e)){if("bin"===Q.extension(e))throw new Error(`Cannot write buffer to path "${e}".`);return Promise.resolve()}const t=s.join(o,decodeURIComponent(e));return Promise.resolve(i.mkdir(s.dirname(t),{recursive:!0})).then((function(){return Promise.resolve(i.writeFile(t,n[e])).then((function(){r.lastWriteBytes+=n[e].byteLength}))}))}catch(e){return Promise.reject(e)}})))).then((function(){}))}));if(e&&e.then)return e.then((function(){}))}))}))}catch(e){return Promise.reject(e)}}_writeGLB(e,t){try{const n=this;return Promise.resolve(n.writeBinary(t)).then((function(t){return Promise.resolve(n._fs.writeFile(e,t)).then((function(){n.lastWriteBytes=t.byteLength}))}))}catch(e){return Promise.reject(e)}}},t.PlatformIO=Ue,t.Primitive=ue,t.PrimitiveTarget=he,t.Property=q,t.ReaderContext=we,t.Root=me,t.Scene=de,t.Skin=pe,t.Texture=fe,t.TextureInfo=ne,t.VERSION=s,t.WebIO=class extends Ue{constructor(e=Q.DEFAULT_INIT){super(),this._fetchConfig=void 0,this._fetchConfig=e}readURI(e,t){try{const n=this;return Promise.resolve(fetch(e,n._fetchConfig)).then((function(e){return function(e,t){var n,r=-1;e:{for(var i=0;i<t.length;i++){var s=t[i][0];if(s){var o=s();if(o&&o.then)break e;if(o===e){r=i;break}}else r=i}if(-1!==r){do{for(var a=t[r][1];!a;)r++,a=t[r][1];var c=a();if(c&&c.then){n=!0;break e}var l=t[r][2];r++}while(l&&!l());return c}}const u=new We,h=He.bind(null,u,2);return(n?c.then(d):o.then((function n(o){for(;;){if(o===e){r=i;break}if(++i===t.length){if(-1!==r)break;return void He(u,1,c)}if(s=t[i][0]){if((o=s())&&o.then)return void o.then(n).then(void 0,h)}else r=i}do{for(var a=t[r][1];!a;)r++,a=t[r][1];var c=a();if(c&&c.then)return void c.then(d).then(void 0,h);var l=t[r][2];r++}while(l&&!l());He(u,1,c)}))).then(void 0,h),u;function d(e){for(;;){var n=t[r][2];if(!n||n())break;r++;for(var i=t[r][1];!i;)r++,i=t[r][1];if((e=i())&&e.then)return void e.then(d).then(void 0,h)}He(u,1,e)}}(t,[[function(){return"view"},function(){return Promise.resolve(e.arrayBuffer()).then((function(e){return new Uint8Array(e)}))}],[function(){return"text"},function(){return e.text()}]])}))}catch(e){return Promise.reject(e)}}resolve(e,t){return Q.resolve(e,t)}dirname(e){return Q.dirname(e)}},t.WriterContext=Ie,t.getBounds=function(e){const n=b(),r=e.propertyType===t.PropertyType.NODE?[e]:e.listChildren();for(const e of r)e.traverse((e=>{const t=e.getMesh();if(!t)return;const r=_(t,e.getWorldMatrix());r.min.every(isFinite)&&r.max.every(isFinite)&&(v(r.min,n),v(r.max,n))}));return n},t.uuid=j},5999:(e,t,n)=>{var r=n(394),i=n(6866);const s="EXT_mesh_gpu_instancing",o="EXT_meshopt_compression",a="KHR_draco_mesh_compression",c="KHR_lights_punctual",l="KHR_materials_anisotropy",u="KHR_materials_clearcoat",h="KHR_materials_diffuse_transmission",d="KHR_materials_dispersion",p="KHR_materials_emissive_strength",f="KHR_materials_ior",m="KHR_materials_iridescence",g="KHR_materials_pbrSpecularGlossiness",A="KHR_materials_sheen",y="KHR_materials_specular",_="KHR_materials_transmission",v="KHR_materials_unlit",b="KHR_materials_volume",x="KHR_materials_variants",w="KHR_texture_transform",E="KHR_xmp_json_ld",T="INSTANCE_ATTRIBUTE";class S extends r.ExtensionProperty{init(){this.extensionName=s,this.propertyType="InstancedMesh",this.parentTypes=[r.PropertyType.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{attributes:new r.RefMap})}getAttribute(e){return this.getRefMap("attributes",e)}setAttribute(e,t){return this.setRefMap("attributes",e,t,{usage:T})}listAttributes(){return this.listRefMapValues("attributes")}listSemantics(){return this.listRefMapKeys("attributes")}}S.EXTENSION_NAME=s;const M=s;class C extends r.Extension{constructor(...e){super(...e),this.extensionName=M,this.provideTypes=[r.PropertyType.NODE],this.prewriteTypes=[r.PropertyType.ACCESSOR]}createInstancedMesh(){return new S(this.document.getGraph())}read(e){return(e.jsonDoc.json.nodes||[]).forEach(((t,n)=>{if(!t.extensions||!t.extensions[M])return;const r=t.extensions[M],i=this.createInstancedMesh();for(const t in r.attributes)i.setAttribute(t,e.accessors[r.attributes[t]]);e.nodes[n].setExtension(M,i)})),this}prewrite(e){e.accessorUsageGroupedByParent.add(T);for(const t of this.properties)for(const n of t.listAttributes())e.addAccessorToUsageGroup(n,T);return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listNodes().forEach((n=>{const r=n.getExtension(M);if(r){const i=e.nodeIndexMap.get(n),s=t.json.nodes[i],o={attributes:{}};r.listSemantics().forEach((t=>{const n=r.getAttribute(t);o.attributes[t]=e.accessorIndexMap.get(n)})),s.extensions=s.extensions||{},s.extensions[M]=o}})),this}}var I,R,B;C.EXTENSION_NAME=M,function(e){e.QUANTIZE="quantize",e.FILTER="filter"}(I||(I={})),function(e){e.ATTRIBUTES="ATTRIBUTES",e.TRIANGLES="TRIANGLES",e.INDICES="INDICES"}(R||(R={})),function(e){e.NONE="NONE",e.OCTAHEDRAL="OCTAHEDRAL",e.QUATERNION="QUATERNION",e.EXPONENTIAL="EXPONENTIAL"}(B||(B={}));const{BYTE:P,SHORT:D,FLOAT:O}=r.Accessor.ComponentType,{encodeNormalizedInt:L,decodeNormalizedInt:N}=r.MathUtils;function F(e,t,n,i){const{filter:s,bits:o}=i,a={array:e.getArray(),byteStride:e.getElementSize()*e.getComponentSize(),componentType:e.getComponentType(),normalized:e.getNormalized()};if(n!==R.ATTRIBUTES)return a;if(s!==B.NONE){let n=e.getNormalized()?function(e){const t=e.getComponentType(),n=e.getArray(),r=new Float32Array(n.length);for(let e=0;e<n.length;e++)r[e]=N(n[e],t);return r}(e):new Float32Array(a.array);switch(s){case B.EXPONENTIAL:a.byteStride=4*e.getElementSize(),a.componentType=O,a.normalized=!1,a.array=t.encodeFilterExp(n,e.getCount(),a.byteStride,o);break;case B.OCTAHEDRAL:a.byteStride=o>8?8:4,a.componentType=o>8?D:P,a.normalized=!0,n=3===e.getElementSize()?function(e){const t=new Float32Array(4*e.length/3);for(let n=0,r=e.length/3;n<r;n++)t[4*n]=e[3*n],t[4*n+1]=e[3*n+1],t[4*n+2]=e[3*n+2];return t}(n):n,a.array=t.encodeFilterOct(n,e.getCount(),a.byteStride,o);break;case B.QUATERNION:a.byteStride=8,a.componentType=D,a.normalized=!0,a.array=t.encodeFilterQuat(n,e.getCount(),a.byteStride,o);break;default:throw new Error("Invalid filter.")}a.min=e.getMin([]),a.max=e.getMax([]),e.getNormalized()&&(a.min=a.min.map((t=>N(t,e.getComponentType()))),a.max=a.max.map((t=>N(t,e.getComponentType())))),a.normalized&&(a.min=a.min.map((e=>L(e,a.componentType))),a.max=a.max.map((e=>L(e,a.componentType))))}else a.byteStride%4&&(a.array=function(e,t){const n=r.BufferUtils.padNumber(e.BYTES_PER_ELEMENT*t)/e.BYTES_PER_ELEMENT,i=e.length/t,s=new e.constructor(i*n);for(let r=0;r*t<e.length;r++)for(let i=0;i<t;i++)s[r*n+i]=e[r*t+i];return s}(a.array,e.getElementSize()),a.byteStride=a.array.byteLength/e.getCount());return a}function U(e,t){if(t===r.WriterContext.BufferViewUsage.ELEMENT_ARRAY_BUFFER){return e.listParents().some((e=>e instanceof r.Primitive&&e.getMode()===r.Primitive.Mode.TRIANGLES))?R.TRIANGLES:R.INDICES}return R.ATTRIBUTES}function k(e,t){const n=t.getGraph().listParentEdges(e).filter((e=>!(e.getParent()instanceof r.Root)));for(const t of n){const n=t.getName(),i=t.getAttributes().key||"",s=t.getParent().propertyType===r.PropertyType.PRIMITIVE_TARGET;if("indices"===n)return{filter:B.NONE};if("attributes"===n){if("POSITION"===i)return{filter:B.NONE};if("TEXCOORD_0"===i)return{filter:B.NONE};if(i.startsWith("JOINTS_"))return{filter:B.NONE};if(i.startsWith("WEIGHTS_"))return{filter:B.NONE};if("NORMAL"===i||"TANGENT"===i)return s?{filter:B.NONE}:{filter:B.OCTAHEDRAL,bits:8}}if("output"===n){const t=z(e);return"rotation"===t?{filter:B.QUATERNION,bits:16}:"translation"===t||"scale"===t?{filter:B.EXPONENTIAL,bits:12}:{filter:B.NONE}}if("input"===n)return{filter:B.NONE};if("inverseBindMatrices"===n)return{filter:B.NONE}}return{filter:B.NONE}}function z(e){for(const t of e.listParents())if(t instanceof r.AnimationSampler)for(const e of t.listParents())if(e instanceof r.AnimationChannel)return e.getTargetPath();return null}const G=o,j={method:I.QUANTIZE};class V extends r.Extension{constructor(...e){super(...e),this.extensionName=G,this.prereadTypes=[r.PropertyType.BUFFER,r.PropertyType.PRIMITIVE],this.prewriteTypes=[r.PropertyType.BUFFER,r.PropertyType.ACCESSOR],this.readDependencies=["meshopt.decoder"],this.writeDependencies=["meshopt.encoder"],this._decoder=null,this._decoderFallbackBufferMap=new Map,this._encoder=null,this._encoderOptions=j,this._encoderFallbackBuffer=null,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={}}install(e,t){return"meshopt.decoder"===e&&(this._decoder=t),"meshopt.encoder"===e&&(this._encoder=t),this}setEncoderOptions(e){return this._encoderOptions={...j,...e},this}preread(e,t){if(!this._decoder){if(!this.isRequired())return this;throw new Error(`[${G}] Please install extension dependency, "meshopt.decoder".`)}if(!this._decoder.supported){if(!this.isRequired())return this;throw new Error(`[${G}]: Missing WASM support.`)}return t===r.PropertyType.BUFFER?this._prereadBuffers(e):t===r.PropertyType.PRIMITIVE&&this._prereadPrimitives(e),this}_prereadBuffers(e){const t=e.jsonDoc;(t.json.bufferViews||[]).forEach(((n,i)=>{if(!n.extensions||!n.extensions[G])return;const s=n.extensions[G],o=s.byteOffset||0,a=s.byteLength||0,c=s.count,l=s.byteStride,u=new Uint8Array(c*l),h=t.json.buffers[s.buffer],d=h.uri?t.resources[h.uri]:t.resources[r.GLB_BUFFER],p=r.BufferUtils.toView(d,o,a);this._decoder.decodeGltfBuffer(u,c,l,p,s.mode,s.filter),e.bufferViews[i]=u}))}_prereadPrimitives(e){const t=e.jsonDoc;(t.json.bufferViews||[]).forEach((n=>{if(!n.extensions||!n.extensions[G])return;const r=n.extensions[G],i=e.buffers[r.buffer],s=e.buffers[n.buffer],a=t.json.buffers[n.buffer];var c;(c=a).extensions&&c.extensions[o]&&c.extensions[o].fallback&&this._decoderFallbackBufferMap.set(s,i)}))}read(e){if(!this.isRequired())return this;for(const[e,t]of this._decoderFallbackBufferMap){for(const n of e.listParents())n instanceof r.Accessor&&n.swap(e,t);e.dispose()}return this}prewrite(e,t){return t===r.PropertyType.ACCESSOR?this._prewriteAccessors(e):t===r.PropertyType.BUFFER&&this._prewriteBuffers(e),this}_prewriteAccessors(e){const t=e.jsonDoc.json,n=this._encoder,i=this._encoderOptions,s=this.document.getGraph(),o=this.document.createBuffer(),a=this.document.getRoot().listBuffers().indexOf(o);let c=1;const l=new Map,u=e=>{for(const t of s.listParents(e)){if(t.propertyType===r.PropertyType.ROOT)continue;let n=l.get(e);return void 0===n&&l.set(e,n=c++),n}return-1};this._encoderFallbackBuffer=o,this._encoderBufferViews={},this._encoderBufferViewData={},this._encoderBufferViewAccessors={};for(const s of this.document.getRoot().listAccessors()){if("weights"===z(s))continue;if(s.getSparse())continue;const o=e.getAccessorUsage(s),c=e.accessorUsageGroupedByParent.has(o)?u(s):null,l=U(s,o),h=i.method===I.FILTER?k(s,this.document):{filter:B.NONE},d=F(s,n,l,h),{array:p,byteStride:f}=d,m=s.getBuffer();if(!m)throw new Error(`${G}: Missing buffer for accessor.`);const g=this.document.getRoot().listBuffers().indexOf(m),A=[o,c,l,h.filter,f,g].join(":");let y=this._encoderBufferViews[A],_=this._encoderBufferViewData[A],v=this._encoderBufferViewAccessors[A];y&&_||(v=this._encoderBufferViewAccessors[A]=[],_=this._encoderBufferViewData[A]=[],y=this._encoderBufferViews[A]={buffer:a,target:r.WriterContext.USAGE_TO_TARGET[o],byteOffset:0,byteLength:0,byteStride:o===r.WriterContext.BufferViewUsage.ARRAY_BUFFER?f:void 0,extensions:{[G]:{buffer:g,byteOffset:0,byteLength:0,mode:l,filter:h.filter!==B.NONE?h.filter:void 0,byteStride:f,count:0}}});const b=e.createAccessorDef(s);b.componentType=d.componentType,b.normalized=d.normalized,b.byteOffset=y.byteLength,b.min&&d.min&&(b.min=d.min),b.max&&d.max&&(b.max=d.max),e.accessorIndexMap.set(s,t.accessors.length),t.accessors.push(b),v.push(b),_.push(new Uint8Array(p.buffer,p.byteOffset,p.byteLength)),y.byteLength+=p.byteLength,y.extensions.EXT_meshopt_compression.count+=s.getCount()}}_prewriteBuffers(e){const t=this._encoder;for(const n in this._encoderBufferViews){const i=this._encoderBufferViews[n],s=this._encoderBufferViewData[n],o=this.document.getRoot().listBuffers()[i.extensions[G].buffer],a=e.otherBufferViews.get(o)||[],{count:c,byteStride:l,mode:u}=i.extensions[G],h=r.BufferUtils.concat(s),d=t.encodeGltfBuffer(h,c,l,u),p=r.BufferUtils.pad(d);i.extensions[G].byteLength=d.byteLength,s.length=0,s.push(p),a.push(p),e.otherBufferViews.set(o,a)}}write(e){let t=0;for(const n in this._encoderBufferViews){const i=this._encoderBufferViews[n],s=this._encoderBufferViewData[n][0],o=e.otherBufferViewsIndexMap.get(s),a=this._encoderBufferViewAccessors[n];for(const e of a)e.bufferView=o;const c=e.jsonDoc.json.bufferViews[o],l=c.byteOffset||0;Object.assign(c,i),c.byteOffset=t;c.extensions[G].byteOffset=l,t+=r.BufferUtils.padNumber(i.byteLength)}const n=this._encoderFallbackBuffer,i=e.bufferIndexMap.get(n),s=e.jsonDoc.json.buffers[i];return s.byteLength=t,s.extensions={[G]:{fallback:!0}},n.dispose(),this}}V.EXTENSION_NAME=G,V.EncoderMethod=I;const Q="EXT_texture_avif";class H{match(e){return e.length>=12&&"ftypavif"===r.BufferUtils.decodeText(e.slice(4,12))}getSize(e){if(!this.match(e))return null;const t=new DataView(e.buffer,e.byteOffset,e.byteLength);let n=q(t,0);if(!n)return null;let r=n.end;for(;n=q(t,r);)if("meta"===n.type)r=n.start+4;else if("iprp"===n.type||"ipco"===n.type)r=n.start;else{if("ispe"===n.type)return[t.getUint32(n.start+4),t.getUint32(n.start+8)];if("mdat"===n.type)break;r=n.end}return null}getChannels(e){return 4}}class W extends r.Extension{constructor(...e){super(...e),this.extensionName=Q,this.prereadTypes=[r.PropertyType.TEXTURE]}static register(){r.ImageUtils.registerFormat("image/avif",new H)}preread(e){return(e.jsonDoc.json.textures||[]).forEach((e=>{e.extensions&&e.extensions[Q]&&(e.source=e.extensions[Q].source)})),this}read(e){return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listTextures().forEach((n=>{if("image/avif"===n.getMimeType()){const r=e.imageIndexMap.get(n);(t.json.textures||[]).forEach((e=>{e.source===r&&(e.extensions=e.extensions||{},e.extensions[Q]={source:e.source},delete e.source)}))}})),this}}function q(e,t){if(e.byteLength<4+t)return null;const n=e.getUint32(t);return e.byteLength<n+t||n<8?null:{type:r.BufferUtils.decodeText(new Uint8Array(e.buffer,e.byteOffset+t+4,4)),start:t+8,end:t+n}}W.EXTENSION_NAME=Q;const X="EXT_texture_webp";class K{match(e){return e.length>=12&&87===e[8]&&69===e[9]&&66===e[10]&&80===e[11]}getSize(e){const t=r.BufferUtils.decodeText(e.slice(0,4)),n=r.BufferUtils.decodeText(e.slice(8,12));if("RIFF"!==t||"WEBP"!==n)return null;const i=new DataView(e.buffer,e.byteOffset);let s=12;for(;s<i.byteLength;){const e=r.BufferUtils.decodeText(new Uint8Array([i.getUint8(s),i.getUint8(s+1),i.getUint8(s+2),i.getUint8(s+3)])),t=i.getUint32(s+4,!0);if("VP8 "===e){return[16383&i.getInt16(s+14,!0),16383&i.getInt16(s+16,!0)]}if("VP8L"===e){const e=i.getUint8(s+9),t=i.getUint8(s+10),n=i.getUint8(s+11);return[1+((63&t)<<8|e),1+((15&i.getUint8(s+12))<<10|n<<2|(192&t)>>6)]}s+=8+t+t%2}return null}getChannels(e){return 4}}class Y extends r.Extension{constructor(...e){super(...e),this.extensionName=X,this.prereadTypes=[r.PropertyType.TEXTURE]}static register(){r.ImageUtils.registerFormat("image/webp",new K)}preread(e){return(e.jsonDoc.json.textures||[]).forEach((e=>{e.extensions&&e.extensions[X]&&(e.source=e.extensions[X].source)})),this}read(e){return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listTextures().forEach((n=>{if("image/webp"===n.getMimeType()){const r=e.imageIndexMap.get(n);(t.json.textures||[]).forEach((e=>{e.source===r&&(e.extensions=e.extensions||{},e.extensions[X]={source:e.source},delete e.source)}))}})),this}}Y.EXTENSION_NAME=X;const J=a;let $,Z,ee,te;function ne(e,t){const n=new $.DecoderBuffer;try{n.Init(t,t.length);if(e.GetEncodedGeometryType(n)!==$.TRIANGULAR_MESH)throw new Error(`[${J}] Unknown geometry type.`);const r=new $.Mesh;if(!e.DecodeBufferToMesh(n,r).ok()||0===r.ptr)throw new Error(`[${J}] Decoding failure.`);return r}finally{$.destroy(n)}}function re(e,t){const n=3*t.num_faces();let r,i;if(t.num_points()<=65534){const s=n*Uint16Array.BYTES_PER_ELEMENT;r=$._malloc(s),e.GetTrianglesUInt16Array(t,s,r),i=new Uint16Array($.HEAPU16.buffer,r,n).slice()}else{const s=n*Uint32Array.BYTES_PER_ELEMENT;r=$._malloc(s),e.GetTrianglesUInt32Array(t,s,r),i=new Uint32Array($.HEAPU32.buffer,r,n).slice()}return $._free(r),i}function ie(e,t,n,r){const i=ee[r.componentType],s=Z[r.componentType],o=n.num_components(),a=t.num_points()*o,c=a*s.BYTES_PER_ELEMENT,l=$._malloc(c);e.GetAttributeDataArrayForAllPoints(t,n,i,c,l);const u=new s($.HEAPF32.buffer,l,a).slice();return $._free(l),u}var se,oe;!function(e){e[e.EDGEBREAKER=1]="EDGEBREAKER",e[e.SEQUENTIAL=0]="SEQUENTIAL"}(se||(se={})),function(e){e.POSITION="POSITION",e.NORMAL="NORMAL",e.COLOR="COLOR",e.TEX_COORD="TEX_COORD",e.GENERIC="GENERIC"}(oe||(oe={}));const ae={[oe.POSITION]:14,[oe.NORMAL]:10,[oe.COLOR]:8,[oe.TEX_COORD]:12,[oe.GENERIC]:12},ce={decodeSpeed:5,encodeSpeed:5,method:se.EDGEBREAKER,quantizationBits:ae,quantizationVolume:"mesh"};function le(e,t=ce){const n={...ce,...t};n.quantizationBits={...ae,...t.quantizationBits};const r=new te.MeshBuilder,i=new te.Mesh,s=new te.ExpertEncoder(i),o={},a=new te.DracoInt8Array,c=e.listTargets().length>0;let l=!1;for(const t of e.listSemantics()){const a=e.getAttribute(t);if(a.getSparse()){l=!0;continue}const c=ue(t),u=he(r,a.getComponentType(),i,te[c],a.getCount(),a.getElementSize(),a.getArray());if(-1===u)throw new Error(`Error compressing "${t}" attribute.`);if(o[t]=u,"mesh"===n.quantizationVolume||"POSITION"!==t)s.SetAttributeQuantization(u,n.quantizationBits[c]);else{if("object"!=typeof n.quantizationVolume)throw new Error("Invalid quantization volume state.");{const{quantizationVolume:e}=n,t=Math.max(e.max[0]-e.min[0],e.max[1]-e.min[1],e.max[2]-e.min[2]);s.SetAttributeExplicitQuantization(u,n.quantizationBits[c],a.getElementSize(),e.min,t)}}}const u=e.getIndices();if(!u)throw new de("Primitive must have indices.");r.AddFacesToMesh(i,u.getCount()/3,u.getArray()),s.SetSpeedOptions(n.encodeSpeed,n.decodeSpeed),s.SetTrackEncodedProperties(!0),n.method===se.SEQUENTIAL||c||l?s.SetEncodingMethod(te.MESH_SEQUENTIAL_ENCODING):s.SetEncodingMethod(te.MESH_EDGEBREAKER_ENCODING);const h=s.EncodeToDracoBuffer(!(c||l),a);if(h<=0)throw new de("Error applying Draco compression.");const d=new Uint8Array(h);for(let e=0;e<h;++e)d[e]=a.GetValue(e);const p=s.GetNumberOfEncodedPoints(),f=3*s.GetNumberOfEncodedFaces();return te.destroy(a),te.destroy(i),te.destroy(r),te.destroy(s),{numVertices:p,numIndices:f,data:d,attributeIDs:o}}function ue(e){return"POSITION"===e?oe.POSITION:"NORMAL"===e?oe.NORMAL:e.startsWith("COLOR_")?oe.COLOR:e.startsWith("TEXCOORD_")?oe.TEX_COORD:oe.GENERIC}function he(e,t,n,i,s,o,a){switch(t){case r.Accessor.ComponentType.UNSIGNED_BYTE:return e.AddUInt8Attribute(n,i,s,o,a);case r.Accessor.ComponentType.BYTE:return e.AddInt8Attribute(n,i,s,o,a);case r.Accessor.ComponentType.UNSIGNED_SHORT:return e.AddUInt16Attribute(n,i,s,o,a);case r.Accessor.ComponentType.SHORT:return e.AddInt16Attribute(n,i,s,o,a);case r.Accessor.ComponentType.UNSIGNED_INT:return e.AddUInt32Attribute(n,i,s,o,a);case r.Accessor.ComponentType.FLOAT:return e.AddFloatAttribute(n,i,s,o,a);default:throw new Error(`Unexpected component type, "${t}".`)}}class de extends Error{}const pe=a;class fe extends r.Extension{constructor(...e){super(...e),this.extensionName=pe,this.prereadTypes=[r.PropertyType.PRIMITIVE],this.prewriteTypes=[r.PropertyType.ACCESSOR],this.readDependencies=["draco3d.decoder"],this.writeDependencies=["draco3d.encoder"],this._decoderModule=null,this._encoderModule=null,this._encoderOptions={}}install(e,t){var n,i;return"draco3d.decoder"===e&&(this._decoderModule=t,n=this._decoderModule,$=n,Z={[r.Accessor.ComponentType.FLOAT]:Float32Array,[r.Accessor.ComponentType.UNSIGNED_INT]:Uint32Array,[r.Accessor.ComponentType.UNSIGNED_SHORT]:Uint16Array,[r.Accessor.ComponentType.UNSIGNED_BYTE]:Uint8Array,[r.Accessor.ComponentType.SHORT]:Int16Array,[r.Accessor.ComponentType.BYTE]:Int8Array},ee={[r.Accessor.ComponentType.FLOAT]:$.DT_FLOAT32,[r.Accessor.ComponentType.UNSIGNED_INT]:$.DT_UINT32,[r.Accessor.ComponentType.UNSIGNED_SHORT]:$.DT_UINT16,[r.Accessor.ComponentType.UNSIGNED_BYTE]:$.DT_UINT8,[r.Accessor.ComponentType.SHORT]:$.DT_INT16,[r.Accessor.ComponentType.BYTE]:$.DT_INT8}),"draco3d.encoder"===e&&(this._encoderModule=t,i=this._encoderModule,te=i),this}setEncoderOptions(e){return this._encoderOptions=e,this}preread(e){if(!this._decoderModule)throw new Error(`[${pe}] Please install extension dependency, "draco3d.decoder".`);const t=this.document.getLogger(),n=e.jsonDoc,i=new Map;try{const s=n.json.meshes||[];for(const o of s)for(const s of o.primitives){if(!s.extensions||!s.extensions[pe])continue;const o=s.extensions[pe];let[a,c]=i.get(o.bufferView)||[];if(!c||!a){const e=n.json.bufferViews[o.bufferView],s=n.json.buffers[e.buffer],l=s.uri?n.resources[s.uri]:n.resources[r.GLB_BUFFER],u=e.byteOffset||0,h=e.byteLength,d=r.BufferUtils.toView(l,u,h);a=new this._decoderModule.Decoder,c=ne(a,d),i.set(o.bufferView,[a,c]),t.debug(`[${pe}] Decompressed ${d.byteLength} bytes.`)}for(const t in o.attributes){const n=e.jsonDoc.json.accessors[s.attributes[t]],r=a.GetAttributeByUniqueId(c,o.attributes[t]),i=ie(a,c,r,n);e.accessors[s.attributes[t]].setArray(i)}void 0!==s.indices&&e.accessors[s.indices].setArray(re(a,c))}}finally{for(const[e,t]of Array.from(i.values()))this._decoderModule.destroy(e),this._decoderModule.destroy(t)}return this}read(e){return this}prewrite(e,t){if(!this._encoderModule)throw new Error(`[${pe}] Please install extension dependency, "draco3d.encoder".`);const n=this.document.getLogger();n.debug(`[${pe}] Compression options: ${JSON.stringify(this._encoderOptions)}`);const i=function(e){const t=e.getLogger(),n=new Set,i=new Set;let s=0,o=0;for(const t of e.getRoot().listMeshes())for(const e of t.listPrimitives())e.getIndices()?e.getMode()!==r.Primitive.Mode.TRIANGLES?(i.add(e),o++):n.add(e):(i.add(e),s++);s>0&&t.warn(`[${pe}] Skipping Draco compression of ${s} non-indexed primitives.`);o>0&&t.warn(`[${pe}] Skipping Draco compression of ${o} non-TRIANGLES primitives.`);const a=e.getRoot().listAccessors(),c=new Map;for(let e=0;e<a.length;e++)c.set(a[e],e);const l=new Map,u=new Set,h=new Map;for(const t of Array.from(n)){let n=me(t,c);if(u.has(n))h.set(t,n);else{if(l.has(t.getIndices())){const n=t.getIndices(),r=n.clone();c.set(r,e.getRoot().listAccessors().length-1),t.swap(n,r)}for(const n of t.listAttributes())if(l.has(n)){const r=n.clone();c.set(r,e.getRoot().listAccessors().length-1),t.swap(n,r)}n=me(t,c),u.add(n),h.set(t,n),l.set(t.getIndices(),n);for(const e of t.listAttributes())l.set(e,n)}}for(const e of Array.from(l.keys())){const t=new Set(e.listParents().map((e=>e.propertyType)));if(2!==t.size||!t.has(r.PropertyType.PRIMITIVE)||!t.has(r.PropertyType.ROOT))throw new Error(`[${pe}] Compressed accessors must only be used as indices or vertex attributes.`)}for(const e of Array.from(n)){const t=h.get(e),n=e.getIndices();if(l.get(n)!==t||e.listAttributes().some((e=>l.get(e)!==t)))throw new Error(`[${pe}] Draco primitives must share all, or no, accessors.`)}for(const e of Array.from(i)){const t=e.getIndices();if(l.has(t)||e.listAttributes().some((e=>l.has(e))))throw new Error(`[${pe}] Accessor cannot be shared by compressed and uncompressed primitives.`)}return h}(this.document),s=new Map;let o="mesh";"scene"===this._encoderOptions.quantizationVolume&&(1!==this.document.getRoot().listScenes().length?n.warn(`[${pe}]: quantizationVolume=scene requires exactly 1 scene.`):o=r.getBounds(this.document.getRoot().listScenes().pop()));for(const t of Array.from(i.keys())){const a=i.get(t);if(!a)throw new Error("Unexpected primitive.");if(s.has(a)){s.set(a,s.get(a));continue}const c=t.getIndices(),l=e.jsonDoc.json.accessors;let u;try{u=le(t,{...this._encoderOptions,quantizationVolume:o})}catch(e){if(e instanceof de){n.warn(`[${pe}]: ${e.message} Skipping primitive compression.`);continue}throw e}s.set(a,u);const h=e.createAccessorDef(c);h.count=u.numIndices,e.accessorIndexMap.set(c,l.length),l.push(h),u.numVertices>65534&&r.Accessor.getComponentSize(h.componentType)<=2?h.componentType=r.Accessor.ComponentType.UNSIGNED_INT:u.numVertices>254&&r.Accessor.getComponentSize(h.componentType)<=1&&(h.componentType=r.Accessor.ComponentType.UNSIGNED_SHORT);for(const n of t.listSemantics()){const r=t.getAttribute(n);if(void 0===u.attributeIDs[n])continue;const i=e.createAccessorDef(r);i.count=u.numVertices,e.accessorIndexMap.set(r,l.length),l.push(i)}const d=t.getAttribute("POSITION").getBuffer()||this.document.getRoot().listBuffers()[0];e.otherBufferViews.has(d)||e.otherBufferViews.set(d,[]),e.otherBufferViews.get(d).push(u.data)}return n.debug(`[${pe}] Compressed ${i.size} primitives.`),e.extensionData[pe]={primitiveHashMap:i,primitiveEncodingMap:s},this}write(e){const t=e.extensionData[pe];for(const n of this.document.getRoot().listMeshes()){const r=e.jsonDoc.json.meshes[e.meshIndexMap.get(n)];for(let i=0;i<n.listPrimitives().length;i++){const s=n.listPrimitives()[i],o=r.primitives[i],a=t.primitiveHashMap.get(s);if(!a)continue;const c=t.primitiveEncodingMap.get(a);c&&(o.extensions=o.extensions||{},o.extensions[pe]={bufferView:e.otherBufferViewsIndexMap.get(c.data),attributes:c.attributeIDs})}}if(!t.primitiveHashMap.size){const t=e.jsonDoc.json;t.extensionsUsed=(t.extensionsUsed||[]).filter((e=>e!==pe)),t.extensionsRequired=(t.extensionsRequired||[]).filter((e=>e!==pe))}return this}}function me(e,t){const n=[],r=e.getIndices();n.push(t.get(r));for(const r of e.listAttributes())n.push(t.get(r));return n.sort().join("|")}fe.EXTENSION_NAME=pe,fe.EncoderMethod=se;class ge extends r.ExtensionProperty{init(){this.extensionName=c,this.propertyType="Light",this.parentTypes=[r.PropertyType.NODE]}getDefaults(){return Object.assign(super.getDefaults(),{color:[1,1,1],intensity:1,type:ge.Type.POINT,range:null,innerConeAngle:0,outerConeAngle:Math.PI/4})}getColor(){return this.get("color")}setColor(e){return this.set("color",e)}getIntensity(){return this.get("intensity")}setIntensity(e){return this.set("intensity",e)}getType(){return this.get("type")}setType(e){return this.set("type",e)}getRange(){return this.get("range")}setRange(e){return this.set("range",e)}getInnerConeAngle(){return this.get("innerConeAngle")}setInnerConeAngle(e){return this.set("innerConeAngle",e)}getOuterConeAngle(){return this.get("outerConeAngle")}setOuterConeAngle(e){return this.set("outerConeAngle",e)}}ge.EXTENSION_NAME=c,ge.Type={POINT:"point",SPOT:"spot",DIRECTIONAL:"directional"};const Ae=c;class ye extends r.Extension{constructor(...e){super(...e),this.extensionName=Ae}createLight(e=""){return new ge(this.document.getGraph(),e)}read(e){const t=e.jsonDoc;if(!t.json.extensions||!t.json.extensions[Ae])return this;const n=(t.json.extensions[Ae].lights||[]).map((e=>{var t,n;const r=this.createLight().setName(e.name||"").setType(e.type);return void 0!==e.color&&r.setColor(e.color),void 0!==e.intensity&&r.setIntensity(e.intensity),void 0!==e.range&&r.setRange(e.range),void 0!==(null==(t=e.spot)?void 0:t.innerConeAngle)&&r.setInnerConeAngle(e.spot.innerConeAngle),void 0!==(null==(n=e.spot)?void 0:n.outerConeAngle)&&r.setOuterConeAngle(e.spot.outerConeAngle),r}));return t.json.nodes.forEach(((t,r)=>{if(!t.extensions||!t.extensions[Ae])return;const i=t.extensions[Ae];e.nodes[r].setExtension(Ae,n[i.light])})),this}write(e){const t=e.jsonDoc;if(0===this.properties.size)return this;const n=[],i=new Map;for(const e of this.properties){const t=e,s={type:t.getType()};r.MathUtils.eq(t.getColor(),[1,1,1])||(s.color=t.getColor()),1!==t.getIntensity()&&(s.intensity=t.getIntensity()),null!=t.getRange()&&(s.range=t.getRange()),t.getName()&&(s.name=t.getName()),t.getType()===ge.Type.SPOT&&(s.spot={innerConeAngle:t.getInnerConeAngle(),outerConeAngle:t.getOuterConeAngle()}),n.push(s),i.set(t,n.length-1)}return this.document.getRoot().listNodes().forEach((n=>{const r=n.getExtension(Ae);if(r){const s=e.nodeIndexMap.get(n),o=t.json.nodes[s];o.extensions=o.extensions||{},o.extensions[Ae]={light:i.get(r)}}})),t.json.extensions=t.json.extensions||{},t.json.extensions[Ae]={lights:n},this}}ye.EXTENSION_NAME=Ae;const{R:_e,G:ve,B:be}=r.TextureChannel;class xe extends r.ExtensionProperty{init(){this.extensionName=l,this.propertyType="Anisotropy",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{anisotropyStrength:0,anisotropyRotation:0,anisotropyTexture:null,anisotropyTextureInfo:new r.TextureInfo(this.graph,"anisotropyTextureInfo")})}getAnisotropyStrength(){return this.get("anisotropyStrength")}setAnisotropyStrength(e){return this.set("anisotropyStrength",e)}getAnisotropyRotation(){return this.get("anisotropyRotation")}setAnisotropyRotation(e){return this.set("anisotropyRotation",e)}getAnisotropyTexture(){return this.getRef("anisotropyTexture")}getAnisotropyTextureInfo(){return this.getRef("anisotropyTexture")?this.getRef("anisotropyTextureInfo"):null}setAnisotropyTexture(e){return this.setRef("anisotropyTexture",e,{channels:_e|ve|be})}}xe.EXTENSION_NAME=l;const we=l;class Ee extends r.Extension{constructor(...e){super(...e),this.extensionName=we,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createAnisotropy(){return new xe(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const t=e.jsonDoc,n=t.json.materials||[],r=t.json.textures||[];return n.forEach(((t,n)=>{if(t.extensions&&t.extensions[we]){const i=this.createAnisotropy();e.materials[n].setExtension(we,i);const s=t.extensions[we];if(void 0!==s.anisotropyStrength&&i.setAnisotropyStrength(s.anisotropyStrength),void 0!==s.anisotropyRotation&&i.setAnisotropyRotation(s.anisotropyRotation),void 0!==s.anisotropyTexture){const t=s.anisotropyTexture,n=e.textures[r[t.index].source];i.setAnisotropyTexture(n),e.setTextureInfo(i.getAnisotropyTextureInfo(),t)}}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const r=n.getExtension(we);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const o=s.extensions[we]={};if(r.getAnisotropyStrength()>0&&(o.anisotropyStrength=r.getAnisotropyStrength()),0!==r.getAnisotropyRotation()&&(o.anisotropyRotation=r.getAnisotropyRotation()),r.getAnisotropyTexture()){const t=r.getAnisotropyTexture(),n=r.getAnisotropyTextureInfo();o.anisotropyTexture=e.createTextureInfoDef(t,n)}}})),this}}Ee.EXTENSION_NAME=we;const{R:Te,G:Se,B:Me}=r.TextureChannel;class Ce extends r.ExtensionProperty{init(){this.extensionName=u,this.propertyType="Clearcoat",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{clearcoatFactor:0,clearcoatTexture:null,clearcoatTextureInfo:new r.TextureInfo(this.graph,"clearcoatTextureInfo"),clearcoatRoughnessFactor:0,clearcoatRoughnessTexture:null,clearcoatRoughnessTextureInfo:new r.TextureInfo(this.graph,"clearcoatRoughnessTextureInfo"),clearcoatNormalScale:1,clearcoatNormalTexture:null,clearcoatNormalTextureInfo:new r.TextureInfo(this.graph,"clearcoatNormalTextureInfo")})}getClearcoatFactor(){return this.get("clearcoatFactor")}setClearcoatFactor(e){return this.set("clearcoatFactor",e)}getClearcoatTexture(){return this.getRef("clearcoatTexture")}getClearcoatTextureInfo(){return this.getRef("clearcoatTexture")?this.getRef("clearcoatTextureInfo"):null}setClearcoatTexture(e){return this.setRef("clearcoatTexture",e,{channels:Te})}getClearcoatRoughnessFactor(){return this.get("clearcoatRoughnessFactor")}setClearcoatRoughnessFactor(e){return this.set("clearcoatRoughnessFactor",e)}getClearcoatRoughnessTexture(){return this.getRef("clearcoatRoughnessTexture")}getClearcoatRoughnessTextureInfo(){return this.getRef("clearcoatRoughnessTexture")?this.getRef("clearcoatRoughnessTextureInfo"):null}setClearcoatRoughnessTexture(e){return this.setRef("clearcoatRoughnessTexture",e,{channels:Se})}getClearcoatNormalScale(){return this.get("clearcoatNormalScale")}setClearcoatNormalScale(e){return this.set("clearcoatNormalScale",e)}getClearcoatNormalTexture(){return this.getRef("clearcoatNormalTexture")}getClearcoatNormalTextureInfo(){return this.getRef("clearcoatNormalTexture")?this.getRef("clearcoatNormalTextureInfo"):null}setClearcoatNormalTexture(e){return this.setRef("clearcoatNormalTexture",e,{channels:Te|Se|Me})}}Ce.EXTENSION_NAME=u;const Ie=u;class Re extends r.Extension{constructor(...e){super(...e),this.extensionName=Ie,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createClearcoat(){return new Ce(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const t=e.jsonDoc,n=t.json.materials||[],r=t.json.textures||[];return n.forEach(((t,n)=>{if(t.extensions&&t.extensions[Ie]){const i=this.createClearcoat();e.materials[n].setExtension(Ie,i);const s=t.extensions[Ie];if(void 0!==s.clearcoatFactor&&i.setClearcoatFactor(s.clearcoatFactor),void 0!==s.clearcoatRoughnessFactor&&i.setClearcoatRoughnessFactor(s.clearcoatRoughnessFactor),void 0!==s.clearcoatTexture){const t=s.clearcoatTexture,n=e.textures[r[t.index].source];i.setClearcoatTexture(n),e.setTextureInfo(i.getClearcoatTextureInfo(),t)}if(void 0!==s.clearcoatRoughnessTexture){const t=s.clearcoatRoughnessTexture,n=e.textures[r[t.index].source];i.setClearcoatRoughnessTexture(n),e.setTextureInfo(i.getClearcoatRoughnessTextureInfo(),t)}if(void 0!==s.clearcoatNormalTexture){const t=s.clearcoatNormalTexture,n=e.textures[r[t.index].source];i.setClearcoatNormalTexture(n),e.setTextureInfo(i.getClearcoatNormalTextureInfo(),t),void 0!==t.scale&&i.setClearcoatNormalScale(t.scale)}}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const r=n.getExtension(Ie);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const o=s.extensions[Ie]={clearcoatFactor:r.getClearcoatFactor(),clearcoatRoughnessFactor:r.getClearcoatRoughnessFactor()};if(r.getClearcoatTexture()){const t=r.getClearcoatTexture(),n=r.getClearcoatTextureInfo();o.clearcoatTexture=e.createTextureInfoDef(t,n)}if(r.getClearcoatRoughnessTexture()){const t=r.getClearcoatRoughnessTexture(),n=r.getClearcoatRoughnessTextureInfo();o.clearcoatRoughnessTexture=e.createTextureInfoDef(t,n)}if(r.getClearcoatNormalTexture()){const t=r.getClearcoatNormalTexture(),n=r.getClearcoatNormalTextureInfo();o.clearcoatNormalTexture=e.createTextureInfoDef(t,n),1!==r.getClearcoatNormalScale()&&(o.clearcoatNormalTexture.scale=r.getClearcoatNormalScale())}}})),this}}Re.EXTENSION_NAME=Ie;const{R:Be,G:Pe,B:De,A:Oe}=r.TextureChannel;class Le extends r.ExtensionProperty{init(){this.extensionName=h,this.propertyType="DiffuseTransmission",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{diffuseTransmissionFactor:0,diffuseTransmissionTexture:null,diffuseTransmissionTextureInfo:new r.TextureInfo(this.graph,"diffuseTransmissionTextureInfo"),diffuseTransmissionColorFactor:[1,1,1],diffuseTransmissionColorTexture:null,diffuseTransmissionColorTextureInfo:new r.TextureInfo(this.graph,"diffuseTransmissionColorTextureInfo")})}getDiffuseTransmissionFactor(){return this.get("diffuseTransmissionFactor")}setDiffuseTransmissionFactor(e){return this.set("diffuseTransmissionFactor",e)}getDiffuseTransmissionTexture(){return this.getRef("diffuseTransmissionTexture")}getDiffuseTransmissionTextureInfo(){return this.getRef("diffuseTransmissionTexture")?this.getRef("diffuseTransmissionTextureInfo"):null}setDiffuseTransmissionTexture(e){return this.setRef("diffuseTransmissionTexture",e,{channels:Oe})}getDiffuseTransmissionColorFactor(){return this.get("diffuseTransmissionColorFactor")}setDiffuseTransmissionColorFactor(e){return this.set("diffuseTransmissionColorFactor",e)}getDiffuseTransmissionColorTexture(){return this.getRef("diffuseTransmissionColorTexture")}getDiffuseTransmissionColorTextureInfo(){return this.getRef("diffuseTransmissionColorTexture")?this.getRef("diffuseTransmissionColorTextureInfo"):null}setDiffuseTransmissionColorTexture(e){return this.setRef("diffuseTransmissionColorTexture",e,{channels:Be|Pe|De})}}Le.EXTENSION_NAME=h;const Ne=h;class Fe extends r.Extension{constructor(...e){super(...e),this.extensionName=Ne}createDiffuseTransmission(){return new Le(this.document.getGraph())}read(e){const t=e.jsonDoc,n=t.json.materials||[],r=t.json.textures||[];return n.forEach(((t,n)=>{if(t.extensions&&t.extensions[Ne]){const i=this.createDiffuseTransmission();e.materials[n].setExtension(Ne,i);const s=t.extensions[Ne];if(void 0!==s.diffuseTransmissionFactor&&i.setDiffuseTransmissionFactor(s.diffuseTransmissionFactor),void 0!==s.diffuseTransmissionColorFactor&&i.setDiffuseTransmissionColorFactor(s.diffuseTransmissionColorFactor),void 0!==s.diffuseTransmissionTexture){const t=s.diffuseTransmissionTexture,n=e.textures[r[t.index].source];i.setDiffuseTransmissionTexture(n),e.setTextureInfo(i.getDiffuseTransmissionTextureInfo(),t)}if(void 0!==s.diffuseTransmissionColorTexture){const t=s.diffuseTransmissionColorTexture,n=e.textures[r[t.index].source];i.setDiffuseTransmissionColorTexture(n),e.setTextureInfo(i.getDiffuseTransmissionColorTextureInfo(),t)}}})),this}write(e){const t=e.jsonDoc;for(const n of this.document.getRoot().listMaterials()){const r=n.getExtension(Ne);if(!r)continue;const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const o=s.extensions[Ne]={diffuseTransmissionFactor:r.getDiffuseTransmissionFactor(),diffuseTransmissionColorFactor:r.getDiffuseTransmissionColorFactor()};if(r.getDiffuseTransmissionTexture()){const t=r.getDiffuseTransmissionTexture(),n=r.getDiffuseTransmissionTextureInfo();o.diffuseTransmissionTexture=e.createTextureInfoDef(t,n)}if(r.getDiffuseTransmissionColorTexture()){const t=r.getDiffuseTransmissionColorTexture(),n=r.getDiffuseTransmissionColorTextureInfo();o.diffuseTransmissionColorTexture=e.createTextureInfoDef(t,n)}}return this}}Fe.EXTENSION_NAME=Ne;class Ue extends r.ExtensionProperty{init(){this.extensionName=d,this.propertyType="Dispersion",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{dispersion:0})}getDispersion(){return this.get("dispersion")}setDispersion(e){return this.set("dispersion",e)}}Ue.EXTENSION_NAME=d;const ke=d;class ze extends r.Extension{constructor(...e){super(...e),this.extensionName=ke,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createDispersion(){return new Ue(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){return(e.jsonDoc.json.materials||[]).forEach(((t,n)=>{if(t.extensions&&t.extensions[ke]){const r=this.createDispersion();e.materials[n].setExtension(ke,r);const i=t.extensions[ke];void 0!==i.dispersion&&r.setDispersion(i.dispersion)}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const r=n.getExtension(ke);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{},s.extensions[ke]={dispersion:r.getDispersion()}}})),this}}ze.EXTENSION_NAME=ke;class Ge extends r.ExtensionProperty{init(){this.extensionName=p,this.propertyType="EmissiveStrength",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{emissiveStrength:1})}getEmissiveStrength(){return this.get("emissiveStrength")}setEmissiveStrength(e){return this.set("emissiveStrength",e)}}Ge.EXTENSION_NAME=p;const je=p;class Ve extends r.Extension{constructor(...e){super(...e),this.extensionName=je,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createEmissiveStrength(){return new Ge(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){return(e.jsonDoc.json.materials||[]).forEach(((t,n)=>{if(t.extensions&&t.extensions[je]){const r=this.createEmissiveStrength();e.materials[n].setExtension(je,r);const i=t.extensions[je];void 0!==i.emissiveStrength&&r.setEmissiveStrength(i.emissiveStrength)}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const r=n.getExtension(je);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{},s.extensions[je]={emissiveStrength:r.getEmissiveStrength()}}})),this}}Ve.EXTENSION_NAME=je;class Qe extends r.ExtensionProperty{init(){this.extensionName=f,this.propertyType="IOR",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{ior:1.5})}getIOR(){return this.get("ior")}setIOR(e){return this.set("ior",e)}}Qe.EXTENSION_NAME=f;const He=f;class We extends r.Extension{constructor(...e){super(...e),this.extensionName=He,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createIOR(){return new Qe(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){return(e.jsonDoc.json.materials||[]).forEach(((t,n)=>{if(t.extensions&&t.extensions[He]){const r=this.createIOR();e.materials[n].setExtension(He,r);const i=t.extensions[He];void 0!==i.ior&&r.setIOR(i.ior)}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const r=n.getExtension(He);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{},s.extensions[He]={ior:r.getIOR()}}})),this}}We.EXTENSION_NAME=He;const{R:qe,G:Xe}=r.TextureChannel;class Ke extends r.ExtensionProperty{init(){this.extensionName=m,this.propertyType="Iridescence",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{iridescenceFactor:0,iridescenceTexture:null,iridescenceTextureInfo:new r.TextureInfo(this.graph,"iridescenceTextureInfo"),iridescenceIOR:1.3,iridescenceThicknessMinimum:100,iridescenceThicknessMaximum:400,iridescenceThicknessTexture:null,iridescenceThicknessTextureInfo:new r.TextureInfo(this.graph,"iridescenceThicknessTextureInfo")})}getIridescenceFactor(){return this.get("iridescenceFactor")}setIridescenceFactor(e){return this.set("iridescenceFactor",e)}getIridescenceTexture(){return this.getRef("iridescenceTexture")}getIridescenceTextureInfo(){return this.getRef("iridescenceTexture")?this.getRef("iridescenceTextureInfo"):null}setIridescenceTexture(e){return this.setRef("iridescenceTexture",e,{channels:qe})}getIridescenceIOR(){return this.get("iridescenceIOR")}setIridescenceIOR(e){return this.set("iridescenceIOR",e)}getIridescenceThicknessMinimum(){return this.get("iridescenceThicknessMinimum")}setIridescenceThicknessMinimum(e){return this.set("iridescenceThicknessMinimum",e)}getIridescenceThicknessMaximum(){return this.get("iridescenceThicknessMaximum")}setIridescenceThicknessMaximum(e){return this.set("iridescenceThicknessMaximum",e)}getIridescenceThicknessTexture(){return this.getRef("iridescenceThicknessTexture")}getIridescenceThicknessTextureInfo(){return this.getRef("iridescenceThicknessTexture")?this.getRef("iridescenceThicknessTextureInfo"):null}setIridescenceThicknessTexture(e){return this.setRef("iridescenceThicknessTexture",e,{channels:Xe})}}Ke.EXTENSION_NAME=m;const Ye=m;class Je extends r.Extension{constructor(...e){super(...e),this.extensionName=Ye,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createIridescence(){return new Ke(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const t=e.jsonDoc,n=t.json.materials||[],r=t.json.textures||[];return n.forEach(((t,n)=>{if(t.extensions&&t.extensions[Ye]){const i=this.createIridescence();e.materials[n].setExtension(Ye,i);const s=t.extensions[Ye];if(void 0!==s.iridescenceFactor&&i.setIridescenceFactor(s.iridescenceFactor),void 0!==s.iridescenceIor&&i.setIridescenceIOR(s.iridescenceIor),void 0!==s.iridescenceThicknessMinimum&&i.setIridescenceThicknessMinimum(s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&i.setIridescenceThicknessMaximum(s.iridescenceThicknessMaximum),void 0!==s.iridescenceTexture){const t=s.iridescenceTexture,n=e.textures[r[t.index].source];i.setIridescenceTexture(n),e.setTextureInfo(i.getIridescenceTextureInfo(),t)}if(void 0!==s.iridescenceThicknessTexture){const t=s.iridescenceThicknessTexture,n=e.textures[r[t.index].source];i.setIridescenceThicknessTexture(n),e.setTextureInfo(i.getIridescenceThicknessTextureInfo(),t)}}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const r=n.getExtension(Ye);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const o=s.extensions[Ye]={};if(r.getIridescenceFactor()>0&&(o.iridescenceFactor=r.getIridescenceFactor()),1.3!==r.getIridescenceIOR()&&(o.iridescenceIor=r.getIridescenceIOR()),100!==r.getIridescenceThicknessMinimum()&&(o.iridescenceThicknessMinimum=r.getIridescenceThicknessMinimum()),400!==r.getIridescenceThicknessMaximum()&&(o.iridescenceThicknessMaximum=r.getIridescenceThicknessMaximum()),r.getIridescenceTexture()){const t=r.getIridescenceTexture(),n=r.getIridescenceTextureInfo();o.iridescenceTexture=e.createTextureInfoDef(t,n)}if(r.getIridescenceThicknessTexture()){const t=r.getIridescenceThicknessTexture(),n=r.getIridescenceThicknessTextureInfo();o.iridescenceThicknessTexture=e.createTextureInfoDef(t,n)}}})),this}}Je.EXTENSION_NAME=Ye;const{R:$e,G:Ze,B:et,A:tt}=r.TextureChannel;class nt extends r.ExtensionProperty{init(){this.extensionName=g,this.propertyType="PBRSpecularGlossiness",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{diffuseFactor:[1,1,1,1],diffuseTexture:null,diffuseTextureInfo:new r.TextureInfo(this.graph,"diffuseTextureInfo"),specularFactor:[1,1,1],glossinessFactor:1,specularGlossinessTexture:null,specularGlossinessTextureInfo:new r.TextureInfo(this.graph,"specularGlossinessTextureInfo")})}getDiffuseFactor(){return this.get("diffuseFactor")}setDiffuseFactor(e){return this.set("diffuseFactor",e)}getDiffuseTexture(){return this.getRef("diffuseTexture")}getDiffuseTextureInfo(){return this.getRef("diffuseTexture")?this.getRef("diffuseTextureInfo"):null}setDiffuseTexture(e){return this.setRef("diffuseTexture",e,{channels:$e|Ze|et|tt,isColor:!0})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(e){return this.set("specularFactor",e)}getGlossinessFactor(){return this.get("glossinessFactor")}setGlossinessFactor(e){return this.set("glossinessFactor",e)}getSpecularGlossinessTexture(){return this.getRef("specularGlossinessTexture")}getSpecularGlossinessTextureInfo(){return this.getRef("specularGlossinessTexture")?this.getRef("specularGlossinessTextureInfo"):null}setSpecularGlossinessTexture(e){return this.setRef("specularGlossinessTexture",e,{channels:$e|Ze|et|tt})}}nt.EXTENSION_NAME=g;const rt=g;class it extends r.Extension{constructor(...e){super(...e),this.extensionName=rt,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createPBRSpecularGlossiness(){return new nt(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const t=e.jsonDoc,n=t.json.materials||[],r=t.json.textures||[];return n.forEach(((t,n)=>{if(t.extensions&&t.extensions[rt]){const i=this.createPBRSpecularGlossiness();e.materials[n].setExtension(rt,i);const s=t.extensions[rt];if(void 0!==s.diffuseFactor&&i.setDiffuseFactor(s.diffuseFactor),void 0!==s.specularFactor&&i.setSpecularFactor(s.specularFactor),void 0!==s.glossinessFactor&&i.setGlossinessFactor(s.glossinessFactor),void 0!==s.diffuseTexture){const t=s.diffuseTexture,n=e.textures[r[t.index].source];i.setDiffuseTexture(n),e.setTextureInfo(i.getDiffuseTextureInfo(),t)}if(void 0!==s.specularGlossinessTexture){const t=s.specularGlossinessTexture,n=e.textures[r[t.index].source];i.setSpecularGlossinessTexture(n),e.setTextureInfo(i.getSpecularGlossinessTextureInfo(),t)}}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const r=n.getExtension(rt);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const o=s.extensions[rt]={diffuseFactor:r.getDiffuseFactor(),specularFactor:r.getSpecularFactor(),glossinessFactor:r.getGlossinessFactor()};if(r.getDiffuseTexture()){const t=r.getDiffuseTexture(),n=r.getDiffuseTextureInfo();o.diffuseTexture=e.createTextureInfoDef(t,n)}if(r.getSpecularGlossinessTexture()){const t=r.getSpecularGlossinessTexture(),n=r.getSpecularGlossinessTextureInfo();o.specularGlossinessTexture=e.createTextureInfoDef(t,n)}}})),this}}it.EXTENSION_NAME=rt;const{R:st,G:ot,B:at,A:ct}=r.TextureChannel;class lt extends r.ExtensionProperty{init(){this.extensionName=A,this.propertyType="Sheen",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{sheenColorFactor:[0,0,0],sheenColorTexture:null,sheenColorTextureInfo:new r.TextureInfo(this.graph,"sheenColorTextureInfo"),sheenRoughnessFactor:0,sheenRoughnessTexture:null,sheenRoughnessTextureInfo:new r.TextureInfo(this.graph,"sheenRoughnessTextureInfo")})}getSheenColorFactor(){return this.get("sheenColorFactor")}setSheenColorFactor(e){return this.set("sheenColorFactor",e)}getSheenColorTexture(){return this.getRef("sheenColorTexture")}getSheenColorTextureInfo(){return this.getRef("sheenColorTexture")?this.getRef("sheenColorTextureInfo"):null}setSheenColorTexture(e){return this.setRef("sheenColorTexture",e,{channels:st|ot|at,isColor:!0})}getSheenRoughnessFactor(){return this.get("sheenRoughnessFactor")}setSheenRoughnessFactor(e){return this.set("sheenRoughnessFactor",e)}getSheenRoughnessTexture(){return this.getRef("sheenRoughnessTexture")}getSheenRoughnessTextureInfo(){return this.getRef("sheenRoughnessTexture")?this.getRef("sheenRoughnessTextureInfo"):null}setSheenRoughnessTexture(e){return this.setRef("sheenRoughnessTexture",e,{channels:ct})}}lt.EXTENSION_NAME=A;const ut=A;class ht extends r.Extension{constructor(...e){super(...e),this.extensionName=ut,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createSheen(){return new lt(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const t=e.jsonDoc,n=t.json.materials||[],r=t.json.textures||[];return n.forEach(((t,n)=>{if(t.extensions&&t.extensions[ut]){const i=this.createSheen();e.materials[n].setExtension(ut,i);const s=t.extensions[ut];if(void 0!==s.sheenColorFactor&&i.setSheenColorFactor(s.sheenColorFactor),void 0!==s.sheenRoughnessFactor&&i.setSheenRoughnessFactor(s.sheenRoughnessFactor),void 0!==s.sheenColorTexture){const t=s.sheenColorTexture,n=e.textures[r[t.index].source];i.setSheenColorTexture(n),e.setTextureInfo(i.getSheenColorTextureInfo(),t)}if(void 0!==s.sheenRoughnessTexture){const t=s.sheenRoughnessTexture,n=e.textures[r[t.index].source];i.setSheenRoughnessTexture(n),e.setTextureInfo(i.getSheenRoughnessTextureInfo(),t)}}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const r=n.getExtension(ut);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const o=s.extensions[ut]={sheenColorFactor:r.getSheenColorFactor(),sheenRoughnessFactor:r.getSheenRoughnessFactor()};if(r.getSheenColorTexture()){const t=r.getSheenColorTexture(),n=r.getSheenColorTextureInfo();o.sheenColorTexture=e.createTextureInfoDef(t,n)}if(r.getSheenRoughnessTexture()){const t=r.getSheenRoughnessTexture(),n=r.getSheenRoughnessTextureInfo();o.sheenRoughnessTexture=e.createTextureInfoDef(t,n)}}})),this}}ht.EXTENSION_NAME=ut;const{R:dt,G:pt,B:ft,A:mt}=r.TextureChannel;class gt extends r.ExtensionProperty{init(){this.extensionName=y,this.propertyType="Specular",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{specularFactor:1,specularTexture:null,specularTextureInfo:new r.TextureInfo(this.graph,"specularTextureInfo"),specularColorFactor:[1,1,1],specularColorTexture:null,specularColorTextureInfo:new r.TextureInfo(this.graph,"specularColorTextureInfo")})}getSpecularFactor(){return this.get("specularFactor")}setSpecularFactor(e){return this.set("specularFactor",e)}getSpecularColorFactor(){return this.get("specularColorFactor")}setSpecularColorFactor(e){return this.set("specularColorFactor",e)}getSpecularTexture(){return this.getRef("specularTexture")}getSpecularTextureInfo(){return this.getRef("specularTexture")?this.getRef("specularTextureInfo"):null}setSpecularTexture(e){return this.setRef("specularTexture",e,{channels:mt})}getSpecularColorTexture(){return this.getRef("specularColorTexture")}getSpecularColorTextureInfo(){return this.getRef("specularColorTexture")?this.getRef("specularColorTextureInfo"):null}setSpecularColorTexture(e){return this.setRef("specularColorTexture",e,{channels:dt|pt|ft,isColor:!0})}}gt.EXTENSION_NAME=y;const At=y;class yt extends r.Extension{constructor(...e){super(...e),this.extensionName=At,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createSpecular(){return new gt(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const t=e.jsonDoc,n=t.json.materials||[],r=t.json.textures||[];return n.forEach(((t,n)=>{if(t.extensions&&t.extensions[At]){const i=this.createSpecular();e.materials[n].setExtension(At,i);const s=t.extensions[At];if(void 0!==s.specularFactor&&i.setSpecularFactor(s.specularFactor),void 0!==s.specularColorFactor&&i.setSpecularColorFactor(s.specularColorFactor),void 0!==s.specularTexture){const t=s.specularTexture,n=e.textures[r[t.index].source];i.setSpecularTexture(n),e.setTextureInfo(i.getSpecularTextureInfo(),t)}if(void 0!==s.specularColorTexture){const t=s.specularColorTexture,n=e.textures[r[t.index].source];i.setSpecularColorTexture(n),e.setTextureInfo(i.getSpecularColorTextureInfo(),t)}}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const i=n.getExtension(At);if(i){const s=e.materialIndexMap.get(n),o=t.json.materials[s];o.extensions=o.extensions||{};const a=o.extensions[At]={};if(1!==i.getSpecularFactor()&&(a.specularFactor=i.getSpecularFactor()),r.MathUtils.eq(i.getSpecularColorFactor(),[1,1,1])||(a.specularColorFactor=i.getSpecularColorFactor()),i.getSpecularTexture()){const t=i.getSpecularTexture(),n=i.getSpecularTextureInfo();a.specularTexture=e.createTextureInfoDef(t,n)}if(i.getSpecularColorTexture()){const t=i.getSpecularColorTexture(),n=i.getSpecularColorTextureInfo();a.specularColorTexture=e.createTextureInfoDef(t,n)}}})),this}}yt.EXTENSION_NAME=At;const{R:_t}=r.TextureChannel;class vt extends r.ExtensionProperty{init(){this.extensionName=_,this.propertyType="Transmission",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{transmissionFactor:0,transmissionTexture:null,transmissionTextureInfo:new r.TextureInfo(this.graph,"transmissionTextureInfo")})}getTransmissionFactor(){return this.get("transmissionFactor")}setTransmissionFactor(e){return this.set("transmissionFactor",e)}getTransmissionTexture(){return this.getRef("transmissionTexture")}getTransmissionTextureInfo(){return this.getRef("transmissionTexture")?this.getRef("transmissionTextureInfo"):null}setTransmissionTexture(e){return this.setRef("transmissionTexture",e,{channels:_t})}}vt.EXTENSION_NAME=_;const bt=_;class xt extends r.Extension{constructor(...e){super(...e),this.extensionName=bt,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createTransmission(){return new vt(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const t=e.jsonDoc,n=t.json.materials||[],r=t.json.textures||[];return n.forEach(((t,n)=>{if(t.extensions&&t.extensions[bt]){const i=this.createTransmission();e.materials[n].setExtension(bt,i);const s=t.extensions[bt];if(void 0!==s.transmissionFactor&&i.setTransmissionFactor(s.transmissionFactor),void 0!==s.transmissionTexture){const t=s.transmissionTexture,n=e.textures[r[t.index].source];i.setTransmissionTexture(n),e.setTextureInfo(i.getTransmissionTextureInfo(),t)}}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const r=n.getExtension(bt);if(r){const i=e.materialIndexMap.get(n),s=t.json.materials[i];s.extensions=s.extensions||{};const o=s.extensions[bt]={transmissionFactor:r.getTransmissionFactor()};if(r.getTransmissionTexture()){const t=r.getTransmissionTexture(),n=r.getTransmissionTextureInfo();o.transmissionTexture=e.createTextureInfoDef(t,n)}}})),this}}xt.EXTENSION_NAME=bt;class wt extends r.ExtensionProperty{init(){this.extensionName=v,this.propertyType="Unlit",this.parentTypes=[r.PropertyType.MATERIAL]}}wt.EXTENSION_NAME=v;const Et=v;class Tt extends r.Extension{constructor(...e){super(...e),this.extensionName=Et,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createUnlit(){return new wt(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){return(e.jsonDoc.json.materials||[]).forEach(((t,n)=>{t.extensions&&t.extensions[Et]&&e.materials[n].setExtension(Et,this.createUnlit())})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{if(n.getExtension(Et)){const r=e.materialIndexMap.get(n),i=t.json.materials[r];i.extensions=i.extensions||{},i.extensions[Et]={}}})),this}}Tt.EXTENSION_NAME=Et;class St extends r.ExtensionProperty{init(){this.extensionName=x,this.propertyType="Mapping",this.parentTypes=["MappingList"]}getDefaults(){return Object.assign(super.getDefaults(),{material:null,variants:new r.RefSet})}getMaterial(){return this.getRef("material")}setMaterial(e){return this.setRef("material",e)}addVariant(e){return this.addRef("variants",e)}removeVariant(e){return this.removeRef("variants",e)}listVariants(){return this.listRefs("variants")}}St.EXTENSION_NAME=x;class Mt extends r.ExtensionProperty{init(){this.extensionName=x,this.propertyType="MappingList",this.parentTypes=[r.PropertyType.PRIMITIVE]}getDefaults(){return Object.assign(super.getDefaults(),{mappings:new r.RefSet})}addMapping(e){return this.addRef("mappings",e)}removeMapping(e){return this.removeRef("mappings",e)}listMappings(){return this.listRefs("mappings")}}Mt.EXTENSION_NAME=x;class Ct extends r.ExtensionProperty{init(){this.extensionName=x,this.propertyType="Variant",this.parentTypes=["MappingList"]}}Ct.EXTENSION_NAME=x;const It=x;class Rt extends r.Extension{constructor(...e){super(...e),this.extensionName=It}createMappingList(){return new Mt(this.document.getGraph())}createVariant(e=""){return new Ct(this.document.getGraph(),e)}createMapping(){return new St(this.document.getGraph())}listVariants(){return Array.from(this.properties).filter((e=>e instanceof Ct))}read(e){const t=e.jsonDoc;if(!t.json.extensions||!t.json.extensions[It])return this;const n=(t.json.extensions[It].variants||[]).map((e=>this.createVariant().setName(e.name||"")));return(t.json.meshes||[]).forEach(((t,r)=>{const i=e.meshes[r];(t.primitives||[]).forEach(((t,r)=>{if(!t.extensions||!t.extensions[It])return;const s=this.createMappingList(),o=t.extensions[It];for(const t of o.mappings){const r=this.createMapping();void 0!==t.material&&r.setMaterial(e.materials[t.material]);for(const e of t.variants||[])r.addVariant(n[e]);s.addMapping(r)}i.listPrimitives()[r].setExtension(It,s)}))})),this}write(e){const t=e.jsonDoc,n=this.listVariants();if(!n.length)return this;const r=[],i=new Map;for(const t of n)i.set(t,r.length),r.push(e.createPropertyDef(t));for(const t of this.document.getRoot().listMeshes()){const n=e.meshIndexMap.get(t);t.listPrimitives().forEach(((t,r)=>{const s=t.getExtension(It);if(!s)return;const o=e.jsonDoc.json.meshes[n].primitives[r],a=s.listMappings().map((t=>{const n=e.createPropertyDef(t),r=t.getMaterial();return r&&(n.material=e.materialIndexMap.get(r)),n.variants=t.listVariants().map((e=>i.get(e))),n}));o.extensions=o.extensions||{},o.extensions[It]={mappings:a}}))}return t.json.extensions=t.json.extensions||{},t.json.extensions[It]={variants:r},this}}Rt.EXTENSION_NAME=It;const{G:Bt}=r.TextureChannel;class Pt extends r.ExtensionProperty{init(){this.extensionName=b,this.propertyType="Volume",this.parentTypes=[r.PropertyType.MATERIAL]}getDefaults(){return Object.assign(super.getDefaults(),{thicknessFactor:0,thicknessTexture:null,thicknessTextureInfo:new r.TextureInfo(this.graph,"thicknessTexture"),attenuationDistance:1/0,attenuationColor:[1,1,1]})}getThicknessFactor(){return this.get("thicknessFactor")}setThicknessFactor(e){return this.set("thicknessFactor",e)}getThicknessTexture(){return this.getRef("thicknessTexture")}getThicknessTextureInfo(){return this.getRef("thicknessTexture")?this.getRef("thicknessTextureInfo"):null}setThicknessTexture(e){return this.setRef("thicknessTexture",e,{channels:Bt})}getAttenuationDistance(){return this.get("attenuationDistance")}setAttenuationDistance(e){return this.set("attenuationDistance",e)}getAttenuationColor(){return this.get("attenuationColor")}setAttenuationColor(e){return this.set("attenuationColor",e)}}Pt.EXTENSION_NAME=b;const Dt=b;class Ot extends r.Extension{constructor(...e){super(...e),this.extensionName=Dt,this.prereadTypes=[r.PropertyType.MESH],this.prewriteTypes=[r.PropertyType.MESH]}createVolume(){return new Pt(this.document.getGraph())}read(e){return this}write(e){return this}preread(e){const t=e.jsonDoc,n=t.json.materials||[],r=t.json.textures||[];return n.forEach(((t,n)=>{if(t.extensions&&t.extensions[Dt]){const i=this.createVolume();e.materials[n].setExtension(Dt,i);const s=t.extensions[Dt];if(void 0!==s.thicknessFactor&&i.setThicknessFactor(s.thicknessFactor),void 0!==s.attenuationDistance&&i.setAttenuationDistance(s.attenuationDistance),void 0!==s.attenuationColor&&i.setAttenuationColor(s.attenuationColor),void 0!==s.thicknessTexture){const t=s.thicknessTexture,n=e.textures[r[t.index].source];i.setThicknessTexture(n),e.setTextureInfo(i.getThicknessTextureInfo(),t)}}})),this}prewrite(e){const t=e.jsonDoc;return this.document.getRoot().listMaterials().forEach((n=>{const i=n.getExtension(Dt);if(i){const s=e.materialIndexMap.get(n),o=t.json.materials[s];o.extensions=o.extensions||{};const a=o.extensions[Dt]={};if(i.getThicknessFactor()>0&&(a.thicknessFactor=i.getThicknessFactor()),Number.isFinite(i.getAttenuationDistance())&&(a.attenuationDistance=i.getAttenuationDistance()),r.MathUtils.eq(i.getAttenuationColor(),[1,1,1])||(a.attenuationColor=i.getAttenuationColor()),i.getThicknessTexture()){const t=i.getThicknessTexture(),n=i.getThicknessTextureInfo();a.thicknessTexture=e.createTextureInfoDef(t,n)}}})),this}}Ot.EXTENSION_NAME=Dt;const Lt="KHR_mesh_quantization";class Nt extends r.Extension{constructor(...e){super(...e),this.extensionName=Lt}read(e){return this}write(e){return this}}Nt.EXTENSION_NAME=Lt;const Ft="KHR_texture_basisu";class Ut{match(e){return 171===e[0]&&75===e[1]&&84===e[2]&&88===e[3]&&32===e[4]&&50===e[5]&&48===e[6]&&187===e[7]&&13===e[8]&&10===e[9]&&26===e[10]&&10===e[11]}getSize(e){const t=i.read(e);return[t.pixelWidth,t.pixelHeight]}getChannels(e){const t=i.read(e).dataFormatDescriptor[0];if(t.colorModel===i.KHR_DF_MODEL_ETC1S)return 2!==t.samples.length||15&~t.samples[1].channelType?3:4;if(t.colorModel===i.KHR_DF_MODEL_UASTC)return 3==(15&t.samples[0].channelType)?4:3;throw new Error(`Unexpected KTX2 colorModel, "${t.colorModel}".`)}getVRAMByteLength(e){const t=i.read(e),n=this.getChannels(e)>3;let r=0;for(let e=0;e<t.levels.length;e++){const i=t.levels[e];if(i.uncompressedByteLength)r+=i.uncompressedByteLength;else{r+=Math.max(1,Math.floor(t.pixelWidth/Math.pow(2,e)))/4*(Math.max(1,Math.floor(t.pixelHeight/Math.pow(2,e)))/4)*(n?16:8)}}return r}}class kt extends r.Extension{constructor(...e){super(...e),this.extensionName=Ft,this.prereadTypes=[r.PropertyType.TEXTURE]}static register(){r.ImageUtils.registerFormat("image/ktx2",new Ut)}preread(e){return e.jsonDoc.json.textures.forEach((e=>{if(e.extensions&&e.extensions[Ft]){const t=e.extensions[Ft];e.source=t.source}})),this}read(e){return this}write(e){const t=e.jsonDoc;return this.document.getRoot().listTextures().forEach((n=>{if("image/ktx2"===n.getMimeType()){const r=e.imageIndexMap.get(n);t.json.textures.forEach((e=>{e.source===r&&(e.extensions=e.extensions||{},e.extensions[Ft]={source:e.source},delete e.source)}))}})),this}}kt.EXTENSION_NAME=Ft;class zt extends r.ExtensionProperty{init(){this.extensionName=w,this.propertyType="Transform",this.parentTypes=[r.PropertyType.TEXTURE_INFO]}getDefaults(){return Object.assign(super.getDefaults(),{offset:[0,0],rotation:0,scale:[1,1],texCoord:null})}getOffset(){return this.get("offset")}setOffset(e){return this.set("offset",e)}getRotation(){return this.get("rotation")}setRotation(e){return this.set("rotation",e)}getScale(){return this.get("scale")}setScale(e){return this.set("scale",e)}getTexCoord(){return this.get("texCoord")}setTexCoord(e){return this.set("texCoord",e)}}zt.EXTENSION_NAME=w;const Gt=w;class jt extends r.Extension{constructor(...e){super(...e),this.extensionName=Gt}createTransform(){return new zt(this.document.getGraph())}read(e){for(const[t,n]of Array.from(e.textureInfos.entries())){if(!n.extensions||!n.extensions[Gt])continue;const e=this.createTransform(),r=n.extensions[Gt];void 0!==r.offset&&e.setOffset(r.offset),void 0!==r.rotation&&e.setRotation(r.rotation),void 0!==r.scale&&e.setScale(r.scale),void 0!==r.texCoord&&e.setTexCoord(r.texCoord),t.setExtension(Gt,e)}return this}write(e){const t=Array.from(e.textureInfoDefMap.entries());for(const[e,n]of t){const t=e.getExtension(Gt);if(!t)continue;n.extensions=n.extensions||{};const i={},s=r.MathUtils.eq;s(t.getOffset(),[0,0])||(i.offset=t.getOffset()),0!==t.getRotation()&&(i.rotation=t.getRotation()),s(t.getScale(),[1,1])||(i.scale=t.getScale()),null!=t.getTexCoord()&&(i.texCoord=t.getTexCoord()),n.extensions[Gt]=i}return this}}jt.EXTENSION_NAME=Gt;const Vt=[r.PropertyType.ROOT,r.PropertyType.SCENE,r.PropertyType.NODE,r.PropertyType.MESH,r.PropertyType.MATERIAL,r.PropertyType.TEXTURE,r.PropertyType.ANIMATION];class Qt extends r.ExtensionProperty{init(){this.extensionName=E,this.propertyType="Packet",this.parentTypes=Vt}getDefaults(){return Object.assign(super.getDefaults(),{context:{},properties:{}})}getContext(){return this.get("context")}setContext(e){return this.set("context",{...e})}listProperties(){return Object.keys(this.get("properties"))}getProperty(e){const t=this.get("properties");return e in t?t[e]:null}setProperty(e,t){this._assertContext(e);const n={...this.get("properties")};return t?n[e]=t:delete n[e],this.set("properties",n)}toJSONLD(){return{"@context":Ht(this.get("context")),...Ht(this.get("properties"))}}fromJSONLD(e){const t=(e=Ht(e))["@context"];return t&&this.set("context",t),delete e["@context"],this.set("properties",e)}_assertContext(e){if(!(e.split(":")[0]in this.get("context")))throw new Error(`${E}: Missing context for term, "${e}".`)}}function Ht(e){return JSON.parse(JSON.stringify(e))}Qt.EXTENSION_NAME=E;const Wt=E;class qt extends r.Extension{constructor(...e){super(...e),this.extensionName=Wt}createPacket(){return new Qt(this.document.getGraph())}listPackets(){return Array.from(this.properties)}read(e){var t;const n=null==(t=e.jsonDoc.json.extensions)?void 0:t[Wt];if(!n||!n.packets)return this;const r=e.jsonDoc.json,i=this.document.getRoot(),s=n.packets.map((e=>this.createPacket().fromJSONLD(e))),o=[[r.asset],r.scenes,r.nodes,r.meshes,r.materials,r.images,r.animations],a=[[i],i.listScenes(),i.listNodes(),i.listMeshes(),i.listMaterials(),i.listTextures(),i.listAnimations()];for(let e=0;e<o.length;e++){const t=o[e]||[];for(let n=0;n<t.length;n++){const r=t[n];if(r.extensions&&r.extensions[Wt]){const t=r.extensions[Wt];a[e][n].setExtension(Wt,s[t.packet])}}}return this}write(e){const{json:t}=e.jsonDoc,n=[];for(const i of this.properties){n.push(i.toJSONLD());for(const s of i.listParents()){let i;switch(s.propertyType){case r.PropertyType.ROOT:i=t.asset;break;case r.PropertyType.SCENE:i=t.scenes[e.sceneIndexMap.get(s)];break;case r.PropertyType.NODE:i=t.nodes[e.nodeIndexMap.get(s)];break;case r.PropertyType.MESH:i=t.meshes[e.meshIndexMap.get(s)];break;case r.PropertyType.MATERIAL:i=t.materials[e.materialIndexMap.get(s)];break;case r.PropertyType.TEXTURE:i=t.images[e.imageIndexMap.get(s)];break;case r.PropertyType.ANIMATION:i=t.animations[e.animationIndexMap.get(s)];break;default:i=null,this.document.getLogger().warn(`[${Wt}]: Unsupported parent property, "${s.propertyType}"`)}i&&(i.extensions=i.extensions||{},i.extensions[Wt]={packet:n.length-1})}}return n.length>0&&(t.extensions=t.extensions||{},t.extensions[Wt]={packets:n}),this}}qt.EXTENSION_NAME=Wt;const Xt=[fe,ye,Ee,Re,Fe,ze,Ve,We,Je,it,yt,ht,xt,Tt,Rt,Ot,Nt,kt,jt,qt],Kt=[C,V,W,Y,...Xt];t.ALL_EXTENSIONS=Kt,t.Anisotropy=xe,t.Clearcoat=Ce,t.DiffuseTransmission=Le,t.Dispersion=Ue,t.EXTMeshGPUInstancing=C,t.EXTMeshoptCompression=V,t.EXTTextureAVIF=W,t.EXTTextureWebP=Y,t.EmissiveStrength=Ge,t.INSTANCE_ATTRIBUTE=T,t.IOR=Qe,t.InstancedMesh=S,t.Iridescence=Ke,t.KHRDracoMeshCompression=fe,t.KHRLightsPunctual=ye,t.KHRMaterialsAnisotropy=Ee,t.KHRMaterialsClearcoat=Re,t.KHRMaterialsDiffuseTransmission=Fe,t.KHRMaterialsDispersion=ze,t.KHRMaterialsEmissiveStrength=Ve,t.KHRMaterialsIOR=We,t.KHRMaterialsIridescence=Je,t.KHRMaterialsPBRSpecularGlossiness=it,t.KHRMaterialsSheen=ht,t.KHRMaterialsSpecular=yt,t.KHRMaterialsTransmission=xt,t.KHRMaterialsUnlit=Tt,t.KHRMaterialsVariants=Rt,t.KHRMaterialsVolume=Ot,t.KHRMeshQuantization=Nt,t.KHRONOS_EXTENSIONS=Xt,t.KHRTextureBasisu=kt,t.KHRTextureTransform=jt,t.KHRXMP=qt,t.Light=ge,t.Mapping=St,t.MappingList=Mt,t.PBRSpecularGlossiness=nt,t.Packet=Qt,t.Sheen=lt,t.Specular=gt,t.Transform=zt,t.Transmission=vt,t.Unlit=wt,t.Variant=Ct,t.Volume=Pt},6789:(e,t,n)=>{var r=n(394),i=n(3643),s=n(5999),o=n(6866),a=n(8655),c=n(2584);function l(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var u=l(a);const h=function(e,t,n){try{if(!e)return Promise.resolve(null);const r=e.getImage();return r?Promise.resolve(i.getPixels(r,e.getMimeType())).then((function(e){for(let t=0;t<e.shape[0];++t)for(let r=0;r<e.shape[1];++r)n(e,t,r);return Promise.resolve(i.savePixels(e,"image/png")).then((function(e){return t.setImage(e).setMimeType("image/png")}))})):Promise.resolve(null)}catch(e){return Promise.reject(e)}},{POINTS:d,LINES:p,LINE_STRIP:f,LINE_LOOP:m,TRIANGLES:g,TRIANGLE_STRIP:A,TRIANGLE_FAN:y}=r.Primitive.Mode;function _(e,t){return Object.defineProperty(t,"name",{value:e}),t}function v(e,t){const n={...e};for(const e in t)void 0!==t[e]&&(n[e]=t[e]);return n}function b(e){const t=e.getIndices(),n=e.getAttribute("POSITION");switch(e.getMode()){case r.Primitive.Mode.POINTS:return t?t.getCount():n.getCount();case r.Primitive.Mode.LINES:return t?t.getCount()/2:n.getCount()/2;case r.Primitive.Mode.LINE_LOOP:return t?t.getCount():n.getCount();case r.Primitive.Mode.LINE_STRIP:return t?t.getCount()-1:n.getCount()-1;case r.Primitive.Mode.TRIANGLES:return t?t.getCount()/3:n.getCount()/3;case r.Primitive.Mode.TRIANGLE_STRIP:case r.Primitive.Mode.TRIANGLE_FAN:return t?t.getCount()-2:n.getCount()-2;default:throw new Error("Unexpected mode: "+e.getMode())}}class x{constructor(){this._map=new Map}get size(){return this._map.size}has(e){return this._map.has(e)}add(e,t){let n=this._map.get(e);return n||(n=new Set,this._map.set(e,n)),n.add(t),this}get(e){return this._map.get(e)||new Set}keys(){return this._map.keys()}}function w(e,t=2){if(0===e)return"0 Bytes";const n=t<0?0:t,r=Math.floor(Math.log(e)/Math.log(1e3));return parseFloat((e/Math.pow(1e3,r)).toFixed(n))+" "+["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][r]}const E=new Intl.NumberFormat(void 0,{maximumFractionDigits:0});function T(e){return E.format(e)}function S(e,t){return`${T(e)} → ${T(t)} (${function(e,t,n=2){return(e>t?"–":"+")+(Math.abs(e-t)/e*100).toFixed(n)+"%"}(e,t)})`}function M(e){const t=[];for(const n of e.listAttributes())t.push(n);for(const n of e.listTargets())for(const e of n.listAttributes())t.push(e);return Array.from(new Set(t))}function C(e,t,n){e.swap(t,n);for(const r of e.listTargets())r.swap(t,n)}function I(e,t){if(null==e&&null==t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function R(e,t){return e.createAccessor(t.getName()).setArray(t.getArray()).setType(t.getType()).setBuffer(t.getBuffer()).setNormalized(t.getNormalized()).setSparse(t.getSparse())}function B(e,t=e){const n=P(e,t);for(let e=0;e<n.length;e++)n[e]=e;return n}function P(e,t=e){return t<=65534?new Uint16Array(e):new Uint32Array(e)}function D(e){return e.listParents().some((e=>e.propertyType!==r.PropertyType.ROOT))}function O(e){for(const t in e)return!1;return!0}function L(e){const t=r.Document.fromGraph(e.getGraph()),n=e.getMaterial();return`${t.getRoot().listMaterials().indexOf(n)}|${j[e.getMode()]}|${!!e.getIndices()}|${e.listSemantics().sort().map((t=>{const n=e.getAttribute(t);return`${t}:${n.getElementSize()}:${n.getComponentType()}`})).join("+")}|${e.listTargets().map((t=>t.listSemantics().sort().map((t=>{const n=e.getAttribute(t);return`${t}:${n.getElementSize()}:${n.getComponentType()}`})).join("+"))).join("~")}`}function N(e,t){const[n,r]=t,[i,s]=e;if(i<=n&&s<=r)return e;let o=i,a=s;return o>n&&(a=Math.floor(a*(n/o)),o=n),a>r&&(o=Math.floor(o*(r/a)),a=r),[o,a]}function F(e,t){if(U(e[0])&&U(e[1]))return e;switch(t){case"nearest-pot":return e.map(k);case"ceil-pot":return e.map(G);case"floor-pot":return e.map(z)}}function U(e){return e<=2||!(e&e-1)&&0!==e}function k(e){if(e<=4)return 4;const t=z(e),n=G(e);return n-e>e-t?t:n}function z(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))}function G(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}const j={[d]:d,[p]:p,[f]:p,[m]:p,[g]:g,[A]:g,[y]:g},V="center",Q={pivot:"center"};function H(e){const t=new Set;let n,i=e;for(;n=i.getParentNode();){if(t.has(n))throw new Error("Circular dependency in scene graph.");t.add(n),i=n}return i.listParents().filter((e=>e instanceof r.Scene))}function W(e){const t=H(e),n=e.getParentNode();if(!n)return e;e.setMatrix(e.getWorldMatrix()),n.removeChild(e);for(const n of t)n.addChild(e);return e}var q="undefined"!=typeof Float32Array?Float32Array:Array;function X(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],c=t[6],l=t[7],u=t[8],h=t[9],d=t[10],p=t[11],f=t[12],m=t[13],g=t[14],A=t[15],y=n*a-r*o,_=n*c-i*o,v=n*l-s*o,b=r*c-i*a,x=r*l-s*a,w=i*l-s*c,E=u*m-h*f,T=u*g-d*f,S=u*A-p*f,M=h*g-d*m,C=h*A-p*m,I=d*A-p*g,R=y*I-_*C+v*M+b*S-x*T+w*E;return R?(R=1/R,e[0]=(a*I-c*C+l*M)*R,e[1]=(i*C-r*I-s*M)*R,e[2]=(m*w-g*x+A*b)*R,e[3]=(d*x-h*w-p*b)*R,e[4]=(c*S-o*I-l*T)*R,e[5]=(n*I-i*S+s*T)*R,e[6]=(g*v-f*w-A*_)*R,e[7]=(u*w-d*v+p*_)*R,e[8]=(o*C-a*S+l*E)*R,e[9]=(r*S-n*C-s*E)*R,e[10]=(f*x-m*v+A*y)*R,e[11]=(h*v-u*x-p*y)*R,e[12]=(a*T-o*M-c*E)*R,e[13]=(n*M-r*T+i*E)*R,e[14]=(m*_-f*b-g*y)*R,e[15]=(u*b-h*_+d*y)*R,e):null}function K(e,t,n){var r=t[0],i=t[1],s=t[2],o=t[3],a=t[4],c=t[5],l=t[6],u=t[7],h=t[8],d=t[9],p=t[10],f=t[11],m=t[12],g=t[13],A=t[14],y=t[15],_=n[0],v=n[1],b=n[2],x=n[3];return e[0]=_*r+v*a+b*h+x*m,e[1]=_*i+v*c+b*d+x*g,e[2]=_*s+v*l+b*p+x*A,e[3]=_*o+v*u+b*f+x*y,_=n[4],v=n[5],b=n[6],x=n[7],e[4]=_*r+v*a+b*h+x*m,e[5]=_*i+v*c+b*d+x*g,e[6]=_*s+v*l+b*p+x*A,e[7]=_*o+v*u+b*f+x*y,_=n[8],v=n[9],b=n[10],x=n[11],e[8]=_*r+v*a+b*h+x*m,e[9]=_*i+v*c+b*d+x*g,e[10]=_*s+v*l+b*p+x*A,e[11]=_*o+v*u+b*f+x*y,_=n[12],v=n[13],b=n[14],x=n[15],e[12]=_*r+v*a+b*h+x*m,e[13]=_*i+v*c+b*d+x*g,e[14]=_*s+v*l+b*p+x*A,e[15]=_*o+v*u+b*f+x*y,e}function Y(){var e=new q(3);return q!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0),e}function J(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e[2]=Math.min(t[2],n[2]),e}function $(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e[2]=Math.max(t[2],n[2]),e}function Z(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e}function ee(e,t){var n=t[0],r=t[1],i=t[2],s=n*n+r*r+i*i;return s>0&&(s=1/Math.sqrt(s)),e[0]=t[0]*s,e[1]=t[1]*s,e[2]=t[2]*s,e}function te(e,t,n){var r=t[0],i=t[1],s=t[2],o=n[3]*r+n[7]*i+n[11]*s+n[15];return o=o||1,e[0]=(n[0]*r+n[4]*i+n[8]*s+n[12])/o,e[1]=(n[1]*r+n[5]*i+n[9]*s+n[13])/o,e[2]=(n[2]*r+n[6]*i+n[10]*s+n[14])/o,e}function ne(e,t,n){var r=t[0],i=t[1],s=t[2];return e[0]=r*n[0]+i*n[3]+s*n[6],e[1]=r*n[1]+i*n[4]+s*n[7],e[2]=r*n[2]+i*n[5]+s*n[8],e}Math.hypot||(Math.hypot=function(){for(var e=0,t=arguments.length;t--;)e+=arguments[t]*arguments[t];return Math.sqrt(e)});var re=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e};Y();const ie="dedup",se={keepUniqueNames:!1,propertyTypes:[r.PropertyType.ACCESSOR,r.PropertyType.MESH,r.PropertyType.TEXTURE,r.PropertyType.MATERIAL,r.PropertyType.SKIN]};function oe(e=se){const t=v(se,e),n=new Set(t.propertyTypes);for(const e of t.propertyTypes)if(!se.propertyTypes.includes(e))throw new Error(`${ie}: Unsupported deduplication on type "${e}".`);return _(ie,(e=>{const i=e.getLogger();n.has(r.PropertyType.ACCESSOR)&&function(e){const t=e.getLogger(),n=new Map,i=new Map,s=new Map,o=new Map,a=e.getRoot().listMeshes();a.forEach((e=>{e.listPrimitives().forEach((e=>{e.listAttributes().forEach((e=>c(e,i))),c(e.getIndices(),n)}))}));for(const t of e.getRoot().listAnimations())for(const e of t.listSamplers())c(e.getInput(),s),c(e.getOutput(),o);function c(e,t){if(!e)return;const n=[e.getCount(),e.getType(),e.getComponentType(),e.getNormalized(),e.getSparse()].join(":");let r=t.get(n);r||t.set(n,r=new Set),r.add(e)}function l(e,t){for(let n=0;n<e.length;n++){const i=e[n],s=r.BufferUtils.toView(i.getArray());if(!t.has(i))for(let o=n+1;o<e.length;o++){const n=e[o];t.has(n)||r.BufferUtils.equals(s,r.BufferUtils.toView(n.getArray()))&&t.set(n,i)}}}let u=0;const h=new Map;for(const e of[i,n,s,o])for(const t of e.values())u+=t.size,l(Array.from(t),h);t.debug(`${ie}: Merged ${h.size} of ${u} accessors.`),a.forEach((e=>{e.listPrimitives().forEach((e=>{e.listAttributes().forEach((t=>{h.has(t)&&e.swap(t,h.get(t))}));const t=e.getIndices();t&&h.has(t)&&e.swap(t,h.get(t))}))}));for(const t of e.getRoot().listAnimations())for(const e of t.listSamplers()){const t=e.getInput(),n=e.getOutput();t&&h.has(t)&&e.swap(t,h.get(t)),n&&h.has(n)&&e.swap(n,h.get(n))}Array.from(h.keys()).forEach((e=>e.dispose()))}(e),n.has(r.PropertyType.TEXTURE)&&function(e,t){const n=e.getLogger(),i=e.getRoot(),s=i.listTextures(),o=new Map;for(let e=0;e<s.length;e++){const n=s[e],i=n.getImage();if(!o.has(n))for(let a=e+1;a<s.length;a++){const e=s[a],c=e.getImage();if(o.has(e))continue;if(n.getMimeType()!==e.getMimeType())continue;if(t.keepUniqueNames&&n.getName()!==e.getName())continue;const l=n.getSize(),u=e.getSize();l&&u&&(l[0]===u[0]&&l[1]===u[1]&&i&&c&&r.BufferUtils.equals(i,c)&&o.set(e,n))}}n.debug(`${ie}: Merged ${o.size} of ${i.listTextures().length} textures.`),Array.from(o.entries()).forEach((([e,t])=>{e.listParents().forEach((n=>{n instanceof r.Root||n.swap(e,t)})),e.dispose()}))}(e,t),n.has(r.PropertyType.MATERIAL)&&function(e,t){const n=e.getLogger(),i=e.getRoot(),s=i.listMaterials(),o=new Map,a=new Map,c=new Set;t.keepUniqueNames||c.add("name");for(let e=0;e<s.length;e++){const t=s[e];if(!o.has(t)&&!ce(t,a))for(let n=e+1;n<s.length;n++){const e=s[n];o.has(e)||(ce(e,a)||t.equals(e,c)&&o.set(e,t))}}n.debug(`${ie}: Merged ${o.size} of ${s.length} materials.`),Array.from(o.entries()).forEach((([e,t])=>{e.listParents().forEach((n=>{n instanceof r.Root||n.swap(e,t)})),e.dispose()}))}(e,t),n.has(r.PropertyType.MESH)&&function(e,t){const n=e.getLogger(),i=e.getRoot(),s=new Map;i.listAccessors().forEach(((e,t)=>s.set(e,t))),i.listMaterials().forEach(((e,t)=>s.set(e,t)));const o=i.listMeshes().length,a=new Map;for(const e of i.listMeshes()){const n=[];for(const t of e.listPrimitives())n.push(ae(t,s));let i="";if(t.keepUniqueNames&&(i+=e.getName()+";"),i+=n.join(";"),a.has(i)){const t=a.get(i);e.listParents().forEach((n=>{n.propertyType!==r.PropertyType.ROOT&&n.swap(e,t)})),e.dispose()}else a.set(i,e)}n.debug(`${ie}: Merged ${o-a.size} of ${o} meshes.`)}(e,t),n.has(r.PropertyType.SKIN)&&function(e,t){const n=e.getLogger(),i=e.getRoot(),s=i.listSkins(),o=new Map,a=new Set(["joints"]);t.keepUniqueNames||a.add("name");for(let e=0;e<s.length;e++){const t=s[e];if(!o.has(t))for(let n=e+1;n<s.length;n++){const e=s[n];o.has(e)||t.equals(e,a)&&I(t.listJoints(),e.listJoints())&&o.set(e,t)}}n.debug(`${ie}: Merged ${o.size} of ${s.length} skins.`),Array.from(o.entries()).forEach((([e,t])=>{e.listParents().forEach((n=>{n instanceof r.Root||n.swap(e,t)})),e.dispose()}))}(e,t),i.debug(`${ie}: Complete.`)}))}function ae(e,t){const n=[];for(const r of e.listSemantics()){const i=e.getAttribute(r);n.push(r+":"+t.get(i))}if(e instanceof r.Primitive){const r=e.getIndices();r&&n.push("indices:"+t.get(r));const i=e.getMaterial();i&&n.push("material:"+t.get(i)),n.push("mode:"+e.getMode());for(const r of e.listTargets())n.push("target:"+ae(r,t))}return n.join(",")}function ce(e,t){if(t.has(e))return t.get(e);const n=e.getGraph(),r=new Set,i=n.listParentEdges(e);for(;i.length>0;){const s=i.pop();if(!0===s.getAttributes().modifyChild)return t.set(e,!0),!0;const o=s.getChild();if(!r.has(o))for(const e of n.listChildEdges(o))i.push(e)}return t.set(e,!1),!1}function le(){var e=new q(4);return q!=Float32Array&&(e[0]=0,e[1]=0,e[2]=0,e[3]=0),e}var ue=function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e[2]=t[2]-n[2],e[3]=t[3]-n[3],e},he=function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e[2]=t[2]*n[2],e[3]=t[3]*n[3],e},de=function(e){var t=e[0],n=e[1],r=e[2],i=e[3];return Math.hypot(t,n,r,i)};!function(){var e=le()}();const pe=/color|emissive|diffuse/i;function fe(e){return e.getGraph().listParentEdges(e).some((e=>e.getAttributes().isColor||pe.test(e.getName())))?"srgb":null}function me(e){const t=e.getGraph(),n=new Set,i=new Set;return function e(s){const o=new Set;for(const e of t.listChildEdges(s))e.getChild()instanceof r.Texture&&o.add(e.getName()+"Info");for(const a of t.listChildEdges(s)){const t=a.getChild();n.has(t)||(n.add(t),t instanceof r.TextureInfo&&o.has(a.getName())?i.add(t):t instanceof r.ExtensionProperty&&e(t))}}(e),Array.from(i)}function ge(e){const t=r.Document.fromGraph(e.getGraph()).getRoot(),n=e.getGraph().listParentEdges(e).filter((e=>e.getParent()!==t)).map((e=>e.getName()));return Array.from(new Set(n))}const Ae=function(e){return Promise.resolve(function(e){return Promise.resolve(function(e,t){try{var n=e()}catch(e){return t(e)}return n&&n.then?n.then(void 0,t):n}((function(){return Promise.resolve(i.getPixels(e.getImage(),e.getMimeType()))}),(function(){return null})))}(e)).then((function(e){if(!e)return null;const t=[1/0,1/0,1/0,1/0],n=[-1/0,-1/0,-1/0,-1/0],r=[0,0,0,0],[i,s]=e.shape;for(let o=0;o<i;o++){for(let r=0;r<s;r++)for(let i=0;i<4;i++)t[i]=Math.min(t[i],e.get(o,r,i)),n[i]=Math.max(n[i],e.get(o,r,i));if(de(ue(r,n,t))/255>_e)return null}return function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e}(r,(c=t,(o=r)[0]=(a=n)[0]+c[0],o[1]=a[1]+c[1],o[2]=a[2]+c[2],o[3]=a[3]+c[3],o),.5/255);var o,a,c}))},ye="prune",_e=3/255,ve={propertyTypes:[r.PropertyType.NODE,r.PropertyType.SKIN,r.PropertyType.MESH,r.PropertyType.CAMERA,r.PropertyType.PRIMITIVE,r.PropertyType.PRIMITIVE_TARGET,r.PropertyType.ANIMATION,r.PropertyType.MATERIAL,r.PropertyType.TEXTURE,r.PropertyType.ACCESSOR,r.PropertyType.BUFFER],keepLeaves:!1,keepAttributes:!1,keepIndices:!1,keepSolidTextures:!1,keepExtras:!1};function be(e=ve){const t=v(ve,e),n=new Set(t.propertyTypes),i=t.keepExtras;return _(ye,(function(e){try{function s(){if(n.has(r.PropertyType.ACCESSOR)&&a.listAccessors().forEach((e=>we(e,i))),n.has(r.PropertyType.BUFFER)&&a.listBuffers().forEach((e=>we(e,i))),c.removeEventListener("node:dispose",u),l.empty())o.debug(`${ye}: No unused properties found.`);else{const e=l.entries().map((([e,t])=>`${e} (${t})`)).join(", ");o.info(`${ye}: Removed types... ${e}`)}o.debug(`${ye}: Complete.`)}const o=e.getLogger(),a=e.getRoot(),c=e.getGraph(),l=new xe,u=e=>l.dispose(e.target);if(c.addEventListener("node:dispose",u),n.has(r.PropertyType.MESH))for(const d of a.listMeshes())d.listPrimitives().length>0||d.dispose();if(n.has(r.PropertyType.NODE)){if(!t.keepLeaves)for(const p of a.listScenes())Te(c,p,i);for(const f of a.listNodes())we(f,i)}if(n.has(r.PropertyType.SKIN))for(const m of a.listSkins())we(m,i);if(n.has(r.PropertyType.MESH))for(const g of a.listMeshes())we(g,i);if(n.has(r.PropertyType.CAMERA))for(const A of a.listCameras())we(A,i);if(n.has(r.PropertyType.PRIMITIVE)&&Ee(c,r.PropertyType.PRIMITIVE,i),n.has(r.PropertyType.PRIMITIVE_TARGET)&&Ee(c,r.PropertyType.PRIMITIVE_TARGET,i),!t.keepAttributes&&n.has(r.PropertyType.ACCESSOR)){const y=new Map;for(const _ of a.listMeshes())for(const v of _.listPrimitives()){const b=v.getMaterial();if(!b)continue;const x=Ce(v,Ie(e,v,b));Se(v,x),v.listTargets().forEach((e=>Se(e,x))),y.has(b)?y.get(b).add(v):y.set(b,new Set([v]))}for(const[w,E]of y)Re(w,Array.from(E))}if(!t.keepIndices&&n.has(r.PropertyType.ACCESSOR))for(const T of a.listMeshes())for(const S of T.listPrimitives())Me(S);if(n.has(r.PropertyType.ANIMATION))for(const M of a.listAnimations()){for(const C of M.listChannels())C.getTargetNode()||C.dispose();if(M.listChannels().length)M.listSamplers().forEach((e=>we(e,i)));else{const I=M.listSamplers();we(M,i),I.forEach((e=>we(e,i)))}}n.has(r.PropertyType.MATERIAL)&&a.listMaterials().forEach((e=>we(e,i)));const h=function(){if(n.has(r.PropertyType.TEXTURE)){a.listTextures().forEach((e=>we(e,i)));const n=function(){if(!t.keepSolidTextures)return Promise.resolve(function(e){try{const t=e.getRoot(),n=e.getGraph(),i=e.getLogger(),s=t.listTextures().map((function(e){return Promise.resolve(Ae(e)).then((function(s){var o;if(!s)return;"srgb"===fe(e)&&r.ColorUtils.convertSRGBToLinear(s,s);const a=e.getName()||e.getURI(),c=null==(o=e.getSize())?void 0:o.join("x"),l=ge(e);for(const r of n.listParentEdges(e)){const e=r.getParent();e!==t&&Be(e,s,r.getName(),i)&&r.dispose()}1===e.listParents().length&&(e.dispose(),i.debug(`${ye}: Removed solid-color texture "${a}" (${c}px ${l.join(", ")})`))}))}));return Promise.resolve(Promise.all(s)).then((function(){}))}catch(e){return Promise.reject(e)}}(e)).then((function(){}))}();if(n&&n.then)return n.then((function(){}))}}();return Promise.resolve(h&&h.then?h.then(s):s())}catch(R){return Promise.reject(R)}}))}class xe{constructor(){this.disposed={}}empty(){for(const e in this.disposed)return!1;return!0}entries(){return Object.entries(this.disposed)}dispose(e){this.disposed[e.propertyType]=this.disposed[e.propertyType]||0,this.disposed[e.propertyType]++}}function we(e,t){const n=e.listParents().filter((e=>!(e instanceof r.Root||e instanceof r.AnimationChannel))),i=t&&!O(e.getExtras());n.length||i||e.dispose()}function Ee(e,t,n){for(const r of e.listEdges()){const e=r.getParent();e.propertyType===t&&we(e,n)}}function Te(e,t,n){if(t.listChildren().forEach((t=>Te(e,t,n))),t instanceof r.Scene)return;const i=e.listParentEdges(t).some((e=>{const t=e.getParent().propertyType;return t!==r.PropertyType.ROOT&&t!==r.PropertyType.SCENE&&t!==r.PropertyType.NODE})),s=0===e.listChildren(t).length,o=n&&!O(t.getExtras());!s||i||o||t.dispose()}function Se(e,t){for(const n of t)e.setAttribute(n,null)}function Me(e){const t=e.getIndices(),n=t&&t.getArray(),r=e.listAttributes()[0];if(n&&r&&t.getCount()===r.getCount()){for(let e=0,t=n.length;e<t;e++)if(e!==n[e])return;e.setIndices(null)}}function Ce(e,t){const n=[];for(const r of e.listSemantics())("NORMAL"!==r||t.has(r))&&("TANGENT"!==r||t.has(r))?(r.startsWith("TEXCOORD_")&&!t.has(r)||r.startsWith("COLOR_")&&"COLOR_0"!==r)&&n.push(r):n.push(r);return n}function Ie(e,t,n,i=new Set){const s=e.getGraph().listChildEdges(n),o=new Set;for(const e of s)e.getChild()instanceof r.Texture&&o.add(e.getName());for(const n of s){const s=n.getName(),a=n.getChild();a instanceof r.TextureInfo&&o.has(s.replace(/Info$/,""))&&i.add(`TEXCOORD_${a.getTexCoord()}`),a instanceof r.Texture&&s.match(/normalTexture/i)&&i.add("TANGENT"),a instanceof r.ExtensionProperty&&Ie(e,t,a,i)}const a=n instanceof r.Material&&!n.getExtension("KHR_materials_unlit"),c=t.getMode()===r.Primitive.Mode.POINTS;return a&&!c&&i.add("NORMAL"),i}function Re(e,t){const n=me(e),r=new Set(n.map((e=>e.getTexCoord()))),i=Array.from(r).sort(),s=new Map(i.map(((e,t)=>[e,t]))),o=new Map(i.map(((e,t)=>[`TEXCOORD_${e}`,`TEXCOORD_${t}`])));for(const e of n){const t=e.getTexCoord();e.setTexCoord(s.get(t))}for(const e of t){const t=e.listSemantics().filter((e=>e.startsWith("TEXCOORD_"))).sort();a(e,t),e.listTargets().forEach((e=>a(e,t)))}function a(e,t){for(const n of t){const t=e.getAttribute(n);if(!t)continue;const r=o.get(n);r!==n&&(e.setAttribute(r,t),e.setAttribute(n,null))}}}function Be(e,t,n,i){if(e instanceof r.Material)switch(n){case"baseColorTexture":return e.setBaseColorFactor(he(t,t,e.getBaseColorFactor())),!0;case"emissiveTexture":return e.setEmissiveFactor(re([0,0,0],t.slice(0,3),e.getEmissiveFactor())),!0;case"occlusionTexture":return Math.abs(t[0]-1)<=_e;case"metallicRoughnessTexture":return e.setRoughnessFactor(t[1]*e.getRoughnessFactor()),e.setMetallicFactor(t[2]*e.getMetallicFactor()),!0;case"normalTexture":return de(ue(le(),t,[.5,.5,1,1]))<=_e}return i.warn(`${ye}: Detected single-color ${n} texture. Pruning ${n} not yet supported.`),!1}const Pe=2**32-1;class De{constructor(e){this.attributes=[],this.u8=void 0,this.u32=void 0;let t=0;for(const n of M(e))t+=this._initAttribute(n);this.u8=new Uint8Array(t),this.u32=new Uint32Array(this.u8.buffer)}_initAttribute(e){const t=e.getArray(),n=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i=e.getElementSize()*e.getComponentSize(),s=r.BufferUtils.padNumber(i);return this.attributes.push({u8:n,byteStride:i,paddedByteStride:s}),s}hash(e){let t=0;for(const{u8:n,byteStride:r,paddedByteStride:i}of this.attributes){for(let s=0;s<i;s++)this.u8[t+s]=s<r?n[e*r+s]:0;t+=i}return function(e,t){const n=1540483477,r=24;for(let i=0,s=t.length;i<s;i++){let s=t[i];s=Math.imul(s,n)>>>0,s=(s^s>>r)>>>0,s=Math.imul(s,n)>>>0,e=((e=Math.imul(e,n)>>>0)^s)>>>0}return e}(0,this.u32)}equal(e,t){for(const{u8:n,byteStride:r}of this.attributes)for(let i=0;i<r;i++)if(n[e*r+i]!==n[t*r+i])return!1;return!0}}function Oe(e,t,n,r,i=4294967295){const s=t-1;let o=n.hash(r)&s;for(let t=0;t<=s;t++){const a=e[o];if(a===i||n.equal(a,r))return o;o=o+t+1&s}throw new Error("Hash table full.")}var Le;function Ne(e,t){return Fe(e,t)}function Fe(e,n){const r=[],i=[],s=[];e.traverse((e=>{const t=e.getMesh(),n=e.getExtension("EXT_mesh_gpu_instancing");n&&t?(s.push(t),r.push([n.listAttributes()[0].getCount(),t])):t&&(s.push(t),i.push(t))}));const o=s.flatMap((e=>e.listPrimitives())).map((e=>e.getAttribute("POSITION"))),a=Array.from(new Set(o)),c=Array.from(new Set(s)),l=Array.from(new Set(c.flatMap((e=>e.listPrimitives()))));switch(n){case t.VertexCountMethod.RENDER:case t.VertexCountMethod.RENDER_CACHED:return ze(i.map((e=>Ue(e,n))))+ze(r.map((([e,t])=>e*Ue(t,n))));case t.VertexCountMethod.UPLOAD_NAIVE:return ze(c.map((e=>Ue(e,n))));case t.VertexCountMethod.UPLOAD:return ze(a.map((e=>e.getCount())));case t.VertexCountMethod.DISTINCT:case t.VertexCountMethod.DISTINCT_POSITION:return je(n);case t.VertexCountMethod.UNUSED:return Ge(l);default:return Ve(n)}}function Ue(e,n){const r=e.listPrimitives(),i=Array.from(new Set(r)),s=Array.from(new Set(i.map((e=>e.getAttribute("POSITION")))));switch(n){case t.VertexCountMethod.RENDER:case t.VertexCountMethod.RENDER_CACHED:case t.VertexCountMethod.UPLOAD_NAIVE:return ze(r.map((e=>ke(e,n))));case t.VertexCountMethod.UPLOAD:return ze(s.map((e=>e.getCount())));case t.VertexCountMethod.DISTINCT:case t.VertexCountMethod.DISTINCT_POSITION:return je(n);case t.VertexCountMethod.UNUSED:return Ge(i);default:return Ve(n)}}function ke(e,n){const r=e.getAttribute("POSITION"),i=e.getIndices();switch(n){case t.VertexCountMethod.RENDER:return i?i.getCount():r.getCount();case t.VertexCountMethod.RENDER_CACHED:return i?new Set(i.getArray()).size:r.getCount();case t.VertexCountMethod.UPLOAD_NAIVE:case t.VertexCountMethod.UPLOAD:return r.getCount();case t.VertexCountMethod.DISTINCT:case t.VertexCountMethod.DISTINCT_POSITION:return je(n);case t.VertexCountMethod.UNUSED:return i?r.getCount()-new Set(i.getArray()).size:0;default:return Ve(n)}}function ze(e){let t=0;for(let n=0;n<e.length;n++)t+=e[n];return t}function Ge(e){const t=new Map;for(const n of e){const e=n.getAttribute("POSITION"),r=n.getIndices(),i=t.get(e)||new Set;i.add(r),t.set(e,i)}let n=0;for(const[e,r]of t){if(r.has(null))continue;const t=new Uint8Array(e.getCount());for(const e of r){const n=e.getArray();for(let e=0,r=n.length;e<r;e++)t[n[e]]=1}for(let r=0,i=e.getCount();r<i;r++)0===t[r]&&n++}return n}function je(e){throw new Error(`Not implemented: ${e}`)}function Ve(e){throw new Error(`Unexpected value: ${e}`)}function Qe(e,n,i){const s=r.Document.fromGraph(e.getGraph());n&&i||([n,i]=function(e){const n=ke(e,t.VertexCountMethod.UPLOAD),r=e.getIndices(),i=r?r.getArray():null;if(!r||!i)return[B(n,1e6),n];const s=new Uint32Array(n).fill(Pe);let o=0;for(let e=0;e<i.length;e++){const t=i[e];s[t]===Pe&&(s[t]=o++)}return[s,o]}(e));const o=e.getIndices(),a=o?o.getArray():null,c=ke(e,t.VertexCountMethod.RENDER),l=s.createAccessor(),u=c,h=P(u,i);for(let e=0;e<u;e++)h[e]=n[a?a[e]:e];e.setIndices(l.setArray(h));const d=M(e);for(const t of e.listAttributes()){const r=R(s,t);He(t,o,n,r,i),e.swap(t,r)}for(const t of e.listTargets())for(const e of t.listAttributes()){const r=R(s,e);He(e,o,n,r,i),t.swap(e,r)}o&&1===o.listParents().length&&o.dispose();for(const e of d)1===e.listParents().length&&e.dispose();return e}function He(e,t,n,r,i){const s=e.getElementSize(),o=e.getArray(),a=t?t.getArray():null,c=t?t.getCount():e.getCount(),l=new o.constructor(i*s),u=new Uint8Array(i);for(let e=0;e<c;e++){const t=a?a[e]:e,r=n[t];if(!u[r]){for(let e=0;e<s;e++)l[r*s+e]=o[t*s+e];u[r]=1}}return r.setArray(l)}t.VertexCountMethod=void 0,(Le=t.VertexCountMethod||(t.VertexCountMethod={})).RENDER="render",Le.RENDER_CACHED="render-cached",Le.UPLOAD="upload",Le.UPLOAD_NAIVE="upload-naive",Le.DISTINCT="distinct",Le.DISTINCT_POSITION="distinct-position",Le.UNUSED="unused";const We="weld",qe={overwrite:!0,cleanup:!0};function Xe(e=qe){const n=v(qe,e);return _(We,(function(e){try{function i(){s.debug(`${We}: Complete.`)}const s=e.getLogger();for(const a of e.getRoot().listMeshes()){for(const c of a.listPrimitives())Ke(c,n),0===ke(c,t.VertexCountMethod.RENDER)&&c.dispose();0===a.listPrimitives().length&&a.dispose()}const o=function(){if(n.cleanup)return Promise.resolve(e.transform(be({propertyTypes:[r.PropertyType.ACCESSOR,r.PropertyType.NODE],keepAttributes:!0,keepIndices:!0,keepLeaves:!1}),oe({propertyTypes:[r.PropertyType.ACCESSOR]}))).then((function(){}))}();return Promise.resolve(o&&o.then?o.then(i):i())}catch(l){return Promise.reject(l)}}))}function Ke(e,t=qe){const n=e.getGraph(),i=r.Document.fromGraph(n).getLogger(),s={...qe,...t};if(e.getIndices()&&!s.overwrite)return;if(e.getMode()===r.Primitive.Mode.POINTS)return;const o=e.getAttribute("POSITION").getCount(),a=e.getIndices(),c=null==a?void 0:a.getArray(),l=a?a.getCount():o,u=new De(e),h=G(o+o/4),d=new Uint32Array(h).fill(Pe),p=new Uint32Array(o).fill(Pe);let f=0;for(let e=0;e<l;e++){const t=c?c[e]:e;if(p[t]!==Pe)continue;const n=Oe(d,h,u,t,Pe),r=d[n];r===Pe?(d[n]=t,p[t]=f++):p[t]=p[r]}i.debug(`${We}: ${S(o,f)} vertices.`),Qe(e,p,f)}const{FLOAT:Ye}=r.Accessor.ComponentType;function Je(e,t){const n=e.getAttribute("POSITION");n&&$e(t,n);const i=e.getAttribute("NORMAL");i&&Ze(t,i);const s=e.getAttribute("TANGENT");s&&et(t,s);for(const n of e.listTargets()){const e=n.getAttribute("POSITION");e&&$e(t,e);const r=n.getAttribute("NORMAL");r&&Ze(t,r);const i=n.getAttribute("TANGENT");i&&et(t,i)}var o,a,c,l,u,h,d,p,f,m,g,A,y,_,v,b,x;a=(o=t)[0],c=o[1],l=o[2],u=o[3],h=o[4],d=o[5],p=o[6],f=o[7],m=o[8],g=o[9],A=o[10],y=o[11],_=o[12],v=o[13],b=o[14],x=o[15],(a*d-c*h)*(A*x-y*b)-(a*p-l*h)*(g*x-y*v)+(a*f-u*h)*(g*b-A*v)+(c*p-l*d)*(m*x-y*_)-(c*f-u*d)*(m*b-A*_)+(l*f-u*p)*(m*v-g*_)<0&&function(e){if(e.getMode()!==r.Primitive.Mode.TRIANGLES)return;e.getIndices()||Ke(e);const t=e.getIndices();for(let e=0,n=t.getCount();e<n;e+=3){const n=t.getScalar(e),r=t.getScalar(e+2);t.setScalar(e,r),t.setScalar(e+2,n)}}(e)}function $e(e,t){const n=t.getComponentType(),i=t.getNormalized(),s=t.getArray(),o=n===Ye?s:new Float32Array(s.length),a=Y();for(let c=0,l=t.getCount();c<l;c++)i?(a[0]=r.MathUtils.decodeNormalizedInt(s[3*c],n),a[1]=r.MathUtils.decodeNormalizedInt(s[3*c+1],n),a[2]=r.MathUtils.decodeNormalizedInt(s[3*c+2],n)):(a[0]=s[3*c],a[1]=s[3*c+1],a[2]=s[3*c+2]),te(a,a,e),o[3*c]=a[0],o[3*c+1]=a[1],o[3*c+2]=a[2];t.setArray(o).setNormalized(!1)}function Ze(e,t){const n=t.getArray(),i=t.getNormalized(),s=t.getComponentType(),o=(a=new q(9),q!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a);var a;!function(e,t){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[4],e[4]=t[5],e[5]=t[6],e[6]=t[8],e[7]=t[9],e[8]=t[10]}(o,e),function(e,t){var n=t[0],r=t[1],i=t[2],s=t[3],o=t[4],a=t[5],c=t[6],l=t[7],u=t[8],h=u*o-a*l,d=-u*s+a*c,p=l*s-o*c,f=n*h+r*d+i*p;f&&(f=1/f,e[0]=h*f,e[1]=(-u*r+i*l)*f,e[2]=(a*r-i*o)*f,e[3]=d*f,e[4]=(u*n-i*c)*f,e[5]=(-a*n+i*s)*f,e[6]=p*f,e[7]=(-l*n+r*c)*f,e[8]=(o*n-r*s)*f)}(o,o),function(e,t){if(e===t){var n=t[1],r=t[2],i=t[5];e[1]=t[3],e[2]=t[6],e[3]=n,e[5]=t[7],e[6]=r,e[7]=i}else e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8]}(o,o);const c=Y();for(let e=0,a=t.getCount();e<a;e++)i?(c[0]=r.MathUtils.decodeNormalizedInt(n[3*e],s),c[1]=r.MathUtils.decodeNormalizedInt(n[3*e+1],s),c[2]=r.MathUtils.decodeNormalizedInt(n[3*e+2],s)):(c[0]=n[3*e],c[1]=n[3*e+1],c[2]=n[3*e+2]),ne(c,c,o),ee(c,c),i?(n[3*e]=r.MathUtils.decodeNormalizedInt(c[0],s),n[3*e+1]=r.MathUtils.decodeNormalizedInt(c[1],s),n[3*e+2]=r.MathUtils.decodeNormalizedInt(c[2],s)):(n[3*e]=c[0],n[3*e+1]=c[1],n[3*e+2]=c[2])}function et(e,t){const n=t.getArray(),i=t.getNormalized(),s=t.getComponentType(),o=Y();for(let a=0,c=t.getCount();a<c;a++)i?(o[0]=r.MathUtils.decodeNormalizedInt(n[4*a],s),o[1]=r.MathUtils.decodeNormalizedInt(n[4*a+1],s),o[2]=r.MathUtils.decodeNormalizedInt(n[4*a+2],s)):(o[0]=n[4*a],o[1]=n[4*a+1],o[2]=n[4*a+2]),o[0]=e[0]*o[0]+e[4]*o[1]+e[8]*o[2],o[1]=e[1]*o[0]+e[5]*o[1]+e[9]*o[2],o[2]=e[2]*o[0]+e[6]*o[1]+e[10]*o[2],ee(o,o),i?(n[4*a]=r.MathUtils.decodeNormalizedInt(o[0],s),n[4*a+1]=r.MathUtils.decodeNormalizedInt(o[1],s),n[4*a+2]=r.MathUtils.decodeNormalizedInt(o[2],s)):(n[4*a]=o[0],n[4*a+1]=o[1],n[4*a+2]=o[2])}function tt(e,t){for(const t of e.listPrimitives()){const n=nt(t,e);t!==n&&e.removePrimitive(t).addPrimitive(n)}for(const n of e.listPrimitives())Qe(n),Je(n,t)}function nt(e,t){e.listParents().some((e=>e instanceof r.Mesh&&e!==t))&&(e=e.clone());for(const t of e.listTargets()){t.listParents().some((t=>t instanceof r.Primitive&&t!==e))&&e.removeTarget(t).addTarget(t.clone())}return e}const rt=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];const{LINES:it,LINE_STRIP:st,LINE_LOOP:ot,TRIANGLES:at,TRIANGLE_STRIP:ct,TRIANGLE_FAN:lt}=r.Primitive.Mode;function ut(e){const t=e.getGraph(),n=r.Document.fromGraph(t);e.getIndices()||Ke(e);const i=e.getIndices(),s=i.getArray(),o=b(e),a=new(0,r.ComponentTypeToTypedArray[i.getComponentType()])(2*o),c=e.getMode();if(c===st)for(let e=0;e<o;e++)a[2*e]=s[e],a[2*e+1]=s[e+1];else{if(c!==ot)throw new Error("Only LINE_STRIP and LINE_LOOP may be converted to LINES.");for(let e=0;e<o;e++)e<o-1?(a[2*e]=s[e],a[2*e+1]=s[e+1]):(a[2*e]=s[e],a[2*e+1]=s[0])}e.setMode(it);const l=n.getRoot();i.listParents().some((t=>t!==l&&t!==e))?e.setIndices(R(n,i).setArray(a)):i.setArray(a)}function ht(e){const t=e.getGraph(),n=r.Document.fromGraph(t);e.getIndices()||Ke(e);const i=e.getIndices(),s=i.getArray(),o=b(e),a=new(0,r.ComponentTypeToTypedArray[i.getComponentType()])(3*o),c=e.getMode();if(c===ct)for(let e=0,t=s.length;e<t-2;e++)e%2?(a[3*e]=s[e+1],a[3*e+1]=s[e],a[3*e+2]=s[e+2]):(a[3*e]=s[e],a[3*e+1]=s[e+1],a[3*e+2]=s[e+2]);else{if(c!==lt)throw new Error("Only TRIANGLE_STRIP and TRIANGLE_FAN may be converted to TRIANGLES.");for(let e=0;e<o;e++)a[3*e]=s[0],a[3*e+1]=s[e+1],a[3*e+2]=s[e+2]}e.setMode(at);const l=n.getRoot();i.listParents().some((t=>t!==l&&t!==e))?e.setIndices(R(n,i).setArray(a)):i.setArray(a)}const dt="dequantize",pt={pattern:/^((?!JOINTS_).)*$/};function ft(e,t=pt){const n=v(pt,t);for(const t of e.listSemantics())n.pattern.test(t)&&mt(e.getAttribute(t));for(const t of e.listTargets())for(const e of t.listSemantics())n.pattern.test(e)&&mt(t.getAttribute(e))}function mt(e){const t=e.getArray();if(!t)return;const n=gt(t,e.getComponentType(),e.getNormalized());e.setArray(n).setNormalized(!1)}function gt(e,t,n){const i=new Float32Array(e.length);for(let s=0,o=e.length;s<o;s++)i[s]=n?r.MathUtils.decodeNormalizedInt(e[s],t):e[s];return i}const{TEXTURE_INFO:At,ROOT:yt}=r.PropertyType,_t=new Set([At,yt]);function vt(e,t,n){n||(n=wt(e,t));for(const n of t.getRoot().listExtensionsUsed()){const t=e.createExtension(n.constructor);n.isRequired()&&t.setRequired(!0)}return xt(e,t,function(e){const t=new Set;for(const n of e.getGraph().listEdges())t.add(n.getChild());return Array.from(t)}(t),n)}function bt(e,t,n,r){const i=new Set;for(const e of n){if(_t.has(e.propertyType))throw new Error(`Type "${e.propertyType}" cannot be transferred.`);Et(e,i)}return xt(e,t,Array.from(i),r)}function xt(e,t,n,r){r||(r=wt(e,t));const i=new Map;for(const e of n)i.has(e)||e.propertyType===At||i.set(e,r(e));for(const[e,t]of i.entries())t.copy(e,r);return i}function wt(e,t){const n=new Map([[t.getRoot(),e.getRoot()]]);return t=>{if(t.propertyType===At)return t;let r=n.get(t);if(!r){r=new(0,t.constructor)(e.getGraph()),n.set(t,r)}return r}}function Et(e,t){const n=e.getGraph(),r=[e];let i;for(;i=r.pop();){t.add(i);for(const e of n.listChildren(i))t.has(e)||r.push(e)}return t}const Tt={method:"edgebreaker",encodeSpeed:5,decodeSpeed:5,quantizePosition:14,quantizeNormal:10,quantizeColor:8,quantizeTexcoord:12,quantizeGeneric:12,quantizationVolume:"mesh"};const St="flatten",Mt={cleanup:!0};function Ct(e){return{properties:e.getRoot().listScenes().map((e=>{const n=e.listChildren()[0],i=r.getBounds(e);return{name:e.getName(),rootName:n?n.getName():"",bboxMin:Lt(i.min),bboxMax:Lt(i.max),renderVertexCount:Ne(e,t.VertexCountMethod.RENDER),uploadVertexCount:Ne(e,t.VertexCountMethod.UPLOAD),uploadNaiveVertexCount:Ne(e,t.VertexCountMethod.UPLOAD_NAIVE)}}))}}function It(e){return{properties:e.getRoot().listMeshes().map((e=>{const n=e.listParents().filter((e=>e.propertyType!==r.PropertyType.ROOT)).length;let i=0;const s=new Set,o=new Set,a=new Set;e.listPrimitives().forEach((e=>{for(const t of e.listSemantics()){const n=e.getAttribute(t);s.add(t+":"+Nt(n)),a.add(n)}for(const t of e.listTargets())t.listAttributes().forEach((e=>a.add(e)));const t=e.getIndices();t&&(o.add(Nt(t)),a.add(t)),i+=b(e)}));let c=0;Array.from(a).forEach((e=>c+=e.getArray().byteLength));const l=e.listPrimitives().map((e=>Dt[e.getMode()]));return{name:e.getName(),mode:Array.from(new Set(l)),meshPrimitives:e.listPrimitives().length,glPrimitives:i,vertices:Ue(e,t.VertexCountMethod.UPLOAD),indices:Array.from(o).sort(),attributes:Array.from(s).sort(),instances:n,size:c}}))}}function Rt(e){const t=e.getRoot().listMaterials().map((t=>{const n=t.listParents().filter((e=>e.propertyType!==r.PropertyType.ROOT)).length,i=new Set(t.listExtensions()),s=e.getGraph().listEdges().filter((e=>{const n=e.getChild(),s=e.getParent();return n instanceof r.Texture&&s===t||!!(n instanceof r.Texture&&s instanceof r.ExtensionProperty&&i.has(s))})).map((e=>e.getName()));return{name:t.getName(),instances:n,textures:s,alphaMode:t.getAlphaMode(),doubleSided:t.getDoubleSided()}}));return{properties:t}}function Bt(e){return{properties:e.getRoot().listTextures().map((t=>{const n=t.listParents().filter((e=>e.propertyType!==r.PropertyType.ROOT)).length,i=e.getGraph().listParentEdges(t).filter((e=>e.getParent().propertyType!==r.PropertyType.ROOT)).map((e=>e.getName())),s=r.ImageUtils.getSize(t.getImage(),t.getMimeType());let a="";if("image/ktx2"===t.getMimeType()){const e=o.read(t.getImage()).dataFormatDescriptor[0];e.colorModel===o.KHR_DF_MODEL_ETC1S?a="ETC1S":e.colorModel===o.KHR_DF_MODEL_UASTC&&(a="UASTC")}return{name:t.getName(),uri:t.getURI(),slots:Array.from(new Set(i)),instances:n,mimeType:t.getMimeType(),compression:a,resolution:s?s.join("x"):"",size:t.getImage().byteLength,gpuSize:r.ImageUtils.getVRAMByteLength(t.getImage(),t.getMimeType())}}))}}function Pt(e){return{properties:e.getRoot().listAnimations().map((e=>{let t=1/0,n=-1/0;e.listSamplers().forEach((e=>{const r=e.getInput();r&&(t=Math.min(t,r.getMin([])[0]),n=Math.max(n,r.getMax([])[0]))}));let r=0,i=0;const s=new Set;return e.listSamplers().forEach((e=>{const t=e.getInput(),n=e.getOutput();t&&(i+=t.getCount(),s.add(t),n&&s.add(n))})),Array.from(s).forEach((e=>{r+=e.getArray().byteLength})),{name:e.getName(),channels:e.listChannels().length,samplers:e.listSamplers().length,duration:Math.round(1e3*(n-t))/1e3,keyframes:i,size:r}}))}}const Dt=["POINTS","LINES","LINE_LOOP","LINE_STRIP","TRIANGLES","TRIANGLE_STRIP","TRIANGLE_FAN"],Ot={Float32Array:"f32",Uint32Array:"u32",Uint16Array:"u16",Uint8Array:"u8",Int32Array:"i32",Int16Array:"i16",Int8Array:"i8"};function Lt(e){for(let t=0;t<e.length;t++)e[t].toFixed&&(e[t]=Number(e[t].toFixed(5)));return e}function Nt(e){const t=e.getArray();return(Ot[t.constructor.name]||"?")+(e.getNormalized()?"_norm":"")}const Ft="instance",Ut={min:5};function kt(e,t){let n,r=0;for(;n=e.pop();){if(n.listChildren().length||n.getCamera()||n.getMesh()||n.getSkin()||n.listExtensions().length)continue;const t=n.getParentNode();t&&e.push(t),n.dispose(),r++}t.debug(`${Ft}: Removed ${r} unused nodes.`)}function zt(e){const t=e.getMaterial();return!(!t||!t.getExtension("KHR_materials_volume"))}function Gt(e){const t=e.getWorldScale();return!r.MathUtils.eq(t,[1,1,1])}function jt(e,t,n,r){const i=n.listPrimitives()[0].getAttribute("POSITION").getBuffer(),s=e.createAccessor().setType("VEC3").setArray(new Float32Array(3*r)).setBuffer(i),o=e.createAccessor().setType("VEC4").setArray(new Float32Array(4*r)).setBuffer(i),a=e.createAccessor().setType("VEC3").setArray(new Float32Array(3*r)).setBuffer(i);return t.createInstancedMesh().setAttribute("TRANSLATION",s).setAttribute("ROTATION",o).setAttribute("SCALE",a)}const Vt={skipValidation:!1},Qt=2**32-1,{LINE_STRIP:Ht,LINE_LOOP:Wt,TRIANGLE_STRIP:qt,TRIANGLE_FAN:Xt}=r.Primitive.Mode;function Kt(e,t={}){const n=v(Vt,t),i=e[0],s=r.Document.fromGraph(i.getGraph());if(!n.skipValidation&&new Set(e.map(L)).size>1)throw new Error("Requires >=2 Primitives, sharing the same Material and Mode, with compatible vertex attributes and indices.");for(const t of e)switch(t.getMode()){case Ht:case Wt:ut(t);break;case qt:case Xt:ht(t)}const o=[],a=new Uint32Array(e.length);let c=0,l=0;for(let t=0;t<e.length;t++){const n=e[t],r=n.getIndices(),i=n.getAttribute("POSITION").getCount(),s=r?r.getArray():null,u=r?r.getCount():i,h=new Uint32Array(i).fill(Qt);for(let e=0;e<u;e++){const n=s?s[e]:e;h[n]===Qt&&(h[n]=c++,a[t]++)}o.push(h),l+=u}const u=s.createPrimitive().setMode(i.getMode()).setMaterial(i.getMaterial());for(const e of i.listSemantics()){const t=i.getAttribute(e),n=r.ComponentTypeToTypedArray[t.getComponentType()],o=R(s,t).setArray(new n(c*t.getElementSize()));u.setAttribute(e,o)}const h=i.getIndices(),d=h?R(s,h).setArray(P(l,c)):null;u.setIndices(d);let p=0;for(let t=0;t<o.length;t++){const n=e[t],r=n.getIndices(),i=r?r.getCount():-1,s=o[t];r&&d&&(Jt(r,s,d,p),p+=i);for(const e of u.listSemantics()){Yt(n.getAttribute(e),r,s,u.getAttribute(e))}}return u}function Yt(e,t,n,r){const i=e.getElementSize(),s=t?t.getArray():null,o=e.getCount(),a=e.getArray(),c=r.getArray(),l=new Uint8Array(e.getCount());for(let e=0,r=t?t.getCount():o;e<r;e++){const t=s?s[e]:e,r=n[t];if(!l[r]){for(let e=0;e<i;e++)c[r*i+e]=a[t*i+e];l[r]=1}}}function Jt(e,t,n,r){const i=e.getCount(),s=e.getArray(),o=n.getArray();for(let e=0;e<i;e++){const n=t[s[e]];o[r+e]=n}}const $t="join",{ROOT:Zt,NODE:en,MESH:tn,PRIMITIVE:nn,ACCESSOR:rn}=r.PropertyType,sn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],on={keepMeshes:!1,keepNamed:!1,cleanup:!0,filter:()=>!0};function an(e,t,n){const i=e.getLogger(),s={},o=t.listChildren();for(let e=0;e<o.length;e++){const t=o[e];if(!n.filter(t))continue;if(t.listParents().some((e=>e instanceof r.AnimationChannel)))continue;const i=t.getMesh();if(i&&(!t.getExtension("EXT_mesh_gpu_instancing")&&!t.getSkin()))for(const r of i.listPrimitives()){if(r.listTargets().length>0)continue;const o=r.getMaterial();if(o&&o.getExtension("KHR_materials_volume"))continue;Qe(r),ln(r);let a=L(r);const c=i.getName()||t.getName();(n.keepMeshes||n.keepNamed&&c)&&(a+=`|${e}`),a in s||(s[a]={prims:[],primMeshes:[],primNodes:[],dstNode:t,dstMesh:void 0});const l=s[a];l.prims.push(r),l.primNodes.push(t)}}const a=Object.values(s).filter((({prims:e})=>e.length>1)),c=new Set(a.flatMap((e=>e.primNodes)));for(const e of c){const t=e.getMesh(),n=t.listParents().some((t=>t.propertyType!==Zt&&e!==t));n&&e.setMesh(t.clone())}for(const e of a){const{dstNode:t,primNodes:n}=e;e.dstMesh=t.getMesh(),e.primMeshes=n.map((e=>e.getMesh()))}for(const e of a){const{prims:t,primNodes:n,primMeshes:r,dstNode:s,dstMesh:o}=e,a=s.getMatrix();for(let e=0;e<t.length;e++){const i=n[e],o=r[e];let c=t[e];o.removePrimitive(c),D(c)&&(c=t[e]=cn(t[e])),i!==s&&(K(sn,X(sn,a),i.getMatrix()),Je(c,sn))}const c=Kt(t),l=c.listAttributes()[0].getCount();o.addPrimitive(c),i.debug(`${$t}: Joined Primitives (${t.length}) containing ${T(l)} vertices under Node "${s.getName()}".`)}}function cn(e){const t=e.clone();for(const e of t.listSemantics())t.setAttribute(e,t.getAttribute(e).clone());const n=t.getIndices();return n&&t.setIndices(n.clone()),t}function ln(e){for(const t of["POSITION","NORMAL","TANGENT"]){const n=e.getAttribute(t);n&&mt(n)}}function un(e){const t=r.Document.fromGraph(e.getGraph());let n=0;for(const i of t.getGraph().listParentEdges(e)){const e=i.getParent();let{channels:s}=i.getAttributes();s&&"baseColorTexture"===i.getName()&&e instanceof r.Material&&e.getAlphaMode()===r.Material.AlphaMode.OPAQUE&&(s&=~r.TextureChannel.A),s?n|=s:e.propertyType!==r.PropertyType.ROOT&&t.getLogger().warn(`Missing attribute ".channels" on edge, "${i.getName()}".`)}return n}const hn="reorder",dn={target:"size",cleanup:!0};function pn(e){const t=v(dn,e),n=t.encoder;if(!n)throw new Error(`${hn}: encoder dependency required — install "meshoptimizer".`);return _(hn,(function(e){try{const i=e.getLogger();return Promise.resolve(n.ready).then((function(){function s(){o.indicesToAttributes.size?i.debug(`${hn}: Complete.`):i.warn(`${hn}: No qualifying primitives found; may need to weld first.`)}const o=function(e){const t=new Map,n=new x,r=new x,i=new x;for(const s of e.getRoot().listMeshes())for(const e of s.listPrimitives()){const s=e.getIndices();if(s){t.set(s,e.getMode()),n.add(s,e);for(const t of M(e))r.add(s,t),i.add(t,e)}}return{indicesToPrimitives:n,indicesToAttributes:r,indicesToMode:t,attributesToPrimitives:i}}(e);for(const i of o.indicesToAttributes.keys()){let s=i.getArray();s=s instanceof Uint32Array?s.slice():new Uint32Array(s);const[a,c]=n.reorderMesh(s,o.indicesToMode.get(i)===r.Primitive.Mode.TRIANGLES,"size"===t.target),l=R(e,i);l.setArray(c<=65534?new Uint16Array(s):s);for(const t of o.indicesToAttributes.get(i)){const n=R(e,t);He(t,i,a,n,c);for(const e of o.indicesToPrimitives.get(i)){e.getIndices()===i&&e.swap(i,l),e.swap(t,n);for(const r of e.listTargets())r.swap(t,n)}}}const a=function(){if(t.cleanup)return Promise.resolve(e.transform(be({propertyTypes:[r.PropertyType.ACCESSOR],keepAttributes:!0,keepIndices:!0}))).then((function(){}))}();return a&&a.then?a.then(s):s()}))}catch(e){return Promise.reject(e)}}))}function fn(e,t=1/0){if(Number.isFinite(t)&&t%4||t<=0)throw new Error("Limit must be positive multiple of four.");const n=e.getAttribute("POSITION").getCount(),i=e.listSemantics().filter((e=>e.startsWith("WEIGHTS_"))).length,s=new Uint16Array(4*i),o=new Float32Array(4*i),a=new Float32Array(4*i),c=new Uint32Array(4*i),l=new Uint32Array(4*i);for(let t=0;t<n;t++){mn(e,t,"WEIGHTS",o),mn(e,t,"JOINTS",c);for(let e=0;e<4*i;e++)s[e]=e;s.sort(((e,t)=>o[e]>o[t]?-1:1));for(let e=0;e<s.length;e++)a[e]=o[s[e]],l[e]=c[s[e]];gn(e,t,"WEIGHTS",a),gn(e,t,"JOINTS",l)}for(let n=i;4*n>t;n--){const t=e.getAttribute("WEIGHTS_"+(n-1)),r=e.getAttribute("JOINTS_"+(n-1));e.setAttribute("WEIGHTS_"+(n-1),null),e.setAttribute("JOINTS_"+(n-1),null),1===t.listParents().length&&t.dispose(),1===r.listParents().length&&r.dispose()}!function(e){if(!function(e){const t=e.listSemantics().filter((e=>e.startsWith("WEIGHTS_"))).map((t=>e.getAttribute(t))),n=t.map((e=>e.getNormalized())),r=t.map((e=>e.getComponentType()));return 1===new Set(n).size&&1===new Set(r).size}(e))return;const t=e.getAttribute("POSITION").getCount(),n=e.listSemantics().filter((e=>e.startsWith("WEIGHTS_"))).length,i=e.getAttribute("WEIGHTS_0"),s=i.getArray(),o=i.getComponentType(),a=i.getNormalized(),c=a?o:void 0,l=a?r.MathUtils.decodeNormalizedInt(1,o):Number.EPSILON,u=new Uint32Array(4*n).fill(0),h=s.slice(0,4*n).fill(0);for(let n=0;n<t;n++){mn(e,n,"JOINTS",u),mn(e,n,"WEIGHTS",h,c);let t=An(h,c);if(0!==t&&1!==t){if(Math.abs(1-t)>l)for(let e=0;e<h.length;e++)if(a){const n=r.MathUtils.decodeNormalizedInt(h[e],o);h[e]=r.MathUtils.encodeNormalizedInt(n/t,o)}else h[e]/=t;if(t=An(h,c),a&&1!==t)for(let e=h.length-1;e>=0;e--)if(h[e]>0){const n=1-t;h[e]+=Math.sign(n)*r.MathUtils.encodeNormalizedInt(Math.abs(n),o);break}}for(let e=h.length-1;e>=0;e--)0===h[e]&&(u[e]=0);gn(e,n,"JOINTS",u),gn(e,n,"WEIGHTS",h,c)}}(e)}function mn(e,t,n,i,s){let o;const a=[0,0,0,0];for(let c=0;o=e.getAttribute(`${n}_${c}`);c++){o.getElement(t,a);for(let e=0;e<4;e++)i[4*c+e]=s?r.MathUtils.encodeNormalizedInt(a[e],s):a[e]}return i}function gn(e,t,n,i,s){let o;const a=[0,0,0,0];for(let c=0;o=e.getAttribute(`${n}_${c}`);c++){for(let e=0;e<4;e++)a[e]=s?r.MathUtils.decodeNormalizedInt(i[4*c+e],s):i[4*c+e];o.setElement(t,a)}}function An(e,t){let n=0;for(let i=0;i<e.length;i++)n+=t?r.MathUtils.decodeNormalizedInt(e[i],t):e[i];return n}const yn="quantize",_n=[Int8Array,Int16Array,Int32Array],{TRANSLATION:vn,ROTATION:bn,SCALE:xn,WEIGHTS:wn}=r.AnimationChannel.TargetPath,En=[vn,bn,xn],Tn={pattern:/.*/,quantizationVolume:"mesh",quantizePosition:14,quantizeNormal:10,quantizeTexcoord:12,quantizeColor:8,quantizeWeight:8,quantizeGeneric:12,normalizeWeights:!0,cleanup:!0};function Sn(e=Tn){const n=v(Tn,{patternTargets:e.pattern||Tn.pattern,...e});return _(yn,(function(e){try{function i(){o.debug(`${yn}: Complete.`)}const o=e.getLogger(),a=e.getRoot();let c;"scene"===n.quantizationVolume&&(c=Cn(function(e){const t=e[0];for(const n of e)J(t.min,t.min,n.min),$(t.max,t.max,n.max);return t}(a.listMeshes().map(Ln))));for(const u of e.getRoot().listMeshes()){"mesh"===n.quantizationVolume&&(c=Cn(Ln(u))),c&&n.pattern.test("POSITION")&&(In(e,u,c),Pn(u,1/c.scale));for(const h of u.listPrimitives()){const d=ke(h,t.VertexCountMethod.RENDER);d<ke(h,t.VertexCountMethod.UPLOAD)/2&&Qe(h),Mn(e,h,c,n);for(const p of h.listTargets())Mn(e,p,c,n)}}a.listMeshes().flatMap((e=>e.listPrimitives())).some(Fn)&&e.createExtension(s.KHRMeshQuantization).setRequired(!0);const l=function(){if(n.cleanup)return Promise.resolve(e.transform(be({propertyTypes:[r.PropertyType.ACCESSOR,r.PropertyType.SKIN,r.PropertyType.MATERIAL],keepAttributes:!0,keepIndices:!0,keepLeaves:!0,keepSolidTextures:!0}),oe({propertyTypes:[r.PropertyType.ACCESSOR,r.PropertyType.MATERIAL,r.PropertyType.SKIN],keepUniqueNames:!0}))).then((function(){}))}();return Promise.resolve(l&&l.then?l.then(i):i())}catch(f){return Promise.reject(f)}}))}function Mn(e,t,n,i){const s=t instanceof r.PrimitiveTarget,o=e.getLogger();for(const e of t.listSemantics()){if(!s&&!i.pattern.test(e))continue;if(s&&!i.patternTargets.test(e))continue;const l=t.getAttribute(e),{bits:u,ctor:h}=On(e,l,o,i);if(!h)continue;if(u<8||u>16)throw new Error(`${yn}: Requires bits = 8–16.`);if(l.getComponentSize()<=u/8)continue;const d=l.clone();if("POSITION"===e){const e=n.scale,i=[];t instanceof r.Primitive?X(i,kn(n)):(c=[1/e,1/e,1/e],(a=i)[0]=c[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=c[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=c[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1);for(let e=0,t=[0,0,0],n=d.getCount();e<n;e++)d.getElement(e,t),d.setElement(e,te(t,t,i))}Dn(d,h,u),t.setAttribute(e,d)}var a,c;if(i.normalizeWeights&&t.getAttribute("WEIGHTS_0")&&fn(t,1/0),t instanceof r.Primitive&&t.getIndices()&&t.listAttributes().length&&t.listAttributes()[0].getCount()<65535){const e=t.getIndices();e.setArray(new Uint16Array(e.getArray()))}}function Cn(e){const{min:t,max:n}=e,r=Math.max((n[0]-t[0])/2,(n[1]-t[1])/2,(n[2]-t[2])/2);return{offset:[t[0]+(n[0]-t[0])/2,t[1]+(n[1]-t[1])/2,t[2]+(n[2]-t[2])/2],scale:r}}function In(e,t,n){const i=kn(n);for(const s of t.listParents()){if(!(s instanceof r.Node))continue;const o=s.listParents().filter((e=>e instanceof r.AnimationChannel)),a=o.some((e=>En.includes(e.getTargetPath()))),c=s.listChildren().length>0,l=s.getSkin();if(l){s.setSkin(Rn(l,n));continue}const u=s.getExtension("EXT_mesh_gpu_instancing");if(u){s.setExtension("EXT_mesh_gpu_instancing",Bn(e,u,n));continue}let h;c||a?(h=e.createNode("").setMesh(t),s.addChild(h).setMesh(null),o.filter((e=>e.getTargetPath()===wn)).forEach((e=>e.setTargetNode(h)))):h=s;const d=h.getMatrix();K(d,d,i),h.setMatrix(d)}}function Rn(e,t){e=e.clone();const n=kn(t),r=e.getInverseBindMatrices().clone(),i=[];for(let e=0,t=r.getCount();e<t;e++)r.getElement(e,i),K(i,i,n),r.setElement(e,i);return e.setInverseBindMatrices(r)}function Bn(e,t,n){var i,s,o;if(!t.getAttribute("TRANSLATION")&&!t.getAttribute("ROTATION")&&!t.getAttribute("SCALE"))return t;let a=null==(i=(t=t.clone()).getAttribute("TRANSLATION"))?void 0:i.clone();const c=null==(s=t.getAttribute("ROTATION"))?void 0:s.clone();let l=null==(o=t.getAttribute("SCALE"))?void 0:o.clone();const u=a||c||l,h=[0,0,0],d=[0,0,0,1],p=[1,1,1];!a&&n.offset&&(a=e.createAccessor().setType("VEC3").setArray(Gn(u.getCount(),h))),!l&&n.scale&&(l=e.createAccessor().setType("VEC3").setArray(Gn(u.getCount(),p)));const f=[0,0,0],m=[0,0,0,1],g=[1,1,1],A=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],y=kn(n);for(let e=0,t=u.getCount();e<t;e++)r.MathUtils.compose(a?a.getElement(e,f):h,c?c.getElement(e,m):d,l?l.getElement(e,g):p,A),K(A,A,y),r.MathUtils.decompose(A,f,m,g),a&&a.setElement(e,f),c&&c.setElement(e,m),l&&l.setElement(e,g);return a&&t.setAttribute("TRANSLATION",a),c&&t.setAttribute("ROTATION",c),l&&t.setAttribute("SCALE",l),t}function Pn(e,t){for(const n of e.listPrimitives()){let e=n.getMaterial();if(!e)continue;let r=e.getExtension("KHR_materials_volume");!r||r.getThicknessFactor()<=0||(r=r.clone().setThicknessFactor(r.getThicknessFactor()*t),e=e.clone().setExtension("KHR_materials_volume",r),n.setMaterial(e))}}function Dn(e,t,n){const r=new t(e.getArray().length),i=_n.includes(t)?1:0,s=n-i,o=8*t.BYTES_PER_ELEMENT-i,a=Math.pow(2,s)-1,c=o-s,l=2*s-o,u=[i>0?-1:0,1];for(let t=0,n=0,i=[];t<e.getCount();t++){e.getElement(t,i);for(let e=0;e<i.length;e++){let t=zn(i[e],u);t=Math.round(Math.abs(t)*a),t=t<<c|t>>l,r[n++]=t*Math.sign(i[e])}}e.setArray(r).setNormalized(!0).setSparse(!1)}function On(e,t,n,r){const i=t.getMinNormalized([]),s=t.getMaxNormalized([]);let o,a;if("POSITION"===e)o=r.quantizePosition,a=o<=8?Int8Array:Int16Array;else if("NORMAL"===e||"TANGENT"===e)o=r.quantizeNormal,a=o<=8?Int8Array:Int16Array;else if(e.startsWith("COLOR_"))o=r.quantizeColor,a=o<=8?Uint8Array:Uint16Array;else if(e.startsWith("TEXCOORD_")){if(i.some((e=>e<0))||s.some((e=>e>1)))return n.warn(`${yn}: Skipping ${e}; out of [0,1] range.`),{bits:-1};o=r.quantizeTexcoord,a=o<=8?Uint8Array:Uint16Array}else{if(e.startsWith("JOINTS_"))return o=Math.max(...t.getMax([]))<=255?8:16,a=o<=8?Uint8Array:Uint16Array,t.getComponentSize()>o/8&&t.setArray(new a(t.getArray())),{bits:-1};if(e.startsWith("WEIGHTS_")){if(i.some((e=>e<0))||s.some((e=>e>1)))return n.warn(`${yn}: Skipping ${e}; out of [0,1] range.`),{bits:-1};o=r.quantizeWeight,a=o<=8?Uint8Array:Uint16Array}else{if(!e.startsWith("_"))throw new Error(`${yn}: Unexpected semantic, "${e}".`);if(i.some((e=>e<-1))||s.some((e=>e>1)))return n.warn(`${yn}: Skipping ${e}; out of [-1,1] range.`),{bits:-1};o=r.quantizeGeneric,a=a=i.some((e=>e<0))?o<=8?Int8Array:Int16Array:o<=8?Uint8Array:Uint16Array}}return{bits:o,ctor:a}}function Ln(e){const t=[],n=[];for(const r of e.listPrimitives()){const e=r.getAttribute("POSITION");e&&t.push(e);for(const e of r.listTargets()){const t=e.getAttribute("POSITION");t&&n.push(t)}}if(0===t.length)throw new Error(`${yn}: Missing "POSITION" attribute.`);const r=Un(t,3);if(n.length>0){const{min:e,max:t}=Un(n,3);J(r.min,r.min,J(e,Z(e,e,2),[0,0,0])),$(r.max,r.max,$(t,Z(t,t,2),[0,0,0]))}return r}function Nn(e,t){const n=t.getComponentSize();if("POSITION"===e)return n<4;if("NORMAL"===e)return n<4;if("TANGENT"===e)return n<4;if(e.startsWith("TEXCOORD_")){const e=t.getComponentType(),i=t.getNormalized();return n<4&&!(i&&e===r.Accessor.ComponentType.UNSIGNED_BYTE)&&!(i&&e===r.Accessor.ComponentType.UNSIGNED_SHORT)}return!1}function Fn(e){for(const t of e.listSemantics()){if(Nn(t,e.getAttribute("POSITION")))return!0}return e.propertyType===r.PropertyType.PRIMITIVE&&e.listTargets().some(Fn)}function Un(e,t){const n=new Array(t).fill(1/0),r=new Array(t).fill(-1/0),i=[],s=[];for(const o of e){o.getMinNormalized(i),o.getMaxNormalized(s);for(let e=0;e<t;e++)n[e]=Math.min(n[e],i[e]),r[e]=Math.max(r[e],s[e])}return{min:n,max:r}}function kn(e){return t=[],n=[0,0,0,1],r=e.offset,i=[e.scale,e.scale,e.scale],s=n[0],o=n[1],a=n[2],c=n[3],d=s*(l=s+s),p=s*(u=o+o),f=s*(h=a+a),m=o*u,g=o*h,A=a*h,y=c*l,_=c*u,v=c*h,b=i[0],x=i[1],w=i[2],t[0]=(1-(m+A))*b,t[1]=(p+v)*b,t[2]=(f-_)*b,t[3]=0,t[4]=(p-v)*x,t[5]=(1-(d+A))*x,t[6]=(g+y)*x,t[7]=0,t[8]=(f+_)*w,t[9]=(g-y)*w,t[10]=(1-(d+m))*w,t[11]=0,t[12]=r[0],t[13]=r[1],t[14]=r[2],t[15]=1,t;var t,n,r,i,s,o,a,c,l,u,h,d,p,f,m,g,A,y,_,v,b,x,w}function zn(e,t){return Math.min(Math.max(e,t[0]),t[1])}function Gn(e,t){const n=t.length,r=new Float32Array(e*n);for(let i=0;i<e;i++)r.set(t,i*n);return r}const jn={level:"high",...Tn},Vn="meshopt";const Qn="undefined"!=typeof Symbol?Symbol.iterator||(Symbol.iterator=Symbol("Symbol.iterator")):"@@iterator";function Hn(e,t,n){if(!e.s){if(n instanceof Wn){if(!n.s)return void(n.o=Hn.bind(null,e,t));1&t&&(t=n.s),n=n.v}if(n&&n.then)return void n.then(Hn.bind(null,e,t),Hn.bind(null,e,2));e.s=t,e.v=n;const r=e.o;r&&r(e)}}const Wn=function(){function e(){}return e.prototype.then=function(t,n){const r=new e,i=this.s;if(i){const e=1&i?t:n;if(e){try{Hn(r,1,e(this.v))}catch(e){Hn(r,2,e)}return r}return this}return this.o=function(e){try{const i=e.v;1&e.s?Hn(r,1,t?t(i):i):n?Hn(r,1,n(i)):Hn(r,2,i)}catch(e){Hn(r,2,e)}},r},e}();function qn(e){return e instanceof Wn&&1&e.s}const Xn="metalRough";function Kn(e,t,n){if("function"==typeof e[Qn]){var r,i,s,o=e[Qn]();if(function e(a){try{for(;!((r=o.next()).done||n&&n());)if((a=t(r.value))&&a.then){if(!qn(a))return void a.then(e,s||(s=Hn.bind(null,i=new Wn,2)));a=a.v}i?Hn(i,1,a):i=a}catch(e){Hn(i||(i=new Wn),2,e)}}(),o.return){var a=function(e){try{r.done||o.return()}catch(e){}return e};if(i&&i.then)return i.then(a,(function(e){throw a(e)}));a()}return i}if(!("length"in e))throw new TypeError("Object is not iterable");for(var c=[],l=0;l<e.length;l++)c.push(e[l]);return function(e,t,n){var r,i,s=-1;return function o(a){try{for(;++s<e.length&&(!n||!n());)if((a=t(s))&&a.then){if(!qn(a))return void a.then(o,i||(i=Hn.bind(null,r=new Wn,2)));a=a.v}r?Hn(r,1,a):r=a}catch(e){Hn(r||(r=new Wn),2,e)}}(),r}(c,(function(e){return t(c[e])}),n)}const Yn={};const Jn="unweld",$n={};function Zn(e=$n){return _(Jn,(e=>{const t=e.getLogger(),n=new Map;for(const t of e.getRoot().listMeshes())for(const e of t.listPrimitives())er(e,n);t.debug(`${Jn}: Complete.`)}))}function er(e,t=new Map){const n=e.getIndices();if(!n)return;const i=e.getGraph(),s=r.Document.fromGraph(i),o=s.getLogger(),a=e.getAttribute("POSITION").getCount();for(const r of e.listAttributes())e.swap(r,tr(s,r,n,t)),1===r.listParents().length&&r.dispose();for(const r of e.listTargets())for(const e of r.listAttributes())r.swap(e,tr(s,e,n,t)),1===e.listParents().length&&e.dispose();const c=e.getAttribute("POSITION").getCount();o.debug(`${Jn}: ${S(a,c)} vertices.`),e.setIndices(null),1===n.listParents().length&&n.dispose()}function tr(e,t,n,r){if(r.has(t)&&r.get(t).has(n))return r.get(t).get(n);const i=t.getArray(),s=new(0,i.constructor)(n.getCount()*t.getElementSize()),o=n.getArray(),a=t.getElementSize();for(let e=0,t=n.getCount();e<t;e++)for(let t=0;t<a;t++)s[e*a+t]=i[o[e]*a+t];r.has(t)||r.set(t,new Map);const c=R(e,t).setArray(s);return r.get(t).set(n,c),c}const nr="normals",rr={overwrite:!1};function ir(e,t,n){const r=[t[0]-e[0],t[1]-e[1],t[2]-e[2]],i=[n[0]-e[0],n[1]-e[1],n[2]-e[2]];return ee([0,0,0],[r[1]*i[2]-r[2]*i[1],r[2]*i[0]-r[0]*i[2],r[0]*i[1]-r[1]*i[0]])}const sr="palette",or={blockSize:4,min:5,keepAttributes:!1,cleanup:!0};function ar(e){const t=Math.round(255*e).toString(16);return 1===t.length?"0"+t:t}function cr(e){return r.ColorUtils.convertLinearToSRGB(e,e),e.map(ar).join("")}function lr(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))}function ur(e,t,n,r){for(let i=0;i<r;i++)for(let s=0;s<r;s++)e.set(t*r+i,s,0,255*n[0]),e.set(t*r+i,s,1,255*n[1]),e.set(t*r+i,s,2,255*n[2]),e.set(t*r+i,s,3,255*n[3])}const hr="partition",dr={animations:!0,meshes:!0};const pr=/[^\w0–9-]+/g;function fr(e,t){let n=`${e=e.replace(pr,"")}.bin`,r=1;for(;t.has(n);)n=`${e}_${r++}.bin`;return t.add(n),n}var mr;!function(e){e[e.STEP=0]="STEP",e[e.LERP=1]="LERP",e[e.SLERP=2]="SLERP"}(mr||(mr={}));function gr(e,t,n){for(let r=0,i=n.length;r<i;r++)n[r]=e[t*i+r];return n}function Ar(e,t,n){for(let r=0,i=n.length;r<i;r++)e[t*i+r]=n[r]}function yr(e,t,n=0){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(Math.abs(e[r]-t[r])>n)return!1;return!0}function _r(e,t,n){return e*(1-n)+t*n}function vr(e,t,n,r){for(let i=0;i<t.length;i++)e[i]=_r(t[i],n[i],r);return e}function br(e,t,n,r){let i,s,o,a,c,l=t[0],u=t[1],h=t[2],d=t[3],p=n[0],f=n[1],m=n[2],g=n[3];return s=l*p+u*f+h*m+d*g,s<0&&(s=-s,p=-p,f=-f,m=-m,g=-g),1-s>1e-6?(i=Math.acos(s),o=Math.sin(i),a=Math.sin((1-r)*i)/o,c=Math.sin(r*i)/o):(a=1-r,c=r),e[0]=a*l+c*p,e[1]=a*u+c*f,e[2]=a*h+c*m,e[3]=a*d+c*g,e}function xr(e,t){const n=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}(e,t);return Math.acos(2*n*n-1)}const wr="resample",Er=new Float32Array(0),Tr={ready:Promise.resolve(),resample:function(e,t,n,r=1e-4){const i=t.length/e.length,s=new Array(i).fill(0),o=new Array(i).fill(0),a=new Array(i).fill(0),c=new Array(i).fill(0),l=e.length-1;let u=1;for(let i=1;i<l;++i){const l=e[u-1],h=e[i],d=e[i+1],p=(h-l)/(d-l);let f=!1;if(h!==d&&(1!==i||h!==e[0]))if(gr(t,u-1,c),gr(t,i,o),gr(t,i+1,a),"slerp"===n){const e=br(s,c,a,p),t=xr(c,o)+xr(o,a);f=!yr(o,e,r)||t+Number.EPSILON>=Math.PI}else if("lerp"===n){f=!yr(o,vr(s,c,a,p),r)}else"step"===n&&(f=!yr(o,c)||!yr(o,a));f&&(i!==u&&(e[u]=e[i],Ar(t,u,gr(t,i,s))),u++)}return l>0&&(e[u]=e[l],Ar(t,u,gr(t,l,s)),u++),u},tolerance:1e-4,cleanup:!0};function Sr(e,t,n){if(e instanceof Float32Array)return e.slice();const i=new Float32Array(e);if(!n)return i;for(let e=0;e<i.length;e++)i[e]=r.MathUtils.decodeNormalizedInt(i[e],t);return i}function Mr(e,t,n){if(t===r.Accessor.ComponentType.FLOAT)return e.slice();const i=new(0,r.ComponentTypeToTypedArray[t])(e.length);for(let s=0;s<i.length;s++)i[s]=n?r.MathUtils.encodeNormalizedInt(e[s],t):e[s];return i}const Cr="sequence",Ir={name:"",fps:10,pattern:/.*/,sort:!0};const Rr="simplify",{POINTS:Br,LINES:Pr,LINE_STRIP:Dr,LINE_LOOP:Or,TRIANGLES:Lr,TRIANGLE_STRIP:Nr,TRIANGLE_FAN:Fr}=r.Primitive.Mode,Ur={ratio:0,error:1e-4,lockBorder:!1,cleanup:!0};function kr(e,n){const i={...Ur,...n},s=i.simplifier,o=e.getGraph(),a=r.Document.fromGraph(o),c=a.getLogger();switch(e.getMode()){case Br:return function(e,t,n){const r=n.simplifier,i=e.getLogger(),s=t.getIndices();s&&er(t);const o=t.getAttribute("POSITION"),a=t.getAttribute("COLOR_0"),c=o.getCount();let l=o.getArray(),u=a?a.getArray():void 0;const h=a?a.getComponentSize():void 0;l instanceof Float32Array||(l=gt(l,o.getComponentType(),o.getNormalized()));!u||u instanceof Float32Array||(u=gt(u,o.getComponentType(),o.getNormalized()));r.useExperimentalFeatures=!0;const d=Math.floor(n.ratio*c),p=r.simplifyPoints(l,3,d,u,h);r.useExperimentalFeatures=!1;const[f,m]=r.compactMesh(p);i.debug(`${Rr}: ${S(o.getCount(),m)} vertices.`);for(const n of M(t)){const r=R(e,n);He(n,null,f,r,m),C(t,n,r),1===n.listParents().length&&n.dispose()}return t}(a,e,i);case Pr:case Dr:case Or:return c.warn(`${Rr}: Skipping primitive simplification: Unsupported draw mode.`),e;case Nr:case Fr:ht(e)}const l=ke(e,t.VertexCountMethod.UPLOAD),u=ke(e,t.VertexCountMethod.RENDER);u<l/2&&Qe(e);const h=e.getAttribute("POSITION"),d=e.getIndices();let p=h.getArray(),f=d.getArray();p instanceof Float32Array||(p=gt(p,h.getComponentType(),h.getNormalized())),f instanceof Uint32Array||(f=new Uint32Array(f));const m=3*Math.floor(i.ratio*u/3),g=i.lockBorder?["LockBorder"]:[],[A,y]=s.simplify(f,p,3,m,i.error,g);e.setIndices(R(a,d).setArray(A)),1===d.listParents().length&&d.dispose(),Qe(e);const _=ke(e,t.VertexCountMethod.UPLOAD);return _<=65534&&e.getIndices().setArray(new Uint16Array(e.getIndices().getArray())),c.debug(`${Rr}: ${S(l,_)} vertices, error: ${y.toFixed(4)}.`),e}const zr="sparse",Gr={ratio:1/3};const jr=function(e,n){try{const s={...qr,...n},o=s.encoder,a=e.getURI(),l=Xr(e),h=s.targetFormat||l,d=e.getMimeType(),p=`image/${h}`,f=e.getImage();return Promise.resolve(o?function(e,t,n,i){try{const s=i.encoder;let o={};const a=Kr(n);switch(a){case"jpeg":o={quality:i.quality};break;case"png":o={quality:i.quality,effort:Yr(i.effort,100,10)};break;case"webp":o={quality:i.quality,effort:Yr(i.effort,100,6),lossless:i.lossless,nearLossless:i.nearLossless};break;case"avif":o={quality:i.quality,effort:Yr(i.effort,100,9),lossless:i.lossless}}const c=s(e,{limitInputPixels:i.limitInputPixels}).toFormat(a,o);if(i.resize){const n=r.ImageUtils.getSize(e,t),s=Array.isArray(i.resize)?N(n,i.resize):F(n,i.resize);c.resize(s[0],s[1],{fit:"fill",kernel:i.resizeFilter})}const l=r.BufferUtils.toView;return Promise.resolve(c.toBuffer()).then((function(e){return l.call(r.BufferUtils,e)}))}catch(e){return Promise.reject(e)}}(f,d,p,s):function(e,n,r,s){try{return Promise.resolve(i.getPixels(e,n)).then((function(e){if(s.resize){const[n,o]=e.shape,a=Array.isArray(s.resize)?N([n,o],s.resize):F([n,o],s.resize),l=u.default(new Uint8Array(a[0]*a[1]*4),[...a,4]);return s.resizeFilter===t.TextureResizeFilter.LANCZOS3?c.lanczos3(e,l):c.lanczos2(e,l),i.savePixels(l,r)}return i.savePixels(e,r)}))}catch(e){return Promise.reject(e)}}(f,d,p,s)).then((function(t){const n=f.byteLength,i=t.byteLength;if(d===p&&i>=n&&!s.resize);else if(d===p)e.setImage(t);else{const n=a?r.FileUtils.extension(a):r.ImageUtils.mimeTypeToExtension(d),i=r.ImageUtils.mimeTypeToExtension(p),s=e.getURI().replace(new RegExp(`\\.${n}$`),`.${i}`);e.setImage(t).setMimeType(p).setURI(s)}}))}catch(e){return Promise.reject(e)}},Vr="textureCompress",Qr=["jpeg","png","webp","avif"],Hr=["image/jpeg","image/png","image/webp","image/avif"];var Wr;t.TextureResizeFilter=void 0,(Wr=t.TextureResizeFilter||(t.TextureResizeFilter={})).LANCZOS3="lanczos3",Wr.LANCZOS2="lanczos2";const qr={resizeFilter:t.TextureResizeFilter.LANCZOS3,pattern:void 0,formats:void 0,slots:void 0,quality:void 0,effort:void 0,lossless:!1,nearLossless:!1,limitInputPixels:!0};function Xr(e){return Kr(e.getMimeType())}function Kr(e){const t=e.split("/").pop();if(!t||!Qr.includes(t))throw new Error(`Unknown MIME type "${e}".`);return t}function Yr(e,t,n){if(null!=e)return Math.round(e/t*n)}const Jr="tangents",$r={overwrite:!1};function Zr(e){const t=e.getMaterial();if(!t)return"TEXCOORD_0";const n=t.getNormalTextureInfo();if(!n)return"TEXCOORD_0";const r=`TEXCOORD_${n.getTexCoord()}`;return e.getAttribute(r)?r:"TEXCOORD_0"}function ei(e,t,n,i,s){return e.getMode()===r.Primitive.Mode.TRIANGLES&&e.getAttribute("POSITION")&&e.getAttribute("NORMAL")&&e.getAttribute("TEXCOORD_0")?e.getAttribute("TANGENT")&&!s?(t.debug(`${Jr}: Skipping primitive ${i} of mesh "${n}": TANGENT found.`),!1):!e.getIndices()||(t.warn(`${Jr}: Skipping primitive ${i} of mesh "${n}": primitives must be unwelded.`),!1):(t.debug(`${Jr}: Skipping primitive ${i} of mesh "${n}": primitives must have attributes=[POSITION, NORMAL, TEXCOORD_0] and mode=TRIANGLES.`),!1)}const ti="uninstance",ni={};function ri(e){const t=e.getExtension("EXT_mesh_gpu_instancing");if(!t)return[];const n=t.listSemantics();if(0===n.length)return[];const i=r.Document.fromGraph(e.getGraph()),s=t.listAttributes()[0].getCount(),o=String(s).length,a=e.getMesh(),c=e.getName(),l=[];for(let e=0;e<s;e++){const r=i.createNode().setMesh(a);if(c){const t=String(e).padStart(o,"0");r.setName(`${c}_${t}`)}for(const i of n){const n=t.getAttribute(i);switch(i){case"TRANSLATION":r.setTranslation(n.getElement(e,[0,0,0]));break;case"ROTATION":r.setRotation(n.getElement(e,[0,0,0,1]));break;case"SCALE":r.setScale(n.getElement(e,[1,1,1]));break;default:ii(r,i,n,e)}}l.push(r)}return l}function ii(e,t,n,r){const i="SCALAR"===n.getType()?n.getScalar(r):n.getElement(r,[]);e.setExtras({...e.getExtras(),[t]:i})}const si="unpartition",oi={};const ai="unwrap",ci={texcoord:0,overwrite:!1,groupBy:"mesh"};function li(e,t){const n=r.Document.fromGraph(e[0].getGraph()),i=t.watlas,s=t.texcoord??0,o=`TEXCOORD_${s}`;if(!i)throw new Error(`${ai}: dependency required — install "watlas".`);const a=new i.Atlas,c=[];for(let n=0;n<e.length;n++){const r=e[n],i=t.weights?t.weights[n]:1;if(!t.overwrite&&r.getAttribute(o))continue;const s=Qe(r),l=s.getAttribute("POSITION"),u={vertexCount:l.getCount(),vertexPositionData:di(l,i),vertexPositionStride:l.getElementSize()*Float32Array.BYTES_PER_ELEMENT},h=s.getAttribute("NORMAL");if(h&&(u.vertexNormalData=hi(h),u.vertexNormalStride=h.getElementSize()*Float32Array.BYTES_PER_ELEMENT),0!==t.texcoord){const e=s.getAttribute("TEXCOORD_0");e&&(u.vertexUvData=hi(e),u.vertexUvStride=e.getElementSize()*Float32Array.BYTES_PER_ELEMENT)}const d=s.getIndices();if(d){const e=d.getArray();u.indexCount=d.getCount(),u.indexData=e instanceof Uint8Array?new Uint16Array(e):e}c.push(s),a.addMesh(u)}if(0===c.length)return;if(a.generate(),a.meshCount!==c.length)throw new Error(`${ai}: Generated an unexpected number of atlas meshes. (got: ${a.meshCount}, expected: ${c.length})`);const l=[1/a.width,1/a.height];for(let e=0;e<a.meshCount;e++){const t=c[e],r=a.getMesh(e),i=t.getAttribute(o);i&&(t.setAttribute(o,null),D(i)||i.dispose());for(const e of t.listAttributes())t.swap(e,ui(n,e,r)),D(e)||e.dispose();for(const e of t.listTargets())for(const t of e.listAttributes())e.swap(t,ui(n,t,r)),D(t)||t.dispose();const u=n.createAccessor().setArray(new Float32Array(2*r.vertexCount)).setType("VEC2");for(let e=0;e<r.vertexCount;e++){const t=r.getVertex(e);u.setElement(e,[t.uv[0]*l[0],t.uv[1]*l[1]])}t.setAttribute(o,u);for(let e=s-1;e>=0;e--){const n=`TEXCOORD_${e}`;t.getAttribute(n)||t.setAttribute(n,u)}const h=new Uint32Array(r.indexCount);r.getIndexArray(h);const d=n.createAccessor().setArray(h).setType("SCALAR"),p=t.getIndices();t.setIndices(d),p&&!D(p)&&p.dispose()}a.delete()}function ui(e,t,n){const r=R(e,t),i=t.getArray().constructor;r.setArray(new i(n.vertexCount*t.getElementSize()));const s=[];for(let e=0;e<n.vertexCount;e++){const i=n.getVertex(e);r.setElement(e,t.getElement(i.xref,s))}return r}function hi(e){return e.getComponentType()===r.Accessor.ComponentType.FLOAT?e.getArray():gt(e.getArray(),e.getComponentType(),e.getNormalized())}function di(e,t){const n=gt(e.getArray(),e.getComponentType(),e.getNormalized());for(let e=0;e<n.length;e++)n[e]*=t;return n}function pi(e){let t=-1/0;for(const n of e.listParents())if(n instanceof r.Node){const e=n.getWorldScale();t=Number.isFinite(e[0])?Math.max(t,Math.abs(e[0])):t,t=Number.isFinite(e[1])?Math.max(t,Math.abs(e[1])):t,t=Number.isFinite(e[2])?Math.max(t,Math.abs(e[2])):t}return t>0&&Number.isFinite(t)?t:1}const fi="vertexColorSpace";t.DRACO_DEFAULTS=Tt,t.FLATTEN_DEFAULTS=Mt,t.INSTANCE_DEFAULTS=Ut,t.JOIN_DEFAULTS=on,t.MESHOPT_DEFAULTS=jn,t.PALETTE_DEFAULTS=or,t.PRUNE_DEFAULTS=ve,t.QUANTIZE_DEFAULTS=Tn,t.SIMPLIFY_DEFAULTS=Ur,t.TEXTURE_COMPRESS_DEFAULTS=qr,t.TEXTURE_COMPRESS_SUPPORTED_FORMATS=Qr,t.UNWRAP_DEFAULTS=ci,t.WELD_DEFAULTS=qe,t.assignDefaults=v,t.center=function(e=Q){const t=v(Q,e);return _(V,(e=>{const n=e.getLogger(),i=e.getRoot(),s=i.listAnimations().length>0||i.listSkins().length>0;e.getRoot().listScenes().forEach(((o,a)=>{let c;if(n.debug(`${V}: Scene ${a+1} / ${i.listScenes().length}.`),"string"==typeof t.pivot){const e=r.getBounds(o);c=[(e.max[0]-e.min[0])/2+e.min[0],(e.max[1]-e.min[1])/2+e.min[1],(e.max[2]-e.min[2])/2+e.min[2]],"above"===t.pivot&&(c[1]=e.max[1]),"below"===t.pivot&&(c[1]=e.min[1])}else c=t.pivot;n.debug(`${V}: Pivot "${c.join(", ")}".`);const l=[-1*c[0],-1*c[1],-1*c[2]];if(s){n.debug(`${V}: Model contains animation or skin. Adding a wrapper node.`);const t=e.createNode("Pivot").setTranslation(l);o.listChildren().forEach((e=>t.addChild(e))),o.addChild(t)}else n.debug(`${V}: Skipping wrapper, offsetting all root nodes.`),o.listChildren().forEach((e=>{const t=e.getTranslation();e.setTranslation([t[0]+l[0],t[1]+l[1],t[2]+l[2]])}))})),n.debug(`${V}: Complete.`)}))},t.clearNodeParent=W,t.clearNodeTransform=function(e){const t=e.getMesh(),n=e.getMatrix();t&&!r.MathUtils.eq(n,rt)&&tt(t,n);for(const t of e.listChildren()){const e=t.getMatrix();K(e,e,n),t.setMatrix(e)}return e.setMatrix(rt)},t.cloneDocument=function(e){const t=(new r.Document).setLogger(e.getLogger()),n=wt(t,e);return vt(t,e,n),t.getRoot().copy(e.getRoot(),n),t},t.compactAttribute=He,t.compactPrimitive=Qe,t.compressTexture=jr,t.convertPrimitiveToLines=ut,t.convertPrimitiveToTriangles=ht,t.copyToDocument=bt,t.createDefaultPropertyResolver=wt,t.createInstanceNodes=ri,t.createTransform=_,t.dedup=oe,t.dequantize=function(e=pt){const t=v(pt,e);return _(dt,(e=>{const n=e.getLogger();for(const n of e.getRoot().listMeshes())for(const e of n.listPrimitives())ft(e,t);e.createExtension(s.KHRMeshQuantization).dispose(),n.debug(`${dt}: Complete.`)}))},t.dequantizePrimitive=ft,t.draco=function(e=Tt){const t=v(Tt,e);return _("draco",(function(e){try{return Promise.resolve(e.transform(Xe())).then((function(){e.createExtension(s.KHRDracoMeshCompression).setRequired(!0).setEncoderOptions({method:"edgebreaker"===t.method?s.KHRDracoMeshCompression.EncoderMethod.EDGEBREAKER:s.KHRDracoMeshCompression.EncoderMethod.SEQUENTIAL,encodeSpeed:t.encodeSpeed,decodeSpeed:t.decodeSpeed,quantizationBits:{POSITION:t.quantizePosition,NORMAL:t.quantizeNormal,COLOR:t.quantizeColor,TEX_COORD:t.quantizeTexcoord,GENERIC:t.quantizeGeneric},quantizationVolume:t.quantizationVolume})}))}catch(e){return Promise.reject(e)}}))},t.fitPowerOfTwo=F,t.fitWithin=N,t.flatten=function(e=Mt){const t=v(Mt,e);return _(St,(function(e){try{function n(){s.debug(`${St}: Complete.`)}const i=e.getRoot(),s=e.getLogger(),o=new Set;for(const h of i.listSkins())for(const d of h.listJoints())o.add(d);const a=new Set;for(const p of i.listAnimations())for(const f of p.listChannels()){const m=f.getTargetNode();m&&"weights"!==f.getTargetPath()&&a.add(m)}const c=new Set,l=new Set;for(const g of i.listScenes())g.traverse((e=>{const t=e.getParentNode();t&&((o.has(t)||c.has(t))&&c.add(e),(a.has(t)||l.has(t))&&l.add(e))}));for(const A of i.listScenes())A.traverse((e=>{a.has(e)||c.has(e)||l.has(e)||W(e)}));a.size&&s.debug(`${St}: Flattening node hierarchies with TRS animation not yet supported.`);const u=function(){if(t.cleanup)return Promise.resolve(e.transform(be({propertyTypes:[r.PropertyType.NODE],keepLeaves:!1}))).then((function(){}))}();return Promise.resolve(u&&u.then?u.then(n):n())}catch(y){return Promise.reject(y)}}))},t.getBounds=function(e){return r.getBounds(e)},t.getGLPrimitiveCount=b,t.getMeshVertexCount=Ue,t.getNodeVertexCount=function(e,t){return Fe(e,t)},t.getPrimitiveVertexCount=ke,t.getSceneVertexCount=Ne,t.getTextureChannelMask=un,t.getTextureColorSpace=fe,t.inspect=function(e){return{scenes:Ct(e),meshes:It(e),materials:Rt(e),textures:Bt(e),animations:Pt(e)}},t.instance=function(e=Ut){const t=v(Ut,e);return _(Ft,(e=>{const n=e.getLogger(),i=e.getRoot();if(i.listAnimations().length)return n.warn(`${Ft}: Instancing is not currently supported for animated models.`),void n.debug(`${Ft}: Complete.`);const o=e.createExtension(s.EXTMeshGPUInstancing);let a=0,c=0;for(const s of i.listScenes()){const i=new Map;s.traverse((e=>{const t=e.getMesh();t&&(e.getExtension("EXT_mesh_gpu_instancing")||i.set(t,(i.get(t)||new Set).add(e)))}));const l=[];for(const n of Array.from(i.keys())){const u=Array.from(i.get(n));if(u.length<t.min)continue;if(u.some((e=>e.getSkin())))continue;if(n.listPrimitives().some(zt)&&u.some(Gt))continue;const h=jt(e,o,n,u.length),d=h.getAttribute("TRANSLATION"),p=h.getAttribute("ROTATION"),f=h.getAttribute("SCALE"),m=e.createNode().setMesh(n).setExtension("EXT_mesh_gpu_instancing",h);s.addChild(m);let g=!1,A=!1,y=!1;for(let e=0;e<u.length;e++){let t,n,i;const s=u[e];d.setElement(e,t=s.getWorldTranslation()),p.setElement(e,n=s.getWorldRotation()),f.setElement(e,i=s.getWorldScale()),r.MathUtils.eq(t,[0,0,0])||(g=!0),r.MathUtils.eq(n,[0,0,0,1])||(A=!0),r.MathUtils.eq(i,[1,1,1])||(y=!0)}if(g||d.dispose(),A||p.dispose(),y||f.dispose(),g||A||y){for(const e of u)e.setMesh(null),l.push(e);a++,c+=u.length}else m.dispose(),h.dispose()}kt(l,n)}a>0?n.info(`${Ft}: Created ${a} batches, with ${c} total instances.`):n.info(`${Ft}: No meshes with >=${t.min} parent nodes were found.`),0===o.listProperties().length&&o.dispose(),n.debug(`${Ft}: Complete.`)}))},t.isTransformPending=function(e,t,n){return!!e&&e.stack.lastIndexOf(t)<e.stack.lastIndexOf(n)},t.join=function(e=on){const t=v(on,e);return _($t,(function(e){try{function n(){i.debug(`${$t}: Complete.`)}const r=e.getRoot(),i=e.getLogger();for(const o of r.listScenes())an(e,o,t),o.traverse((n=>an(e,n,t)));const s=function(){if(t.cleanup)return Promise.resolve(e.transform(be({propertyTypes:[en,tn,nn,rn],keepAttributes:!0,keepIndices:!0,keepLeaves:!1}))).then((function(){}))}();return Promise.resolve(s&&s.then?s.then(n):n())}catch(a){return Promise.reject(a)}}))},t.joinPrimitives=Kt,t.listNodeScenes=H,t.listTextureChannels=function(e){const t=un(e),n=[];return t&r.TextureChannel.R&&n.push(r.TextureChannel.R),t&r.TextureChannel.G&&n.push(r.TextureChannel.G),t&r.TextureChannel.B&&n.push(r.TextureChannel.B),t&r.TextureChannel.A&&n.push(r.TextureChannel.A),n},t.listTextureInfo=function(e){const t=e.getGraph(),n=new Set;for(const i of t.listParentEdges(e)){const e=i.getParent(),s=i.getName()+"Info";for(const i of t.listChildEdges(e)){const e=i.getChild();e instanceof r.TextureInfo&&i.getName()===s&&n.add(e)}}return Array.from(n)},t.listTextureInfoByMaterial=me,t.listTextureSlots=ge,t.mergeDocuments=vt,t.meshopt=function(e){const t=v(jn,e),n=t.encoder;if(!n)throw new Error(`${Vn}: encoder dependency required — install "meshoptimizer".`);return _(Vn,(function(e){try{let r,i,o=t.quantizeNormal;return 0===e.getRoot().listAccessors().length?Promise.resolve():("medium"===t.level?(r=/.*/,i=/.*/):(r=/^(POSITION|TEXCOORD|JOINTS|WEIGHTS|COLOR)(_\d+)?$/,i=/^(POSITION|TEXCOORD|JOINTS|WEIGHTS|COLOR|NORMAL|TANGENT)(_\d+)?$/,o=Math.min(o,8)),Promise.resolve(e.transform(pn({encoder:n,target:"size"}),Sn({...t,pattern:r,patternTargets:i,quantizeNormal:o}))).then((function(){e.createExtension(s.EXTMeshoptCompression).setRequired(!0).setEncoderOptions({method:"medium"===t.level?s.EXTMeshoptCompression.EncoderMethod.QUANTIZE:s.EXTMeshoptCompression.EncoderMethod.FILTER})})))}catch(e){return Promise.reject(e)}}))},t.metalRough=function(e=Yn){return _(Xn,(function(e){try{function t(){o.dispose();for(const e of a)e&&1===e.listParents().length&&e.dispose();n.debug(`${Xn}: Complete.`)}const n=e.getLogger();if(!e.getRoot().listExtensionsUsed().map((e=>e.extensionName)).includes("KHR_materials_pbrSpecularGlossiness"))return n.warn(`${Xn}: KHR_materials_pbrSpecularGlossiness not found on document.`),Promise.resolve();const r=e.createExtension(s.KHRMaterialsIOR),i=e.createExtension(s.KHRMaterialsSpecular),o=e.createExtension(s.KHRMaterialsPBRSpecularGlossiness),a=new Set,c=Kn(e.getRoot().listMaterials(),(function(t){function n(){t.setExtension("KHR_materials_pbrSpecularGlossiness",null)}const s=t.getExtension("KHR_materials_pbrSpecularGlossiness");if(!s)return;const o=i.createSpecular().setSpecularFactor(1).setSpecularColorFactor(s.getSpecularFactor());a.add(s.getSpecularGlossinessTexture()),a.add(t.getBaseColorTexture()),a.add(t.getMetallicRoughnessTexture()),t.setBaseColorFactor(s.getDiffuseFactor()).setMetallicFactor(0).setRoughnessFactor(1).setExtension("KHR_materials_ior",r.createIOR().setIOR(1e3)).setExtension("KHR_materials_specular",o);const c=s.getDiffuseTexture();c&&(t.setBaseColorTexture(c),t.getBaseColorTextureInfo().copy(s.getDiffuseTextureInfo()));const l=s.getSpecularGlossinessTexture(),u=function(){if(l){const n=s.getSpecularGlossinessTextureInfo(),r=e.createTexture();return Promise.resolve(h(l,r,((e,t,n)=>{e.set(t,n,3,255)}))).then((function(){o.setSpecularTexture(r),o.setSpecularColorTexture(r),o.getSpecularTextureInfo().copy(n),o.getSpecularColorTextureInfo().copy(n);const i=s.getGlossinessFactor(),a=e.createTexture();return Promise.resolve(h(l,a,((e,t,n)=>{const r=255-Math.round(e.get(t,n,3)*i);e.set(t,n,0,0),e.set(t,n,1,r),e.set(t,n,2,0),e.set(t,n,3,255)}))).then((function(){t.setMetallicRoughnessTexture(a),t.getMetallicRoughnessTextureInfo().copy(n)}))}))}o.setSpecularColorFactor(s.getSpecularFactor()),t.setRoughnessFactor(1-s.getGlossinessFactor())}();return u&&u.then?u.then(n):n()}));return Promise.resolve(c&&c.then?c.then(t):t())}catch(l){return Promise.reject(l)}}))},t.moveToDocument=function(e,t,n,r){const i=bt(e,t,n,r);for(const e of n)e.dispose();return i},t.normals=function(e=rr){const t=v(rr,e);return _(nr,(function(e){try{const n=e.getLogger();let r=0;return Promise.resolve(e.transform(Zn())).then((function(){for(const i of e.getRoot().listMeshes())for(const s of i.listPrimitives()){const i=s.getAttribute("POSITION");let o=s.getAttribute("NORMAL");if(t.overwrite&&o)o.dispose();else if(o){n.debug(`${nr}: Skipping primitive: NORMAL found.`);continue}o=e.createAccessor().setArray(new Float32Array(3*i.getCount())).setType("VEC3");const a=[0,0,0],c=[0,0,0],l=[0,0,0];for(let e=0;e<i.getCount();e+=3){i.getElement(e+0,a),i.getElement(e+1,c),i.getElement(e+2,l);const t=ir(a,c,l);o.setElement(e+0,t),o.setElement(e+1,t),o.setElement(e+2,t)}s.setAttribute("NORMAL",o),r++}r?n.debug(`${nr}: Complete.`):n.warn(`${nr}: No qualifying primitives found. See debug output.`)}))}catch(e){return Promise.reject(e)}}))},t.palette=function(e=or){const t=v(or,e),n=Math.max(t.blockSize,1),s=Math.max(t.min,1);return _(sr,(function(e){try{function o(){function o(){function n(){function n(){function n(){a.debug(`${sr}: Complete.`)}let i=1;for(const t of l){const n=t.getMaterial(),s=p.get(n),o=(S.get(s)+.5)/m*(g-y)/g,a=t.getAttribute("POSITION"),c=a.getBuffer(),l=new Float32Array(2*a.getCount()).fill(o),u=e.createAccessor().setType("VEC2").setArray(l).setBuffer(c);let h;for(const e of M)e.equals(n,v)&&(h=e);if(!h){const e=(i++).toString().padStart(3,"0");h=n.clone().setName(`PaletteMaterial${e}`),x&&h.setBaseColorFactor([1,1,1,1]).setBaseColorTexture(x).getBaseColorTextureInfo().setMinFilter(r.TextureInfo.MinFilter.NEAREST).setMagFilter(r.TextureInfo.MagFilter.NEAREST),w&&h.setEmissiveFactor([1,1,1]).setEmissiveTexture(w).getEmissiveTextureInfo().setMinFilter(r.TextureInfo.MinFilter.NEAREST).setMagFilter(r.TextureInfo.MagFilter.NEAREST),E&&h.setMetallicFactor(1).setRoughnessFactor(1).setMetallicRoughnessTexture(E).getMetallicRoughnessTextureInfo().setMinFilter(r.TextureInfo.MinFilter.NEAREST).setMagFilter(r.TextureInfo.MagFilter.NEAREST),M.push(h)}t.setMaterial(h).setAttribute("TEXCOORD_0",u)}const s=function(){if(t.cleanup)return Promise.resolve(e.transform(be({propertyTypes:[r.PropertyType.MATERIAL]}))).then((function(){}))}();return s&&s.then?s.then(n):n()}const s=function(){if(E)return Promise.resolve(i.savePixels(_.metallicRoughness,I)).then((function(e){E.setImage(e).setMimeType(I)}))}();return s&&s.then?s.then(n):n()}const s=function(){if(w)return Promise.resolve(i.savePixels(_.emissive,I)).then((function(e){w.setImage(e).setMimeType(I)}))}();return s&&s.then?s.then(n):n()}const l=new Set,h=new Set;for(const e of c.listMeshes())for(const t of e.listPrimitives()){const e=t.getMaterial();e&&!t.getAttribute("TEXCOORD_0")&&(l.add(t),h.add(e))}const d=new Set,p=new Map,f={baseColor:new Set,emissive:new Set,metallicRoughness:new Set};for(const e of h){const t=cr(e.getBaseColorFactor().slice()),n=cr([...e.getEmissiveFactor(),1]),r=ar(e.getRoughnessFactor()),i=ar(e.getMetallicFactor()),s=`baseColor:${t},emissive:${n},metallicRoughness:${i}${r}`;f.baseColor.add(t),f.emissive.add(n),f.metallicRoughness.add(i+"+"+r),d.add(s),p.set(e,s)}const m=d.size;if(m<s)return void a.debug(`${sr}: Found <${s} unique material properties. Exiting.`);const g=lr(m*n),A=lr(n),y=g-m*n,_={baseColor:null,emissive:null,metallicRoughness:null},v=new Set(["name","extras"]),b=function(){return[].slice.call(arguments).forEach((e=>v.add(e)))};let x=null,w=null,E=null;if(f.baseColor.size>=s){const t="PaletteBaseColor";x=e.createTexture(t).setURI(`${t}.png`),_.baseColor=u.default(new Uint8Array(g*A*4),[g,A,4]),b("baseColorFactor","baseColorTexture","baseColorTextureInfo")}if(f.emissive.size>=s){const t="PaletteEmissive";w=e.createTexture(t).setURI(`${t}.png`),_.emissive=u.default(new Uint8Array(g*A*4),[g,A,4]),b("emissiveFactor","emissiveTexture","emissiveTextureInfo")}if(f.metallicRoughness.size>=s){const t="PaletteMetallicRoughness";E=e.createTexture(t).setURI(`${t}.png`),_.metallicRoughness=u.default(new Uint8Array(g*A*4),[g,A,4]),b("metallicFactor","roughnessFactor","metallicRoughnessTexture","metallicRoughnessTextureInfo")}if(!(x||w||E))return void a.debug(`${sr}: No material property has >=${s} unique values. Exiting.`);const T=new Set,S=new Map,M=[];let C=0;for(const e of h){const t=p.get(e);if(T.has(t))continue;const i=C++;if(_.baseColor){const t=_.baseColor,s=[...e.getBaseColorFactor()];r.ColorUtils.convertLinearToSRGB(s,s),ur(t,i,s,n)}if(_.emissive){const t=_.emissive,s=[...e.getEmissiveFactor(),1];r.ColorUtils.convertLinearToSRGB(s,s),ur(t,i,s,n)}if(_.metallicRoughness){const t=_.metallicRoughness,r=e.getMetallicFactor();ur(t,i,[0,e.getRoughnessFactor(),r,1],n)}T.add(t),S.set(t,i)}const I="image/png",R=function(){if(x)return Promise.resolve(i.savePixels(_.baseColor,I)).then((function(e){x.setImage(e).setMimeType(I)}))}();return R&&R.then?R.then(o):o()}const a=e.getLogger(),c=e.getRoot(),l=function(){if(!t.keepAttributes)return Promise.resolve(e.transform(be({propertyTypes:[r.PropertyType.ACCESSOR],keepAttributes:!1,keepIndices:!0,keepLeaves:!0}))).then((function(){}))}();return Promise.resolve(l&&l.then?l.then(o):o())}catch(h){return Promise.reject(h)}}))},t.partition=function(e=dr){const t=v(dr,e);return _(hr,(function(e){try{const n=e.getLogger();return!1!==t.meshes&&function(e,t,n){const r=new Set(e.getRoot().listBuffers().map((e=>e.getURI())));e.getRoot().listMeshes().forEach(((i,s)=>{if(Array.isArray(n.meshes)&&!n.meshes.includes(i.getName()))return void t.debug(`${hr}: Skipping mesh #${s} with name "${i.getName()}".`);t.debug(`${hr}: Creating buffer for mesh "${i.getName()}".`);const o=e.createBuffer(i.getName()).setURI(fr(i.getName()||"mesh",r));i.listPrimitives().forEach((e=>{const t=e.getIndices();t&&t.setBuffer(o),e.listAttributes().forEach((e=>e.setBuffer(o))),e.listTargets().forEach((e=>{e.listAttributes().forEach((e=>e.setBuffer(o)))}))}))}))}(e,n,t),!1!==t.animations&&function(e,t,n){const r=new Set(e.getRoot().listBuffers().map((e=>e.getURI())));e.getRoot().listAnimations().forEach(((i,s)=>{if(Array.isArray(n.animations)&&!n.animations.includes(i.getName()))return void t.debug(`${hr}: Skipping animation #${s} with name "${i.getName()}".`);t.debug(`${hr}: Creating buffer for animation "${i.getName()}".`);const o=e.createBuffer(i.getName()).setURI(fr(i.getName()||"animation",r));i.listSamplers().forEach((e=>{const t=e.getInput(),n=e.getOutput();t&&t.setBuffer(o),n&&n.setBuffer(o)}))}))}(e,n,t),t.meshes||t.animations||n.warn(`${hr}: Select animations or meshes to create a partition.`),Promise.resolve(e.transform(be({propertyTypes:[r.PropertyType.BUFFER]}))).then((function(){n.debug(`${hr}: Complete.`)}))}catch(e){return Promise.reject(e)}}))},t.prune=be,t.quantize=Sn,t.reorder=pn,t.resample=function(e=Tr){const t=v(Tr,e);return _(wr,(function(e){try{const n=new Set,i=e.getRoot().listAccessors().length,s=e.getLogger(),o=t.ready,a=t.resample;return Promise.resolve(o).then((function(){function o(){s.debug(`${wr}: Complete.`)}for(const r of e.getRoot().listAnimations()){const e=new Map;for(const t of r.listChannels())e.set(t.getSampler(),t.getTargetPath());for(const i of r.listSamplers()){const r=i.getInterpolation();if("STEP"===r||"LINEAR"===r){const s=i.getInput(),o=i.getOutput();n.add(s),n.add(o);const c=Sr(s.getArray(),s.getComponentType(),s.getNormalized()),l=Sr(o.getArray(),o.getComponentType(),o.getNormalized()),u=l.length/c.length,h=c.length;let d;if(d="STEP"===r?a(c,l,"step",t.tolerance):"rotation"===e.get(i)?a(c,l,"slerp",t.tolerance):a(c,l,"lerp",t.tolerance),d<h){const e=s.getArray(),t=o.getArray(),n=Mr(new Float32Array(c.buffer,c.byteOffset,d),s.getComponentType(),s.getNormalized()),r=Mr(new Float32Array(l.buffer,l.byteOffset,d*u),o.getComponentType(),o.getNormalized());s.setArray(Er),o.setArray(Er),i.setInput(s.clone().setArray(n)),i.setOutput(o.clone().setArray(r)),s.setArray(e),o.setArray(t)}}}}for(const e of Array.from(n.values())){e.listParents().some((e=>!(e instanceof r.Root)))||e.dispose()}const c=e.getRoot().listAccessors().length,l=function(){if(c>i&&t.cleanup)return Promise.resolve(e.transform(oe({propertyTypes:[r.PropertyType.ACCESSOR]}))).then((function(){}))}();return l&&l.then?l.then(o):o()}))}catch(e){return Promise.reject(e)}}))},t.sequence=function(e=Ir){const t=v(Ir,e);return _(Cr,(e=>{const n=e.getLogger(),i=e.getRoot(),s=t.fps,o=i.listNodes().filter((e=>e.getName().match(t.pattern)));t.sort&&o.sort(((e,t)=>e.getName()>t.getName()?1:-1));const a=e.createAnimation(t.name),c=i.listBuffers()[0];o.forEach(((t,n)=>{let i,l;0===n?(i=[n/s,(n+1)/s],l=[1,1,1,0,0,0]):n===o.length-1?(i=[(n-1)/s,n/s],l=[0,0,0,1,1,1]):(i=[(n-1)/s,n/s,(n+1)/s],l=[0,0,0,1,1,1,0,0,0]);const u=e.createAccessor().setArray(new Float32Array(i)).setBuffer(c),h=e.createAccessor().setArray(new Float32Array(l)).setBuffer(c).setType(r.Accessor.Type.VEC3),d=e.createAnimationSampler().setInterpolation(r.AnimationSampler.Interpolation.STEP).setInput(u).setOutput(h),p=e.createAnimationChannel().setTargetNode(t).setTargetPath(r.AnimationChannel.TargetPath.SCALE).setSampler(d);a.addSampler(d).addChannel(p)})),n.debug(`${Cr}: Complete.`)}))},t.simplify=function(e){const n=v(Ur,e),i=n.simplifier;if(!i)throw new Error(`${Rr}: simplifier dependency required — install "meshoptimizer".`);return _(Rr,(function(e){try{const s=e.getLogger();return Promise.resolve(i.ready).then((function(){return Promise.resolve(e.transform(Xe({overwrite:!1,cleanup:n.cleanup}))).then((function(){function o(){s.debug(`${Rr}: Complete.`)}let a=0;for(const r of e.getRoot().listMeshes()){for(const e of r.listPrimitives()){const r=e.getMode();r===Lr||r===Nr||r===Fr||e.getMode()===Br&&i.simplifyPoints?(kr(e,n),0===ke(e,t.VertexCountMethod.RENDER)&&e.dispose()):a++}0===r.listPrimitives().length&&r.dispose()}a>0&&s.warn(`${Rr}: Skipping simplification of ${a} primitives: Unsupported draw mode.`);const c=function(){if(n.cleanup)return Promise.resolve(e.transform(be({propertyTypes:[r.PropertyType.ACCESSOR,r.PropertyType.NODE],keepAttributes:!0,keepIndices:!0,keepLeaves:!1}),oe({propertyTypes:[r.PropertyType.ACCESSOR]}))).then((function(){}))}();return c&&c.then?c.then(o):o()}))}))}catch(e){return Promise.reject(e)}}))},t.simplifyPrimitive=kr,t.sortPrimitiveWeights=fn,t.sparse=function(e=Gr){const t=v(Gr,e).ratio;if(t<0||t>1)throw new Error(`${zr}: Ratio must be between 0 and 1.`);return _(zr,(e=>{const n=e.getRoot(),i=e.getLogger();let s=0;for(const e of n.listAccessors()){const n=e.getCount(),i=Array(e.getElementSize()).fill(0),o=Array(e.getElementSize()).fill(0);let a=0;for(let s=0;s<n&&(e.getElement(s,o),r.MathUtils.eq(o,i,0)||a++,!(a/n>=t));s++);const c=a/n<t;c!==e.getSparse()&&(e.setSparse(c),s++)}i.debug(`${zr}: Updated ${s} accessors.`),i.debug(`${zr}: Complete.`)}))},t.tangents=function(e=$r){const t=v($r,e);if(!t.generateTangents)throw new Error(`${Jr}: generateTangents callback required — install "mikktspace".`);return _(Jr,(e=>{const n=e.getLogger(),i=new Map,s=new Map;let o=0;for(const a of e.getRoot().listMeshes()){const c=a.getName(),l=a.listPrimitives();for(let a=0;a<l.length;a++){const u=l[a];if(!ei(u,n,c,a,t.overwrite))continue;const h=Zr(u),d=u.getAttribute("POSITION").getArray(),p=u.getAttribute("NORMAL").getArray(),f=u.getAttribute(h).getArray(),m=i.get(d)||r.uuid();i.set(d,m);const g=i.get(p)||r.uuid();i.set(p,g);const A=i.get(f)||r.uuid();i.set(f,A);const y=u.getAttribute("TANGENT");y&&2===y.listParents().length&&y.dispose();const _=`${m}|${g}|${A}`;let v=s.get(_);if(v){n.debug(`${Jr}: Found cache for primitive ${a} of mesh "${c}".`),u.setAttribute("TANGENT",v),o++;continue}n.debug(`${Jr}: Generating for primitive ${a} of mesh "${c}".`);const b=u.getAttribute("POSITION").getBuffer(),x=t.generateTangents(d instanceof Float32Array?d:new Float32Array(d),p instanceof Float32Array?p:new Float32Array(p),f instanceof Float32Array?f:new Float32Array(f));for(let e=3;e<x.length;e+=4)x[e]*=-1;v=e.createAccessor().setBuffer(b).setArray(x).setType("VEC4"),u.setAttribute("TANGENT",v),s.set(_,v),o++}}o?n.debug(`${Jr}: Complete.`):n.warn(`${Jr}: No qualifying primitives found. See debug output.`)}))},t.textureCompress=function(e){const t=v(qr,e),n=t.targetFormat,i=t.pattern,o=t.formats,a=t.slots;return _(Vr,(function(e){try{const c=e.getLogger(),l=e.getRoot().listTextures();return Promise.resolve(Promise.all(l.map((function(s,l){try{const u=ge(s),h=un(s),d=s.getURI()||s.getName()||`${l+1}/${e.getRoot().listTextures().length}`,p=`${Vr}(${d})`;if(!Hr.includes(s.getMimeType()))return c.debug(`${p}: Skipping, unsupported texture type "${s.getMimeType()}".`),Promise.resolve();if(i&&!i.test(s.getName())&&!i.test(s.getURI()))return c.debug(`${p}: Skipping, excluded by "pattern" parameter.`),Promise.resolve();if(o&&!o.test(s.getMimeType()))return c.debug(`${p}: Skipping, "${s.getMimeType()}" excluded by "formats" parameter.`),Promise.resolve();if(a&&u.length&&!u.some((e=>a.test(e))))return c.debug(`${p}: Skipping, [${u.join(", ")}] excluded by "slots" parameter.`),Promise.resolve();if("jpeg"===t.targetFormat&&h&r.TextureChannel.A)return c.warn(`${p}: Skipping, [${u.join(", ")}] requires alpha channel.`),Promise.resolve();const f=Xr(s),m=n||f;c.debug(`${p}: Format = ${f} → ${m}`),c.debug(`${p}: Slots = [${u.join(", ")}]`);const g=s.getImage(),A=g.byteLength;return Promise.resolve(jr(s,t)).then((function(){const e=s.getImage(),t=e.byteLength,n=g===e?" (SKIPPED":"";c.debug(`${p}: Size = ${w(A)} → ${w(t)}${n}`)}))}catch(e){return Promise.reject(e)}})))).then((function(){const t=e.createExtension(s.EXTTextureWebP);l.some((e=>"image/webp"===e.getMimeType()))?t.setRequired(!0):t.dispose();const n=e.createExtension(s.EXTTextureAVIF);l.some((e=>"image/avif"===e.getMimeType()))?n.setRequired(!0):n.dispose(),c.debug(`${Vr}: Complete.`)}))}catch(e){return Promise.reject(e)}}))},t.transformMesh=tt,t.transformPrimitive=Je,t.uninstance=function(e=ni){return _(ti,(function(e){try{const t=e.getLogger(),n=e.getRoot(),r=new Set;for(const t of e.getRoot().listNodes()){const e=t.getExtension("EXT_mesh_gpu_instancing");if(e){for(const e of ri(t))t.addChild(e);for(const t of e.listAttributes())r.add(t);t.setMesh(null),e.dispose()}}for(const e of r)e.listParents().every((e=>e===n))&&e.dispose();return e.createExtension(s.EXTMeshGPUInstancing).dispose(),t.debug(`${ti}: Complete.`),Promise.resolve()}catch(e){return Promise.reject(e)}}))},t.unlit=function(){return e=>{const t=e.createExtension(s.KHRMaterialsUnlit).createUnlit();e.getRoot().listMaterials().forEach((e=>{e.setExtension("KHR_materials_unlit",t)}))}},t.unpartition=function(e=oi){return _(si,(function(e){try{const t=e.getLogger(),n=e.getRoot().listBuffers()[0];return e.getRoot().listAccessors().forEach((e=>e.setBuffer(n))),e.getRoot().listBuffers().forEach(((e,t)=>t>0?e.dispose():null)),t.debug(`${si}: Complete.`),Promise.resolve()}catch(e){return Promise.reject(e)}}))},t.unweld=Zn,t.unweldPrimitive=er,t.unwrap=function(e){const t={...ci,...e},n=t.watlas;if(!n)throw new Error(`${ai}: dependency required — install "watlas".`);return _(ai,(function(e){try{return Promise.resolve(n.Initialize()).then((function(){switch(t.groupBy){case"primitive":for(const n of e.getRoot().listMeshes())for(const e of n.listPrimitives())li([e],t);break;case"mesh":for(const n of e.getRoot().listMeshes())li(n.listPrimitives(),t);break;case"scene":{const n=[],r=[];for(const t of e.getRoot().listMeshes()){const e=pi(t);for(const i of t.listPrimitives())n.push(i),r.push(e)}li(n,{...t,weights:r});break}}e.getLogger().debug(`${ai}: Complete.`)}))}catch(e){return Promise.reject(e)}}))},t.unwrapPrimitives=li,t.vertexColorSpace=function(e){return _(fi,(t=>{const n=t.getLogger(),r=(e.inputColorSpace||"").toLowerCase();if("srgb-linear"===r)return void n.info(`${fi}: Vertex colors already linear. Skipping conversion.`);if("srgb"!==r)return void n.error(`${fi}: Unknown input color space "${r}" – should be "srgb" or "srgb-linear". Skipping conversion.`);const i=new Set;function s(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function o(e){const t=[0,0,0];let n;for(let r=0;n=e.getAttribute(`COLOR_${r}`);r++)if(!i.has(n)){for(let e=0;e<n.getCount();e++)n.getElement(e,t),t[0]=s(t[0]),t[1]=s(t[1]),t[2]=s(t[2]),n.setElement(e,t);i.add(n)}}t.getRoot().listMeshes().forEach((e=>e.listPrimitives().forEach(o))),n.debug(`${fi}: Complete.`)}))},t.weld=Xe,t.weldPrimitive=Ke},484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,r=Object.freeze({Linear:Object.freeze({None:function(e){return e},In:function(e){return e},Out:function(e){return e},InOut:function(e){return e}}),Quadratic:Object.freeze({In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}}),Cubic:Object.freeze({In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}}),Quartic:Object.freeze({In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}}),Quintic:Object.freeze({In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}}),Sinusoidal:Object.freeze({In:function(e){return 1-Math.sin((1-e)*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.sin(Math.PI*(.5-e)))}}),Exponential:Object.freeze({In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}}),Circular:Object.freeze({In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}}),Elastic:Object.freeze({In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}}),Back:Object.freeze({In:function(e){var t=1.70158;return 1===e?1:e*e*((t+1)*e-t)},Out:function(e){var t=1.70158;return 0===e?0:--e*e*((t+1)*e+t)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}}),Bounce:Object.freeze({In:function(e){return 1-r.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*r.Bounce.In(2*e):.5*r.Bounce.Out(2*e-1)+.5}}),generatePow:function(e){return void 0===e&&(e=4),e=(e=e<Number.EPSILON?Number.EPSILON:e)>1e4?1e4:e,{In:function(t){return Math.pow(t,e)},Out:function(t){return 1-Math.pow(1-t,e)},InOut:function(t){return t<.5?Math.pow(2*t,e)/2:(1-Math.pow(2-2*t,e))/2+.5}}}}),i=function(){return performance.now()},s=function(){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}return e.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map((function(t){return e._tweens[t]}))},e.prototype.removeAll=function(){this._tweens={}},e.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},e.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},e.prototype.update=function(e,t){void 0===e&&(e=i()),void 0===t&&(t=!1);var n=Object.keys(this._tweens);if(0===n.length)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],o=!t;s&&!1===s.update(e,o)&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},e}(),o={Linear:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),s=o.Utils.Linear;return t<0?s(e[0],e[1],r):t>1?s(e[n],e[n-1],n-r):s(e[i],e[i+1>n?n:i+1],r-i)},Bezier:function(e,t){for(var n=0,r=e.length-1,i=Math.pow,s=o.Utils.Bernstein,a=0;a<=r;a++)n+=i(1-t,r-a)*i(t,a)*e[a]*s(r,a);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,i=Math.floor(r),s=o.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(i=Math.floor(r=n*(1+t))),s(e[(i-1+n)%n],e[i],e[(i+1)%n],e[(i+2)%n],r-i)):t<0?e[0]-(s(e[0],e[0],e[1],e[1],-r)-e[0]):t>1?e[n]-(s(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):s(e[i?i-1:0],e[i],e[n<i+1?n:i+1],e[n<i+2?n:i+2],r-i)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=o.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(n=[1],function(e){var t=1;if(n[e])return n[e];for(var r=e;r>1;r--)t*=r;return n[e]=t,t}),CatmullRom:function(e,t,n,r,i){var s=.5*(n-e),o=.5*(r-t),a=i*i;return(2*t-2*n+s+o)*(i*a)+(-3*t+3*n-2*s-o)*a+s*i+t}}},a=function(){function e(){}return e.nextId=function(){return e._nextId++},e._nextId=0,e}(),c=new s,l=function(){function e(e,t){void 0===t&&(t=c),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=r.Linear.None,this._interpolationFunction=o.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=a.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return e.prototype.getId=function(){return this._id},e.prototype.isPlaying=function(){return this._isPlaying},e.prototype.isPaused=function(){return this._isPaused},e.prototype.getDuration=function(){return this._duration},e.prototype.to=function(e,t){if(void 0===t&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},e.prototype.duration=function(e){return void 0===e&&(e=1e3),this._duration=e<0?0:e,this},e.prototype.dynamic=function(e){return void 0===e&&(e=!1),this._isDynamic=e,this},e.prototype.start=function(e,t){if(void 0===e&&(e=i()),void 0===t&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed)for(var n in this._reversed=!1,this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n];if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},e.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},e.prototype._setupProperties=function(e,t,n,r,i){for(var s in n){var o=e[s],a=Array.isArray(o),c=a?"array":typeof o,l=!a&&Array.isArray(n[s]);if("undefined"!==c&&"function"!==c){if(l){if(0===(g=n[s]).length)continue;for(var u=[o],h=0,d=g.length;h<d;h+=1){var p=this._handleRelativeValue(o,g[h]);if(isNaN(p)){l=!1,console.warn("Found invalid interpolation list. Skipping.");break}u.push(p)}l&&(n[s]=u)}if("object"!==c&&!a||!o||l)(void 0===t[s]||i)&&(t[s]=o),a||(t[s]*=1),r[s]=l?n[s].slice().reverse():t[s]||0;else{t[s]=a?[]:{};var f=o;for(var m in f)t[s][m]=f[m];r[s]=a?[]:{};var g=n[s];if(!this._isDynamic){var A={};for(var m in g)A[m]=g[m];n[s]=g=A}this._setupProperties(f,t[s],g,r[s],i)}}}},e.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},e.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},e.prototype.pause=function(e){return void 0===e&&(e=i()),this._isPaused||!this._isPlaying||(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this)),this},e.prototype.resume=function(e){return void 0===e&&(e=i()),this._isPaused&&this._isPlaying?(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this):this},e.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},e.prototype.group=function(e){return void 0===e&&(e=c),this._group=e,this},e.prototype.delay=function(e){return void 0===e&&(e=0),this._delayTime=e,this},e.prototype.repeat=function(e){return void 0===e&&(e=0),this._initialRepeat=e,this._repeat=e,this},e.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},e.prototype.yoyo=function(e){return void 0===e&&(e=!1),this._yoyo=e,this},e.prototype.easing=function(e){return void 0===e&&(e=r.Linear.None),this._easingFunction=e,this},e.prototype.interpolation=function(e){return void 0===e&&(e=o.Linear),this._interpolationFunction=e,this},e.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},e.prototype.onStart=function(e){return this._onStartCallback=e,this},e.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},e.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},e.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},e.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},e.prototype.onStop=function(e){return this._onStopCallback=e,this},e.prototype.update=function(e,t){var n,r,s=this;if(void 0===e&&(e=i()),void 0===t&&(t=!0),this._isPaused)return!0;var o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;!1===this._onStartCallbackFired&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),!1===this._onEveryStartCallbackFired&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,c=this._duration+(null!==(n=this._repeatDelayTime)&&void 0!==n?n:this._delayTime),l=this._duration+this._repeat*c,u=function(){if(0===s._duration)return 1;if(a>l)return 1;var e=Math.trunc(a/c),t=a-e*c,n=Math.min(t/s._duration,1);return 0===n&&a===s._duration?1:n}(),h=this._easingFunction(u);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,h),this._onUpdateCallback&&this._onUpdateCallback(this._object,u),0===this._duration||a>=this._duration){if(this._repeat>0){var d=Math.min(Math.trunc((a-this._duration)/c)+1,this._repeat);for(r in isFinite(this._repeat)&&(this._repeat-=d),this._valuesStartRepeat)this._yoyo||"string"!=typeof this._valuesEnd[r]||(this._valuesStartRepeat[r]=this._valuesStartRepeat[r]+parseFloat(this._valuesEnd[r])),this._yoyo&&this._swapEndStartRepeatValues(r),this._valuesStart[r]=this._valuesStartRepeat[r];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=c*d,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var p=0,f=this._chainedTweens.length;p<f;p++)this._chainedTweens[p].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},e.prototype._updateProperties=function(e,t,n,r){for(var i in n)if(void 0!==t[i]){var s=t[i]||0,o=n[i],a=Array.isArray(e[i]),c=Array.isArray(o);!a&&c?e[i]=this._interpolationFunction(o,r):"object"==typeof o&&o?this._updateProperties(e[i],s,o,r):"number"==typeof(o=this._handleRelativeValue(s,o))&&(e[i]=s+(o-s)*r)}},e.prototype._handleRelativeValue=function(e,t){return"string"!=typeof t?t:"+"===t.charAt(0)||"-"===t.charAt(0)?e+parseFloat(t):parseFloat(t)},e.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];this._valuesStartRepeat[e]="string"==typeof n?this._valuesStartRepeat[e]+parseFloat(n):this._valuesEnd[e],this._valuesEnd[e]=t},e}(),u="23.1.3",h=a.nextId,d=c,p=d.getAll.bind(d),f=d.removeAll.bind(d),m=d.add.bind(d),g=d.remove.bind(d),A=d.update.bind(d),y={Easing:r,Group:s,Interpolation:o,now:i,Sequence:a,nextId:h,Tween:l,VERSION:u,getAll:p,removeAll:f,add:m,remove:g,update:A};t.Easing=r,t.Group=s,t.Interpolation=o,t.Sequence=a,t.Tween=l,t.VERSION=u,t.add=m,t.default=y,t.getAll=p,t.nextId=h,t.now=i,t.remove=g,t.removeAll=f,t.update=A},6866:(e,t)=>{function n(){return{vkFormat:0,typeSize:1,pixelWidth:0,pixelHeight:0,pixelDepth:0,layerCount:0,faceCount:1,supercompressionScheme:0,levels:[],dataFormatDescriptor:[{vendorId:0,descriptorType:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],keyValue:{},globalData:null}}class r{constructor(e,t,n,r){this._dataView=void 0,this._littleEndian=void 0,this._offset=void 0,this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint8Array(e){const t=new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+this._offset,e);return this._offset+=e,t}_skip(e){return this._offset+=e,this}_scan(e,t=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}const i=new Uint8Array([0]),s=[171,75,84,88,32,50,48,187,13,10,26,10];function o(e){return(new TextEncoder).encode(e)}function a(e){return(new TextDecoder).decode(e)}function c(e){let t=0;for(const n of e)t+=n.byteLength;const n=new Uint8Array(t);let r=0;for(const t of e)n.set(new Uint8Array(t),r),r+=t.byteLength;return n}function l(e,t=4){return Math.ceil(e/t)*t-e}function u(e){return e.levels[0].levelData.byteLength/function(e,t){let n=1;const r=[e.pixelWidth,e.pixelHeight,e.pixelDepth],i=function(e){const[t,n,r]=e.dataFormatDescriptor[0].texelBlockDimension;return[t+1,n+1,r+1]}(e);for(let e=0;e<3;e++)if(r[e]>0){const s=Math.ceil(Math.floor(r[e]*2**-t)/i[e]);n*=Math.max(1,s)}e.layerCount>0&&(n*=e.layerCount);e.faceCount>0&&(n*=e.faceCount);return n}(e,0)}const h={keepWriter:!1};t.KHR_DF_CHANNEL_RGBSDA_ALPHA=15,t.KHR_DF_CHANNEL_RGBSDA_BLUE=2,t.KHR_DF_CHANNEL_RGBSDA_DEPTH=14,t.KHR_DF_CHANNEL_RGBSDA_GREEN=1,t.KHR_DF_CHANNEL_RGBSDA_RED=0,t.KHR_DF_CHANNEL_RGBSDA_STENCIL=13,t.KHR_DF_FLAG_ALPHA_PREMULTIPLIED=1,t.KHR_DF_FLAG_ALPHA_STRAIGHT=0,t.KHR_DF_KHR_DESCRIPTORTYPE_BASICFORMAT=0,t.KHR_DF_MODEL_ASTC=162,t.KHR_DF_MODEL_ETC1=160,t.KHR_DF_MODEL_ETC1S=163,t.KHR_DF_MODEL_ETC2=161,t.KHR_DF_MODEL_RGBSDA=1,t.KHR_DF_MODEL_UASTC=166,t.KHR_DF_MODEL_UNSPECIFIED=0,t.KHR_DF_PRIMARIES_ACES=6,t.KHR_DF_PRIMARIES_ACESCC=7,t.KHR_DF_PRIMARIES_ADOBERGB=11,t.KHR_DF_PRIMARIES_BT2020=4,t.KHR_DF_PRIMARIES_BT601_EBU=2,t.KHR_DF_PRIMARIES_BT601_SMPTE=3,t.KHR_DF_PRIMARIES_BT709=1,t.KHR_DF_PRIMARIES_CIEXYZ=5,t.KHR_DF_PRIMARIES_DISPLAYP3=10,t.KHR_DF_PRIMARIES_NTSC1953=8,t.KHR_DF_PRIMARIES_PAL525=9,t.KHR_DF_PRIMARIES_UNSPECIFIED=0,t.KHR_DF_SAMPLE_DATATYPE_EXPONENT=32,t.KHR_DF_SAMPLE_DATATYPE_FLOAT=128,t.KHR_DF_SAMPLE_DATATYPE_LINEAR=16,t.KHR_DF_SAMPLE_DATATYPE_SIGNED=64,t.KHR_DF_TRANSFER_ACESCC=16,t.KHR_DF_TRANSFER_ACESCCT=17,t.KHR_DF_TRANSFER_ADOBERGB=18,t.KHR_DF_TRANSFER_BT1886=7,t.KHR_DF_TRANSFER_DCIP3=12,t.KHR_DF_TRANSFER_HLG_EOTF=9,t.KHR_DF_TRANSFER_HLG_OETF=8,t.KHR_DF_TRANSFER_ITU=3,t.KHR_DF_TRANSFER_LINEAR=1,t.KHR_DF_TRANSFER_NTSC=4,t.KHR_DF_TRANSFER_PAL625_EOTF=14,t.KHR_DF_TRANSFER_PAL_OETF=13,t.KHR_DF_TRANSFER_PQ_EOTF=10,t.KHR_DF_TRANSFER_PQ_OETF=11,t.KHR_DF_TRANSFER_SLOG=5,t.KHR_DF_TRANSFER_SLOG2=6,t.KHR_DF_TRANSFER_SRGB=2,t.KHR_DF_TRANSFER_ST240=15,t.KHR_DF_TRANSFER_UNSPECIFIED=0,t.KHR_DF_VENDORID_KHRONOS=0,t.KHR_DF_VERSION=2,t.KHR_SUPERCOMPRESSION_BASISLZ=1,t.KHR_SUPERCOMPRESSION_NONE=0,t.KHR_SUPERCOMPRESSION_ZLIB=3,t.KHR_SUPERCOMPRESSION_ZSTD=2,t.VK_FORMAT_A1R5G5B5_UNORM_PACK16=8,t.VK_FORMAT_A2B10G10R10_SINT_PACK32=69,t.VK_FORMAT_A2B10G10R10_SNORM_PACK32=65,t.VK_FORMAT_A2B10G10R10_UINT_PACK32=68,t.VK_FORMAT_A2B10G10R10_UNORM_PACK32=64,t.VK_FORMAT_A2R10G10B10_SINT_PACK32=63,t.VK_FORMAT_A2R10G10B10_SNORM_PACK32=59,t.VK_FORMAT_A2R10G10B10_UINT_PACK32=62,t.VK_FORMAT_A2R10G10B10_UNORM_PACK32=58,t.VK_FORMAT_A4B4G4R4_UNORM_PACK16_EXT=1000340001,t.VK_FORMAT_A4R4G4B4_UNORM_PACK16_EXT=100034e4,t.VK_FORMAT_ASTC_10x10_SFLOAT_BLOCK_EXT=1000066011,t.VK_FORMAT_ASTC_10x10_SRGB_BLOCK=180,t.VK_FORMAT_ASTC_10x10_UNORM_BLOCK=179,t.VK_FORMAT_ASTC_10x5_SFLOAT_BLOCK_EXT=1000066008,t.VK_FORMAT_ASTC_10x5_SRGB_BLOCK=174,t.VK_FORMAT_ASTC_10x5_UNORM_BLOCK=173,t.VK_FORMAT_ASTC_10x6_SFLOAT_BLOCK_EXT=1000066009,t.VK_FORMAT_ASTC_10x6_SRGB_BLOCK=176,t.VK_FORMAT_ASTC_10x6_UNORM_BLOCK=175,t.VK_FORMAT_ASTC_10x8_SFLOAT_BLOCK_EXT=1000066010,t.VK_FORMAT_ASTC_10x8_SRGB_BLOCK=178,t.VK_FORMAT_ASTC_10x8_UNORM_BLOCK=177,t.VK_FORMAT_ASTC_12x10_SFLOAT_BLOCK_EXT=1000066012,t.VK_FORMAT_ASTC_12x10_SRGB_BLOCK=182,t.VK_FORMAT_ASTC_12x10_UNORM_BLOCK=181,t.VK_FORMAT_ASTC_12x12_SFLOAT_BLOCK_EXT=1000066013,t.VK_FORMAT_ASTC_12x12_SRGB_BLOCK=184,t.VK_FORMAT_ASTC_12x12_UNORM_BLOCK=183,t.VK_FORMAT_ASTC_4x4_SFLOAT_BLOCK_EXT=1000066e3,t.VK_FORMAT_ASTC_4x4_SRGB_BLOCK=158,t.VK_FORMAT_ASTC_4x4_UNORM_BLOCK=157,t.VK_FORMAT_ASTC_5x4_SFLOAT_BLOCK_EXT=1000066001,t.VK_FORMAT_ASTC_5x4_SRGB_BLOCK=160,t.VK_FORMAT_ASTC_5x4_UNORM_BLOCK=159,t.VK_FORMAT_ASTC_5x5_SFLOAT_BLOCK_EXT=1000066002,t.VK_FORMAT_ASTC_5x5_SRGB_BLOCK=162,t.VK_FORMAT_ASTC_5x5_UNORM_BLOCK=161,t.VK_FORMAT_ASTC_6x5_SFLOAT_BLOCK_EXT=1000066003,t.VK_FORMAT_ASTC_6x5_SRGB_BLOCK=164,t.VK_FORMAT_ASTC_6x5_UNORM_BLOCK=163,t.VK_FORMAT_ASTC_6x6_SFLOAT_BLOCK_EXT=1000066004,t.VK_FORMAT_ASTC_6x6_SRGB_BLOCK=166,t.VK_FORMAT_ASTC_6x6_UNORM_BLOCK=165,t.VK_FORMAT_ASTC_8x5_SFLOAT_BLOCK_EXT=1000066005,t.VK_FORMAT_ASTC_8x5_SRGB_BLOCK=168,t.VK_FORMAT_ASTC_8x5_UNORM_BLOCK=167,t.VK_FORMAT_ASTC_8x6_SFLOAT_BLOCK_EXT=1000066006,t.VK_FORMAT_ASTC_8x6_SRGB_BLOCK=170,t.VK_FORMAT_ASTC_8x6_UNORM_BLOCK=169,t.VK_FORMAT_ASTC_8x8_SFLOAT_BLOCK_EXT=1000066007,t.VK_FORMAT_ASTC_8x8_SRGB_BLOCK=172,t.VK_FORMAT_ASTC_8x8_UNORM_BLOCK=171,t.VK_FORMAT_B10G11R11_UFLOAT_PACK32=122,t.VK_FORMAT_B10X6G10X6R10X6G10X6_422_UNORM_4PACK16=1000156011,t.VK_FORMAT_B12X4G12X4R12X4G12X4_422_UNORM_4PACK16=1000156021,t.VK_FORMAT_B4G4R4A4_UNORM_PACK16=3,t.VK_FORMAT_B5G5R5A1_UNORM_PACK16=7,t.VK_FORMAT_B5G6R5_UNORM_PACK16=5,t.VK_FORMAT_B8G8R8A8_SINT=49,t.VK_FORMAT_B8G8R8A8_SNORM=45,t.VK_FORMAT_B8G8R8A8_SRGB=50,t.VK_FORMAT_B8G8R8A8_UINT=48,t.VK_FORMAT_B8G8R8A8_UNORM=44,t.VK_FORMAT_B8G8R8_SINT=35,t.VK_FORMAT_B8G8R8_SNORM=31,t.VK_FORMAT_B8G8R8_SRGB=36,t.VK_FORMAT_B8G8R8_UINT=34,t.VK_FORMAT_B8G8R8_UNORM=30,t.VK_FORMAT_BC1_RGBA_SRGB_BLOCK=134,t.VK_FORMAT_BC1_RGBA_UNORM_BLOCK=133,t.VK_FORMAT_BC1_RGB_SRGB_BLOCK=132,t.VK_FORMAT_BC1_RGB_UNORM_BLOCK=131,t.VK_FORMAT_BC2_SRGB_BLOCK=136,t.VK_FORMAT_BC2_UNORM_BLOCK=135,t.VK_FORMAT_BC3_SRGB_BLOCK=138,t.VK_FORMAT_BC3_UNORM_BLOCK=137,t.VK_FORMAT_BC4_SNORM_BLOCK=140,t.VK_FORMAT_BC4_UNORM_BLOCK=139,t.VK_FORMAT_BC5_SNORM_BLOCK=142,t.VK_FORMAT_BC5_UNORM_BLOCK=141,t.VK_FORMAT_BC6H_SFLOAT_BLOCK=144,t.VK_FORMAT_BC6H_UFLOAT_BLOCK=143,t.VK_FORMAT_BC7_SRGB_BLOCK=146,t.VK_FORMAT_BC7_UNORM_BLOCK=145,t.VK_FORMAT_D16_UNORM=124,t.VK_FORMAT_D16_UNORM_S8_UINT=128,t.VK_FORMAT_D24_UNORM_S8_UINT=129,t.VK_FORMAT_D32_SFLOAT=126,t.VK_FORMAT_D32_SFLOAT_S8_UINT=130,t.VK_FORMAT_E5B9G9R9_UFLOAT_PACK32=123,t.VK_FORMAT_EAC_R11G11_SNORM_BLOCK=156,t.VK_FORMAT_EAC_R11G11_UNORM_BLOCK=155,t.VK_FORMAT_EAC_R11_SNORM_BLOCK=154,t.VK_FORMAT_EAC_R11_UNORM_BLOCK=153,t.VK_FORMAT_ETC2_R8G8B8A1_SRGB_BLOCK=150,t.VK_FORMAT_ETC2_R8G8B8A1_UNORM_BLOCK=149,t.VK_FORMAT_ETC2_R8G8B8A8_SRGB_BLOCK=152,t.VK_FORMAT_ETC2_R8G8B8A8_UNORM_BLOCK=151,t.VK_FORMAT_ETC2_R8G8B8_SRGB_BLOCK=148,t.VK_FORMAT_ETC2_R8G8B8_UNORM_BLOCK=147,t.VK_FORMAT_G10X6B10X6G10X6R10X6_422_UNORM_4PACK16=1000156010,t.VK_FORMAT_G12X4B12X4G12X4R12X4_422_UNORM_4PACK16=1000156020,t.VK_FORMAT_PVRTC1_2BPP_SRGB_BLOCK_IMG=1000054004,t.VK_FORMAT_PVRTC1_2BPP_UNORM_BLOCK_IMG=1000054e3,t.VK_FORMAT_PVRTC1_4BPP_SRGB_BLOCK_IMG=1000054005,t.VK_FORMAT_PVRTC1_4BPP_UNORM_BLOCK_IMG=1000054001,t.VK_FORMAT_PVRTC2_2BPP_SRGB_BLOCK_IMG=1000054006,t.VK_FORMAT_PVRTC2_2BPP_UNORM_BLOCK_IMG=1000054002,t.VK_FORMAT_PVRTC2_4BPP_SRGB_BLOCK_IMG=1000054007,t.VK_FORMAT_PVRTC2_4BPP_UNORM_BLOCK_IMG=1000054003,t.VK_FORMAT_R10X6G10X6B10X6A10X6_UNORM_4PACK16=1000156009,t.VK_FORMAT_R10X6G10X6_UNORM_2PACK16=1000156008,t.VK_FORMAT_R10X6_UNORM_PACK16=1000156007,t.VK_FORMAT_R12X4G12X4B12X4A12X4_UNORM_4PACK16=1000156019,t.VK_FORMAT_R12X4G12X4_UNORM_2PACK16=1000156018,t.VK_FORMAT_R12X4_UNORM_PACK16=1000156017,t.VK_FORMAT_R16G16B16A16_SFLOAT=97,t.VK_FORMAT_R16G16B16A16_SINT=96,t.VK_FORMAT_R16G16B16A16_SNORM=92,t.VK_FORMAT_R16G16B16A16_UINT=95,t.VK_FORMAT_R16G16B16A16_UNORM=91,t.VK_FORMAT_R16G16B16_SFLOAT=90,t.VK_FORMAT_R16G16B16_SINT=89,t.VK_FORMAT_R16G16B16_SNORM=85,t.VK_FORMAT_R16G16B16_UINT=88,t.VK_FORMAT_R16G16B16_UNORM=84,t.VK_FORMAT_R16G16_SFLOAT=83,t.VK_FORMAT_R16G16_SINT=82,t.VK_FORMAT_R16G16_SNORM=78,t.VK_FORMAT_R16G16_UINT=81,t.VK_FORMAT_R16G16_UNORM=77,t.VK_FORMAT_R16_SFLOAT=76,t.VK_FORMAT_R16_SINT=75,t.VK_FORMAT_R16_SNORM=71,t.VK_FORMAT_R16_UINT=74,t.VK_FORMAT_R16_UNORM=70,t.VK_FORMAT_R32G32B32A32_SFLOAT=109,t.VK_FORMAT_R32G32B32A32_SINT=108,t.VK_FORMAT_R32G32B32A32_UINT=107,t.VK_FORMAT_R32G32B32_SFLOAT=106,t.VK_FORMAT_R32G32B32_SINT=105,t.VK_FORMAT_R32G32B32_UINT=104,t.VK_FORMAT_R32G32_SFLOAT=103,t.VK_FORMAT_R32G32_SINT=102,t.VK_FORMAT_R32G32_UINT=101,t.VK_FORMAT_R32_SFLOAT=100,t.VK_FORMAT_R32_SINT=99,t.VK_FORMAT_R32_UINT=98,t.VK_FORMAT_R4G4B4A4_UNORM_PACK16=2,t.VK_FORMAT_R4G4_UNORM_PACK8=1,t.VK_FORMAT_R5G5B5A1_UNORM_PACK16=6,t.VK_FORMAT_R5G6B5_UNORM_PACK16=4,t.VK_FORMAT_R64G64B64A64_SFLOAT=121,t.VK_FORMAT_R64G64B64A64_SINT=120,t.VK_FORMAT_R64G64B64A64_UINT=119,t.VK_FORMAT_R64G64B64_SFLOAT=118,t.VK_FORMAT_R64G64B64_SINT=117,t.VK_FORMAT_R64G64B64_UINT=116,t.VK_FORMAT_R64G64_SFLOAT=115,t.VK_FORMAT_R64G64_SINT=114,t.VK_FORMAT_R64G64_UINT=113,t.VK_FORMAT_R64_SFLOAT=112,t.VK_FORMAT_R64_SINT=111,t.VK_FORMAT_R64_UINT=110,t.VK_FORMAT_R8G8B8A8_SINT=42,t.VK_FORMAT_R8G8B8A8_SNORM=38,t.VK_FORMAT_R8G8B8A8_SRGB=43,t.VK_FORMAT_R8G8B8A8_UINT=41,t.VK_FORMAT_R8G8B8A8_UNORM=37,t.VK_FORMAT_R8G8B8_SINT=28,t.VK_FORMAT_R8G8B8_SNORM=24,t.VK_FORMAT_R8G8B8_SRGB=29,t.VK_FORMAT_R8G8B8_UINT=27,t.VK_FORMAT_R8G8B8_UNORM=23,t.VK_FORMAT_R8G8_SINT=21,t.VK_FORMAT_R8G8_SNORM=17,t.VK_FORMAT_R8G8_SRGB=22,t.VK_FORMAT_R8G8_UINT=20,t.VK_FORMAT_R8G8_UNORM=16,t.VK_FORMAT_R8_SINT=14,t.VK_FORMAT_R8_SNORM=10,t.VK_FORMAT_R8_SRGB=15,t.VK_FORMAT_R8_UINT=13,t.VK_FORMAT_R8_UNORM=9,t.VK_FORMAT_S8_UINT=127,t.VK_FORMAT_UNDEFINED=0,t.VK_FORMAT_X8_D24_UNORM_PACK32=125,t.createDefaultContainer=n,t.read=function(e){const t=new Uint8Array(e.buffer,e.byteOffset,s.length);if(t[0]!==s[0]||t[1]!==s[1]||t[2]!==s[2]||t[3]!==s[3]||t[4]!==s[4]||t[5]!==s[5]||t[6]!==s[6]||t[7]!==s[7]||t[8]!==s[8]||t[9]!==s[9]||t[10]!==s[10]||t[11]!==s[11])throw new Error("Missing KTX 2.0 identifier.");const n={vkFormat:0,typeSize:1,pixelWidth:0,pixelHeight:0,pixelDepth:0,layerCount:0,faceCount:1,supercompressionScheme:0,levels:[],dataFormatDescriptor:[{vendorId:0,descriptorType:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],keyValue:{},globalData:null},i=17*Uint32Array.BYTES_PER_ELEMENT,o=new r(e,s.length,i,!0);n.vkFormat=o._nextUint32(),n.typeSize=o._nextUint32(),n.pixelWidth=o._nextUint32(),n.pixelHeight=o._nextUint32(),n.pixelDepth=o._nextUint32(),n.layerCount=o._nextUint32(),n.faceCount=o._nextUint32();const c=o._nextUint32();n.supercompressionScheme=o._nextUint32();const l=o._nextUint32(),u=o._nextUint32(),h=o._nextUint32(),d=o._nextUint32(),p=o._nextUint64(),f=o._nextUint64(),m=new r(e,s.length+i,3*c*8,!0);for(let t=0;t<c;t++)n.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+m._nextUint64(),m._nextUint64()),uncompressedByteLength:m._nextUint64()});const g=new r(e,l,u,!0);g._skip(4);const A=g._nextUint16(),y=g._nextUint16(),_=g._nextUint16(),v=g._nextUint16(),b={vendorId:A,descriptorType:y,versionNumber:_,colorModel:g._nextUint8(),colorPrimaries:g._nextUint8(),transferFunction:g._nextUint8(),flags:g._nextUint8(),texelBlockDimension:[g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8()],bytesPlane:[g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8()],samples:[]},x=(v/4-6)/4;for(let e=0;e<x;e++){const t={bitOffset:g._nextUint16(),bitLength:g._nextUint8(),channelType:g._nextUint8(),samplePosition:[g._nextUint8(),g._nextUint8(),g._nextUint8(),g._nextUint8()],sampleLower:Number.NEGATIVE_INFINITY,sampleUpper:Number.POSITIVE_INFINITY};64&t.channelType?(t.sampleLower=g._nextInt32(),t.sampleUpper=g._nextInt32()):(t.sampleLower=g._nextUint32(),t.sampleUpper=g._nextUint32()),b.samples[e]=t}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(b);const w=new r(e,h,d,!0);for(;w._offset<d;){const e=w._nextUint32(),t=w._scan(e),r=a(t);if(n.keyValue[r]=w._nextUint8Array(e-t.byteLength-1),r.match(/^ktx/i)){const e=a(n.keyValue[r]);n.keyValue[r]=e.substring(0,e.lastIndexOf("\0"))}const i=e%4?4-e%4:0;w._skip(i)}if(f<=0)return n;const E=new r(e,p,f,!0),T=E._nextUint16(),S=E._nextUint16(),M=E._nextUint32(),C=E._nextUint32(),I=E._nextUint32(),R=E._nextUint32(),B=[];for(let e=0;e<c;e++)B.push({imageFlags:E._nextUint32(),rgbSliceByteOffset:E._nextUint32(),rgbSliceByteLength:E._nextUint32(),alphaSliceByteOffset:E._nextUint32(),alphaSliceByteLength:E._nextUint32()});const P=p+E._offset,D=P+M,O=D+C,L=O+I,N=new Uint8Array(e.buffer,e.byteOffset+P,M),F=new Uint8Array(e.buffer,e.byteOffset+D,C),U=new Uint8Array(e.buffer,e.byteOffset+O,I),k=new Uint8Array(e.buffer,e.byteOffset+L,R);return n.globalData={endpointCount:T,selectorCount:S,imageDescs:B,endpointsData:N,selectorsData:F,tablesData:U,extendedData:k},n},t.write=function(e,t={}){t={...h,...t};let n=new ArrayBuffer(0);if(e.globalData){const t=new ArrayBuffer(20+5*e.globalData.imageDescs.length*4),r=new DataView(t);r.setUint16(0,e.globalData.endpointCount,!0),r.setUint16(2,e.globalData.selectorCount,!0),r.setUint32(4,e.globalData.endpointsData.byteLength,!0),r.setUint32(8,e.globalData.selectorsData.byteLength,!0),r.setUint32(12,e.globalData.tablesData.byteLength,!0),r.setUint32(16,e.globalData.extendedData.byteLength,!0);for(let t=0;t<e.globalData.imageDescs.length;t++){const n=e.globalData.imageDescs[t];r.setUint32(20+5*t*4+0,n.imageFlags,!0),r.setUint32(20+5*t*4+4,n.rgbSliceByteOffset,!0),r.setUint32(20+5*t*4+8,n.rgbSliceByteLength,!0),r.setUint32(20+5*t*4+12,n.alphaSliceByteOffset,!0),r.setUint32(20+5*t*4+16,n.alphaSliceByteLength,!0)}n=c([t,e.globalData.endpointsData,e.globalData.selectorsData,e.globalData.tablesData,e.globalData.extendedData])}const r=[],a=Object.entries({...e.keyValue,...!t.keepWriter&&{KTXwriter:"KTX-Parse v1.0.1"}});a.sort(((e,t)=>e[0]>t[0]?1:-1));for(const[e,t]of a){const n=o(e),s="string"==typeof t?c([o(t),i]):t,a=n.byteLength+1+s.byteLength,u=l(a,4);r.push(c([new Uint32Array([a]),n,i,s,new Uint8Array(u).fill(0)]))}const d=c(r);if(1!==e.dataFormatDescriptor.length||0!==e.dataFormatDescriptor[0].descriptorType)throw new Error("Only BASICFORMAT Data Format Descriptor output supported.");const p=e.dataFormatDescriptor[0],f=new ArrayBuffer(28+16*p.samples.length),m=new DataView(f),g=24+16*p.samples.length;if(m.setUint32(0,f.byteLength,!0),m.setUint16(4,p.vendorId,!0),m.setUint16(6,p.descriptorType,!0),m.setUint16(8,p.versionNumber,!0),m.setUint16(10,g,!0),m.setUint8(12,p.colorModel),m.setUint8(13,p.colorPrimaries),m.setUint8(14,p.transferFunction),m.setUint8(15,p.flags),!Array.isArray(p.texelBlockDimension))throw new Error("texelBlockDimension is now an array. For dimensionality `d`, set `d - 1`.");m.setUint8(16,p.texelBlockDimension[0]),m.setUint8(17,p.texelBlockDimension[1]),m.setUint8(18,p.texelBlockDimension[2]),m.setUint8(19,p.texelBlockDimension[3]);for(let e=0;e<8;e++)m.setUint8(20+e,p.bytesPlane[e]);for(let e=0;e<p.samples.length;e++){const t=p.samples[e],n=28+16*e;m.setUint16(n+0,t.bitOffset,!0),m.setUint8(n+2,t.bitLength),m.setUint8(n+3,t.channelType),m.setUint8(n+4,t.samplePosition[0]),m.setUint8(n+5,t.samplePosition[1]),m.setUint8(n+6,t.samplePosition[2]),m.setUint8(n+7,t.samplePosition[3]),64&t.channelType?(m.setInt32(n+8,t.sampleLower,!0),m.setInt32(n+12,t.sampleUpper,!0)):(m.setUint32(n+8,t.sampleLower,!0),m.setUint32(n+12,t.sampleUpper,!0))}const A=s.length+68+3*e.levels.length*8,y=A+f.byteLength;let _=n.byteLength>0?y+d.byteLength:0;_%8&&(_+=8-_%8);const v=[],b=new DataView(new ArrayBuffer(3*e.levels.length*8)),x=new Uint32Array(e.levels.length);let w=0;0===e.supercompressionScheme&&(w=function(e,t){const n=Math.max(e,t),r=Math.min(e,t);let i=n;for(;i%r!==0;)i+=n;return i}(u(e),4));let E=(_||y+d.byteLength)+n.byteLength;for(let t=e.levels.length-1;t>=0;t--){if(E%w){const e=l(E,w);v.push(new Uint8Array(e)),E+=e}const n=e.levels[t];v.push(n.levelData),x[t]=E,E+=n.levelData.byteLength}for(let t=0;t<e.levels.length;t++){const n=e.levels[t];b.setBigUint64(24*t+0,BigInt(x[t]),!0),b.setBigUint64(24*t+8,BigInt(n.levelData.byteLength),!0),b.setBigUint64(24*t+16,BigInt(n.uncompressedByteLength),!0)}const T=new ArrayBuffer(68),S=new DataView(T);return S.setUint32(0,e.vkFormat,!0),S.setUint32(4,e.typeSize,!0),S.setUint32(8,e.pixelWidth,!0),S.setUint32(12,e.pixelHeight,!0),S.setUint32(16,e.pixelDepth,!0),S.setUint32(20,e.layerCount,!0),S.setUint32(24,e.faceCount,!0),S.setUint32(28,e.levels.length,!0),S.setUint32(32,e.supercompressionScheme,!0),S.setUint32(36,A,!0),S.setUint32(40,f.byteLength,!0),S.setUint32(44,y,!0),S.setUint32(48,d.byteLength,!0),S.setBigUint64(52,BigInt(n.byteLength>0?_:0),!0),S.setBigUint64(60,BigInt(n.byteLength),!0),new Uint8Array(c([new Uint8Array(s).buffer,T,b.buffer,f,d,_>0?new ArrayBuffer(_-(y+d.byteLength)):new ArrayBuffer(0),n,...v]))}},2584:(e,t,n)=>{function r(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var i,s=r(n(8655)),o=function(e,t){if(e<=-t||e>=t)return 0;if(e>-1.1920929e-7&&e<1.1920929e-7)return 1;var n=e*Math.PI;return Math.sin(n)/n*Math.sin(n/t)/(n/t)},a=function(e,t,n,r,i,s,a,c){for(var l=Math.pow(2,c)-1,u=function(e){return Math.round(e*l)},h=i?2:3,d=1/n,p=Math.min(1,n),f=h/p,m=new a((Math.floor(2*(f+1))+2)*t),g=0,A=0;A<t;A++){for(var y=(A+.5)*d+r,_=Math.max(0,Math.floor(y-f)),v=Math.min(e-1,Math.ceil(y+f)),b=v-_+1,x=new s(b),w=new a(b),E=0,T=0,S=_;S<=v;S++){var M=o((S+.5-y)*p,h);E+=M,x[T]=M,T++}for(var C=0,I=0;I<x.length;I++){var R=x[I]/E;C+=R,w[I]=u(R)}w[t>>1]+=u(1-C);for(var B=0;B<w.length&&0===w[B];)B++;for(var P=w.length-1;P>0&&0===w[P];)P--;var D=P-B+1;m[g++]=_+B,m[g++]=D,m.set(w.subarray(B,P+1),g),g+=D}return m},c=function(e,t,n,r){for(var i=e.shape[1],s=t.shape[0],o=Math.pow(2,8*t.data.BYTES_PER_ELEMENT)-1,a=function(e){return e<0?0:e>o?o:e},c=Math.pow(2,r-1),l=2*c,u=0;u<i;u++)for(var h=u,d=0,p=0;p<s;p++){for(var f=n[d++],m=0,g=0,A=0,y=0,_=n[d++];_>0;_--){var v=n[d++];m+=v*e.get(f,u,0),g+=v*e.get(f,u,1),A+=v*e.get(f,u,2),y+=v*e.get(f,u,3),f++}t.set(p,h,0,a((m+c)/l)),t.set(p,h,1,a((g+c)/l)),t.set(p,h,2,a((A+c)/l)),t.set(p,h,3,a((y+c)/l))}};function l(e,t,n){if(3!==e.shape.length||3!==t.shape.length)throw new TypeError("Input and output must have exactly 3 dimensions (width, height and colorspace)");var r,o,l=e.shape,u=l[0],h=l[1],d=t.shape,p=d[0],f=d[1],m=p/u,g=f/h;switch(t.dtype){case"uint8_clamped":case"uint8":r=Float32Array,o=Int16Array;break;case"uint16":case"uint32":r=Float64Array,o=Int32Array;break;default:throw TypeError("Unsupported data type "+t.dtype)}var A=7*o.BYTES_PER_ELEMENT,y=a(u,p,m,0,n===i.LANCZOS_2,r,o,A),_=a(h,f,g,0,n===i.LANCZOS_2,r,o,A),v=s.default(new(0,t.data.constructor)(p*h*4),[h,p,4]),b=v.transpose(1,0),x=t.transpose(1,0);c(e,b,y,A),c(v,x,_,A)}!function(e){e[e.LANCZOS_3=3]="LANCZOS_3",e[e.LANCZOS_2=2]="LANCZOS_2"}(i||(i={})),t.lanczos2=function(e,t){l(e,t,i.LANCZOS_2)},t.lanczos3=function(e,t){l(e,t,i.LANCZOS_3)}},3643:(e,t,n)=>{var r=n(8655),i=n(9231);function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var o=s(r),a=s(i);function c(e,t,n){if(void 0===n&&(n=-1),4===e.shape.length)return c(e.pick(n),t,0);if(3===e.shape.length)if(3===e.shape[2])a.default.assign(o.default(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),e),a.default.assigns(o.default(t,[e.shape[0]*e.shape[1]],[4],3),255);else if(4===e.shape[2])a.default.assign(o.default(t,[e.shape[0],e.shape[1],4],[4,4*e.shape[0],1]),e);else{if(1!==e.shape[2])throw new Error("[ndarray-pixels] Incompatible array shape.");a.default.assign(o.default(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),o.default(e.data,[e.shape[0],e.shape[1],3],[e.stride[0],e.stride[1],0],e.offset)),a.default.assigns(o.default(t,[e.shape[0]*e.shape[1]],[4],3),255)}else{if(2!==e.shape.length)throw new Error("[ndarray-pixels] Incompatible array shape.");a.default.assign(o.default(t,[e.shape[0],e.shape[1],3],[4,4*e.shape[0],1]),o.default(e.data,[e.shape[0],e.shape[1],3],[e.stride[0],e.stride[1],0],e.offset)),a.default.assigns(o.default(t,[e.shape[0]*e.shape[1]],[4],3),255)}return t}var l=function(e,t){try{var n=new OffscreenCanvas(e.shape[0],e.shape[1]),r=n.getContext("2d"),i=r.getImageData(0,0,n.width,n.height);return c(e,i.data),r.putImageData(i,0,0),function(e,t){try{return Promise.resolve(e.convertToBlob(t)).then((function(e){return Promise.resolve(e.arrayBuffer()).then((function(e){return new Uint8Array(e)}))}))}catch(e){return Promise.reject(e)}}(n,t)}catch(e){return Promise.reject(e)}};t.getPixels=function(e,t){try{return Promise.resolve(function(e,t){if(!(e instanceof Uint8Array))throw new Error("[ndarray-pixels] Input must be Uint8Array or Buffer.");var n=new Blob([e],{type:t}),r=URL.createObjectURL(n);return new Promise((function(e,t){var n=new Image;n.crossOrigin="anonymous",n.onload=function(){URL.revokeObjectURL(r);var t=new OffscreenCanvas(n.width,n.height).getContext("2d");t.drawImage(n,0,0);var i=t.getImageData(0,0,n.width,n.height);e(o.default(new Uint8Array(i.data),[n.width,n.height,4],[4,4*n.width,1],0))},n.onerror=function(e){URL.revokeObjectURL(r),t(e)},n.src=r}))}(e,t))}catch(e){return Promise.reject(e)}},t.savePixels=function(e,t){try{var n;return n="string"==typeof t?{type:t,quality:void 0}:{type:t.type,quality:t.quality},Promise.resolve(l(e,n))}catch(e){return Promise.reject(e)}}},2596:(e,t)=>{class n{constructor(){this._listeners={}}addEventListener(e,t){const n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t),this}removeEventListener(e,t){const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}return this}dispatchEvent(e){const t=this._listeners[e.type];if(void 0!==t){const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e)}return this}dispose(){for(const e in this._listeners)delete this._listeners[e]}}class r{constructor(e,t,n,r){if(void 0===r&&(r={}),this._name=void 0,this._parent=void 0,this._child=void 0,this._attributes=void 0,this._disposed=!1,this._name=e,this._parent=t,this._child=n,this._attributes=r,!t.isOnGraph(n))throw new Error("Cannot connect disconnected graphs.")}getName(){return this._name}getParent(){return this._parent}getChild(){return this._child}setChild(e){return this._child=e,this}getAttributes(){return this._attributes}dispose(){this._disposed||(this._parent._destroyRef(this),this._disposed=!0)}isDisposed(){return this._disposed}}class i{constructor(e){if(this.list=[],e)for(const t of e)this.list.push(t)}add(e){this.list.push(e)}remove(e){const t=this.list.indexOf(e);t>=0&&this.list.splice(t,1)}removeChild(e){const t=[];for(const n of this.list)n.getChild()===e&&t.push(n);for(const e of t)this.remove(e);return t}listRefsByChild(e){const t=[];for(const n of this.list)n.getChild()===e&&t.push(n);return t}values(){return this.list}}class s{constructor(e){if(this.set=new Set,this.map=new Map,e)for(const t of e)this.add(t)}add(e){const t=e.getChild();this.removeChild(t),this.set.add(e),this.map.set(t,e)}remove(e){this.set.delete(e),this.map.delete(e.getChild())}removeChild(e){const t=this.map.get(e)||null;return t&&this.remove(t),t}getRefByChild(e){return this.map.get(e)||null}values(){return Array.from(this.set)}}class o{constructor(e){this.map={},e&&Object.assign(this.map,e)}set(e,t){this.map[e]=t}delete(e){delete this.map[e]}get(e){return this.map[e]||null}keys(){return Object.keys(this.map)}values(){return Object.values(this.map)}}const a=Symbol("attributes"),c=Symbol("immutableKeys");class l extends n{constructor(e){super(),this._disposed=!1,this.graph=void 0,this[a]=void 0,this[c]=void 0,this.graph=e,this[c]=new Set,this[a]=this._createAttributes()}getDefaults(){return{}}_createAttributes(){const e=this.getDefaults(),t={};for(const n in e){const r=e[n];if(r instanceof l){const e=this.graph._createEdge(n,this,r);this[c].add(n),t[n]=e}else t[n]=r}return t}isOnGraph(e){return this.graph===e.graph}isDisposed(){return this._disposed}dispose(){this._disposed||(this.graph.listChildEdges(this).forEach((e=>e.dispose())),this.graph.disconnectParents(this),this._disposed=!0,this.dispatchEvent({type:"dispose"}))}detach(){return this.graph.disconnectParents(this),this}swap(e,t){for(const n in this[a]){const c=this[a][n];if(c instanceof r){const r=c;r.getChild()===e&&this.setRef(n,t,r.getAttributes())}else if(c instanceof i)for(const r of c.listRefsByChild(e)){const i=r.getAttributes();this.removeRef(n,e),this.addRef(n,t,i)}else if(c instanceof s){const r=c.getRefByChild(e);if(r){const i=r.getAttributes();this.removeRef(n,e),this.addRef(n,t,i)}}else if(c instanceof o)for(const r of c.keys()){const i=c.get(r);i.getChild()===e&&this.setRefMap(n,r,t,i.getAttributes())}}return this}get(e){return this[a][e]}set(e,t){return this[a][e]=t,this.dispatchEvent({type:"change",attribute:e})}getRef(e){const t=this[a][e];return t?t.getChild():null}setRef(e,t,n){if(this[c].has(e))throw new Error(`Cannot overwrite immutable attribute, "${e}".`);const r=this[a][e];if(r&&r.dispose(),!t)return this;const i=this.graph._createEdge(e,this,t,n);return this[a][e]=i,this.dispatchEvent({type:"change",attribute:e})}listRefs(e){return this.assertRefList(e).values().map((e=>e.getChild()))}addRef(e,t,n){const r=this.graph._createEdge(e,this,t,n);return this.assertRefList(e).add(r),this.dispatchEvent({type:"change",attribute:e})}removeRef(e,t){const n=this.assertRefList(e);if(n instanceof i)for(const e of n.listRefsByChild(t))e.dispose();else{const e=n.getRefByChild(t);e&&e.dispose()}return this}assertRefList(e){const t=this[a][e];if(t instanceof i||t instanceof s)return t;throw new Error(`Expected RefList or RefSet for attribute "${e}"`)}listRefMapKeys(e){return this.assertRefMap(e).keys()}listRefMapValues(e){return this.assertRefMap(e).values().map((e=>e.getChild()))}getRefMap(e,t){const n=this.assertRefMap(e).get(t);return n?n.getChild():null}setRefMap(e,t,n,r){const i=this.assertRefMap(e),s=i.get(t);if(s&&s.dispose(),!n)return this;r=Object.assign(r||{},{key:t});const o=this.graph._createEdge(e,this,n,{...r,key:t});return i.set(t,o),this.dispatchEvent({type:"change",attribute:e,key:t})}assertRefMap(e){const t=this[a][e];if(t instanceof o)return t;throw new Error(`Expected RefMap for attribute "${e}"`)}dispatchEvent(e){return super.dispatchEvent({...e,target:this}),this.graph.dispatchEvent({...e,target:this,type:`node:${e.type}`}),this}_destroyRef(e){const t=e.getName();if(this[a][t]===e)this[a][t]=null,this[c].has(t)&&e.getChild().dispose();else if(this[a][t]instanceof i)this[a][t].remove(e);else if(this[a][t]instanceof s)this[a][t].remove(e);else{if(!(this[a][t]instanceof o))return;{const n=this[a][t];for(const t of n.keys())n.get(t)===e&&n.delete(t)}}this.graph._destroyEdge(e),this.dispatchEvent({type:"change",attribute:t})}}t.$attributes=a,t.$immutableKeys=c,t.EventDispatcher=n,t.Graph=class extends n{constructor(){super(...arguments),this._emptySet=new Set,this._edges=new Set,this._parentEdges=new Map,this._childEdges=new Map}listEdges(){return Array.from(this._edges)}listParentEdges(e){return Array.from(this._childEdges.get(e)||this._emptySet)}listParents(e){const t=new Set;for(const n of this.listParentEdges(e))t.add(n.getParent());return Array.from(t)}listChildEdges(e){return Array.from(this._parentEdges.get(e)||this._emptySet)}listChildren(e){const t=new Set;for(const n of this.listChildEdges(e))t.add(n.getChild());return Array.from(t)}disconnectParents(e,t){for(const n of this.listParentEdges(e))t&&!t(n.getParent())||n.dispose();return this}_createEdge(e,t,n,i){const s=new r(e,t,n,i);this._edges.add(s);const o=s.getParent();this._parentEdges.has(o)||this._parentEdges.set(o,new Set),this._parentEdges.get(o).add(s);const a=s.getChild();return this._childEdges.has(a)||this._childEdges.set(a,new Set),this._childEdges.get(a).add(s),s}_destroyEdge(e){return this._edges.delete(e),this._parentEdges.get(e.getParent()).delete(e),this._childEdges.get(e.getChild()).delete(e),this}},t.GraphEdge=r,t.GraphNode=l,t.RefList=i,t.RefMap=o,t.RefSet=s},8074:(e,t,n)=>{"use strict";n.r(t),n.d(t,{geoAlbers:()=>Tr,geoAlbersUsa:()=>Sr,geoArea:()=>ie,geoAzimuthalEqualArea:()=>Rr,geoAzimuthalEqualAreaRaw:()=>Ir,geoAzimuthalEquidistant:()=>Pr,geoAzimuthalEquidistantRaw:()=>Br,geoBounds:()=>ke,geoCentroid:()=>Je,geoCircle:()=>ct,geoClipAntimeridian:()=>vt,geoClipCircle:()=>bt,geoClipExtent:()=>It,geoClipRectangle:()=>Ct,geoConicConformal:()=>Ur,geoConicConformalRaw:()=>Fr,geoConicEqualArea:()=>Er,geoConicEqualAreaRaw:()=>wr,geoConicEquidistant:()=>jr,geoConicEquidistantRaw:()=>Gr,geoContains:()=>Wt,geoDistance:()=>Ft,geoEqualEarth:()=>Kr,geoEqualEarthRaw:()=>Xr,geoEquirectangular:()=>zr,geoEquirectangularRaw:()=>kr,geoGnomonic:()=>Jr,geoGnomonicRaw:()=>Yr,geoGraticule:()=>Yt,geoGraticule10:()=>Jt,geoIdentity:()=>$r,geoInterpolate:()=>$t,geoLength:()=>Ot,geoMercator:()=>Or,geoMercatorRaw:()=>Dr,geoNaturalEarth1:()=>ei,geoNaturalEarth1Raw:()=>Zr,geoOrthographic:()=>ni,geoOrthographicRaw:()=>ti,geoPath:()=>or,geoProjection:()=>vr,geoProjectionMutator:()=>br,geoRotation:()=>st,geoStereographic:()=>ii,geoStereographicRaw:()=>ri,geoStream:()=>O,geoTransform:()=>ar,geoTransverseMercator:()=>oi,geoTransverseMercatorRaw:()=>si});class r{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const i=t[r],s=e+i,o=Math.abs(e)<Math.abs(i)?e-(s-i):i-(s-e);o&&(t[n++]=o),e=s}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t,n,r,i=this._n,s=0;if(i>0){for(s=e[--i];i>0&&(t=s,n=e[--i],s=t+n,r=n-(s-t),!r););i>0&&(r<0&&e[i-1]<0||r>0&&e[i-1]>0)&&(n=2*r,t=s+n,n==t-s&&(s=t))}return s}}var i=1e-6,s=1e-12,o=Math.PI,a=o/2,c=o/4,l=2*o,u=180/o,h=o/180,d=Math.abs,p=Math.atan,f=Math.atan2,m=Math.cos,g=Math.ceil,A=Math.exp,y=(Math.floor,Math.hypot),_=Math.log,v=Math.pow,b=Math.sin,x=Math.sign||function(e){return e>0?1:e<0?-1:0},w=Math.sqrt,E=Math.tan;function T(e){return e>1?0:e<-1?o:Math.acos(e)}function S(e){return e>1?a:e<-1?-a:Math.asin(e)}function M(e){return(e=b(e/2))*e}function C(){}function I(e,t){e&&B.hasOwnProperty(e.type)&&B[e.type](e,t)}var R={Feature:function(e,t){I(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)I(n[r].geometry,t)}},B={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){P(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)P(n[r],t,0)},Polygon:function(e,t){D(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)D(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)I(n[r],t)}};function P(e,t,n){var r,i=-1,s=e.length-n;for(t.lineStart();++i<s;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function D(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)P(e[n],t,1);t.polygonEnd()}function O(e,t){e&&R.hasOwnProperty(e.type)?R[e.type](e,t):I(e,t)}var L,N,F,U,k,z,G,j,V,Q,H,W,q,X,K,Y,J=new r,$=new r,Z={point:C,lineStart:C,lineEnd:C,polygonStart:function(){J=new r,Z.lineStart=ee,Z.lineEnd=te},polygonEnd:function(){var e=+J;$.add(e<0?l+e:e),this.lineStart=this.lineEnd=this.point=C},sphere:function(){$.add(l)}};function ee(){Z.point=ne}function te(){re(L,N)}function ne(e,t){Z.point=re,L=e,N=t,F=e*=h,U=m(t=(t*=h)/2+c),k=b(t)}function re(e,t){var n=(e*=h)-F,r=n>=0?1:-1,i=r*n,s=m(t=(t*=h)/2+c),o=b(t),a=k*o,l=U*s+a*m(i),u=a*r*b(i);J.add(f(u,l)),F=e,U=s,k=o}function ie(e){return $=new r,O(e,Z),2*$}function se(e){return[f(e[1],e[0]),S(e[2])]}function oe(e){var t=e[0],n=e[1],r=m(n);return[r*m(t),r*b(t),b(n)]}function ae(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function ce(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function le(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function ue(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function he(e){var t=w(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var de,pe,fe,me,ge,Ae,ye,_e,ve,be,xe,we,Ee,Te,Se,Me,Ce={point:Ie,lineStart:Be,lineEnd:Pe,polygonStart:function(){Ce.point=De,Ce.lineStart=Oe,Ce.lineEnd=Le,X=new r,Z.polygonStart()},polygonEnd:function(){Z.polygonEnd(),Ce.point=Ie,Ce.lineStart=Be,Ce.lineEnd=Pe,J<0?(z=-(j=180),G=-(V=90)):X>i?V=90:X<-i&&(G=-90),Y[0]=z,Y[1]=j},sphere:function(){z=-(j=180),G=-(V=90)}};function Ie(e,t){K.push(Y=[z=e,j=e]),t<G&&(G=t),t>V&&(V=t)}function Re(e,t){var n=oe([e*h,t*h]);if(q){var r=ce(q,n),i=ce([r[1],-r[0],0],r);he(i),i=se(i);var s,o=e-Q,a=o>0?1:-1,c=i[0]*u*a,l=d(o)>180;l^(a*Q<c&&c<a*e)?(s=i[1]*u)>V&&(V=s):l^(a*Q<(c=(c+360)%360-180)&&c<a*e)?(s=-i[1]*u)<G&&(G=s):(t<G&&(G=t),t>V&&(V=t)),l?e<Q?Ne(z,e)>Ne(z,j)&&(j=e):Ne(e,j)>Ne(z,j)&&(z=e):j>=z?(e<z&&(z=e),e>j&&(j=e)):e>Q?Ne(z,e)>Ne(z,j)&&(j=e):Ne(e,j)>Ne(z,j)&&(z=e)}else K.push(Y=[z=e,j=e]);t<G&&(G=t),t>V&&(V=t),q=n,Q=e}function Be(){Ce.point=Re}function Pe(){Y[0]=z,Y[1]=j,Ce.point=Ie,q=null}function De(e,t){if(q){var n=e-Q;X.add(d(n)>180?n+(n>0?360:-360):n)}else H=e,W=t;Z.point(e,t),Re(e,t)}function Oe(){Z.lineStart()}function Le(){De(H,W),Z.lineEnd(),d(X)>i&&(z=-(j=180)),Y[0]=z,Y[1]=j,q=null}function Ne(e,t){return(t-=e)<0?t+360:t}function Fe(e,t){return e[0]-t[0]}function Ue(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function ke(e){var t,n,r,i,s,o,a;if(V=j=-(z=G=1/0),K=[],O(e,Ce),n=K.length){for(K.sort(Fe),t=1,s=[r=K[0]];t<n;++t)Ue(r,(i=K[t])[0])||Ue(r,i[1])?(Ne(r[0],i[1])>Ne(r[0],r[1])&&(r[1]=i[1]),Ne(i[0],r[1])>Ne(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,t=0,r=s[n=s.length-1];t<=n;r=i,++t)i=s[t],(a=Ne(r[1],i[0]))>o&&(o=a,z=i[0],j=r[1])}return K=Y=null,z===1/0||G===1/0?[[NaN,NaN],[NaN,NaN]]:[[z,G],[j,V]]}var ze={sphere:C,point:Ge,lineStart:Ve,lineEnd:We,polygonStart:function(){ze.lineStart=qe,ze.lineEnd=Xe},polygonEnd:function(){ze.lineStart=Ve,ze.lineEnd=We}};function Ge(e,t){e*=h;var n=m(t*=h);je(n*m(e),n*b(e),b(t))}function je(e,t,n){++de,fe+=(e-fe)/de,me+=(t-me)/de,ge+=(n-ge)/de}function Ve(){ze.point=Qe}function Qe(e,t){e*=h;var n=m(t*=h);Te=n*m(e),Se=n*b(e),Me=b(t),ze.point=He,je(Te,Se,Me)}function He(e,t){e*=h;var n=m(t*=h),r=n*m(e),i=n*b(e),s=b(t),o=f(w((o=Se*s-Me*i)*o+(o=Me*r-Te*s)*o+(o=Te*i-Se*r)*o),Te*r+Se*i+Me*s);pe+=o,Ae+=o*(Te+(Te=r)),ye+=o*(Se+(Se=i)),_e+=o*(Me+(Me=s)),je(Te,Se,Me)}function We(){ze.point=Ge}function qe(){ze.point=Ke}function Xe(){Ye(we,Ee),ze.point=Ge}function Ke(e,t){we=e,Ee=t,e*=h,t*=h,ze.point=Ye;var n=m(t);Te=n*m(e),Se=n*b(e),Me=b(t),je(Te,Se,Me)}function Ye(e,t){e*=h;var n=m(t*=h),r=n*m(e),i=n*b(e),s=b(t),o=Se*s-Me*i,a=Me*r-Te*s,c=Te*i-Se*r,l=y(o,a,c),u=S(l),d=l&&-u/l;ve.add(d*o),be.add(d*a),xe.add(d*c),pe+=u,Ae+=u*(Te+(Te=r)),ye+=u*(Se+(Se=i)),_e+=u*(Me+(Me=s)),je(Te,Se,Me)}function Je(e){de=pe=fe=me=ge=Ae=ye=_e=0,ve=new r,be=new r,xe=new r,O(e,ze);var t=+ve,n=+be,o=+xe,a=y(t,n,o);return a<s&&(t=Ae,n=ye,o=_e,pe<i&&(t=fe,n=me,o=ge),(a=y(t,n,o))<s)?[NaN,NaN]:[f(n,t)*u,S(o/a)*u]}function $e(e){return function(){return e}}function Ze(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function et(e,t){return d(e)>o&&(e-=Math.round(e/l)*l),[e,t]}function tt(e,t,n){return(e%=l)?t||n?Ze(rt(e),it(t,n)):rt(e):t||n?it(t,n):et}function nt(e){return function(t,n){return d(t+=e)>o&&(t-=Math.round(t/l)*l),[t,n]}}function rt(e){var t=nt(e);return t.invert=nt(-e),t}function it(e,t){var n=m(e),r=b(e),i=m(t),s=b(t);function o(e,t){var o=m(t),a=m(e)*o,c=b(e)*o,l=b(t),u=l*n+a*r;return[f(c*i-u*s,a*n-l*r),S(u*i+c*s)]}return o.invert=function(e,t){var o=m(t),a=m(e)*o,c=b(e)*o,l=b(t),u=l*i-c*s;return[f(c*i+l*s,a*n+u*r),S(u*n-a*r)]},o}function st(e){function t(t){return(t=e(t[0]*h,t[1]*h))[0]*=u,t[1]*=u,t}return e=tt(e[0]*h,e[1]*h,e.length>2?e[2]*h:0),t.invert=function(t){return(t=e.invert(t[0]*h,t[1]*h))[0]*=u,t[1]*=u,t},t}function ot(e,t,n,r,i,s){if(n){var o=m(t),a=b(t),c=r*n;null==i?(i=t+r*l,s=t-c/2):(i=at(o,i),s=at(o,s),(r>0?i<s:i>s)&&(i+=r*l));for(var u,h=i;r>0?h>s:h<s;h-=c)u=se([o,-a*m(h),-a*b(h)]),e.point(u[0],u[1])}}function at(e,t){(t=oe(t))[0]-=e,he(t);var n=T(-t[1]);return((-t[2]<0?-n:n)+l-i)%l}function ct(){var e,t,n=$e([0,0]),r=$e(90),i=$e(2),s={point:function(n,r){e.push(n=t(n,r)),n[0]*=u,n[1]*=u}};function o(){var o=n.apply(this,arguments),a=r.apply(this,arguments)*h,c=i.apply(this,arguments)*h;return e=[],t=tt(-o[0]*h,-o[1]*h,0).invert,ot(s,a,c,1),o={type:"Polygon",coordinates:[e]},e=t=null,o}return o.center=function(e){return arguments.length?(n="function"==typeof e?e:$e([+e[0],+e[1]]),o):n},o.radius=function(e){return arguments.length?(r="function"==typeof e?e:$e(+e),o):r},o.precision=function(e){return arguments.length?(i="function"==typeof e?e:$e(+e),o):i},o}function lt(){var e,t=[];return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){t.push(e=[])},lineEnd:C,rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))},result:function(){var n=t;return t=[],e=null,n}}}function ut(e,t){return d(e[0]-t[0])<i&&d(e[1]-t[1])<i}function ht(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function dt(e,t,n,r,s){var o,a,c=[],l=[];if(e.forEach((function(e){if(!((t=e.length-1)<=0)){var t,n,r=e[0],a=e[t];if(ut(r,a)){if(!r[2]&&!a[2]){for(s.lineStart(),o=0;o<t;++o)s.point((r=e[o])[0],r[1]);return void s.lineEnd()}a[0]+=2*i}c.push(n=new ht(r,e,null,!0)),l.push(n.o=new ht(r,null,n,!1)),c.push(n=new ht(a,e,null,!1)),l.push(n.o=new ht(a,null,n,!0))}})),c.length){for(l.sort(t),pt(c),pt(l),o=0,a=l.length;o<a;++o)l[o].e=n=!n;for(var u,h,d=c[0];;){for(var p=d,f=!0;p.v;)if((p=p.n)===d)return;u=p.z,s.lineStart();do{if(p.v=p.o.v=!0,p.e){if(f)for(o=0,a=u.length;o<a;++o)s.point((h=u[o])[0],h[1]);else r(p.x,p.n.x,1,s);p=p.n}else{if(f)for(u=p.p.z,o=u.length-1;o>=0;--o)s.point((h=u[o])[0],h[1]);else r(p.x,p.p.x,-1,s);p=p.p}u=(p=p.o).z,f=!f}while(!p.v);s.lineEnd()}}}function pt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function ft(e){return d(e[0])<=o?e[0]:x(e[0])*((d(e[0])+o)%l-o)}function mt(e,t){var n=ft(t),u=t[1],h=b(u),d=[b(n),-m(n),0],p=0,g=0,A=new r;1===h?u=a+i:-1===h&&(u=-a-i);for(var y=0,_=e.length;y<_;++y)if(x=(v=e[y]).length)for(var v,x,w=v[x-1],E=ft(w),T=w[1]/2+c,M=b(T),C=m(T),I=0;I<x;++I,E=B,M=D,C=O,w=R){var R=v[I],B=ft(R),P=R[1]/2+c,D=b(P),O=m(P),L=B-E,N=L>=0?1:-1,F=N*L,U=F>o,k=M*D;if(A.add(f(k*N*b(F),C*O+k*m(F))),p+=U?L+N*l:L,U^E>=n^B>=n){var z=ce(oe(w),oe(R));he(z);var G=ce(d,z);he(G);var j=(U^L>=0?-1:1)*S(G[2]);(u>j||u===j&&(z[0]||z[1]))&&(g+=U^L>=0?1:-1)}}return(p<-i||p<i&&A<-s)^1&g}function gt(e){return Array.from(function*(e){for(const t of e)yield*t}(e))}function At(e,t,n,r){return function(i){var s,o,a,c=t(i),l=lt(),u=t(l),h=!1,d={point:p,lineStart:m,lineEnd:g,polygonStart:function(){d.point=A,d.lineStart=y,d.lineEnd=_,o=[],s=[]},polygonEnd:function(){d.point=p,d.lineStart=m,d.lineEnd=g,o=gt(o);var e=mt(s,r);o.length?(h||(i.polygonStart(),h=!0),dt(o,_t,e,n,i)):e&&(h||(i.polygonStart(),h=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),h&&(i.polygonEnd(),h=!1),o=s=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function p(t,n){e(t,n)&&i.point(t,n)}function f(e,t){c.point(e,t)}function m(){d.point=f,c.lineStart()}function g(){d.point=p,c.lineEnd()}function A(e,t){a.push([e,t]),u.point(e,t)}function y(){u.lineStart(),a=[]}function _(){A(a[0][0],a[0][1]),u.lineEnd();var e,t,n,r,c=u.clean(),d=l.result(),p=d.length;if(a.pop(),s.push(a),a=null,p)if(1&c){if((t=(n=d[0]).length-1)>0){for(h||(i.polygonStart(),h=!0),i.lineStart(),e=0;e<t;++e)i.point((r=n[e])[0],r[1]);i.lineEnd()}}else p>1&&2&c&&d.push(d.pop().concat(d.shift())),o.push(d.filter(yt))}return d}}function yt(e){return e.length>1}function _t(e,t){return((e=e.x)[0]<0?e[1]-a-i:a-e[1])-((t=t.x)[0]<0?t[1]-a-i:a-t[1])}et.invert=et;const vt=At((function(){return!0}),(function(e){var t,n=NaN,r=NaN,s=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(c,l){var u=c>0?o:-o,h=d(c-n);d(h-o)<i?(e.point(n,r=(r+l)/2>0?a:-a),e.point(s,r),e.lineEnd(),e.lineStart(),e.point(u,r),e.point(c,r),t=0):s!==u&&h>=o&&(d(n-s)<i&&(n-=s*i),d(c-u)<i&&(c-=u*i),r=function(e,t,n,r){var s,o,a=b(e-n);return d(a)>i?p((b(t)*(o=m(r))*b(n)-b(r)*(s=m(t))*b(e))/(s*o*a)):(t+r)/2}(n,r,c,l),e.point(s,r),e.lineEnd(),e.lineStart(),e.point(u,r),t=0),e.point(n=c,r=l),s=u},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}),(function(e,t,n,r){var s;if(null==e)s=n*a,r.point(-o,s),r.point(0,s),r.point(o,s),r.point(o,0),r.point(o,-s),r.point(0,-s),r.point(-o,-s),r.point(-o,0),r.point(-o,s);else if(d(e[0]-t[0])>i){var c=e[0]<t[0]?o:-o;s=n*c/2,r.point(-c,s),r.point(0,s),r.point(c,s)}else r.point(t[0],t[1])}),[-o,-a]);function bt(e){var t=m(e),n=2*h,r=t>0,s=d(t)>i;function a(e,n){return m(e)*m(n)>t}function c(e,n,r){var s=[1,0,0],a=ce(oe(e),oe(n)),c=ae(a,a),l=a[0],u=c-l*l;if(!u)return!r&&e;var h=t*c/u,p=-t*l/u,f=ce(s,a),m=ue(s,h);le(m,ue(a,p));var g=f,A=ae(m,g),y=ae(g,g),_=A*A-y*(ae(m,m)-1);if(!(_<0)){var v=w(_),b=ue(g,(-A-v)/y);if(le(b,m),b=se(b),!r)return b;var x,E=e[0],T=n[0],S=e[1],M=n[1];T<E&&(x=E,E=T,T=x);var C=T-E,I=d(C-o)<i;if(!I&&M<S&&(x=S,S=M,M=x),I||C<i?I?S+M>0^b[1]<(d(b[0]-E)<i?S:M):S<=b[1]&&b[1]<=M:C>o^(E<=b[0]&&b[0]<=T)){var R=ue(g,(-A+v)/y);return le(R,m),[b,se(R)]}}}function l(t,n){var i=r?e:o-e,s=0;return t<-i?s|=1:t>i&&(s|=2),n<-i?s|=4:n>i&&(s|=8),s}return At(a,(function(e){var t,n,i,u,h;return{lineStart:function(){u=i=!1,h=1},point:function(d,p){var f,m=[d,p],g=a(d,p),A=r?g?0:l(d,p):g?l(d+(d<0?o:-o),p):0;if(!t&&(u=i=g)&&e.lineStart(),g!==i&&(!(f=c(t,m))||ut(t,f)||ut(m,f))&&(m[2]=1),g!==i)h=0,g?(e.lineStart(),f=c(m,t),e.point(f[0],f[1])):(f=c(t,m),e.point(f[0],f[1],2),e.lineEnd()),t=f;else if(s&&t&&r^g){var y;A&n||!(y=c(m,t,!0))||(h=0,r?(e.lineStart(),e.point(y[0][0],y[0][1]),e.point(y[1][0],y[1][1]),e.lineEnd()):(e.point(y[1][0],y[1][1]),e.lineEnd(),e.lineStart(),e.point(y[0][0],y[0][1],3)))}!g||t&&ut(t,m)||e.point(m[0],m[1]),t=m,i=g,n=A},lineEnd:function(){i&&e.lineEnd(),t=null},clean:function(){return h|(u&&i)<<1}}}),(function(t,r,i,s){ot(s,e,n,i,t,r)}),r?[0,-e]:[-o,e-o])}var xt,wt,Et,Tt,St=1e9,Mt=-St;function Ct(e,t,n,r){function s(i,s){return e<=i&&i<=n&&t<=s&&s<=r}function o(i,s,o,c){var u=0,h=0;if(null==i||(u=a(i,o))!==(h=a(s,o))||l(i,s)<0^o>0)do{c.point(0===u||3===u?e:n,u>1?r:t)}while((u=(u+o+4)%4)!==h);else c.point(s[0],s[1])}function a(r,s){return d(r[0]-e)<i?s>0?0:3:d(r[0]-n)<i?s>0?2:1:d(r[1]-t)<i?s>0?1:0:s>0?3:2}function c(e,t){return l(e.x,t.x)}function l(e,t){var n=a(e,1),r=a(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(i){var a,l,u,h,d,p,f,m,g,A,y,_=i,v=lt(),b={point:x,lineStart:function(){b.point=w,l&&l.push(u=[]);A=!0,g=!1,f=m=NaN},lineEnd:function(){a&&(w(h,d),p&&g&&v.rejoin(),a.push(v.result()));b.point=x,g&&_.lineEnd()},polygonStart:function(){_=v,a=[],l=[],y=!0},polygonEnd:function(){var t=function(){for(var t=0,n=0,i=l.length;n<i;++n)for(var s,o,a=l[n],c=1,u=a.length,h=a[0],d=h[0],p=h[1];c<u;++c)s=d,o=p,d=(h=a[c])[0],p=h[1],o<=r?p>r&&(d-s)*(r-o)>(p-o)*(e-s)&&++t:p<=r&&(d-s)*(r-o)<(p-o)*(e-s)&&--t;return t}(),n=y&&t,s=(a=gt(a)).length;(n||s)&&(i.polygonStart(),n&&(i.lineStart(),o(null,null,1,i),i.lineEnd()),s&&dt(a,c,t,o,i),i.polygonEnd());_=i,a=l=u=null}};function x(e,t){s(e,t)&&_.point(e,t)}function w(i,o){var a=s(i,o);if(l&&u.push([i,o]),A)h=i,d=o,p=a,A=!1,a&&(_.lineStart(),_.point(i,o));else if(a&&g)_.point(i,o);else{var c=[f=Math.max(Mt,Math.min(St,f)),m=Math.max(Mt,Math.min(St,m))],v=[i=Math.max(Mt,Math.min(St,i)),o=Math.max(Mt,Math.min(St,o))];!function(e,t,n,r,i,s){var o,a=e[0],c=e[1],l=0,u=1,h=t[0]-a,d=t[1]-c;if(o=n-a,h||!(o>0)){if(o/=h,h<0){if(o<l)return;o<u&&(u=o)}else if(h>0){if(o>u)return;o>l&&(l=o)}if(o=i-a,h||!(o<0)){if(o/=h,h<0){if(o>u)return;o>l&&(l=o)}else if(h>0){if(o<l)return;o<u&&(u=o)}if(o=r-c,d||!(o>0)){if(o/=d,d<0){if(o<l)return;o<u&&(u=o)}else if(d>0){if(o>u)return;o>l&&(l=o)}if(o=s-c,d||!(o<0)){if(o/=d,d<0){if(o>u)return;o>l&&(l=o)}else if(d>0){if(o<l)return;o<u&&(u=o)}return l>0&&(e[0]=a+l*h,e[1]=c+l*d),u<1&&(t[0]=a+u*h,t[1]=c+u*d),!0}}}}}(c,v,e,t,n,r)?a&&(_.lineStart(),_.point(i,o),y=!1):(g||(_.lineStart(),_.point(c[0],c[1])),_.point(v[0],v[1]),a||_.lineEnd(),y=!1)}f=i,m=o,g=a}return b}}function It(){var e,t,n,r=0,i=0,s=960,o=500;return n={stream:function(n){return e&&t===n?e:e=Ct(r,i,s,o)(t=n)},extent:function(a){return arguments.length?(r=+a[0][0],i=+a[0][1],s=+a[1][0],o=+a[1][1],e=t=null,n):[[r,i],[s,o]]}}}var Rt={sphere:C,point:C,lineStart:function(){Rt.point=Pt,Rt.lineEnd=Bt},lineEnd:C,polygonStart:C,polygonEnd:C};function Bt(){Rt.point=Rt.lineEnd=C}function Pt(e,t){wt=e*=h,Et=b(t*=h),Tt=m(t),Rt.point=Dt}function Dt(e,t){e*=h;var n=b(t*=h),r=m(t),i=d(e-wt),s=m(i),o=r*b(i),a=Tt*n-Et*r*s,c=Et*n+Tt*r*s;xt.add(f(w(o*o+a*a),c)),wt=e,Et=n,Tt=r}function Ot(e){return xt=new r,O(e,Rt),+xt}var Lt=[null,null],Nt={type:"LineString",coordinates:Lt};function Ft(e,t){return Lt[0]=e,Lt[1]=t,Ot(Nt)}var Ut={Feature:function(e,t){return zt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)if(zt(n[r].geometry,t))return!0;return!1}},kt={Sphere:function(){return!0},Point:function(e,t){return Gt(e.coordinates,t)},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Gt(n[r],t))return!0;return!1},LineString:function(e,t){return jt(e.coordinates,t)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(jt(n[r],t))return!0;return!1},Polygon:function(e,t){return Vt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)if(Vt(n[r],t))return!0;return!1},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)if(zt(n[r],t))return!0;return!1}};function zt(e,t){return!(!e||!kt.hasOwnProperty(e.type))&&kt[e.type](e,t)}function Gt(e,t){return 0===Ft(e,t)}function jt(e,t){for(var n,r,i,o=0,a=e.length;o<a;o++){if(0===(r=Ft(e[o],t)))return!0;if(o>0&&(i=Ft(e[o],e[o-1]))>0&&n<=i&&r<=i&&(n+r-i)*(1-Math.pow((n-r)/i,2))<s*i)return!0;n=r}return!1}function Vt(e,t){return!!mt(e.map(Qt),Ht(t))}function Qt(e){return(e=e.map(Ht)).pop(),e}function Ht(e){return[e[0]*h,e[1]*h]}function Wt(e,t){return(e&&Ut.hasOwnProperty(e.type)?Ut[e.type]:zt)(e,t)}function qt(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Xt(e,t,n){var r=qt(e,t-i,n).concat(t);return function(e){return r.map((function(t){return[e,t]}))}}function Kt(e,t,n){var r=qt(e,t-i,n).concat(t);return function(e){return r.map((function(t){return[t,e]}))}}function Yt(){var e,t,n,r,s,o,a,c,l,u,h,p,f=10,m=f,A=90,y=360,_=2.5;function v(){return{type:"MultiLineString",coordinates:b()}}function b(){return qt(g(r/A)*A,n,A).map(h).concat(qt(g(c/y)*y,a,y).map(p)).concat(qt(g(t/f)*f,e,f).filter((function(e){return d(e%A)>i})).map(l)).concat(qt(g(o/m)*m,s,m).filter((function(e){return d(e%y)>i})).map(u))}return v.lines=function(){return b().map((function(e){return{type:"LineString",coordinates:e}}))},v.outline=function(){return{type:"Polygon",coordinates:[h(r).concat(p(a).slice(1),h(n).reverse().slice(1),p(c).reverse().slice(1))]}},v.extent=function(e){return arguments.length?v.extentMajor(e).extentMinor(e):v.extentMinor()},v.extentMajor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],c=+e[0][1],a=+e[1][1],r>n&&(e=r,r=n,n=e),c>a&&(e=c,c=a,a=e),v.precision(_)):[[r,c],[n,a]]},v.extentMinor=function(n){return arguments.length?(t=+n[0][0],e=+n[1][0],o=+n[0][1],s=+n[1][1],t>e&&(n=t,t=e,e=n),o>s&&(n=o,o=s,s=n),v.precision(_)):[[t,o],[e,s]]},v.step=function(e){return arguments.length?v.stepMajor(e).stepMinor(e):v.stepMinor()},v.stepMajor=function(e){return arguments.length?(A=+e[0],y=+e[1],v):[A,y]},v.stepMinor=function(e){return arguments.length?(f=+e[0],m=+e[1],v):[f,m]},v.precision=function(i){return arguments.length?(_=+i,l=Xt(o,s,90),u=Kt(t,e,_),h=Xt(c,a,90),p=Kt(r,n,_),v):_},v.extentMajor([[-180,-90+i],[180,90-i]]).extentMinor([[-180,-80-i],[180,80+i]])}function Jt(){return Yt()()}function $t(e,t){var n=e[0]*h,r=e[1]*h,i=t[0]*h,s=t[1]*h,o=m(r),a=b(r),c=m(s),l=b(s),d=o*m(n),p=o*b(n),g=c*m(i),A=c*b(i),y=2*S(w(M(s-r)+o*c*M(i-n))),_=b(y),v=y?function(e){var t=b(e*=y)/_,n=b(y-e)/_,r=n*d+t*g,i=n*p+t*A,s=n*a+t*l;return[f(i,r)*u,f(s,w(r*r+i*i))*u]}:function(){return[n*u,r*u]};return v.distance=y,v}const Zt=e=>e;var en,tn,nn,rn,sn=new r,on=new r,an={point:C,lineStart:C,lineEnd:C,polygonStart:function(){an.lineStart=cn,an.lineEnd=hn},polygonEnd:function(){an.lineStart=an.lineEnd=an.point=C,sn.add(d(on)),on=new r},result:function(){var e=sn/2;return sn=new r,e}};function cn(){an.point=ln}function ln(e,t){an.point=un,en=nn=e,tn=rn=t}function un(e,t){on.add(rn*e-nn*t),nn=e,rn=t}function hn(){un(en,tn)}const dn=an;var pn=1/0,fn=pn,mn=-pn,gn=mn,An={point:function(e,t){e<pn&&(pn=e);e>mn&&(mn=e);t<fn&&(fn=t);t>gn&&(gn=t)},lineStart:C,lineEnd:C,polygonStart:C,polygonEnd:C,result:function(){var e=[[pn,fn],[mn,gn]];return mn=gn=-(fn=pn=1/0),e}};const yn=An;var _n,vn,bn,xn,wn=0,En=0,Tn=0,Sn=0,Mn=0,Cn=0,In=0,Rn=0,Bn=0,Pn={point:Dn,lineStart:On,lineEnd:Fn,polygonStart:function(){Pn.lineStart=Un,Pn.lineEnd=kn},polygonEnd:function(){Pn.point=Dn,Pn.lineStart=On,Pn.lineEnd=Fn},result:function(){var e=Bn?[In/Bn,Rn/Bn]:Cn?[Sn/Cn,Mn/Cn]:Tn?[wn/Tn,En/Tn]:[NaN,NaN];return wn=En=Tn=Sn=Mn=Cn=In=Rn=Bn=0,e}};function Dn(e,t){wn+=e,En+=t,++Tn}function On(){Pn.point=Ln}function Ln(e,t){Pn.point=Nn,Dn(bn=e,xn=t)}function Nn(e,t){var n=e-bn,r=t-xn,i=w(n*n+r*r);Sn+=i*(bn+e)/2,Mn+=i*(xn+t)/2,Cn+=i,Dn(bn=e,xn=t)}function Fn(){Pn.point=Dn}function Un(){Pn.point=zn}function kn(){Gn(_n,vn)}function zn(e,t){Pn.point=Gn,Dn(_n=bn=e,vn=xn=t)}function Gn(e,t){var n=e-bn,r=t-xn,i=w(n*n+r*r);Sn+=i*(bn+e)/2,Mn+=i*(xn+t)/2,Cn+=i,In+=(i=xn*e-bn*t)*(bn+e),Rn+=i*(xn+t),Bn+=3*i,Dn(bn=e,xn=t)}const jn=Pn;function Vn(e){this._context=e}Vn.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:this._context.moveTo(e,t),this._point=1;break;case 1:this._context.lineTo(e,t);break;default:this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,l)}},result:C};var Qn,Hn,Wn,qn,Xn,Kn=new r,Yn={point:C,lineStart:function(){Yn.point=Jn},lineEnd:function(){Qn&&$n(Hn,Wn),Yn.point=C},polygonStart:function(){Qn=!0},polygonEnd:function(){Qn=null},result:function(){var e=+Kn;return Kn=new r,e}};function Jn(e,t){Yn.point=$n,Hn=qn=e,Wn=Xn=t}function $n(e,t){qn-=e,Xn-=t,Kn.add(w(qn*qn+Xn*Xn)),qn=e,Xn=t}const Zn=Yn;let er,tr,nr,rr;class ir{constructor(e){this._append=null==e?sr:function(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return sr;if(t!==er){const e=10**t;er=t,tr=function(t){let n=1;this._+=t[0];for(const r=t.length;n<r;++n)this._+=Math.round(arguments[n]*e)/e+t[n]}}return tr}(e),this._radius=4.5,this._=""}pointRadius(e){return this._radius=+e,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){0===this._line&&(this._+="Z"),this._point=NaN}point(e,t){switch(this._point){case 0:this._append`M${e},${t}`,this._point=1;break;case 1:this._append`L${e},${t}`;break;default:if(this._append`M${e},${t}`,this._radius!==nr||this._append!==tr){const e=this._radius,t=this._;this._="",this._append`m0,${e}a${e},${e} 0 1,1 0,${-2*e}a${e},${e} 0 1,1 0,${2*e}z`,nr=e,tr=this._append,rr=this._,this._=t}this._+=rr}}result(){const e=this._;return this._="",e.length?e:null}}function sr(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function or(e,t){let n,r,i=3,s=4.5;function o(e){return e&&("function"==typeof s&&r.pointRadius(+s.apply(this,arguments)),O(e,n(r))),r.result()}return o.area=function(e){return O(e,n(dn)),dn.result()},o.measure=function(e){return O(e,n(Zn)),Zn.result()},o.bounds=function(e){return O(e,n(yn)),yn.result()},o.centroid=function(e){return O(e,n(jn)),jn.result()},o.projection=function(t){return arguments.length?(n=null==t?(e=null,Zt):(e=t).stream,o):e},o.context=function(e){return arguments.length?(r=null==e?(t=null,new ir(i)):new Vn(t=e),"function"!=typeof s&&r.pointRadius(s),o):t},o.pointRadius=function(e){return arguments.length?(s="function"==typeof e?e:(r.pointRadius(+e),+e),o):s},o.digits=function(e){if(!arguments.length)return i;if(null==e)i=null;else{const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);i=t}return null===t&&(r=new ir(i)),o},o.projection(e).digits(i).context(t)}function ar(e){return{stream:cr(e)}}function cr(e){return function(t){var n=new lr;for(var r in e)n[r]=e[r];return n.stream=t,n}}function lr(){}function ur(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),null!=r&&e.clipExtent(null),O(n,e.stream(yn)),t(yn.result()),null!=r&&e.clipExtent(r),e}function hr(e,t,n){return ur(e,(function(n){var r=t[1][0]-t[0][0],i=t[1][1]-t[0][1],s=Math.min(r/(n[1][0]-n[0][0]),i/(n[1][1]-n[0][1])),o=+t[0][0]+(r-s*(n[1][0]+n[0][0]))/2,a=+t[0][1]+(i-s*(n[1][1]+n[0][1]))/2;e.scale(150*s).translate([o,a])}),n)}function dr(e,t,n){return hr(e,[[0,0],t],n)}function pr(e,t,n){return ur(e,(function(n){var r=+t,i=r/(n[1][0]-n[0][0]),s=(r-i*(n[1][0]+n[0][0]))/2,o=-i*n[0][1];e.scale(150*i).translate([s,o])}),n)}function fr(e,t,n){return ur(e,(function(n){var r=+t,i=r/(n[1][1]-n[0][1]),s=-i*n[0][0],o=(r-i*(n[1][1]+n[0][1]))/2;e.scale(150*i).translate([s,o])}),n)}lr.prototype={constructor:lr,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var mr=16,gr=m(30*h);function Ar(e,t){return+t?function(e,t){function n(r,s,o,a,c,l,u,h,p,m,g,A,y,_){var v=u-r,b=h-s,x=v*v+b*b;if(x>4*t&&y--){var E=a+m,T=c+g,M=l+A,C=w(E*E+T*T+M*M),I=S(M/=C),R=d(d(M)-1)<i||d(o-p)<i?(o+p)/2:f(T,E),B=e(R,I),P=B[0],D=B[1],O=P-r,L=D-s,N=b*O-v*L;(N*N/x>t||d((v*O+b*L)/x-.5)>.3||a*m+c*g+l*A<gr)&&(n(r,s,o,a,c,l,P,D,R,E/=C,T/=C,M,y,_),_.point(P,D),n(P,D,R,E,T,M,u,h,p,m,g,A,y,_))}}return function(t){var r,i,s,o,a,c,l,u,h,d,p,f,m={point:g,lineStart:A,lineEnd:_,polygonStart:function(){t.polygonStart(),m.lineStart=v},polygonEnd:function(){t.polygonEnd(),m.lineStart=A}};function g(n,r){n=e(n,r),t.point(n[0],n[1])}function A(){u=NaN,m.point=y,t.lineStart()}function y(r,i){var s=oe([r,i]),o=e(r,i);n(u,h,l,d,p,f,u=o[0],h=o[1],l=r,d=s[0],p=s[1],f=s[2],mr,t),t.point(u,h)}function _(){m.point=g,t.lineEnd()}function v(){A(),m.point=b,m.lineEnd=x}function b(e,t){y(r=e,t),i=u,s=h,o=d,a=p,c=f,m.point=y}function x(){n(u,h,l,d,p,f,i,s,r,o,a,c,mr,t),m.lineEnd=_,_()}return m}}(e,t):function(e){return cr({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}(e)}var yr=cr({point:function(e,t){this.stream.point(e*h,t*h)}});function _r(e,t,n,r,i,s){if(!s)return function(e,t,n,r,i){function s(s,o){return[t+e*(s*=r),n-e*(o*=i)]}return s.invert=function(s,o){return[(s-t)/e*r,(n-o)/e*i]},s}(e,t,n,r,i);var o=m(s),a=b(s),c=o*e,l=a*e,u=o/e,h=a/e,d=(a*n-o*t)/e,p=(a*t+o*n)/e;function f(e,s){return[c*(e*=r)-l*(s*=i)+t,n-l*e-c*s]}return f.invert=function(e,t){return[r*(u*e-h*t+d),i*(p-h*e-u*t)]},f}function vr(e){return br((function(){return e}))()}function br(e){var t,n,r,i,s,o,a,c,l,d,p=150,f=480,m=250,g=0,A=0,y=0,_=0,v=0,b=0,x=1,E=1,T=null,S=vt,M=null,C=Zt,I=.5;function R(e){return c(e[0]*h,e[1]*h)}function B(e){return(e=c.invert(e[0],e[1]))&&[e[0]*u,e[1]*u]}function P(){var e=_r(p,0,0,x,E,b).apply(null,t(g,A)),r=_r(p,f-e[0],m-e[1],x,E,b);return n=tt(y,_,v),a=Ze(t,r),c=Ze(n,a),o=Ar(a,I),D()}function D(){return l=d=null,R}return R.stream=function(e){return l&&d===e?l:l=yr(function(e){return cr({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}(n)(S(o(C(d=e)))))},R.preclip=function(e){return arguments.length?(S=e,T=void 0,D()):S},R.postclip=function(e){return arguments.length?(C=e,M=r=i=s=null,D()):C},R.clipAngle=function(e){return arguments.length?(S=+e?bt(T=e*h):(T=null,vt),D()):T*u},R.clipExtent=function(e){return arguments.length?(C=null==e?(M=r=i=s=null,Zt):Ct(M=+e[0][0],r=+e[0][1],i=+e[1][0],s=+e[1][1]),D()):null==M?null:[[M,r],[i,s]]},R.scale=function(e){return arguments.length?(p=+e,P()):p},R.translate=function(e){return arguments.length?(f=+e[0],m=+e[1],P()):[f,m]},R.center=function(e){return arguments.length?(g=e[0]%360*h,A=e[1]%360*h,P()):[g*u,A*u]},R.rotate=function(e){return arguments.length?(y=e[0]%360*h,_=e[1]%360*h,v=e.length>2?e[2]%360*h:0,P()):[y*u,_*u,v*u]},R.angle=function(e){return arguments.length?(b=e%360*h,P()):b*u},R.reflectX=function(e){return arguments.length?(x=e?-1:1,P()):x<0},R.reflectY=function(e){return arguments.length?(E=e?-1:1,P()):E<0},R.precision=function(e){return arguments.length?(o=Ar(a,I=e*e),D()):w(I)},R.fitExtent=function(e,t){return hr(R,e,t)},R.fitSize=function(e,t){return dr(R,e,t)},R.fitWidth=function(e,t){return pr(R,e,t)},R.fitHeight=function(e,t){return fr(R,e,t)},function(){return t=e.apply(this,arguments),R.invert=t.invert&&B,P()}}function xr(e){var t=0,n=o/3,r=br(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*h,n=e[1]*h):[t*u,n*u]},i}function wr(e,t){var n=b(e),r=(n+b(t))/2;if(d(r)<i)return function(e){var t=m(e);function n(e,n){return[e*t,b(n)/t]}return n.invert=function(e,n){return[e/t,S(n*t)]},n}(e);var s=1+n*(2*r-n),a=w(s)/r;function c(e,t){var n=w(s-2*r*b(t))/r;return[n*b(e*=r),a-n*m(e)]}return c.invert=function(e,t){var n=a-t,i=f(e,d(n))*x(n);return n*r<0&&(i-=o*x(e)*x(n)),[i/r,S((s-(e*e+n*n)*r*r)/(2*r))]},c}function Er(){return xr(wr).scale(155.424).center([0,33.6442])}function Tr(){return Er().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Sr(){var e,t,n,r,s,o,a=Tr(),c=Er().rotate([154,0]).center([-2,58.5]).parallels([55,65]),l=Er().rotate([157,0]).center([-3,19.9]).parallels([8,18]),u={point:function(e,t){o=[e,t]}};function h(e){var t=e[0],i=e[1];return o=null,n.point(t,i),o||(r.point(t,i),o)||(s.point(t,i),o)}function d(){return e=t=null,h}return h.invert=function(e){var t=a.scale(),n=a.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?c:i>=.166&&i<.234&&r>=-.214&&r<-.115?l:a).invert(e)},h.stream=function(n){return e&&t===n?e:(r=[a.stream(t=n),c.stream(n),l.stream(n)],i=r.length,e={point:function(e,t){for(var n=-1;++n<i;)r[n].point(e,t)},sphere:function(){for(var e=-1;++e<i;)r[e].sphere()},lineStart:function(){for(var e=-1;++e<i;)r[e].lineStart()},lineEnd:function(){for(var e=-1;++e<i;)r[e].lineEnd()},polygonStart:function(){for(var e=-1;++e<i;)r[e].polygonStart()},polygonEnd:function(){for(var e=-1;++e<i;)r[e].polygonEnd()}});var r,i},h.precision=function(e){return arguments.length?(a.precision(e),c.precision(e),l.precision(e),d()):a.precision()},h.scale=function(e){return arguments.length?(a.scale(e),c.scale(.35*e),l.scale(e),h.translate(a.translate())):a.scale()},h.translate=function(e){if(!arguments.length)return a.translate();var t=a.scale(),o=+e[0],h=+e[1];return n=a.translate(e).clipExtent([[o-.455*t,h-.238*t],[o+.455*t,h+.238*t]]).stream(u),r=c.translate([o-.307*t,h+.201*t]).clipExtent([[o-.425*t+i,h+.12*t+i],[o-.214*t-i,h+.234*t-i]]).stream(u),s=l.translate([o-.205*t,h+.212*t]).clipExtent([[o-.214*t+i,h+.166*t+i],[o-.115*t-i,h+.234*t-i]]).stream(u),d()},h.fitExtent=function(e,t){return hr(h,e,t)},h.fitSize=function(e,t){return dr(h,e,t)},h.fitWidth=function(e,t){return pr(h,e,t)},h.fitHeight=function(e,t){return fr(h,e,t)},h.scale(1070)}function Mr(e){return function(t,n){var r=m(t),i=m(n),s=e(r*i);return s===1/0?[2,0]:[s*i*b(t),s*b(n)]}}function Cr(e){return function(t,n){var r=w(t*t+n*n),i=e(r),s=b(i),o=m(i);return[f(t*s,r*o),S(r&&n*s/r)]}}var Ir=Mr((function(e){return w(2/(1+e))}));function Rr(){return vr(Ir).scale(124.75).clipAngle(179.999)}Ir.invert=Cr((function(e){return 2*S(e/2)}));var Br=Mr((function(e){return(e=T(e))&&e/b(e)}));function Pr(){return vr(Br).scale(79.4188).clipAngle(179.999)}function Dr(e,t){return[e,_(E((a+t)/2))]}function Or(){return Lr(Dr).scale(961/l)}function Lr(e){var t,n,r,i=vr(e),s=i.center,a=i.scale,c=i.translate,l=i.clipExtent,u=null;function h(){var s=o*a(),c=i(st(i.rotate()).invert([0,0]));return l(null==u?[[c[0]-s,c[1]-s],[c[0]+s,c[1]+s]]:e===Dr?[[Math.max(c[0]-s,u),t],[Math.min(c[0]+s,n),r]]:[[u,Math.max(c[1]-s,t)],[n,Math.min(c[1]+s,r)]])}return i.scale=function(e){return arguments.length?(a(e),h()):a()},i.translate=function(e){return arguments.length?(c(e),h()):c()},i.center=function(e){return arguments.length?(s(e),h()):s()},i.clipExtent=function(e){return arguments.length?(null==e?u=t=n=r=null:(u=+e[0][0],t=+e[0][1],n=+e[1][0],r=+e[1][1]),h()):null==u?null:[[u,t],[n,r]]},h()}function Nr(e){return E((a+e)/2)}function Fr(e,t){var n=m(e),r=e===t?b(e):_(n/m(t))/_(Nr(t)/Nr(e)),s=n*v(Nr(e),r)/r;if(!r)return Dr;function c(e,t){s>0?t<-a+i&&(t=-a+i):t>a-i&&(t=a-i);var n=s/v(Nr(t),r);return[n*b(r*e),s-n*m(r*e)]}return c.invert=function(e,t){var n=s-t,i=x(r)*w(e*e+n*n),c=f(e,d(n))*x(n);return n*r<0&&(c-=o*x(e)*x(n)),[c/r,2*p(v(s/i,1/r))-a]},c}function Ur(){return xr(Fr).scale(109.5).parallels([30,30])}function kr(e,t){return[e,t]}function zr(){return vr(kr).scale(152.63)}function Gr(e,t){var n=m(e),r=e===t?b(e):(n-m(t))/(t-e),s=n/r+e;if(d(r)<i)return kr;function a(e,t){var n=s-t,i=r*e;return[n*b(i),s-n*m(i)]}return a.invert=function(e,t){var n=s-t,i=f(e,d(n))*x(n);return n*r<0&&(i-=o*x(e)*x(n)),[i/r,s-x(r)*w(e*e+n*n)]},a}function jr(){return xr(Gr).scale(131.154).center([0,13.9389])}Br.invert=Cr((function(e){return e})),Dr.invert=function(e,t){return[e,2*p(A(t))-a]},kr.invert=kr;var Vr=1.340264,Qr=-.081106,Hr=893e-6,Wr=.003796,qr=w(3)/2;function Xr(e,t){var n=S(qr*b(t)),r=n*n,i=r*r*r;return[e*m(n)/(qr*(Vr+3*Qr*r+i*(7*Hr+9*Wr*r))),n*(Vr+Qr*r+i*(Hr+Wr*r))]}function Kr(){return vr(Xr).scale(177.158)}function Yr(e,t){var n=m(t),r=m(e)*n;return[n*b(e)/r,b(t)/r]}function Jr(){return vr(Yr).scale(144.049).clipAngle(60)}function $r(){var e,t,n,r,i,s,o,a=1,c=0,l=0,d=1,p=1,f=0,g=null,A=1,y=1,_=cr({point:function(e,t){var n=w([e,t]);this.stream.point(n[0],n[1])}}),v=Zt;function x(){return A=a*d,y=a*p,s=o=null,w}function w(n){var r=n[0]*A,i=n[1]*y;if(f){var s=i*e-r*t;r=r*e+i*t,i=s}return[r+c,i+l]}return w.invert=function(n){var r=n[0]-c,i=n[1]-l;if(f){var s=i*e+r*t;r=r*e-i*t,i=s}return[r/A,i/y]},w.stream=function(e){return s&&o===e?s:s=_(v(o=e))},w.postclip=function(e){return arguments.length?(v=e,g=n=r=i=null,x()):v},w.clipExtent=function(e){return arguments.length?(v=null==e?(g=n=r=i=null,Zt):Ct(g=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),x()):null==g?null:[[g,n],[r,i]]},w.scale=function(e){return arguments.length?(a=+e,x()):a},w.translate=function(e){return arguments.length?(c=+e[0],l=+e[1],x()):[c,l]},w.angle=function(n){return arguments.length?(t=b(f=n%360*h),e=m(f),x()):f*u},w.reflectX=function(e){return arguments.length?(d=e?-1:1,x()):d<0},w.reflectY=function(e){return arguments.length?(p=e?-1:1,x()):p<0},w.fitExtent=function(e,t){return hr(w,e,t)},w.fitSize=function(e,t){return dr(w,e,t)},w.fitWidth=function(e,t){return pr(w,e,t)},w.fitHeight=function(e,t){return fr(w,e,t)},w}function Zr(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(r*(.003971*n-.001529*r)-.013791)),t*(1.007226+n*(.015085+r*(.028874*n-.044475-.005916*r)))]}function ei(){return vr(Zr).scale(175.295)}function ti(e,t){return[m(t)*b(e),b(t)]}function ni(){return vr(ti).scale(249.5).clipAngle(90+i)}function ri(e,t){var n=m(t),r=1+m(e)*n;return[n*b(e)/r,b(t)/r]}function ii(){return vr(ri).scale(250).clipAngle(142)}function si(e,t){return[_(E((a+t)/2)),-e]}function oi(){var e=Lr(si),t=e.center,n=e.rotate;return e.center=function(e){return arguments.length?t([-e[1],e[0]]):[(e=t())[1],-e[0]]},e.rotate=function(e){return arguments.length?n([e[0],e[1],e.length>2?e[2]+90:90]):[(e=n())[0],e[1],e[2]-90]},n([0,0,90]).scale(159.155)}Xr.invert=function(e,t){for(var n,r=t,i=r*r,o=i*i*i,a=0;a<12&&(o=(i=(r-=n=(r*(Vr+Qr*i+o*(Hr+Wr*i))-t)/(Vr+3*Qr*i+o*(7*Hr+9*Wr*i)))*r)*i*i,!(d(n)<s));++a);return[qr*e*(Vr+3*Qr*i+o*(7*Hr+9*Wr*i))/m(r),S(b(r)/qr)]},Yr.invert=Cr(p),Zr.invert=function(e,t){var n,r=t,s=25;do{var o=r*r,a=o*o;r-=n=(r*(1.007226+o*(.015085+a*(.028874*o-.044475-.005916*a)))-t)/(1.007226+o*(.045255+a*(.259866*o-.311325-.005916*11*a)))}while(d(n)>i&&--s>0);return[e/(.8707+(o=r*r)*(o*(o*o*o*(.003971-.001529*o)-.013791)-.131979)),r]},ti.invert=Cr(S),ri.invert=Cr((function(e){return 2*p(e)})),si.invert=function(e,t){return[-t,2*p(A(e))-a]}},9271:(e,t,n)=>{"use strict";n.r(t),n.d(t,{add:()=>T,after:()=>k,ary:()=>vt,assign:()=>hn,assignIn:()=>An,assignInWith:()=>_n,assignWith:()=>bn,at:()=>_r,attempt:()=>Ir,before:()=>Rr,bind:()=>Pr,bindAll:()=>Dr,bindKey:()=>Lr,camelCase:()=>Gi,capitalize:()=>ri,castArray:()=>ji,ceil:()=>Wi,chain:()=>qi,chunk:()=>Yi,clamp:()=>$i,clone:()=>uo,cloneDeep:()=>ho,cloneDeepWith:()=>po,cloneWith:()=>fo,commit:()=>mo,compact:()=>go,concat:()=>Ao,cond:()=>Jo,conforms:()=>ea,conformsTo:()=>ta,constant:()=>Ve,countBy:()=>da,create:()=>pa,curry:()=>ma,curryRight:()=>Aa,debounce:()=>ba,deburr:()=>li,default:()=>ug,defaultTo:()=>xa,defaults:()=>Sa,defaultsDeep:()=>Na,defer:()=>ka,delay:()=>Ga,difference:()=>Ha,differenceBy:()=>Xa,differenceWith:()=>Ya,divide:()=>Ja,drop:()=>$a,dropRight:()=>Za,dropRightWhile:()=>tc,dropWhile:()=>nc,each:()=>ic,eachRight:()=>lc,endsWith:()=>uc,entries:()=>fc,entriesIn:()=>mc,eq:()=>xt,escape:()=>_c,escapeRegExp:()=>xc,every:()=>Tc,extend:()=>An,extendWith:()=>_n,fill:()=>Cc,filter:()=>Rc,find:()=>Oc,findIndex:()=>Dc,findKey:()=>Nc,findLast:()=>zc,findLastIndex:()=>kc,findLastKey:()=>Gc,first:()=>jc,flatMap:()=>Hc,flatMapDeep:()=>qc,flatMapDepth:()=>Xc,flatten:()=>Ar,flattenDeep:()=>Yc,flattenDepth:()=>Jc,flip:()=>$c,floor:()=>Zc,flow:()=>tl,flowRight:()=>nl,forEach:()=>ic,forEachRight:()=>lc,forIn:()=>rl,forInRight:()=>il,forOwn:()=>sl,forOwnRight:()=>ol,fromPairs:()=>al,functions:()=>ll,functionsIn:()=>ul,get:()=>hr,groupBy:()=>pl,gt:()=>gl,gte:()=>Al,has:()=>vl,hasIn:()=>Ho,head:()=>jc,identity:()=>z,inRange:()=>El,includes:()=>Il,indexOf:()=>Bl,initial:()=>Pl,intersection:()=>Nl,intersectionBy:()=>Ul,intersectionWith:()=>kl,invert:()=>Ql,invertBy:()=>Kl,invoke:()=>$l,invokeMap:()=>eu,isArguments:()=>zt,isArray:()=>v,isArrayBuffer:()=>ru,isArrayLike:()=>Rt,isArrayLikeObject:()=>Ca,isBoolean:()=>iu,isBuffer:()=>Ht,isDate:()=>au,isElement:()=>cu,isEmpty:()=>uu,isEqual:()=>hu,isEqualWith:()=>du,isError:()=>Mr,isFinite:()=>fu,isFunction:()=>G,isInteger:()=>mu,isLength:()=>It,isMap:()=>to,isMatch:()=>gu,isMatchWith:()=>Au,isNaN:()=>_u,isNative:()=>bu,isNil:()=>xu,isNull:()=>wu,isNumber:()=>yu,isObject:()=>R,isObjectLike:()=>g,isPlainObject:()=>Sr,isRegExp:()=>Su,isSafeInteger:()=>Cu,isSet:()=>io,isString:()=>Tl,isSymbol:()=>A,isTypedArray:()=>en,isUndefined:()=>Iu,isWeakMap:()=>Ru,isWeakSet:()=>Bu,iteratee:()=>Pu,join:()=>Ou,kebabCase:()=>Nu,keyBy:()=>Uu,keys:()=>cn,keysIn:()=>mn,last:()=>Wa,lastIndexOf:()=>ju,lodash:()=>De,lowerCase:()=>Qu,lowerFirst:()=>Hu,lt:()=>qu,lte:()=>Xu,map:()=>Qc,mapKeys:()=>Ku,mapValues:()=>Yu,matches:()=>Ju,matchesProperty:()=>$u,max:()=>eh,maxBy:()=>th,mean:()=>ih,meanBy:()=>sh,memoize:()=>tr,merge:()=>ah,mergeWith:()=>La,method:()=>ch,methodOf:()=>lh,min:()=>uh,minBy:()=>hh,mixin:()=>dh,multiply:()=>ph,negate:()=>fh,next:()=>yh,noop:()=>be,now:()=>ya,nth:()=>vh,nthArg:()=>bh,omit:()=>Th,omitBy:()=>Ih,once:()=>Rh,orderBy:()=>Lh,over:()=>Fh,overArgs:()=>Gh,overEvery:()=>jh,overSome:()=>Vh,pad:()=>hd,padEnd:()=>dd,padStart:()=>pd,parseInt:()=>gd,partial:()=>yd,partialRight:()=>vd,partition:()=>xd,pick:()=>Ed,pickBy:()=>Ch,plant:()=>Td,property:()=>Ko,propertyOf:()=>Sd,pull:()=>Bd,pullAll:()=>Rd,pullAllBy:()=>Pd,pullAllWith:()=>Dd,pullAt:()=>Fd,random:()=>Qd,range:()=>Kd,rangeRight:()=>Yd,rearg:()=>$d,reduce:()=>ep,reduceRight:()=>np,reject:()=>rp,remove:()=>ip,repeat:()=>sp,replace:()=>op,rest:()=>ap,result:()=>cp,reverse:()=>up,round:()=>hp,sample:()=>fp,sampleSize:()=>yp,set:()=>_p,setWith:()=>vp,shuffle:()=>wp,size:()=>Ep,slice:()=>Tp,snakeCase:()=>Mp,some:()=>Ip,sortBy:()=>Rp,sortedIndex:()=>Lp,sortedIndexBy:()=>Np,sortedIndexOf:()=>Fp,sortedLastIndex:()=>Up,sortedLastIndexBy:()=>kp,sortedLastIndexOf:()=>zp,sortedUniq:()=>jp,sortedUniqBy:()=>Vp,split:()=>Qp,spread:()=>Wp,startCase:()=>Xp,startsWith:()=>Kp,stubArray:()=>fs,stubFalse:()=>Gt,stubObject:()=>Yp,stubString:()=>Jp,stubTrue:()=>$p,subtract:()=>Zp,sum:()=>ef,sumBy:()=>tf,tail:()=>nf,take:()=>rf,takeRight:()=>sf,takeRightWhile:()=>of,takeWhile:()=>af,tap:()=>cf,template:()=>Ef,templateSettings:()=>mf,throttle:()=>Tf,thru:()=>Sf,times:()=>If,toArray:()=>Ah,toFinite:()=>F,toInteger:()=>U,toIterator:()=>Rf,toJSON:()=>Pf,toLength:()=>Sc,toLower:()=>Df,toNumber:()=>L,toPairs:()=>fc,toPairsIn:()=>mc,toPath:()=>Of,toPlainObject:()=>Ra,toSafeInteger:()=>Nf,toString:()=>ar,toUpper:()=>Ff,transform:()=>Uf,trim:()=>Gf,trimEnd:()=>jf,trimStart:()=>Qf,truncate:()=>Wf,unary:()=>qf,unescape:()=>Jf,union:()=>tm,unionBy:()=>rm,unionWith:()=>im,uniq:()=>sm,uniqBy:()=>om,uniqWith:()=>am,uniqueId:()=>lm,unset:()=>um,unzip:()=>dm,unzipWith:()=>pm,update:()=>mm,updateWith:()=>gm,upperCase:()=>ym,upperFirst:()=>ni,value:()=>Pf,valueOf:()=>Pf,values:()=>Ml,valuesIn:()=>_m,without:()=>bm,words:()=>Fi,wrap:()=>xm,wrapperAt:()=>wm,wrapperChain:()=>Em,wrapperCommit:()=>mo,wrapperLodash:()=>De,wrapperNext:()=>yh,wrapperPlant:()=>Td,wrapperReverse:()=>Tm,wrapperToIterator:()=>Rf,wrapperValue:()=>Pf,xor:()=>Mm,xorBy:()=>Im,xorWith:()=>Rm,zip:()=>Bm,zipObject:()=>Dm,zipObjectDeep:()=>Om,zipWith:()=>Nm});const r="object"==typeof global&&global&&global.Object===Object&&global;var i="object"==typeof self&&self&&self.Object===Object&&self;const s=r||i||Function("return this")();const o=s.Symbol;var a=Object.prototype,c=a.hasOwnProperty,l=a.toString,u=o?o.toStringTag:void 0;const h=function(e){var t=c.call(e,u),n=e[u];try{e[u]=void 0;var r=!0}catch(e){}var i=l.call(e);return r&&(t?e[u]=n:delete e[u]),i};var d=Object.prototype.toString;const p=function(e){return d.call(e)};var f=o?o.toStringTag:void 0;const m=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":f&&f in Object(e)?h(e):p(e)};const g=function(e){return null!=e&&"object"==typeof e};const A=function(e){return"symbol"==typeof e||g(e)&&"[object Symbol]"==m(e)};const y=function(e){return"number"==typeof e?e:A(e)?NaN:+e};const _=function(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i};const v=Array.isArray;var b=o?o.prototype:void 0,x=b?b.toString:void 0;const w=function e(t){if("string"==typeof t)return t;if(v(t))return _(t,e)+"";if(A(t))return x?x.call(t):"";var n=t+"";return"0"==n&&1/t==-1/0?"-0":n};const E=function(e,t){return function(n,r){var i;if(void 0===n&&void 0===r)return t;if(void 0!==n&&(i=n),void 0!==r){if(void 0===i)return r;"string"==typeof n||"string"==typeof r?(n=w(n),r=w(r)):(n=y(n),r=y(r)),i=e(n,r)}return i}};const T=E((function(e,t){return e+t}),0);var S=/\s/;const M=function(e){for(var t=e.length;t--&&S.test(e.charAt(t)););return t};var C=/^\s+/;const I=function(e){return e?e.slice(0,M(e)+1).replace(C,""):e};const R=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)};var B=/^[-+]0x[0-9a-f]+$/i,P=/^0b[01]+$/i,D=/^0o[0-7]+$/i,O=parseInt;const L=function(e){if("number"==typeof e)return e;if(A(e))return NaN;if(R(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=R(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=I(e);var n=P.test(e);return n||D.test(e)?O(e.slice(2),n?2:8):B.test(e)?NaN:+e};var N=1/0;const F=function(e){return e?(e=L(e))===N||e===-1/0?17976931348623157e292*(e<0?-1:1):e==e?e:0:0===e?e:0};const U=function(e){var t=F(e),n=t%1;return t==t?n?t-n:t:0};const k=function(e,t){if("function"!=typeof t)throw new TypeError("Expected a function");return e=U(e),function(){if(--e<1)return t.apply(this,arguments)}};const z=function(e){return e};const G=function(e){if(!R(e))return!1;var t=m(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t};const j=s["__core-js_shared__"];var V,Q=(V=/[^.]+$/.exec(j&&j.keys&&j.keys.IE_PROTO||""))?"Symbol(src)_1."+V:"";const H=function(e){return!!Q&&Q in e};var W=Function.prototype.toString;const q=function(e){if(null!=e){try{return W.call(e)}catch(e){}try{return e+""}catch(e){}}return""};var X=/^\[object .+?Constructor\]$/,K=Function.prototype,Y=Object.prototype,J=K.toString,$=Y.hasOwnProperty,Z=RegExp("^"+J.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const ee=function(e){return!(!R(e)||H(e))&&(G(e)?Z:X).test(q(e))};const te=function(e,t){return null==e?void 0:e[t]};const ne=function(e,t){var n=te(e,t);return ee(n)?n:void 0};const re=ne(s,"WeakMap");const ie=re&&new re;var se=ie?function(e,t){return ie.set(e,t),e}:z;const oe=se;var ae=Object.create,ce=function(){function e(){}return function(t){if(!R(t))return{};if(ae)return ae(t);e.prototype=t;var n=new e;return e.prototype=void 0,n}}();const le=ce;const ue=function(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=le(e.prototype),r=e.apply(n,t);return R(r)?r:n}};const he=function(e,t,n){var r=1&t,i=ue(e);return function t(){return(this&&this!==s&&this instanceof t?i:e).apply(r?n:this,arguments)}};const de=function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)};var pe=Math.max;const fe=function(e,t,n,r){for(var i=-1,s=e.length,o=n.length,a=-1,c=t.length,l=pe(s-o,0),u=Array(c+l),h=!r;++a<c;)u[a]=t[a];for(;++i<o;)(h||i<s)&&(u[n[i]]=e[i]);for(;l--;)u[a++]=e[i++];return u};var me=Math.max;const ge=function(e,t,n,r){for(var i=-1,s=e.length,o=-1,a=n.length,c=-1,l=t.length,u=me(s-a,0),h=Array(u+l),d=!r;++i<u;)h[i]=e[i];for(var p=i;++c<l;)h[p+c]=t[c];for(;++o<a;)(d||i<s)&&(h[p+n[o]]=e[i++]);return h};const Ae=function(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&++r;return r};const ye=function(){};function _e(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}_e.prototype=le(ye.prototype),_e.prototype.constructor=_e;const ve=_e;const be=function(){};var xe=ie?function(e){return ie.get(e)}:be;const we=xe;const Ee={};var Te=Object.prototype.hasOwnProperty;const Se=function(e){for(var t=e.name+"",n=Ee[t],r=Te.call(Ee,t)?n.length:0;r--;){var i=n[r],s=i.func;if(null==s||s==e)return i.name}return t};function Me(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}Me.prototype=le(ye.prototype),Me.prototype.constructor=Me;const Ce=Me;const Ie=function(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t};const Re=function(e){if(e instanceof ve)return e.clone();var t=new Ce(e.__wrapped__,e.__chain__);return t.__actions__=Ie(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t};var Be=Object.prototype.hasOwnProperty;function Pe(e){if(g(e)&&!v(e)&&!(e instanceof ve)){if(e instanceof Ce)return e;if(Be.call(e,"__wrapped__"))return Re(e)}return new Ce(e)}Pe.prototype=ye.prototype,Pe.prototype.constructor=Pe;const De=Pe;const Oe=function(e){var t=Se(e),n=De[t];if("function"!=typeof n||!(t in ve.prototype))return!1;if(e===n)return!0;var r=we(n);return!!r&&e===r[0]};var Le=Date.now;const Ne=function(e){var t=0,n=0;return function(){var r=Le(),i=16-(r-n);if(n=r,i>0){if(++t>=800)return arguments[0]}else t=0;return e.apply(void 0,arguments)}};const Fe=Ne(oe);var Ue=/\{\n\/\* \[wrapped with (.+)\] \*/,ke=/,? & /;const ze=function(e){var t=e.match(Ue);return t?t[1].split(ke):[]};var Ge=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/;const je=function(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(Ge,"{\n/* [wrapped with "+t+"] */\n")};const Ve=function(e){return function(){return e}};var Qe=function(){try{var e=ne(Object,"defineProperty");return e({},"",{}),e}catch(e){}}();const He=Qe;var We=He?function(e,t){return He(e,"toString",{configurable:!0,enumerable:!1,value:Ve(t),writable:!0})}:z;const qe=Ne(We);const Xe=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r&&!1!==t(e[n],n,e););return e};const Ke=function(e,t,n,r){for(var i=e.length,s=n+(r?1:-1);r?s--:++s<i;)if(t(e[s],s,e))return s;return-1};const Ye=function(e){return e!=e};const Je=function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1};const $e=function(e,t,n){return t==t?Je(e,t,n):Ke(e,Ye,n)};const Ze=function(e,t){return!!(null==e?0:e.length)&&$e(e,t,0)>-1};var et=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]];const tt=function(e,t){return Xe(et,(function(n){var r="_."+n[0];t&n[1]&&!Ze(e,r)&&e.push(r)})),e.sort()};const nt=function(e,t,n){var r=t+"";return qe(e,je(r,tt(ze(r),n)))};const rt=function(e,t,n,r,i,s,o,a,c,l){var u=8&t;t|=u?32:64,4&(t&=~(u?64:32))||(t&=-4);var h=[e,t,i,u?s:void 0,u?o:void 0,u?void 0:s,u?void 0:o,a,c,l],d=n.apply(void 0,h);return Oe(e)&&Fe(d,h),d.placeholder=r,nt(d,e,t)};const it=function(e){return e.placeholder};var st=/^(?:0|[1-9]\d*)$/;const ot=function(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&st.test(e))&&e>-1&&e%1==0&&e<t};var at=Math.min;const ct=function(e,t){for(var n=e.length,r=at(t.length,n),i=Ie(e);r--;){var s=t[r];e[r]=ot(s,n)?i[s]:void 0}return e};var lt="__lodash_placeholder__";const ut=function(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var o=e[n];o!==t&&o!==lt||(e[n]=lt,s[i++]=n)}return s};const ht=function e(t,n,r,i,o,a,c,l,u,h){var d=128&n,p=1&n,f=2&n,m=24&n,g=512&n,A=f?void 0:ue(t);return function y(){for(var _=arguments.length,v=Array(_),b=_;b--;)v[b]=arguments[b];if(m)var x=it(y),w=Ae(v,x);if(i&&(v=fe(v,i,o,m)),a&&(v=ge(v,a,c,m)),_-=w,m&&_<h){var E=ut(v,x);return rt(t,n,e,y.placeholder,r,v,E,l,u,h-_)}var T=p?r:this,S=f?T[t]:t;return _=v.length,l?v=ct(v,l):g&&_>1&&v.reverse(),d&&u<_&&(v.length=u),this&&this!==s&&this instanceof y&&(S=A||ue(S)),S.apply(T,v)}};const dt=function(e,t,n){var r=ue(e);return function i(){for(var o=arguments.length,a=Array(o),c=o,l=it(i);c--;)a[c]=arguments[c];var u=o<3&&a[0]!==l&&a[o-1]!==l?[]:ut(a,l);return(o-=u.length)<n?rt(e,t,ht,i.placeholder,void 0,a,u,void 0,void 0,n-o):de(this&&this!==s&&this instanceof i?r:e,this,a)}};const pt=function(e,t,n,r){var i=1&t,o=ue(e);return function t(){for(var a=-1,c=arguments.length,l=-1,u=r.length,h=Array(u+c),d=this&&this!==s&&this instanceof t?o:e;++l<u;)h[l]=r[l];for(;c--;)h[l++]=arguments[++a];return de(d,i?n:this,h)}};var ft="__lodash_placeholder__",mt=128,gt=Math.min;const At=function(e,t){var n=e[1],r=t[1],i=n|r,s=i<131,o=r==mt&&8==n||r==mt&&256==n&&e[7].length<=t[8]||384==r&&t[7].length<=t[8]&&8==n;if(!s&&!o)return e;1&r&&(e[2]=t[2],i|=1&n?0:4);var a=t[3];if(a){var c=e[3];e[3]=c?fe(c,a,t[4]):a,e[4]=c?ut(e[3],ft):t[4]}return(a=t[5])&&(c=e[5],e[5]=c?ge(c,a,t[6]):a,e[6]=c?ut(e[5],ft):t[6]),(a=t[7])&&(e[7]=a),r&mt&&(e[8]=null==e[8]?t[8]:gt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e};var yt=Math.max;const _t=function(e,t,n,r,i,s,o,a){var c=2&t;if(!c&&"function"!=typeof e)throw new TypeError("Expected a function");var l=r?r.length:0;if(l||(t&=-97,r=i=void 0),o=void 0===o?o:yt(U(o),0),a=void 0===a?a:U(a),l-=i?i.length:0,64&t){var u=r,h=i;r=i=void 0}var d=c?void 0:we(e),p=[e,t,n,r,i,u,h,s,o,a];if(d&&At(p,d),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],!(a=p[9]=void 0===p[9]?c?0:e.length:yt(p[9]-l,0))&&24&t&&(t&=-25),t&&1!=t)f=8==t||16==t?dt(e,t,a):32!=t&&33!=t||i.length?ht.apply(void 0,p):pt(e,t,n,r);else var f=he(e,t,n);return nt((d?oe:Fe)(f,p),e,t)};const vt=function(e,t,n){return t=n?void 0:t,t=e&&null==t?e.length:t,_t(e,128,void 0,void 0,void 0,void 0,t)};const bt=function(e,t,n){"__proto__"==t&&He?He(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n};const xt=function(e,t){return e===t||e!=e&&t!=t};var wt=Object.prototype.hasOwnProperty;const Et=function(e,t,n){var r=e[t];wt.call(e,t)&&xt(r,n)&&(void 0!==n||t in e)||bt(e,t,n)};const Tt=function(e,t,n,r){var i=!n;n||(n={});for(var s=-1,o=t.length;++s<o;){var a=t[s],c=r?r(n[a],e[a],a,n,e):void 0;void 0===c&&(c=e[a]),i?bt(n,a,c):Et(n,a,c)}return n};var St=Math.max;const Mt=function(e,t,n){return t=St(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,s=St(r.length-t,0),o=Array(s);++i<s;)o[i]=r[t+i];i=-1;for(var a=Array(t+1);++i<t;)a[i]=r[i];return a[t]=n(o),de(e,this,a)}};const Ct=function(e,t){return qe(Mt(e,t,z),e+"")};const It=function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991};const Rt=function(e){return null!=e&&It(e.length)&&!G(e)};const Bt=function(e,t,n){if(!R(n))return!1;var r=typeof t;return!!("number"==r?Rt(n)&&ot(t,n.length):"string"==r&&t in n)&&xt(n[t],e)};const Pt=function(e){return Ct((function(t,n){var r=-1,i=n.length,s=i>1?n[i-1]:void 0,o=i>2?n[2]:void 0;for(s=e.length>3&&"function"==typeof s?(i--,s):void 0,o&&Bt(n[0],n[1],o)&&(s=i<3?void 0:s,i=1),t=Object(t);++r<i;){var a=n[r];a&&e(t,a,r,s)}return t}))};var Dt=Object.prototype;const Ot=function(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||Dt)};const Lt=function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r};const Nt=function(e){return g(e)&&"[object Arguments]"==m(e)};var Ft=Object.prototype,Ut=Ft.hasOwnProperty,kt=Ft.propertyIsEnumerable;const zt=Nt(function(){return arguments}())?Nt:function(e){return g(e)&&Ut.call(e,"callee")&&!kt.call(e,"callee")};const Gt=function(){return!1};var jt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Vt=jt&&"object"==typeof module&&module&&!module.nodeType&&module,Qt=Vt&&Vt.exports===jt?s.Buffer:void 0;const Ht=(Qt?Qt.isBuffer:void 0)||Gt;var Wt={};Wt["[object Float32Array]"]=Wt["[object Float64Array]"]=Wt["[object Int8Array]"]=Wt["[object Int16Array]"]=Wt["[object Int32Array]"]=Wt["[object Uint8Array]"]=Wt["[object Uint8ClampedArray]"]=Wt["[object Uint16Array]"]=Wt["[object Uint32Array]"]=!0,Wt["[object Arguments]"]=Wt["[object Array]"]=Wt["[object ArrayBuffer]"]=Wt["[object Boolean]"]=Wt["[object DataView]"]=Wt["[object Date]"]=Wt["[object Error]"]=Wt["[object Function]"]=Wt["[object Map]"]=Wt["[object Number]"]=Wt["[object Object]"]=Wt["[object RegExp]"]=Wt["[object Set]"]=Wt["[object String]"]=Wt["[object WeakMap]"]=!1;const qt=function(e){return g(e)&&It(e.length)&&!!Wt[m(e)]};const Xt=function(e){return function(t){return e(t)}};var Kt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Yt=Kt&&"object"==typeof module&&module&&!module.nodeType&&module,Jt=Yt&&Yt.exports===Kt&&r.process;const $t=function(){try{var e=Yt&&Yt.require&&Yt.require("util").types;return e||Jt&&Jt.binding&&Jt.binding("util")}catch(e){}}();var Zt=$t&&$t.isTypedArray;const en=Zt?Xt(Zt):qt;var tn=Object.prototype.hasOwnProperty;const nn=function(e,t){var n=v(e),r=!n&&zt(e),i=!n&&!r&&Ht(e),s=!n&&!r&&!i&&en(e),o=n||r||i||s,a=o?Lt(e.length,String):[],c=a.length;for(var l in e)!t&&!tn.call(e,l)||o&&("length"==l||i&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ot(l,c))||a.push(l);return a};const rn=function(e,t){return function(n){return e(t(n))}};const sn=rn(Object.keys,Object);var on=Object.prototype.hasOwnProperty;const an=function(e){if(!Ot(e))return sn(e);var t=[];for(var n in Object(e))on.call(e,n)&&"constructor"!=n&&t.push(n);return t};const cn=function(e){return Rt(e)?nn(e):an(e)};var ln=Object.prototype.hasOwnProperty,un=Pt((function(e,t){if(Ot(t)||Rt(t))Tt(t,cn(t),e);else for(var n in t)ln.call(t,n)&&Et(e,n,t[n])}));const hn=un;const dn=function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t};var pn=Object.prototype.hasOwnProperty;const fn=function(e){if(!R(e))return dn(e);var t=Ot(e),n=[];for(var r in e)("constructor"!=r||!t&&pn.call(e,r))&&n.push(r);return n};const mn=function(e){return Rt(e)?nn(e,!0):fn(e)};var gn=Pt((function(e,t){Tt(t,mn(t),e)}));const An=gn;var yn=Pt((function(e,t,n,r){Tt(t,mn(t),e,r)}));const _n=yn;var vn=Pt((function(e,t,n,r){Tt(t,cn(t),e,r)}));const bn=vn;var xn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,wn=/^\w*$/;const En=function(e,t){if(v(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!A(e))||(wn.test(e)||!xn.test(e)||null!=t&&e in Object(t))};const Tn=ne(Object,"create");const Sn=function(){this.__data__=Tn?Tn(null):{},this.size=0};const Mn=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t};var Cn=Object.prototype.hasOwnProperty;const In=function(e){var t=this.__data__;if(Tn){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return Cn.call(t,e)?t[e]:void 0};var Rn=Object.prototype.hasOwnProperty;const Bn=function(e){var t=this.__data__;return Tn?void 0!==t[e]:Rn.call(t,e)};const Pn=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=Tn&&void 0===t?"__lodash_hash_undefined__":t,this};function Dn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}Dn.prototype.clear=Sn,Dn.prototype.delete=Mn,Dn.prototype.get=In,Dn.prototype.has=Bn,Dn.prototype.set=Pn;const On=Dn;const Ln=function(){this.__data__=[],this.size=0};const Nn=function(e,t){for(var n=e.length;n--;)if(xt(e[n][0],t))return n;return-1};var Fn=Array.prototype.splice;const Un=function(e){var t=this.__data__,n=Nn(t,e);return!(n<0)&&(n==t.length-1?t.pop():Fn.call(t,n,1),--this.size,!0)};const kn=function(e){var t=this.__data__,n=Nn(t,e);return n<0?void 0:t[n][1]};const zn=function(e){return Nn(this.__data__,e)>-1};const Gn=function(e,t){var n=this.__data__,r=Nn(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};function jn(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}jn.prototype.clear=Ln,jn.prototype.delete=Un,jn.prototype.get=kn,jn.prototype.has=zn,jn.prototype.set=Gn;const Vn=jn;const Qn=ne(s,"Map");const Hn=function(){this.size=0,this.__data__={hash:new On,map:new(Qn||Vn),string:new On}};const Wn=function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e};const qn=function(e,t){var n=e.__data__;return Wn(t)?n["string"==typeof t?"string":"hash"]:n.map};const Xn=function(e){var t=qn(this,e).delete(e);return this.size-=t?1:0,t};const Kn=function(e){return qn(this,e).get(e)};const Yn=function(e){return qn(this,e).has(e)};const Jn=function(e,t){var n=qn(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function $n(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}$n.prototype.clear=Hn,$n.prototype.delete=Xn,$n.prototype.get=Kn,$n.prototype.has=Yn,$n.prototype.set=Jn;const Zn=$n;function er(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],s=n.cache;if(s.has(i))return s.get(i);var o=e.apply(this,r);return n.cache=s.set(i,o)||s,o};return n.cache=new(er.Cache||Zn),n}er.Cache=Zn;const tr=er;const nr=function(e){var t=tr(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t};var rr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ir=/\\(\\)?/g,sr=nr((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(rr,(function(e,n,r,i){t.push(r?i.replace(ir,"$1"):n||e)})),t}));const or=sr;const ar=function(e){return null==e?"":w(e)};const cr=function(e,t){return v(e)?e:En(e,t)?[e]:or(ar(e))};const lr=function(e){if("string"==typeof e||A(e))return e;var t=e+"";return"0"==t&&1/e==-1/0?"-0":t};const ur=function(e,t){for(var n=0,r=(t=cr(t,e)).length;null!=e&&n<r;)e=e[lr(t[n++])];return n&&n==r?e:void 0};const hr=function(e,t,n){var r=null==e?void 0:ur(e,t);return void 0===r?n:r};const dr=function(e,t){for(var n=-1,r=t.length,i=Array(r),s=null==e;++n<r;)i[n]=s?void 0:hr(e,t[n]);return i};const pr=function(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e};var fr=o?o.isConcatSpreadable:void 0;const mr=function(e){return v(e)||zt(e)||!!(fr&&e&&e[fr])};const gr=function e(t,n,r,i,s){var o=-1,a=t.length;for(r||(r=mr),s||(s=[]);++o<a;){var c=t[o];n>0&&r(c)?n>1?e(c,n-1,r,i,s):pr(s,c):i||(s[s.length]=c)}return s};const Ar=function(e){return(null==e?0:e.length)?gr(e,1):[]};const yr=function(e){return qe(Mt(e,void 0,Ar),e+"")};const _r=yr(dr);const vr=rn(Object.getPrototypeOf,Object);var br=Function.prototype,xr=Object.prototype,wr=br.toString,Er=xr.hasOwnProperty,Tr=wr.call(Object);const Sr=function(e){if(!g(e)||"[object Object]"!=m(e))return!1;var t=vr(e);if(null===t)return!0;var n=Er.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&wr.call(n)==Tr};const Mr=function(e){if(!g(e))return!1;var t=m(e);return"[object Error]"==t||"[object DOMException]"==t||"string"==typeof e.message&&"string"==typeof e.name&&!Sr(e)};var Cr=Ct((function(e,t){try{return de(e,void 0,t)}catch(e){return Mr(e)?e:new Error(e)}}));const Ir=Cr;const Rr=function(e,t){var n;if("function"!=typeof t)throw new TypeError("Expected a function");return e=U(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=void 0),n}};var Br=Ct((function(e,t,n){var r=1;if(n.length){var i=ut(n,it(Br));r|=32}return _t(e,r,t,n,i)}));Br.placeholder={};const Pr=Br;const Dr=yr((function(e,t){return Xe(t,(function(t){t=lr(t),bt(e,t,Pr(e[t],e))})),e}));var Or=Ct((function(e,t,n){var r=3;if(n.length){var i=ut(n,it(Or));r|=32}return _t(t,r,e,n,i)}));Or.placeholder={};const Lr=Or;const Nr=function(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var s=Array(i);++r<i;)s[r]=e[r+t];return s};const Fr=function(e,t,n){var r=e.length;return n=void 0===n?r:n,!t&&n>=r?e:Nr(e,t,n)};var Ur=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const kr=function(e){return Ur.test(e)};const zr=function(e){return e.split("")};var Gr="\\ud800-\\udfff",jr="["+Gr+"]",Vr="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Qr="\\ud83c[\\udffb-\\udfff]",Hr="[^"+Gr+"]",Wr="(?:\\ud83c[\\udde6-\\uddff]){2}",qr="[\\ud800-\\udbff][\\udc00-\\udfff]",Xr="(?:"+Vr+"|"+Qr+")"+"?",Kr="[\\ufe0e\\ufe0f]?",Yr=Kr+Xr+("(?:\\u200d(?:"+[Hr,Wr,qr].join("|")+")"+Kr+Xr+")*"),Jr="(?:"+[Hr+Vr+"?",Vr,Wr,qr,jr].join("|")+")",$r=RegExp(Qr+"(?="+Qr+")|"+Jr+Yr,"g");const Zr=function(e){return e.match($r)||[]};const ei=function(e){return kr(e)?Zr(e):zr(e)};const ti=function(e){return function(t){t=ar(t);var n=kr(t)?ei(t):void 0,r=n?n[0]:t.charAt(0),i=n?Fr(n,1).join(""):t.slice(1);return r[e]()+i}};const ni=ti("toUpperCase");const ri=function(e){return ni(ar(e).toLowerCase())};const ii=function(e,t,n,r){var i=-1,s=null==e?0:e.length;for(r&&s&&(n=e[++i]);++i<s;)n=t(n,e[i],i,e);return n};const si=function(e){return function(t){return null==e?void 0:e[t]}};const oi=si({À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"});var ai=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,ci=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");const li=function(e){return(e=ar(e))&&e.replace(ai,oi).replace(ci,"")};var ui=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;const hi=function(e){return e.match(ui)||[]};var di=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;const pi=function(e){return di.test(e)};var fi="\\ud800-\\udfff",mi="\\u2700-\\u27bf",gi="a-z\\xdf-\\xf6\\xf8-\\xff",Ai="A-Z\\xc0-\\xd6\\xd8-\\xde",yi="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",_i="["+yi+"]",vi="\\d+",bi="["+mi+"]",xi="["+gi+"]",wi="[^"+fi+yi+vi+mi+gi+Ai+"]",Ei="(?:\\ud83c[\\udde6-\\uddff]){2}",Ti="[\\ud800-\\udbff][\\udc00-\\udfff]",Si="["+Ai+"]",Mi="(?:"+xi+"|"+wi+")",Ci="(?:"+Si+"|"+wi+")",Ii="(?:['’](?:d|ll|m|re|s|t|ve))?",Ri="(?:['’](?:D|LL|M|RE|S|T|VE))?",Bi="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",Pi="[\\ufe0e\\ufe0f]?",Di=Pi+Bi+("(?:\\u200d(?:"+["[^"+fi+"]",Ei,Ti].join("|")+")"+Pi+Bi+")*"),Oi="(?:"+[bi,Ei,Ti].join("|")+")"+Di,Li=RegExp([Si+"?"+xi+"+"+Ii+"(?="+[_i,Si,"$"].join("|")+")",Ci+"+"+Ri+"(?="+[_i,Si+Mi,"$"].join("|")+")",Si+"?"+Mi+"+"+Ii,Si+"+"+Ri,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",vi,Oi].join("|"),"g");const Ni=function(e){return e.match(Li)||[]};const Fi=function(e,t,n){return e=ar(e),void 0===(t=n?void 0:t)?pi(e)?Ni(e):hi(e):e.match(t)||[]};var Ui=RegExp("['’]","g");const ki=function(e){return function(t){return ii(Fi(li(t).replace(Ui,"")),e,"")}};var zi=ki((function(e,t,n){return t=t.toLowerCase(),e+(n?ri(t):t)}));const Gi=zi;const ji=function(){if(!arguments.length)return[];var e=arguments[0];return v(e)?e:[e]};var Vi=s.isFinite,Qi=Math.min;const Hi=function(e){var t=Math[e];return function(e,n){if(e=L(e),(n=null==n?0:Qi(U(n),292))&&Vi(e)){var r=(ar(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return+((r=(ar(i)+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}};const Wi=Hi("ceil");const qi=function(e){var t=De(e);return t.__chain__=!0,t};var Xi=Math.ceil,Ki=Math.max;const Yi=function(e,t,n){t=(n?Bt(e,t,n):void 0===t)?1:Ki(U(t),0);var r=null==e?0:e.length;if(!r||t<1)return[];for(var i=0,s=0,o=Array(Xi(r/t));i<r;)o[s++]=Nr(e,i,i+=t);return o};const Ji=function(e,t,n){return e==e&&(void 0!==n&&(e=e<=n?e:n),void 0!==t&&(e=e>=t?e:t)),e};const $i=function(e,t,n){return void 0===n&&(n=t,t=void 0),void 0!==n&&(n=(n=L(n))==n?n:0),void 0!==t&&(t=(t=L(t))==t?t:0),Ji(L(e),t,n)};const Zi=function(){this.__data__=new Vn,this.size=0};const es=function(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n};const ts=function(e){return this.__data__.get(e)};const ns=function(e){return this.__data__.has(e)};const rs=function(e,t){var n=this.__data__;if(n instanceof Vn){var r=n.__data__;if(!Qn||r.length<199)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new Zn(r)}return n.set(e,t),this.size=n.size,this};function is(e){var t=this.__data__=new Vn(e);this.size=t.size}is.prototype.clear=Zi,is.prototype.delete=es,is.prototype.get=ts,is.prototype.has=ns,is.prototype.set=rs;const ss=is;const os=function(e,t){return e&&Tt(t,cn(t),e)};const as=function(e,t){return e&&Tt(t,mn(t),e)};var cs="object"==typeof exports&&exports&&!exports.nodeType&&exports,ls=cs&&"object"==typeof module&&module&&!module.nodeType&&module,us=ls&&ls.exports===cs?s.Buffer:void 0,hs=us?us.allocUnsafe:void 0;const ds=function(e,t){if(t)return e.slice();var n=e.length,r=hs?hs(n):new e.constructor(n);return e.copy(r),r};const ps=function(e,t){for(var n=-1,r=null==e?0:e.length,i=0,s=[];++n<r;){var o=e[n];t(o,n,e)&&(s[i++]=o)}return s};const fs=function(){return[]};var ms=Object.prototype.propertyIsEnumerable,gs=Object.getOwnPropertySymbols;const As=gs?function(e){return null==e?[]:(e=Object(e),ps(gs(e),(function(t){return ms.call(e,t)})))}:fs;const ys=function(e,t){return Tt(e,As(e),t)};var _s=Object.getOwnPropertySymbols?function(e){for(var t=[];e;)pr(t,As(e)),e=vr(e);return t}:fs;const vs=_s;const bs=function(e,t){return Tt(e,vs(e),t)};const xs=function(e,t,n){var r=t(e);return v(e)?r:pr(r,n(e))};const ws=function(e){return xs(e,cn,As)};const Es=function(e){return xs(e,mn,vs)};const Ts=ne(s,"DataView");const Ss=ne(s,"Promise");const Ms=ne(s,"Set");var Cs="[object Map]",Is="[object Promise]",Rs="[object Set]",Bs="[object WeakMap]",Ps="[object DataView]",Ds=q(Ts),Os=q(Qn),Ls=q(Ss),Ns=q(Ms),Fs=q(re),Us=m;(Ts&&Us(new Ts(new ArrayBuffer(1)))!=Ps||Qn&&Us(new Qn)!=Cs||Ss&&Us(Ss.resolve())!=Is||Ms&&Us(new Ms)!=Rs||re&&Us(new re)!=Bs)&&(Us=function(e){var t=m(e),n="[object Object]"==t?e.constructor:void 0,r=n?q(n):"";if(r)switch(r){case Ds:return Ps;case Os:return Cs;case Ls:return Is;case Ns:return Rs;case Fs:return Bs}return t});const ks=Us;var zs=Object.prototype.hasOwnProperty;const Gs=function(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&zs.call(e,"index")&&(n.index=e.index,n.input=e.input),n};const js=s.Uint8Array;const Vs=function(e){var t=new e.constructor(e.byteLength);return new js(t).set(new js(e)),t};const Qs=function(e,t){var n=t?Vs(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)};var Hs=/\w*$/;const Ws=function(e){var t=new e.constructor(e.source,Hs.exec(e));return t.lastIndex=e.lastIndex,t};var qs=o?o.prototype:void 0,Xs=qs?qs.valueOf:void 0;const Ks=function(e){return Xs?Object(Xs.call(e)):{}};const Ys=function(e,t){var n=t?Vs(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)};const Js=function(e,t,n){var r=e.constructor;switch(t){case"[object ArrayBuffer]":return Vs(e);case"[object Boolean]":case"[object Date]":return new r(+e);case"[object DataView]":return Qs(e,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Ys(e,n);case"[object Map]":case"[object Set]":return new r;case"[object Number]":case"[object String]":return new r(e);case"[object RegExp]":return Ws(e);case"[object Symbol]":return Ks(e)}};const $s=function(e){return"function"!=typeof e.constructor||Ot(e)?{}:le(vr(e))};const Zs=function(e){return g(e)&&"[object Map]"==ks(e)};var eo=$t&&$t.isMap;const to=eo?Xt(eo):Zs;const no=function(e){return g(e)&&"[object Set]"==ks(e)};var ro=$t&&$t.isSet;const io=ro?Xt(ro):no;var so="[object Arguments]",oo="[object Function]",ao="[object Object]",co={};co[so]=co["[object Array]"]=co["[object ArrayBuffer]"]=co["[object DataView]"]=co["[object Boolean]"]=co["[object Date]"]=co["[object Float32Array]"]=co["[object Float64Array]"]=co["[object Int8Array]"]=co["[object Int16Array]"]=co["[object Int32Array]"]=co["[object Map]"]=co["[object Number]"]=co[ao]=co["[object RegExp]"]=co["[object Set]"]=co["[object String]"]=co["[object Symbol]"]=co["[object Uint8Array]"]=co["[object Uint8ClampedArray]"]=co["[object Uint16Array]"]=co["[object Uint32Array]"]=!0,co["[object Error]"]=co[oo]=co["[object WeakMap]"]=!1;const lo=function e(t,n,r,i,s,o){var a,c=1&n,l=2&n,u=4&n;if(r&&(a=s?r(t,i,s,o):r(t)),void 0!==a)return a;if(!R(t))return t;var h=v(t);if(h){if(a=Gs(t),!c)return Ie(t,a)}else{var d=ks(t),p=d==oo||"[object GeneratorFunction]"==d;if(Ht(t))return ds(t,c);if(d==ao||d==so||p&&!s){if(a=l||p?{}:$s(t),!c)return l?bs(t,as(a,t)):ys(t,os(a,t))}else{if(!co[d])return s?t:{};a=Js(t,d,c)}}o||(o=new ss);var f=o.get(t);if(f)return f;o.set(t,a),io(t)?t.forEach((function(i){a.add(e(i,n,r,i,t,o))})):to(t)&&t.forEach((function(i,s){a.set(s,e(i,n,r,s,t,o))}));var m=h?void 0:(u?l?Es:ws:l?mn:cn)(t);return Xe(m||t,(function(i,s){m&&(i=t[s=i]),Et(a,s,e(i,n,r,s,t,o))})),a};const uo=function(e){return lo(e,4)};const ho=function(e){return lo(e,5)};const po=function(e,t){return lo(e,5,t="function"==typeof t?t:void 0)};const fo=function(e,t){return lo(e,4,t="function"==typeof t?t:void 0)};const mo=function(){return new Ce(this.value(),this.__chain__)};const go=function(e){for(var t=-1,n=null==e?0:e.length,r=0,i=[];++t<n;){var s=e[t];s&&(i[r++]=s)}return i};const Ao=function(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),n=arguments[0],r=e;r--;)t[r-1]=arguments[r];return pr(v(n)?Ie(n):[n],gr(t,1))};const yo=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this};const _o=function(e){return this.__data__.has(e)};function vo(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new Zn;++t<n;)this.add(e[t])}vo.prototype.add=vo.prototype.push=yo,vo.prototype.has=_o;const bo=vo;const xo=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(t(e[n],n,e))return!0;return!1};const wo=function(e,t){return e.has(t)};const Eo=function(e,t,n,r,i,s){var o=1&n,a=e.length,c=t.length;if(a!=c&&!(o&&c>a))return!1;var l=s.get(e),u=s.get(t);if(l&&u)return l==t&&u==e;var h=-1,d=!0,p=2&n?new bo:void 0;for(s.set(e,t),s.set(t,e);++h<a;){var f=e[h],m=t[h];if(r)var g=o?r(m,f,h,t,e,s):r(f,m,h,e,t,s);if(void 0!==g){if(g)continue;d=!1;break}if(p){if(!xo(t,(function(e,t){if(!wo(p,t)&&(f===e||i(f,e,n,r,s)))return p.push(t)}))){d=!1;break}}else if(f!==m&&!i(f,m,n,r,s)){d=!1;break}}return s.delete(e),s.delete(t),d};const To=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n};const So=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n};var Mo=o?o.prototype:void 0,Co=Mo?Mo.valueOf:void 0;const Io=function(e,t,n,r,i,s,o){switch(n){case"[object DataView]":if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case"[object ArrayBuffer]":return!(e.byteLength!=t.byteLength||!s(new js(e),new js(t)));case"[object Boolean]":case"[object Date]":case"[object Number]":return xt(+e,+t);case"[object Error]":return e.name==t.name&&e.message==t.message;case"[object RegExp]":case"[object String]":return e==t+"";case"[object Map]":var a=To;case"[object Set]":var c=1&r;if(a||(a=So),e.size!=t.size&&!c)return!1;var l=o.get(e);if(l)return l==t;r|=2,o.set(e,t);var u=Eo(a(e),a(t),r,i,s,o);return o.delete(e),u;case"[object Symbol]":if(Co)return Co.call(e)==Co.call(t)}return!1};var Ro=Object.prototype.hasOwnProperty;const Bo=function(e,t,n,r,i,s){var o=1&n,a=ws(e),c=a.length;if(c!=ws(t).length&&!o)return!1;for(var l=c;l--;){var u=a[l];if(!(o?u in t:Ro.call(t,u)))return!1}var h=s.get(e),d=s.get(t);if(h&&d)return h==t&&d==e;var p=!0;s.set(e,t),s.set(t,e);for(var f=o;++l<c;){var m=e[u=a[l]],g=t[u];if(r)var A=o?r(g,m,u,t,e,s):r(m,g,u,e,t,s);if(!(void 0===A?m===g||i(m,g,n,r,s):A)){p=!1;break}f||(f="constructor"==u)}if(p&&!f){var y=e.constructor,_=t.constructor;y==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof y&&y instanceof y&&"function"==typeof _&&_ instanceof _||(p=!1)}return s.delete(e),s.delete(t),p};var Po="[object Arguments]",Do="[object Array]",Oo="[object Object]",Lo=Object.prototype.hasOwnProperty;const No=function(e,t,n,r,i,s){var o=v(e),a=v(t),c=o?Do:ks(e),l=a?Do:ks(t),u=(c=c==Po?Oo:c)==Oo,h=(l=l==Po?Oo:l)==Oo,d=c==l;if(d&&Ht(e)){if(!Ht(t))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new ss),o||en(e)?Eo(e,t,n,r,i,s):Io(e,t,c,n,r,i,s);if(!(1&n)){var p=u&&Lo.call(e,"__wrapped__"),f=h&&Lo.call(t,"__wrapped__");if(p||f){var m=p?e.value():e,g=f?t.value():t;return s||(s=new ss),i(m,g,n,r,s)}}return!!d&&(s||(s=new ss),Bo(e,t,n,r,i,s))};const Fo=function e(t,n,r,i,s){return t===n||(null==t||null==n||!g(t)&&!g(n)?t!=t&&n!=n:No(t,n,r,i,e,s))};const Uo=function(e,t,n,r){var i=n.length,s=i,o=!r;if(null==e)return!s;for(e=Object(e);i--;){var a=n[i];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++i<s;){var c=(a=n[i])[0],l=e[c],u=a[1];if(o&&a[2]){if(void 0===l&&!(c in e))return!1}else{var h=new ss;if(r)var d=r(l,u,c,e,t,h);if(!(void 0===d?Fo(u,l,3,r,h):d))return!1}}return!0};const ko=function(e){return e==e&&!R(e)};const zo=function(e){for(var t=cn(e),n=t.length;n--;){var r=t[n],i=e[r];t[n]=[r,i,ko(i)]}return t};const Go=function(e,t){return function(n){return null!=n&&(n[e]===t&&(void 0!==t||e in Object(n)))}};const jo=function(e){var t=zo(e);return 1==t.length&&t[0][2]?Go(t[0][0],t[0][1]):function(n){return n===e||Uo(n,e,t)}};const Vo=function(e,t){return null!=e&&t in Object(e)};const Qo=function(e,t,n){for(var r=-1,i=(t=cr(t,e)).length,s=!1;++r<i;){var o=lr(t[r]);if(!(s=null!=e&&n(e,o)))break;e=e[o]}return s||++r!=i?s:!!(i=null==e?0:e.length)&&It(i)&&ot(o,i)&&(v(e)||zt(e))};const Ho=function(e,t){return null!=e&&Qo(e,t,Vo)};const Wo=function(e,t){return En(e)&&ko(t)?Go(lr(e),t):function(n){var r=hr(n,e);return void 0===r&&r===t?Ho(n,e):Fo(t,r,3)}};const qo=function(e){return function(t){return null==t?void 0:t[e]}};const Xo=function(e){return function(t){return ur(t,e)}};const Ko=function(e){return En(e)?qo(lr(e)):Xo(e)};const Yo=function(e){return"function"==typeof e?e:null==e?z:"object"==typeof e?v(e)?Wo(e[0],e[1]):jo(e):Ko(e)};const Jo=function(e){var t=null==e?0:e.length,n=Yo;return e=t?_(e,(function(e){if("function"!=typeof e[1])throw new TypeError("Expected a function");return[n(e[0]),e[1]]})):[],Ct((function(n){for(var r=-1;++r<t;){var i=e[r];if(de(i[0],this,n))return de(i[1],this,n)}}))};const $o=function(e,t,n){var r=n.length;if(null==e)return!r;for(e=Object(e);r--;){var i=n[r],s=t[i],o=e[i];if(void 0===o&&!(i in e)||!s(o))return!1}return!0};const Zo=function(e){var t=cn(e);return function(n){return $o(n,e,t)}};const ea=function(e){return Zo(lo(e,1))};const ta=function(e,t){return null==t||$o(e,t,cn(t))};const na=function(e,t,n,r){for(var i=-1,s=null==e?0:e.length;++i<s;){var o=e[i];t(r,o,n(o),e)}return r};const ra=function(e){return function(t,n,r){for(var i=-1,s=Object(t),o=r(t),a=o.length;a--;){var c=o[e?a:++i];if(!1===n(s[c],c,s))break}return t}};const ia=ra();const sa=function(e,t){return e&&ia(e,t,cn)};const oa=function(e,t){return function(n,r){if(null==n)return n;if(!Rt(n))return e(n,r);for(var i=n.length,s=t?i:-1,o=Object(n);(t?s--:++s<i)&&!1!==r(o[s],s,o););return n}};const aa=oa(sa);const ca=function(e,t,n,r){return aa(e,(function(e,i,s){t(r,e,n(e),s)})),r};const la=function(e,t){return function(n,r){var i=v(n)?na:ca,s=t?t():{};return i(n,e,Yo(r,2),s)}};var ua=Object.prototype.hasOwnProperty,ha=la((function(e,t,n){ua.call(e,n)?++e[n]:bt(e,n,1)}));const da=ha;const pa=function(e,t){var n=le(e);return null==t?n:os(n,t)};function fa(e,t,n){var r=_t(e,8,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=fa.placeholder,r}fa.placeholder={};const ma=fa;function ga(e,t,n){var r=_t(e,16,void 0,void 0,void 0,void 0,void 0,t=n?void 0:t);return r.placeholder=ga.placeholder,r}ga.placeholder={};const Aa=ga;const ya=function(){return s.Date.now()};var _a=Math.max,va=Math.min;const ba=function(e,t,n){var r,i,s,o,a,c,l=0,u=!1,h=!1,d=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function p(t){var n=r,s=i;return r=i=void 0,l=t,o=e.apply(s,n)}function f(e){var n=e-c;return void 0===c||n>=t||n<0||h&&e-l>=s}function m(){var e=ya();if(f(e))return g(e);a=setTimeout(m,function(e){var n=t-(e-c);return h?va(n,s-(e-l)):n}(e))}function g(e){return a=void 0,d&&r?p(e):(r=i=void 0,o)}function A(){var e=ya(),n=f(e);if(r=arguments,i=this,c=e,n){if(void 0===a)return function(e){return l=e,a=setTimeout(m,t),u?p(e):o}(c);if(h)return clearTimeout(a),a=setTimeout(m,t),p(c)}return void 0===a&&(a=setTimeout(m,t)),o}return t=L(t)||0,R(n)&&(u=!!n.leading,s=(h="maxWait"in n)?_a(L(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d),A.cancel=function(){void 0!==a&&clearTimeout(a),l=0,r=c=i=a=void 0},A.flush=function(){return void 0===a?o:g(ya())},A};const xa=function(e,t){return null==e||e!=e?t:e};var wa=Object.prototype,Ea=wa.hasOwnProperty,Ta=Ct((function(e,t){e=Object(e);var n=-1,r=t.length,i=r>2?t[2]:void 0;for(i&&Bt(t[0],t[1],i)&&(r=1);++n<r;)for(var s=t[n],o=mn(s),a=-1,c=o.length;++a<c;){var l=o[a],u=e[l];(void 0===u||xt(u,wa[l])&&!Ea.call(e,l))&&(e[l]=s[l])}return e}));const Sa=Ta;const Ma=function(e,t,n){(void 0!==n&&!xt(e[t],n)||void 0===n&&!(t in e))&&bt(e,t,n)};const Ca=function(e){return g(e)&&Rt(e)};const Ia=function(e,t){if(("constructor"!==t||"function"!=typeof e[t])&&"__proto__"!=t)return e[t]};const Ra=function(e){return Tt(e,mn(e))};const Ba=function(e,t,n,r,i,s,o){var a=Ia(e,n),c=Ia(t,n),l=o.get(c);if(l)Ma(e,n,l);else{var u=s?s(a,c,n+"",e,t,o):void 0,h=void 0===u;if(h){var d=v(c),p=!d&&Ht(c),f=!d&&!p&&en(c);u=c,d||p||f?v(a)?u=a:Ca(a)?u=Ie(a):p?(h=!1,u=ds(c,!0)):f?(h=!1,u=Ys(c,!0)):u=[]:Sr(c)||zt(c)?(u=a,zt(a)?u=Ra(a):R(a)&&!G(a)||(u=$s(c))):h=!1}h&&(o.set(c,u),i(u,c,r,s,o),o.delete(c)),Ma(e,n,u)}};const Pa=function e(t,n,r,i,s){t!==n&&ia(n,(function(o,a){if(s||(s=new ss),R(o))Ba(t,n,a,r,e,i,s);else{var c=i?i(Ia(t,a),o,a+"",t,n,s):void 0;void 0===c&&(c=o),Ma(t,a,c)}}),mn)};const Da=function e(t,n,r,i,s,o){return R(t)&&R(n)&&(o.set(n,t),Pa(t,n,void 0,e,o),o.delete(n)),t};var Oa=Pt((function(e,t,n,r){Pa(e,t,n,r)}));const La=Oa;const Na=Ct((function(e){return e.push(void 0,Da),de(La,void 0,e)}));const Fa=function(e,t,n){if("function"!=typeof e)throw new TypeError("Expected a function");return setTimeout((function(){e.apply(void 0,n)}),t)};var Ua=Ct((function(e,t){return Fa(e,1,t)}));const ka=Ua;var za=Ct((function(e,t,n){return Fa(e,L(t)||0,n)}));const Ga=za;const ja=function(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1};const Va=function(e,t,n,r){var i=-1,s=Ze,o=!0,a=e.length,c=[],l=t.length;if(!a)return c;n&&(t=_(t,Xt(n))),r?(s=ja,o=!1):t.length>=200&&(s=wo,o=!1,t=new bo(t));e:for(;++i<a;){var u=e[i],h=null==n?u:n(u);if(u=r||0!==u?u:0,o&&h==h){for(var d=l;d--;)if(t[d]===h)continue e;c.push(u)}else s(t,h,r)||c.push(u)}return c};var Qa=Ct((function(e,t){return Ca(e)?Va(e,gr(t,1,Ca,!0)):[]}));const Ha=Qa;const Wa=function(e){var t=null==e?0:e.length;return t?e[t-1]:void 0};var qa=Ct((function(e,t){var n=Wa(t);return Ca(n)&&(n=void 0),Ca(e)?Va(e,gr(t,1,Ca,!0),Yo(n,2)):[]}));const Xa=qa;var Ka=Ct((function(e,t){var n=Wa(t);return Ca(n)&&(n=void 0),Ca(e)?Va(e,gr(t,1,Ca,!0),void 0,n):[]}));const Ya=Ka;const Ja=E((function(e,t){return e/t}),1);const $a=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:U(t),Nr(e,t<0?0:t,r)):[]};const Za=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:U(t),Nr(e,0,(t=r-t)<0?0:t)):[]};const ec=function(e,t,n,r){for(var i=e.length,s=r?i:-1;(r?s--:++s<i)&&t(e[s],s,e););return n?Nr(e,r?0:s,r?s+1:i):Nr(e,r?s+1:0,r?i:s)};const tc=function(e,t){return e&&e.length?ec(e,Yo(t,3),!0,!0):[]};const nc=function(e,t){return e&&e.length?ec(e,Yo(t,3),!0):[]};const rc=function(e){return"function"==typeof e?e:z};const ic=function(e,t){return(v(e)?Xe:aa)(e,rc(t))};const sc=function(e,t){for(var n=null==e?0:e.length;n--&&!1!==t(e[n],n,e););return e};const oc=ra(!0);const ac=function(e,t){return e&&oc(e,t,cn)};const cc=oa(ac,!0);const lc=function(e,t){return(v(e)?sc:cc)(e,rc(t))};const uc=function(e,t,n){e=ar(e),t=w(t);var r=e.length,i=n=void 0===n?r:Ji(U(n),0,r);return(n-=t.length)>=0&&e.slice(n,i)==t};const hc=function(e,t){return _(t,(function(t){return[t,e[t]]}))};const dc=function(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n};const pc=function(e){return function(t){var n=ks(t);return"[object Map]"==n?To(t):"[object Set]"==n?dc(t):hc(t,e(t))}};const fc=pc(cn);const mc=pc(mn);const gc=si({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});var Ac=/[&<>"']/g,yc=RegExp(Ac.source);const _c=function(e){return(e=ar(e))&&yc.test(e)?e.replace(Ac,gc):e};var vc=/[\\^$.*+?()[\]{}|]/g,bc=RegExp(vc.source);const xc=function(e){return(e=ar(e))&&bc.test(e)?e.replace(vc,"\\$&"):e};const wc=function(e,t){for(var n=-1,r=null==e?0:e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0};const Ec=function(e,t){var n=!0;return aa(e,(function(e,r,i){return n=!!t(e,r,i)})),n};const Tc=function(e,t,n){var r=v(e)?wc:Ec;return n&&Bt(e,t,n)&&(t=void 0),r(e,Yo(t,3))};const Sc=function(e){return e?Ji(U(e),0,4294967295):0};const Mc=function(e,t,n,r){var i=e.length;for((n=U(n))<0&&(n=-n>i?0:i+n),(r=void 0===r||r>i?i:U(r))<0&&(r+=i),r=n>r?0:Sc(r);n<r;)e[n++]=t;return e};const Cc=function(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&Bt(e,t,n)&&(n=0,r=i),Mc(e,t,n,r)):[]};const Ic=function(e,t){var n=[];return aa(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n};const Rc=function(e,t){return(v(e)?ps:Ic)(e,Yo(t,3))};const Bc=function(e){return function(t,n,r){var i=Object(t);if(!Rt(t)){var s=Yo(n,3);t=cn(t),n=function(e){return s(i[e],e,i)}}var o=e(t,n,r);return o>-1?i[s?t[o]:o]:void 0}};var Pc=Math.max;const Dc=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:U(n);return i<0&&(i=Pc(r+i,0)),Ke(e,Yo(t,3),i)};const Oc=Bc(Dc);const Lc=function(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r};const Nc=function(e,t){return Lc(e,Yo(t,3),sa)};var Fc=Math.max,Uc=Math.min;const kc=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r-1;return void 0!==n&&(i=U(n),i=n<0?Fc(r+i,0):Uc(i,r-1)),Ke(e,Yo(t,3),i,!0)};const zc=Bc(kc);const Gc=function(e,t){return Lc(e,Yo(t,3),ac)};const jc=function(e){return e&&e.length?e[0]:void 0};const Vc=function(e,t){var n=-1,r=Rt(e)?Array(e.length):[];return aa(e,(function(e,i,s){r[++n]=t(e,i,s)})),r};const Qc=function(e,t){return(v(e)?_:Vc)(e,Yo(t,3))};const Hc=function(e,t){return gr(Qc(e,t),1)};var Wc=1/0;const qc=function(e,t){return gr(Qc(e,t),Wc)};const Xc=function(e,t,n){return n=void 0===n?1:U(n),gr(Qc(e,t),n)};var Kc=1/0;const Yc=function(e){return(null==e?0:e.length)?gr(e,Kc):[]};const Jc=function(e,t){return(null==e?0:e.length)?(t=void 0===t?1:U(t),gr(e,t)):[]};const $c=function(e){return _t(e,512)};const Zc=Hi("floor");const el=function(e){return yr((function(t){var n=t.length,r=n,i=Ce.prototype.thru;for(e&&t.reverse();r--;){var s=t[r];if("function"!=typeof s)throw new TypeError("Expected a function");if(i&&!o&&"wrapper"==Se(s))var o=new Ce([],!0)}for(r=o?r:n;++r<n;){s=t[r];var a=Se(s),c="wrapper"==a?we(s):void 0;o=c&&Oe(c[0])&&424==c[1]&&!c[4].length&&1==c[9]?o[Se(c[0])].apply(o,c[3]):1==s.length&&Oe(s)?o[a]():o.thru(s)}return function(){var e=arguments,r=e[0];if(o&&1==e.length&&v(r))return o.plant(r).value();for(var i=0,s=n?t[i].apply(this,e):r;++i<n;)s=t[i].call(this,s);return s}}))};const tl=el();const nl=el(!0);const rl=function(e,t){return null==e?e:ia(e,rc(t),mn)};const il=function(e,t){return null==e?e:oc(e,rc(t),mn)};const sl=function(e,t){return e&&sa(e,rc(t))};const ol=function(e,t){return e&&ac(e,rc(t))};const al=function(e){for(var t=-1,n=null==e?0:e.length,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r};const cl=function(e,t){return ps(t,(function(t){return G(e[t])}))};const ll=function(e){return null==e?[]:cl(e,cn(e))};const ul=function(e){return null==e?[]:cl(e,mn(e))};var hl=Object.prototype.hasOwnProperty,dl=la((function(e,t,n){hl.call(e,n)?e[n].push(t):bt(e,n,[t])}));const pl=dl;const fl=function(e,t){return e>t};const ml=function(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=L(t),n=L(n)),e(t,n)}};const gl=ml(fl);const Al=ml((function(e,t){return e>=t}));var yl=Object.prototype.hasOwnProperty;const _l=function(e,t){return null!=e&&yl.call(e,t)};const vl=function(e,t){return null!=e&&Qo(e,t,_l)};var bl=Math.max,xl=Math.min;const wl=function(e,t,n){return e>=xl(t,n)&&e<bl(t,n)};const El=function(e,t,n){return t=F(t),void 0===n?(n=t,t=0):n=F(n),e=L(e),wl(e,t,n)};const Tl=function(e){return"string"==typeof e||!v(e)&&g(e)&&"[object String]"==m(e)};const Sl=function(e,t){return _(t,(function(t){return e[t]}))};const Ml=function(e){return null==e?[]:Sl(e,cn(e))};var Cl=Math.max;const Il=function(e,t,n,r){e=Rt(e)?e:Ml(e),n=n&&!r?U(n):0;var i=e.length;return n<0&&(n=Cl(i+n,0)),Tl(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&$e(e,t,n)>-1};var Rl=Math.max;const Bl=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:U(n);return i<0&&(i=Rl(r+i,0)),$e(e,t,i)};const Pl=function(e){return(null==e?0:e.length)?Nr(e,0,-1):[]};var Dl=Math.min;const Ol=function(e,t,n){for(var r=n?ja:Ze,i=e[0].length,s=e.length,o=s,a=Array(s),c=1/0,l=[];o--;){var u=e[o];o&&t&&(u=_(u,Xt(t))),c=Dl(u.length,c),a[o]=!n&&(t||i>=120&&u.length>=120)?new bo(o&&u):void 0}u=e[0];var h=-1,d=a[0];e:for(;++h<i&&l.length<c;){var p=u[h],f=t?t(p):p;if(p=n||0!==p?p:0,!(d?wo(d,f):r(l,f,n))){for(o=s;--o;){var m=a[o];if(!(m?wo(m,f):r(e[o],f,n)))continue e}d&&d.push(f),l.push(p)}}return l};const Ll=function(e){return Ca(e)?e:[]};const Nl=Ct((function(e){var t=_(e,Ll);return t.length&&t[0]===e[0]?Ol(t):[]}));var Fl=Ct((function(e){var t=Wa(e),n=_(e,Ll);return t===Wa(n)?t=void 0:n.pop(),n.length&&n[0]===e[0]?Ol(n,Yo(t,2)):[]}));const Ul=Fl;const kl=Ct((function(e){var t=Wa(e),n=_(e,Ll);return(t="function"==typeof t?t:void 0)&&n.pop(),n.length&&n[0]===e[0]?Ol(n,void 0,t):[]}));const zl=function(e,t,n,r){return sa(e,(function(e,i,s){t(r,n(e),i,s)})),r};const Gl=function(e,t){return function(n,r){return zl(n,e,t(r),{})}};var jl=Object.prototype.toString,Vl=Gl((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=jl.call(t)),e[t]=n}),Ve(z));const Ql=Vl;var Hl=Object.prototype,Wl=Hl.hasOwnProperty,ql=Hl.toString,Xl=Gl((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=ql.call(t)),Wl.call(e,t)?e[t].push(n):e[t]=[n]}),Yo);const Kl=Xl;const Yl=function(e,t){return t.length<2?e:ur(e,Nr(t,0,-1))};const Jl=function(e,t,n){t=cr(t,e);var r=null==(e=Yl(e,t))?e:e[lr(Wa(t))];return null==r?void 0:de(r,e,n)};const $l=Ct(Jl);var Zl=Ct((function(e,t,n){var r=-1,i="function"==typeof t,s=Rt(e)?Array(e.length):[];return aa(e,(function(e){s[++r]=i?de(t,e,n):Jl(e,t,n)})),s}));const eu=Zl;const tu=function(e){return g(e)&&"[object ArrayBuffer]"==m(e)};var nu=$t&&$t.isArrayBuffer;const ru=nu?Xt(nu):tu;const iu=function(e){return!0===e||!1===e||g(e)&&"[object Boolean]"==m(e)};const su=function(e){return g(e)&&"[object Date]"==m(e)};var ou=$t&&$t.isDate;const au=ou?Xt(ou):su;const cu=function(e){return g(e)&&1===e.nodeType&&!Sr(e)};var lu=Object.prototype.hasOwnProperty;const uu=function(e){if(null==e)return!0;if(Rt(e)&&(v(e)||"string"==typeof e||"function"==typeof e.splice||Ht(e)||en(e)||zt(e)))return!e.length;var t=ks(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(Ot(e))return!an(e).length;for(var n in e)if(lu.call(e,n))return!1;return!0};const hu=function(e,t){return Fo(e,t)};const du=function(e,t,n){var r=(n="function"==typeof n?n:void 0)?n(e,t):void 0;return void 0===r?Fo(e,t,void 0,n):!!r};var pu=s.isFinite;const fu=function(e){return"number"==typeof e&&pu(e)};const mu=function(e){return"number"==typeof e&&e==U(e)};const gu=function(e,t){return e===t||Uo(e,t,zo(t))};const Au=function(e,t,n){return n="function"==typeof n?n:void 0,Uo(e,t,zo(t),n)};const yu=function(e){return"number"==typeof e||g(e)&&"[object Number]"==m(e)};const _u=function(e){return yu(e)&&e!=+e};const vu=j?G:Gt;const bu=function(e){if(vu(e))throw new Error("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return ee(e)};const xu=function(e){return null==e};const wu=function(e){return null===e};const Eu=function(e){return g(e)&&"[object RegExp]"==m(e)};var Tu=$t&&$t.isRegExp;const Su=Tu?Xt(Tu):Eu;var Mu=9007199254740991;const Cu=function(e){return mu(e)&&e>=-9007199254740991&&e<=Mu};const Iu=function(e){return void 0===e};const Ru=function(e){return g(e)&&"[object WeakMap]"==ks(e)};const Bu=function(e){return g(e)&&"[object WeakSet]"==m(e)};const Pu=function(e){return Yo("function"==typeof e?e:lo(e,1))};var Du=Array.prototype.join;const Ou=function(e,t){return null==e?"":Du.call(e,t)};var Lu=ki((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}));const Nu=Lu;var Fu=la((function(e,t,n){bt(e,n,t)}));const Uu=Fu;const ku=function(e,t,n){for(var r=n+1;r--;)if(e[r]===t)return r;return r};var zu=Math.max,Gu=Math.min;const ju=function(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=r;return void 0!==n&&(i=(i=U(n))<0?zu(r+i,0):Gu(i,r-1)),t==t?ku(e,t,i):Ke(e,Ye,i,!0)};var Vu=ki((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}));const Qu=Vu;const Hu=ti("toLowerCase");const Wu=function(e,t){return e<t};const qu=ml(Wu);const Xu=ml((function(e,t){return e<=t}));const Ku=function(e,t){var n={};return t=Yo(t,3),sa(e,(function(e,r,i){bt(n,t(e,r,i),e)})),n};const Yu=function(e,t){var n={};return t=Yo(t,3),sa(e,(function(e,r,i){bt(n,r,t(e,r,i))})),n};const Ju=function(e){return jo(lo(e,1))};const $u=function(e,t){return Wo(e,lo(t,1))};const Zu=function(e,t,n){for(var r=-1,i=e.length;++r<i;){var s=e[r],o=t(s);if(null!=o&&(void 0===a?o==o&&!A(o):n(o,a)))var a=o,c=s}return c};const eh=function(e){return e&&e.length?Zu(e,z,fl):void 0};const th=function(e,t){return e&&e.length?Zu(e,Yo(t,2),fl):void 0};const nh=function(e,t){for(var n,r=-1,i=e.length;++r<i;){var s=t(e[r]);void 0!==s&&(n=void 0===n?s:n+s)}return n};const rh=function(e,t){var n=null==e?0:e.length;return n?nh(e,t)/n:NaN};const ih=function(e){return rh(e,z)};const sh=function(e,t){return rh(e,Yo(t,2))};var oh=Pt((function(e,t,n){Pa(e,t,n)}));const ah=oh;const ch=Ct((function(e,t){return function(n){return Jl(n,e,t)}}));const lh=Ct((function(e,t){return function(n){return Jl(e,n,t)}}));const uh=function(e){return e&&e.length?Zu(e,z,Wu):void 0};const hh=function(e,t){return e&&e.length?Zu(e,Yo(t,2),Wu):void 0};const dh=function(e,t,n){var r=cn(t),i=cl(t,r),s=!(R(n)&&"chain"in n&&!n.chain),o=G(e);return Xe(i,(function(n){var r=t[n];e[n]=r,o&&(e.prototype[n]=function(){var t=this.__chain__;if(s||t){var n=e(this.__wrapped__);return(n.__actions__=Ie(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,pr([this.value()],arguments))})})),e};const ph=E((function(e,t){return e*t}),1);const fh=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}};const mh=function(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n};var gh=o?o.iterator:void 0;const Ah=function(e){if(!e)return[];if(Rt(e))return Tl(e)?ei(e):Ie(e);if(gh&&e[gh])return mh(e[gh]());var t=ks(e);return("[object Map]"==t?To:"[object Set]"==t?So:Ml)(e)};const yh=function(){void 0===this.__values__&&(this.__values__=Ah(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?void 0:this.__values__[this.__index__++]}};const _h=function(e,t){var n=e.length;if(n)return ot(t+=t<0?n:0,n)?e[t]:void 0};const vh=function(e,t){return e&&e.length?_h(e,U(t)):void 0};const bh=function(e){return e=U(e),Ct((function(t){return _h(t,e)}))};const xh=function(e,t){return t=cr(t,e),null==(e=Yl(e,t))||delete e[lr(Wa(t))]};const wh=function(e){return Sr(e)?void 0:e};var Eh=yr((function(e,t){var n={};if(null==e)return n;var r=!1;t=_(t,(function(t){return t=cr(t,e),r||(r=t.length>1),t})),Tt(e,Es(e),n),r&&(n=lo(n,7,wh));for(var i=t.length;i--;)xh(n,t[i]);return n}));const Th=Eh;const Sh=function(e,t,n,r){if(!R(e))return e;for(var i=-1,s=(t=cr(t,e)).length,o=s-1,a=e;null!=a&&++i<s;){var c=lr(t[i]),l=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(i!=o){var u=a[c];void 0===(l=r?r(u,c,a):void 0)&&(l=R(u)?u:ot(t[i+1])?[]:{})}Et(a,c,l),a=a[c]}return e};const Mh=function(e,t,n){for(var r=-1,i=t.length,s={};++r<i;){var o=t[r],a=ur(e,o);n(a,o)&&Sh(s,cr(o,e),a)}return s};const Ch=function(e,t){if(null==e)return{};var n=_(Es(e),(function(e){return[e]}));return t=Yo(t),Mh(e,n,(function(e,n){return t(e,n[0])}))};const Ih=function(e,t){return Ch(e,fh(Yo(t)))};const Rh=function(e){return Rr(2,e)};const Bh=function(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e};const Ph=function(e,t){if(e!==t){var n=void 0!==e,r=null===e,i=e==e,s=A(e),o=void 0!==t,a=null===t,c=t==t,l=A(t);if(!a&&!l&&!s&&e>t||s&&o&&c&&!a&&!l||r&&o&&c||!n&&c||!i)return 1;if(!r&&!s&&!l&&e<t||l&&n&&i&&!r&&!s||a&&n&&i||!o&&i||!c)return-1}return 0};const Dh=function(e,t,n){for(var r=-1,i=e.criteria,s=t.criteria,o=i.length,a=n.length;++r<o;){var c=Ph(i[r],s[r]);if(c)return r>=a?c:c*("desc"==n[r]?-1:1)}return e.index-t.index};const Oh=function(e,t,n){t=t.length?_(t,(function(e){return v(e)?function(t){return ur(t,1===e.length?e[0]:e)}:e})):[z];var r=-1;t=_(t,Xt(Yo));var i=Vc(e,(function(e,n,i){var s=_(t,(function(t){return t(e)}));return{criteria:s,index:++r,value:e}}));return Bh(i,(function(e,t){return Dh(e,t,n)}))};const Lh=function(e,t,n,r){return null==e?[]:(v(t)||(t=null==t?[]:[t]),v(n=r?void 0:n)||(n=null==n?[]:[n]),Oh(e,t,n))};const Nh=function(e){return yr((function(t){return t=_(t,Xt(Yo)),Ct((function(n){var r=this;return e(t,(function(e){return de(e,r,n)}))}))}))};const Fh=Nh(_);const Uh=Ct;var kh=Math.min,zh=Uh((function(e,t){var n=(t=1==t.length&&v(t[0])?_(t[0],Xt(Yo)):_(gr(t,1),Xt(Yo))).length;return Ct((function(r){for(var i=-1,s=kh(r.length,n);++i<s;)r[i]=t[i].call(this,r[i]);return de(e,this,r)}))}));const Gh=zh;const jh=Nh(wc);const Vh=Nh(xo);var Qh=Math.floor;const Hh=function(e,t){var n="";if(!e||t<1||t>9007199254740991)return n;do{t%2&&(n+=e),(t=Qh(t/2))&&(e+=e)}while(t);return n};const Wh=qo("length");var qh="\\ud800-\\udfff",Xh="["+qh+"]",Kh="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Yh="\\ud83c[\\udffb-\\udfff]",Jh="[^"+qh+"]",$h="(?:\\ud83c[\\udde6-\\uddff]){2}",Zh="[\\ud800-\\udbff][\\udc00-\\udfff]",ed="(?:"+Kh+"|"+Yh+")"+"?",td="[\\ufe0e\\ufe0f]?",nd=td+ed+("(?:\\u200d(?:"+[Jh,$h,Zh].join("|")+")"+td+ed+")*"),rd="(?:"+[Jh+Kh+"?",Kh,$h,Zh,Xh].join("|")+")",id=RegExp(Yh+"(?="+Yh+")|"+rd+nd,"g");const sd=function(e){for(var t=id.lastIndex=0;id.test(e);)++t;return t};const od=function(e){return kr(e)?sd(e):Wh(e)};var ad=Math.ceil;const cd=function(e,t){var n=(t=void 0===t?" ":w(t)).length;if(n<2)return n?Hh(t,e):t;var r=Hh(t,ad(e/od(t)));return kr(t)?Fr(ei(r),0,e).join(""):r.slice(0,e)};var ld=Math.ceil,ud=Math.floor;const hd=function(e,t,n){e=ar(e);var r=(t=U(t))?od(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return cd(ud(i),n)+e+cd(ld(i),n)};const dd=function(e,t,n){e=ar(e);var r=(t=U(t))?od(e):0;return t&&r<t?e+cd(t-r,n):e};const pd=function(e,t,n){e=ar(e);var r=(t=U(t))?od(e):0;return t&&r<t?cd(t-r,n)+e:e};var fd=/^\s+/,md=s.parseInt;const gd=function(e,t,n){return n||null==t?t=0:t&&(t=+t),md(ar(e).replace(fd,""),t||0)};var Ad=Ct((function(e,t){var n=ut(t,it(Ad));return _t(e,32,void 0,t,n)}));Ad.placeholder={};const yd=Ad;var _d=Ct((function(e,t){var n=ut(t,it(_d));return _t(e,64,void 0,t,n)}));_d.placeholder={};const vd=_d;var bd=la((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));const xd=bd;const wd=function(e,t){return Mh(e,t,(function(t,n){return Ho(e,n)}))};const Ed=yr((function(e,t){return null==e?{}:wd(e,t)}));const Td=function(e){for(var t,n=this;n instanceof ye;){var r=Re(n);r.__index__=0,r.__values__=void 0,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t};const Sd=function(e){return function(t){return null==e?void 0:ur(e,t)}};const Md=function(e,t,n,r){for(var i=n-1,s=e.length;++i<s;)if(r(e[i],t))return i;return-1};var Cd=Array.prototype.splice;const Id=function(e,t,n,r){var i=r?Md:$e,s=-1,o=t.length,a=e;for(e===t&&(t=Ie(t)),n&&(a=_(e,Xt(n)));++s<o;)for(var c=0,l=t[s],u=n?n(l):l;(c=i(a,u,c,r))>-1;)a!==e&&Cd.call(a,c,1),Cd.call(e,c,1);return e};const Rd=function(e,t){return e&&e.length&&t&&t.length?Id(e,t):e};const Bd=Ct(Rd);const Pd=function(e,t,n){return e&&e.length&&t&&t.length?Id(e,t,Yo(n,2)):e};const Dd=function(e,t,n){return e&&e.length&&t&&t.length?Id(e,t,void 0,n):e};var Od=Array.prototype.splice;const Ld=function(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(n==r||i!==s){var s=i;ot(i)?Od.call(e,i,1):xh(e,i)}}return e};var Nd=yr((function(e,t){var n=null==e?0:e.length,r=dr(e,t);return Ld(e,_(t,(function(e){return ot(e,n)?+e:e})).sort(Ph)),r}));const Fd=Nd;var Ud=Math.floor,kd=Math.random;const zd=function(e,t){return e+Ud(kd()*(t-e+1))};var Gd=parseFloat,jd=Math.min,Vd=Math.random;const Qd=function(e,t,n){if(n&&"boolean"!=typeof n&&Bt(e,t,n)&&(t=n=void 0),void 0===n&&("boolean"==typeof t?(n=t,t=void 0):"boolean"==typeof e&&(n=e,e=void 0)),void 0===e&&void 0===t?(e=0,t=1):(e=F(e),void 0===t?(t=e,e=0):t=F(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Vd();return jd(e+i*(t-e+Gd("1e-"+((i+"").length-1))),t)}return zd(e,t)};var Hd=Math.ceil,Wd=Math.max;const qd=function(e,t,n,r){for(var i=-1,s=Wd(Hd((t-e)/(n||1)),0),o=Array(s);s--;)o[r?s:++i]=e,e+=n;return o};const Xd=function(e){return function(t,n,r){return r&&"number"!=typeof r&&Bt(t,n,r)&&(n=r=void 0),t=F(t),void 0===n?(n=t,t=0):n=F(n),r=void 0===r?t<n?1:-1:F(r),qd(t,n,r,e)}};const Kd=Xd();const Yd=Xd(!0);var Jd=yr((function(e,t){return _t(e,256,void 0,void 0,void 0,t)}));const $d=Jd;const Zd=function(e,t,n,r,i){return i(e,(function(e,i,s){n=r?(r=!1,e):t(n,e,i,s)})),n};const ep=function(e,t,n){var r=v(e)?ii:Zd,i=arguments.length<3;return r(e,Yo(t,4),n,i,aa)};const tp=function(e,t,n,r){var i=null==e?0:e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n};const np=function(e,t,n){var r=v(e)?tp:Zd,i=arguments.length<3;return r(e,Yo(t,4),n,i,cc)};const rp=function(e,t){return(v(e)?ps:Ic)(e,fh(Yo(t,3)))};const ip=function(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],s=e.length;for(t=Yo(t,3);++r<s;){var o=e[r];t(o,r,e)&&(n.push(o),i.push(r))}return Ld(e,i),n};const sp=function(e,t,n){return t=(n?Bt(e,t,n):void 0===t)?1:U(t),Hh(ar(e),t)};const op=function(){var e=arguments,t=ar(e[0]);return e.length<3?t:t.replace(e[1],e[2])};const ap=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=void 0===t?t:U(t),Ct(e,t)};const cp=function(e,t,n){var r=-1,i=(t=cr(t,e)).length;for(i||(i=1,e=void 0);++r<i;){var s=null==e?void 0:e[lr(t[r])];void 0===s&&(r=i,s=n),e=G(s)?s.call(e):s}return e};var lp=Array.prototype.reverse;const up=function(e){return null==e?e:lp.call(e)};const hp=Hi("round");const dp=function(e){var t=e.length;return t?e[zd(0,t-1)]:void 0};const pp=function(e){return dp(Ml(e))};const fp=function(e){return(v(e)?dp:pp)(e)};const mp=function(e,t){var n=-1,r=e.length,i=r-1;for(t=void 0===t?r:t;++n<t;){var s=zd(n,i),o=e[s];e[s]=e[n],e[n]=o}return e.length=t,e};const gp=function(e,t){return mp(Ie(e),Ji(t,0,e.length))};const Ap=function(e,t){var n=Ml(e);return mp(n,Ji(t,0,n.length))};const yp=function(e,t,n){return t=(n?Bt(e,t,n):void 0===t)?1:U(t),(v(e)?gp:Ap)(e,t)};const _p=function(e,t,n){return null==e?e:Sh(e,t,n)};const vp=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:Sh(e,t,n,r)};const bp=function(e){return mp(Ie(e))};const xp=function(e){return mp(Ml(e))};const wp=function(e){return(v(e)?bp:xp)(e)};const Ep=function(e){if(null==e)return 0;if(Rt(e))return Tl(e)?od(e):e.length;var t=ks(e);return"[object Map]"==t||"[object Set]"==t?e.size:an(e).length};const Tp=function(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&Bt(e,t,n)?(t=0,n=r):(t=null==t?0:U(t),n=void 0===n?r:U(n)),Nr(e,t,n)):[]};var Sp=ki((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));const Mp=Sp;const Cp=function(e,t){var n;return aa(e,(function(e,r,i){return!(n=t(e,r,i))})),!!n};const Ip=function(e,t,n){var r=v(e)?xo:Cp;return n&&Bt(e,t,n)&&(t=void 0),r(e,Yo(t,3))};const Rp=Ct((function(e,t){if(null==e)return[];var n=t.length;return n>1&&Bt(e,t[0],t[1])?t=[]:n>2&&Bt(t[0],t[1],t[2])&&(t=[t[0]]),Oh(e,gr(t,1),[])}));var Bp=Math.floor,Pp=Math.min;const Dp=function(e,t,n,r){var i=0,s=null==e?0:e.length;if(0===s)return 0;for(var o=(t=n(t))!=t,a=null===t,c=A(t),l=void 0===t;i<s;){var u=Bp((i+s)/2),h=n(e[u]),d=void 0!==h,p=null===h,f=h==h,m=A(h);if(o)var g=r||f;else g=l?f&&(r||d):a?f&&d&&(r||!p):c?f&&d&&!p&&(r||!m):!p&&!m&&(r?h<=t:h<t);g?i=u+1:s=u}return Pp(s,4294967294)};const Op=function(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t==t&&i<=2147483647){for(;r<i;){var s=r+i>>>1,o=e[s];null!==o&&!A(o)&&(n?o<=t:o<t)?r=s+1:i=s}return i}return Dp(e,t,z,n)};const Lp=function(e,t){return Op(e,t)};const Np=function(e,t,n){return Dp(e,t,Yo(n,2))};const Fp=function(e,t){var n=null==e?0:e.length;if(n){var r=Op(e,t);if(r<n&&xt(e[r],t))return r}return-1};const Up=function(e,t){return Op(e,t,!0)};const kp=function(e,t,n){return Dp(e,t,Yo(n,2),!0)};const zp=function(e,t){if(null==e?0:e.length){var n=Op(e,t,!0)-1;if(xt(e[n],t))return n}return-1};const Gp=function(e,t){for(var n=-1,r=e.length,i=0,s=[];++n<r;){var o=e[n],a=t?t(o):o;if(!n||!xt(a,c)){var c=a;s[i++]=0===o?0:o}}return s};const jp=function(e){return e&&e.length?Gp(e):[]};const Vp=function(e,t){return e&&e.length?Gp(e,Yo(t,2)):[]};const Qp=function(e,t,n){return n&&"number"!=typeof n&&Bt(e,t,n)&&(t=n=void 0),(n=void 0===n?4294967295:n>>>0)?(e=ar(e))&&("string"==typeof t||null!=t&&!Su(t))&&!(t=w(t))&&kr(e)?Fr(ei(e),0,n):e.split(t,n):[]};var Hp=Math.max;const Wp=function(e,t){if("function"!=typeof e)throw new TypeError("Expected a function");return t=null==t?0:Hp(U(t),0),Ct((function(n){var r=n[t],i=Fr(n,0,t);return r&&pr(i,r),de(e,this,i)}))};var qp=ki((function(e,t,n){return e+(n?" ":"")+ni(t)}));const Xp=qp;const Kp=function(e,t,n){return e=ar(e),n=null==n?0:Ji(U(n),0,e.length),t=w(t),e.slice(n,n+t.length)==t};const Yp=function(){return{}};const Jp=function(){return""};const $p=function(){return!0};const Zp=E((function(e,t){return e-t}),0);const ef=function(e){return e&&e.length?nh(e,z):0};const tf=function(e,t){return e&&e.length?nh(e,Yo(t,2)):0};const nf=function(e){var t=null==e?0:e.length;return t?Nr(e,1,t):[]};const rf=function(e,t,n){return e&&e.length?(t=n||void 0===t?1:U(t),Nr(e,0,t<0?0:t)):[]};const sf=function(e,t,n){var r=null==e?0:e.length;return r?(t=n||void 0===t?1:U(t),Nr(e,(t=r-t)<0?0:t,r)):[]};const of=function(e,t){return e&&e.length?ec(e,Yo(t,3),!1,!0):[]};const af=function(e,t){return e&&e.length?ec(e,Yo(t,3)):[]};const cf=function(e,t){return t(e),e};var lf=Object.prototype,uf=lf.hasOwnProperty;const hf=function(e,t,n,r){return void 0===e||xt(e,lf[n])&&!uf.call(r,n)?t:e};var df={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};const pf=function(e){return"\\"+df[e]};const ff=/<%=([\s\S]+?)%>/g;const mf={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:ff,variable:"",imports:{_:{escape:_c}}};var gf=/\b__p \+= '';/g,Af=/\b(__p \+=) '' \+/g,yf=/(__e\(.*?\)|\b__t\)) \+\n'';/g,_f=/[()=,{}\[\]\/\s]/,vf=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,bf=/($^)/,xf=/['\n\r\u2028\u2029\\]/g,wf=Object.prototype.hasOwnProperty;const Ef=function(e,t,n){var r=mf.imports._.templateSettings||mf;n&&Bt(e,t,n)&&(t=void 0),e=ar(e),t=_n({},t,r,hf);var i,s,o=_n({},t.imports,r.imports,hf),a=cn(o),c=Sl(o,a),l=0,u=t.interpolate||bf,h="__p += '",d=RegExp((t.escape||bf).source+"|"+u.source+"|"+(u===ff?vf:bf).source+"|"+(t.evaluate||bf).source+"|$","g"),p=wf.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/\s/g," ")+"\n":"";e.replace(d,(function(t,n,r,o,a,c){return r||(r=o),h+=e.slice(l,c).replace(xf,pf),n&&(i=!0,h+="' +\n__e("+n+") +\n'"),a&&(s=!0,h+="';\n"+a+";\n__p += '"),r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),l=c+t.length,t})),h+="';\n";var f=wf.call(t,"variable")&&t.variable;if(f){if(_f.test(f))throw new Error("Invalid `variable` option passed into `_.template`")}else h="with (obj) {\n"+h+"\n}\n";h=(s?h.replace(gf,""):h).replace(Af,"$1").replace(yf,"$1;"),h="function("+(f||"obj")+") {\n"+(f?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var m=Ir((function(){return Function(a,p+"return "+h).apply(void 0,c)}));if(m.source=h,Mr(m))throw m;return m};const Tf=function(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new TypeError("Expected a function");return R(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),ba(e,t,{leading:r,maxWait:t,trailing:i})};const Sf=function(e,t){return t(e)};var Mf=4294967295,Cf=Math.min;const If=function(e,t){if((e=U(e))<1||e>9007199254740991)return[];var n=Mf,r=Cf(e,Mf);t=rc(t),e-=Mf;for(var i=Lt(r,t);++n<e;)t(n);return i};const Rf=function(){return this};const Bf=function(e,t){var n=e;return n instanceof ve&&(n=n.value()),ii(t,(function(e,t){return t.func.apply(t.thisArg,pr([e],t.args))}),n)};const Pf=function(){return Bf(this.__wrapped__,this.__actions__)};const Df=function(e){return ar(e).toLowerCase()};const Of=function(e){return v(e)?_(e,lr):A(e)?[e]:Ie(or(ar(e)))};var Lf=9007199254740991;const Nf=function(e){return e?Ji(U(e),-9007199254740991,Lf):0===e?e:0};const Ff=function(e){return ar(e).toUpperCase()};const Uf=function(e,t,n){var r=v(e),i=r||Ht(e)||en(e);if(t=Yo(t,4),null==n){var s=e&&e.constructor;n=i?r?new s:[]:R(e)&&G(s)?le(vr(e)):{}}return(i?Xe:sa)(e,(function(e,r,i){return t(n,e,r,i)})),n};const kf=function(e,t){for(var n=e.length;n--&&$e(t,e[n],0)>-1;);return n};const zf=function(e,t){for(var n=-1,r=e.length;++n<r&&$e(t,e[n],0)>-1;);return n};const Gf=function(e,t,n){if((e=ar(e))&&(n||void 0===t))return I(e);if(!e||!(t=w(t)))return e;var r=ei(e),i=ei(t),s=zf(r,i),o=kf(r,i)+1;return Fr(r,s,o).join("")};const jf=function(e,t,n){if((e=ar(e))&&(n||void 0===t))return e.slice(0,M(e)+1);if(!e||!(t=w(t)))return e;var r=ei(e),i=kf(r,ei(t))+1;return Fr(r,0,i).join("")};var Vf=/^\s+/;const Qf=function(e,t,n){if((e=ar(e))&&(n||void 0===t))return e.replace(Vf,"");if(!e||!(t=w(t)))return e;var r=ei(e),i=zf(r,ei(t));return Fr(r,i).join("")};var Hf=/\w*$/;const Wf=function(e,t){var n=30,r="...";if(R(t)){var i="separator"in t?t.separator:i;n="length"in t?U(t.length):n,r="omission"in t?w(t.omission):r}var s=(e=ar(e)).length;if(kr(e)){var o=ei(e);s=o.length}if(n>=s)return e;var a=n-od(r);if(a<1)return r;var c=o?Fr(o,0,a).join(""):e.slice(0,a);if(void 0===i)return c+r;if(o&&(a+=c.length-a),Su(i)){if(e.slice(a).search(i)){var l,u=c;for(i.global||(i=RegExp(i.source,ar(Hf.exec(i))+"g")),i.lastIndex=0;l=i.exec(u);)var h=l.index;c=c.slice(0,void 0===h?a:h)}}else if(e.indexOf(w(i),a)!=a){var d=c.lastIndexOf(i);d>-1&&(c=c.slice(0,d))}return c+r};const qf=function(e){return vt(e,1)};const Xf=si({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"});var Kf=/&(?:amp|lt|gt|quot|#39);/g,Yf=RegExp(Kf.source);const Jf=function(e){return(e=ar(e))&&Yf.test(e)?e.replace(Kf,Xf):e};var $f=Ms&&1/So(new Ms([,-0]))[1]==1/0?function(e){return new Ms(e)}:be;const Zf=$f;const em=function(e,t,n){var r=-1,i=Ze,s=e.length,o=!0,a=[],c=a;if(n)o=!1,i=ja;else if(s>=200){var l=t?null:Zf(e);if(l)return So(l);o=!1,i=wo,c=new bo}else c=t?[]:a;e:for(;++r<s;){var u=e[r],h=t?t(u):u;if(u=n||0!==u?u:0,o&&h==h){for(var d=c.length;d--;)if(c[d]===h)continue e;t&&c.push(h),a.push(u)}else i(c,h,n)||(c!==a&&c.push(h),a.push(u))}return a};const tm=Ct((function(e){return em(gr(e,1,Ca,!0))}));var nm=Ct((function(e){var t=Wa(e);return Ca(t)&&(t=void 0),em(gr(e,1,Ca,!0),Yo(t,2))}));const rm=nm;const im=Ct((function(e){var t=Wa(e);return t="function"==typeof t?t:void 0,em(gr(e,1,Ca,!0),void 0,t)}));const sm=function(e){return e&&e.length?em(e):[]};const om=function(e,t){return e&&e.length?em(e,Yo(t,2)):[]};const am=function(e,t){return t="function"==typeof t?t:void 0,e&&e.length?em(e,void 0,t):[]};var cm=0;const lm=function(e){var t=++cm;return ar(e)+t};const um=function(e,t){return null==e||xh(e,t)};var hm=Math.max;const dm=function(e){if(!e||!e.length)return[];var t=0;return e=ps(e,(function(e){if(Ca(e))return t=hm(e.length,t),!0})),Lt(t,(function(t){return _(e,qo(t))}))};const pm=function(e,t){if(!e||!e.length)return[];var n=dm(e);return null==t?n:_(n,(function(e){return de(t,void 0,e)}))};const fm=function(e,t,n,r){return Sh(e,t,n(ur(e,t)),r)};const mm=function(e,t,n){return null==e?e:fm(e,t,rc(n))};const gm=function(e,t,n,r){return r="function"==typeof r?r:void 0,null==e?e:fm(e,t,rc(n),r)};var Am=ki((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}));const ym=Am;const _m=function(e){return null==e?[]:Sl(e,mn(e))};var vm=Ct((function(e,t){return Ca(e)?Va(e,t):[]}));const bm=vm;const xm=function(e,t){return yd(rc(t),e)};const wm=yr((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return dr(t,e)};return!(t>1||this.__actions__.length)&&r instanceof ve&&ot(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Sf,args:[i],thisArg:void 0}),new Ce(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(void 0),e}))):this.thru(i)}));const Em=function(){return qi(this)};const Tm=function(){var e=this.__wrapped__;if(e instanceof ve){var t=e;return this.__actions__.length&&(t=new ve(this)),(t=t.reverse()).__actions__.push({func:Sf,args:[up],thisArg:void 0}),new Ce(t,this.__chain__)}return this.thru(up)};const Sm=function(e,t,n){var r=e.length;if(r<2)return r?em(e[0]):[];for(var i=-1,s=Array(r);++i<r;)for(var o=e[i],a=-1;++a<r;)a!=i&&(s[i]=Va(s[i]||o,e[a],t,n));return em(gr(s,1),t,n)};const Mm=Ct((function(e){return Sm(ps(e,Ca))}));var Cm=Ct((function(e){var t=Wa(e);return Ca(t)&&(t=void 0),Sm(ps(e,Ca),Yo(t,2))}));const Im=Cm;const Rm=Ct((function(e){var t=Wa(e);return t="function"==typeof t?t:void 0,Sm(ps(e,Ca),void 0,t)}));const Bm=Ct(dm);const Pm=function(e,t,n){for(var r=-1,i=e.length,s=t.length,o={};++r<i;){var a=r<s?t[r]:void 0;n(o,e[r],a)}return o};const Dm=function(e,t){return Pm(e||[],t||[],Et)};const Om=function(e,t){return Pm(e||[],t||[],Sh)};var Lm=Ct((function(e){var t=e.length,n=t>1?e[t-1]:void 0;return n="function"==typeof n?(e.pop(),n):void 0,pm(e,n)}));const Nm=Lm,Fm={chunk:Yi,compact:go,concat:Ao,difference:Ha,differenceBy:Xa,differenceWith:Ya,drop:$a,dropRight:Za,dropRightWhile:tc,dropWhile:nc,fill:Cc,findIndex:Dc,findLastIndex:kc,first:jc,flatten:Ar,flattenDeep:Yc,flattenDepth:Jc,fromPairs:al,head:jc,indexOf:Bl,initial:Pl,intersection:Nl,intersectionBy:Ul,intersectionWith:kl,join:Ou,last:Wa,lastIndexOf:ju,nth:vh,pull:Bd,pullAll:Rd,pullAllBy:Pd,pullAllWith:Dd,pullAt:Fd,remove:ip,reverse:up,slice:Tp,sortedIndex:Lp,sortedIndexBy:Np,sortedIndexOf:Fp,sortedLastIndex:Up,sortedLastIndexBy:kp,sortedLastIndexOf:zp,sortedUniq:jp,sortedUniqBy:Vp,tail:nf,take:rf,takeRight:sf,takeRightWhile:of,takeWhile:af,union:tm,unionBy:rm,unionWith:im,uniq:sm,uniqBy:om,uniqWith:am,unzip:dm,unzipWith:pm,without:bm,xor:Mm,xorBy:Im,xorWith:Rm,zip:Bm,zipObject:Dm,zipObjectDeep:Om,zipWith:Nm},Um={countBy:da,each:ic,eachRight:lc,every:Tc,filter:Rc,find:Oc,findLast:zc,flatMap:Hc,flatMapDeep:qc,flatMapDepth:Xc,forEach:ic,forEachRight:lc,groupBy:pl,includes:Il,invokeMap:eu,keyBy:Uu,map:Qc,orderBy:Lh,partition:xd,reduce:ep,reduceRight:np,reject:rp,sample:fp,sampleSize:yp,shuffle:wp,size:Ep,some:Ip,sortBy:Rp},km={now:ya},zm={after:k,ary:vt,before:Rr,bind:Pr,bindKey:Lr,curry:ma,curryRight:Aa,debounce:ba,defer:ka,delay:Ga,flip:$c,memoize:tr,negate:fh,once:Rh,overArgs:Gh,partial:yd,partialRight:vd,rearg:$d,rest:ap,spread:Wp,throttle:Tf,unary:qf,wrap:xm},Gm={castArray:ji,clone:uo,cloneDeep:ho,cloneDeepWith:po,cloneWith:fo,conformsTo:ta,eq:xt,gt:gl,gte:Al,isArguments:zt,isArray:v,isArrayBuffer:ru,isArrayLike:Rt,isArrayLikeObject:Ca,isBoolean:iu,isBuffer:Ht,isDate:au,isElement:cu,isEmpty:uu,isEqual:hu,isEqualWith:du,isError:Mr,isFinite:fu,isFunction:G,isInteger:mu,isLength:It,isMap:to,isMatch:gu,isMatchWith:Au,isNaN:_u,isNative:bu,isNil:xu,isNull:wu,isNumber:yu,isObject:R,isObjectLike:g,isPlainObject:Sr,isRegExp:Su,isSafeInteger:Cu,isSet:io,isString:Tl,isSymbol:A,isTypedArray:en,isUndefined:Iu,isWeakMap:Ru,isWeakSet:Bu,lt:qu,lte:Xu,toArray:Ah,toFinite:F,toInteger:U,toLength:Sc,toNumber:L,toPlainObject:Ra,toSafeInteger:Nf,toString:ar},jm={add:T,ceil:Wi,divide:Ja,floor:Zc,max:eh,maxBy:th,mean:ih,meanBy:sh,min:uh,minBy:hh,multiply:ph,round:hp,subtract:Zp,sum:ef,sumBy:tf},Vm={clamp:$i,inRange:El,random:Qd},Qm={assign:hn,assignIn:An,assignInWith:_n,assignWith:bn,at:_r,create:pa,defaults:Sa,defaultsDeep:Na,entries:fc,entriesIn:mc,extend:An,extendWith:_n,findKey:Nc,findLastKey:Gc,forIn:rl,forInRight:il,forOwn:sl,forOwnRight:ol,functions:ll,functionsIn:ul,get:hr,has:vl,hasIn:Ho,invert:Ql,invertBy:Kl,invoke:$l,keys:cn,keysIn:mn,mapKeys:Ku,mapValues:Yu,merge:ah,mergeWith:La,omit:Th,omitBy:Ih,pick:Ed,pickBy:Ch,result:cp,set:_p,setWith:vp,toPairs:fc,toPairsIn:mc,transform:Uf,unset:um,update:mm,updateWith:gm,values:Ml,valuesIn:_m},Hm={at:wm,chain:qi,commit:mo,lodash:De,next:yh,plant:Td,reverse:Tm,tap:cf,thru:Sf,toIterator:Rf,toJSON:Pf,value:Pf,valueOf:Pf,wrapperChain:Em},Wm={camelCase:Gi,capitalize:ri,deburr:li,endsWith:uc,escape:_c,escapeRegExp:xc,kebabCase:Nu,lowerCase:Qu,lowerFirst:Hu,pad:hd,padEnd:dd,padStart:pd,parseInt:gd,repeat:sp,replace:op,snakeCase:Mp,split:Qp,startCase:Xp,startsWith:Kp,template:Ef,templateSettings:mf,toLower:Df,toUpper:Ff,trim:Gf,trimEnd:jf,trimStart:Qf,truncate:Wf,unescape:Jf,upperCase:ym,upperFirst:ni,words:Fi},qm={attempt:Ir,bindAll:Dr,cond:Jo,conforms:ea,constant:Ve,defaultTo:xa,flow:tl,flowRight:nl,identity:z,iteratee:Pu,matches:Ju,matchesProperty:$u,method:ch,methodOf:lh,mixin:dh,noop:be,nthArg:bh,over:Fh,overEvery:jh,overSome:Vh,property:Ko,propertyOf:Sd,range:Kd,rangeRight:Yd,stubArray:fs,stubFalse:Gt,stubObject:Yp,stubString:Jp,stubTrue:$p,times:If,toPath:Of,uniqueId:lm};const Xm=function(){var e=new ve(this.__wrapped__);return e.__actions__=Ie(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ie(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ie(this.__views__),e};const Km=function(){if(this.__filtered__){var e=new ve(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e};var Ym=Math.max,Jm=Math.min;const $m=function(e,t,n){for(var r=-1,i=n.length;++r<i;){var s=n[r],o=s.size;switch(s.type){case"drop":e+=o;break;case"dropRight":t-=o;break;case"take":t=Jm(t,e+o);break;case"takeRight":e=Ym(e,t-o)}}return{start:e,end:t}};var Zm=Math.min;const eg=function(){var e=this.__wrapped__.value(),t=this.__dir__,n=v(e),r=t<0,i=n?e.length:0,s=$m(0,i,this.__views__),o=s.start,a=s.end,c=a-o,l=r?a:o-1,u=this.__iteratees__,h=u.length,d=0,p=Zm(c,this.__takeCount__);if(!n||!r&&i==c&&p==c)return Bf(e,this.__actions__);var f=[];e:for(;c--&&d<p;){for(var m=-1,g=e[l+=t];++m<h;){var A=u[m],y=A.iteratee,_=A.type,b=y(g);if(2==_)g=b;else if(!b){if(1==_)continue e;break e}}f[d++]=g}return f};var tg,ng,rg=4294967295,ig=Array.prototype,sg=Object.prototype.hasOwnProperty,og=o?o.iterator:void 0,ag=Math.max,cg=Math.min,lg=(tg=dh,function(e,t,n){if(null==n){var r=R(t),i=r&&cn(t),s=i&&i.length&&cl(t,i);(s?s.length:r)||(n=t,t=e,e=this)}return tg(e,t,n)});De.after=zm.after,De.ary=zm.ary,De.assign=Qm.assign,De.assignIn=Qm.assignIn,De.assignInWith=Qm.assignInWith,De.assignWith=Qm.assignWith,De.at=Qm.at,De.before=zm.before,De.bind=zm.bind,De.bindAll=qm.bindAll,De.bindKey=zm.bindKey,De.castArray=Gm.castArray,De.chain=Hm.chain,De.chunk=Fm.chunk,De.compact=Fm.compact,De.concat=Fm.concat,De.cond=qm.cond,De.conforms=qm.conforms,De.constant=qm.constant,De.countBy=Um.countBy,De.create=Qm.create,De.curry=zm.curry,De.curryRight=zm.curryRight,De.debounce=zm.debounce,De.defaults=Qm.defaults,De.defaultsDeep=Qm.defaultsDeep,De.defer=zm.defer,De.delay=zm.delay,De.difference=Fm.difference,De.differenceBy=Fm.differenceBy,De.differenceWith=Fm.differenceWith,De.drop=Fm.drop,De.dropRight=Fm.dropRight,De.dropRightWhile=Fm.dropRightWhile,De.dropWhile=Fm.dropWhile,De.fill=Fm.fill,De.filter=Um.filter,De.flatMap=Um.flatMap,De.flatMapDeep=Um.flatMapDeep,De.flatMapDepth=Um.flatMapDepth,De.flatten=Fm.flatten,De.flattenDeep=Fm.flattenDeep,De.flattenDepth=Fm.flattenDepth,De.flip=zm.flip,De.flow=qm.flow,De.flowRight=qm.flowRight,De.fromPairs=Fm.fromPairs,De.functions=Qm.functions,De.functionsIn=Qm.functionsIn,De.groupBy=Um.groupBy,De.initial=Fm.initial,De.intersection=Fm.intersection,De.intersectionBy=Fm.intersectionBy,De.intersectionWith=Fm.intersectionWith,De.invert=Qm.invert,De.invertBy=Qm.invertBy,De.invokeMap=Um.invokeMap,De.iteratee=qm.iteratee,De.keyBy=Um.keyBy,De.keys=cn,De.keysIn=Qm.keysIn,De.map=Um.map,De.mapKeys=Qm.mapKeys,De.mapValues=Qm.mapValues,De.matches=qm.matches,De.matchesProperty=qm.matchesProperty,De.memoize=zm.memoize,De.merge=Qm.merge,De.mergeWith=Qm.mergeWith,De.method=qm.method,De.methodOf=qm.methodOf,De.mixin=lg,De.negate=fh,De.nthArg=qm.nthArg,De.omit=Qm.omit,De.omitBy=Qm.omitBy,De.once=zm.once,De.orderBy=Um.orderBy,De.over=qm.over,De.overArgs=zm.overArgs,De.overEvery=qm.overEvery,De.overSome=qm.overSome,De.partial=zm.partial,De.partialRight=zm.partialRight,De.partition=Um.partition,De.pick=Qm.pick,De.pickBy=Qm.pickBy,De.property=qm.property,De.propertyOf=qm.propertyOf,De.pull=Fm.pull,De.pullAll=Fm.pullAll,De.pullAllBy=Fm.pullAllBy,De.pullAllWith=Fm.pullAllWith,De.pullAt=Fm.pullAt,De.range=qm.range,De.rangeRight=qm.rangeRight,De.rearg=zm.rearg,De.reject=Um.reject,De.remove=Fm.remove,De.rest=zm.rest,De.reverse=Fm.reverse,De.sampleSize=Um.sampleSize,De.set=Qm.set,De.setWith=Qm.setWith,De.shuffle=Um.shuffle,De.slice=Fm.slice,De.sortBy=Um.sortBy,De.sortedUniq=Fm.sortedUniq,De.sortedUniqBy=Fm.sortedUniqBy,De.split=Wm.split,De.spread=zm.spread,De.tail=Fm.tail,De.take=Fm.take,De.takeRight=Fm.takeRight,De.takeRightWhile=Fm.takeRightWhile,De.takeWhile=Fm.takeWhile,De.tap=Hm.tap,De.throttle=zm.throttle,De.thru=Sf,De.toArray=Gm.toArray,De.toPairs=Qm.toPairs,De.toPairsIn=Qm.toPairsIn,De.toPath=qm.toPath,De.toPlainObject=Gm.toPlainObject,De.transform=Qm.transform,De.unary=zm.unary,De.union=Fm.union,De.unionBy=Fm.unionBy,De.unionWith=Fm.unionWith,De.uniq=Fm.uniq,De.uniqBy=Fm.uniqBy,De.uniqWith=Fm.uniqWith,De.unset=Qm.unset,De.unzip=Fm.unzip,De.unzipWith=Fm.unzipWith,De.update=Qm.update,De.updateWith=Qm.updateWith,De.values=Qm.values,De.valuesIn=Qm.valuesIn,De.without=Fm.without,De.words=Wm.words,De.wrap=zm.wrap,De.xor=Fm.xor,De.xorBy=Fm.xorBy,De.xorWith=Fm.xorWith,De.zip=Fm.zip,De.zipObject=Fm.zipObject,De.zipObjectDeep=Fm.zipObjectDeep,De.zipWith=Fm.zipWith,De.entries=Qm.toPairs,De.entriesIn=Qm.toPairsIn,De.extend=Qm.assignIn,De.extendWith=Qm.assignInWith,lg(De,De),De.add=jm.add,De.attempt=qm.attempt,De.camelCase=Wm.camelCase,De.capitalize=Wm.capitalize,De.ceil=jm.ceil,De.clamp=Vm.clamp,De.clone=Gm.clone,De.cloneDeep=Gm.cloneDeep,De.cloneDeepWith=Gm.cloneDeepWith,De.cloneWith=Gm.cloneWith,De.conformsTo=Gm.conformsTo,De.deburr=Wm.deburr,De.defaultTo=qm.defaultTo,De.divide=jm.divide,De.endsWith=Wm.endsWith,De.eq=Gm.eq,De.escape=Wm.escape,De.escapeRegExp=Wm.escapeRegExp,De.every=Um.every,De.find=Um.find,De.findIndex=Fm.findIndex,De.findKey=Qm.findKey,De.findLast=Um.findLast,De.findLastIndex=Fm.findLastIndex,De.findLastKey=Qm.findLastKey,De.floor=jm.floor,De.forEach=Um.forEach,De.forEachRight=Um.forEachRight,De.forIn=Qm.forIn,De.forInRight=Qm.forInRight,De.forOwn=Qm.forOwn,De.forOwnRight=Qm.forOwnRight,De.get=Qm.get,De.gt=Gm.gt,De.gte=Gm.gte,De.has=Qm.has,De.hasIn=Qm.hasIn,De.head=Fm.head,De.identity=z,De.includes=Um.includes,De.indexOf=Fm.indexOf,De.inRange=Vm.inRange,De.invoke=Qm.invoke,De.isArguments=Gm.isArguments,De.isArray=v,De.isArrayBuffer=Gm.isArrayBuffer,De.isArrayLike=Gm.isArrayLike,De.isArrayLikeObject=Gm.isArrayLikeObject,De.isBoolean=Gm.isBoolean,De.isBuffer=Gm.isBuffer,De.isDate=Gm.isDate,De.isElement=Gm.isElement,De.isEmpty=Gm.isEmpty,De.isEqual=Gm.isEqual,De.isEqualWith=Gm.isEqualWith,De.isError=Gm.isError,De.isFinite=Gm.isFinite,De.isFunction=Gm.isFunction,De.isInteger=Gm.isInteger,De.isLength=Gm.isLength,De.isMap=Gm.isMap,De.isMatch=Gm.isMatch,De.isMatchWith=Gm.isMatchWith,De.isNaN=Gm.isNaN,De.isNative=Gm.isNative,De.isNil=Gm.isNil,De.isNull=Gm.isNull,De.isNumber=Gm.isNumber,De.isObject=R,De.isObjectLike=Gm.isObjectLike,De.isPlainObject=Gm.isPlainObject,De.isRegExp=Gm.isRegExp,De.isSafeInteger=Gm.isSafeInteger,De.isSet=Gm.isSet,De.isString=Gm.isString,De.isSymbol=Gm.isSymbol,De.isTypedArray=Gm.isTypedArray,De.isUndefined=Gm.isUndefined,De.isWeakMap=Gm.isWeakMap,De.isWeakSet=Gm.isWeakSet,De.join=Fm.join,De.kebabCase=Wm.kebabCase,De.last=Wa,De.lastIndexOf=Fm.lastIndexOf,De.lowerCase=Wm.lowerCase,De.lowerFirst=Wm.lowerFirst,De.lt=Gm.lt,De.lte=Gm.lte,De.max=jm.max,De.maxBy=jm.maxBy,De.mean=jm.mean,De.meanBy=jm.meanBy,De.min=jm.min,De.minBy=jm.minBy,De.stubArray=qm.stubArray,De.stubFalse=qm.stubFalse,De.stubObject=qm.stubObject,De.stubString=qm.stubString,De.stubTrue=qm.stubTrue,De.multiply=jm.multiply,De.nth=Fm.nth,De.noop=qm.noop,De.now=km.now,De.pad=Wm.pad,De.padEnd=Wm.padEnd,De.padStart=Wm.padStart,De.parseInt=Wm.parseInt,De.random=Vm.random,De.reduce=Um.reduce,De.reduceRight=Um.reduceRight,De.repeat=Wm.repeat,De.replace=Wm.replace,De.result=Qm.result,De.round=jm.round,De.sample=Um.sample,De.size=Um.size,De.snakeCase=Wm.snakeCase,De.some=Um.some,De.sortedIndex=Fm.sortedIndex,De.sortedIndexBy=Fm.sortedIndexBy,De.sortedIndexOf=Fm.sortedIndexOf,De.sortedLastIndex=Fm.sortedLastIndex,De.sortedLastIndexBy=Fm.sortedLastIndexBy,De.sortedLastIndexOf=Fm.sortedLastIndexOf,De.startCase=Wm.startCase,De.startsWith=Wm.startsWith,De.subtract=jm.subtract,De.sum=jm.sum,De.sumBy=jm.sumBy,De.template=Wm.template,De.times=qm.times,De.toFinite=Gm.toFinite,De.toInteger=U,De.toLength=Gm.toLength,De.toLower=Wm.toLower,De.toNumber=Gm.toNumber,De.toSafeInteger=Gm.toSafeInteger,De.toString=Gm.toString,De.toUpper=Wm.toUpper,De.trim=Wm.trim,De.trimEnd=Wm.trimEnd,De.trimStart=Wm.trimStart,De.truncate=Wm.truncate,De.unescape=Wm.unescape,De.uniqueId=qm.uniqueId,De.upperCase=Wm.upperCase,De.upperFirst=Wm.upperFirst,De.each=Um.forEach,De.eachRight=Um.forEachRight,De.first=Fm.head,lg(De,(ng={},sa(De,(function(e,t){sg.call(De.prototype,t)||(ng[t]=e)})),ng),{chain:!1}),De.VERSION="4.17.21",(De.templateSettings=Wm.templateSettings).imports._=De,Xe(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){De[e].placeholder=De})),Xe(["drop","take"],(function(e,t){ve.prototype[e]=function(n){n=void 0===n?1:ag(U(n),0);var r=this.__filtered__&&!t?new ve(this):this.clone();return r.__filtered__?r.__takeCount__=cg(n,r.__takeCount__):r.__views__.push({size:cg(n,rg),type:e+(r.__dir__<0?"Right":"")}),r},ve.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),Xe(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=1==n||3==n;ve.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Yo(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),Xe(["head","last"],(function(e,t){var n="take"+(t?"Right":"");ve.prototype[e]=function(){return this[n](1).value()[0]}})),Xe(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");ve.prototype[e]=function(){return this.__filtered__?new ve(this):this[n](1)}})),ve.prototype.compact=function(){return this.filter(z)},ve.prototype.find=function(e){return this.filter(e).head()},ve.prototype.findLast=function(e){return this.reverse().find(e)},ve.prototype.invokeMap=Ct((function(e,t){return"function"==typeof e?new ve(this):this.map((function(n){return Jl(n,e,t)}))})),ve.prototype.reject=function(e){return this.filter(fh(Yo(e)))},ve.prototype.slice=function(e,t){e=U(e);var n=this;return n.__filtered__&&(e>0||t<0)?new ve(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),void 0!==t&&(n=(t=U(t))<0?n.dropRight(-t):n.take(t-e)),n)},ve.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},ve.prototype.toArray=function(){return this.take(rg)},sa(ve.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=De[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);i&&(De.prototype[t]=function(){var t=this.__wrapped__,o=r?[1]:arguments,a=t instanceof ve,c=o[0],l=a||v(t),u=function(e){var t=i.apply(De,pr([e],o));return r&&h?t[0]:t};l&&n&&"function"==typeof c&&1!=c.length&&(a=l=!1);var h=this.__chain__,d=!!this.__actions__.length,p=s&&!h,f=a&&!d;if(!s&&l){t=f?t:new ve(this);var m=e.apply(t,o);return m.__actions__.push({func:Sf,args:[u],thisArg:void 0}),new Ce(m,h)}return p&&f?e.apply(this,o):(m=this.thru(u),p?r?m.value()[0]:m.value():m)})})),Xe(["pop","push","shift","sort","splice","unshift"],(function(e){var t=ig[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);De.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(v(i)?i:[],e)}return this[n]((function(n){return t.apply(v(n)?n:[],e)}))}})),sa(ve.prototype,(function(e,t){var n=De[t];if(n){var r=n.name+"";sg.call(Ee,r)||(Ee[r]=[]),Ee[r].push({name:t,func:n})}})),Ee[ht(void 0,2).name]=[{name:"wrapper",func:void 0}],ve.prototype.clone=Xm,ve.prototype.reverse=Km,ve.prototype.value=eg,De.prototype.at=Hm.at,De.prototype.chain=Hm.wrapperChain,De.prototype.commit=Hm.commit,De.prototype.next=Hm.next,De.prototype.plant=Hm.plant,De.prototype.reverse=Hm.reverse,De.prototype.toJSON=De.prototype.valueOf=De.prototype.value=Hm.value,De.prototype.first=De.prototype.head,og&&(De.prototype[og]=Hm.toIterator);const ug=De},9437:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ACESFilmicToneMapping:()=>ie,AddEquation:()=>w,AddOperation:()=>Z,AdditiveAnimationBlendMode:()=>Gt,AdditiveBlending:()=>_,AgXToneMapping:()=>oe,AlphaFormat:()=>Ge,AlwaysCompare:()=>Cn,AlwaysDepth:()=>Q,AlwaysStencilFunc:()=>vn,AmbientLight:()=>Ap,AnimationAction:()=>af,AnimationClip:()=>Gd,AnimationLoader:()=>Yd,AnimationMixer:()=>lf,AnimationObjectGroup:()=>of,AnimationUtils:()=>Cd,ArcCurve:()=>Wu,ArrayCamera:()=>Hc,ArrowHelper:()=>tm,AttachedBindMode:()=>ce,Audio:()=>Qp,AudioAnalyser:()=>Yp,AudioContext:()=>Bp,AudioListener:()=>Vp,AudioLoader:()=>Pp,AxesHelper:()=>nm,BackSide:()=>m,BasicDepthPacking:()=>Ht,BasicShadowMap:()=>u,BatchedMesh:()=>gu,Bone:()=>Fl,BooleanKeyframeTrack:()=>Od,Box2:()=>xf,Box3:()=>Lr,Box3Helper:()=>Yf,BoxGeometry:()=>Ws,BoxHelper:()=>Kf,BufferAttribute:()=>ls,BufferGeometry:()=>Ss,BufferGeometryLoader:()=>Ep,ByteType:()=>Re,Cache:()=>Vd,Camera:()=>$s,CameraHelper:()=>Wf,CanvasTexture:()=>Vu,CapsuleGeometry:()=>ph,CatmullRomCurve3:()=>$u,CineonToneMapping:()=>re,CircleGeometry:()=>fh,ClampToEdgeWrapping:()=>Ae,Clock:()=>Fp,Color:()=>Ji,ColorKeyframeTrack:()=>Ld,ColorManagement:()=>fr,CompressedArrayTexture:()=>Gu,CompressedCubeTexture:()=>ju,CompressedTexture:()=>zu,CompressedTextureLoader:()=>Jd,ConeGeometry:()=>gh,ConstantAlphaFactor:()=>G,ConstantColorFactor:()=>k,CubeCamera:()=>io,CubeReflectionMapping:()=>he,CubeRefractionMapping:()=>de,CubeTexture:()=>so,CubeTextureLoader:()=>Zd,CubeUVReflectionMapping:()=>me,CubicBezierCurve:()=>nh,CubicBezierCurve3:()=>rh,CubicInterpolant:()=>Rd,CullFaceBack:()=>a,CullFaceFront:()=>c,CullFaceFrontBack:()=>l,CullFaceNone:()=>o,Curve:()=>Qu,CurvePath:()=>uh,CustomBlending:()=>x,CustomToneMapping:()=>se,CylinderGeometry:()=>mh,Cylindrical:()=>vf,Data3DTexture:()=>Ir,DataArrayTexture:()=>Mr,DataTexture:()=>Ul,DataTextureLoader:()=>ep,DataUtils:()=>os,DecrementStencilOp:()=>ln,DecrementWrapStencilOp:()=>hn,DefaultLoadingManager:()=>Hd,DepthFormat:()=>We,DepthStencilFormat:()=>qe,DepthTexture:()=>ta,DetachedBindMode:()=>le,DirectionalLight:()=>gp,DirectionalLightHelper:()=>Vf,DiscreteInterpolant:()=>Pd,DisplayP3ColorSpace:()=>$t,DodecahedronGeometry:()=>yh,DoubleSide:()=>g,DstAlphaFactor:()=>O,DstColorFactor:()=>N,DynamicCopyUsage:()=>Nn,DynamicDrawUsage:()=>Rn,DynamicReadUsage:()=>Dn,EdgesGeometry:()=>wh,EllipseCurve:()=>Hu,EqualCompare:()=>wn,EqualDepth:()=>q,EqualStencilFunc:()=>mn,EquirectangularReflectionMapping:()=>pe,EquirectangularRefractionMapping:()=>fe,Euler:()=>yi,EventDispatcher:()=>jn,ExtrudeGeometry:()=>Zh,FileLoader:()=>Kd,Float16BufferAttribute:()=>As,Float32BufferAttribute:()=>ys,FloatType:()=>Le,Fog:()=>rl,FogExp2:()=>nl,FramebufferTexture:()=>ku,FrontSide:()=>f,Frustum:()=>fo,GLBufferAttribute:()=>ff,GLSL1:()=>Un,GLSL3:()=>kn,GreaterCompare:()=>Tn,GreaterDepth:()=>K,GreaterEqualCompare:()=>Mn,GreaterEqualDepth:()=>X,GreaterEqualStencilFunc:()=>_n,GreaterStencilFunc:()=>An,GridHelper:()=>Uf,Group:()=>Wc,HalfFloatType:()=>Ne,HemisphereLight:()=>rp,HemisphereLightHelper:()=>Ff,IcosahedronGeometry:()=>td,ImageBitmapLoader:()=>Ip,ImageLoader:()=>$d,ImageUtils:()=>yr,IncrementStencilOp:()=>cn,IncrementWrapStencilOp:()=>un,InstancedBufferAttribute:()=>jl,InstancedBufferGeometry:()=>wp,InstancedInterleavedBuffer:()=>pf,InstancedMesh:()=>Yl,Int16BufferAttribute:()=>ps,Int32BufferAttribute:()=>ms,Int8BufferAttribute:()=>us,IntType:()=>De,InterleavedBuffer:()=>sl,InterleavedBufferAttribute:()=>al,Interpolant:()=>Id,InterpolateDiscrete:()=>Ot,InterpolateLinear:()=>Lt,InterpolateSmooth:()=>Nt,InvertStencilOp:()=>dn,KeepStencilOp:()=>on,KeyframeTrack:()=>Dd,LOD:()=>Sl,LatheGeometry:()=>dh,Layers:()=>_i,LessCompare:()=>xn,LessDepth:()=>H,LessEqualCompare:()=>En,LessEqualDepth:()=>W,LessEqualStencilFunc:()=>gn,LessStencilFunc:()=>fn,Light:()=>np,LightProbe:()=>vp,Line:()=>Tu,Line3:()=>Tf,LineBasicMaterial:()=>Au,LineCurve:()=>ih,LineCurve3:()=>sh,LineDashedMaterial:()=>xd,LineLoop:()=>Ru,LineSegments:()=>Iu,LinearDisplayP3ColorSpace:()=>Zt,LinearFilter:()=>Ee,LinearInterpolant:()=>Bd,LinearMipMapLinearFilter:()=>Ce,LinearMipMapNearestFilter:()=>Se,LinearMipmapLinearFilter:()=>Me,LinearMipmapNearestFilter:()=>Te,LinearSRGBColorSpace:()=>Jt,LinearToneMapping:()=>te,LinearTransfer:()=>en,Loader:()=>Wd,LoaderUtils:()=>xp,LoadingManager:()=>Qd,LoopOnce:()=>Bt,LoopPingPong:()=>Dt,LoopRepeat:()=>Pt,LuminanceAlphaFormat:()=>He,LuminanceFormat:()=>Qe,MOUSE:()=>i,Material:()=>es,MaterialLoader:()=>bp,MathUtils:()=>Zn,Matrix3:()=>tr,Matrix4:()=>ci,MaxEquation:()=>M,Mesh:()=>Qs,MeshBasicMaterial:()=>ts,MeshDepthMaterial:()=>kc,MeshDistanceMaterial:()=>zc,MeshLambertMaterial:()=>vd,MeshMatcapMaterial:()=>bd,MeshNormalMaterial:()=>_d,MeshPhongMaterial:()=>Ad,MeshPhysicalMaterial:()=>gd,MeshStandardMaterial:()=>md,MeshToonMaterial:()=>yd,MinEquation:()=>S,MirroredRepeatWrapping:()=>ye,MixOperation:()=>$,MultiplyBlending:()=>b,MultiplyOperation:()=>J,NearestFilter:()=>_e,NearestMipMapLinearFilter:()=>we,NearestMipMapNearestFilter:()=>be,NearestMipmapLinearFilter:()=>xe,NearestMipmapNearestFilter:()=>ve,NeutralToneMapping:()=>ae,NeverCompare:()=>bn,NeverDepth:()=>V,NeverStencilFunc:()=>pn,NoBlending:()=>A,NoColorSpace:()=>Kt,NoToneMapping:()=>ee,NormalAnimationBlendMode:()=>zt,NormalBlending:()=>y,NotEqualCompare:()=>Sn,NotEqualDepth:()=>Y,NotEqualStencilFunc:()=>yn,NumberKeyframeTrack:()=>Nd,Object3D:()=>Li,ObjectLoader:()=>Tp,ObjectSpaceNormalMap:()=>Xt,OctahedronGeometry:()=>nd,OneFactor:()=>I,OneMinusConstantAlphaFactor:()=>j,OneMinusConstantColorFactor:()=>z,OneMinusDstAlphaFactor:()=>L,OneMinusDstColorFactor:()=>F,OneMinusSrcAlphaFactor:()=>D,OneMinusSrcColorFactor:()=>B,OrthographicCamera:()=>Ro,P3Primaries:()=>rn,PCFShadowMap:()=>h,PCFSoftShadowMap:()=>d,PMREMGenerator:()=>jo,Path:()=>hh,PerspectiveCamera:()=>no,Plane:()=>uo,PlaneGeometry:()=>Ao,PlaneHelper:()=>Jf,PointLight:()=>fp,PointLightHelper:()=>Df,Points:()=>Nu,PointsMaterial:()=>Bu,PolarGridHelper:()=>kf,PolyhedronGeometry:()=>Ah,PositionalAudio:()=>Kp,PropertyBinding:()=>sf,PropertyMixer:()=>Jp,QuadraticBezierCurve:()=>oh,QuadraticBezierCurve3:()=>ah,Quaternion:()=>Br,QuaternionKeyframeTrack:()=>Ud,QuaternionLinearInterpolant:()=>Fd,RED_GREEN_RGTC2_Format:()=>It,RED_RGTC1_Format:()=>Mt,REVISION:()=>r,RGBADepthPacking:()=>Wt,RGBAFormat:()=>Ve,RGBAIntegerFormat:()=>$e,RGBA_ASTC_10x10_Format:()=>bt,RGBA_ASTC_10x5_Format:()=>yt,RGBA_ASTC_10x6_Format:()=>_t,RGBA_ASTC_10x8_Format:()=>vt,RGBA_ASTC_12x10_Format:()=>xt,RGBA_ASTC_12x12_Format:()=>wt,RGBA_ASTC_4x4_Format:()=>ut,RGBA_ASTC_5x4_Format:()=>ht,RGBA_ASTC_5x5_Format:()=>dt,RGBA_ASTC_6x5_Format:()=>pt,RGBA_ASTC_6x6_Format:()=>ft,RGBA_ASTC_8x5_Format:()=>mt,RGBA_ASTC_8x6_Format:()=>gt,RGBA_ASTC_8x8_Format:()=>At,RGBA_BPTC_Format:()=>Et,RGBA_ETC2_EAC_Format:()=>lt,RGBA_PVRTC_2BPPV1_Format:()=>ot,RGBA_PVRTC_4BPPV1_Format:()=>st,RGBA_S3TC_DXT1_Format:()=>et,RGBA_S3TC_DXT3_Format:()=>tt,RGBA_S3TC_DXT5_Format:()=>nt,RGBFormat:()=>je,RGB_BPTC_SIGNED_Format:()=>Tt,RGB_BPTC_UNSIGNED_Format:()=>St,RGB_ETC1_Format:()=>at,RGB_ETC2_Format:()=>ct,RGB_PVRTC_2BPPV1_Format:()=>it,RGB_PVRTC_4BPPV1_Format:()=>rt,RGB_S3TC_DXT1_Format:()=>Ze,RGFormat:()=>Ye,RGIntegerFormat:()=>Je,RawShaderMaterial:()=>fd,Ray:()=>ai,Raycaster:()=>gf,Rec709Primaries:()=>nn,RectAreaLight:()=>yp,RedFormat:()=>Xe,RedIntegerFormat:()=>Ke,ReinhardToneMapping:()=>ne,RenderTarget:()=>Tr,RepeatWrapping:()=>ge,ReplaceStencilOp:()=>an,ReverseSubtractEquation:()=>T,RingGeometry:()=>rd,SIGNED_RED_GREEN_RGTC2_Format:()=>Rt,SIGNED_RED_RGTC1_Format:()=>Ct,SRGBColorSpace:()=>Yt,SRGBTransfer:()=>tn,Scene:()=>il,ShaderChunk:()=>yo,ShaderLib:()=>vo,ShaderMaterial:()=>Js,ShadowMaterial:()=>pd,Shape:()=>Eh,ShapeGeometry:()=>id,ShapePath:()=>rm,ShapeUtils:()=>Yh,ShortType:()=>Be,Skeleton:()=>Gl,SkeletonHelper:()=>Bf,SkinnedMesh:()=>Nl,Source:()=>vr,Sphere:()=>Zr,SphereGeometry:()=>sd,Spherical:()=>_f,SphericalHarmonics3:()=>_p,SplineCurve:()=>ch,SpotLight:()=>lp,SpotLightHelper:()=>Mf,Sprite:()=>xl,SpriteMaterial:()=>cl,SrcAlphaFactor:()=>P,SrcAlphaSaturateFactor:()=>U,SrcColorFactor:()=>R,StaticCopyUsage:()=>Ln,StaticDrawUsage:()=>In,StaticReadUsage:()=>Pn,StereoCamera:()=>Np,StreamCopyUsage:()=>Fn,StreamDrawUsage:()=>Bn,StreamReadUsage:()=>On,StringKeyframeTrack:()=>kd,SubtractEquation:()=>E,SubtractiveBlending:()=>v,TOUCH:()=>s,TangentSpaceNormalMap:()=>qt,TetrahedronGeometry:()=>od,Texture:()=>wr,TextureLoader:()=>tp,TorusGeometry:()=>ad,TorusKnotGeometry:()=>cd,Triangle:()=>Wi,TriangleFanDrawMode:()=>Qt,TriangleStripDrawMode:()=>Vt,TrianglesDrawMode:()=>jt,TubeGeometry:()=>ld,UVMapping:()=>ue,Uint16BufferAttribute:()=>fs,Uint32BufferAttribute:()=>gs,Uint8BufferAttribute:()=>hs,Uint8ClampedBufferAttribute:()=>ds,Uniform:()=>uf,UniformsGroup:()=>df,UniformsLib:()=>_o,UniformsUtils:()=>Ys,UnsignedByteType:()=>Ie,UnsignedInt248Type:()=>ke,UnsignedInt5999Type:()=>ze,UnsignedIntType:()=>Oe,UnsignedShort4444Type:()=>Fe,UnsignedShort5551Type:()=>Ue,UnsignedShortType:()=>Pe,VSMShadowMap:()=>p,Vector2:()=>er,Vector3:()=>Pr,Vector4:()=>Er,VectorKeyframeTrack:()=>zd,VideoTexture:()=>Uu,WebGL3DRenderTarget:()=>Rr,WebGLArrayRenderTarget:()=>Cr,WebGLCoordinateSystem:()=>zn,WebGLCubeRenderTarget:()=>oo,WebGLMultipleRenderTargets:()=>im,WebGLRenderTarget:()=>Sr,WebGLRenderer:()=>tl,WebGLUtils:()=>Qc,WebGPUCoordinateSystem:()=>Gn,WireframeGeometry:()=>ud,WrapAroundEnding:()=>kt,ZeroCurvatureEnding:()=>Ft,ZeroFactor:()=>C,ZeroSlopeEnding:()=>Ut,ZeroStencilOp:()=>sn,createCanvasElement:()=>ar});const r="165",i={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},s={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},o=0,a=1,c=2,l=3,u=0,h=1,d=2,p=3,f=0,m=1,g=2,A=0,y=1,_=2,v=3,b=4,x=5,w=100,E=101,T=102,S=103,M=104,C=200,I=201,R=202,B=203,P=204,D=205,O=206,L=207,N=208,F=209,U=210,k=211,z=212,G=213,j=214,V=0,Q=1,H=2,W=3,q=4,X=5,K=6,Y=7,J=0,$=1,Z=2,ee=0,te=1,ne=2,re=3,ie=4,se=5,oe=6,ae=7,ce="attached",le="detached",ue=300,he=301,de=302,pe=303,fe=304,me=306,ge=1e3,Ae=1001,ye=1002,_e=1003,ve=1004,be=1004,xe=1005,we=1005,Ee=1006,Te=1007,Se=1007,Me=1008,Ce=1008,Ie=1009,Re=1010,Be=1011,Pe=1012,De=1013,Oe=1014,Le=1015,Ne=1016,Fe=1017,Ue=1018,ke=1020,ze=35902,Ge=1021,je=1022,Ve=1023,Qe=1024,He=1025,We=1026,qe=1027,Xe=1028,Ke=1029,Ye=1030,Je=1031,$e=1033,Ze=33776,et=33777,tt=33778,nt=33779,rt=35840,it=35841,st=35842,ot=35843,at=36196,ct=37492,lt=37496,ut=37808,ht=37809,dt=37810,pt=37811,ft=37812,mt=37813,gt=37814,At=37815,yt=37816,_t=37817,vt=37818,bt=37819,xt=37820,wt=37821,Et=36492,Tt=36494,St=36495,Mt=36283,Ct=36284,It=36285,Rt=36286,Bt=2200,Pt=2201,Dt=2202,Ot=2300,Lt=2301,Nt=2302,Ft=2400,Ut=2401,kt=2402,zt=2500,Gt=2501,jt=0,Vt=1,Qt=2,Ht=3200,Wt=3201,qt=0,Xt=1,Kt="",Yt="srgb",Jt="srgb-linear",$t="display-p3",Zt="display-p3-linear",en="linear",tn="srgb",nn="rec709",rn="p3",sn=0,on=7680,an=7681,cn=7682,ln=7683,un=34055,hn=34056,dn=5386,pn=512,fn=513,mn=514,gn=515,An=516,yn=517,_n=518,vn=519,bn=512,xn=513,wn=514,En=515,Tn=516,Sn=517,Mn=518,Cn=519,In=35044,Rn=35048,Bn=35040,Pn=35045,Dn=35049,On=35041,Ln=35046,Nn=35050,Fn=35042,Un="100",kn="300 es",zn=2e3,Gn=2001;class jn{addEventListener(e,t){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(t)&&n[e].push(t)}hasEventListener(e,t){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(t)}removeEventListener(e,t){if(void 0===this._listeners)return;const n=this._listeners[e];if(void 0!==n){const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}dispatchEvent(e){if(void 0===this._listeners)return;const t=this._listeners[e.type];if(void 0!==t){e.target=this;const n=t.slice(0);for(let t=0,r=n.length;t<r;t++)n[t].call(this,e);e.target=null}}}const Vn=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Qn=1234567;const Hn=Math.PI/180,Wn=180/Math.PI;function qn(){const e=4294967295*Math.random()|0,t=4294967295*Math.random()|0,n=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(Vn[255&e]+Vn[e>>8&255]+Vn[e>>16&255]+Vn[e>>24&255]+"-"+Vn[255&t]+Vn[t>>8&255]+"-"+Vn[t>>16&15|64]+Vn[t>>24&255]+"-"+Vn[63&n|128]+Vn[n>>8&255]+"-"+Vn[n>>16&255]+Vn[n>>24&255]+Vn[255&r]+Vn[r>>8&255]+Vn[r>>16&255]+Vn[r>>24&255]).toLowerCase()}function Xn(e,t,n){return Math.max(t,Math.min(n,e))}function Kn(e,t){return(e%t+t)%t}function Yn(e,t,n){return(1-n)*e+n*t}function Jn(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return e/4294967295;case Uint16Array:return e/65535;case Uint8Array:return e/255;case Int32Array:return Math.max(e/2147483647,-1);case Int16Array:return Math.max(e/32767,-1);case Int8Array:return Math.max(e/127,-1);default:throw new Error("Invalid component type.")}}function $n(e,t){switch(t.constructor){case Float32Array:return e;case Uint32Array:return Math.round(4294967295*e);case Uint16Array:return Math.round(65535*e);case Uint8Array:return Math.round(255*e);case Int32Array:return Math.round(2147483647*e);case Int16Array:return Math.round(32767*e);case Int8Array:return Math.round(127*e);default:throw new Error("Invalid component type.")}}const Zn={DEG2RAD:Hn,RAD2DEG:Wn,generateUUID:qn,clamp:Xn,euclideanModulo:Kn,mapLinear:function(e,t,n,r,i){return r+(e-t)*(i-r)/(n-t)},inverseLerp:function(e,t,n){return e!==t?(n-e)/(t-e):0},lerp:Yn,damp:function(e,t,n,r){return Yn(e,t,1-Math.exp(-n*r))},pingpong:function(e,t=1){return t-Math.abs(Kn(e,2*t)-t)},smoothstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*(3-2*e)},smootherstep:function(e,t,n){return e<=t?0:e>=n?1:(e=(e-t)/(n-t))*e*e*(e*(6*e-15)+10)},randInt:function(e,t){return e+Math.floor(Math.random()*(t-e+1))},randFloat:function(e,t){return e+Math.random()*(t-e)},randFloatSpread:function(e){return e*(.5-Math.random())},seededRandom:function(e){void 0!==e&&(Qn=e);let t=Qn+=1831565813;return t=Math.imul(t^t>>>15,1|t),t^=t+Math.imul(t^t>>>7,61|t),((t^t>>>14)>>>0)/4294967296},degToRad:function(e){return e*Hn},radToDeg:function(e){return e*Wn},isPowerOfTwo:function(e){return!(e&e-1)&&0!==e},ceilPowerOfTwo:function(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.LN2))},floorPowerOfTwo:function(e){return Math.pow(2,Math.floor(Math.log(e)/Math.LN2))},setQuaternionFromProperEuler:function(e,t,n,r,i){const s=Math.cos,o=Math.sin,a=s(n/2),c=o(n/2),l=s((t+r)/2),u=o((t+r)/2),h=s((t-r)/2),d=o((t-r)/2),p=s((r-t)/2),f=o((r-t)/2);switch(i){case"XYX":e.set(a*u,c*h,c*d,a*l);break;case"YZY":e.set(c*d,a*u,c*h,a*l);break;case"ZXZ":e.set(c*h,c*d,a*u,a*l);break;case"XZX":e.set(a*u,c*f,c*p,a*l);break;case"YXY":e.set(c*p,a*u,c*f,a*l);break;case"ZYZ":e.set(c*f,c*p,a*u,a*l);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+i)}},normalize:$n,denormalize:Jn};class er{constructor(e=0,t=0){er.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Xn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),i=this.x-e.x,s=this.y-e.y;return this.x=i*n-s*r+e.x,this.y=i*r+s*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class tr{constructor(e,t,n,r,i,s,o,a,c){tr.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,s,o,a,c)}set(e,t,n,r,i,s,o,a,c){const l=this.elements;return l[0]=e,l[1]=r,l[2]=o,l[3]=t,l[4]=i,l[5]=a,l[6]=n,l[7]=s,l[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[3],a=n[6],c=n[1],l=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=r[0],m=r[3],g=r[6],A=r[1],y=r[4],_=r[7],v=r[2],b=r[5],x=r[8];return i[0]=s*f+o*A+a*v,i[3]=s*m+o*y+a*b,i[6]=s*g+o*_+a*x,i[1]=c*f+l*A+u*v,i[4]=c*m+l*y+u*b,i[7]=c*g+l*_+u*x,i[2]=h*f+d*A+p*v,i[5]=h*m+d*y+p*b,i[8]=h*g+d*_+p*x,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],c=e[7],l=e[8];return t*s*l-t*o*c-n*i*l+n*o*a+r*i*c-r*s*a}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=l*s-o*c,h=o*a-l*i,d=c*i-s*a,p=t*u+n*h+r*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return e[0]=u*f,e[1]=(r*c-l*n)*f,e[2]=(o*n-r*s)*f,e[3]=h*f,e[4]=(l*t-r*a)*f,e[5]=(r*i-o*t)*f,e[6]=d*f,e[7]=(n*a-c*t)*f,e[8]=(s*t-n*i)*f,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,i,s,o){const a=Math.cos(i),c=Math.sin(i);return this.set(n*a,n*c,-n*(a*s+c*o)+s+e,-r*c,r*a,-r*(-c*s+a*o)+o+t,0,0,1),this}scale(e,t){return this.premultiply(nr.makeScale(e,t)),this}rotate(e){return this.premultiply(nr.makeRotation(-e)),this}translate(e,t){return this.premultiply(nr.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<9;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return(new this.constructor).fromArray(this.elements)}}const nr=new tr;function rr(e){for(let t=e.length-1;t>=0;--t)if(e[t]>=65535)return!0;return!1}const ir={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function sr(e,t){return new ir[e](t)}function or(e){return document.createElementNS("http://www.w3.org/1999/xhtml",e)}function ar(){const e=or("canvas");return e.style.display="block",e}const cr={};function lr(e){e in cr||(cr[e]=!0,console.warn(e))}const ur=(new tr).set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),hr=(new tr).set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),dr={[Jt]:{transfer:en,primaries:nn,toReference:e=>e,fromReference:e=>e},[Yt]:{transfer:tn,primaries:nn,toReference:e=>e.convertSRGBToLinear(),fromReference:e=>e.convertLinearToSRGB()},[Zt]:{transfer:en,primaries:rn,toReference:e=>e.applyMatrix3(hr),fromReference:e=>e.applyMatrix3(ur)},[$t]:{transfer:tn,primaries:rn,toReference:e=>e.convertSRGBToLinear().applyMatrix3(hr),fromReference:e=>e.applyMatrix3(ur).convertLinearToSRGB()}},pr=new Set([Jt,Zt]),fr={enabled:!0,_workingColorSpace:Jt,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(e){if(!pr.has(e))throw new Error(`Unsupported working color space, "${e}".`);this._workingColorSpace=e},convert:function(e,t,n){if(!1===this.enabled||t===n||!t||!n)return e;const r=dr[t].toReference;return(0,dr[n].fromReference)(r(e))},fromWorkingColorSpace:function(e,t){return this.convert(e,this._workingColorSpace,t)},toWorkingColorSpace:function(e,t){return this.convert(e,t,this._workingColorSpace)},getPrimaries:function(e){return dr[e].primaries},getTransfer:function(e){return e===Kt?en:dr[e].transfer}};function mr(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}function gr(e){return e<.0031308?12.92*e:1.055*Math.pow(e,.41666)-.055}let Ar;class yr{static getDataURL(e){if(/^data:/i.test(e.src))return e.src;if("undefined"==typeof HTMLCanvasElement)return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{void 0===Ar&&(Ar=or("canvas")),Ar.width=e.width,Ar.height=e.height;const n=Ar.getContext("2d");e instanceof ImageData?n.putImageData(e,0,0):n.drawImage(e,0,0,e.width,e.height),t=Ar}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap){const t=or("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),i=r.data;for(let e=0;e<i.length;e++)i[e]=255*mr(i[e]/255);return n.putImageData(r,0,0),t}if(e.data){const t=e.data.slice(0);for(let e=0;e<t.length;e++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[e]=Math.floor(255*mr(t[e]/255)):t[e]=mr(t[e]);return{data:t,width:e.width,height:e.height}}return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let _r=0;class vr{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:_r++}),this.uuid=qn(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){!0===e&&this.version++}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.images[this.uuid])return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(null!==r){let e;if(Array.isArray(r)){e=[];for(let t=0,n=r.length;t<n;t++)r[t].isDataTexture?e.push(br(r[t].image)):e.push(br(r[t]))}else e=br(r);n.url=e}return t||(e.images[this.uuid]=n),n}}function br(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap?yr.getDataURL(e):e.data?{data:Array.from(e.data),width:e.width,height:e.height,type:e.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let xr=0;class wr extends jn{constructor(e=wr.DEFAULT_IMAGE,t=wr.DEFAULT_MAPPING,n=Ae,r=Ae,i=Ee,s=Me,o=Ve,a=Ie,c=wr.DEFAULT_ANISOTROPY,l=Kt){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xr++}),this.uuid=qn(),this.name="",this.source=new vr(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=i,this.minFilter=s,this.anisotropy=c,this.format=o,this.internalFormat=null,this.type=a,this.offset=new er(0,0),this.repeat=new er(1,1),this.center=new er(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new tr,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=l,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=void 0===e||"string"==typeof e;if(!t&&void 0!==e.textures[this.uuid])return e.textures[this.uuid];const n={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ue)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ge:e.x=e.x-Math.floor(e.x);break;case Ae:e.x=e.x<0?0:1;break;case ye:1===Math.abs(Math.floor(e.x)%2)?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x)}if(e.y<0||e.y>1)switch(this.wrapT){case ge:e.y=e.y-Math.floor(e.y);break;case Ae:e.y=e.y<0?0:1;break;case ye:1===Math.abs(Math.floor(e.y)%2)?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y)}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){!0===e&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){!0===e&&this.pmremVersion++}}wr.DEFAULT_IMAGE=null,wr.DEFAULT_MAPPING=ue,wr.DEFAULT_ANISOTROPY=1;class Er{constructor(e=0,t=0,n=0,r=1){Er.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=void 0!==e.w?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=this.w,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r+s[12]*i,this.y=s[1]*t+s[5]*n+s[9]*r+s[13]*i,this.z=s[2]*t+s[6]*n+s[10]*r+s[14]*i,this.w=s[3]*t+s[7]*n+s[11]*r+s[15]*i,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,i;const s=.01,o=.1,a=e.elements,c=a[0],l=a[4],u=a[8],h=a[1],d=a[5],p=a[9],f=a[2],m=a[6],g=a[10];if(Math.abs(l-h)<s&&Math.abs(u-f)<s&&Math.abs(p-m)<s){if(Math.abs(l+h)<o&&Math.abs(u+f)<o&&Math.abs(p+m)<o&&Math.abs(c+d+g-3)<o)return this.set(1,0,0,0),this;t=Math.PI;const e=(c+1)/2,a=(d+1)/2,A=(g+1)/2,y=(l+h)/4,_=(u+f)/4,v=(p+m)/4;return e>a&&e>A?e<s?(n=0,r=.707106781,i=.707106781):(n=Math.sqrt(e),r=y/n,i=_/n):a>A?a<s?(n=.707106781,r=0,i=.707106781):(r=Math.sqrt(a),n=y/r,i=v/r):A<s?(n=.707106781,r=.707106781,i=0):(i=Math.sqrt(A),n=_/i,r=v/i),this.set(n,r,i,t),this}let A=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-l)*(h-l));return Math.abs(A)<.001&&(A=1),this.x=(m-p)/A,this.y=(u-f)/A,this.z=(h-l)/A,this.w=Math.acos((c+d+g-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Tr extends jn{constructor(e=1,t=1,n={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Er(0,0,e,t),this.scissorTest=!1,this.viewport=new Er(0,0,e,t);const r={width:e,height:t,depth:1};n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Ee,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},n);const i=new wr(r,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.colorSpace);i.flipY=!1,i.generateMipmaps=n.generateMipmaps,i.internalFormat=n.internalFormat,this.textures=[];const s=n.count;for(let e=0;e<s;e++)this.textures[e]=i.clone(),this.textures[e].isRenderTargetTexture=!0;this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this.depthTexture=n.depthTexture,this.samples=n.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,i=this.textures.length;r<i;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return(new this.constructor).copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++)this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new vr(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,null!==e.depthTexture&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Sr extends Tr{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class Mr extends wr{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=_e,this.minFilter=_e,this.wrapR=Ae,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Cr extends Sr{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new Mr(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Ir extends wr{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=_e,this.minFilter=_e,this.wrapR=Ae,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Rr extends Sr{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new Ir(null,e,t,n),this.texture.isRenderTargetTexture=!0}}class Br{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,i,s,o){let a=n[r+0],c=n[r+1],l=n[r+2],u=n[r+3];const h=i[s+0],d=i[s+1],p=i[s+2],f=i[s+3];if(0===o)return e[t+0]=a,e[t+1]=c,e[t+2]=l,void(e[t+3]=u);if(1===o)return e[t+0]=h,e[t+1]=d,e[t+2]=p,void(e[t+3]=f);if(u!==f||a!==h||c!==d||l!==p){let e=1-o;const t=a*h+c*d+l*p+u*f,n=t>=0?1:-1,r=1-t*t;if(r>Number.EPSILON){const i=Math.sqrt(r),s=Math.atan2(i,t*n);e=Math.sin(e*s)/i,o=Math.sin(o*s)/i}const i=o*n;if(a=a*e+h*i,c=c*e+d*i,l=l*e+p*i,u=u*e+f*i,e===1-o){const e=1/Math.sqrt(a*a+c*c+l*l+u*u);a*=e,c*=e,l*=e,u*=e}}e[t]=a,e[t+1]=c,e[t+2]=l,e[t+3]=u}static multiplyQuaternionsFlat(e,t,n,r,i,s){const o=n[r],a=n[r+1],c=n[r+2],l=n[r+3],u=i[s],h=i[s+1],d=i[s+2],p=i[s+3];return e[t]=o*p+l*u+a*d-c*h,e[t+1]=a*p+l*h+c*u-o*d,e[t+2]=c*p+l*d+o*h-a*u,e[t+3]=l*p-o*u-a*h-c*d,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,i=e._z,s=e._order,o=Math.cos,a=Math.sin,c=o(n/2),l=o(r/2),u=o(i/2),h=a(n/2),d=a(r/2),p=a(i/2);switch(s){case"XYZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"YXZ":this._x=h*l*u+c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"ZXY":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u-h*d*p;break;case"ZYX":this._x=h*l*u-c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u+h*d*p;break;case"YZX":this._x=h*l*u+c*d*p,this._y=c*d*u+h*l*p,this._z=c*l*p-h*d*u,this._w=c*l*u-h*d*p;break;case"XZY":this._x=h*l*u-c*d*p,this._y=c*d*u-h*l*p,this._z=c*l*p+h*d*u,this._w=c*l*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+s)}return!0===t&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],i=t[8],s=t[1],o=t[5],a=t[9],c=t[2],l=t[6],u=t[10],h=n+o+u;if(h>0){const e=.5/Math.sqrt(h+1);this._w=.25/e,this._x=(l-a)*e,this._y=(i-c)*e,this._z=(s-r)*e}else if(n>o&&n>u){const e=2*Math.sqrt(1+n-o-u);this._w=(l-a)/e,this._x=.25*e,this._y=(r+s)/e,this._z=(i+c)/e}else if(o>u){const e=2*Math.sqrt(1+o-n-u);this._w=(i-c)/e,this._x=(r+s)/e,this._y=.25*e,this._z=(a+l)/e}else{const e=2*Math.sqrt(1+u-n-o);this._w=(s-r)/e,this._x=(i+c)/e,this._y=(a+l)/e,this._z=.25*e}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<Number.EPSILON?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Xn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(0===n)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return 0===e?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,i=e._z,s=e._w,o=t._x,a=t._y,c=t._z,l=t._w;return this._x=n*l+s*o+r*c-i*a,this._y=r*l+s*a+i*o-n*c,this._z=i*l+s*c+n*a-r*o,this._w=s*l-n*o-r*a-i*c,this._onChangeCallback(),this}slerp(e,t){if(0===t)return this;if(1===t)return this.copy(e);const n=this._x,r=this._y,i=this._z,s=this._w;let o=s*e._w+n*e._x+r*e._y+i*e._z;if(o<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,o=-o):this.copy(e),o>=1)return this._w=s,this._x=n,this._y=r,this._z=i,this;const a=1-o*o;if(a<=Number.EPSILON){const e=1-t;return this._w=e*s+t*this._w,this._x=e*n+t*this._x,this._y=e*r+t*this._y,this._z=e*i+t*this._z,this.normalize(),this}const c=Math.sqrt(a),l=Math.atan2(c,o),u=Math.sin((1-t)*l)/c,h=Math.sin(t*l)/c;return this._w=s*u+this._w*h,this._x=n*u+this._x*h,this._y=r*u+this._y*h,this._z=i*u+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),i=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),i*Math.sin(t),i*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Pr{constructor(e=0,t=0,n=0){Pr.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return void 0===n&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Or.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Or.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[3]*n+i[6]*r,this.y=i[1]*t+i[4]*n+i[7]*r,this.z=i[2]*t+i[5]*n+i[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,i=e.elements,s=1/(i[3]*t+i[7]*n+i[11]*r+i[15]);return this.x=(i[0]*t+i[4]*n+i[8]*r+i[12])*s,this.y=(i[1]*t+i[5]*n+i[9]*r+i[13])*s,this.z=(i[2]*t+i[6]*n+i[10]*r+i[14])*s,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,i=e.x,s=e.y,o=e.z,a=e.w,c=2*(s*r-o*n),l=2*(o*t-i*r),u=2*(i*n-s*t);return this.x=t+a*c+s*u-o*l,this.y=n+a*l+o*c-i*u,this.z=r+a*u+i*l-s*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,i=e.elements;return this.x=i[0]*t+i[4]*n+i[8]*r,this.y=i[1]*t+i[5]*n+i[9]*r,this.z=i[2]*t+i[6]*n+i[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(e,Math.min(t,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,i=e.z,s=t.x,o=t.y,a=t.z;return this.x=r*a-i*o,this.y=i*s-n*a,this.z=n*o-r*s,this}projectOnVector(e){const t=e.lengthSq();if(0===t)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return Dr.copy(this).projectOnVector(e),this.sub(Dr)}reflect(e){return this.sub(Dr.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(0===t)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Xn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,4*t)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,3*t)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=2*Math.random()-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Dr=new Pr,Or=new Br;class Lr{constructor(e=new Pr(1/0,1/0,1/0),t=new Pr(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(Fr.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(Fr.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Fr.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(void 0!==n){const r=n.getAttribute("position");if(!0===t&&void 0!==r&&!0!==e.isInstancedMesh)for(let t=0,n=r.count;t<n;t++)!0===e.isMesh?e.getVertexPosition(t,Fr):Fr.fromBufferAttribute(r,t),Fr.applyMatrix4(e.matrixWorld),this.expandByPoint(Fr);else void 0!==e.boundingBox?(null===e.boundingBox&&e.computeBoundingBox(),Ur.copy(e.boundingBox)):(null===n.boundingBox&&n.computeBoundingBox(),Ur.copy(n.boundingBox)),Ur.applyMatrix4(e.matrixWorld),this.union(Ur)}const r=e.children;for(let e=0,n=r.length;e<n;e++)this.expandByObject(r[e],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Fr),Fr.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Hr),Wr.subVectors(this.max,Hr),kr.subVectors(e.a,Hr),zr.subVectors(e.b,Hr),Gr.subVectors(e.c,Hr),jr.subVectors(zr,kr),Vr.subVectors(Gr,zr),Qr.subVectors(kr,Gr);let t=[0,-jr.z,jr.y,0,-Vr.z,Vr.y,0,-Qr.z,Qr.y,jr.z,0,-jr.x,Vr.z,0,-Vr.x,Qr.z,0,-Qr.x,-jr.y,jr.x,0,-Vr.y,Vr.x,0,-Qr.y,Qr.x,0];return!!Kr(t,kr,zr,Gr,Wr)&&(t=[1,0,0,0,1,0,0,0,1],!!Kr(t,kr,zr,Gr,Wr)&&(qr.crossVectors(jr,Vr),t=[qr.x,qr.y,qr.z],Kr(t,kr,zr,Gr,Wr)))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Fr).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=.5*this.getSize(Fr).length()),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()||(Nr[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Nr[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Nr[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Nr[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Nr[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Nr[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Nr[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Nr[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Nr)),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Nr=[new Pr,new Pr,new Pr,new Pr,new Pr,new Pr,new Pr,new Pr],Fr=new Pr,Ur=new Lr,kr=new Pr,zr=new Pr,Gr=new Pr,jr=new Pr,Vr=new Pr,Qr=new Pr,Hr=new Pr,Wr=new Pr,qr=new Pr,Xr=new Pr;function Kr(e,t,n,r,i){for(let s=0,o=e.length-3;s<=o;s+=3){Xr.fromArray(e,s);const o=i.x*Math.abs(Xr.x)+i.y*Math.abs(Xr.y)+i.z*Math.abs(Xr.z),a=t.dot(Xr),c=n.dot(Xr),l=r.dot(Xr);if(Math.max(-Math.max(a,c,l),Math.min(a,c,l))>o)return!1}return!0}const Yr=new Lr,Jr=new Pr,$r=new Pr;class Zr{constructor(e=new Pr,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;void 0!==t?n.copy(t):Yr.setFromPoints(e).getCenter(n);let r=0;for(let t=0,i=e.length;t<i;t++)r=Math.max(r,n.distanceToSquared(e[t]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Jr.subVectors(e,this.center);const t=Jr.lengthSq();if(t>this.radius*this.radius){const e=Math.sqrt(t),n=.5*(e-this.radius);this.center.addScaledVector(Jr,n/e),this.radius+=n}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(!0===this.center.equals(e.center)?this.radius=Math.max(this.radius,e.radius):($r.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Jr.copy(e.center).add($r)),this.expandByPoint(Jr.copy(e.center).sub($r))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const ei=new Pr,ti=new Pr,ni=new Pr,ri=new Pr,ii=new Pr,si=new Pr,oi=new Pr;class ai{constructor(e=new Pr,t=new Pr(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ei)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ei.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ei.copy(this.origin).addScaledVector(this.direction,t),ei.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){ti.copy(e).add(t).multiplyScalar(.5),ni.copy(t).sub(e).normalize(),ri.copy(this.origin).sub(ti);const i=.5*e.distanceTo(t),s=-this.direction.dot(ni),o=ri.dot(this.direction),a=-ri.dot(ni),c=ri.lengthSq(),l=Math.abs(1-s*s);let u,h,d,p;if(l>0)if(u=s*a-o,h=s*o-a,p=i*l,u>=0)if(h>=-p)if(h<=p){const e=1/l;u*=e,h*=e,d=u*(u+s*h+2*o)+h*(s*u+h+2*a)+c}else h=i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+c;else h=-i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+c;else h<=-p?(u=Math.max(0,-(-s*i+o)),h=u>0?-i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+c):h<=p?(u=0,h=Math.min(Math.max(-i,-a),i),d=h*(h+2*a)+c):(u=Math.max(0,-(s*i+o)),h=u>0?i:Math.min(Math.max(-i,-a),i),d=-u*u+h*(h+2*a)+c);else h=s>0?-i:i,u=Math.max(0,-(s*h+o)),d=-u*u+h*(h+2*a)+c;return n&&n.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(ti).addScaledVector(ni,h),d}intersectSphere(e,t){ei.subVectors(e.center,this.origin);const n=ei.dot(this.direction),r=ei.dot(ei)-n*n,i=e.radius*e.radius;if(r>i)return null;const s=Math.sqrt(i-r),o=n-s,a=n+s;return a<0?null:o<0?this.at(a,t):this.at(o,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(0===t)return 0===e.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return null===n?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);if(0===t)return!0;return e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,i,s,o,a;const c=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,h=this.origin;return c>=0?(n=(e.min.x-h.x)*c,r=(e.max.x-h.x)*c):(n=(e.max.x-h.x)*c,r=(e.min.x-h.x)*c),l>=0?(i=(e.min.y-h.y)*l,s=(e.max.y-h.y)*l):(i=(e.max.y-h.y)*l,s=(e.min.y-h.y)*l),n>s||i>r?null:((i>n||isNaN(n))&&(n=i),(s<r||isNaN(r))&&(r=s),u>=0?(o=(e.min.z-h.z)*u,a=(e.max.z-h.z)*u):(o=(e.max.z-h.z)*u,a=(e.min.z-h.z)*u),n>a||o>r?null:((o>n||n!=n)&&(n=o),(a<r||r!=r)&&(r=a),r<0?null:this.at(n>=0?n:r,t)))}intersectsBox(e){return null!==this.intersectBox(e,ei)}intersectTriangle(e,t,n,r,i){ii.subVectors(t,e),si.subVectors(n,e),oi.crossVectors(ii,si);let s,o=this.direction.dot(oi);if(o>0){if(r)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}ri.subVectors(this.origin,e);const a=s*this.direction.dot(si.crossVectors(ri,si));if(a<0)return null;const c=s*this.direction.dot(ii.cross(ri));if(c<0)return null;if(a+c>o)return null;const l=-s*ri.dot(oi);return l<0?null:this.at(l/o,i)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class ci{constructor(e,t,n,r,i,s,o,a,c,l,u,h,d,p,f,m){ci.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==e&&this.set(e,t,n,r,i,s,o,a,c,l,u,h,d,p,f,m)}set(e,t,n,r,i,s,o,a,c,l,u,h,d,p,f,m){const g=this.elements;return g[0]=e,g[4]=t,g[8]=n,g[12]=r,g[1]=i,g[5]=s,g[9]=o,g[13]=a,g[2]=c,g[6]=l,g[10]=u,g[14]=h,g[3]=d,g[7]=p,g[11]=f,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new ci).fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/li.setFromMatrixColumn(e,0).length(),i=1/li.setFromMatrixColumn(e,1).length(),s=1/li.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*i,t[5]=n[5]*i,t[6]=n[6]*i,t[7]=0,t[8]=n[8]*s,t[9]=n[9]*s,t[10]=n[10]*s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,i=e.z,s=Math.cos(n),o=Math.sin(n),a=Math.cos(r),c=Math.sin(r),l=Math.cos(i),u=Math.sin(i);if("XYZ"===e.order){const e=s*l,n=s*u,r=o*l,i=o*u;t[0]=a*l,t[4]=-a*u,t[8]=c,t[1]=n+r*c,t[5]=e-i*c,t[9]=-o*a,t[2]=i-e*c,t[6]=r+n*c,t[10]=s*a}else if("YXZ"===e.order){const e=a*l,n=a*u,r=c*l,i=c*u;t[0]=e+i*o,t[4]=r*o-n,t[8]=s*c,t[1]=s*u,t[5]=s*l,t[9]=-o,t[2]=n*o-r,t[6]=i+e*o,t[10]=s*a}else if("ZXY"===e.order){const e=a*l,n=a*u,r=c*l,i=c*u;t[0]=e-i*o,t[4]=-s*u,t[8]=r+n*o,t[1]=n+r*o,t[5]=s*l,t[9]=i-e*o,t[2]=-s*c,t[6]=o,t[10]=s*a}else if("ZYX"===e.order){const e=s*l,n=s*u,r=o*l,i=o*u;t[0]=a*l,t[4]=r*c-n,t[8]=e*c+i,t[1]=a*u,t[5]=i*c+e,t[9]=n*c-r,t[2]=-c,t[6]=o*a,t[10]=s*a}else if("YZX"===e.order){const e=s*a,n=s*c,r=o*a,i=o*c;t[0]=a*l,t[4]=i-e*u,t[8]=r*u+n,t[1]=u,t[5]=s*l,t[9]=-o*l,t[2]=-c*l,t[6]=n*u+r,t[10]=e-i*u}else if("XZY"===e.order){const e=s*a,n=s*c,r=o*a,i=o*c;t[0]=a*l,t[4]=-u,t[8]=c*l,t[1]=e*u+i,t[5]=s*l,t[9]=n*u-r,t[2]=r*u-n,t[6]=o*l,t[10]=i*u+e}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(hi,e,di)}lookAt(e,t,n){const r=this.elements;return mi.subVectors(e,t),0===mi.lengthSq()&&(mi.z=1),mi.normalize(),pi.crossVectors(n,mi),0===pi.lengthSq()&&(1===Math.abs(n.z)?mi.x+=1e-4:mi.z+=1e-4,mi.normalize(),pi.crossVectors(n,mi)),pi.normalize(),fi.crossVectors(mi,pi),r[0]=pi.x,r[4]=fi.x,r[8]=mi.x,r[1]=pi.y,r[5]=fi.y,r[9]=mi.y,r[2]=pi.z,r[6]=fi.z,r[10]=mi.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,i=this.elements,s=n[0],o=n[4],a=n[8],c=n[12],l=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],g=n[14],A=n[3],y=n[7],_=n[11],v=n[15],b=r[0],x=r[4],w=r[8],E=r[12],T=r[1],S=r[5],M=r[9],C=r[13],I=r[2],R=r[6],B=r[10],P=r[14],D=r[3],O=r[7],L=r[11],N=r[15];return i[0]=s*b+o*T+a*I+c*D,i[4]=s*x+o*S+a*R+c*O,i[8]=s*w+o*M+a*B+c*L,i[12]=s*E+o*C+a*P+c*N,i[1]=l*b+u*T+h*I+d*D,i[5]=l*x+u*S+h*R+d*O,i[9]=l*w+u*M+h*B+d*L,i[13]=l*E+u*C+h*P+d*N,i[2]=p*b+f*T+m*I+g*D,i[6]=p*x+f*S+m*R+g*O,i[10]=p*w+f*M+m*B+g*L,i[14]=p*E+f*C+m*P+g*N,i[3]=A*b+y*T+_*I+v*D,i[7]=A*x+y*S+_*R+v*O,i[11]=A*w+y*M+_*B+v*L,i[15]=A*E+y*C+_*P+v*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],i=e[12],s=e[1],o=e[5],a=e[9],c=e[13],l=e[2],u=e[6],h=e[10],d=e[14];return e[3]*(+i*a*u-r*c*u-i*o*h+n*c*h+r*o*d-n*a*d)+e[7]*(+t*a*d-t*c*h+i*s*h-r*s*d+r*c*l-i*a*l)+e[11]*(+t*c*u-t*o*d-i*s*u+n*s*d+i*o*l-n*c*l)+e[15]*(-r*o*l-t*a*u+t*o*h+r*s*u-n*s*h+n*a*l)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],i=e[3],s=e[4],o=e[5],a=e[6],c=e[7],l=e[8],u=e[9],h=e[10],d=e[11],p=e[12],f=e[13],m=e[14],g=e[15],A=u*m*c-f*h*c+f*a*d-o*m*d-u*a*g+o*h*g,y=p*h*c-l*m*c-p*a*d+s*m*d+l*a*g-s*h*g,_=l*f*c-p*u*c+p*o*d-s*f*d-l*o*g+s*u*g,v=p*u*a-l*f*a-p*o*h+s*f*h+l*o*m-s*u*m,b=t*A+n*y+r*_+i*v;if(0===b)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const x=1/b;return e[0]=A*x,e[1]=(f*h*i-u*m*i-f*r*d+n*m*d+u*r*g-n*h*g)*x,e[2]=(o*m*i-f*a*i+f*r*c-n*m*c-o*r*g+n*a*g)*x,e[3]=(u*a*i-o*h*i-u*r*c+n*h*c+o*r*d-n*a*d)*x,e[4]=y*x,e[5]=(l*m*i-p*h*i+p*r*d-t*m*d-l*r*g+t*h*g)*x,e[6]=(p*a*i-s*m*i-p*r*c+t*m*c+s*r*g-t*a*g)*x,e[7]=(s*h*i-l*a*i+l*r*c-t*h*c-s*r*d+t*a*d)*x,e[8]=_*x,e[9]=(p*u*i-l*f*i-p*n*d+t*f*d+l*n*g-t*u*g)*x,e[10]=(s*f*i-p*o*i+p*n*c-t*f*c-s*n*g+t*o*g)*x,e[11]=(l*o*i-s*u*i-l*n*c+t*u*c+s*n*d-t*o*d)*x,e[12]=v*x,e[13]=(l*f*r-p*u*r+p*n*h-t*f*h-l*n*m+t*u*m)*x,e[14]=(p*o*r-s*f*r-p*n*a+t*f*a+s*n*m-t*o*m)*x,e[15]=(s*u*r-l*o*r+l*n*a-t*u*a-s*n*h+t*o*h)*x,this}scale(e){const t=this.elements,n=e.x,r=e.y,i=e.z;return t[0]*=n,t[4]*=r,t[8]*=i,t[1]*=n,t[5]*=r,t[9]*=i,t[2]*=n,t[6]*=r,t[10]*=i,t[3]*=n,t[7]*=r,t[11]*=i,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),i=1-n,s=e.x,o=e.y,a=e.z,c=i*s,l=i*o;return this.set(c*s+n,c*o-r*a,c*a+r*o,0,c*o+r*a,l*o+n,l*a-r*s,0,c*a-r*o,l*a+r*s,i*a*a+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,i,s){return this.set(1,n,i,0,e,1,s,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,i=t._x,s=t._y,o=t._z,a=t._w,c=i+i,l=s+s,u=o+o,h=i*c,d=i*l,p=i*u,f=s*l,m=s*u,g=o*u,A=a*c,y=a*l,_=a*u,v=n.x,b=n.y,x=n.z;return r[0]=(1-(f+g))*v,r[1]=(d+_)*v,r[2]=(p-y)*v,r[3]=0,r[4]=(d-_)*b,r[5]=(1-(h+g))*b,r[6]=(m+A)*b,r[7]=0,r[8]=(p+y)*x,r[9]=(m-A)*x,r[10]=(1-(h+f))*x,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let i=li.set(r[0],r[1],r[2]).length();const s=li.set(r[4],r[5],r[6]).length(),o=li.set(r[8],r[9],r[10]).length();this.determinant()<0&&(i=-i),e.x=r[12],e.y=r[13],e.z=r[14],ui.copy(this);const a=1/i,c=1/s,l=1/o;return ui.elements[0]*=a,ui.elements[1]*=a,ui.elements[2]*=a,ui.elements[4]*=c,ui.elements[5]*=c,ui.elements[6]*=c,ui.elements[8]*=l,ui.elements[9]*=l,ui.elements[10]*=l,t.setFromRotationMatrix(ui),n.x=i,n.y=s,n.z=o,this}makePerspective(e,t,n,r,i,s,o=zn){const a=this.elements,c=2*i/(t-e),l=2*i/(n-r),u=(t+e)/(t-e),h=(n+r)/(n-r);let d,p;if(o===zn)d=-(s+i)/(s-i),p=-2*s*i/(s-i);else{if(o!==Gn)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);d=-s/(s-i),p=-s*i/(s-i)}return a[0]=c,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=h,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=p,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(e,t,n,r,i,s,o=zn){const a=this.elements,c=1/(t-e),l=1/(n-r),u=1/(s-i),h=(t+e)*c,d=(n+r)*l;let p,f;if(o===zn)p=(s+i)*u,f=-2*u;else{if(o!==Gn)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);p=i*u,f=-1*u}return a[0]=2*c,a[4]=0,a[8]=0,a[12]=-h,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=f,a[14]=-p,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let e=0;e<16;e++)if(t[e]!==n[e])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const li=new Pr,ui=new ci,hi=new Pr(0,0,0),di=new Pr(1,1,1),pi=new Pr,fi=new Pr,mi=new Pr,gi=new ci,Ai=new Br;class yi{constructor(e=0,t=0,n=0,r=yi.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,i=r[0],s=r[4],o=r[8],a=r[1],c=r[5],l=r[9],u=r[2],h=r[6],d=r[10];switch(t){case"XYZ":this._y=Math.asin(Xn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(-l,d),this._z=Math.atan2(-s,i)):(this._x=Math.atan2(h,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Xn(l,-1,1)),Math.abs(l)<.9999999?(this._y=Math.atan2(o,d),this._z=Math.atan2(a,c)):(this._y=Math.atan2(-u,i),this._z=0);break;case"ZXY":this._x=Math.asin(Xn(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-u,d),this._z=Math.atan2(-s,c)):(this._y=0,this._z=Math.atan2(a,i));break;case"ZYX":this._y=Math.asin(-Xn(u,-1,1)),Math.abs(u)<.9999999?(this._x=Math.atan2(h,d),this._z=Math.atan2(a,i)):(this._x=0,this._z=Math.atan2(-s,c));break;case"YZX":this._z=Math.asin(Xn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-l,c),this._y=Math.atan2(-u,i)):(this._x=0,this._y=Math.atan2(o,d));break;case"XZY":this._z=Math.asin(-Xn(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(h,c),this._y=Math.atan2(o,i)):(this._x=Math.atan2(-l,d),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,!0===n&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return gi.makeRotationFromQuaternion(e),this.setFromRotationMatrix(gi,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return Ai.setFromEuler(this),this.setFromQuaternion(Ai,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],void 0!==e[3]&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}yi.DEFAULT_ORDER="XYZ";class _i{constructor(){this.mask=1}set(e){this.mask=1<<e>>>0}enable(e){this.mask|=1<<e}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e}disable(e){this.mask&=~(1<<e)}disableAll(){this.mask=0}test(e){return 0!==(this.mask&e.mask)}isEnabled(e){return!!(this.mask&1<<e)}}let vi=0;const bi=new Pr,xi=new Br,wi=new ci,Ei=new Pr,Ti=new Pr,Si=new Pr,Mi=new Br,Ci=new Pr(1,0,0),Ii=new Pr(0,1,0),Ri=new Pr(0,0,1),Bi={type:"added"},Pi={type:"removed"},Di={type:"childadded",child:null},Oi={type:"childremoved",child:null};class Li extends jn{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vi++}),this.uuid=qn(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Li.DEFAULT_UP.clone();const e=new Pr,t=new yi,n=new Br,r=new Pr(1,1,1);t._onChange((function(){n.setFromEuler(t,!1)})),n._onChange((function(){t.setFromQuaternion(n,void 0,!1)})),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new ci},normalMatrix:{value:new tr}}),this.matrix=new ci,this.matrixWorld=new ci,this.matrixAutoUpdate=Li.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new _i,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return xi.setFromAxisAngle(e,t),this.quaternion.multiply(xi),this}rotateOnWorldAxis(e,t){return xi.setFromAxisAngle(e,t),this.quaternion.premultiply(xi),this}rotateX(e){return this.rotateOnAxis(Ci,e)}rotateY(e){return this.rotateOnAxis(Ii,e)}rotateZ(e){return this.rotateOnAxis(Ri,e)}translateOnAxis(e,t){return bi.copy(e).applyQuaternion(this.quaternion),this.position.add(bi.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(Ci,e)}translateY(e){return this.translateOnAxis(Ii,e)}translateZ(e){return this.translateOnAxis(Ri,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(wi.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?Ei.copy(e):Ei.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Ti.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?wi.lookAt(Ti,Ei,this.up):wi.lookAt(Ei,Ti,this.up),this.quaternion.setFromRotationMatrix(wi),r&&(wi.extractRotation(r.matrixWorld),xi.setFromRotationMatrix(wi),this.quaternion.premultiply(xi.invert()))}add(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(Bi),Di.child=e,this.dispatchEvent(Di),Di.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}const t=this.children.indexOf(e);return-1!==t&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Pi),Oi.child=e,this.dispatchEvent(Oi),Oi.child=null),this}removeFromParent(){const e=this.parent;return null!==e&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),wi.copy(this.matrixWorld).invert(),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),wi.multiply(e.parent.matrixWorld)),e.applyMatrix4(wi),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(Bi),Di.child=e,this.dispatchEvent(Di),Di.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const r=this.children[n].getObjectByProperty(e,t);if(void 0!==r)return r}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let i=0,s=r.length;i<s;i++)r[i].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ti,e,Si),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ti,Mi,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(!1===this.visible)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;null!==t&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++){const r=t[n];!0!==r.matrixWorldAutoUpdate&&!0!==e||r.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const n=this.parent;if(!0===e&&null!==n&&!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===t){const e=this.children;for(let t=0,n=e.length;t<n;t++){const n=e[t];!0===n.matrixWorldAutoUpdate&&n.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=void 0===e||"string"==typeof e,n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function i(t,n){return void 0===t[n.uuid]&&(t[n.uuid]=n.toJSON(e)),n.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map((e=>({boxInitialized:e.boxInitialized,boxMin:e.box.min.toArray(),boxMax:e.box.max.toArray(),sphereInitialized:e.sphereInitialized,sphereRadius:e.sphere.radius,sphereCenter:e.sphere.center.toArray()}))),r.maxGeometryCount=this._maxGeometryCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(e)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=i(e.geometries,this.geometry);const t=this.geometry.parameters;if(void 0!==t&&void 0!==t.shapes){const n=t.shapes;if(Array.isArray(n))for(let t=0,r=n.length;t<r;t++){const r=n[t];i(e.shapes,r)}else i(e.shapes,n)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(i(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const t=[];for(let n=0,r=this.material.length;n<r;n++)t.push(i(e.materials,this.material[n]));r.material=t}else r.material=i(e.materials,this.material);if(this.children.length>0){r.children=[];for(let t=0;t<this.children.length;t++)r.children.push(this.children[t].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let t=0;t<this.animations.length;t++){const n=this.animations[t];r.animations.push(i(e.animations,n))}}if(t){const t=s(e.geometries),r=s(e.materials),i=s(e.textures),o=s(e.images),a=s(e.shapes),c=s(e.skeletons),l=s(e.animations),u=s(e.nodes);t.length>0&&(n.geometries=t),r.length>0&&(n.materials=r),i.length>0&&(n.textures=i),o.length>0&&(n.images=o),a.length>0&&(n.shapes=a),c.length>0&&(n.skeletons=c),l.length>0&&(n.animations=l),u.length>0&&(n.nodes=u)}return n.object=r,n;function s(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}}clone(e){return(new this.constructor).copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),!0===t)for(let t=0;t<e.children.length;t++){const n=e.children[t];this.add(n.clone())}return this}}Li.DEFAULT_UP=new Pr(0,1,0),Li.DEFAULT_MATRIX_AUTO_UPDATE=!0,Li.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ni=new Pr,Fi=new Pr,Ui=new Pr,ki=new Pr,zi=new Pr,Gi=new Pr,ji=new Pr,Vi=new Pr,Qi=new Pr,Hi=new Pr;class Wi{constructor(e=new Pr,t=new Pr,n=new Pr){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),Ni.subVectors(e,t),r.cross(Ni);const i=r.lengthSq();return i>0?r.multiplyScalar(1/Math.sqrt(i)):r.set(0,0,0)}static getBarycoord(e,t,n,r,i){Ni.subVectors(r,t),Fi.subVectors(n,t),Ui.subVectors(e,t);const s=Ni.dot(Ni),o=Ni.dot(Fi),a=Ni.dot(Ui),c=Fi.dot(Fi),l=Fi.dot(Ui),u=s*c-o*o;if(0===u)return i.set(0,0,0),null;const h=1/u,d=(c*a-o*l)*h,p=(s*l-o*a)*h;return i.set(1-d-p,p,d)}static containsPoint(e,t,n,r){return null!==this.getBarycoord(e,t,n,r,ki)&&(ki.x>=0&&ki.y>=0&&ki.x+ki.y<=1)}static getInterpolation(e,t,n,r,i,s,o,a){return null===this.getBarycoord(e,t,n,r,ki)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(i,ki.x),a.addScaledVector(s,ki.y),a.addScaledVector(o,ki.z),a)}static isFrontFacing(e,t,n,r){return Ni.subVectors(n,t),Fi.subVectors(e,t),Ni.cross(Fi).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ni.subVectors(this.c,this.b),Fi.subVectors(this.a,this.b),.5*Ni.cross(Fi).length()}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Wi.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Wi.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,i){return Wi.getInterpolation(e,this.a,this.b,this.c,t,n,r,i)}containsPoint(e){return Wi.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Wi.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,i=this.c;let s,o;zi.subVectors(r,n),Gi.subVectors(i,n),Vi.subVectors(e,n);const a=zi.dot(Vi),c=Gi.dot(Vi);if(a<=0&&c<=0)return t.copy(n);Qi.subVectors(e,r);const l=zi.dot(Qi),u=Gi.dot(Qi);if(l>=0&&u<=l)return t.copy(r);const h=a*u-l*c;if(h<=0&&a>=0&&l<=0)return s=a/(a-l),t.copy(n).addScaledVector(zi,s);Hi.subVectors(e,i);const d=zi.dot(Hi),p=Gi.dot(Hi);if(p>=0&&d<=p)return t.copy(i);const f=d*c-a*p;if(f<=0&&c>=0&&p<=0)return o=c/(c-p),t.copy(n).addScaledVector(Gi,o);const m=l*p-d*u;if(m<=0&&u-l>=0&&d-p>=0)return ji.subVectors(i,r),o=(u-l)/(u-l+(d-p)),t.copy(r).addScaledVector(ji,o);const g=1/(m+f+h);return s=f*g,o=h*g,t.copy(n).addScaledVector(zi,s).addScaledVector(Gi,o)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const qi={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Xi={h:0,s:0,l:0},Ki={h:0,s:0,l:0};function Yi(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+6*(t-e)*(2/3-n):e}class Ji{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(void 0===t&&void 0===n){const t=e;t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Yt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(255&e)/255,fr.toWorkingColorSpace(this,t),this}setRGB(e,t,n,r=fr.workingColorSpace){return this.r=e,this.g=t,this.b=n,fr.toWorkingColorSpace(this,r),this}setHSL(e,t,n,r=fr.workingColorSpace){if(e=Kn(e,1),t=Xn(t,0,1),n=Xn(n,0,1),0===t)this.r=this.g=this.b=n;else{const r=n<=.5?n*(1+t):n+t-n*t,i=2*n-r;this.r=Yi(i,r,e+1/3),this.g=Yi(i,r,e),this.b=Yi(i,r,e-1/3)}return fr.toWorkingColorSpace(this,r),this}setStyle(e,t=Yt){function n(t){void 0!==t&&parseFloat(t)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let i;const s=r[1],o=r[2];switch(s){case"rgb":case"rgba":if(i=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(255,parseInt(i[1],10))/255,Math.min(255,parseInt(i[2],10))/255,Math.min(255,parseInt(i[3],10))/255,t);if(i=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setRGB(Math.min(100,parseInt(i[1],10))/100,Math.min(100,parseInt(i[2],10))/100,Math.min(100,parseInt(i[3],10))/100,t);break;case"hsl":case"hsla":if(i=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(o))return n(i[4]),this.setHSL(parseFloat(i[1])/360,parseFloat(i[2])/100,parseFloat(i[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const n=r[1],i=n.length;if(3===i)return this.setRGB(parseInt(n.charAt(0),16)/15,parseInt(n.charAt(1),16)/15,parseInt(n.charAt(2),16)/15,t);if(6===i)return this.setHex(parseInt(n,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Yt){const n=qi[e.toLowerCase()];return void 0!==n?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=mr(e.r),this.g=mr(e.g),this.b=mr(e.b),this}copyLinearToSRGB(e){return this.r=gr(e.r),this.g=gr(e.g),this.b=gr(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Yt){return fr.fromWorkingColorSpace($i.copy(this),e),65536*Math.round(Xn(255*$i.r,0,255))+256*Math.round(Xn(255*$i.g,0,255))+Math.round(Xn(255*$i.b,0,255))}getHexString(e=Yt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=fr.workingColorSpace){fr.fromWorkingColorSpace($i.copy(this),t);const n=$i.r,r=$i.g,i=$i.b,s=Math.max(n,r,i),o=Math.min(n,r,i);let a,c;const l=(o+s)/2;if(o===s)a=0,c=0;else{const e=s-o;switch(c=l<=.5?e/(s+o):e/(2-s-o),s){case n:a=(r-i)/e+(r<i?6:0);break;case r:a=(i-n)/e+2;break;case i:a=(n-r)/e+4}a/=6}return e.h=a,e.s=c,e.l=l,e}getRGB(e,t=fr.workingColorSpace){return fr.fromWorkingColorSpace($i.copy(this),t),e.r=$i.r,e.g=$i.g,e.b=$i.b,e}getStyle(e=Yt){fr.fromWorkingColorSpace($i.copy(this),e);const t=$i.r,n=$i.g,r=$i.b;return e!==Yt?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*t)},${Math.round(255*n)},${Math.round(255*r)})`}offsetHSL(e,t,n){return this.getHSL(Xi),this.setHSL(Xi.h+e,Xi.s+t,Xi.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(Xi),e.getHSL(Ki);const n=Yn(Xi.h,Ki.h,t),r=Yn(Xi.s,Ki.s,t),i=Yn(Xi.l,Ki.l,t);return this.setHSL(n,r,i),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,i=e.elements;return this.r=i[0]*t+i[3]*n+i[6]*r,this.g=i[1]*t+i[4]*n+i[7]*r,this.b=i[2]*t+i[5]*n+i[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const $i=new Ji;Ji.NAMES=qi;let Zi=0;class es extends jn{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Zi++}),this.uuid=qn(),this.name="",this.type="Material",this.blending=y,this.side=f,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=P,this.blendDst=D,this.blendEquation=w,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Ji(0,0,0),this.blendAlpha=0,this.depthFunc=W,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=vn,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=on,this.stencilZFail=on,this.stencilZPass=on,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(void 0!==e)for(const t in e){const n=e[t];if(void 0===n){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];void 0!==r?r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n:console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`)}}toJSON(e){const t=void 0===e||"string"==typeof e;t&&(e={textures:{},images:{}});const n={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(e){const t=[];for(const n in e){const r=e[n];delete r.metadata,t.push(r)}return t}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),void 0!==this.sheen&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(n.dispersion=this.dispersion),void 0!==this.iridescence&&(n.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(n.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),void 0!==this.anisotropy&&(n.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,void 0!==this.combine&&(n.combine=this.combine)),void 0!==this.envMapRotation&&(n.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(n.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),void 0!==this.transmission&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),void 0!==this.thickness&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(n.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(n.size=this.size),null!==this.shadowSide&&(n.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==y&&(n.blending=this.blending),this.side!==f&&(n.side=this.side),!0===this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=!0),this.blendSrc!==P&&(n.blendSrc=this.blendSrc),this.blendDst!==D&&(n.blendDst=this.blendDst),this.blendEquation!==w&&(n.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(n.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(n.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==W&&(n.depthFunc=this.depthFunc),!1===this.depthTest&&(n.depthTest=this.depthTest),!1===this.depthWrite&&(n.depthWrite=this.depthWrite),!1===this.colorWrite&&(n.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==vn&&(n.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(n.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==on&&(n.stencilFail=this.stencilFail),this.stencilZFail!==on&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==on&&(n.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(n.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.alphaHash&&(n.alphaHash=!0),!0===this.alphaToCoverage&&(n.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=!0),!0===this.forceSinglePass&&(n.forceSinglePass=!0),!0===this.wireframe&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(n.flatShading=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),!1===this.fog&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData),t){const t=r(e.textures),i=r(e.images);t.length>0&&(n.textures=t),i.length>0&&(n.images=i)}return n}clone(){return(new this.constructor).copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(null!==t){const e=t.length;n=new Array(e);for(let r=0;r!==e;++r)n[r]=t[r].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){!0===e&&this.version++}}class ts extends es{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Ji(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yi,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ns=rs();function rs(){const e=new ArrayBuffer(4),t=new Float32Array(e),n=new Uint32Array(e),r=new Uint32Array(512),i=new Uint32Array(512);for(let e=0;e<256;++e){const t=e-127;t<-27?(r[e]=0,r[256|e]=32768,i[e]=24,i[256|e]=24):t<-14?(r[e]=1024>>-t-14,r[256|e]=1024>>-t-14|32768,i[e]=-t-1,i[256|e]=-t-1):t<=15?(r[e]=t+15<<10,r[256|e]=t+15<<10|32768,i[e]=13,i[256|e]=13):t<128?(r[e]=31744,r[256|e]=64512,i[e]=24,i[256|e]=24):(r[e]=31744,r[256|e]=64512,i[e]=13,i[256|e]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let e=1;e<1024;++e){let t=e<<13,n=0;for(;!(8388608&t);)t<<=1,n-=8388608;t&=-8388609,n+=947912704,s[e]=t|n}for(let e=1024;e<2048;++e)s[e]=939524096+(e-1024<<13);for(let e=1;e<31;++e)o[e]=e<<23;o[31]=1199570944,o[32]=2147483648;for(let e=33;e<63;++e)o[e]=2147483648+(e-32<<23);o[63]=3347054592;for(let e=1;e<64;++e)32!==e&&(a[e]=1024);return{floatView:t,uint32View:n,baseTable:r,shiftTable:i,mantissaTable:s,exponentTable:o,offsetTable:a}}function is(e){Math.abs(e)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),e=Xn(e,-65504,65504),ns.floatView[0]=e;const t=ns.uint32View[0],n=t>>23&511;return ns.baseTable[n]+((8388607&t)>>ns.shiftTable[n])}function ss(e){const t=e>>10;return ns.uint32View[0]=ns.mantissaTable[ns.offsetTable[t]+(1023&e)]+ns.exponentTable[t],ns.floatView[0]}const os={toHalfFloat:is,fromHalfFloat:ss},as=new Pr,cs=new er;class ls{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=void 0!==e?e.length/t:0,this.normalized=n,this.usage=In,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Le,this.version=0}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return lr("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,i=this.itemSize;r<i;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(2===this.itemSize)for(let t=0,n=this.count;t<n;t++)cs.fromBufferAttribute(this,t),cs.applyMatrix3(e),this.setXY(t,cs.x,cs.y);else if(3===this.itemSize)for(let t=0,n=this.count;t<n;t++)as.fromBufferAttribute(this,t),as.applyMatrix3(e),this.setXYZ(t,as.x,as.y,as.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)as.fromBufferAttribute(this,t),as.applyMatrix4(e),this.setXYZ(t,as.x,as.y,as.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)as.fromBufferAttribute(this,t),as.applyNormalMatrix(e),this.setXYZ(t,as.x,as.y,as.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)as.fromBufferAttribute(this,t),as.transformDirection(e),this.setXYZ(t,as.x,as.y,as.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=Jn(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=$n(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Jn(t,this.array)),t}setX(e,t){return this.normalized&&(t=$n(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Jn(t,this.array)),t}setY(e,t){return this.normalized&&(t=$n(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Jn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=$n(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Jn(t,this.array)),t}setW(e,t){return this.normalized&&(t=$n(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=$n(t,this.array),n=$n(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=$n(t,this.array),n=$n(n,this.array),r=$n(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=$n(t,this.array),n=$n(n,this.array),r=$n(r,this.array),i=$n(i,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=i,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(e.name=this.name),this.usage!==In&&(e.usage=this.usage),e}}class us extends ls{constructor(e,t,n){super(new Int8Array(e),t,n)}}class hs extends ls{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class ds extends ls{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class ps extends ls{constructor(e,t,n){super(new Int16Array(e),t,n)}}class fs extends ls{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class ms extends ls{constructor(e,t,n){super(new Int32Array(e),t,n)}}class gs extends ls{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class As extends ls{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=ss(this.array[e*this.itemSize]);return this.normalized&&(t=Jn(t,this.array)),t}setX(e,t){return this.normalized&&(t=$n(t,this.array)),this.array[e*this.itemSize]=is(t),this}getY(e){let t=ss(this.array[e*this.itemSize+1]);return this.normalized&&(t=Jn(t,this.array)),t}setY(e,t){return this.normalized&&(t=$n(t,this.array)),this.array[e*this.itemSize+1]=is(t),this}getZ(e){let t=ss(this.array[e*this.itemSize+2]);return this.normalized&&(t=Jn(t,this.array)),t}setZ(e,t){return this.normalized&&(t=$n(t,this.array)),this.array[e*this.itemSize+2]=is(t),this}getW(e){let t=ss(this.array[e*this.itemSize+3]);return this.normalized&&(t=Jn(t,this.array)),t}setW(e,t){return this.normalized&&(t=$n(t,this.array)),this.array[e*this.itemSize+3]=is(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=$n(t,this.array),n=$n(n,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=$n(t,this.array),n=$n(n,this.array),r=$n(r,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(n),this.array[e+2]=is(r),this}setXYZW(e,t,n,r,i){return e*=this.itemSize,this.normalized&&(t=$n(t,this.array),n=$n(n,this.array),r=$n(r,this.array),i=$n(i,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(n),this.array[e+2]=is(r),this.array[e+3]=is(i),this}}class ys extends ls{constructor(e,t,n){super(new Float32Array(e),t,n)}}let _s=0;const vs=new ci,bs=new Li,xs=new Pr,ws=new Lr,Es=new Lr,Ts=new Pr;class Ss extends jn{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:_s++}),this.uuid=qn(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(rr(e)?gs:fs)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return void 0!==this.attributes[e]}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;void 0!==t&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const t=(new tr).getNormalMatrix(e);n.applyNormalMatrix(t),n.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(e),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(e){return vs.makeRotationFromQuaternion(e),this.applyMatrix4(vs),this}rotateX(e){return vs.makeRotationX(e),this.applyMatrix4(vs),this}rotateY(e){return vs.makeRotationY(e),this.applyMatrix4(vs),this}rotateZ(e){return vs.makeRotationZ(e),this.applyMatrix4(vs),this}translate(e,t,n){return vs.makeTranslation(e,t,n),this.applyMatrix4(vs),this}scale(e,t,n){return vs.makeScale(e,t,n),this.applyMatrix4(vs),this}lookAt(e){return bs.lookAt(e),bs.updateMatrix(),this.applyMatrix4(bs.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(xs).negate(),this.translate(xs.x,xs.y,xs.z),this}setFromPoints(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n];t.push(r.x,r.y,r.z||0)}return this.setAttribute("position",new ys(t,3)),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Lr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Pr(-1/0,-1/0,-1/0),new Pr(1/0,1/0,1/0));if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];ws.setFromBufferAttribute(n),this.morphTargetsRelative?(Ts.addVectors(this.boundingBox.min,ws.min),this.boundingBox.expandByPoint(Ts),Ts.addVectors(this.boundingBox.max,ws.max),this.boundingBox.expandByPoint(Ts)):(this.boundingBox.expandByPoint(ws.min),this.boundingBox.expandByPoint(ws.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Zr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute)return console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Pr,1/0);if(e){const n=this.boundingSphere.center;if(ws.setFromBufferAttribute(e),t)for(let e=0,n=t.length;e<n;e++){const n=t[e];Es.setFromBufferAttribute(n),this.morphTargetsRelative?(Ts.addVectors(ws.min,Es.min),ws.expandByPoint(Ts),Ts.addVectors(ws.max,Es.max),ws.expandByPoint(Ts)):(ws.expandByPoint(Es.min),ws.expandByPoint(Es.max))}ws.getCenter(n);let r=0;for(let t=0,i=e.count;t<i;t++)Ts.fromBufferAttribute(e,t),r=Math.max(r,n.distanceToSquared(Ts));if(t)for(let i=0,s=t.length;i<s;i++){const s=t[i],o=this.morphTargetsRelative;for(let t=0,i=s.count;t<i;t++)Ts.fromBufferAttribute(s,t),o&&(xs.fromBufferAttribute(e,t),Ts.add(xs)),r=Math.max(r,n.distanceToSquared(Ts))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(null===e||void 0===t.position||void 0===t.normal||void 0===t.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.position,r=t.normal,i=t.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new ls(new Float32Array(4*n.count),4));const s=this.getAttribute("tangent"),o=[],a=[];for(let e=0;e<n.count;e++)o[e]=new Pr,a[e]=new Pr;const c=new Pr,l=new Pr,u=new Pr,h=new er,d=new er,p=new er,f=new Pr,m=new Pr;function g(e,t,r){c.fromBufferAttribute(n,e),l.fromBufferAttribute(n,t),u.fromBufferAttribute(n,r),h.fromBufferAttribute(i,e),d.fromBufferAttribute(i,t),p.fromBufferAttribute(i,r),l.sub(c),u.sub(c),d.sub(h),p.sub(h);const s=1/(d.x*p.y-p.x*d.y);isFinite(s)&&(f.copy(l).multiplyScalar(p.y).addScaledVector(u,-d.y).multiplyScalar(s),m.copy(u).multiplyScalar(d.x).addScaledVector(l,-p.x).multiplyScalar(s),o[e].add(f),o[t].add(f),o[r].add(f),a[e].add(m),a[t].add(m),a[r].add(m))}let A=this.groups;0===A.length&&(A=[{start:0,count:e.count}]);for(let t=0,n=A.length;t<n;++t){const n=A[t],r=n.start;for(let t=r,i=r+n.count;t<i;t+=3)g(e.getX(t+0),e.getX(t+1),e.getX(t+2))}const y=new Pr,_=new Pr,v=new Pr,b=new Pr;function x(e){v.fromBufferAttribute(r,e),b.copy(v);const t=o[e];y.copy(t),y.sub(v.multiplyScalar(v.dot(t))).normalize(),_.crossVectors(b,t);const n=_.dot(a[e])<0?-1:1;s.setXYZW(e,y.x,y.y,y.z,n)}for(let t=0,n=A.length;t<n;++t){const n=A[t],r=n.start;for(let t=r,i=r+n.count;t<i;t+=3)x(e.getX(t+0)),x(e.getX(t+1)),x(e.getX(t+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(void 0!==t){let n=this.getAttribute("normal");if(void 0===n)n=new ls(new Float32Array(3*t.count),3),this.setAttribute("normal",n);else for(let e=0,t=n.count;e<t;e++)n.setXYZ(e,0,0,0);const r=new Pr,i=new Pr,s=new Pr,o=new Pr,a=new Pr,c=new Pr,l=new Pr,u=new Pr;if(e)for(let h=0,d=e.count;h<d;h+=3){const d=e.getX(h+0),p=e.getX(h+1),f=e.getX(h+2);r.fromBufferAttribute(t,d),i.fromBufferAttribute(t,p),s.fromBufferAttribute(t,f),l.subVectors(s,i),u.subVectors(r,i),l.cross(u),o.fromBufferAttribute(n,d),a.fromBufferAttribute(n,p),c.fromBufferAttribute(n,f),o.add(l),a.add(l),c.add(l),n.setXYZ(d,o.x,o.y,o.z),n.setXYZ(p,a.x,a.y,a.z),n.setXYZ(f,c.x,c.y,c.z)}else for(let e=0,o=t.count;e<o;e+=3)r.fromBufferAttribute(t,e+0),i.fromBufferAttribute(t,e+1),s.fromBufferAttribute(t,e+2),l.subVectors(s,i),u.subVectors(r,i),l.cross(u),n.setXYZ(e+0,l.x,l.y,l.z),n.setXYZ(e+1,l.x,l.y,l.z),n.setXYZ(e+2,l.x,l.y,l.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)Ts.fromBufferAttribute(e,t),Ts.normalize(),e.setXYZ(t,Ts.x,Ts.y,Ts.z)}toNonIndexed(){function e(e,t){const n=e.array,r=e.itemSize,i=e.normalized,s=new n.constructor(t.length*r);let o=0,a=0;for(let i=0,c=t.length;i<c;i++){o=e.isInterleavedBufferAttribute?t[i]*e.data.stride+e.offset:t[i]*r;for(let e=0;e<r;e++)s[a++]=n[o++]}return new ls(s,r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Ss,n=this.index.array,r=this.attributes;for(const i in r){const s=e(r[i],n);t.setAttribute(i,s)}const i=this.morphAttributes;for(const r in i){const s=[],o=i[r];for(let t=0,r=o.length;t<r;t++){const r=e(o[t],n);s.push(r)}t.morphAttributes[r]=s}t.morphTargetsRelative=this.morphTargetsRelative;const s=this.groups;for(let e=0,n=s.length;e<n;e++){const n=s[e];t.addGroup(n.start,n.count,n.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,""!==this.name&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),void 0!==this.parameters){const t=this.parameters;for(const n in t)void 0!==t[n]&&(e[n]=t[n]);return e}e.data={attributes:{}};const t=this.index;null!==t&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const t in n){const r=n[t];e.data.attributes[t]=r.toJSON(e.data)}const r={};let i=!1;for(const t in this.morphAttributes){const n=this.morphAttributes[t],s=[];for(let t=0,r=n.length;t<r;t++){const r=n[t];s.push(r.toJSON(e.data))}s.length>0&&(r[t]=s,i=!0)}i&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(e.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(e.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),e}clone(){return(new this.constructor).copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;null!==n&&this.setIndex(n.clone(t));const r=e.attributes;for(const e in r){const n=r[e];this.setAttribute(e,n.clone(t))}const i=e.morphAttributes;for(const e in i){const n=[],r=i[e];for(let e=0,i=r.length;e<i;e++)n.push(r[e].clone(t));this.morphAttributes[e]=n}this.morphTargetsRelative=e.morphTargetsRelative;const s=e.groups;for(let e=0,t=s.length;e<t;e++){const t=s[e];this.addGroup(t.start,t.count,t.materialIndex)}const o=e.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=e.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const Ms=new ci,Cs=new ai,Is=new Zr,Rs=new Pr,Bs=new Pr,Ps=new Pr,Ds=new Pr,Os=new Pr,Ls=new Pr,Ns=new er,Fs=new er,Us=new er,ks=new Pr,zs=new Pr,Gs=new Pr,js=new Pr,Vs=new Pr;class Qs extends Li{constructor(e=new Ss,t=new ts){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),void 0!==e.morphTargetInfluences&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),void 0!==e.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,i=n.morphAttributes.position,s=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const o=this.morphTargetInfluences;if(i&&o){Ls.set(0,0,0);for(let n=0,r=i.length;n<r;n++){const r=o[n],a=i[n];0!==r&&(Os.fromBufferAttribute(a,e),s?Ls.addScaledVector(Os,r):Ls.addScaledVector(Os.sub(t),r))}t.add(Ls)}return t}raycast(e,t){const n=this.geometry,r=this.material,i=this.matrixWorld;if(void 0!==r){if(null===n.boundingSphere&&n.computeBoundingSphere(),Is.copy(n.boundingSphere),Is.applyMatrix4(i),Cs.copy(e.ray).recast(e.near),!1===Is.containsPoint(Cs.origin)){if(null===Cs.intersectSphere(Is,Rs))return;if(Cs.origin.distanceToSquared(Rs)>(e.far-e.near)**2)return}Ms.copy(i).invert(),Cs.copy(e.ray).applyMatrix4(Ms),null!==n.boundingBox&&!1===Cs.intersectsBox(n.boundingBox)||this._computeIntersections(e,t,Cs)}}_computeIntersections(e,t,n){let r;const i=this.geometry,s=this.material,o=i.index,a=i.attributes.position,c=i.attributes.uv,l=i.attributes.uv1,u=i.attributes.normal,h=i.groups,d=i.drawRange;if(null!==o)if(Array.isArray(s))for(let i=0,a=h.length;i<a;i++){const a=h[i],p=s[a.materialIndex];for(let i=Math.max(a.start,d.start),s=Math.min(o.count,Math.min(a.start+a.count,d.start+d.count));i<s;i+=3){r=Hs(this,p,e,n,c,l,u,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=a.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);i<a;i+=3){r=Hs(this,s,e,n,c,l,u,o.getX(i),o.getX(i+1),o.getX(i+2)),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}else if(void 0!==a)if(Array.isArray(s))for(let i=0,o=h.length;i<o;i++){const o=h[i],p=s[o.materialIndex];for(let i=Math.max(o.start,d.start),s=Math.min(a.count,Math.min(o.start+o.count,d.start+d.count));i<s;i+=3){r=Hs(this,p,e,n,c,l,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),r.face.materialIndex=o.materialIndex,t.push(r))}}else{for(let i=Math.max(0,d.start),o=Math.min(a.count,d.start+d.count);i<o;i+=3){r=Hs(this,s,e,n,c,l,u,i,i+1,i+2),r&&(r.faceIndex=Math.floor(i/3),t.push(r))}}}}function Hs(e,t,n,r,i,s,o,a,c,l){e.getVertexPosition(a,Bs),e.getVertexPosition(c,Ps),e.getVertexPosition(l,Ds);const u=function(e,t,n,r,i,s,o,a){let c;if(c=t.side===m?r.intersectTriangle(o,s,i,!0,a):r.intersectTriangle(i,s,o,t.side===f,a),null===c)return null;Vs.copy(a),Vs.applyMatrix4(e.matrixWorld);const l=n.ray.origin.distanceTo(Vs);return l<n.near||l>n.far?null:{distance:l,point:Vs.clone(),object:e}}(e,t,n,r,Bs,Ps,Ds,js);if(u){i&&(Ns.fromBufferAttribute(i,a),Fs.fromBufferAttribute(i,c),Us.fromBufferAttribute(i,l),u.uv=Wi.getInterpolation(js,Bs,Ps,Ds,Ns,Fs,Us,new er)),s&&(Ns.fromBufferAttribute(s,a),Fs.fromBufferAttribute(s,c),Us.fromBufferAttribute(s,l),u.uv1=Wi.getInterpolation(js,Bs,Ps,Ds,Ns,Fs,Us,new er)),o&&(ks.fromBufferAttribute(o,a),zs.fromBufferAttribute(o,c),Gs.fromBufferAttribute(o,l),u.normal=Wi.getInterpolation(js,Bs,Ps,Ds,ks,zs,Gs,new Pr),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const e={a,b:c,c:l,normal:new Pr,materialIndex:0};Wi.getNormal(Bs,Ps,Ds,e.normal),u.face=e}return u}class Ws extends Ss{constructor(e=1,t=1,n=1,r=1,i=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:i,depthSegments:s};const o=this;r=Math.floor(r),i=Math.floor(i),s=Math.floor(s);const a=[],c=[],l=[],u=[];let h=0,d=0;function p(e,t,n,r,i,s,p,f,m,g,A){const y=s/m,_=p/g,v=s/2,b=p/2,x=f/2,w=m+1,E=g+1;let T=0,S=0;const M=new Pr;for(let s=0;s<E;s++){const o=s*_-b;for(let a=0;a<w;a++){const h=a*y-v;M[e]=h*r,M[t]=o*i,M[n]=x,c.push(M.x,M.y,M.z),M[e]=0,M[t]=0,M[n]=f>0?1:-1,l.push(M.x,M.y,M.z),u.push(a/m),u.push(1-s/g),T+=1}}for(let e=0;e<g;e++)for(let t=0;t<m;t++){const n=h+t+w*e,r=h+t+w*(e+1),i=h+(t+1)+w*(e+1),s=h+(t+1)+w*e;a.push(n,r,s),a.push(r,i,s),S+=6}o.addGroup(d,S,A),d+=S,h+=T}p("z","y","x",-1,-1,n,t,e,s,i,0),p("z","y","x",1,-1,n,t,-e,s,i,1),p("x","z","y",1,1,e,n,t,r,s,2),p("x","z","y",1,-1,e,n,-t,r,s,3),p("x","y","z",1,-1,e,t,n,r,i,4),p("x","y","z",-1,-1,e,t,-n,r,i,5),this.setIndex(a),this.setAttribute("position",new ys(c,3)),this.setAttribute("normal",new ys(l,3)),this.setAttribute("uv",new ys(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ws(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function qs(e){const t={};for(const n in e){t[n]={};for(const r in e[n]){const i=e[n][r];i&&(i.isColor||i.isMatrix3||i.isMatrix4||i.isVector2||i.isVector3||i.isVector4||i.isTexture||i.isQuaternion)?i.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),t[n][r]=null):t[n][r]=i.clone():Array.isArray(i)?t[n][r]=i.slice():t[n][r]=i}}return t}function Xs(e){const t={};for(let n=0;n<e.length;n++){const r=qs(e[n]);for(const e in r)t[e]=r[e]}return t}function Ks(e){const t=e.getRenderTarget();return null===t?e.outputColorSpace:!0===t.isXRRenderTarget?t.texture.colorSpace:fr.workingColorSpace}const Ys={clone:qs,merge:Xs};class Js extends es{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==e&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=qs(e.uniforms),this.uniformsGroups=function(e){const t=[];for(let n=0;n<e.length;n++)t.push(e[n].clone());return t}(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const n in this.uniforms){const r=this.uniforms[n].value;r&&r.isTexture?t.uniforms[n]={type:"t",value:r.toJSON(e).uuid}:r&&r.isColor?t.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?t.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?t.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?t.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?t.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?t.uniforms[n]={type:"m4",value:r.toArray()}:t.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const e in this.extensions)!0===this.extensions[e]&&(n[e]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class $s extends Li{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new ci,this.projectionMatrix=new ci,this.projectionMatrixInverse=new ci,this.coordinateSystem=zn}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Zs=new Pr,eo=new er,to=new er;class no extends $s{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=null===e.view?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=2*Wn*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(.5*Hn*this.fov);return.5*this.getFilmHeight()/e}getEffectiveFOV(){return 2*Wn*Math.atan(Math.tan(.5*Hn*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){Zs.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Zs.x,Zs.y).multiplyScalar(-e/Zs.z),Zs.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(Zs.x,Zs.y).multiplyScalar(-e/Zs.z)}getViewSize(e,t){return this.getViewBounds(e,eo,to),t.subVectors(to,eo)}setViewOffset(e,t,n,r,i,s){this.aspect=e/t,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(.5*Hn*this.fov)/this.zoom,n=2*t,r=this.aspect*n,i=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const e=s.fullWidth,o=s.fullHeight;i+=s.offsetX*r/e,t-=s.offsetY*n/o,r*=s.width/e,n*=s.height/o}const o=this.filmOffset;0!==o&&(i+=e*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(i,i+r,t,t-n,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,null!==this.view&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const ro=-90;class io extends Li{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new no(ro,1,e,t);r.layers=this.layers,this.add(r);const i=new no(ro,1,e,t);i.layers=this.layers,this.add(i);const s=new no(ro,1,e,t);s.layers=this.layers,this.add(s);const o=new no(ro,1,e,t);o.layers=this.layers,this.add(o);const a=new no(ro,1,e,t);a.layers=this.layers,this.add(a);const c=new no(ro,1,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,i,s,o,a]=t;for(const e of t)this.remove(e);if(e===zn)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),i.up.set(0,0,-1),i.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(e!==Gn)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),i.up.set(0,0,1),i.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const e of t)this.add(e),e.updateMatrixWorld()}update(e,t){null===this.parent&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[i,s,o,a,c,l]=this.children,u=e.getRenderTarget(),h=e.getActiveCubeFace(),d=e.getActiveMipmapLevel(),p=e.xr.enabled;e.xr.enabled=!1;const f=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,i),e.setRenderTarget(n,1,r),e.render(t,s),e.setRenderTarget(n,2,r),e.render(t,o),e.setRenderTarget(n,3,r),e.render(t,a),e.setRenderTarget(n,4,r),e.render(t,c),n.texture.generateMipmaps=f,e.setRenderTarget(n,5,r),e.render(t,l),e.setRenderTarget(u,h,d),e.xr.enabled=p,n.texture.needsPMREMUpdate=!0}}class so extends wr{constructor(e,t,n,r,i,s,o,a,c,l){super(e=void 0!==e?e:[],t=void 0!==t?t:he,n,r,i,s,o,a,c,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class oo extends Sr{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new so(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==t.generateMipmaps&&t.generateMipmaps,this.texture.minFilter=void 0!==t.minFilter?t.minFilter:Ee}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},r=new Ws(5,5,5),i=new Js({name:"CubemapFromEquirect",uniforms:qs(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:A});i.uniforms.tEquirect.value=t;const s=new Qs(r,i),o=t.minFilter;t.minFilter===Me&&(t.minFilter=Ee);return new io(1,10,this).update(e,s),t.minFilter=o,s.geometry.dispose(),s.material.dispose(),this}clear(e,t,n,r){const i=e.getRenderTarget();for(let i=0;i<6;i++)e.setRenderTarget(this,i),e.clear(t,n,r);e.setRenderTarget(i)}}const ao=new Pr,co=new Pr,lo=new tr;class uo{constructor(e=new Pr(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=ao.subVectors(n,t).cross(co.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(ao),r=this.normal.dot(n);if(0===r)return 0===this.distanceToPoint(e.start)?t.copy(e.start):null;const i=-(e.start.dot(this.normal)+this.constant)/r;return i<0||i>1?null:t.copy(e.start).addScaledVector(n,i)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||lo.getNormalMatrix(e),r=this.coplanarPoint(ao).applyMatrix4(e),i=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(i),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const ho=new Zr,po=new Pr;class fo{constructor(e=new uo,t=new uo,n=new uo,r=new uo,i=new uo,s=new uo){this.planes=[e,t,n,r,i,s]}set(e,t,n,r,i,s){const o=this.planes;return o[0].copy(e),o[1].copy(t),o[2].copy(n),o[3].copy(r),o[4].copy(i),o[5].copy(s),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=zn){const n=this.planes,r=e.elements,i=r[0],s=r[1],o=r[2],a=r[3],c=r[4],l=r[5],u=r[6],h=r[7],d=r[8],p=r[9],f=r[10],m=r[11],g=r[12],A=r[13],y=r[14],_=r[15];if(n[0].setComponents(a-i,h-c,m-d,_-g).normalize(),n[1].setComponents(a+i,h+c,m+d,_+g).normalize(),n[2].setComponents(a+s,h+l,m+p,_+A).normalize(),n[3].setComponents(a-s,h-l,m-p,_-A).normalize(),n[4].setComponents(a-o,h-u,m-f,_-y).normalize(),t===zn)n[5].setComponents(a+o,h+u,m+f,_+y).normalize();else{if(t!==Gn)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);n[5].setComponents(o,u,f,y).normalize()}return this}intersectsObject(e){if(void 0!==e.boundingSphere)null===e.boundingSphere&&e.computeBoundingSphere(),ho.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;null===t.boundingSphere&&t.computeBoundingSphere(),ho.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ho)}intersectsSprite(e){return ho.center.set(0,0,0),ho.radius=.7071067811865476,ho.applyMatrix4(e.matrixWorld),this.intersectsSphere(ho)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let e=0;e<6;e++){if(t[e].distanceToPoint(n)<r)return!1}return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(po.x=r.normal.x>0?e.max.x:e.min.x,po.y=r.normal.y>0?e.max.y:e.min.y,po.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(po)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}function mo(){let e=null,t=!1,n=null,r=null;function i(t,s){n(t,s),r=e.requestAnimationFrame(i)}return{start:function(){!0!==t&&null!==n&&(r=e.requestAnimationFrame(i),t=!0)},stop:function(){e.cancelAnimationFrame(r),t=!1},setAnimationLoop:function(e){n=e},setContext:function(t){e=t}}}function go(e){const t=new WeakMap;return{get:function(e){return e.isInterleavedBufferAttribute&&(e=e.data),t.get(e)},remove:function(n){n.isInterleavedBufferAttribute&&(n=n.data);const r=t.get(n);r&&(e.deleteBuffer(r.buffer),t.delete(n))},update:function(n,r){if(n.isGLBufferAttribute){const e=t.get(n);return void((!e||e.version<n.version)&&t.set(n,{buffer:n.buffer,type:n.type,bytesPerElement:n.elementSize,version:n.version}))}n.isInterleavedBufferAttribute&&(n=n.data);const i=t.get(n);if(void 0===i)t.set(n,function(t,n){const r=t.array,i=t.usage,s=r.byteLength,o=e.createBuffer();let a;if(e.bindBuffer(n,o),e.bufferData(n,r,i),t.onUploadCallback(),r instanceof Float32Array)a=e.FLOAT;else if(r instanceof Uint16Array)a=t.isFloat16BufferAttribute?e.HALF_FLOAT:e.UNSIGNED_SHORT;else if(r instanceof Int16Array)a=e.SHORT;else if(r instanceof Uint32Array)a=e.UNSIGNED_INT;else if(r instanceof Int32Array)a=e.INT;else if(r instanceof Int8Array)a=e.BYTE;else if(r instanceof Uint8Array)a=e.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);a=e.UNSIGNED_BYTE}return{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:t.version,size:s}}(n,r));else if(i.version<n.version){if(i.size!==n.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(t,n,r){const i=n.array,s=n._updateRange,o=n.updateRanges;if(e.bindBuffer(r,t),-1===s.count&&0===o.length&&e.bufferSubData(r,0,i),0!==o.length){for(let t=0,n=o.length;t<n;t++){const n=o[t];e.bufferSubData(r,n.start*i.BYTES_PER_ELEMENT,i,n.start,n.count)}n.clearUpdateRanges()}-1!==s.count&&(e.bufferSubData(r,s.offset*i.BYTES_PER_ELEMENT,i,s.offset,s.count),s.count=-1),n.onUploadCallback()}(i.buffer,n,r),i.version=n.version}}}}class Ao extends Ss{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const i=e/2,s=t/2,o=Math.floor(n),a=Math.floor(r),c=o+1,l=a+1,u=e/o,h=t/a,d=[],p=[],f=[],m=[];for(let e=0;e<l;e++){const t=e*h-s;for(let n=0;n<c;n++){const r=n*u-i;p.push(r,-t,0),f.push(0,0,1),m.push(n/o),m.push(1-e/a)}}for(let e=0;e<a;e++)for(let t=0;t<o;t++){const n=t+c*e,r=t+c*(e+1),i=t+1+c*(e+1),s=t+1+c*e;d.push(n,r,s),d.push(r,i,s)}this.setIndex(d),this.setAttribute("position",new ys(p,3)),this.setAttribute("normal",new ys(f,3)),this.setAttribute("uv",new ys(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ao(e.width,e.height,e.widthSegments,e.heightSegments)}}const yo={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\tattribute float batchId;\n\tuniform highp sampler2D batchingTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( batchId );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( batchId );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat luminance( const in vec3 rgb ) {\n\tconst vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );\n\treturn dot( weights, rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"\nconst mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(\n\tvec3( 0.8224621, 0.177538, 0.0 ),\n\tvec3( 0.0331941, 0.9668058, 0.0 ),\n\tvec3( 0.0170827, 0.0723974, 0.9105199 )\n);\nconst mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.2249401, - 0.2249404, 0.0 ),\n\tvec3( - 0.0420569, 1.0420571, 0.0 ),\n\tvec3( - 0.0196376, - 0.0786361, 1.0982735 )\n);\nvec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );\n}\nvec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {\n\treturn vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );\n}\nvec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn sRGBTransferOETF( value );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );\n\t\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec2 packDepthToRG( in highp float v ) {\n\treturn packDepthToRGBA( v ).yx;\n}\nfloat unpackRGToDepth( const in highp vec2 v ) {\n\treturn unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t\n\t\t#else\n\t\t\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},_o={common:{diffuse:{value:new Ji(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new tr},alphaMap:{value:null},alphaMapTransform:{value:new tr},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new tr}},envmap:{envMap:{value:null},envMapRotation:{value:new tr},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new tr}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new tr}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new tr},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new tr},normalScale:{value:new er(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new tr},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new tr}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new tr}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new tr}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Ji(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Ji(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new tr},alphaTest:{value:0},uvTransform:{value:new tr}},sprite:{diffuse:{value:new Ji(16777215)},opacity:{value:1},center:{value:new er(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new tr},alphaMap:{value:null},alphaMapTransform:{value:new tr},alphaTest:{value:0}}},vo={basic:{uniforms:Xs([_o.common,_o.specularmap,_o.envmap,_o.aomap,_o.lightmap,_o.fog]),vertexShader:yo.meshbasic_vert,fragmentShader:yo.meshbasic_frag},lambert:{uniforms:Xs([_o.common,_o.specularmap,_o.envmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.fog,_o.lights,{emissive:{value:new Ji(0)}}]),vertexShader:yo.meshlambert_vert,fragmentShader:yo.meshlambert_frag},phong:{uniforms:Xs([_o.common,_o.specularmap,_o.envmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.fog,_o.lights,{emissive:{value:new Ji(0)},specular:{value:new Ji(1118481)},shininess:{value:30}}]),vertexShader:yo.meshphong_vert,fragmentShader:yo.meshphong_frag},standard:{uniforms:Xs([_o.common,_o.envmap,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.roughnessmap,_o.metalnessmap,_o.fog,_o.lights,{emissive:{value:new Ji(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:yo.meshphysical_vert,fragmentShader:yo.meshphysical_frag},toon:{uniforms:Xs([_o.common,_o.aomap,_o.lightmap,_o.emissivemap,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.gradientmap,_o.fog,_o.lights,{emissive:{value:new Ji(0)}}]),vertexShader:yo.meshtoon_vert,fragmentShader:yo.meshtoon_frag},matcap:{uniforms:Xs([_o.common,_o.bumpmap,_o.normalmap,_o.displacementmap,_o.fog,{matcap:{value:null}}]),vertexShader:yo.meshmatcap_vert,fragmentShader:yo.meshmatcap_frag},points:{uniforms:Xs([_o.points,_o.fog]),vertexShader:yo.points_vert,fragmentShader:yo.points_frag},dashed:{uniforms:Xs([_o.common,_o.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:yo.linedashed_vert,fragmentShader:yo.linedashed_frag},depth:{uniforms:Xs([_o.common,_o.displacementmap]),vertexShader:yo.depth_vert,fragmentShader:yo.depth_frag},normal:{uniforms:Xs([_o.common,_o.bumpmap,_o.normalmap,_o.displacementmap,{opacity:{value:1}}]),vertexShader:yo.meshnormal_vert,fragmentShader:yo.meshnormal_frag},sprite:{uniforms:Xs([_o.sprite,_o.fog]),vertexShader:yo.sprite_vert,fragmentShader:yo.sprite_frag},background:{uniforms:{uvTransform:{value:new tr},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:yo.background_vert,fragmentShader:yo.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new tr}},vertexShader:yo.backgroundCube_vert,fragmentShader:yo.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:yo.cube_vert,fragmentShader:yo.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:yo.equirect_vert,fragmentShader:yo.equirect_frag},distanceRGBA:{uniforms:Xs([_o.common,_o.displacementmap,{referencePosition:{value:new Pr},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:yo.distanceRGBA_vert,fragmentShader:yo.distanceRGBA_frag},shadow:{uniforms:Xs([_o.lights,_o.fog,{color:{value:new Ji(0)},opacity:{value:1}}]),vertexShader:yo.shadow_vert,fragmentShader:yo.shadow_frag}};vo.physical={uniforms:Xs([vo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new tr},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new tr},clearcoatNormalScale:{value:new er(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new tr},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new tr},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new tr},sheen:{value:0},sheenColor:{value:new Ji(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new tr},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new tr},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new tr},transmissionSamplerSize:{value:new er},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new tr},attenuationDistance:{value:0},attenuationColor:{value:new Ji(0)},specularColor:{value:new Ji(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new tr},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new tr},anisotropyVector:{value:new er},anisotropyMap:{value:null},anisotropyMapTransform:{value:new tr}}]),vertexShader:yo.meshphysical_vert,fragmentShader:yo.meshphysical_frag};const bo={r:0,b:0,g:0},xo=new yi,wo=new ci;function Eo(e,t,n,r,i,s,o){const a=new Ji(0);let c,l,u=!0===s?0:1,h=null,d=0,p=null;function g(e){let r=!0===e.isScene?e.background:null;if(r&&r.isTexture){r=(e.backgroundBlurriness>0?n:t).get(r)}return r}function A(t,n){t.getRGB(bo,Ks(e)),r.buffers.color.setClear(bo.r,bo.g,bo.b,n,o)}return{getClearColor:function(){return a},setClearColor:function(e,t=1){a.set(e),u=t,A(a,u)},getClearAlpha:function(){return u},setClearAlpha:function(e){u=e,A(a,u)},render:function(t){let n=!1;const i=g(t);null===i?A(a,u):i&&i.isColor&&(A(i,1),n=!0);const s=e.xr.getEnvironmentBlendMode();"additive"===s?r.buffers.color.setClear(0,0,0,1,o):"alpha-blend"===s&&r.buffers.color.setClear(0,0,0,0,o),(e.autoClear||n)&&(r.buffers.depth.setTest(!0),r.buffers.depth.setMask(!0),r.buffers.color.setMask(!0),e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil))},addToRenderList:function(t,n){const r=g(n);r&&(r.isCubeTexture||r.mapping===me)?(void 0===l&&(l=new Qs(new Ws(1,1,1),new Js({name:"BackgroundCubeMaterial",uniforms:qs(vo.backgroundCube.uniforms),vertexShader:vo.backgroundCube.vertexShader,fragmentShader:vo.backgroundCube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),l.geometry.deleteAttribute("normal"),l.geometry.deleteAttribute("uv"),l.onBeforeRender=function(e,t,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(l.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(l)),xo.copy(n.backgroundRotation),xo.x*=-1,xo.y*=-1,xo.z*=-1,r.isCubeTexture&&!1===r.isRenderTargetTexture&&(xo.y*=-1,xo.z*=-1),l.material.uniforms.envMap.value=r,l.material.uniforms.flipEnvMap.value=r.isCubeTexture&&!1===r.isRenderTargetTexture?-1:1,l.material.uniforms.backgroundBlurriness.value=n.backgroundBlurriness,l.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,l.material.uniforms.backgroundRotation.value.setFromMatrix4(wo.makeRotationFromEuler(xo)),l.material.toneMapped=fr.getTransfer(r.colorSpace)!==tn,h===r&&d===r.version&&p===e.toneMapping||(l.material.needsUpdate=!0,h=r,d=r.version,p=e.toneMapping),l.layers.enableAll(),t.unshift(l,l.geometry,l.material,0,0,null)):r&&r.isTexture&&(void 0===c&&(c=new Qs(new Ao(2,2),new Js({name:"BackgroundMaterial",uniforms:qs(vo.background.uniforms),vertexShader:vo.background.vertexShader,fragmentShader:vo.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(c)),c.material.uniforms.t2D.value=r,c.material.uniforms.backgroundIntensity.value=n.backgroundIntensity,c.material.toneMapped=fr.getTransfer(r.colorSpace)!==tn,!0===r.matrixAutoUpdate&&r.updateMatrix(),c.material.uniforms.uvTransform.value.copy(r.matrix),h===r&&d===r.version&&p===e.toneMapping||(c.material.needsUpdate=!0,h=r,d=r.version,p=e.toneMapping),c.layers.enableAll(),t.unshift(c,c.geometry,c.material,0,0,null))}}}function To(e,t){const n=e.getParameter(e.MAX_VERTEX_ATTRIBS),r={},i=l(null);let s=i,o=!1;function a(t){return e.bindVertexArray(t)}function c(t){return e.deleteVertexArray(t)}function l(e){const t=[],r=[],i=[];for(let e=0;e<n;e++)t[e]=0,r[e]=0,i[e]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:t,enabledAttributes:r,attributeDivisors:i,object:e,attributes:{},index:null}}function u(){const e=s.newAttributes;for(let t=0,n=e.length;t<n;t++)e[t]=0}function h(e){d(e,0)}function d(t,n){const r=s.newAttributes,i=s.enabledAttributes,o=s.attributeDivisors;r[t]=1,0===i[t]&&(e.enableVertexAttribArray(t),i[t]=1),o[t]!==n&&(e.vertexAttribDivisor(t,n),o[t]=n)}function p(){const t=s.newAttributes,n=s.enabledAttributes;for(let r=0,i=n.length;r<i;r++)n[r]!==t[r]&&(e.disableVertexAttribArray(r),n[r]=0)}function f(t,n,r,i,s,o,a){!0===a?e.vertexAttribIPointer(t,n,r,s,o):e.vertexAttribPointer(t,n,r,i,s,o)}function m(){g(),o=!0,s!==i&&(s=i,a(s.object))}function g(){i.geometry=null,i.program=null,i.wireframe=!1}return{setup:function(n,i,c,m,g){let A=!1;const y=function(t,n,i){const s=!0===i.wireframe;let o=r[t.id];void 0===o&&(o={},r[t.id]=o);let a=o[n.id];void 0===a&&(a={},o[n.id]=a);let c=a[s];void 0===c&&(c=l(e.createVertexArray()),a[s]=c);return c}(m,c,i);s!==y&&(s=y,a(s.object)),A=function(e,t,n,r){const i=s.attributes,o=t.attributes;let a=0;const c=n.getAttributes();for(const t in c){if(c[t].location>=0){const n=i[t];let r=o[t];if(void 0===r&&("instanceMatrix"===t&&e.instanceMatrix&&(r=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(r=e.instanceColor)),void 0===n)return!0;if(n.attribute!==r)return!0;if(r&&n.data!==r.data)return!0;a++}}return s.attributesNum!==a||s.index!==r}(n,m,c,g),A&&function(e,t,n,r){const i={},o=t.attributes;let a=0;const c=n.getAttributes();for(const t in c){if(c[t].location>=0){let n=o[t];void 0===n&&("instanceMatrix"===t&&e.instanceMatrix&&(n=e.instanceMatrix),"instanceColor"===t&&e.instanceColor&&(n=e.instanceColor));const r={};r.attribute=n,n&&n.data&&(r.data=n.data),i[t]=r,a++}}s.attributes=i,s.attributesNum=a,s.index=r}(n,m,c,g),null!==g&&t.update(g,e.ELEMENT_ARRAY_BUFFER),(A||o)&&(o=!1,function(n,r,i,s){u();const o=s.attributes,a=i.getAttributes(),c=r.defaultAttributeValues;for(const r in a){const i=a[r];if(i.location>=0){let a=o[r];if(void 0===a&&("instanceMatrix"===r&&n.instanceMatrix&&(a=n.instanceMatrix),"instanceColor"===r&&n.instanceColor&&(a=n.instanceColor)),void 0!==a){const r=a.normalized,o=a.itemSize,c=t.get(a);if(void 0===c)continue;const l=c.buffer,u=c.type,p=c.bytesPerElement,m=u===e.INT||u===e.UNSIGNED_INT||a.gpuType===De;if(a.isInterleavedBufferAttribute){const t=a.data,c=t.stride,g=a.offset;if(t.isInstancedInterleavedBuffer){for(let e=0;e<i.locationSize;e++)d(i.location+e,t.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=t.meshPerAttribute*t.count)}else for(let e=0;e<i.locationSize;e++)h(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,l);for(let e=0;e<i.locationSize;e++)f(i.location+e,o/i.locationSize,u,r,c*p,(g+o/i.locationSize*e)*p,m)}else{if(a.isInstancedBufferAttribute){for(let e=0;e<i.locationSize;e++)d(i.location+e,a.meshPerAttribute);!0!==n.isInstancedMesh&&void 0===s._maxInstanceCount&&(s._maxInstanceCount=a.meshPerAttribute*a.count)}else for(let e=0;e<i.locationSize;e++)h(i.location+e);e.bindBuffer(e.ARRAY_BUFFER,l);for(let e=0;e<i.locationSize;e++)f(i.location+e,o/i.locationSize,u,r,o*p,o/i.locationSize*e*p,m)}}else if(void 0!==c){const t=c[r];if(void 0!==t)switch(t.length){case 2:e.vertexAttrib2fv(i.location,t);break;case 3:e.vertexAttrib3fv(i.location,t);break;case 4:e.vertexAttrib4fv(i.location,t);break;default:e.vertexAttrib1fv(i.location,t)}}}}p()}(n,i,c,m),null!==g&&e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,t.get(g).buffer))},reset:m,resetDefaultState:g,dispose:function(){m();for(const e in r){const t=r[e];for(const e in t){const n=t[e];for(const e in n)c(n[e].object),delete n[e];delete t[e]}delete r[e]}},releaseStatesOfGeometry:function(e){if(void 0===r[e.id])return;const t=r[e.id];for(const e in t){const n=t[e];for(const e in n)c(n[e].object),delete n[e];delete t[e]}delete r[e.id]},releaseStatesOfProgram:function(e){for(const t in r){const n=r[t];if(void 0===n[e.id])continue;const i=n[e.id];for(const e in i)c(i[e].object),delete i[e];delete n[e.id]}},initAttributes:u,enableAttribute:h,disableUnusedAttributes:p}}function So(e,t,n){let r;function i(t,i,s){0!==s&&(e.drawArraysInstanced(r,t,i,s),n.update(i,r,s))}this.setMode=function(e){r=e},this.render=function(t,i){e.drawArrays(r,t,i),n.update(i,r,1)},this.renderInstances=i,this.renderMultiDraw=function(e,i,s){if(0===s)return;const o=t.get("WEBGL_multi_draw");if(null===o)for(let t=0;t<s;t++)this.render(e[t],i[t]);else{o.multiDrawArraysWEBGL(r,e,0,i,0,s);let t=0;for(let e=0;e<s;e++)t+=i[e];n.update(t,r,1)}},this.renderMultiDrawInstances=function(e,s,o,a){if(0===o)return;const c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<e.length;t++)i(e[t],s[t],a[t]);else{c.multiDrawArraysInstancedWEBGL(r,e,0,s,0,a,0,o);let t=0;for(let e=0;e<o;e++)t+=s[e];for(let e=0;e<a.length;e++)n.update(t,r,a[e])}}}function Mo(e,t,n,r){let i;function s(t){if("highp"===t){if(e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.HIGH_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision>0)return"highp";t="mediump"}return"mediump"===t&&e.getShaderPrecisionFormat(e.VERTEX_SHADER,e.MEDIUM_FLOAT).precision>0&&e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let o=void 0!==n.precision?n.precision:"highp";const a=s(o);a!==o&&(console.warn("THREE.WebGLRenderer:",o,"not supported, using",a,"instead."),o=a);const c=!0===n.logarithmicDepthBuffer,l=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),u=e.getParameter(e.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==i)return i;if(!0===t.has("EXT_texture_filter_anisotropic")){const n=t.get("EXT_texture_filter_anisotropic");i=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i},getMaxPrecision:s,textureFormatReadable:function(t){return t===Ve||r.convert(t)===e.getParameter(e.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(n){const i=n===Ne&&(t.has("EXT_color_buffer_half_float")||t.has("EXT_color_buffer_float"));return!(n!==Ie&&r.convert(n)!==e.getParameter(e.IMPLEMENTATION_COLOR_READ_TYPE)&&n!==Le&&!i)},precision:o,logarithmicDepthBuffer:c,maxTextures:l,maxVertexTextures:u,maxTextureSize:e.getParameter(e.MAX_TEXTURE_SIZE),maxCubemapSize:e.getParameter(e.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:e.getParameter(e.MAX_VERTEX_ATTRIBS),maxVertexUniforms:e.getParameter(e.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:e.getParameter(e.MAX_VARYING_VECTORS),maxFragmentUniforms:e.getParameter(e.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:u>0,maxSamples:e.getParameter(e.MAX_SAMPLES)}}function Co(e){const t=this;let n=null,r=0,i=!1,s=!1;const o=new uo,a=new tr,c={value:null,needsUpdate:!1};function l(e,n,r,i){const s=null!==e?e.length:0;let l=null;if(0!==s){if(l=c.value,!0!==i||null===l){const t=r+4*s,i=n.matrixWorldInverse;a.getNormalMatrix(i),(null===l||l.length<t)&&(l=new Float32Array(t));for(let t=0,n=r;t!==s;++t,n+=4)o.copy(e[t]).applyMatrix4(i,a),o.normal.toArray(l,n),l[n+3]=o.constant}c.value=l,c.needsUpdate=!0}return t.numPlanes=s,t.numIntersection=0,l}this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(e,t){const n=0!==e.length||t||0!==r||i;return i=t,r=e.length,n},this.beginShadows=function(){s=!0,l(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(e,t){n=l(e,t,0)},this.setState=function(o,a,u){const h=o.clippingPlanes,d=o.clipIntersection,p=o.clipShadows,f=e.get(o);if(!i||null===h||0===h.length||s&&!p)s?l(null):function(){c.value!==n&&(c.value=n,c.needsUpdate=r>0);t.numPlanes=r,t.numIntersection=0}();else{const e=s?0:r,t=4*e;let i=f.clippingState||null;c.value=i,i=l(h,a,t,u);for(let e=0;e!==t;++e)i[e]=n[e];f.clippingState=i,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=e}}}function Io(e){let t=new WeakMap;function n(e,t){return t===pe?e.mapping=he:t===fe&&(e.mapping=de),e}function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping;if(s===pe||s===fe){if(t.has(i)){return n(t.get(i).texture,i.mapping)}{const s=i.image;if(s&&s.height>0){const o=new oo(s.height);return o.fromEquirectangularTexture(e,i),t.set(i,o),i.addEventListener("dispose",r),n(o.texture,i.mapping)}return null}}}return i},dispose:function(){t=new WeakMap}}}class Ro extends $s{constructor(e=-1,t=1,n=1,r=-1,i=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=i,this.far=s,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=null===e.view?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,i,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=i,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let i=n-e,s=n+e,o=r+t,a=r-t;if(null!==this.view&&this.view.enabled){const e=(this.right-this.left)/this.view.fullWidth/this.zoom,t=(this.top-this.bottom)/this.view.fullHeight/this.zoom;i+=e*this.view.offsetX,s=i+e*this.view.width,o-=t*this.view.offsetY,a=o-t*this.view.height}this.projectionMatrix.makeOrthographic(i,s,o,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,null!==this.view&&(t.object.view=Object.assign({},this.view)),t}}const Bo=[.125,.215,.35,.446,.526,.582],Po=20,Do=new Ro,Oo=new Ji;let Lo=null,No=0,Fo=0,Uo=!1;const ko=(1+Math.sqrt(5))/2,zo=1/ko,Go=[new Pr(-ko,zo,0),new Pr(ko,zo,0),new Pr(-zo,0,ko),new Pr(zo,0,ko),new Pr(0,ko,-zo),new Pr(0,ko,zo),new Pr(-1,1,-1),new Pr(1,1,-1),new Pr(-1,1,1),new Pr(1,1,1)];class jo{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100){Lo=this._renderer.getRenderTarget(),No=this._renderer.getActiveCubeFace(),Fo=this._renderer.getActiveMipmapLevel(),Uo=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const i=this._allocateTargets();return i.depthBuffer=!0,this._sceneToCubeUV(e,n,r,i),t>0&&this._blur(i,0,0,t),this._applyPMREM(i),this._cleanup(i),i}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=Wo(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=Ho(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Lo,No,Fo),this._renderer.xr.enabled=Uo,e.scissorTest=!1,Qo(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===he||e.mapping===de?this._setSize(0===e.image.length?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Lo=this._renderer.getRenderTarget(),No=this._renderer.getActiveCubeFace(),Fo=this._renderer.getActiveMipmapLevel(),Uo=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Ee,minFilter:Ee,generateMipmaps:!1,type:Ne,format:Ve,colorSpace:Jt,depthBuffer:!1},r=Vo(e,t,n);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=Vo(e,t,n);const{_lodMax:r}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(e){const t=[],n=[],r=[];let i=e;const s=e-4+1+Bo.length;for(let o=0;o<s;o++){const s=Math.pow(2,i);n.push(s);let a=1/s;o>e-4?a=Bo[o-e+4-1]:0===o&&(a=0),r.push(a);const c=1/(s-2),l=-c,u=1+c,h=[l,l,u,l,u,u,l,l,u,u,l,u],d=6,p=6,f=3,m=2,g=1,A=new Float32Array(f*p*d),y=new Float32Array(m*p*d),_=new Float32Array(g*p*d);for(let e=0;e<d;e++){const t=e%3*2/3-1,n=e>2?0:-1,r=[t,n,0,t+2/3,n,0,t+2/3,n+1,0,t,n,0,t+2/3,n+1,0,t,n+1,0];A.set(r,f*p*e),y.set(h,m*p*e);const i=[e,e,e,e,e,e];_.set(i,g*p*e)}const v=new Ss;v.setAttribute("position",new ls(A,f)),v.setAttribute("uv",new ls(y,m)),v.setAttribute("faceIndex",new ls(_,g)),t.push(v),i>4&&i--}return{lodPlanes:t,sizeLods:n,sigmas:r}}(r)),this._blurMaterial=function(e,t,n){const r=new Float32Array(Po),i=new Pr(0,1,0),s=new Js({name:"SphericalGaussianBlur",defines:{n:Po,CUBEUV_TEXEL_WIDTH:1/t,CUBEUV_TEXEL_HEIGHT:1/n,CUBEUV_MAX_MIP:`${e}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:r},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:i}},vertexShader:qo(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:A,depthTest:!1,depthWrite:!1});return s}(r,e,t)}return r}_compileMaterial(e){const t=new Qs(this._lodPlanes[0],e);this._renderer.compile(t,Do)}_sceneToCubeUV(e,t,n,r){const i=new no(90,1,t,n),s=[1,-1,1,1,1,1],o=[1,1,1,-1,-1,-1],a=this._renderer,c=a.autoClear,l=a.toneMapping;a.getClearColor(Oo),a.toneMapping=ee,a.autoClear=!1;const u=new ts({name:"PMREM.Background",side:m,depthWrite:!1,depthTest:!1}),h=new Qs(new Ws,u);let d=!1;const p=e.background;p?p.isColor&&(u.color.copy(p),e.background=null,d=!0):(u.color.copy(Oo),d=!0);for(let t=0;t<6;t++){const n=t%3;0===n?(i.up.set(0,s[t],0),i.lookAt(o[t],0,0)):1===n?(i.up.set(0,0,s[t]),i.lookAt(0,o[t],0)):(i.up.set(0,s[t],0),i.lookAt(0,0,o[t]));const c=this._cubeSize;Qo(r,n*c,t>2?c:0,c,c),a.setRenderTarget(r),d&&a.render(h,i),a.render(e,i)}h.geometry.dispose(),h.material.dispose(),a.toneMapping=l,a.autoClear=c,e.background=p}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===he||e.mapping===de;r?(null===this._cubemapMaterial&&(this._cubemapMaterial=Wo()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===e.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=Ho());const i=r?this._cubemapMaterial:this._equirectMaterial,s=new Qs(this._lodPlanes[0],i);i.uniforms.envMap.value=e;const o=this._cubeSize;Qo(t,0,0,3*o,2*o),n.setRenderTarget(t),n.render(s,Do)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let t=1;t<r;t++){const n=Math.sqrt(this._sigmas[t]*this._sigmas[t]-this._sigmas[t-1]*this._sigmas[t-1]),i=Go[(r-t-1)%Go.length];this._blur(e,t-1,t,n,i)}t.autoClear=n}_blur(e,t,n,r,i){const s=this._pingPongRenderTarget;this._halfBlur(e,s,t,n,r,"latitudinal",i),this._halfBlur(s,e,n,n,r,"longitudinal",i)}_halfBlur(e,t,n,r,i,s,o){const a=this._renderer,c=this._blurMaterial;"latitudinal"!==s&&"longitudinal"!==s&&console.error("blur direction must be either latitudinal or longitudinal!");const l=new Qs(this._lodPlanes[r],c),u=c.uniforms,h=this._sizeLods[n]-1,d=isFinite(i)?Math.PI/(2*h):2*Math.PI/39,p=i/d,f=isFinite(i)?1+Math.floor(3*p):Po;f>Po&&console.warn(`sigmaRadians, ${i}, is too large and will clip, as it requested ${f} samples when the maximum is set to 20`);const m=[];let g=0;for(let e=0;e<Po;++e){const t=e/p,n=Math.exp(-t*t/2);m.push(n),0===e?g+=n:e<f&&(g+=2*n)}for(let e=0;e<m.length;e++)m[e]=m[e]/g;u.envMap.value=e.texture,u.samples.value=f,u.weights.value=m,u.latitudinal.value="latitudinal"===s,o&&(u.poleAxis.value=o);const{_lodMax:A}=this;u.dTheta.value=d,u.mipInt.value=A-n;const y=this._sizeLods[r];Qo(t,3*y*(r>A-4?r-A+4:0),4*(this._cubeSize-y),3*y,2*y),a.setRenderTarget(t),a.render(l,Do)}}function Vo(e,t,n){const r=new Sr(e,t,n);return r.texture.mapping=me,r.texture.name="PMREM.cubeUv",r.scissorTest=!0,r}function Qo(e,t,n,r,i){e.viewport.set(t,n,r,i),e.scissor.set(t,n,r,i)}function Ho(){return new Js({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:qo(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:A,depthTest:!1,depthWrite:!1})}function Wo(){return new Js({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:qo(),fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:A,depthTest:!1,depthWrite:!1})}function qo(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Xo(e){let t=new WeakMap,n=null;function r(e){const n=e.target;n.removeEventListener("dispose",r);const i=t.get(n);void 0!==i&&(t.delete(n),i.dispose())}return{get:function(i){if(i&&i.isTexture){const s=i.mapping,o=s===pe||s===fe,a=s===he||s===de;if(o||a){let s=t.get(i);const c=void 0!==s?s.texture.pmremVersion:0;if(i.isRenderTargetTexture&&i.pmremVersion!==c)return null===n&&(n=new jo(e)),s=o?n.fromEquirectangular(i,s):n.fromCubemap(i,s),s.texture.pmremVersion=i.pmremVersion,t.set(i,s),s.texture;if(void 0!==s)return s.texture;{const c=i.image;return o&&c&&c.height>0||a&&c&&function(e){let t=0;const n=6;for(let r=0;r<n;r++)void 0!==e[r]&&t++;return t===n}(c)?(null===n&&(n=new jo(e)),s=o?n.fromEquirectangular(i):n.fromCubemap(i),s.texture.pmremVersion=i.pmremVersion,t.set(i,s),i.addEventListener("dispose",r),s.texture):null}}}return i},dispose:function(){t=new WeakMap,null!==n&&(n.dispose(),n=null)}}}function Ko(e){const t={};function n(n){if(void 0!==t[n])return t[n];let r;switch(n){case"WEBGL_depth_texture":r=e.getExtension("WEBGL_depth_texture")||e.getExtension("MOZ_WEBGL_depth_texture")||e.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=e.getExtension("WEBGL_compressed_texture_s3tc")||e.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=e.getExtension(n)}return t[n]=r,r}return{has:function(e){return null!==n(e)},init:function(){n("EXT_color_buffer_float"),n("WEBGL_clip_cull_distance"),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float"),n("WEBGL_multisampled_render_to_texture"),n("WEBGL_render_shared_exponent")},get:function(e){const t=n(e);return null===t&&lr("THREE.WebGLRenderer: "+e+" extension not supported."),t}}}function Yo(e,t,n,r){const i={},s=new WeakMap;function o(e){const a=e.target;null!==a.index&&t.remove(a.index);for(const e in a.attributes)t.remove(a.attributes[e]);for(const e in a.morphAttributes){const n=a.morphAttributes[e];for(let e=0,r=n.length;e<r;e++)t.remove(n[e])}a.removeEventListener("dispose",o),delete i[a.id];const c=s.get(a);c&&(t.remove(c),s.delete(a)),r.releaseStatesOfGeometry(a),!0===a.isInstancedBufferGeometry&&delete a._maxInstanceCount,n.memory.geometries--}function a(e){const n=[],r=e.index,i=e.attributes.position;let o=0;if(null!==r){const e=r.array;o=r.version;for(let t=0,r=e.length;t<r;t+=3){const r=e[t+0],i=e[t+1],s=e[t+2];n.push(r,i,i,s,s,r)}}else{if(void 0===i)return;{const e=i.array;o=i.version;for(let t=0,r=e.length/3-1;t<r;t+=3){const e=t+0,r=t+1,i=t+2;n.push(e,r,r,i,i,e)}}}const a=new(rr(n)?gs:fs)(n,1);a.version=o;const c=s.get(e);c&&t.remove(c),s.set(e,a)}return{get:function(e,t){return!0===i[t.id]||(t.addEventListener("dispose",o),i[t.id]=!0,n.memory.geometries++),t},update:function(n){const r=n.attributes;for(const n in r)t.update(r[n],e.ARRAY_BUFFER);const i=n.morphAttributes;for(const n in i){const r=i[n];for(let n=0,i=r.length;n<i;n++)t.update(r[n],e.ARRAY_BUFFER)}},getWireframeAttribute:function(e){const t=s.get(e);if(t){const n=e.index;null!==n&&t.version<n.version&&a(e)}else a(e);return s.get(e)}}}function Jo(e,t,n){let r,i,s;function o(t,o,a){0!==a&&(e.drawElementsInstanced(r,o,i,t*s,a),n.update(o,r,a))}this.setMode=function(e){r=e},this.setIndex=function(e){i=e.type,s=e.bytesPerElement},this.render=function(t,o){e.drawElements(r,o,i,t*s),n.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(e,o,a){if(0===a)return;const c=t.get("WEBGL_multi_draw");if(null===c)for(let t=0;t<a;t++)this.render(e[t]/s,o[t]);else{c.multiDrawElementsWEBGL(r,o,0,i,e,0,a);let t=0;for(let e=0;e<a;e++)t+=o[e];n.update(t,r,1)}},this.renderMultiDrawInstances=function(e,a,c,l){if(0===c)return;const u=t.get("WEBGL_multi_draw");if(null===u)for(let t=0;t<e.length;t++)o(e[t]/s,a[t],l[t]);else{u.multiDrawElementsInstancedWEBGL(r,a,0,i,e,0,l,0,c);let t=0;for(let e=0;e<c;e++)t+=a[e];for(let e=0;e<l.length;e++)n.update(t,r,l[e])}}}function $o(e){const t={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:t,programs:null,autoReset:!0,reset:function(){t.calls=0,t.triangles=0,t.points=0,t.lines=0},update:function(n,r,i){switch(t.calls++,r){case e.TRIANGLES:t.triangles+=i*(n/3);break;case e.LINES:t.lines+=i*(n/2);break;case e.LINE_STRIP:t.lines+=i*(n-1);break;case e.LINE_LOOP:t.lines+=i*n;break;case e.POINTS:t.points+=i*n;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function Zo(e,t,n){const r=new WeakMap,i=new Er;return{update:function(s,o,a){const c=s.morphTargetInfluences,l=o.morphAttributes.position||o.morphAttributes.normal||o.morphAttributes.color,u=void 0!==l?l.length:0;let h=r.get(o);if(void 0===h||h.count!==u){void 0!==h&&h.texture.dispose();const d=void 0!==o.morphAttributes.position,p=void 0!==o.morphAttributes.normal,f=void 0!==o.morphAttributes.color,m=o.morphAttributes.position||[],g=o.morphAttributes.normal||[],A=o.morphAttributes.color||[];let y=0;!0===d&&(y=1),!0===p&&(y=2),!0===f&&(y=3);let _=o.attributes.position.count*y,v=1;_>t.maxTextureSize&&(v=Math.ceil(_/t.maxTextureSize),_=t.maxTextureSize);const b=new Float32Array(_*v*4*u),x=new Mr(b,_,v,u);x.type=Le,x.needsUpdate=!0;const w=4*y;for(let T=0;T<u;T++){const S=m[T],M=g[T],C=A[T],I=_*v*4*T;for(let R=0;R<S.count;R++){const B=R*w;!0===d&&(i.fromBufferAttribute(S,R),b[I+B+0]=i.x,b[I+B+1]=i.y,b[I+B+2]=i.z,b[I+B+3]=0),!0===p&&(i.fromBufferAttribute(M,R),b[I+B+4]=i.x,b[I+B+5]=i.y,b[I+B+6]=i.z,b[I+B+7]=0),!0===f&&(i.fromBufferAttribute(C,R),b[I+B+8]=i.x,b[I+B+9]=i.y,b[I+B+10]=i.z,b[I+B+11]=4===C.itemSize?i.w:1)}}function E(){x.dispose(),r.delete(o),o.removeEventListener("dispose",E)}h={count:u,texture:x,size:new er(_,v)},r.set(o,h),o.addEventListener("dispose",E)}if(!0===s.isInstancedMesh&&null!==s.morphTexture)a.getUniforms().setValue(e,"morphTexture",s.morphTexture,n);else{let P=0;for(let O=0;O<c.length;O++)P+=c[O];const D=o.morphTargetsRelative?1:1-P;a.getUniforms().setValue(e,"morphTargetBaseInfluence",D),a.getUniforms().setValue(e,"morphTargetInfluences",c)}a.getUniforms().setValue(e,"morphTargetsTexture",h.texture,n),a.getUniforms().setValue(e,"morphTargetsTextureSize",h.size)}}}function ea(e,t,n,r){let i=new WeakMap;function s(e){const t=e.target;t.removeEventListener("dispose",s),n.remove(t.instanceMatrix),null!==t.instanceColor&&n.remove(t.instanceColor)}return{update:function(o){const a=r.render.frame,c=o.geometry,l=t.get(o,c);if(i.get(l)!==a&&(t.update(l),i.set(l,a)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",s)&&o.addEventListener("dispose",s),i.get(o)!==a&&(n.update(o.instanceMatrix,e.ARRAY_BUFFER),null!==o.instanceColor&&n.update(o.instanceColor,e.ARRAY_BUFFER),i.set(o,a))),o.isSkinnedMesh){const e=o.skeleton;i.get(e)!==a&&(e.update(),i.set(e,a))}return l},dispose:function(){i=new WeakMap}}}class ta extends wr{constructor(e,t,n,r,i,s,o,a,c,l=We){if(l!==We&&l!==qe)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&l===We&&(n=Oe),void 0===n&&l===qe&&(n=ke),super(null,r,i,s,o,a,l,n,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=void 0!==o?o:_e,this.minFilter=void 0!==a?a:_e,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return null!==this.compareFunction&&(t.compareFunction=this.compareFunction),t}}const na=new wr,ra=new ta(1,1);ra.compareFunction=En;const ia=new Mr,sa=new Ir,oa=new so,aa=[],ca=[],la=new Float32Array(16),ua=new Float32Array(9),ha=new Float32Array(4);function da(e,t,n){const r=e[0];if(r<=0||r>0)return e;const i=t*n;let s=aa[i];if(void 0===s&&(s=new Float32Array(i),aa[i]=s),0!==t){r.toArray(s,0);for(let r=1,i=0;r!==t;++r)i+=n,e[r].toArray(s,i)}return s}function pa(e,t){if(e.length!==t.length)return!1;for(let n=0,r=e.length;n<r;n++)if(e[n]!==t[n])return!1;return!0}function fa(e,t){for(let n=0,r=t.length;n<r;n++)e[n]=t[n]}function ma(e,t){let n=ca[t];void 0===n&&(n=new Int32Array(t),ca[t]=n);for(let r=0;r!==t;++r)n[r]=e.allocateTextureUnit();return n}function ga(e,t){const n=this.cache;n[0]!==t&&(e.uniform1f(this.addr,t),n[0]=t)}function Aa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2f(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(pa(n,t))return;e.uniform2fv(this.addr,t),fa(n,t)}}function ya(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3f(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else if(void 0!==t.r)n[0]===t.r&&n[1]===t.g&&n[2]===t.b||(e.uniform3f(this.addr,t.r,t.g,t.b),n[0]=t.r,n[1]=t.g,n[2]=t.b);else{if(pa(n,t))return;e.uniform3fv(this.addr,t),fa(n,t)}}function _a(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4f(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(pa(n,t))return;e.uniform4fv(this.addr,t),fa(n,t)}}function va(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(pa(n,t))return;e.uniformMatrix2fv(this.addr,!1,t),fa(n,t)}else{if(pa(n,r))return;ha.set(r),e.uniformMatrix2fv(this.addr,!1,ha),fa(n,r)}}function ba(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(pa(n,t))return;e.uniformMatrix3fv(this.addr,!1,t),fa(n,t)}else{if(pa(n,r))return;ua.set(r),e.uniformMatrix3fv(this.addr,!1,ua),fa(n,r)}}function xa(e,t){const n=this.cache,r=t.elements;if(void 0===r){if(pa(n,t))return;e.uniformMatrix4fv(this.addr,!1,t),fa(n,t)}else{if(pa(n,r))return;la.set(r),e.uniformMatrix4fv(this.addr,!1,la),fa(n,r)}}function wa(e,t){const n=this.cache;n[0]!==t&&(e.uniform1i(this.addr,t),n[0]=t)}function Ea(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2i(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(pa(n,t))return;e.uniform2iv(this.addr,t),fa(n,t)}}function Ta(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3i(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(pa(n,t))return;e.uniform3iv(this.addr,t),fa(n,t)}}function Sa(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4i(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(pa(n,t))return;e.uniform4iv(this.addr,t),fa(n,t)}}function Ma(e,t){const n=this.cache;n[0]!==t&&(e.uniform1ui(this.addr,t),n[0]=t)}function Ca(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y||(e.uniform2ui(this.addr,t.x,t.y),n[0]=t.x,n[1]=t.y);else{if(pa(n,t))return;e.uniform2uiv(this.addr,t),fa(n,t)}}function Ia(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z||(e.uniform3ui(this.addr,t.x,t.y,t.z),n[0]=t.x,n[1]=t.y,n[2]=t.z);else{if(pa(n,t))return;e.uniform3uiv(this.addr,t),fa(n,t)}}function Ra(e,t){const n=this.cache;if(void 0!==t.x)n[0]===t.x&&n[1]===t.y&&n[2]===t.z&&n[3]===t.w||(e.uniform4ui(this.addr,t.x,t.y,t.z,t.w),n[0]=t.x,n[1]=t.y,n[2]=t.z,n[3]=t.w);else{if(pa(n,t))return;e.uniform4uiv(this.addr,t),fa(n,t)}}function Ba(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i);const s=this.type===e.SAMPLER_2D_SHADOW?ra:na;n.setTexture2D(t||s,i)}function Pa(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture3D(t||sa,i)}function Da(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTextureCube(t||oa,i)}function Oa(e,t,n){const r=this.cache,i=n.allocateTextureUnit();r[0]!==i&&(e.uniform1i(this.addr,i),r[0]=i),n.setTexture2DArray(t||ia,i)}function La(e,t){e.uniform1fv(this.addr,t)}function Na(e,t){const n=da(t,this.size,2);e.uniform2fv(this.addr,n)}function Fa(e,t){const n=da(t,this.size,3);e.uniform3fv(this.addr,n)}function Ua(e,t){const n=da(t,this.size,4);e.uniform4fv(this.addr,n)}function ka(e,t){const n=da(t,this.size,4);e.uniformMatrix2fv(this.addr,!1,n)}function za(e,t){const n=da(t,this.size,9);e.uniformMatrix3fv(this.addr,!1,n)}function Ga(e,t){const n=da(t,this.size,16);e.uniformMatrix4fv(this.addr,!1,n)}function ja(e,t){e.uniform1iv(this.addr,t)}function Va(e,t){e.uniform2iv(this.addr,t)}function Qa(e,t){e.uniform3iv(this.addr,t)}function Ha(e,t){e.uniform4iv(this.addr,t)}function Wa(e,t){e.uniform1uiv(this.addr,t)}function qa(e,t){e.uniform2uiv(this.addr,t)}function Xa(e,t){e.uniform3uiv(this.addr,t)}function Ka(e,t){e.uniform4uiv(this.addr,t)}function Ya(e,t,n){const r=this.cache,i=t.length,s=ma(n,i);pa(r,s)||(e.uniform1iv(this.addr,s),fa(r,s));for(let e=0;e!==i;++e)n.setTexture2D(t[e]||na,s[e])}function Ja(e,t,n){const r=this.cache,i=t.length,s=ma(n,i);pa(r,s)||(e.uniform1iv(this.addr,s),fa(r,s));for(let e=0;e!==i;++e)n.setTexture3D(t[e]||sa,s[e])}function $a(e,t,n){const r=this.cache,i=t.length,s=ma(n,i);pa(r,s)||(e.uniform1iv(this.addr,s),fa(r,s));for(let e=0;e!==i;++e)n.setTextureCube(t[e]||oa,s[e])}function Za(e,t,n){const r=this.cache,i=t.length,s=ma(n,i);pa(r,s)||(e.uniform1iv(this.addr,s),fa(r,s));for(let e=0;e!==i;++e)n.setTexture2DArray(t[e]||ia,s[e])}class ec{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=function(e){switch(e){case 5126:return ga;case 35664:return Aa;case 35665:return ya;case 35666:return _a;case 35674:return va;case 35675:return ba;case 35676:return xa;case 5124:case 35670:return wa;case 35667:case 35671:return Ea;case 35668:case 35672:return Ta;case 35669:case 35673:return Sa;case 5125:return Ma;case 36294:return Ca;case 36295:return Ia;case 36296:return Ra;case 35678:case 36198:case 36298:case 36306:case 35682:return Ba;case 35679:case 36299:case 36307:return Pa;case 35680:case 36300:case 36308:case 36293:return Da;case 36289:case 36303:case 36311:case 36292:return Oa}}(t.type)}}class tc{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=function(e){switch(e){case 5126:return La;case 35664:return Na;case 35665:return Fa;case 35666:return Ua;case 35674:return ka;case 35675:return za;case 35676:return Ga;case 5124:case 35670:return ja;case 35667:case 35671:return Va;case 35668:case 35672:return Qa;case 35669:case 35673:return Ha;case 5125:return Wa;case 36294:return qa;case 36295:return Xa;case 36296:return Ka;case 35678:case 36198:case 36298:case 36306:case 35682:return Ya;case 35679:case 36299:case 36307:return Ja;case 35680:case 36300:case 36308:case 36293:return $a;case 36289:case 36303:case 36311:case 36292:return Za}}(t.type)}}class nc{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let i=0,s=r.length;i!==s;++i){const s=r[i];s.setValue(e,t[s.id],n)}}}const rc=/(\w+)(\])?(\[|\.)?/g;function ic(e,t){e.seq.push(t),e.map[t.id]=t}function sc(e,t,n){const r=e.name,i=r.length;for(rc.lastIndex=0;;){const s=rc.exec(r),o=rc.lastIndex;let a=s[1];const c="]"===s[2],l=s[3];if(c&&(a|=0),void 0===l||"["===l&&o+2===i){ic(n,void 0===l?new ec(a,e,t):new tc(a,e,t));break}{let e=n.map[a];void 0===e&&(e=new nc(a),ic(n,e)),n=e}}}class oc{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const n=e.getActiveUniform(t,r);sc(n,e.getUniformLocation(t,n.name),this)}}setValue(e,t,n,r){const i=this.map[t];void 0!==i&&i.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];void 0!==r&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let i=0,s=t.length;i!==s;++i){const s=t[i],o=n[s.id];!1!==o.needsUpdate&&s.setValue(e,o.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,i=e.length;r!==i;++r){const i=e[r];i.id in t&&n.push(i)}return n}}function ac(e,t,n){const r=e.createShader(t);return e.shaderSource(r,n),e.compileShader(r),r}let cc=0;function lc(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),i=e.getShaderInfoLog(t).trim();if(r&&""===i)return"";const s=/ERROR: 0:(\d+)/.exec(i);if(s){const r=parseInt(s[1]);return n.toUpperCase()+"\n\n"+i+"\n\n"+function(e,t){const n=e.split("\n"),r=[],i=Math.max(t-6,0),s=Math.min(t+6,n.length);for(let e=i;e<s;e++){const i=e+1;r.push(`${i===t?">":" "} ${i}: ${n[e]}`)}return r.join("\n")}(e.getShaderSource(t),r)}return i}function uc(e,t){const n=function(e){const t=fr.getPrimaries(fr.workingColorSpace),n=fr.getPrimaries(e);let r;switch(t===n?r="":t===rn&&n===nn?r="LinearDisplayP3ToLinearSRGB":t===nn&&n===rn&&(r="LinearSRGBToLinearDisplayP3"),e){case Jt:case Zt:return[r,"LinearTransferOETF"];case Yt:case $t:return[r,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",e),[r,"LinearTransferOETF"]}}(t);return`vec4 ${e}( vec4 value ) { return ${n[0]}( ${n[1]}( value ) ); }`}function hc(e,t){let n;switch(t){case te:n="Linear";break;case ne:n="Reinhard";break;case re:n="OptimizedCineon";break;case ie:n="ACESFilmic";break;case oe:n="AgX";break;case ae:n="Neutral";break;case se:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",t),n="Linear"}return"vec3 "+e+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function dc(e){return""!==e}function pc(e,t){const n=t.numSpotLightShadows+t.numSpotLightMaps-t.numSpotLightShadowsWithMaps;return e.replace(/NUM_DIR_LIGHTS/g,t.numDirLights).replace(/NUM_SPOT_LIGHTS/g,t.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,t.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,n).replace(/NUM_RECT_AREA_LIGHTS/g,t.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,t.numPointLights).replace(/NUM_HEMI_LIGHTS/g,t.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,t.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,t.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,t.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,t.numPointLightShadows)}function fc(e,t){return e.replace(/NUM_CLIPPING_PLANES/g,t.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,t.numClippingPlanes-t.numClipIntersection)}const mc=/^[ \t]*#include +<([\w\d./]+)>/gm;function gc(e){return e.replace(mc,yc)}const Ac=new Map;function yc(e,t){let n=yo[t];if(void 0===n){const e=Ac.get(t);if(void 0===e)throw new Error("Can not resolve #include <"+t+">");n=yo[e],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',t,e)}return gc(n)}const _c=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function vc(e){return e.replace(_c,bc)}function bc(e,t,n,r){let i="";for(let e=parseInt(t);e<parseInt(n);e++)i+=r.replace(/\[\s*i\s*\]/g,"[ "+e+" ]").replace(/UNROLLED_LOOP_INDEX/g,e);return i}function xc(e){let t=`precision ${e.precision} float;\n\tprecision ${e.precision} int;\n\tprecision ${e.precision} sampler2D;\n\tprecision ${e.precision} samplerCube;\n\tprecision ${e.precision} sampler3D;\n\tprecision ${e.precision} sampler2DArray;\n\tprecision ${e.precision} sampler2DShadow;\n\tprecision ${e.precision} samplerCubeShadow;\n\tprecision ${e.precision} sampler2DArrayShadow;\n\tprecision ${e.precision} isampler2D;\n\tprecision ${e.precision} isampler3D;\n\tprecision ${e.precision} isamplerCube;\n\tprecision ${e.precision} isampler2DArray;\n\tprecision ${e.precision} usampler2D;\n\tprecision ${e.precision} usampler3D;\n\tprecision ${e.precision} usamplerCube;\n\tprecision ${e.precision} usampler2DArray;\n\t`;return"highp"===e.precision?t+="\n#define HIGH_PRECISION":"mediump"===e.precision?t+="\n#define MEDIUM_PRECISION":"lowp"===e.precision&&(t+="\n#define LOW_PRECISION"),t}function wc(e,t,n,r){const i=e.getContext(),s=n.defines;let o=n.vertexShader,a=n.fragmentShader;const c=function(e){let t="SHADOWMAP_TYPE_BASIC";return e.shadowMapType===h?t="SHADOWMAP_TYPE_PCF":e.shadowMapType===d?t="SHADOWMAP_TYPE_PCF_SOFT":e.shadowMapType===p&&(t="SHADOWMAP_TYPE_VSM"),t}(n),l=function(e){let t="ENVMAP_TYPE_CUBE";if(e.envMap)switch(e.envMapMode){case he:case de:t="ENVMAP_TYPE_CUBE";break;case me:t="ENVMAP_TYPE_CUBE_UV"}return t}(n),u=function(e){let t="ENVMAP_MODE_REFLECTION";e.envMap&&e.envMapMode===de&&(t="ENVMAP_MODE_REFRACTION");return t}(n),f=function(e){let t="ENVMAP_BLENDING_NONE";if(e.envMap)switch(e.combine){case J:t="ENVMAP_BLENDING_MULTIPLY";break;case $:t="ENVMAP_BLENDING_MIX";break;case Z:t="ENVMAP_BLENDING_ADD"}return t}(n),m=function(e){const t=e.envMapCubeUVHeight;if(null===t)return null;const n=Math.log2(t)-2,r=1/t;return{texelWidth:1/(3*Math.max(Math.pow(2,n),112)),texelHeight:r,maxMip:n}}(n),g=function(e){return[e.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",e.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(dc).join("\n")}(n),A=function(e){const t=[];for(const n in e){const r=e[n];!1!==r&&t.push("#define "+n+" "+r)}return t.join("\n")}(s),y=i.createProgram();let _,v,b=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(_=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A].filter(dc).join("\n"),_.length>0&&(_+="\n"),v=["#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A].filter(dc).join("\n"),v.length>0&&(v+="\n")):(_=[xc(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A,n.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",n.batching?"#define USE_BATCHING":"",n.batchingColor?"#define USE_BATCHING_COLOR":"",n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.instancingMorph?"#define USE_INSTANCING_MORPH":"",n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.displacementMap?"#define USE_DISPLACEMENTMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.mapUv?"#define MAP_UV "+n.mapUv:"",n.alphaMapUv?"#define ALPHAMAP_UV "+n.alphaMapUv:"",n.lightMapUv?"#define LIGHTMAP_UV "+n.lightMapUv:"",n.aoMapUv?"#define AOMAP_UV "+n.aoMapUv:"",n.emissiveMapUv?"#define EMISSIVEMAP_UV "+n.emissiveMapUv:"",n.bumpMapUv?"#define BUMPMAP_UV "+n.bumpMapUv:"",n.normalMapUv?"#define NORMALMAP_UV "+n.normalMapUv:"",n.displacementMapUv?"#define DISPLACEMENTMAP_UV "+n.displacementMapUv:"",n.metalnessMapUv?"#define METALNESSMAP_UV "+n.metalnessMapUv:"",n.roughnessMapUv?"#define ROUGHNESSMAP_UV "+n.roughnessMapUv:"",n.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+n.anisotropyMapUv:"",n.clearcoatMapUv?"#define CLEARCOATMAP_UV "+n.clearcoatMapUv:"",n.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+n.clearcoatNormalMapUv:"",n.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+n.clearcoatRoughnessMapUv:"",n.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+n.iridescenceMapUv:"",n.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+n.iridescenceThicknessMapUv:"",n.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+n.sheenColorMapUv:"",n.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+n.sheenRoughnessMapUv:"",n.specularMapUv?"#define SPECULARMAP_UV "+n.specularMapUv:"",n.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+n.specularColorMapUv:"",n.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+n.specularIntensityMapUv:"",n.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+n.transmissionMapUv:"",n.thicknessMapUv?"#define THICKNESSMAP_UV "+n.thicknessMapUv:"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.morphColors?"#define USE_MORPHCOLORS":"",n.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+n.morphTextureStride:"",n.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+n.morphTargetsCount:"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(dc).join("\n"),v=[xc(n),"#define SHADER_TYPE "+n.shaderType,"#define SHADER_NAME "+n.shaderName,A,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+l:"",n.envMap?"#define "+u:"",n.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",n.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.anisotropy?"#define USE_ANISOTROPY":"",n.anisotropyMap?"#define USE_ANISOTROPYMAP":"",n.clearcoat?"#define USE_CLEARCOAT":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.dispersion?"#define USE_DISPERSION":"",n.iridescence?"#define USE_IRIDESCENCE":"",n.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",n.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",n.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.alphaTest?"#define USE_ALPHATEST":"",n.alphaHash?"#define USE_ALPHAHASH":"",n.sheen?"#define USE_SHEEN":"",n.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",n.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",n.transmission?"#define USE_TRANSMISSION":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.thicknessMap?"#define USE_THICKNESSMAP":"",n.vertexTangents&&!1===n.flatShading?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor||n.batchingColor?"#define USE_COLOR":"",n.vertexAlphas?"#define USE_COLOR_ALPHA":"",n.vertexUv1s?"#define USE_UV1":"",n.vertexUv2s?"#define USE_UV2":"",n.vertexUv3s?"#define USE_UV3":"",n.pointsUvs?"#define USE_POINTS_UV":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+c:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.numLightProbes>0?"#define USE_LIGHT_PROBES":"",n.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==ee?"#define TONE_MAPPING":"",n.toneMapping!==ee?yo.tonemapping_pars_fragment:"",n.toneMapping!==ee?hc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",n.opaque?"#define OPAQUE":"",yo.colorspace_pars_fragment,uc("linearToOutputTexel",n.outputColorSpace),n.useDepthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(dc).join("\n")),o=gc(o),o=pc(o,n),o=fc(o,n),a=gc(a),a=pc(a,n),a=fc(a,n),o=vc(o),a=vc(a),!0!==n.isRawShaderMaterial&&(b="#version 300 es\n",_=[g,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+_,v=["#define varying in",n.glslVersion===kn?"":"layout(location = 0) out highp vec4 pc_fragColor;",n.glslVersion===kn?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+v);const x=b+_+o,w=b+v+a,E=ac(i,i.VERTEX_SHADER,x),T=ac(i,i.FRAGMENT_SHADER,w);function S(t){if(e.debug.checkShaderErrors){const n=i.getProgramInfoLog(y).trim(),r=i.getShaderInfoLog(E).trim(),s=i.getShaderInfoLog(T).trim();let o=!0,a=!0;if(!1===i.getProgramParameter(y,i.LINK_STATUS))if(o=!1,"function"==typeof e.debug.onShaderError)e.debug.onShaderError(i,y,E,T);else{const e=lc(i,E,"vertex"),r=lc(i,T,"fragment");console.error("THREE.WebGLProgram: Shader Error "+i.getError()+" - VALIDATE_STATUS "+i.getProgramParameter(y,i.VALIDATE_STATUS)+"\n\nMaterial Name: "+t.name+"\nMaterial Type: "+t.type+"\n\nProgram Info Log: "+n+"\n"+e+"\n"+r)}else""!==n?console.warn("THREE.WebGLProgram: Program Info Log:",n):""!==r&&""!==s||(a=!1);a&&(t.diagnostics={runnable:o,programLog:n,vertexShader:{log:r,prefix:_},fragmentShader:{log:s,prefix:v}})}i.deleteShader(E),i.deleteShader(T),M=new oc(i,y),C=function(e,t){const n={},r=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<r;i++){const r=e.getActiveAttrib(t,i),s=r.name;let o=1;r.type===e.FLOAT_MAT2&&(o=2),r.type===e.FLOAT_MAT3&&(o=3),r.type===e.FLOAT_MAT4&&(o=4),n[s]={type:r.type,location:e.getAttribLocation(t,s),locationSize:o}}return n}(i,y)}let M,C;i.attachShader(y,E),i.attachShader(y,T),void 0!==n.index0AttributeName?i.bindAttribLocation(y,0,n.index0AttributeName):!0===n.morphTargets&&i.bindAttribLocation(y,0,"position"),i.linkProgram(y),this.getUniforms=function(){return void 0===M&&S(this),M},this.getAttributes=function(){return void 0===C&&S(this),C};let I=!1===n.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===I&&(I=i.getProgramParameter(y,37297)),I},this.destroy=function(){r.releaseStatesOfProgram(this),i.deleteProgram(y),this.program=void 0},this.type=n.shaderType,this.name=n.shaderName,this.id=cc++,this.cacheKey=t,this.usedTimes=1,this.program=y,this.vertexShader=E,this.fragmentShader=T,this}let Ec=0;class Tc{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),i=this._getShaderStage(n),s=this._getShaderCacheForMaterial(e);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(i)&&(s.add(i),i.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const e of t)e.usedTimes--,0===e.usedTimes&&this.shaderCache.delete(e.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return void 0===n&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return void 0===n&&(n=new Sc(e),t.set(e,n)),n}}class Sc{constructor(e){this.id=Ec++,this.code=e,this.usedTimes=0}}function Mc(e,t,n,r,i,s,o){const a=new _i,c=new Tc,l=new Set,u=[],h=i.logarithmicDepthBuffer,d=i.vertexTextures;let p=i.precision;const f={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function A(e){return l.add(e),0===e?"uv":`uv${e}`}return{getParameters:function(s,a,u,_,v){const b=_.fog,x=v.geometry,w=s.isMeshStandardMaterial?_.environment:null,E=(s.isMeshStandardMaterial?n:t).get(s.envMap||w),T=E&&E.mapping===me?E.image.height:null,S=f[s.type];null!==s.precision&&(p=i.getMaxPrecision(s.precision),p!==s.precision&&console.warn("THREE.WebGLProgram.getParameters:",s.precision,"not supported, using",p,"instead."));const M=x.morphAttributes.position||x.morphAttributes.normal||x.morphAttributes.color,C=void 0!==M?M.length:0;let I,R,B,P,D=0;if(void 0!==x.morphAttributes.position&&(D=1),void 0!==x.morphAttributes.normal&&(D=2),void 0!==x.morphAttributes.color&&(D=3),S){const e=vo[S];I=e.vertexShader,R=e.fragmentShader}else I=s.vertexShader,R=s.fragmentShader,c.update(s),B=c.getVertexShaderID(s),P=c.getFragmentShaderID(s);const O=e.getRenderTarget(),L=!0===v.isInstancedMesh,N=!0===v.isBatchedMesh,F=!!s.map,U=!!s.matcap,k=!!E,z=!!s.aoMap,G=!!s.lightMap,j=!!s.bumpMap,V=!!s.normalMap,Q=!!s.displacementMap,H=!!s.emissiveMap,W=!!s.metalnessMap,q=!!s.roughnessMap,X=s.anisotropy>0,K=s.clearcoat>0,Y=s.dispersion>0,J=s.iridescence>0,$=s.sheen>0,Z=s.transmission>0,te=X&&!!s.anisotropyMap,ne=K&&!!s.clearcoatMap,re=K&&!!s.clearcoatNormalMap,ie=K&&!!s.clearcoatRoughnessMap,se=J&&!!s.iridescenceMap,oe=J&&!!s.iridescenceThicknessMap,ae=$&&!!s.sheenColorMap,ce=$&&!!s.sheenRoughnessMap,le=!!s.specularMap,ue=!!s.specularColorMap,he=!!s.specularIntensityMap,de=Z&&!!s.transmissionMap,pe=Z&&!!s.thicknessMap,fe=!!s.gradientMap,ge=!!s.alphaMap,Ae=s.alphaTest>0,ye=!!s.alphaHash,_e=!!s.extensions;let ve=ee;s.toneMapped&&(null!==O&&!0!==O.isXRRenderTarget||(ve=e.toneMapping));const be={shaderID:S,shaderType:s.type,shaderName:s.name,vertexShader:I,fragmentShader:R,defines:s.defines,customVertexShaderID:B,customFragmentShaderID:P,isRawShaderMaterial:!0===s.isRawShaderMaterial,glslVersion:s.glslVersion,precision:p,batching:N,batchingColor:N&&null!==v._colorsTexture,instancing:L,instancingColor:L&&null!==v.instanceColor,instancingMorph:L&&null!==v.morphTexture,supportsVertexTextures:d,outputColorSpace:null===O?e.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:Jt,alphaToCoverage:!!s.alphaToCoverage,map:F,matcap:U,envMap:k,envMapMode:k&&E.mapping,envMapCubeUVHeight:T,aoMap:z,lightMap:G,bumpMap:j,normalMap:V,displacementMap:d&&Q,emissiveMap:H,normalMapObjectSpace:V&&s.normalMapType===Xt,normalMapTangentSpace:V&&s.normalMapType===qt,metalnessMap:W,roughnessMap:q,anisotropy:X,anisotropyMap:te,clearcoat:K,clearcoatMap:ne,clearcoatNormalMap:re,clearcoatRoughnessMap:ie,dispersion:Y,iridescence:J,iridescenceMap:se,iridescenceThicknessMap:oe,sheen:$,sheenColorMap:ae,sheenRoughnessMap:ce,specularMap:le,specularColorMap:ue,specularIntensityMap:he,transmission:Z,transmissionMap:de,thicknessMap:pe,gradientMap:fe,opaque:!1===s.transparent&&s.blending===y&&!1===s.alphaToCoverage,alphaMap:ge,alphaTest:Ae,alphaHash:ye,combine:s.combine,mapUv:F&&A(s.map.channel),aoMapUv:z&&A(s.aoMap.channel),lightMapUv:G&&A(s.lightMap.channel),bumpMapUv:j&&A(s.bumpMap.channel),normalMapUv:V&&A(s.normalMap.channel),displacementMapUv:Q&&A(s.displacementMap.channel),emissiveMapUv:H&&A(s.emissiveMap.channel),metalnessMapUv:W&&A(s.metalnessMap.channel),roughnessMapUv:q&&A(s.roughnessMap.channel),anisotropyMapUv:te&&A(s.anisotropyMap.channel),clearcoatMapUv:ne&&A(s.clearcoatMap.channel),clearcoatNormalMapUv:re&&A(s.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ie&&A(s.clearcoatRoughnessMap.channel),iridescenceMapUv:se&&A(s.iridescenceMap.channel),iridescenceThicknessMapUv:oe&&A(s.iridescenceThicknessMap.channel),sheenColorMapUv:ae&&A(s.sheenColorMap.channel),sheenRoughnessMapUv:ce&&A(s.sheenRoughnessMap.channel),specularMapUv:le&&A(s.specularMap.channel),specularColorMapUv:ue&&A(s.specularColorMap.channel),specularIntensityMapUv:he&&A(s.specularIntensityMap.channel),transmissionMapUv:de&&A(s.transmissionMap.channel),thicknessMapUv:pe&&A(s.thicknessMap.channel),alphaMapUv:ge&&A(s.alphaMap.channel),vertexTangents:!!x.attributes.tangent&&(V||X),vertexColors:s.vertexColors,vertexAlphas:!0===s.vertexColors&&!!x.attributes.color&&4===x.attributes.color.itemSize,pointsUvs:!0===v.isPoints&&!!x.attributes.uv&&(F||ge),fog:!!b,useFog:!0===s.fog,fogExp2:!!b&&b.isFogExp2,flatShading:!0===s.flatShading,sizeAttenuation:!0===s.sizeAttenuation,logarithmicDepthBuffer:h,skinning:!0===v.isSkinnedMesh,morphTargets:void 0!==x.morphAttributes.position,morphNormals:void 0!==x.morphAttributes.normal,morphColors:void 0!==x.morphAttributes.color,morphTargetsCount:C,morphTextureStride:D,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numSpotLightMaps:a.spotLightMap.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numSpotLightShadowsWithMaps:a.numSpotLightShadowsWithMaps,numLightProbes:a.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:s.dithering,shadowMapEnabled:e.shadowMap.enabled&&u.length>0,shadowMapType:e.shadowMap.type,toneMapping:ve,decodeVideoTexture:F&&!0===s.map.isVideoTexture&&fr.getTransfer(s.map.colorSpace)===tn,premultipliedAlpha:s.premultipliedAlpha,doubleSided:s.side===g,flipSided:s.side===m,useDepthPacking:s.depthPacking>=0,depthPacking:s.depthPacking||0,index0AttributeName:s.index0AttributeName,extensionClipCullDistance:_e&&!0===s.extensions.clipCullDistance&&r.has("WEBGL_clip_cull_distance"),extensionMultiDraw:_e&&!0===s.extensions.multiDraw&&r.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:r.has("KHR_parallel_shader_compile"),customProgramCacheKey:s.customProgramCacheKey()};return be.vertexUv1s=l.has(1),be.vertexUv2s=l.has(2),be.vertexUv3s=l.has(3),l.clear(),be},getProgramCacheKey:function(t){const n=[];if(t.shaderID?n.push(t.shaderID):(n.push(t.customVertexShaderID),n.push(t.customFragmentShaderID)),void 0!==t.defines)for(const e in t.defines)n.push(e),n.push(t.defines[e]);return!1===t.isRawShaderMaterial&&(!function(e,t){e.push(t.precision),e.push(t.outputColorSpace),e.push(t.envMapMode),e.push(t.envMapCubeUVHeight),e.push(t.mapUv),e.push(t.alphaMapUv),e.push(t.lightMapUv),e.push(t.aoMapUv),e.push(t.bumpMapUv),e.push(t.normalMapUv),e.push(t.displacementMapUv),e.push(t.emissiveMapUv),e.push(t.metalnessMapUv),e.push(t.roughnessMapUv),e.push(t.anisotropyMapUv),e.push(t.clearcoatMapUv),e.push(t.clearcoatNormalMapUv),e.push(t.clearcoatRoughnessMapUv),e.push(t.iridescenceMapUv),e.push(t.iridescenceThicknessMapUv),e.push(t.sheenColorMapUv),e.push(t.sheenRoughnessMapUv),e.push(t.specularMapUv),e.push(t.specularColorMapUv),e.push(t.specularIntensityMapUv),e.push(t.transmissionMapUv),e.push(t.thicknessMapUv),e.push(t.combine),e.push(t.fogExp2),e.push(t.sizeAttenuation),e.push(t.morphTargetsCount),e.push(t.morphAttributeCount),e.push(t.numDirLights),e.push(t.numPointLights),e.push(t.numSpotLights),e.push(t.numSpotLightMaps),e.push(t.numHemiLights),e.push(t.numRectAreaLights),e.push(t.numDirLightShadows),e.push(t.numPointLightShadows),e.push(t.numSpotLightShadows),e.push(t.numSpotLightShadowsWithMaps),e.push(t.numLightProbes),e.push(t.shadowMapType),e.push(t.toneMapping),e.push(t.numClippingPlanes),e.push(t.numClipIntersection),e.push(t.depthPacking)}(n,t),function(e,t){a.disableAll(),t.supportsVertexTextures&&a.enable(0);t.instancing&&a.enable(1);t.instancingColor&&a.enable(2);t.instancingMorph&&a.enable(3);t.matcap&&a.enable(4);t.envMap&&a.enable(5);t.normalMapObjectSpace&&a.enable(6);t.normalMapTangentSpace&&a.enable(7);t.clearcoat&&a.enable(8);t.iridescence&&a.enable(9);t.alphaTest&&a.enable(10);t.vertexColors&&a.enable(11);t.vertexAlphas&&a.enable(12);t.vertexUv1s&&a.enable(13);t.vertexUv2s&&a.enable(14);t.vertexUv3s&&a.enable(15);t.vertexTangents&&a.enable(16);t.anisotropy&&a.enable(17);t.alphaHash&&a.enable(18);t.batching&&a.enable(19);t.dispersion&&a.enable(20);t.batchingColor&&a.enable(21);e.push(a.mask),a.disableAll(),t.fog&&a.enable(0);t.useFog&&a.enable(1);t.flatShading&&a.enable(2);t.logarithmicDepthBuffer&&a.enable(3);t.skinning&&a.enable(4);t.morphTargets&&a.enable(5);t.morphNormals&&a.enable(6);t.morphColors&&a.enable(7);t.premultipliedAlpha&&a.enable(8);t.shadowMapEnabled&&a.enable(9);t.doubleSided&&a.enable(10);t.flipSided&&a.enable(11);t.useDepthPacking&&a.enable(12);t.dithering&&a.enable(13);t.transmission&&a.enable(14);t.sheen&&a.enable(15);t.opaque&&a.enable(16);t.pointsUvs&&a.enable(17);t.decodeVideoTexture&&a.enable(18);t.alphaToCoverage&&a.enable(19);e.push(a.mask)}(n,t),n.push(e.outputColorSpace)),n.push(t.customProgramCacheKey),n.join()},getUniforms:function(e){const t=f[e.type];let n;if(t){const e=vo[t];n=Ys.clone(e.uniforms)}else n=e.uniforms;return n},acquireProgram:function(t,n){let r;for(let e=0,t=u.length;e<t;e++){const t=u[e];if(t.cacheKey===n){r=t,++r.usedTimes;break}}return void 0===r&&(r=new wc(e,n,t,s),u.push(r)),r},releaseProgram:function(e){if(0===--e.usedTimes){const t=u.indexOf(e);u[t]=u[u.length-1],u.pop(),e.destroy()}},releaseShaderCache:function(e){c.remove(e)},programs:u,dispose:function(){c.dispose()}}}function Cc(){let e=new WeakMap;return{get:function(t){let n=e.get(t);return void 0===n&&(n={},e.set(t,n)),n},remove:function(t){e.delete(t)},update:function(t,n,r){e.get(t)[n]=r},dispose:function(){e=new WeakMap}}}function Ic(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.material.id!==t.material.id?e.material.id-t.material.id:e.z!==t.z?e.z-t.z:e.id-t.id}function Rc(e,t){return e.groupOrder!==t.groupOrder?e.groupOrder-t.groupOrder:e.renderOrder!==t.renderOrder?e.renderOrder-t.renderOrder:e.z!==t.z?t.z-e.z:e.id-t.id}function Bc(){const e=[];let t=0;const n=[],r=[],i=[];function s(n,r,i,s,o,a){let c=e[t];return void 0===c?(c={id:n.id,object:n,geometry:r,material:i,groupOrder:s,renderOrder:n.renderOrder,z:o,group:a},e[t]=c):(c.id=n.id,c.object=n,c.geometry=r,c.material=i,c.groupOrder=s,c.renderOrder=n.renderOrder,c.z=o,c.group=a),t++,c}return{opaque:n,transmissive:r,transparent:i,init:function(){t=0,n.length=0,r.length=0,i.length=0},push:function(e,t,o,a,c,l){const u=s(e,t,o,a,c,l);o.transmission>0?r.push(u):!0===o.transparent?i.push(u):n.push(u)},unshift:function(e,t,o,a,c,l){const u=s(e,t,o,a,c,l);o.transmission>0?r.unshift(u):!0===o.transparent?i.unshift(u):n.unshift(u)},finish:function(){for(let n=t,r=e.length;n<r;n++){const t=e[n];if(null===t.id)break;t.id=null,t.object=null,t.geometry=null,t.material=null,t.group=null}},sort:function(e,t){n.length>1&&n.sort(e||Ic),r.length>1&&r.sort(t||Rc),i.length>1&&i.sort(t||Rc)}}}function Pc(){let e=new WeakMap;return{get:function(t,n){const r=e.get(t);let i;return void 0===r?(i=new Bc,e.set(t,[i])):n>=r.length?(i=new Bc,r.push(i)):i=r[n],i},dispose:function(){e=new WeakMap}}}function Dc(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":n={direction:new Pr,color:new Ji};break;case"SpotLight":n={position:new Pr,direction:new Pr,color:new Ji,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Pr,color:new Ji,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Pr,skyColor:new Ji,groundColor:new Ji};break;case"RectAreaLight":n={color:new Ji,position:new Pr,halfWidth:new Pr,halfHeight:new Pr}}return e[t.id]=n,n}}}let Oc=0;function Lc(e,t){return(t.castShadow?2:0)-(e.castShadow?2:0)+(t.map?1:0)-(e.map?1:0)}function Nc(e){const t=new Dc,n=function(){const e={};return{get:function(t){if(void 0!==e[t.id])return e[t.id];let n;switch(t.type){case"DirectionalLight":case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new er};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new er,shadowCameraNear:1,shadowCameraFar:1e3}}return e[t.id]=n,n}}}(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let e=0;e<9;e++)r.probe.push(new Pr);const i=new Pr,s=new ci,o=new ci;return{setup:function(i){let s=0,o=0,a=0;for(let e=0;e<9;e++)r.probe[e].set(0,0,0);let c=0,l=0,u=0,h=0,d=0,p=0,f=0,m=0,g=0,A=0,y=0;i.sort(Lc);for(let e=0,_=i.length;e<_;e++){const _=i[e],v=_.color,b=_.intensity,x=_.distance,w=_.shadow&&_.shadow.map?_.shadow.map.texture:null;if(_.isAmbientLight)s+=v.r*b,o+=v.g*b,a+=v.b*b;else if(_.isLightProbe){for(let e=0;e<9;e++)r.probe[e].addScaledVector(_.sh.coefficients[e],b);y++}else if(_.isDirectionalLight){const e=t.get(_);if(e.color.copy(_.color).multiplyScalar(_.intensity),_.castShadow){const e=_.shadow,t=n.get(_);t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,r.directionalShadow[c]=t,r.directionalShadowMap[c]=w,r.directionalShadowMatrix[c]=_.shadow.matrix,p++}r.directional[c]=e,c++}else if(_.isSpotLight){const e=t.get(_);e.position.setFromMatrixPosition(_.matrixWorld),e.color.copy(v).multiplyScalar(b),e.distance=x,e.coneCos=Math.cos(_.angle),e.penumbraCos=Math.cos(_.angle*(1-_.penumbra)),e.decay=_.decay,r.spot[u]=e;const i=_.shadow;if(_.map&&(r.spotLightMap[g]=_.map,g++,i.updateMatrices(_),_.castShadow&&A++),r.spotLightMatrix[u]=i.matrix,_.castShadow){const e=n.get(_);e.shadowBias=i.bias,e.shadowNormalBias=i.normalBias,e.shadowRadius=i.radius,e.shadowMapSize=i.mapSize,r.spotShadow[u]=e,r.spotShadowMap[u]=w,m++}u++}else if(_.isRectAreaLight){const e=t.get(_);e.color.copy(v).multiplyScalar(b),e.halfWidth.set(.5*_.width,0,0),e.halfHeight.set(0,.5*_.height,0),r.rectArea[h]=e,h++}else if(_.isPointLight){const e=t.get(_);if(e.color.copy(_.color).multiplyScalar(_.intensity),e.distance=_.distance,e.decay=_.decay,_.castShadow){const e=_.shadow,t=n.get(_);t.shadowBias=e.bias,t.shadowNormalBias=e.normalBias,t.shadowRadius=e.radius,t.shadowMapSize=e.mapSize,t.shadowCameraNear=e.camera.near,t.shadowCameraFar=e.camera.far,r.pointShadow[l]=t,r.pointShadowMap[l]=w,r.pointShadowMatrix[l]=_.shadow.matrix,f++}r.point[l]=e,l++}else if(_.isHemisphereLight){const e=t.get(_);e.skyColor.copy(_.color).multiplyScalar(b),e.groundColor.copy(_.groundColor).multiplyScalar(b),r.hemi[d]=e,d++}}h>0&&(!0===e.has("OES_texture_float_linear")?(r.rectAreaLTC1=_o.LTC_FLOAT_1,r.rectAreaLTC2=_o.LTC_FLOAT_2):(r.rectAreaLTC1=_o.LTC_HALF_1,r.rectAreaLTC2=_o.LTC_HALF_2)),r.ambient[0]=s,r.ambient[1]=o,r.ambient[2]=a;const _=r.hash;_.directionalLength===c&&_.pointLength===l&&_.spotLength===u&&_.rectAreaLength===h&&_.hemiLength===d&&_.numDirectionalShadows===p&&_.numPointShadows===f&&_.numSpotShadows===m&&_.numSpotMaps===g&&_.numLightProbes===y||(r.directional.length=c,r.spot.length=u,r.rectArea.length=h,r.point.length=l,r.hemi.length=d,r.directionalShadow.length=p,r.directionalShadowMap.length=p,r.pointShadow.length=f,r.pointShadowMap.length=f,r.spotShadow.length=m,r.spotShadowMap.length=m,r.directionalShadowMatrix.length=p,r.pointShadowMatrix.length=f,r.spotLightMatrix.length=m+g-A,r.spotLightMap.length=g,r.numSpotLightShadowsWithMaps=A,r.numLightProbes=y,_.directionalLength=c,_.pointLength=l,_.spotLength=u,_.rectAreaLength=h,_.hemiLength=d,_.numDirectionalShadows=p,_.numPointShadows=f,_.numSpotShadows=m,_.numSpotMaps=g,_.numLightProbes=y,r.version=Oc++)},setupView:function(e,t){let n=0,a=0,c=0,l=0,u=0;const h=t.matrixWorldInverse;for(let t=0,d=e.length;t<d;t++){const d=e[t];if(d.isDirectionalLight){const e=r.directional[n];e.direction.setFromMatrixPosition(d.matrixWorld),i.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),n++}else if(d.isSpotLight){const e=r.spot[c];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),e.direction.setFromMatrixPosition(d.matrixWorld),i.setFromMatrixPosition(d.target.matrixWorld),e.direction.sub(i),e.direction.transformDirection(h),c++}else if(d.isRectAreaLight){const e=r.rectArea[l];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),o.identity(),s.copy(d.matrixWorld),s.premultiply(h),o.extractRotation(s),e.halfWidth.set(.5*d.width,0,0),e.halfHeight.set(0,.5*d.height,0),e.halfWidth.applyMatrix4(o),e.halfHeight.applyMatrix4(o),l++}else if(d.isPointLight){const e=r.point[a];e.position.setFromMatrixPosition(d.matrixWorld),e.position.applyMatrix4(h),a++}else if(d.isHemisphereLight){const e=r.hemi[u];e.direction.setFromMatrixPosition(d.matrixWorld),e.direction.transformDirection(h),u++}}},state:r}}function Fc(e){const t=new Nc(e),n=[],r=[];const i={lightsArray:n,shadowsArray:r,camera:null,lights:t,transmissionRenderTarget:{}};return{init:function(e){i.camera=e,n.length=0,r.length=0},state:i,setupLights:function(){t.setup(n)},setupLightsView:function(e){t.setupView(n,e)},pushLight:function(e){n.push(e)},pushShadow:function(e){r.push(e)}}}function Uc(e){let t=new WeakMap;return{get:function(n,r=0){const i=t.get(n);let s;return void 0===i?(s=new Fc(e),t.set(n,[s])):r>=i.length?(s=new Fc(e),i.push(s)):s=i[r],s},dispose:function(){t=new WeakMap}}}class kc extends es{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ht,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class zc extends es{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}function Gc(e,t,n){let r=new fo;const i=new er,s=new er,o=new Er,a=new kc({depthPacking:Wt}),c=new zc,l={},u=n.maxTextureSize,d={[f]:m,[m]:f,[g]:g},y=new Js({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new er},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),_=y.clone();_.defines.HORIZONTAL_PASS=1;const v=new Ss;v.setAttribute("position",new ls(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Qs(v,y),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h;let w=this.type;function E(n,r){const s=t.update(b);y.defines.VSM_SAMPLES!==n.blurSamples&&(y.defines.VSM_SAMPLES=n.blurSamples,_.defines.VSM_SAMPLES=n.blurSamples,y.needsUpdate=!0,_.needsUpdate=!0),null===n.mapPass&&(n.mapPass=new Sr(i.x,i.y)),y.uniforms.shadow_pass.value=n.map.texture,y.uniforms.resolution.value=n.mapSize,y.uniforms.radius.value=n.radius,e.setRenderTarget(n.mapPass),e.clear(),e.renderBufferDirect(r,null,s,y,b,null),_.uniforms.shadow_pass.value=n.mapPass.texture,_.uniforms.resolution.value=n.mapSize,_.uniforms.radius.value=n.radius,e.setRenderTarget(n.map),e.clear(),e.renderBufferDirect(r,null,s,_,b,null)}function T(t,n,r,i){let s=null;const o=!0===r.isPointLight?t.customDistanceMaterial:t.customDepthMaterial;if(void 0!==o)s=o;else if(s=!0===r.isPointLight?c:a,e.localClippingEnabled&&!0===n.clipShadows&&Array.isArray(n.clippingPlanes)&&0!==n.clippingPlanes.length||n.displacementMap&&0!==n.displacementScale||n.alphaMap&&n.alphaTest>0||n.map&&n.alphaTest>0){const e=s.uuid,t=n.uuid;let r=l[e];void 0===r&&(r={},l[e]=r);let i=r[t];void 0===i&&(i=s.clone(),r[t]=i,n.addEventListener("dispose",M)),s=i}if(s.visible=n.visible,s.wireframe=n.wireframe,s.side=i===p?null!==n.shadowSide?n.shadowSide:n.side:null!==n.shadowSide?n.shadowSide:d[n.side],s.alphaMap=n.alphaMap,s.alphaTest=n.alphaTest,s.map=n.map,s.clipShadows=n.clipShadows,s.clippingPlanes=n.clippingPlanes,s.clipIntersection=n.clipIntersection,s.displacementMap=n.displacementMap,s.displacementScale=n.displacementScale,s.displacementBias=n.displacementBias,s.wireframeLinewidth=n.wireframeLinewidth,s.linewidth=n.linewidth,!0===r.isPointLight&&!0===s.isMeshDistanceMaterial){e.properties.get(s).light=r}return s}function S(n,i,s,o,a){if(!1===n.visible)return;if(n.layers.test(i.layers)&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&a===p)&&(!n.frustumCulled||r.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(s.matrixWorldInverse,n.matrixWorld);const r=t.update(n),c=n.material;if(Array.isArray(c)){const t=r.groups;for(let l=0,u=t.length;l<u;l++){const u=t[l],h=c[u.materialIndex];if(h&&h.visible){const t=T(n,h,o,a);n.onBeforeShadow(e,n,i,s,r,t,u),e.renderBufferDirect(s,null,r,t,n,u),n.onAfterShadow(e,n,i,s,r,t,u)}}}else if(c.visible){const t=T(n,c,o,a);n.onBeforeShadow(e,n,i,s,r,t,null),e.renderBufferDirect(s,null,r,t,n,null),n.onAfterShadow(e,n,i,s,r,t,null)}}const c=n.children;for(let e=0,t=c.length;e<t;e++)S(c[e],i,s,o,a)}function M(e){e.target.removeEventListener("dispose",M);for(const t in l){const n=l[t],r=e.target.uuid;if(r in n){n[r].dispose(),delete n[r]}}}this.render=function(t,n,a){if(!1===x.enabled)return;if(!1===x.autoUpdate&&!1===x.needsUpdate)return;if(0===t.length)return;const c=e.getRenderTarget(),l=e.getActiveCubeFace(),h=e.getActiveMipmapLevel(),d=e.state;d.setBlending(A),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);const f=w!==p&&this.type===p,m=w===p&&this.type!==p;for(let c=0,l=t.length;c<l;c++){const l=t[c],h=l.shadow;if(void 0===h){console.warn("THREE.WebGLShadowMap:",l,"has no shadow.");continue}if(!1===h.autoUpdate&&!1===h.needsUpdate)continue;i.copy(h.mapSize);const g=h.getFrameExtents();if(i.multiply(g),s.copy(h.mapSize),(i.x>u||i.y>u)&&(i.x>u&&(s.x=Math.floor(u/g.x),i.x=s.x*g.x,h.mapSize.x=s.x),i.y>u&&(s.y=Math.floor(u/g.y),i.y=s.y*g.y,h.mapSize.y=s.y)),null===h.map||!0===f||!0===m){const e=this.type!==p?{minFilter:_e,magFilter:_e}:{};null!==h.map&&h.map.dispose(),h.map=new Sr(i.x,i.y,e),h.map.texture.name=l.name+".shadowMap",h.camera.updateProjectionMatrix()}e.setRenderTarget(h.map),e.clear();const A=h.getViewportCount();for(let e=0;e<A;e++){const t=h.getViewport(e);o.set(s.x*t.x,s.y*t.y,s.x*t.z,s.y*t.w),d.viewport(o),h.updateMatrices(l,e),r=h.getFrustum(),S(n,a,h.camera,l,this.type)}!0!==h.isPointLightShadow&&this.type===p&&E(h,a),h.needsUpdate=!1}w=this.type,x.needsUpdate=!1,e.setRenderTarget(c,l,h)}}function jc(e){const t=new function(){let t=!1;const n=new Er;let r=null;const i=new Er(0,0,0,0);return{setMask:function(n){r===n||t||(e.colorMask(n,n,n,n),r=n)},setLocked:function(e){t=e},setClear:function(t,r,s,o,a){!0===a&&(t*=o,r*=o,s*=o),n.set(t,r,s,o),!1===i.equals(n)&&(e.clearColor(t,r,s,o),i.copy(n))},reset:function(){t=!1,r=null,i.set(-1,0,0,0)}}},n=new function(){let t=!1,n=null,r=null,i=null;return{setTest:function(t){t?Ee(e.DEPTH_TEST):Te(e.DEPTH_TEST)},setMask:function(r){n===r||t||(e.depthMask(r),n=r)},setFunc:function(t){if(r!==t){switch(t){case V:e.depthFunc(e.NEVER);break;case Q:e.depthFunc(e.ALWAYS);break;case H:e.depthFunc(e.LESS);break;case W:e.depthFunc(e.LEQUAL);break;case q:e.depthFunc(e.EQUAL);break;case X:e.depthFunc(e.GEQUAL);break;case K:e.depthFunc(e.GREATER);break;case Y:e.depthFunc(e.NOTEQUAL);break;default:e.depthFunc(e.LEQUAL)}r=t}},setLocked:function(e){t=e},setClear:function(t){i!==t&&(e.clearDepth(t),i=t)},reset:function(){t=!1,n=null,r=null,i=null}}},r=new function(){let t=!1,n=null,r=null,i=null,s=null,o=null,a=null,c=null,l=null;return{setTest:function(n){t||(n?Ee(e.STENCIL_TEST):Te(e.STENCIL_TEST))},setMask:function(r){n===r||t||(e.stencilMask(r),n=r)},setFunc:function(t,n,o){r===t&&i===n&&s===o||(e.stencilFunc(t,n,o),r=t,i=n,s=o)},setOp:function(t,n,r){o===t&&a===n&&c===r||(e.stencilOp(t,n,r),o=t,a=n,c=r)},setLocked:function(e){t=e},setClear:function(t){l!==t&&(e.clearStencil(t),l=t)},reset:function(){t=!1,n=null,r=null,i=null,s=null,o=null,a=null,c=null,l=null}}},i=new WeakMap,s=new WeakMap;let l={},u={},h=new WeakMap,d=[],p=null,f=!1,J=null,$=null,Z=null,ee=null,te=null,ne=null,re=null,ie=new Ji(0,0,0),se=0,oe=!1,ae=null,ce=null,le=null,ue=null,he=null;const de=e.getParameter(e.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let pe=!1,fe=0;const me=e.getParameter(e.VERSION);-1!==me.indexOf("WebGL")?(fe=parseFloat(/^WebGL (\d)/.exec(me)[1]),pe=fe>=1):-1!==me.indexOf("OpenGL ES")&&(fe=parseFloat(/^OpenGL ES (\d)/.exec(me)[1]),pe=fe>=2);let ge=null,Ae={};const ye=e.getParameter(e.SCISSOR_BOX),_e=e.getParameter(e.VIEWPORT),ve=(new Er).fromArray(ye),be=(new Er).fromArray(_e);function xe(t,n,r,i){const s=new Uint8Array(4),o=e.createTexture();e.bindTexture(t,o),e.texParameteri(t,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texParameteri(t,e.TEXTURE_MAG_FILTER,e.NEAREST);for(let o=0;o<r;o++)t===e.TEXTURE_3D||t===e.TEXTURE_2D_ARRAY?e.texImage3D(n,0,e.RGBA,1,1,i,0,e.RGBA,e.UNSIGNED_BYTE,s):e.texImage2D(n+o,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,s);return o}const we={};function Ee(t){!0!==l[t]&&(e.enable(t),l[t]=!0)}function Te(t){!1!==l[t]&&(e.disable(t),l[t]=!1)}we[e.TEXTURE_2D]=xe(e.TEXTURE_2D,e.TEXTURE_2D,1),we[e.TEXTURE_CUBE_MAP]=xe(e.TEXTURE_CUBE_MAP,e.TEXTURE_CUBE_MAP_POSITIVE_X,6),we[e.TEXTURE_2D_ARRAY]=xe(e.TEXTURE_2D_ARRAY,e.TEXTURE_2D_ARRAY,1,1),we[e.TEXTURE_3D]=xe(e.TEXTURE_3D,e.TEXTURE_3D,1,1),t.setClear(0,0,0,1),n.setClear(1),r.setClear(0),Ee(e.DEPTH_TEST),n.setFunc(W),Ie(!1),Re(a),Ee(e.CULL_FACE),Ce(A);const Se={[w]:e.FUNC_ADD,[E]:e.FUNC_SUBTRACT,[T]:e.FUNC_REVERSE_SUBTRACT};Se[S]=e.MIN,Se[M]=e.MAX;const Me={[C]:e.ZERO,[I]:e.ONE,[R]:e.SRC_COLOR,[P]:e.SRC_ALPHA,[U]:e.SRC_ALPHA_SATURATE,[N]:e.DST_COLOR,[O]:e.DST_ALPHA,[B]:e.ONE_MINUS_SRC_COLOR,[D]:e.ONE_MINUS_SRC_ALPHA,[F]:e.ONE_MINUS_DST_COLOR,[L]:e.ONE_MINUS_DST_ALPHA,[k]:e.CONSTANT_COLOR,[z]:e.ONE_MINUS_CONSTANT_COLOR,[G]:e.CONSTANT_ALPHA,[j]:e.ONE_MINUS_CONSTANT_ALPHA};function Ce(t,n,r,i,s,o,a,c,l,u){if(t!==A){if(!1===f&&(Ee(e.BLEND),f=!0),t===x)s=s||n,o=o||r,a=a||i,n===$&&s===te||(e.blendEquationSeparate(Se[n],Se[s]),$=n,te=s),r===Z&&i===ee&&o===ne&&a===re||(e.blendFuncSeparate(Me[r],Me[i],Me[o],Me[a]),Z=r,ee=i,ne=o,re=a),!1!==c.equals(ie)&&l===se||(e.blendColor(c.r,c.g,c.b,l),ie.copy(c),se=l),J=t,oe=!1;else if(t!==J||u!==oe){if($===w&&te===w||(e.blendEquation(e.FUNC_ADD),$=w,te=w),u)switch(t){case y:e.blendFuncSeparate(e.ONE,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case _:e.blendFunc(e.ONE,e.ONE);break;case v:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case b:e.blendFuncSeparate(e.ZERO,e.SRC_COLOR,e.ZERO,e.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}else switch(t){case y:e.blendFuncSeparate(e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA);break;case _:e.blendFunc(e.SRC_ALPHA,e.ONE);break;case v:e.blendFuncSeparate(e.ZERO,e.ONE_MINUS_SRC_COLOR,e.ZERO,e.ONE);break;case b:e.blendFunc(e.ZERO,e.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",t)}Z=null,ee=null,ne=null,re=null,ie.set(0,0,0),se=0,J=t,oe=u}}else!0===f&&(Te(e.BLEND),f=!1)}function Ie(t){ae!==t&&(t?e.frontFace(e.CW):e.frontFace(e.CCW),ae=t)}function Re(t){t!==o?(Ee(e.CULL_FACE),t!==ce&&(t===a?e.cullFace(e.BACK):t===c?e.cullFace(e.FRONT):e.cullFace(e.FRONT_AND_BACK))):Te(e.CULL_FACE),ce=t}function Be(t,n,r){t?(Ee(e.POLYGON_OFFSET_FILL),ue===n&&he===r||(e.polygonOffset(n,r),ue=n,he=r)):Te(e.POLYGON_OFFSET_FILL)}return{buffers:{color:t,depth:n,stencil:r},enable:Ee,disable:Te,bindFramebuffer:function(t,n){return u[t]!==n&&(e.bindFramebuffer(t,n),u[t]=n,t===e.DRAW_FRAMEBUFFER&&(u[e.FRAMEBUFFER]=n),t===e.FRAMEBUFFER&&(u[e.DRAW_FRAMEBUFFER]=n),!0)},drawBuffers:function(t,n){let r=d,i=!1;if(t){r=h.get(n),void 0===r&&(r=[],h.set(n,r));const s=t.textures;if(r.length!==s.length||r[0]!==e.COLOR_ATTACHMENT0){for(let t=0,n=s.length;t<n;t++)r[t]=e.COLOR_ATTACHMENT0+t;r.length=s.length,i=!0}}else r[0]!==e.BACK&&(r[0]=e.BACK,i=!0);i&&e.drawBuffers(r)},useProgram:function(t){return p!==t&&(e.useProgram(t),p=t,!0)},setBlending:Ce,setMaterial:function(i,s){i.side===g?Te(e.CULL_FACE):Ee(e.CULL_FACE);let o=i.side===m;s&&(o=!o),Ie(o),i.blending===y&&!1===i.transparent?Ce(A):Ce(i.blending,i.blendEquation,i.blendSrc,i.blendDst,i.blendEquationAlpha,i.blendSrcAlpha,i.blendDstAlpha,i.blendColor,i.blendAlpha,i.premultipliedAlpha),n.setFunc(i.depthFunc),n.setTest(i.depthTest),n.setMask(i.depthWrite),t.setMask(i.colorWrite);const a=i.stencilWrite;r.setTest(a),a&&(r.setMask(i.stencilWriteMask),r.setFunc(i.stencilFunc,i.stencilRef,i.stencilFuncMask),r.setOp(i.stencilFail,i.stencilZFail,i.stencilZPass)),Be(i.polygonOffset,i.polygonOffsetFactor,i.polygonOffsetUnits),!0===i.alphaToCoverage?Ee(e.SAMPLE_ALPHA_TO_COVERAGE):Te(e.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:Ie,setCullFace:Re,setLineWidth:function(t){t!==le&&(pe&&e.lineWidth(t),le=t)},setPolygonOffset:Be,setScissorTest:function(t){t?Ee(e.SCISSOR_TEST):Te(e.SCISSOR_TEST)},activeTexture:function(t){void 0===t&&(t=e.TEXTURE0+de-1),ge!==t&&(e.activeTexture(t),ge=t)},bindTexture:function(t,n,r){void 0===r&&(r=null===ge?e.TEXTURE0+de-1:ge);let i=Ae[r];void 0===i&&(i={type:void 0,texture:void 0},Ae[r]=i),i.type===t&&i.texture===n||(ge!==r&&(e.activeTexture(r),ge=r),e.bindTexture(t,n||we[t]),i.type=t,i.texture=n)},unbindTexture:function(){const t=Ae[ge];void 0!==t&&void 0!==t.type&&(e.bindTexture(t.type,null),t.type=void 0,t.texture=void 0)},compressedTexImage2D:function(){try{e.compressedTexImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexImage3D:function(){try{e.compressedTexImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage2D:function(){try{e.texImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texImage3D:function(){try{e.texImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},updateUBOMapping:function(t,n){let r=s.get(n);void 0===r&&(r=new WeakMap,s.set(n,r));let i=r.get(t);void 0===i&&(i=e.getUniformBlockIndex(n,t.name),r.set(t,i))},uniformBlockBinding:function(t,n){const r=s.get(n).get(t);i.get(n)!==r&&(e.uniformBlockBinding(n,r,t.__bindingPointIndex),i.set(n,r))},texStorage2D:function(){try{e.texStorage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texStorage3D:function(){try{e.texStorage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage2D:function(){try{e.texSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},texSubImage3D:function(){try{e.texSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage2D:function(){try{e.compressedTexSubImage2D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},compressedTexSubImage3D:function(){try{e.compressedTexSubImage3D.apply(e,arguments)}catch(e){console.error("THREE.WebGLState:",e)}},scissor:function(t){!1===ve.equals(t)&&(e.scissor(t.x,t.y,t.z,t.w),ve.copy(t))},viewport:function(t){!1===be.equals(t)&&(e.viewport(t.x,t.y,t.z,t.w),be.copy(t))},reset:function(){e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.disable(e.POLYGON_OFFSET_FILL),e.disable(e.SCISSOR_TEST),e.disable(e.STENCIL_TEST),e.disable(e.SAMPLE_ALPHA_TO_COVERAGE),e.blendEquation(e.FUNC_ADD),e.blendFunc(e.ONE,e.ZERO),e.blendFuncSeparate(e.ONE,e.ZERO,e.ONE,e.ZERO),e.blendColor(0,0,0,0),e.colorMask(!0,!0,!0,!0),e.clearColor(0,0,0,0),e.depthMask(!0),e.depthFunc(e.LESS),e.clearDepth(1),e.stencilMask(4294967295),e.stencilFunc(e.ALWAYS,0,4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP),e.clearStencil(0),e.cullFace(e.BACK),e.frontFace(e.CCW),e.polygonOffset(0,0),e.activeTexture(e.TEXTURE0),e.bindFramebuffer(e.FRAMEBUFFER,null),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),e.bindFramebuffer(e.READ_FRAMEBUFFER,null),e.useProgram(null),e.lineWidth(1),e.scissor(0,0,e.canvas.width,e.canvas.height),e.viewport(0,0,e.canvas.width,e.canvas.height),l={},ge=null,Ae={},u={},h=new WeakMap,d=[],p=null,f=!1,J=null,$=null,Z=null,ee=null,te=null,ne=null,re=null,ie=new Ji(0,0,0),se=0,oe=!1,ae=null,ce=null,le=null,ue=null,he=null,ve.set(0,0,e.canvas.width,e.canvas.height),be.set(0,0,e.canvas.width,e.canvas.height),t.reset(),n.reset(),r.reset()}}}function Vc(e,t,n,r,i,s,o){const a=t.has("WEBGL_multisampled_render_to_texture")?t.get("WEBGL_multisampled_render_to_texture"):null,c="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),l=new er,u=new WeakMap;let h;const d=new WeakMap;let p=!1;try{p="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(e){}function f(e,t){return p?new OffscreenCanvas(e,t):or("canvas")}function m(e,t,n){let r=1;const i=z(e);if((i.width>n||i.height>n)&&(r=n/Math.max(i.width,i.height)),r<1){if("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&e instanceof VideoFrame){const n=Math.floor(r*i.width),s=Math.floor(r*i.height);void 0===h&&(h=f(n,s));const o=t?f(n,s):h;o.width=n,o.height=s;return o.getContext("2d").drawImage(e,0,0,n,s),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+i.width+"x"+i.height+") to ("+n+"x"+s+")."),o}return"data"in e&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+i.width+"x"+i.height+")."),e}return e}function g(e){return e.generateMipmaps&&e.minFilter!==_e&&e.minFilter!==Ee}function A(t){e.generateMipmap(t)}function y(n,r,i,s,o=!1){if(null!==n){if(void 0!==e[n])return e[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let a=r;if(r===e.RED&&(i===e.FLOAT&&(a=e.R32F),i===e.HALF_FLOAT&&(a=e.R16F),i===e.UNSIGNED_BYTE&&(a=e.R8)),r===e.RED_INTEGER&&(i===e.UNSIGNED_BYTE&&(a=e.R8UI),i===e.UNSIGNED_SHORT&&(a=e.R16UI),i===e.UNSIGNED_INT&&(a=e.R32UI),i===e.BYTE&&(a=e.R8I),i===e.SHORT&&(a=e.R16I),i===e.INT&&(a=e.R32I)),r===e.RG&&(i===e.FLOAT&&(a=e.RG32F),i===e.HALF_FLOAT&&(a=e.RG16F),i===e.UNSIGNED_BYTE&&(a=e.RG8)),r===e.RG_INTEGER&&(i===e.UNSIGNED_BYTE&&(a=e.RG8UI),i===e.UNSIGNED_SHORT&&(a=e.RG16UI),i===e.UNSIGNED_INT&&(a=e.RG32UI),i===e.BYTE&&(a=e.RG8I),i===e.SHORT&&(a=e.RG16I),i===e.INT&&(a=e.RG32I)),r===e.RGB&&i===e.UNSIGNED_INT_5_9_9_9_REV&&(a=e.RGB9_E5),r===e.RGBA){const t=o?en:fr.getTransfer(s);i===e.FLOAT&&(a=e.RGBA32F),i===e.HALF_FLOAT&&(a=e.RGBA16F),i===e.UNSIGNED_BYTE&&(a=t===tn?e.SRGB8_ALPHA8:e.RGBA8),i===e.UNSIGNED_SHORT_4_4_4_4&&(a=e.RGBA4),i===e.UNSIGNED_SHORT_5_5_5_1&&(a=e.RGB5_A1)}return a!==e.R16F&&a!==e.R32F&&a!==e.RG16F&&a!==e.RG32F&&a!==e.RGBA16F&&a!==e.RGBA32F||t.get("EXT_color_buffer_float"),a}function _(t,n){let r;return t?null===n||n===Oe||n===ke?r=e.DEPTH24_STENCIL8:n===Le?r=e.DEPTH32F_STENCIL8:n===Pe&&(r=e.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===n||n===Oe||n===ke?r=e.DEPTH_COMPONENT24:n===Le?r=e.DEPTH_COMPONENT32F:n===Pe&&(r=e.DEPTH_COMPONENT16),r}function v(e,t){return!0===g(e)||e.isFramebufferTexture&&e.minFilter!==_e&&e.minFilter!==Ee?Math.log2(Math.max(t.width,t.height))+1:void 0!==e.mipmaps&&e.mipmaps.length>0?e.mipmaps.length:e.isCompressedTexture&&Array.isArray(e.image)?t.mipmaps.length:1}function b(e){const t=e.target;t.removeEventListener("dispose",b),function(e){const t=r.get(e);if(void 0===t.__webglInit)return;const n=e.source,i=d.get(n);if(i){const r=i[t.__cacheKey];r.usedTimes--,0===r.usedTimes&&w(e),0===Object.keys(i).length&&d.delete(n)}r.remove(e)}(t),t.isVideoTexture&&u.delete(t)}function x(t){const n=t.target;n.removeEventListener("dispose",x),function(t){const n=r.get(t);t.depthTexture&&t.depthTexture.dispose();if(t.isWebGLCubeRenderTarget)for(let t=0;t<6;t++){if(Array.isArray(n.__webglFramebuffer[t]))for(let r=0;r<n.__webglFramebuffer[t].length;r++)e.deleteFramebuffer(n.__webglFramebuffer[t][r]);else e.deleteFramebuffer(n.__webglFramebuffer[t]);n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer[t])}else{if(Array.isArray(n.__webglFramebuffer))for(let t=0;t<n.__webglFramebuffer.length;t++)e.deleteFramebuffer(n.__webglFramebuffer[t]);else e.deleteFramebuffer(n.__webglFramebuffer);if(n.__webglDepthbuffer&&e.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&e.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer)for(let t=0;t<n.__webglColorRenderbuffer.length;t++)n.__webglColorRenderbuffer[t]&&e.deleteRenderbuffer(n.__webglColorRenderbuffer[t]);n.__webglDepthRenderbuffer&&e.deleteRenderbuffer(n.__webglDepthRenderbuffer)}const i=t.textures;for(let t=0,n=i.length;t<n;t++){const n=r.get(i[t]);n.__webglTexture&&(e.deleteTexture(n.__webglTexture),o.memory.textures--),r.remove(i[t])}r.remove(t)}(n)}function w(t){const n=r.get(t);e.deleteTexture(n.__webglTexture);const i=t.source;delete d.get(i)[n.__cacheKey],o.memory.textures--}let E=0;function T(t,i){const s=r.get(t);if(t.isVideoTexture&&function(e){const t=o.render.frame;u.get(e)!==t&&(u.set(e,t),e.update())}(t),!1===t.isRenderTargetTexture&&t.version>0&&s.__version!==t.version){const e=t.image;if(null===e)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==e.complete)return void B(s,t,i);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.bindTexture(e.TEXTURE_2D,s.__webglTexture,e.TEXTURE0+i)}const S={[ge]:e.REPEAT,[Ae]:e.CLAMP_TO_EDGE,[ye]:e.MIRRORED_REPEAT},M={[_e]:e.NEAREST,[ve]:e.NEAREST_MIPMAP_NEAREST,[xe]:e.NEAREST_MIPMAP_LINEAR,[Ee]:e.LINEAR,[Te]:e.LINEAR_MIPMAP_NEAREST,[Me]:e.LINEAR_MIPMAP_LINEAR},C={[bn]:e.NEVER,[Cn]:e.ALWAYS,[xn]:e.LESS,[En]:e.LEQUAL,[wn]:e.EQUAL,[Mn]:e.GEQUAL,[Tn]:e.GREATER,[Sn]:e.NOTEQUAL};function I(n,s){if(s.type!==Le||!1!==t.has("OES_texture_float_linear")||s.magFilter!==Ee&&s.magFilter!==Te&&s.magFilter!==xe&&s.magFilter!==Me&&s.minFilter!==Ee&&s.minFilter!==Te&&s.minFilter!==xe&&s.minFilter!==Me||console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),e.texParameteri(n,e.TEXTURE_WRAP_S,S[s.wrapS]),e.texParameteri(n,e.TEXTURE_WRAP_T,S[s.wrapT]),n!==e.TEXTURE_3D&&n!==e.TEXTURE_2D_ARRAY||e.texParameteri(n,e.TEXTURE_WRAP_R,S[s.wrapR]),e.texParameteri(n,e.TEXTURE_MAG_FILTER,M[s.magFilter]),e.texParameteri(n,e.TEXTURE_MIN_FILTER,M[s.minFilter]),s.compareFunction&&(e.texParameteri(n,e.TEXTURE_COMPARE_MODE,e.COMPARE_REF_TO_TEXTURE),e.texParameteri(n,e.TEXTURE_COMPARE_FUNC,C[s.compareFunction])),!0===t.has("EXT_texture_filter_anisotropic")){if(s.magFilter===_e)return;if(s.minFilter!==xe&&s.minFilter!==Me)return;if(s.type===Le&&!1===t.has("OES_texture_float_linear"))return;if(s.anisotropy>1||r.get(s).__currentAnisotropy){const o=t.get("EXT_texture_filter_anisotropic");e.texParameterf(n,o.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(s.anisotropy,i.getMaxAnisotropy())),r.get(s).__currentAnisotropy=s.anisotropy}}}function R(t,n){let r=!1;void 0===t.__webglInit&&(t.__webglInit=!0,n.addEventListener("dispose",b));const i=n.source;let s=d.get(i);void 0===s&&(s={},d.set(i,s));const a=function(e){const t=[];return t.push(e.wrapS),t.push(e.wrapT),t.push(e.wrapR||0),t.push(e.magFilter),t.push(e.minFilter),t.push(e.anisotropy),t.push(e.internalFormat),t.push(e.format),t.push(e.type),t.push(e.generateMipmaps),t.push(e.premultiplyAlpha),t.push(e.flipY),t.push(e.unpackAlignment),t.push(e.colorSpace),t.join()}(n);if(a!==t.__cacheKey){void 0===s[a]&&(s[a]={texture:e.createTexture(),usedTimes:0},o.memory.textures++,r=!0),s[a].usedTimes++;const i=s[t.__cacheKey];void 0!==i&&(s[t.__cacheKey].usedTimes--,0===i.usedTimes&&w(n)),t.__cacheKey=a,t.__webglTexture=s[a].texture}return r}function B(t,o,a){let c=e.TEXTURE_2D;(o.isDataArrayTexture||o.isCompressedArrayTexture)&&(c=e.TEXTURE_2D_ARRAY),o.isData3DTexture&&(c=e.TEXTURE_3D);const l=R(t,o),u=o.source;n.bindTexture(c,t.__webglTexture,e.TEXTURE0+a);const h=r.get(u);if(u.version!==h.__version||!0===l){n.activeTexture(e.TEXTURE0+a);const t=fr.getPrimaries(fr.workingColorSpace),r=o.colorSpace===Kt?null:fr.getPrimaries(o.colorSpace),d=o.colorSpace===Kt||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,d);let p=m(o.image,!1,i.maxTextureSize);p=k(o,p);const f=s.convert(o.format,o.colorSpace),b=s.convert(o.type);let x,w=y(o.internalFormat,f,b,o.colorSpace,o.isVideoTexture);I(c,o);const E=o.mipmaps,T=!0!==o.isVideoTexture,S=void 0===h.__version||!0===l,M=u.dataReady,C=v(o,p);if(o.isDepthTexture)w=_(o.format===qe,o.type),S&&(T?n.texStorage2D(e.TEXTURE_2D,1,w,p.width,p.height):n.texImage2D(e.TEXTURE_2D,0,w,p.width,p.height,0,f,b,null));else if(o.isDataTexture)if(E.length>0){T&&S&&n.texStorage2D(e.TEXTURE_2D,C,w,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)x=E[t],T?M&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,f,b,x.data):n.texImage2D(e.TEXTURE_2D,t,w,x.width,x.height,0,f,b,x.data);o.generateMipmaps=!1}else T?(S&&n.texStorage2D(e.TEXTURE_2D,C,w,p.width,p.height),M&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,p.width,p.height,f,b,p.data)):n.texImage2D(e.TEXTURE_2D,0,w,p.width,p.height,0,f,b,p.data);else if(o.isCompressedTexture)if(o.isCompressedArrayTexture){T&&S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,w,E[0].width,E[0].height,p.depth);for(let t=0,r=E.length;t<r;t++)if(x=E[t],o.format!==Ve)if(null!==f)if(T){if(M)if(o.layerUpdates.size>0){for(const r of o.layerUpdates){const i=x.width*x.height;n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,r,x.width,x.height,1,f,x.data.slice(i*r,i*(r+1)),0,0)}o.clearLayerUpdates()}else n.compressedTexSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,p.depth,f,x.data,0,0)}else n.compressedTexImage3D(e.TEXTURE_2D_ARRAY,t,w,x.width,x.height,p.depth,0,x.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else T?M&&n.texSubImage3D(e.TEXTURE_2D_ARRAY,t,0,0,0,x.width,x.height,p.depth,f,b,x.data):n.texImage3D(e.TEXTURE_2D_ARRAY,t,w,x.width,x.height,p.depth,0,f,b,x.data)}else{T&&S&&n.texStorage2D(e.TEXTURE_2D,C,w,E[0].width,E[0].height);for(let t=0,r=E.length;t<r;t++)x=E[t],o.format!==Ve?null!==f?T?M&&n.compressedTexSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,f,x.data):n.compressedTexImage2D(e.TEXTURE_2D,t,w,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?M&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,x.width,x.height,f,b,x.data):n.texImage2D(e.TEXTURE_2D,t,w,x.width,x.height,0,f,b,x.data)}else if(o.isDataArrayTexture)if(T){if(S&&n.texStorage3D(e.TEXTURE_2D_ARRAY,C,w,p.width,p.height,p.depth),M)if(o.layerUpdates.size>0){let t;switch(b){case e.UNSIGNED_BYTE:switch(f){case e.ALPHA:case e.LUMINANCE:t=1;break;case e.LUMINANCE_ALPHA:t=2;break;case e.RGB:t=3;break;case e.RGBA:t=4;break;default:throw new Error(`Unknown texel size for format ${f}.`)}break;case e.UNSIGNED_SHORT_4_4_4_4:case e.UNSIGNED_SHORT_5_5_5_1:case e.UNSIGNED_SHORT_5_6_5:t=1;break;default:throw new Error(`Unknown texel size for type ${b}.`)}const r=p.width*p.height*t;for(const t of o.layerUpdates)n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,t,p.width,p.height,1,f,b,p.data.slice(r*t,r*(t+1)));o.clearLayerUpdates()}else n.texSubImage3D(e.TEXTURE_2D_ARRAY,0,0,0,0,p.width,p.height,p.depth,f,b,p.data)}else n.texImage3D(e.TEXTURE_2D_ARRAY,0,w,p.width,p.height,p.depth,0,f,b,p.data);else if(o.isData3DTexture)T?(S&&n.texStorage3D(e.TEXTURE_3D,C,w,p.width,p.height,p.depth),M&&n.texSubImage3D(e.TEXTURE_3D,0,0,0,0,p.width,p.height,p.depth,f,b,p.data)):n.texImage3D(e.TEXTURE_3D,0,w,p.width,p.height,p.depth,0,f,b,p.data);else if(o.isFramebufferTexture){if(S)if(T)n.texStorage2D(e.TEXTURE_2D,C,w,p.width,p.height);else{let t=p.width,r=p.height;for(let i=0;i<C;i++)n.texImage2D(e.TEXTURE_2D,i,w,t,r,0,f,b,null),t>>=1,r>>=1}}else if(E.length>0){if(T&&S){const t=z(E[0]);n.texStorage2D(e.TEXTURE_2D,C,w,t.width,t.height)}for(let t=0,r=E.length;t<r;t++)x=E[t],T?M&&n.texSubImage2D(e.TEXTURE_2D,t,0,0,f,b,x):n.texImage2D(e.TEXTURE_2D,t,w,f,b,x);o.generateMipmaps=!1}else if(T){if(S){const t=z(p);n.texStorage2D(e.TEXTURE_2D,C,w,t.width,t.height)}M&&n.texSubImage2D(e.TEXTURE_2D,0,0,0,f,b,p)}else n.texImage2D(e.TEXTURE_2D,0,w,f,b,p);g(o)&&A(c),h.__version=u.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}function P(t,i,o,c,l,u){const h=s.convert(o.format,o.colorSpace),d=s.convert(o.type),p=y(o.internalFormat,h,d,o.colorSpace);if(!r.get(i).__hasExternalTextures){const t=Math.max(1,i.width>>u),r=Math.max(1,i.height>>u);l===e.TEXTURE_3D||l===e.TEXTURE_2D_ARRAY?n.texImage3D(l,u,p,t,r,i.depth,0,h,d,null):n.texImage2D(l,u,p,t,r,0,h,d,null)}n.bindFramebuffer(e.FRAMEBUFFER,t),U(i)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,c,l,r.get(o).__webglTexture,0,F(i)):(l===e.TEXTURE_2D||l>=e.TEXTURE_CUBE_MAP_POSITIVE_X&&l<=e.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&e.framebufferTexture2D(e.FRAMEBUFFER,c,l,r.get(o).__webglTexture,u),n.bindFramebuffer(e.FRAMEBUFFER,null)}function D(t,n,r){if(e.bindRenderbuffer(e.RENDERBUFFER,t),n.depthBuffer){const i=n.depthTexture,s=i&&i.isDepthTexture?i.type:null,o=_(n.stencilBuffer,s),c=n.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,l=F(n);U(n)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,l,o,n.width,n.height):r?e.renderbufferStorageMultisample(e.RENDERBUFFER,l,o,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,o,n.width,n.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,c,e.RENDERBUFFER,t)}else{const t=n.textures;for(let i=0;i<t.length;i++){const o=t[i],c=s.convert(o.format,o.colorSpace),l=s.convert(o.type),u=y(o.internalFormat,c,l,o.colorSpace),h=F(n);r&&!1===U(n)?e.renderbufferStorageMultisample(e.RENDERBUFFER,h,u,n.width,n.height):U(n)?a.renderbufferStorageMultisampleEXT(e.RENDERBUFFER,h,u,n.width,n.height):e.renderbufferStorage(e.RENDERBUFFER,u,n.width,n.height)}}e.bindRenderbuffer(e.RENDERBUFFER,null)}function O(t){const i=r.get(t),s=!0===t.isWebGLCubeRenderTarget;if(t.depthTexture&&!i.__autoAllocateDepthBuffer){if(s)throw new Error("target.depthTexture not supported in Cube render targets");!function(t,i){if(i&&i.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(n.bindFramebuffer(e.FRAMEBUFFER,t),!i.depthTexture||!i.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");r.get(i.depthTexture).__webglTexture&&i.depthTexture.image.width===i.width&&i.depthTexture.image.height===i.height||(i.depthTexture.image.width=i.width,i.depthTexture.image.height=i.height,i.depthTexture.needsUpdate=!0),T(i.depthTexture,0);const s=r.get(i.depthTexture).__webglTexture,o=F(i);if(i.depthTexture.format===We)U(i)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.TEXTURE_2D,s,0);else{if(i.depthTexture.format!==qe)throw new Error("Unknown depthTexture format");U(i)?a.framebufferTexture2DMultisampleEXT(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0,o):e.framebufferTexture2D(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.TEXTURE_2D,s,0)}}(i.__webglFramebuffer,t)}else if(s){i.__webglDepthbuffer=[];for(let r=0;r<6;r++)n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer[r]),i.__webglDepthbuffer[r]=e.createRenderbuffer(),D(i.__webglDepthbuffer[r],t,!1)}else n.bindFramebuffer(e.FRAMEBUFFER,i.__webglFramebuffer),i.__webglDepthbuffer=e.createRenderbuffer(),D(i.__webglDepthbuffer,t,!1);n.bindFramebuffer(e.FRAMEBUFFER,null)}const L=[],N=[];function F(e){return Math.min(i.maxSamples,e.samples)}function U(e){const n=r.get(e);return e.samples>0&&!0===t.has("WEBGL_multisampled_render_to_texture")&&!1!==n.__useRenderToTexture}function k(e,t){const n=e.colorSpace,r=e.format,i=e.type;return!0===e.isCompressedTexture||!0===e.isVideoTexture||n!==Jt&&n!==Kt&&(fr.getTransfer(n)===tn?r===Ve&&i===Ie||console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",n)),t}function z(e){return"undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement?(l.width=e.naturalWidth||e.width,l.height=e.naturalHeight||e.height):"undefined"!=typeof VideoFrame&&e instanceof VideoFrame?(l.width=e.displayWidth,l.height=e.displayHeight):(l.width=e.width,l.height=e.height),l}this.allocateTextureUnit=function(){const e=E;return e>=i.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+e+" texture units while this GPU supports only "+i.maxTextures),E+=1,e},this.resetTextureUnits=function(){E=0},this.setTexture2D=T,this.setTexture2DArray=function(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?B(s,t,i):n.bindTexture(e.TEXTURE_2D_ARRAY,s.__webglTexture,e.TEXTURE0+i)},this.setTexture3D=function(t,i){const s=r.get(t);t.version>0&&s.__version!==t.version?B(s,t,i):n.bindTexture(e.TEXTURE_3D,s.__webglTexture,e.TEXTURE0+i)},this.setTextureCube=function(t,o){const a=r.get(t);t.version>0&&a.__version!==t.version?function(t,o,a){if(6!==o.image.length)return;const c=R(t,o),l=o.source;n.bindTexture(e.TEXTURE_CUBE_MAP,t.__webglTexture,e.TEXTURE0+a);const u=r.get(l);if(l.version!==u.__version||!0===c){n.activeTexture(e.TEXTURE0+a);const t=fr.getPrimaries(fr.workingColorSpace),r=o.colorSpace===Kt?null:fr.getPrimaries(o.colorSpace),h=o.colorSpace===Kt||t===r?e.NONE:e.BROWSER_DEFAULT_WEBGL;e.pixelStorei(e.UNPACK_FLIP_Y_WEBGL,o.flipY),e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,o.premultiplyAlpha),e.pixelStorei(e.UNPACK_ALIGNMENT,o.unpackAlignment),e.pixelStorei(e.UNPACK_COLORSPACE_CONVERSION_WEBGL,h);const d=o.isCompressedTexture||o.image[0].isCompressedTexture,p=o.image[0]&&o.image[0].isDataTexture,f=[];for(let e=0;e<6;e++)f[e]=d||p?p?o.image[e].image:o.image[e]:m(o.image[e],!0,i.maxCubemapSize),f[e]=k(o,f[e]);const _=f[0],b=s.convert(o.format,o.colorSpace),x=s.convert(o.type),w=y(o.internalFormat,b,x,o.colorSpace),E=!0!==o.isVideoTexture,T=void 0===u.__version||!0===c,S=l.dataReady;let M,C=v(o,_);if(I(e.TEXTURE_CUBE_MAP,o),d){E&&T&&n.texStorage2D(e.TEXTURE_CUBE_MAP,C,w,_.width,_.height);for(let t=0;t<6;t++){M=f[t].mipmaps;for(let r=0;r<M.length;r++){const i=M[r];o.format!==Ve?null!==b?E?S&&n.compressedTexSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,b,i.data):n.compressedTexImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,w,i.width,i.height,0,i.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,0,0,i.width,i.height,b,x,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r,w,i.width,i.height,0,b,x,i.data)}}}else{if(M=o.mipmaps,E&&T){M.length>0&&C++;const t=z(f[0]);n.texStorage2D(e.TEXTURE_CUBE_MAP,C,w,t.width,t.height)}for(let t=0;t<6;t++)if(p){E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,f[t].width,f[t].height,b,x,f[t].data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,f[t].width,f[t].height,0,b,x,f[t].data);for(let r=0;r<M.length;r++){const i=M[r].image[t].image;E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,i.width,i.height,b,x,i.data):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,w,i.width,i.height,0,b,x,i.data)}}else{E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,0,0,b,x,f[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,0,w,b,x,f[t]);for(let r=0;r<M.length;r++){const i=M[r];E?S&&n.texSubImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,0,0,b,x,i.image[t]):n.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+t,r+1,w,b,x,i.image[t])}}}g(o)&&A(e.TEXTURE_CUBE_MAP),u.__version=l.version,o.onUpdate&&o.onUpdate(o)}t.__version=o.version}(a,t,o):n.bindTexture(e.TEXTURE_CUBE_MAP,a.__webglTexture,e.TEXTURE0+o)},this.rebindTextures=function(t,n,i){const s=r.get(t);void 0!==n&&P(s.__webglFramebuffer,t,t.texture,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,0),void 0!==i&&O(t)},this.setupRenderTarget=function(t){const i=t.texture,a=r.get(t),c=r.get(i);t.addEventListener("dispose",x);const l=t.textures,u=!0===t.isWebGLCubeRenderTarget,h=l.length>1;if(h||(void 0===c.__webglTexture&&(c.__webglTexture=e.createTexture()),c.__version=i.version,o.memory.textures++),u){a.__webglFramebuffer=[];for(let t=0;t<6;t++)if(i.mipmaps&&i.mipmaps.length>0){a.__webglFramebuffer[t]=[];for(let n=0;n<i.mipmaps.length;n++)a.__webglFramebuffer[t][n]=e.createFramebuffer()}else a.__webglFramebuffer[t]=e.createFramebuffer()}else{if(i.mipmaps&&i.mipmaps.length>0){a.__webglFramebuffer=[];for(let t=0;t<i.mipmaps.length;t++)a.__webglFramebuffer[t]=e.createFramebuffer()}else a.__webglFramebuffer=e.createFramebuffer();if(h)for(let t=0,n=l.length;t<n;t++){const n=r.get(l[t]);void 0===n.__webglTexture&&(n.__webglTexture=e.createTexture(),o.memory.textures++)}if(t.samples>0&&!1===U(t)){a.__webglMultisampledFramebuffer=e.createFramebuffer(),a.__webglColorRenderbuffer=[],n.bindFramebuffer(e.FRAMEBUFFER,a.__webglMultisampledFramebuffer);for(let n=0;n<l.length;n++){const r=l[n];a.__webglColorRenderbuffer[n]=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,a.__webglColorRenderbuffer[n]);const i=s.convert(r.format,r.colorSpace),o=s.convert(r.type),c=y(r.internalFormat,i,o,r.colorSpace,!0===t.isXRRenderTarget),u=F(t);e.renderbufferStorageMultisample(e.RENDERBUFFER,u,c,t.width,t.height),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+n,e.RENDERBUFFER,a.__webglColorRenderbuffer[n])}e.bindRenderbuffer(e.RENDERBUFFER,null),t.depthBuffer&&(a.__webglDepthRenderbuffer=e.createRenderbuffer(),D(a.__webglDepthRenderbuffer,t,!0)),n.bindFramebuffer(e.FRAMEBUFFER,null)}}if(u){n.bindTexture(e.TEXTURE_CUBE_MAP,c.__webglTexture),I(e.TEXTURE_CUBE_MAP,i);for(let n=0;n<6;n++)if(i.mipmaps&&i.mipmaps.length>0)for(let r=0;r<i.mipmaps.length;r++)P(a.__webglFramebuffer[n][r],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,r);else P(a.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,e.TEXTURE_CUBE_MAP_POSITIVE_X+n,0);g(i)&&A(e.TEXTURE_CUBE_MAP),n.unbindTexture()}else if(h){for(let i=0,s=l.length;i<s;i++){const s=l[i],o=r.get(s);n.bindTexture(e.TEXTURE_2D,o.__webglTexture),I(e.TEXTURE_2D,s),P(a.__webglFramebuffer,t,s,e.COLOR_ATTACHMENT0+i,e.TEXTURE_2D,0),g(s)&&A(e.TEXTURE_2D)}n.unbindTexture()}else{let r=e.TEXTURE_2D;if((t.isWebGL3DRenderTarget||t.isWebGLArrayRenderTarget)&&(r=t.isWebGL3DRenderTarget?e.TEXTURE_3D:e.TEXTURE_2D_ARRAY),n.bindTexture(r,c.__webglTexture),I(r,i),i.mipmaps&&i.mipmaps.length>0)for(let n=0;n<i.mipmaps.length;n++)P(a.__webglFramebuffer[n],t,i,e.COLOR_ATTACHMENT0,r,n);else P(a.__webglFramebuffer,t,i,e.COLOR_ATTACHMENT0,r,0);g(i)&&A(r),n.unbindTexture()}t.depthBuffer&&O(t)},this.updateRenderTargetMipmap=function(t){const i=t.textures;for(let s=0,o=i.length;s<o;s++){const o=i[s];if(g(o)){const i=t.isWebGLCubeRenderTarget?e.TEXTURE_CUBE_MAP:e.TEXTURE_2D,s=r.get(o).__webglTexture;n.bindTexture(i,s),A(i),n.unbindTexture()}}},this.updateMultisampleRenderTarget=function(t){if(t.samples>0)if(!1===U(t)){const i=t.textures,s=t.width,o=t.height;let a=e.COLOR_BUFFER_BIT;const l=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT,u=r.get(t),h=i.length>1;if(h)for(let t=0;t<i.length;t++)n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,null),n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,null,0);n.bindFramebuffer(e.READ_FRAMEBUFFER,u.__webglMultisampledFramebuffer),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglFramebuffer);for(let n=0;n<i.length;n++){if(t.resolveDepthBuffer&&(t.depthBuffer&&(a|=e.DEPTH_BUFFER_BIT),t.stencilBuffer&&t.resolveStencilBuffer&&(a|=e.STENCIL_BUFFER_BIT)),h){e.framebufferRenderbuffer(e.READ_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.RENDERBUFFER,u.__webglColorRenderbuffer[n]);const t=r.get(i[n]).__webglTexture;e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t,0)}e.blitFramebuffer(0,0,s,o,0,0,s,o,a,e.NEAREST),!0===c&&(L.length=0,N.length=0,L.push(e.COLOR_ATTACHMENT0+n),t.depthBuffer&&!1===t.resolveDepthBuffer&&(L.push(l),N.push(l),e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,N)),e.invalidateFramebuffer(e.READ_FRAMEBUFFER,L))}if(n.bindFramebuffer(e.READ_FRAMEBUFFER,null),n.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),h)for(let t=0;t<i.length;t++){n.bindFramebuffer(e.FRAMEBUFFER,u.__webglMultisampledFramebuffer),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.RENDERBUFFER,u.__webglColorRenderbuffer[t]);const s=r.get(i[t]).__webglTexture;n.bindFramebuffer(e.FRAMEBUFFER,u.__webglFramebuffer),e.framebufferTexture2D(e.DRAW_FRAMEBUFFER,e.COLOR_ATTACHMENT0+t,e.TEXTURE_2D,s,0)}n.bindFramebuffer(e.DRAW_FRAMEBUFFER,u.__webglMultisampledFramebuffer)}else if(t.depthBuffer&&!1===t.resolveDepthBuffer&&c){const n=t.stencilBuffer?e.DEPTH_STENCIL_ATTACHMENT:e.DEPTH_ATTACHMENT;e.invalidateFramebuffer(e.DRAW_FRAMEBUFFER,[n])}},this.setupDepthRenderbuffer=O,this.setupFrameBufferTexture=P,this.useMultisampledRTT=U}function Qc(e,t){return{convert:function(n,r=Kt){let i;const s=fr.getTransfer(r);if(n===Ie)return e.UNSIGNED_BYTE;if(n===Fe)return e.UNSIGNED_SHORT_4_4_4_4;if(n===Ue)return e.UNSIGNED_SHORT_5_5_5_1;if(n===ze)return e.UNSIGNED_INT_5_9_9_9_REV;if(n===Re)return e.BYTE;if(n===Be)return e.SHORT;if(n===Pe)return e.UNSIGNED_SHORT;if(n===De)return e.INT;if(n===Oe)return e.UNSIGNED_INT;if(n===Le)return e.FLOAT;if(n===Ne)return e.HALF_FLOAT;if(n===Ge)return e.ALPHA;if(n===je)return e.RGB;if(n===Ve)return e.RGBA;if(n===Qe)return e.LUMINANCE;if(n===He)return e.LUMINANCE_ALPHA;if(n===We)return e.DEPTH_COMPONENT;if(n===qe)return e.DEPTH_STENCIL;if(n===Xe)return e.RED;if(n===Ke)return e.RED_INTEGER;if(n===Ye)return e.RG;if(n===Je)return e.RG_INTEGER;if(n===$e)return e.RGBA_INTEGER;if(n===Ze||n===et||n===tt||n===nt)if(s===tn){if(i=t.get("WEBGL_compressed_texture_s3tc_srgb"),null===i)return null;if(n===Ze)return i.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===et)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===tt)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===nt)return i.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(i=t.get("WEBGL_compressed_texture_s3tc"),null===i)return null;if(n===Ze)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===et)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===tt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===nt)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(n===rt||n===it||n===st||n===ot){if(i=t.get("WEBGL_compressed_texture_pvrtc"),null===i)return null;if(n===rt)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===it)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===st)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===ot)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(n===at||n===ct||n===lt){if(i=t.get("WEBGL_compressed_texture_etc"),null===i)return null;if(n===at||n===ct)return s===tn?i.COMPRESSED_SRGB8_ETC2:i.COMPRESSED_RGB8_ETC2;if(n===lt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:i.COMPRESSED_RGBA8_ETC2_EAC}if(n===ut||n===ht||n===dt||n===pt||n===ft||n===mt||n===gt||n===At||n===yt||n===_t||n===vt||n===bt||n===xt||n===wt){if(i=t.get("WEBGL_compressed_texture_astc"),null===i)return null;if(n===ut)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:i.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ht)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:i.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===dt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:i.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===pt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:i.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===ft)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:i.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===mt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:i.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===gt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:i.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===At)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:i.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===yt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:i.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===_t)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:i.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===vt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:i.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===bt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:i.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===xt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:i.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===wt)return s===tn?i.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:i.COMPRESSED_RGBA_ASTC_12x12_KHR}if(n===Et||n===Tt||n===St){if(i=t.get("EXT_texture_compression_bptc"),null===i)return null;if(n===Et)return s===tn?i.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:i.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===Tt)return i.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===St)return i.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(n===Mt||n===Ct||n===It||n===Rt){if(i=t.get("EXT_texture_compression_rgtc"),null===i)return null;if(n===Et)return i.COMPRESSED_RED_RGTC1_EXT;if(n===Ct)return i.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===It)return i.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===Rt)return i.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return n===ke?e.UNSIGNED_INT_24_8:void 0!==e[n]?e[n]:null}}}class Hc extends no{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Wc extends Li{constructor(){super(),this.isGroup=!0,this.type="Group"}}const qc={type:"move"};class Xc{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new Wc,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new Wc,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Pr,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Pr),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new Wc,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Pr,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Pr),this._grip}dispatchEvent(e){return null!==this._targetRay&&this._targetRay.dispatchEvent(e),null!==this._grip&&this._grip.dispatchEvent(e),null!==this._hand&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(e,t,n){let r=null,i=null,s=null;const o=this._targetRay,a=this._grip,c=this._hand;if(e&&"visible-blurred"!==t.session.visibilityState){if(c&&e.hand){s=!0;for(const r of e.hand.values()){const e=t.getJointPose(r,n),i=this._getHandJoint(c,r);null!==e&&(i.matrix.fromArray(e.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.matrixWorldNeedsUpdate=!0,i.jointRadius=e.radius),i.visible=null!==e}const r=c.joints["index-finger-tip"],i=c.joints["thumb-tip"],o=r.position.distanceTo(i.position),a=.02,l=.005;c.inputState.pinching&&o>a+l?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&o<=a-l&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else null!==a&&e.gripSpace&&(i=t.getPose(e.gripSpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,i.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(i.linearVelocity)):a.hasLinearVelocity=!1,i.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(i.angularVelocity)):a.hasAngularVelocity=!1));null!==o&&(r=t.getPose(e.targetRaySpace,n),null===r&&null!==i&&(r=i),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(qc)))}return null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==i),null!==c&&(c.visible=null!==s),this}_getHandJoint(e,t){if(void 0===e.joints[t.jointName]){const n=new Wc;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class Kc{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,n){if(null===this.texture){const r=new wr;e.properties.get(r).__webglTexture=t.texture,t.depthNear==n.depthNear&&t.depthFar==n.depthFar||(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(null!==this.texture&&null===this.mesh){const t=e.cameras[0].viewport,n=new Js({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Qs(new Ao(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}}class Yc extends jn{constructor(e,t){super();const n=this;let r=null,i=1,s=null,o="local-floor",a=1,c=null,l=null,u=null,h=null,d=null,p=null;const f=new Kc,m=t.getContextAttributes();let g=null,A=null;const y=[],_=[],v=new er;let b=null;const x=new no;x.layers.enable(1),x.viewport=new Er;const w=new no;w.layers.enable(2),w.viewport=new Er;const E=[x,w],T=new Hc;T.layers.enable(1),T.layers.enable(2);let S=null,M=null;function C(e){const t=_.indexOf(e.inputSource);if(-1===t)return;const n=y[t];void 0!==n&&(n.update(e.inputSource,e.frame,c||s),n.dispatchEvent({type:e.type,data:e.inputSource}))}function I(){r.removeEventListener("select",C),r.removeEventListener("selectstart",C),r.removeEventListener("selectend",C),r.removeEventListener("squeeze",C),r.removeEventListener("squeezestart",C),r.removeEventListener("squeezeend",C),r.removeEventListener("end",I),r.removeEventListener("inputsourceschange",R);for(let e=0;e<y.length;e++){const t=_[e];null!==t&&(_[e]=null,y[e].disconnect(t))}S=null,M=null,f.reset(),e.setRenderTarget(g),d=null,h=null,u=null,r=null,A=null,L.stop(),n.isPresenting=!1,e.setPixelRatio(b),e.setSize(v.width,v.height,!1),n.dispatchEvent({type:"sessionend"})}function R(e){for(let t=0;t<e.removed.length;t++){const n=e.removed[t],r=_.indexOf(n);r>=0&&(_[r]=null,y[r].disconnect(n))}for(let t=0;t<e.added.length;t++){const n=e.added[t];let r=_.indexOf(n);if(-1===r){for(let e=0;e<y.length;e++){if(e>=_.length){_.push(n),r=e;break}if(null===_[e]){_[e]=n,r=e;break}}if(-1===r)break}const i=y[r];i&&i.connect(n)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(e){let t=y[e];return void 0===t&&(t=new Xc,y[e]=t),t.getTargetRaySpace()},this.getControllerGrip=function(e){let t=y[e];return void 0===t&&(t=new Xc,y[e]=t),t.getGripSpace()},this.getHand=function(e){let t=y[e];return void 0===t&&(t=new Xc,y[e]=t),t.getHandSpace()},this.setFramebufferScaleFactor=function(e){i=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(e){o=e,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||s},this.setReferenceSpace=function(e){c=e},this.getBaseLayer=function(){return null!==h?h:d},this.getBinding=function(){return u},this.getFrame=function(){return p},this.getSession=function(){return r},this.setSession=async function(l){if(r=l,null!==r){if(g=e.getRenderTarget(),r.addEventListener("select",C),r.addEventListener("selectstart",C),r.addEventListener("selectend",C),r.addEventListener("squeeze",C),r.addEventListener("squeezestart",C),r.addEventListener("squeezeend",C),r.addEventListener("end",I),r.addEventListener("inputsourceschange",R),!0!==m.xrCompatible&&await t.makeXRCompatible(),b=e.getPixelRatio(),e.getSize(v),void 0===r.renderState.layers){const n={antialias:m.antialias,alpha:!0,depth:m.depth,stencil:m.stencil,framebufferScaleFactor:i};d=new XRWebGLLayer(r,t,n),r.updateRenderState({baseLayer:d}),e.setPixelRatio(1),e.setSize(d.framebufferWidth,d.framebufferHeight,!1),A=new Sr(d.framebufferWidth,d.framebufferHeight,{format:Ve,type:Ie,colorSpace:e.outputColorSpace,stencilBuffer:m.stencil})}else{let n=null,s=null,o=null;m.depth&&(o=m.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,n=m.stencil?qe:We,s=m.stencil?ke:Oe);const a={colorFormat:t.RGBA8,depthFormat:o,scaleFactor:i};u=new XRWebGLBinding(r,t),h=u.createProjectionLayer(a),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),A=new Sr(h.textureWidth,h.textureHeight,{format:Ve,type:Ie,depthTexture:new ta(h.textureWidth,h.textureHeight,s,void 0,void 0,void 0,void 0,void 0,void 0,n),stencilBuffer:m.stencil,colorSpace:e.outputColorSpace,samples:m.antialias?4:0,resolveDepthBuffer:!1===h.ignoreDepthValues})}A.isXRRenderTarget=!0,this.setFoveation(a),c=null,s=await r.requestReferenceSpace(o),L.setContext(r),L.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==r)return r.environmentBlendMode};const B=new Pr,P=new Pr;function D(e,t){null===t?e.matrixWorld.copy(e.matrix):e.matrixWorld.multiplyMatrices(t.matrixWorld,e.matrix),e.matrixWorldInverse.copy(e.matrixWorld).invert()}this.updateCamera=function(e){if(null===r)return;null!==f.texture&&(e.near=f.depthNear,e.far=f.depthFar),T.near=w.near=x.near=e.near,T.far=w.far=x.far=e.far,S===T.near&&M===T.far||(r.updateRenderState({depthNear:T.near,depthFar:T.far}),S=T.near,M=T.far,x.near=S,x.far=M,w.near=S,w.far=M,x.updateProjectionMatrix(),w.updateProjectionMatrix(),e.updateProjectionMatrix());const t=e.parent,n=T.cameras;D(T,t);for(let e=0;e<n.length;e++)D(n[e],t);2===n.length?function(e,t,n){B.setFromMatrixPosition(t.matrixWorld),P.setFromMatrixPosition(n.matrixWorld);const r=B.distanceTo(P),i=t.projectionMatrix.elements,s=n.projectionMatrix.elements,o=i[14]/(i[10]-1),a=i[14]/(i[10]+1),c=(i[9]+1)/i[5],l=(i[9]-1)/i[5],u=(i[8]-1)/i[0],h=(s[8]+1)/s[0],d=o*u,p=o*h,f=r/(-u+h),m=f*-u;t.matrixWorld.decompose(e.position,e.quaternion,e.scale),e.translateX(m),e.translateZ(f),e.matrixWorld.compose(e.position,e.quaternion,e.scale),e.matrixWorldInverse.copy(e.matrixWorld).invert();const g=o+f,A=a+f,y=d-m,_=p+(r-m),v=c*a/A*g,b=l*a/A*g;e.projectionMatrix.makePerspective(y,_,v,b,g,A),e.projectionMatrixInverse.copy(e.projectionMatrix).invert()}(T,x,w):T.projectionMatrix.copy(x.projectionMatrix),function(e,t,n){null===n?e.matrix.copy(t.matrixWorld):(e.matrix.copy(n.matrixWorld),e.matrix.invert(),e.matrix.multiply(t.matrixWorld));e.matrix.decompose(e.position,e.quaternion,e.scale),e.updateMatrixWorld(!0),e.projectionMatrix.copy(t.projectionMatrix),e.projectionMatrixInverse.copy(t.projectionMatrixInverse),e.isPerspectiveCamera&&(e.fov=2*Wn*Math.atan(1/e.projectionMatrix.elements[5]),e.zoom=1)}(e,T,t)},this.getCamera=function(){return T},this.getFoveation=function(){if(null!==h||null!==d)return a},this.setFoveation=function(e){a=e,null!==h&&(h.fixedFoveation=e),null!==d&&void 0!==d.fixedFoveation&&(d.fixedFoveation=e)},this.hasDepthSensing=function(){return null!==f.texture},this.getDepthSensingMesh=function(){return f.getMesh(T)};let O=null;const L=new mo;L.setAnimationLoop((function(t,i){if(l=i.getViewerPose(c||s),p=i,null!==l){const t=l.views;null!==d&&(e.setRenderTargetFramebuffer(A,d.framebuffer),e.setRenderTarget(A));let n=!1;t.length!==T.cameras.length&&(T.cameras.length=0,n=!0);for(let r=0;r<t.length;r++){const i=t[r];let s=null;if(null!==d)s=d.getViewport(i);else{const t=u.getViewSubImage(h,i);s=t.viewport,0===r&&(e.setRenderTargetTextures(A,t.colorTexture,h.ignoreDepthValues?void 0:t.depthStencilTexture),e.setRenderTarget(A))}let o=E[r];void 0===o&&(o=new no,o.layers.enable(r),o.viewport=new Er,E[r]=o),o.matrix.fromArray(i.transform.matrix),o.matrix.decompose(o.position,o.quaternion,o.scale),o.projectionMatrix.fromArray(i.projectionMatrix),o.projectionMatrixInverse.copy(o.projectionMatrix).invert(),o.viewport.set(s.x,s.y,s.width,s.height),0===r&&(T.matrix.copy(o.matrix),T.matrix.decompose(T.position,T.quaternion,T.scale)),!0===n&&T.cameras.push(o)}const i=r.enabledFeatures;if(i&&i.includes("depth-sensing")){const n=u.getDepthInformation(t[0]);n&&n.isValid&&n.texture&&f.init(e,n,r.renderState)}}for(let e=0;e<y.length;e++){const t=_[e],n=y[e];null!==t&&void 0!==n&&n.update(t,i,c||s)}O&&O(t,i),i.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:i}),p=null})),this.setAnimationLoop=function(e){O=e},this.dispose=function(){}}}const Jc=new yi,$c=new ci;function Zc(e,t){function n(e,t){!0===e.matrixAutoUpdate&&e.updateMatrix(),t.value.copy(e.matrix)}function r(e,r){e.opacity.value=r.opacity,r.color&&e.diffuse.value.copy(r.color),r.emissive&&e.emissive.value.copy(r.emissive).multiplyScalar(r.emissiveIntensity),r.map&&(e.map.value=r.map,n(r.map,e.mapTransform)),r.alphaMap&&(e.alphaMap.value=r.alphaMap,n(r.alphaMap,e.alphaMapTransform)),r.bumpMap&&(e.bumpMap.value=r.bumpMap,n(r.bumpMap,e.bumpMapTransform),e.bumpScale.value=r.bumpScale,r.side===m&&(e.bumpScale.value*=-1)),r.normalMap&&(e.normalMap.value=r.normalMap,n(r.normalMap,e.normalMapTransform),e.normalScale.value.copy(r.normalScale),r.side===m&&e.normalScale.value.negate()),r.displacementMap&&(e.displacementMap.value=r.displacementMap,n(r.displacementMap,e.displacementMapTransform),e.displacementScale.value=r.displacementScale,e.displacementBias.value=r.displacementBias),r.emissiveMap&&(e.emissiveMap.value=r.emissiveMap,n(r.emissiveMap,e.emissiveMapTransform)),r.specularMap&&(e.specularMap.value=r.specularMap,n(r.specularMap,e.specularMapTransform)),r.alphaTest>0&&(e.alphaTest.value=r.alphaTest);const i=t.get(r),s=i.envMap,o=i.envMapRotation;s&&(e.envMap.value=s,Jc.copy(o),Jc.x*=-1,Jc.y*=-1,Jc.z*=-1,s.isCubeTexture&&!1===s.isRenderTargetTexture&&(Jc.y*=-1,Jc.z*=-1),e.envMapRotation.value.setFromMatrix4($c.makeRotationFromEuler(Jc)),e.flipEnvMap.value=s.isCubeTexture&&!1===s.isRenderTargetTexture?-1:1,e.reflectivity.value=r.reflectivity,e.ior.value=r.ior,e.refractionRatio.value=r.refractionRatio),r.lightMap&&(e.lightMap.value=r.lightMap,e.lightMapIntensity.value=r.lightMapIntensity,n(r.lightMap,e.lightMapTransform)),r.aoMap&&(e.aoMap.value=r.aoMap,e.aoMapIntensity.value=r.aoMapIntensity,n(r.aoMap,e.aoMapTransform))}return{refreshFogUniforms:function(t,n){n.color.getRGB(t.fogColor.value,Ks(e)),n.isFog?(t.fogNear.value=n.near,t.fogFar.value=n.far):n.isFogExp2&&(t.fogDensity.value=n.density)},refreshMaterialUniforms:function(e,i,s,o,a){i.isMeshBasicMaterial||i.isMeshLambertMaterial?r(e,i):i.isMeshToonMaterial?(r(e,i),function(e,t){t.gradientMap&&(e.gradientMap.value=t.gradientMap)}(e,i)):i.isMeshPhongMaterial?(r(e,i),function(e,t){e.specular.value.copy(t.specular),e.shininess.value=Math.max(t.shininess,1e-4)}(e,i)):i.isMeshStandardMaterial?(r(e,i),function(e,t){e.metalness.value=t.metalness,t.metalnessMap&&(e.metalnessMap.value=t.metalnessMap,n(t.metalnessMap,e.metalnessMapTransform));e.roughness.value=t.roughness,t.roughnessMap&&(e.roughnessMap.value=t.roughnessMap,n(t.roughnessMap,e.roughnessMapTransform));t.envMap&&(e.envMapIntensity.value=t.envMapIntensity)}(e,i),i.isMeshPhysicalMaterial&&function(e,t,r){e.ior.value=t.ior,t.sheen>0&&(e.sheenColor.value.copy(t.sheenColor).multiplyScalar(t.sheen),e.sheenRoughness.value=t.sheenRoughness,t.sheenColorMap&&(e.sheenColorMap.value=t.sheenColorMap,n(t.sheenColorMap,e.sheenColorMapTransform)),t.sheenRoughnessMap&&(e.sheenRoughnessMap.value=t.sheenRoughnessMap,n(t.sheenRoughnessMap,e.sheenRoughnessMapTransform)));t.clearcoat>0&&(e.clearcoat.value=t.clearcoat,e.clearcoatRoughness.value=t.clearcoatRoughness,t.clearcoatMap&&(e.clearcoatMap.value=t.clearcoatMap,n(t.clearcoatMap,e.clearcoatMapTransform)),t.clearcoatRoughnessMap&&(e.clearcoatRoughnessMap.value=t.clearcoatRoughnessMap,n(t.clearcoatRoughnessMap,e.clearcoatRoughnessMapTransform)),t.clearcoatNormalMap&&(e.clearcoatNormalMap.value=t.clearcoatNormalMap,n(t.clearcoatNormalMap,e.clearcoatNormalMapTransform),e.clearcoatNormalScale.value.copy(t.clearcoatNormalScale),t.side===m&&e.clearcoatNormalScale.value.negate()));t.dispersion>0&&(e.dispersion.value=t.dispersion);t.iridescence>0&&(e.iridescence.value=t.iridescence,e.iridescenceIOR.value=t.iridescenceIOR,e.iridescenceThicknessMinimum.value=t.iridescenceThicknessRange[0],e.iridescenceThicknessMaximum.value=t.iridescenceThicknessRange[1],t.iridescenceMap&&(e.iridescenceMap.value=t.iridescenceMap,n(t.iridescenceMap,e.iridescenceMapTransform)),t.iridescenceThicknessMap&&(e.iridescenceThicknessMap.value=t.iridescenceThicknessMap,n(t.iridescenceThicknessMap,e.iridescenceThicknessMapTransform)));t.transmission>0&&(e.transmission.value=t.transmission,e.transmissionSamplerMap.value=r.texture,e.transmissionSamplerSize.value.set(r.width,r.height),t.transmissionMap&&(e.transmissionMap.value=t.transmissionMap,n(t.transmissionMap,e.transmissionMapTransform)),e.thickness.value=t.thickness,t.thicknessMap&&(e.thicknessMap.value=t.thicknessMap,n(t.thicknessMap,e.thicknessMapTransform)),e.attenuationDistance.value=t.attenuationDistance,e.attenuationColor.value.copy(t.attenuationColor));t.anisotropy>0&&(e.anisotropyVector.value.set(t.anisotropy*Math.cos(t.anisotropyRotation),t.anisotropy*Math.sin(t.anisotropyRotation)),t.anisotropyMap&&(e.anisotropyMap.value=t.anisotropyMap,n(t.anisotropyMap,e.anisotropyMapTransform)));e.specularIntensity.value=t.specularIntensity,e.specularColor.value.copy(t.specularColor),t.specularColorMap&&(e.specularColorMap.value=t.specularColorMap,n(t.specularColorMap,e.specularColorMapTransform));t.specularIntensityMap&&(e.specularIntensityMap.value=t.specularIntensityMap,n(t.specularIntensityMap,e.specularIntensityMapTransform))}(e,i,a)):i.isMeshMatcapMaterial?(r(e,i),function(e,t){t.matcap&&(e.matcap.value=t.matcap)}(e,i)):i.isMeshDepthMaterial?r(e,i):i.isMeshDistanceMaterial?(r(e,i),function(e,n){const r=t.get(n).light;e.referencePosition.value.setFromMatrixPosition(r.matrixWorld),e.nearDistance.value=r.shadow.camera.near,e.farDistance.value=r.shadow.camera.far}(e,i)):i.isMeshNormalMaterial?r(e,i):i.isLineBasicMaterial?(function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform))}(e,i),i.isLineDashedMaterial&&function(e,t){e.dashSize.value=t.dashSize,e.totalSize.value=t.dashSize+t.gapSize,e.scale.value=t.scale}(e,i)):i.isPointsMaterial?function(e,t,r,i){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.size.value=t.size*r,e.scale.value=.5*i,t.map&&(e.map.value=t.map,n(t.map,e.uvTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i,s,o):i.isSpriteMaterial?function(e,t){e.diffuse.value.copy(t.color),e.opacity.value=t.opacity,e.rotation.value=t.rotation,t.map&&(e.map.value=t.map,n(t.map,e.mapTransform));t.alphaMap&&(e.alphaMap.value=t.alphaMap,n(t.alphaMap,e.alphaMapTransform));t.alphaTest>0&&(e.alphaTest.value=t.alphaTest)}(e,i):i.isShadowMaterial?(e.color.value.copy(i.color),e.opacity.value=i.opacity):i.isShaderMaterial&&(i.uniformsNeedUpdate=!1)}}}function el(e,t,n,r){let i={},s={},o=[];const a=e.getParameter(e.MAX_UNIFORM_BUFFER_BINDINGS);function c(e,t,n,r){const i=e.value,s=t+"_"+n;if(void 0===r[s])return r[s]="number"==typeof i||"boolean"==typeof i?i:i.clone(),!0;{const e=r[s];if("number"==typeof i||"boolean"==typeof i){if(e!==i)return r[s]=i,!0}else if(!1===e.equals(i))return e.copy(i),!0}return!1}function l(e){const t={boundary:0,storage:0};return"number"==typeof e||"boolean"==typeof e?(t.boundary=4,t.storage=4):e.isVector2?(t.boundary=8,t.storage=8):e.isVector3||e.isColor?(t.boundary=16,t.storage=12):e.isVector4?(t.boundary=16,t.storage=16):e.isMatrix3?(t.boundary=48,t.storage=48):e.isMatrix4?(t.boundary=64,t.storage=64):e.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",e),t}function u(t){const n=t.target;n.removeEventListener("dispose",u);const r=o.indexOf(n.__bindingPointIndex);o.splice(r,1),e.deleteBuffer(i[n.id]),delete i[n.id],delete s[n.id]}return{bind:function(e,t){const n=t.program;r.uniformBlockBinding(e,n)},update:function(n,h){let d=i[n.id];void 0===d&&(!function(e){const t=e.uniforms;let n=0;const r=16;for(let e=0,i=t.length;e<i;e++){const i=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0,t=i.length;e<t;e++){const t=i[e],s=Array.isArray(t.value)?t.value:[t.value];for(let e=0,i=s.length;e<i;e++){const i=l(s[e]),o=n%r;0!==o&&r-o<i.boundary&&(n+=r-o),t.__data=new Float32Array(i.storage/Float32Array.BYTES_PER_ELEMENT),t.__offset=n,n+=i.storage}}}const i=n%r;i>0&&(n+=r-i);e.__size=n,e.__cache={}}(n),d=function(t){const n=function(){for(let e=0;e<a;e++)if(-1===o.indexOf(e))return o.push(e),e;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();t.__bindingPointIndex=n;const r=e.createBuffer(),i=t.__size,s=t.usage;return e.bindBuffer(e.UNIFORM_BUFFER,r),e.bufferData(e.UNIFORM_BUFFER,i,s),e.bindBuffer(e.UNIFORM_BUFFER,null),e.bindBufferBase(e.UNIFORM_BUFFER,n,r),r}(n),i[n.id]=d,n.addEventListener("dispose",u));const p=h.program;r.updateUBOMapping(n,p);const f=t.render.frame;s[n.id]!==f&&(!function(t){const n=i[t.id],r=t.uniforms,s=t.__cache;e.bindBuffer(e.UNIFORM_BUFFER,n);for(let t=0,n=r.length;t<n;t++){const n=Array.isArray(r[t])?r[t]:[r[t]];for(let r=0,i=n.length;r<i;r++){const i=n[r];if(!0===c(i,t,r,s)){const t=i.__offset,n=Array.isArray(i.value)?i.value:[i.value];let r=0;for(let s=0;s<n.length;s++){const o=n[s],a=l(o);"number"==typeof o||"boolean"==typeof o?(i.__data[0]=o,e.bufferSubData(e.UNIFORM_BUFFER,t+r,i.__data)):o.isMatrix3?(i.__data[0]=o.elements[0],i.__data[1]=o.elements[1],i.__data[2]=o.elements[2],i.__data[3]=0,i.__data[4]=o.elements[3],i.__data[5]=o.elements[4],i.__data[6]=o.elements[5],i.__data[7]=0,i.__data[8]=o.elements[6],i.__data[9]=o.elements[7],i.__data[10]=o.elements[8],i.__data[11]=0):(o.toArray(i.__data,r),r+=a.storage/Float32Array.BYTES_PER_ELEMENT)}e.bufferSubData(e.UNIFORM_BUFFER,t,i.__data)}}}e.bindBuffer(e.UNIFORM_BUFFER,null)}(n),s[n.id]=f)},dispose:function(){for(const t in i)e.deleteBuffer(i[t]);o=[],i={},s={}}}}class tl{constructor(e={}){const{canvas:t=ar(),context:n=null,depth:i=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:l=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:h=!1}=e;let d;if(this.isWebGLRenderer=!0,null!==n){if("undefined"!=typeof WebGLRenderingContext&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");d=n.getContextAttributes().alpha}else d=o;const p=new Uint32Array(4),A=new Int32Array(4);let y=null,_=null;const v=[],b=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Yt,this.toneMapping=ee,this.toneMappingExposure=1;const x=this;let w=!1,E=0,T=0,S=null,M=-1,C=null;const I=new Er,R=new Er;let B=null;const P=new Ji(0);let D=0,O=t.width,L=t.height,N=1,F=null,U=null;const k=new Er(0,0,O,L),z=new Er(0,0,O,L);let G=!1;const j=new fo;let V=!1,Q=!1;const H=new ci,W=new Pr,q={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let X=!1;function K(){return null===S?N:1}let Y,J,$,Z,te,ne,re,ie,se,oe,ae,ce,le,ue,he,de,pe,fe,me,ge,Ae,ye,_e,ve,be=n;function xe(e,n){return t.getContext(e,n)}try{const e={alpha:!0,depth:i,stencil:s,antialias:a,premultipliedAlpha:c,preserveDrawingBuffer:l,powerPreference:u,failIfMajorPerformanceCaveat:h};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${r}`),t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",Se,!1),t.addEventListener("webglcontextcreationerror",Ce,!1),null===be){const t="webgl2";if(be=xe(t,e),null===be)throw xe(t)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(e){throw console.error("THREE.WebGLRenderer: "+e.message),e}function we(){Y=new Ko(be),Y.init(),ye=new Qc(be,Y),J=new Mo(be,Y,e,ye),$=new jc(be),Z=new $o(be),te=new Cc,ne=new Vc(be,Y,$,te,J,ye,Z),re=new Io(x),ie=new Xo(x),se=new go(be),_e=new To(be,se),oe=new Yo(be,se,Z,_e),ae=new ea(be,oe,se,Z),me=new Zo(be,J,ne),de=new Co(te),ce=new Mc(x,re,ie,Y,J,_e,de),le=new Zc(x,te),ue=new Pc,he=new Uc(Y),fe=new Eo(x,re,ie,$,ae,d,c),pe=new Gc(x,ae,J),ve=new el(be,Z,J,$),ge=new So(be,Y,Z),Ae=new Jo(be,Y,Z),Z.programs=ce.programs,x.capabilities=J,x.extensions=Y,x.properties=te,x.renderLists=ue,x.shadowMap=pe,x.state=$,x.info=Z}we();const Ee=new Yc(x,be);function Te(e){e.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),w=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),w=!1;const e=Z.autoReset,t=pe.enabled,n=pe.autoUpdate,r=pe.needsUpdate,i=pe.type;we(),Z.autoReset=e,pe.enabled=t,pe.autoUpdate=n,pe.needsUpdate=r,pe.type=i}function Ce(e){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",e.statusMessage)}function Re(e){const t=e.target;t.removeEventListener("dispose",Re),function(e){(function(e){const t=te.get(e).programs;void 0!==t&&(t.forEach((function(e){ce.releaseProgram(e)})),e.isShaderMaterial&&ce.releaseShaderCache(e))})(e),te.remove(e)}(t)}function Be(e,t,n){!0===e.transparent&&e.side===g&&!1===e.forceSinglePass?(e.side=m,e.needsUpdate=!0,qe(e,t,n),e.side=f,e.needsUpdate=!0,qe(e,t,n),e.side=g):qe(e,t,n)}this.xr=Ee,this.getContext=function(){return be},this.getContextAttributes=function(){return be.getContextAttributes()},this.forceContextLoss=function(){const e=Y.get("WEBGL_lose_context");e&&e.loseContext()},this.forceContextRestore=function(){const e=Y.get("WEBGL_lose_context");e&&e.restoreContext()},this.getPixelRatio=function(){return N},this.setPixelRatio=function(e){void 0!==e&&(N=e,this.setSize(O,L,!1))},this.getSize=function(e){return e.set(O,L)},this.setSize=function(e,n,r=!0){Ee.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(O=e,L=n,t.width=Math.floor(e*N),t.height=Math.floor(n*N),!0===r&&(t.style.width=e+"px",t.style.height=n+"px"),this.setViewport(0,0,e,n))},this.getDrawingBufferSize=function(e){return e.set(O*N,L*N).floor()},this.setDrawingBufferSize=function(e,n,r){O=e,L=n,N=r,t.width=Math.floor(e*r),t.height=Math.floor(n*r),this.setViewport(0,0,e,n)},this.getCurrentViewport=function(e){return e.copy(I)},this.getViewport=function(e){return e.copy(k)},this.setViewport=function(e,t,n,r){e.isVector4?k.set(e.x,e.y,e.z,e.w):k.set(e,t,n,r),$.viewport(I.copy(k).multiplyScalar(N).round())},this.getScissor=function(e){return e.copy(z)},this.setScissor=function(e,t,n,r){e.isVector4?z.set(e.x,e.y,e.z,e.w):z.set(e,t,n,r),$.scissor(R.copy(z).multiplyScalar(N).round())},this.getScissorTest=function(){return G},this.setScissorTest=function(e){$.setScissorTest(G=e)},this.setOpaqueSort=function(e){F=e},this.setTransparentSort=function(e){U=e},this.getClearColor=function(e){return e.copy(fe.getClearColor())},this.setClearColor=function(){fe.setClearColor.apply(fe,arguments)},this.getClearAlpha=function(){return fe.getClearAlpha()},this.setClearAlpha=function(){fe.setClearAlpha.apply(fe,arguments)},this.clear=function(e=!0,t=!0,n=!0){let r=0;if(e){let e=!1;if(null!==S){const t=S.texture.format;e=t===$e||t===Je||t===Ke}if(e){const e=S.texture.type,t=e===Ie||e===Oe||e===Pe||e===ke||e===Fe||e===Ue,n=fe.getClearColor(),r=fe.getClearAlpha(),i=n.r,s=n.g,o=n.b;t?(p[0]=i,p[1]=s,p[2]=o,p[3]=r,be.clearBufferuiv(be.COLOR,0,p)):(A[0]=i,A[1]=s,A[2]=o,A[3]=r,be.clearBufferiv(be.COLOR,0,A))}else r|=be.COLOR_BUFFER_BIT}t&&(r|=be.DEPTH_BUFFER_BIT),n&&(r|=be.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),be.clear(r)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",Se,!1),t.removeEventListener("webglcontextcreationerror",Ce,!1),ue.dispose(),he.dispose(),te.dispose(),re.dispose(),ie.dispose(),ae.dispose(),_e.dispose(),ve.dispose(),ce.dispose(),Ee.dispose(),Ee.removeEventListener("sessionstart",Le),Ee.removeEventListener("sessionend",ze),Ge.stop()},this.renderBufferDirect=function(e,t,n,r,i,s){null===t&&(t=q);const o=i.isMesh&&i.matrixWorld.determinant()<0,a=function(e,t,n,r,i){!0!==t.isScene&&(t=q);ne.resetTextureUnits();const s=t.fog,o=r.isMeshStandardMaterial?t.environment:null,a=null===S?x.outputColorSpace:!0===S.isXRRenderTarget?S.texture.colorSpace:Jt,c=(r.isMeshStandardMaterial?ie:re).get(r.envMap||o),l=!0===r.vertexColors&&!!n.attributes.color&&4===n.attributes.color.itemSize,u=!!n.attributes.tangent&&(!!r.normalMap||r.anisotropy>0),h=!!n.morphAttributes.position,d=!!n.morphAttributes.normal,p=!!n.morphAttributes.color;let f=ee;r.toneMapped&&(null!==S&&!0!==S.isXRRenderTarget||(f=x.toneMapping));const m=n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color,g=void 0!==m?m.length:0,A=te.get(r),y=_.state.lights;if(!0===V&&(!0===Q||e!==C)){const t=e===C&&r.id===M;de.setState(r,e,t)}let v=!1;r.version===A.__version?A.needsLights&&A.lightsStateVersion!==y.state.version||A.outputColorSpace!==a||i.isBatchedMesh&&!1===A.batching?v=!0:i.isBatchedMesh||!0!==A.batching?i.isBatchedMesh&&!0===A.batchingColor&&null===i.colorTexture||i.isBatchedMesh&&!1===A.batchingColor&&null!==i.colorTexture||i.isInstancedMesh&&!1===A.instancing?v=!0:i.isInstancedMesh||!0!==A.instancing?i.isSkinnedMesh&&!1===A.skinning?v=!0:i.isSkinnedMesh||!0!==A.skinning?i.isInstancedMesh&&!0===A.instancingColor&&null===i.instanceColor||i.isInstancedMesh&&!1===A.instancingColor&&null!==i.instanceColor||i.isInstancedMesh&&!0===A.instancingMorph&&null===i.morphTexture||i.isInstancedMesh&&!1===A.instancingMorph&&null!==i.morphTexture||A.envMap!==c||!0===r.fog&&A.fog!==s?v=!0:void 0===A.numClippingPlanes||A.numClippingPlanes===de.numPlanes&&A.numIntersection===de.numIntersection?(A.vertexAlphas!==l||A.vertexTangents!==u||A.morphTargets!==h||A.morphNormals!==d||A.morphColors!==p||A.toneMapping!==f||A.morphTargetsCount!==g)&&(v=!0):v=!0:v=!0:v=!0:v=!0:(v=!0,A.__version=r.version);let b=A.currentProgram;!0===v&&(b=qe(r,t,i));let w=!1,E=!1,T=!1;const I=b.getUniforms(),R=A.uniforms;$.useProgram(b.program)&&(w=!0,E=!0,T=!0);r.id!==M&&(M=r.id,E=!0);if(w||C!==e){I.setValue(be,"projectionMatrix",e.projectionMatrix),I.setValue(be,"viewMatrix",e.matrixWorldInverse);const t=I.map.cameraPosition;void 0!==t&&t.setValue(be,W.setFromMatrixPosition(e.matrixWorld)),J.logarithmicDepthBuffer&&I.setValue(be,"logDepthBufFC",2/(Math.log(e.far+1)/Math.LN2)),(r.isMeshPhongMaterial||r.isMeshToonMaterial||r.isMeshLambertMaterial||r.isMeshBasicMaterial||r.isMeshStandardMaterial||r.isShaderMaterial)&&I.setValue(be,"isOrthographic",!0===e.isOrthographicCamera),C!==e&&(C=e,E=!0,T=!0)}if(i.isSkinnedMesh){I.setOptional(be,i,"bindMatrix"),I.setOptional(be,i,"bindMatrixInverse");const e=i.skeleton;e&&(null===e.boneTexture&&e.computeBoneTexture(),I.setValue(be,"boneTexture",e.boneTexture,ne))}i.isBatchedMesh&&(I.setOptional(be,i,"batchingTexture"),I.setValue(be,"batchingTexture",i._matricesTexture,ne),I.setOptional(be,i,"batchingColorTexture"),null!==i._colorsTexture&&I.setValue(be,"batchingColorTexture",i._colorsTexture,ne));const B=n.morphAttributes;void 0===B.position&&void 0===B.normal&&void 0===B.color||me.update(i,n,b);(E||A.receiveShadow!==i.receiveShadow)&&(A.receiveShadow=i.receiveShadow,I.setValue(be,"receiveShadow",i.receiveShadow));r.isMeshGouraudMaterial&&null!==r.envMap&&(R.envMap.value=c,R.flipEnvMap.value=c.isCubeTexture&&!1===c.isRenderTargetTexture?-1:1);r.isMeshStandardMaterial&&null===r.envMap&&null!==t.environment&&(R.envMapIntensity.value=t.environmentIntensity);E&&(I.setValue(be,"toneMappingExposure",x.toneMappingExposure),A.needsLights&&(D=T,(P=R).ambientLightColor.needsUpdate=D,P.lightProbe.needsUpdate=D,P.directionalLights.needsUpdate=D,P.directionalLightShadows.needsUpdate=D,P.pointLights.needsUpdate=D,P.pointLightShadows.needsUpdate=D,P.spotLights.needsUpdate=D,P.spotLightShadows.needsUpdate=D,P.rectAreaLights.needsUpdate=D,P.hemisphereLights.needsUpdate=D),s&&!0===r.fog&&le.refreshFogUniforms(R,s),le.refreshMaterialUniforms(R,r,N,L,_.state.transmissionRenderTarget[e.id]),oc.upload(be,Xe(A),R,ne));var P,D;r.isShaderMaterial&&!0===r.uniformsNeedUpdate&&(oc.upload(be,Xe(A),R,ne),r.uniformsNeedUpdate=!1);r.isSpriteMaterial&&I.setValue(be,"center",i.center);if(I.setValue(be,"modelViewMatrix",i.modelViewMatrix),I.setValue(be,"normalMatrix",i.normalMatrix),I.setValue(be,"modelMatrix",i.matrixWorld),r.isShaderMaterial||r.isRawShaderMaterial){const e=r.uniformsGroups;for(let t=0,n=e.length;t<n;t++){const n=e[t];ve.update(n,b),ve.bind(n,b)}}return b}(e,t,n,r,i);$.setMaterial(r,o);let c=n.index,l=1;if(!0===r.wireframe){if(c=oe.getWireframeAttribute(n),void 0===c)return;l=2}const u=n.drawRange,h=n.attributes.position;let d=u.start*l,p=(u.start+u.count)*l;null!==s&&(d=Math.max(d,s.start*l),p=Math.min(p,(s.start+s.count)*l)),null!==c?(d=Math.max(d,0),p=Math.min(p,c.count)):null!=h&&(d=Math.max(d,0),p=Math.min(p,h.count));const f=p-d;if(f<0||f===1/0)return;let m;_e.setup(i,r,a,n,c);let g=ge;if(null!==c&&(m=se.get(c),g=Ae,g.setIndex(m)),i.isMesh)!0===r.wireframe?($.setLineWidth(r.wireframeLinewidth*K()),g.setMode(be.LINES)):g.setMode(be.TRIANGLES);else if(i.isLine){let e=r.linewidth;void 0===e&&(e=1),$.setLineWidth(e*K()),i.isLineSegments?g.setMode(be.LINES):i.isLineLoop?g.setMode(be.LINE_LOOP):g.setMode(be.LINE_STRIP)}else i.isPoints?g.setMode(be.POINTS):i.isSprite&&g.setMode(be.TRIANGLES);if(i.isBatchedMesh)null!==i._multiDrawInstances?g.renderMultiDrawInstances(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount,i._multiDrawInstances):g.renderMultiDraw(i._multiDrawStarts,i._multiDrawCounts,i._multiDrawCount);else if(i.isInstancedMesh)g.renderInstances(d,f,i.count);else if(n.isInstancedBufferGeometry){const e=void 0!==n._maxInstanceCount?n._maxInstanceCount:1/0,t=Math.min(n.instanceCount,e);g.renderInstances(d,f,t)}else g.render(d,f)},this.compile=function(e,t,n=null){null===n&&(n=e),_=he.get(n),_.init(t),b.push(_),n.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(_.pushLight(e),e.castShadow&&_.pushShadow(e))})),e!==n&&e.traverseVisible((function(e){e.isLight&&e.layers.test(t.layers)&&(_.pushLight(e),e.castShadow&&_.pushShadow(e))})),_.setupLights();const r=new Set;return e.traverse((function(e){const t=e.material;if(t)if(Array.isArray(t))for(let i=0;i<t.length;i++){const s=t[i];Be(s,n,e),r.add(s)}else Be(t,n,e),r.add(t)})),b.pop(),_=null,r},this.compileAsync=function(e,t,n=null){const r=this.compile(e,t,n);return new Promise((t=>{function n(){r.forEach((function(e){te.get(e).currentProgram.isReady()&&r.delete(e)})),0!==r.size?setTimeout(n,10):t(e)}null!==Y.get("KHR_parallel_shader_compile")?n():setTimeout(n,10)}))};let De=null;function Le(){Ge.stop()}function ze(){Ge.start()}const Ge=new mo;function je(e,t,n,r){if(!1===e.visible)return;if(e.layers.test(t.layers))if(e.isGroup)n=e.renderOrder;else if(e.isLOD)!0===e.autoUpdate&&e.update(t);else if(e.isLight)_.pushLight(e),e.castShadow&&_.pushShadow(e);else if(e.isSprite){if(!e.frustumCulled||j.intersectsSprite(e)){r&&W.setFromMatrixPosition(e.matrixWorld).applyMatrix4(H);const t=ae.update(e),i=e.material;i.visible&&y.push(e,t,i,n,W.z,null)}}else if((e.isMesh||e.isLine||e.isPoints)&&(!e.frustumCulled||j.intersectsObject(e))){const t=ae.update(e),i=e.material;if(r&&(void 0!==e.boundingSphere?(null===e.boundingSphere&&e.computeBoundingSphere(),W.copy(e.boundingSphere.center)):(null===t.boundingSphere&&t.computeBoundingSphere(),W.copy(t.boundingSphere.center)),W.applyMatrix4(e.matrixWorld).applyMatrix4(H)),Array.isArray(i)){const r=t.groups;for(let s=0,o=r.length;s<o;s++){const o=r[s],a=i[o.materialIndex];a&&a.visible&&y.push(e,t,a,n,W.z,o)}}else i.visible&&y.push(e,t,i,n,W.z,null)}const i=e.children;for(let e=0,s=i.length;e<s;e++)je(i[e],t,n,r)}function Ve(e,t,n,r){const i=e.opaque,s=e.transmissive,o=e.transparent;_.setupLightsView(n),!0===V&&de.setGlobalState(x.clippingPlanes,n),r&&$.viewport(I.copy(r)),i.length>0&&He(i,t,n),s.length>0&&He(s,t,n),o.length>0&&He(o,t,n),$.buffers.depth.setTest(!0),$.buffers.depth.setMask(!0),$.buffers.color.setMask(!0),$.setPolygonOffset(!1)}function Qe(e,t,n,r){if(null!==(!0===n.isScene?n.overrideMaterial:null))return;void 0===_.state.transmissionRenderTarget[r.id]&&(_.state.transmissionRenderTarget[r.id]=new Sr(1,1,{generateMipmaps:!0,type:Y.has("EXT_color_buffer_half_float")||Y.has("EXT_color_buffer_float")?Ne:Ie,minFilter:Me,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:fr.workingColorSpace}));const i=_.state.transmissionRenderTarget[r.id],o=r.viewport||I;i.setSize(o.z,o.w);const a=x.getRenderTarget();x.setRenderTarget(i),x.getClearColor(P),D=x.getClearAlpha(),D<1&&x.setClearColor(16777215,.5),X?fe.render(n):x.clear();const c=x.toneMapping;x.toneMapping=ee;const l=r.viewport;if(void 0!==r.viewport&&(r.viewport=void 0),_.setupLightsView(r),!0===V&&de.setGlobalState(x.clippingPlanes,r),He(e,n,r),ne.updateMultisampleRenderTarget(i),ne.updateRenderTargetMipmap(i),!1===Y.has("WEBGL_multisampled_render_to_texture")){let e=!1;for(let i=0,s=t.length;i<s;i++){const s=t[i],o=s.object,a=s.geometry,c=s.material,l=s.group;if(c.side===g&&o.layers.test(r.layers)){const t=c.side;c.side=m,c.needsUpdate=!0,We(o,n,r,a,c,l),c.side=t,c.needsUpdate=!0,e=!0}}!0===e&&(ne.updateMultisampleRenderTarget(i),ne.updateRenderTargetMipmap(i))}x.setRenderTarget(a),x.setClearColor(P,D),void 0!==l&&(r.viewport=l),x.toneMapping=c}function He(e,t,n){const r=!0===t.isScene?t.overrideMaterial:null;for(let i=0,s=e.length;i<s;i++){const s=e[i],o=s.object,a=s.geometry,c=null===r?s.material:r,l=s.group;o.layers.test(n.layers)&&We(o,t,n,a,c,l)}}function We(e,t,n,r,i,s){e.onBeforeRender(x,t,n,r,i,s),e.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,e.matrixWorld),e.normalMatrix.getNormalMatrix(e.modelViewMatrix),i.onBeforeRender(x,t,n,r,e,s),!0===i.transparent&&i.side===g&&!1===i.forceSinglePass?(i.side=m,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,s),i.side=f,i.needsUpdate=!0,x.renderBufferDirect(n,t,r,i,e,s),i.side=g):x.renderBufferDirect(n,t,r,i,e,s),e.onAfterRender(x,t,n,r,i,s)}function qe(e,t,n){!0!==t.isScene&&(t=q);const r=te.get(e),i=_.state.lights,s=_.state.shadowsArray,o=i.state.version,a=ce.getParameters(e,i.state,s,t,n),c=ce.getProgramCacheKey(a);let l=r.programs;r.environment=e.isMeshStandardMaterial?t.environment:null,r.fog=t.fog,r.envMap=(e.isMeshStandardMaterial?ie:re).get(e.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===e.envMap?t.environmentRotation:e.envMapRotation,void 0===l&&(e.addEventListener("dispose",Re),l=new Map,r.programs=l);let u=l.get(c);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return Ye(e,a),u}else a.uniforms=ce.getUniforms(e),e.onBuild(n,a,x),e.onBeforeCompile(a,x),u=ce.acquireProgram(a,c),l.set(c,u),r.uniforms=a.uniforms;const h=r.uniforms;return(e.isShaderMaterial||e.isRawShaderMaterial)&&!0!==e.clipping||(h.clippingPlanes=de.uniform),Ye(e,a),r.needsLights=function(e){return e.isMeshLambertMaterial||e.isMeshToonMaterial||e.isMeshPhongMaterial||e.isMeshStandardMaterial||e.isShadowMaterial||e.isShaderMaterial&&!0===e.lights}(e),r.lightsStateVersion=o,r.needsLights&&(h.ambientLightColor.value=i.state.ambient,h.lightProbe.value=i.state.probe,h.directionalLights.value=i.state.directional,h.directionalLightShadows.value=i.state.directionalShadow,h.spotLights.value=i.state.spot,h.spotLightShadows.value=i.state.spotShadow,h.rectAreaLights.value=i.state.rectArea,h.ltc_1.value=i.state.rectAreaLTC1,h.ltc_2.value=i.state.rectAreaLTC2,h.pointLights.value=i.state.point,h.pointLightShadows.value=i.state.pointShadow,h.hemisphereLights.value=i.state.hemi,h.directionalShadowMap.value=i.state.directionalShadowMap,h.directionalShadowMatrix.value=i.state.directionalShadowMatrix,h.spotShadowMap.value=i.state.spotShadowMap,h.spotLightMatrix.value=i.state.spotLightMatrix,h.spotLightMap.value=i.state.spotLightMap,h.pointShadowMap.value=i.state.pointShadowMap,h.pointShadowMatrix.value=i.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function Xe(e){if(null===e.uniformsList){const t=e.currentProgram.getUniforms();e.uniformsList=oc.seqWithValue(t.seq,e.uniforms)}return e.uniformsList}function Ye(e,t){const n=te.get(e);n.outputColorSpace=t.outputColorSpace,n.batching=t.batching,n.batchingColor=t.batchingColor,n.instancing=t.instancing,n.instancingColor=t.instancingColor,n.instancingMorph=t.instancingMorph,n.skinning=t.skinning,n.morphTargets=t.morphTargets,n.morphNormals=t.morphNormals,n.morphColors=t.morphColors,n.morphTargetsCount=t.morphTargetsCount,n.numClippingPlanes=t.numClippingPlanes,n.numIntersection=t.numClipIntersection,n.vertexAlphas=t.vertexAlphas,n.vertexTangents=t.vertexTangents,n.toneMapping=t.toneMapping}Ge.setAnimationLoop((function(e){De&&De(e)})),"undefined"!=typeof self&&Ge.setContext(self),this.setAnimationLoop=function(e){De=e,Ee.setAnimationLoop(e),null===e?Ge.stop():Ge.start()},Ee.addEventListener("sessionstart",Le),Ee.addEventListener("sessionend",ze),this.render=function(e,t){if(void 0!==t&&!0!==t.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===w)return;if(!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),!0===Ee.enabled&&!0===Ee.isPresenting&&(!0===Ee.cameraAutoUpdate&&Ee.updateCamera(t),t=Ee.getCamera()),!0===e.isScene&&e.onBeforeRender(x,e,t,S),_=he.get(e,b.length),_.init(t),b.push(_),H.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),j.setFromProjectionMatrix(H),Q=this.localClippingEnabled,V=de.init(this.clippingPlanes,Q),y=ue.get(e,v.length),y.init(),v.push(y),!0===Ee.enabled&&!0===Ee.isPresenting){const e=x.xr.getDepthSensingMesh();null!==e&&je(e,t,-1/0,x.sortObjects)}je(e,t,0,x.sortObjects),y.finish(),!0===x.sortObjects&&y.sort(F,U),X=!1===Ee.enabled||!1===Ee.isPresenting||!1===Ee.hasDepthSensing(),X&&fe.addToRenderList(y,e),this.info.render.frame++,!0===V&&de.beginShadows();const n=_.state.shadowsArray;pe.render(n,e,t),!0===V&&de.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=y.opaque,i=y.transmissive;if(_.setupLights(),t.isArrayCamera){const n=t.cameras;if(i.length>0)for(let t=0,s=n.length;t<s;t++){Qe(r,i,e,n[t])}X&&fe.render(e);for(let t=0,r=n.length;t<r;t++){const r=n[t];Ve(y,e,r,r.viewport)}}else i.length>0&&Qe(r,i,e,t),X&&fe.render(e),Ve(y,e,t);null!==S&&(ne.updateMultisampleRenderTarget(S),ne.updateRenderTargetMipmap(S)),!0===e.isScene&&e.onAfterRender(x,e,t),_e.resetDefaultState(),M=-1,C=null,b.pop(),b.length>0?(_=b[b.length-1],!0===V&&de.setGlobalState(x.clippingPlanes,_.state.camera)):_=null,v.pop(),y=v.length>0?v[v.length-1]:null},this.getActiveCubeFace=function(){return E},this.getActiveMipmapLevel=function(){return T},this.getRenderTarget=function(){return S},this.setRenderTargetTextures=function(e,t,n){te.get(e.texture).__webglTexture=t,te.get(e.depthTexture).__webglTexture=n;const r=te.get(e);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===n,r.__autoAllocateDepthBuffer||!0===Y.has("WEBGL_multisampled_render_to_texture")&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(e,t){const n=te.get(e);n.__webglFramebuffer=t,n.__useDefaultFramebuffer=void 0===t},this.setRenderTarget=function(e,t=0,n=0){S=e,E=t,T=n;let r=!0,i=null,s=!1,o=!1;if(e){const a=te.get(e);void 0!==a.__useDefaultFramebuffer?($.bindFramebuffer(be.FRAMEBUFFER,null),r=!1):void 0===a.__webglFramebuffer?ne.setupRenderTarget(e):a.__hasExternalTextures&&ne.rebindTextures(e,te.get(e.texture).__webglTexture,te.get(e.depthTexture).__webglTexture);const c=e.texture;(c.isData3DTexture||c.isDataArrayTexture||c.isCompressedArrayTexture)&&(o=!0);const l=te.get(e).__webglFramebuffer;e.isWebGLCubeRenderTarget?(i=Array.isArray(l[t])?l[t][n]:l[t],s=!0):i=e.samples>0&&!1===ne.useMultisampledRTT(e)?te.get(e).__webglMultisampledFramebuffer:Array.isArray(l)?l[n]:l,I.copy(e.viewport),R.copy(e.scissor),B=e.scissorTest}else I.copy(k).multiplyScalar(N).floor(),R.copy(z).multiplyScalar(N).floor(),B=G;if($.bindFramebuffer(be.FRAMEBUFFER,i)&&r&&$.drawBuffers(e,i),$.viewport(I),$.scissor(R),$.setScissorTest(B),s){const r=te.get(e.texture);be.framebufferTexture2D(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0,be.TEXTURE_CUBE_MAP_POSITIVE_X+t,r.__webglTexture,n)}else if(o){const r=te.get(e.texture),i=t||0;be.framebufferTextureLayer(be.FRAMEBUFFER,be.COLOR_ATTACHMENT0,r.__webglTexture,n||0,i)}M=-1},this.readRenderTargetPixels=function(e,t,n,r,i,s,o){if(!e||!e.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=te.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){$.bindFramebuffer(be.FRAMEBUFFER,a);try{const o=e.texture,a=o.format,c=o.type;if(!J.textureFormatReadable(a))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!J.textureTypeReadable(c))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i&&be.readPixels(t,n,r,i,ye.convert(a),ye.convert(c),s)}finally{const e=null!==S?te.get(S).__webglFramebuffer:null;$.bindFramebuffer(be.FRAMEBUFFER,e)}}},this.readRenderTargetPixelsAsync=async function(e,t,n,r,i,s,o){if(!e||!e.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let a=te.get(e).__webglFramebuffer;if(e.isWebGLCubeRenderTarget&&void 0!==o&&(a=a[o]),a){$.bindFramebuffer(be.FRAMEBUFFER,a);try{const o=e.texture,a=o.format,c=o.type;if(!J.textureFormatReadable(a))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!J.textureTypeReadable(c))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(t>=0&&t<=e.width-r&&n>=0&&n<=e.height-i){const e=be.createBuffer();be.bindBuffer(be.PIXEL_PACK_BUFFER,e),be.bufferData(be.PIXEL_PACK_BUFFER,s.byteLength,be.STREAM_READ),be.readPixels(t,n,r,i,ye.convert(a),ye.convert(c),0),be.flush();const o=be.fenceSync(be.SYNC_GPU_COMMANDS_COMPLETE,0);await function(e,t,n){return new Promise((function(r,i){setTimeout((function s(){switch(e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0)){case e.WAIT_FAILED:i();break;case e.TIMEOUT_EXPIRED:setTimeout(s,n);break;default:r()}}),n)}))}(be,o,4);try{be.bindBuffer(be.PIXEL_PACK_BUFFER,e),be.getBufferSubData(be.PIXEL_PACK_BUFFER,0,s)}finally{be.deleteBuffer(e),be.deleteSync(o)}return s}}finally{const e=null!==S?te.get(S).__webglFramebuffer:null;$.bindFramebuffer(be.FRAMEBUFFER,e)}}},this.copyFramebufferToTexture=function(e,t=null,n=0){!0!==e.isTexture&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),t=arguments[0]||null,e=arguments[1]);const r=Math.pow(2,-n),i=Math.floor(e.image.width*r),s=Math.floor(e.image.height*r),o=null!==t?t.x:0,a=null!==t?t.y:0;ne.setTexture2D(e,0),be.copyTexSubImage2D(be.TEXTURE_2D,n,0,0,o,a,i,s),$.unbindTexture()},this.copyTextureToTexture=function(e,t,n=null,r=null,i=0){let s,o,a,c,l,u;!0!==e.isTexture&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),r=arguments[0]||null,e=arguments[1],t=arguments[2],i=arguments[3]||0,n=null),null!==n?(s=n.max.x-n.min.x,o=n.max.y-n.min.y,a=n.min.x,c=n.min.y):(s=e.image.width,o=e.image.height,a=0,c=0),null!==r?(l=r.x,u=r.y):(l=0,u=0);const h=ye.convert(t.format),d=ye.convert(t.type);ne.setTexture2D(t,0),be.pixelStorei(be.UNPACK_FLIP_Y_WEBGL,t.flipY),be.pixelStorei(be.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),be.pixelStorei(be.UNPACK_ALIGNMENT,t.unpackAlignment);const p=be.getParameter(be.UNPACK_ROW_LENGTH),f=be.getParameter(be.UNPACK_IMAGE_HEIGHT),m=be.getParameter(be.UNPACK_SKIP_PIXELS),g=be.getParameter(be.UNPACK_SKIP_ROWS),A=be.getParameter(be.UNPACK_SKIP_IMAGES),y=e.isCompressedTexture?e.mipmaps[i]:e.image;be.pixelStorei(be.UNPACK_ROW_LENGTH,y.width),be.pixelStorei(be.UNPACK_IMAGE_HEIGHT,y.height),be.pixelStorei(be.UNPACK_SKIP_PIXELS,a),be.pixelStorei(be.UNPACK_SKIP_ROWS,c),e.isDataTexture?be.texSubImage2D(be.TEXTURE_2D,i,l,u,s,o,h,d,y.data):e.isCompressedTexture?be.compressedTexSubImage2D(be.TEXTURE_2D,i,l,u,y.width,y.height,h,y.data):be.texSubImage2D(be.TEXTURE_2D,i,l,u,h,d,y),be.pixelStorei(be.UNPACK_ROW_LENGTH,p),be.pixelStorei(be.UNPACK_IMAGE_HEIGHT,f),be.pixelStorei(be.UNPACK_SKIP_PIXELS,m),be.pixelStorei(be.UNPACK_SKIP_ROWS,g),be.pixelStorei(be.UNPACK_SKIP_IMAGES,A),0===i&&t.generateMipmaps&&be.generateMipmap(be.TEXTURE_2D),$.unbindTexture()},this.copyTextureToTexture3D=function(e,t,n=null,r=null,i=0){let s,o,a,c,l,u,h,d,p;!0!==e.isTexture&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),n=arguments[0]||null,r=arguments[1]||null,e=arguments[2],t=arguments[3],i=arguments[4]||0);const f=e.isCompressedTexture?e.mipmaps[i]:e.image;null!==n?(s=n.max.x-n.min.x,o=n.max.y-n.min.y,a=n.max.z-n.min.z,c=n.min.x,l=n.min.y,u=n.min.z):(s=f.width,o=f.height,a=f.depth,c=0,l=0,u=0),null!==r?(h=r.x,d=r.y,p=r.z):(h=0,d=0,p=0);const m=ye.convert(t.format),g=ye.convert(t.type);let A;if(t.isData3DTexture)ne.setTexture3D(t,0),A=be.TEXTURE_3D;else{if(!t.isDataArrayTexture&&!t.isCompressedArrayTexture)return void console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");ne.setTexture2DArray(t,0),A=be.TEXTURE_2D_ARRAY}be.pixelStorei(be.UNPACK_FLIP_Y_WEBGL,t.flipY),be.pixelStorei(be.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),be.pixelStorei(be.UNPACK_ALIGNMENT,t.unpackAlignment);const y=be.getParameter(be.UNPACK_ROW_LENGTH),_=be.getParameter(be.UNPACK_IMAGE_HEIGHT),v=be.getParameter(be.UNPACK_SKIP_PIXELS),b=be.getParameter(be.UNPACK_SKIP_ROWS),x=be.getParameter(be.UNPACK_SKIP_IMAGES);be.pixelStorei(be.UNPACK_ROW_LENGTH,f.width),be.pixelStorei(be.UNPACK_IMAGE_HEIGHT,f.height),be.pixelStorei(be.UNPACK_SKIP_PIXELS,c),be.pixelStorei(be.UNPACK_SKIP_ROWS,l),be.pixelStorei(be.UNPACK_SKIP_IMAGES,u),e.isDataTexture||e.isData3DTexture?be.texSubImage3D(A,i,h,d,p,s,o,a,m,g,f.data):t.isCompressedArrayTexture?be.compressedTexSubImage3D(A,i,h,d,p,s,o,a,m,f.data):be.texSubImage3D(A,i,h,d,p,s,o,a,m,g,f),be.pixelStorei(be.UNPACK_ROW_LENGTH,y),be.pixelStorei(be.UNPACK_IMAGE_HEIGHT,_),be.pixelStorei(be.UNPACK_SKIP_PIXELS,v),be.pixelStorei(be.UNPACK_SKIP_ROWS,b),be.pixelStorei(be.UNPACK_SKIP_IMAGES,x),0===i&&t.generateMipmaps&&be.generateMipmap(A),$.unbindTexture()},this.initRenderTarget=function(e){void 0===te.get(e).__webglFramebuffer&&ne.setupRenderTarget(e)},this.initTexture=function(e){e.isCubeTexture?ne.setTextureCube(e,0):e.isData3DTexture?ne.setTexture3D(e,0):e.isDataArrayTexture||e.isCompressedArrayTexture?ne.setTexture2DArray(e,0):ne.setTexture2D(e,0),$.unbindTexture()},this.resetState=function(){E=0,T=0,S=null,$.reset(),_e.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return zn}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===$t?"display-p3":"srgb",t.unpackColorSpace=fr.workingColorSpace===Zt?"display-p3":"srgb"}}class nl{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Ji(e),this.density=t}clone(){return new nl(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class rl{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Ji(e),this.near=t,this.far=n}clone(){return new rl(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class il extends Li{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new yi,this.environmentIntensity=1,this.environmentRotation=new yi,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),null!==e.background&&(this.background=e.background.clone()),null!==e.environment&&(this.environment=e.environment.clone()),null!==e.fog&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),null!==e.overrideMaterial&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return null!==this.fog&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class sl{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=void 0!==e?e.length/t:0,this.usage=In,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=qn()}onUploadCallback(){}set needsUpdate(e){!0===e&&this.version++}get updateRange(){return lr("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,i=this.stride;r<i;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return void 0===e.arrayBuffers&&(e.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=qn()),void 0===e.arrayBuffers[this.array.buffer._uuid]&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const ol=new Pr;class al{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)ol.fromBufferAttribute(this,t),ol.applyMatrix4(e),this.setXYZ(t,ol.x,ol.y,ol.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)ol.fromBufferAttribute(this,t),ol.applyNormalMatrix(e),this.setXYZ(t,ol.x,ol.y,ol.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)ol.fromBufferAttribute(this,t),ol.transformDirection(e),this.setXYZ(t,ol.x,ol.y,ol.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=Jn(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=$n(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=$n(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=$n(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=$n(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=$n(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Jn(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Jn(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Jn(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Jn(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=$n(t,this.array),n=$n(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=$n(t,this.array),n=$n(n,this.array),r=$n(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=$n(t,this.array),n=$n(n,this.array),r=$n(r,this.array),i=$n(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=i,this}clone(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return new ls(new this.array.constructor(e),this.itemSize,this.normalized)}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new al(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(void 0===e){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const e=[];for(let t=0;t<this.count;t++){const n=t*this.data.stride+this.offset;for(let t=0;t<this.itemSize;t++)e.push(this.data.array[n+t])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:e,normalized:this.normalized}}return void 0===e.interleavedBuffers&&(e.interleavedBuffers={}),void 0===e.interleavedBuffers[this.data.uuid]&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class cl extends es{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Ji(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ll;const ul=new Pr,hl=new Pr,dl=new Pr,pl=new er,fl=new er,ml=new ci,gl=new Pr,Al=new Pr,yl=new Pr,_l=new er,vl=new er,bl=new er;class xl extends Li{constructor(e=new cl){if(super(),this.isSprite=!0,this.type="Sprite",void 0===ll){ll=new Ss;const e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),t=new sl(e,5);ll.setIndex([0,1,2,0,2,3]),ll.setAttribute("position",new al(t,3,0,!1)),ll.setAttribute("uv",new al(t,2,3,!1))}this.geometry=ll,this.material=e,this.center=new er(.5,.5)}raycast(e,t){null===e.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),hl.setFromMatrixScale(this.matrixWorld),ml.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),dl.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&hl.multiplyScalar(-dl.z);const n=this.material.rotation;let r,i;0!==n&&(i=Math.cos(n),r=Math.sin(n));const s=this.center;wl(gl.set(-.5,-.5,0),dl,s,hl,r,i),wl(Al.set(.5,-.5,0),dl,s,hl,r,i),wl(yl.set(.5,.5,0),dl,s,hl,r,i),_l.set(0,0),vl.set(1,0),bl.set(1,1);let o=e.ray.intersectTriangle(gl,Al,yl,!1,ul);if(null===o&&(wl(Al.set(-.5,.5,0),dl,s,hl,r,i),vl.set(0,1),o=e.ray.intersectTriangle(gl,yl,Al,!1,ul),null===o))return;const a=e.ray.origin.distanceTo(ul);a<e.near||a>e.far||t.push({distance:a,point:ul.clone(),uv:Wi.getInterpolation(ul,gl,Al,yl,_l,vl,bl,new er),face:null,object:this})}copy(e,t){return super.copy(e,t),void 0!==e.center&&this.center.copy(e.center),this.material=e.material,this}}function wl(e,t,n,r,i,s){pl.subVectors(e,n).addScalar(.5).multiply(r),void 0!==i?(fl.x=s*pl.x-i*pl.y,fl.y=i*pl.x+s*pl.y):fl.copy(pl),e.copy(t),e.x+=fl.x,e.y+=fl.y,e.applyMatrix4(ml)}const El=new Pr,Tl=new Pr;class Sl extends Li{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let e=0,n=t.length;e<n;e++){const n=t[e];this.addLevel(n.object.clone(),n.distance,n.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let i;for(i=0;i<r.length&&!(t<r[i].distance);i++);return r.splice(i,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let r=t[n].distance;if(t[n].object.visible&&(r-=r*t[n].hysteresis),e<r)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){El.setFromMatrixPosition(this.matrixWorld);const n=e.ray.origin.distanceTo(El);this.getObjectForDistance(n).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){El.setFromMatrixPosition(e.matrixWorld),Tl.setFromMatrixPosition(this.matrixWorld);const n=El.distanceTo(Tl)/e.zoom;let r,i;for(t[0].object.visible=!0,r=1,i=t.length;r<i;r++){let e=t[r].distance;if(t[r].object.visible&&(e-=e*t[r].hysteresis),!(n>=e))break;t[r-1].object.visible=!1,t[r].object.visible=!0}for(this._currentLevel=r-1;r<i;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);!1===this.autoUpdate&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let e=0,r=n.length;e<r;e++){const r=n[e];t.object.levels.push({object:r.object.uuid,distance:r.distance,hysteresis:r.hysteresis})}return t}}const Ml=new Pr,Cl=new Er,Il=new Er,Rl=new Pr,Bl=new ci,Pl=new Pr,Dl=new Zr,Ol=new ci,Ll=new ai;class Nl extends Qs{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=ce,this.bindMatrix=new ci,this.bindMatrixInverse=new ci,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;null===this.boundingBox&&(this.boundingBox=new Lr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,Pl),this.boundingBox.expandByPoint(Pl)}computeBoundingSphere(){const e=this.geometry;null===this.boundingSphere&&(this.boundingSphere=new Zr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let e=0;e<t.count;e++)this.getVertexPosition(e,Pl),this.boundingSphere.expandByPoint(Pl)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;void 0!==n&&(null===this.boundingSphere&&this.computeBoundingSphere(),Dl.copy(this.boundingSphere),Dl.applyMatrix4(r),!1!==e.ray.intersectsSphere(Dl)&&(Ol.copy(r).invert(),Ll.copy(e.ray).applyMatrix4(Ol),null!==this.boundingBox&&!1===Ll.intersectsBox(this.boundingBox)||this._computeIntersections(e,t,Ll)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,void 0===t&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Er,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const r=1/e.manhattanLength();r!==1/0?e.multiplyScalar(r):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===ce?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===le?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;Cl.fromBufferAttribute(r.attributes.skinIndex,e),Il.fromBufferAttribute(r.attributes.skinWeight,e),Ml.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let e=0;e<4;e++){const r=Il.getComponent(e);if(0!==r){const i=Cl.getComponent(e);Bl.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),t.addScaledVector(Rl.copy(Ml).applyMatrix4(Bl),r)}}return t.applyMatrix4(this.bindMatrixInverse)}}class Fl extends Li{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ul extends wr{constructor(e=null,t=1,n=1,r,i,s,o,a,c=_e,l=_e,u,h){super(null,s,o,a,c,l,r,i,u,h),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const kl=new ci,zl=new ci;class Gl{constructor(e=[],t=[]){this.uuid=qn(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(16*e.length),0===t.length)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let e=0,t=this.bones.length;e<t;e++)this.boneInverses.push(new ci)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const t=new ci;this.bones[e]&&t.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(t)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&t.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const t=this.bones[e];t&&(t.parent&&t.parent.isBone?(t.matrix.copy(t.parent.matrixWorld).invert(),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let r=0,i=e.length;r<i;r++){const i=e[r]?e[r].matrixWorld:zl;kl.multiplyMatrices(i,t[r]),kl.toArray(n,16*r)}null!==r&&(r.needsUpdate=!0)}clone(){return new Gl(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(4*this.bones.length);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new Ul(t,e,e,Ve,Le);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const n=this.bones[t];if(n.name===e)return n}}dispose(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const r=e.bones[n];let i=t[r];void 0===i&&(console.warn("THREE.Skeleton: No bone found with UUID:",r),i=new Fl),this.bones.push(i),this.boneInverses.push((new ci).fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,i=t.length;r<i;r++){const i=t[r];e.bones.push(i.uuid);const s=n[r];e.boneInverses.push(s.toArray())}return e}}class jl extends ls{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const Vl=new ci,Ql=new ci,Hl=[],Wl=new Lr,ql=new ci,Xl=new Qs,Kl=new Zr;class Yl extends Qs{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new jl(new Float32Array(16*n),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let e=0;e<n;e++)this.setMatrixAt(e,ql)}computeBoundingBox(){const e=this.geometry,t=this.count;null===this.boundingBox&&(this.boundingBox=new Lr),null===e.boundingBox&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Vl),Wl.copy(e.boundingBox).applyMatrix4(Vl),this.boundingBox.union(Wl)}computeBoundingSphere(){const e=this.geometry,t=this.count;null===this.boundingSphere&&(this.boundingSphere=new Zr),null===e.boundingSphere&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,Vl),Kl.copy(e.boundingSphere).applyMatrix4(Vl),this.boundingSphere.union(Kl)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),null!==e.morphTexture&&(this.morphTexture=e.morphTexture.clone()),null!==e.instanceColor&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone()),null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,3*e)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,16*e)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,i=e*(n.length+1)+1;for(let e=0;e<n.length;e++)n[e]=r[i+e]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(Xl.geometry=this.geometry,Xl.material=this.material,void 0!==Xl.material&&(null===this.boundingSphere&&this.computeBoundingSphere(),Kl.copy(this.boundingSphere),Kl.applyMatrix4(n),!1!==e.ray.intersectsSphere(Kl)))for(let i=0;i<r;i++){this.getMatrixAt(i,Vl),Ql.multiplyMatrices(n,Vl),Xl.matrixWorld=Ql,Xl.raycast(e,Hl);for(let e=0,n=Hl.length;e<n;e++){const n=Hl[e];n.instanceId=i,n.object=this,t.push(n)}Hl.length=0}}setColorAt(e,t){null===this.instanceColor&&(this.instanceColor=new jl(new Float32Array(3*this.instanceMatrix.count),3)),t.toArray(this.instanceColor.array,3*e)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,16*e)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;null===this.morphTexture&&(this.morphTexture=new Ul(new Float32Array(r*this.count),r,this.count,Xe,Le));const i=this.morphTexture.source.data.data;let s=0;for(let e=0;e<n.length;e++)s+=n[e];const o=this.geometry.morphTargetsRelative?1:1-s,a=r*e;i[a]=o,i.set(n,a+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),null!==this.morphTexture&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Jl(e,t){return e.z-t.z}function $l(e,t){return t.z-e.z}class Zl{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t){const n=this.pool,r=this.list;this.index>=n.length&&n.push({start:-1,count:-1,z:-1});const i=n[this.index];r.push(i),this.index++,i.start=e.start,i.count=e.count,i.z=t}reset(){this.list.length=0,this.index=0}}const eu="batchId",tu=new ci,nu=new ci,ru=new ci,iu=new Ji(1,1,1),su=new ci,ou=new fo,au=new Lr,cu=new Zr,lu=new Pr,uu=new Pr,hu=new Pr,du=new Zl,pu=new Qs,fu=[];function mu(e,t,n=0){const r=t.itemSize;if(e.isInterleavedBufferAttribute||e.array.constructor!==t.array.constructor){const i=e.count;for(let s=0;s<i;s++)for(let i=0;i<r;i++)t.setComponent(s+n,i,e.getComponent(s,i))}else t.array.set(e.array,n*r);t.needsUpdate=!0}class gu extends Qs{get maxGeometryCount(){return this._maxGeometryCount}constructor(e,t,n=2*t,r){super(new Ss,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawRanges=[],this._reservedRanges=[],this._visibility=[],this._active=[],this._bounds=[],this._maxGeometryCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._initMatricesTexture(),this._colorsTexture=null}_initMatricesTexture(){let e=Math.sqrt(4*this._maxGeometryCount);e=4*Math.ceil(e/4),e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new Ul(t,e,e,Ve,Le);this._matricesTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxGeometryCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new Ul(t,e,e,Ve,Le);n.colorSpace=fr.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxGeometryCount,i=this._maxIndexCount;if(!1===this._geometryInitialized){for(const r in e.attributes){const i=e.getAttribute(r),{array:s,itemSize:o,normalized:a}=i,c=new s.constructor(n*o),l=new ls(c,o,a);t.setAttribute(r,l)}if(null!==e.getIndex()){const e=n>65536?new Uint32Array(i):new Uint16Array(i);t.setIndex(new ls(e,1))}const s=r>65536?new Uint32Array(n):new Uint16Array(n);t.setAttribute(eu,new ls(s,1)),this._geometryInitialized=!0}}_validateGeometry(e){if(e.getAttribute(eu))throw new Error(`BatchedMesh: Geometry cannot use attribute "${eu}"`);const t=this.geometry;if(Boolean(e.getIndex())!==Boolean(t.getIndex()))throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(n===eu)continue;if(!e.hasAttribute(n))throw new Error(`BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),i=t.getAttribute(n);if(r.itemSize!==i.itemSize||r.normalized!==i.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new Lr);const e=this._geometryCount,t=this.boundingBox,n=this._active;t.makeEmpty();for(let r=0;r<e;r++)!1!==n[r]&&(this.getMatrixAt(r,tu),this.getBoundingBoxAt(r,au).applyMatrix4(tu),t.union(au))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Zr);const e=this._geometryCount,t=this.boundingSphere,n=this._active;t.makeEmpty();for(let r=0;r<e;r++)!1!==n[r]&&(this.getMatrixAt(r,tu),this.getBoundingSphereAt(r,cu).applyMatrix4(tu),t.union(cu))}addGeometry(e,t=-1,n=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._geometryCount>=this._maxGeometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let i=null;const s=this._reservedRanges,o=this._drawRanges,a=this._bounds;0!==this._geometryCount&&(i=s[s.length-1]),r.vertexCount=-1===t?e.getAttribute("position").count:t,r.vertexStart=null===i?0:i.vertexStart+i.vertexCount;const c=e.getIndex(),l=null!==c;if(l&&(r.indexCount=-1===n?c.count:n,r.indexStart=null===i?0:i.indexStart+i.indexCount),-1!==r.indexStart&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const u=this._visibility,h=this._active,d=this._matricesTexture,p=this._matricesTexture.image.data,f=this._colorsTexture;u.push(!0),h.push(!0);const m=this._geometryCount;this._geometryCount++,ru.toArray(p,16*m),d.needsUpdate=!0,null!==f&&(iu.toArray(f.image.data,4*m),f.needsUpdate=!0),s.push(r),o.push({start:l?r.indexStart:r.vertexStart,count:-1}),a.push({boxInitialized:!1,box:new Lr,sphereInitialized:!1,sphere:new Zr});const g=this.geometry.getAttribute(eu);for(let e=0;e<r.vertexCount;e++)g.setX(r.vertexStart+e,m);return g.needsUpdate=!0,this.setGeometryAt(m,e),m}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=null!==n.getIndex(),i=n.getIndex(),s=t.getIndex(),o=this._reservedRanges[e];if(r&&s.count>o.indexCount||t.attributes.position.count>o.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const a=o.vertexStart,c=o.vertexCount;for(const e in n.attributes){if(e===eu)continue;const r=t.getAttribute(e),i=n.getAttribute(e);mu(r,i,a);const s=r.itemSize;for(let e=r.count,t=c;e<t;e++){const t=a+e;for(let e=0;e<s;e++)i.setComponent(t,e,0)}i.needsUpdate=!0,i.addUpdateRange(a*s,c*s)}if(r){const e=o.indexStart;for(let t=0;t<s.count;t++)i.setX(e+t,a+s.getX(t));for(let t=s.count,n=o.indexCount;t<n;t++)i.setX(e+t,a);i.needsUpdate=!0,i.addUpdateRange(e,o.indexCount)}const l=this._bounds[e];null!==t.boundingBox?(l.box.copy(t.boundingBox),l.boxInitialized=!0):l.boxInitialized=!1,null!==t.boundingSphere?(l.sphere.copy(t.boundingSphere),l.sphereInitialized=!0):l.sphereInitialized=!1;const u=this._drawRanges[e],h=t.getAttribute("position");return u.count=r?s.count:h.count,this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._active;return e>=t.length||!1===t[e]||(t[e]=!1,this._visibilityChanged=!0),this}getInstanceCountAt(e){return null===this._multiDrawInstances?null:this._multiDrawInstances[e]}setInstanceCountAt(e,t){return null===this._multiDrawInstances&&(this._multiDrawInstances=new Int32Array(this._maxGeometryCount).fill(1)),this._multiDrawInstances[e]=t,e}getBoundingBoxAt(e,t){if(!1===this._active[e])return null;const n=this._bounds[e],r=n.box,i=this.geometry;if(!1===n.boxInitialized){r.makeEmpty();const t=i.index,s=i.attributes.position,o=this._drawRanges[e];for(let e=o.start,n=o.start+o.count;e<n;e++){let n=e;t&&(n=t.getX(n)),r.expandByPoint(lu.fromBufferAttribute(s,n))}n.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(!1===this._active[e])return null;const n=this._bounds[e],r=n.sphere,i=this.geometry;if(!1===n.sphereInitialized){r.makeEmpty(),this.getBoundingBoxAt(e,au),au.getCenter(r.center);const t=i.index,s=i.attributes.position,o=this._drawRanges[e];let a=0;for(let e=o.start,n=o.start+o.count;e<n;e++){let n=e;t&&(n=t.getX(n)),lu.fromBufferAttribute(s,n),a=Math.max(a,r.center.distanceToSquared(lu))}r.radius=Math.sqrt(a),n.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const n=this._active,r=this._matricesTexture,i=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]||(t.toArray(i,16*e),r.needsUpdate=!0),this}getMatrixAt(e,t){const n=this._active,r=this._matricesTexture.image.data;return e>=this._geometryCount||!1===n[e]?null:t.fromArray(r,16*e)}setColorAt(e,t){null===this._colorsTexture&&this._initColorsTexture();const n=this._active,r=this._colorsTexture,i=this._colorsTexture.image.data;return e>=this._geometryCount||!1===n[e]||(t.toArray(i,4*e),r.needsUpdate=!0),this}getColorAt(e,t){const n=this._active,r=this._colorsTexture.image.data;return e>=this._geometryCount||!1===n[e]?null:t.fromArray(r,4*e)}setVisibleAt(e,t){const n=this._visibility,r=this._active;return e>=this._geometryCount||!1===r[e]||n[e]===t||(n[e]=t,this._visibilityChanged=!0),this}getVisibleAt(e){const t=this._visibility,n=this._active;return!(e>=this._geometryCount||!1===n[e])&&t[e]}raycast(e,t){const n=this._visibility,r=this._active,i=this._drawRanges,s=this._geometryCount,o=this.matrixWorld,a=this.geometry;pu.material=this.material,pu.geometry.index=a.index,pu.geometry.attributes=a.attributes,null===pu.geometry.boundingBox&&(pu.geometry.boundingBox=new Lr),null===pu.geometry.boundingSphere&&(pu.geometry.boundingSphere=new Zr);for(let a=0;a<s;a++){if(!n[a]||!r[a])continue;const s=i[a];pu.geometry.setDrawRange(s.start,s.count),this.getMatrixAt(a,pu.matrixWorld).premultiply(o),this.getBoundingBoxAt(a,pu.geometry.boundingBox),this.getBoundingSphereAt(a,pu.geometry.boundingSphere),pu.raycast(e,fu);for(let e=0,n=fu.length;e<n;e++){const n=fu[e];n.object=this,n.batchId=a,t.push(n)}fu.length=0}pu.material=null,pu.geometry.index=null,pu.geometry.attributes={},pu.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=null!==e.boundingBox?e.boundingBox.clone():null,this.boundingSphere=null!==e.boundingSphere?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map((e=>({...e}))),this._reservedRanges=e._reservedRanges.map((e=>({...e}))),this._visibility=e._visibility.slice(),this._active=e._active.slice(),this._bounds=e._bounds.map((e=>({boxInitialized:e.boxInitialized,box:e.box.clone(),sphereInitialized:e.sphereInitialized,sphere:e.sphere.clone()}))),this._maxGeometryCount=e._maxGeometryCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),null!==this._colorsTexture&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,null!==this._colorsTexture&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,n,r,i){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const s=r.getIndex(),o=null===s?1:s.array.BYTES_PER_ELEMENT,a=this._active,c=this._visibility,l=this._multiDrawStarts,u=this._multiDrawCounts,h=this._drawRanges,d=this.perObjectFrustumCulled;d&&(su.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),ou.setFromProjectionMatrix(su,e.coordinateSystem));let p=0;if(this.sortObjects){nu.copy(this.matrixWorld).invert(),lu.setFromMatrixPosition(n.matrixWorld).applyMatrix4(nu),uu.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(nu);for(let e=0,t=c.length;e<t;e++)if(c[e]&&a[e]){this.getMatrixAt(e,tu),this.getBoundingSphereAt(e,cu).applyMatrix4(tu);let t=!1;if(d&&(t=!ou.intersectsSphere(cu)),!t){const t=hu.subVectors(cu.center,lu).dot(uu);du.push(h[e],t)}}const e=du.list,t=this.customSort;null===t?e.sort(i.transparent?$l:Jl):t.call(this,e,n);for(let t=0,n=e.length;t<n;t++){const n=e[t];l[p]=n.start*o,u[p]=n.count,p++}du.reset()}else for(let e=0,t=c.length;e<t;e++)if(c[e]&&a[e]){let t=!1;if(d&&(this.getMatrixAt(e,tu),this.getBoundingSphereAt(e,cu).applyMatrix4(tu),t=!ou.intersectsSphere(cu)),!t){const t=h[e];l[p]=t.start*o,u[p]=t.count,p++}}this._multiDrawCount=p,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,i,s){this.onBeforeRender(e,null,r,i,s)}}class Au extends es{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Ji(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const yu=new Pr,_u=new Pr,vu=new ci,bu=new ai,xu=new Zr,wu=new Pr,Eu=new Pr;class Tu extends Li{constructor(e=new Ss,t=new Au){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[0];for(let e=1,r=t.count;e<r;e++)yu.fromBufferAttribute(t,e-1),_u.fromBufferAttribute(t,e),n[e]=n[e-1],n[e]+=yu.distanceTo(_u);e.setAttribute("lineDistance",new ys(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Line.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),xu.copy(n.boundingSphere),xu.applyMatrix4(r),xu.radius+=i,!1===e.ray.intersectsSphere(xu))return;vu.copy(r).invert(),bu.copy(e.ray).applyMatrix4(vu);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,c=this.isLineSegments?2:1,l=n.index,u=n.attributes.position;if(null!==l){const n=Math.max(0,s.start),r=Math.min(l.count,s.start+s.count);for(let i=n,s=r-1;i<s;i+=c){const n=l.getX(i),r=l.getX(i+1),s=Su(this,e,bu,a,n,r);s&&t.push(s)}if(this.isLineLoop){const i=l.getX(r-1),s=l.getX(n),o=Su(this,e,bu,a,i,s);o&&t.push(o)}}else{const n=Math.max(0,s.start),r=Math.min(u.count,s.start+s.count);for(let i=n,s=r-1;i<s;i+=c){const n=Su(this,e,bu,a,i,i+1);n&&t.push(n)}if(this.isLineLoop){const i=Su(this,e,bu,a,r-1,n);i&&t.push(i)}}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Su(e,t,n,r,i,s){const o=e.geometry.attributes.position;yu.fromBufferAttribute(o,i),_u.fromBufferAttribute(o,s);if(n.distanceSqToSegment(yu,_u,wu,Eu)>r)return;wu.applyMatrix4(e.matrixWorld);const a=t.ray.origin.distanceTo(wu);return a<t.near||a>t.far?void 0:{distance:a,point:Eu.clone().applyMatrix4(e.matrixWorld),index:i,face:null,faceIndex:null,object:e}}const Mu=new Pr,Cu=new Pr;class Iu extends Tu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(null===e.index){const t=e.attributes.position,n=[];for(let e=0,r=t.count;e<r;e+=2)Mu.fromBufferAttribute(t,e),Cu.fromBufferAttribute(t,e+1),n[e]=0===e?0:n[e-1],n[e+1]=n[e]+Mu.distanceTo(Cu);e.setAttribute("lineDistance",new ys(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Ru extends Tu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Bu extends es{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Ji(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Pu=new ci,Du=new ai,Ou=new Zr,Lu=new Pr;class Nu extends Li{constructor(e=new Ss,t=new Bu){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,i=e.params.Points.threshold,s=n.drawRange;if(null===n.boundingSphere&&n.computeBoundingSphere(),Ou.copy(n.boundingSphere),Ou.applyMatrix4(r),Ou.radius+=i,!1===e.ray.intersectsSphere(Ou))return;Pu.copy(r).invert(),Du.copy(e.ray).applyMatrix4(Pu);const o=i/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,c=n.index,l=n.attributes.position;if(null!==c){for(let n=Math.max(0,s.start),i=Math.min(c.count,s.start+s.count);n<i;n++){const i=c.getX(n);Lu.fromBufferAttribute(l,i),Fu(Lu,i,a,r,e,t,this)}}else{for(let n=Math.max(0,s.start),i=Math.min(l.count,s.start+s.count);n<i;n++)Lu.fromBufferAttribute(l,n),Fu(Lu,n,a,r,e,t,this)}}updateMorphTargets(){const e=this.geometry.morphAttributes,t=Object.keys(e);if(t.length>0){const n=e[t[0]];if(void 0!==n){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,t=n.length;e<t;e++){const t=n[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[t]=e}}}}}function Fu(e,t,n,r,i,s,o){const a=Du.distanceSqToPoint(e);if(a<n){const n=new Pr;Du.closestPointToPoint(e,n),n.applyMatrix4(r);const c=i.ray.origin.distanceTo(n);if(c<i.near||c>i.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:n,index:t,face:null,object:o})}}class Uu extends wr{constructor(e,t,n,r,i,s,o,a,c){super(e,t,n,r,i,s,o,a,c),this.isVideoTexture=!0,this.minFilter=void 0!==s?s:Ee,this.magFilter=void 0!==i?i:Ee,this.generateMipmaps=!1;const l=this;"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback((function t(){l.needsUpdate=!0,e.requestVideoFrameCallback(t)}))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;!1==="requestVideoFrameCallback"in e&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class ku extends wr{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=_e,this.minFilter=_e,this.generateMipmaps=!1,this.needsUpdate=!0}}class zu extends wr{constructor(e,t,n,r,i,s,o,a,c,l,u,h){super(null,s,o,a,c,l,r,i,u,h),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Gu extends zu{constructor(e,t,n,r,i,s){super(e,t,n,i,s),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Ae,this.layerUpdates=new Set}addLayerUpdates(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class ju extends zu{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,he),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Vu extends wr{constructor(e,t,n,r,i,s,o,a,c){super(e,t,n,r,i,s,o,a,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Qu{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),i=0;t.push(0);for(let s=1;s<=e;s++)n=this.getPoint(s/e),i+=n.distanceTo(r),t.push(i),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const n=this.getLengths();let r=0;const i=n.length;let s;s=t||e*n[i-1];let o,a=0,c=i-1;for(;a<=c;)if(r=Math.floor(a+(c-a)/2),o=n[r]-s,o<0)a=r+1;else{if(!(o>0)){c=r;break}c=r-1}if(r=c,n[r]===s)return r/(i-1);const l=n[r];return(r+(s-l)/(n[r+1]-l))/(i-1)}getTangent(e,t){const n=1e-4;let r=e-n,i=e+n;r<0&&(r=0),i>1&&(i=1);const s=this.getPoint(r),o=this.getPoint(i),a=t||(s.isVector2?new er:new Pr);return a.copy(o).sub(s).normalize(),a}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t){const n=new Pr,r=[],i=[],s=[],o=new Pr,a=new ci;for(let t=0;t<=e;t++){const n=t/e;r[t]=this.getTangentAt(n,new Pr)}i[0]=new Pr,s[0]=new Pr;let c=Number.MAX_VALUE;const l=Math.abs(r[0].x),u=Math.abs(r[0].y),h=Math.abs(r[0].z);l<=c&&(c=l,n.set(1,0,0)),u<=c&&(c=u,n.set(0,1,0)),h<=c&&n.set(0,0,1),o.crossVectors(r[0],n).normalize(),i[0].crossVectors(r[0],o),s[0].crossVectors(r[0],i[0]);for(let t=1;t<=e;t++){if(i[t]=i[t-1].clone(),s[t]=s[t-1].clone(),o.crossVectors(r[t-1],r[t]),o.length()>Number.EPSILON){o.normalize();const e=Math.acos(Xn(r[t-1].dot(r[t]),-1,1));i[t].applyMatrix4(a.makeRotationAxis(o,e))}s[t].crossVectors(r[t],i[t])}if(!0===t){let t=Math.acos(Xn(i[0].dot(i[e]),-1,1));t/=e,r[0].dot(o.crossVectors(i[0],i[e]))>0&&(t=-t);for(let n=1;n<=e;n++)i[n].applyMatrix4(a.makeRotationAxis(r[n],t*n)),s[n].crossVectors(r[n],i[n])}return{tangents:r,normals:i,binormals:s}}clone(){return(new this.constructor).copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Hu extends Qu{constructor(e=0,t=0,n=1,r=1,i=0,s=2*Math.PI,o=!1,a=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=i,this.aEndAngle=s,this.aClockwise=o,this.aRotation=a}getPoint(e,t=new er){const n=t,r=2*Math.PI;let i=this.aEndAngle-this.aStartAngle;const s=Math.abs(i)<Number.EPSILON;for(;i<0;)i+=r;for(;i>r;)i-=r;i<Number.EPSILON&&(i=s?0:r),!0!==this.aClockwise||s||(i===r?i=-r:i-=r);const o=this.aStartAngle+e*i;let a=this.aX+this.xRadius*Math.cos(o),c=this.aY+this.yRadius*Math.sin(o);if(0!==this.aRotation){const e=Math.cos(this.aRotation),t=Math.sin(this.aRotation),n=a-this.aX,r=c-this.aY;a=n*e-r*t+this.aX,c=n*t+r*e+this.aY}return n.set(a,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Wu extends Hu{constructor(e,t,n,r,i,s){super(e,t,n,n,r,i,s),this.isArcCurve=!0,this.type="ArcCurve"}}function qu(){let e=0,t=0,n=0,r=0;function i(i,s,o,a){e=i,t=o,n=-3*i+3*s-2*o-a,r=2*i-2*s+o+a}return{initCatmullRom:function(e,t,n,r,s){i(t,n,s*(n-e),s*(r-t))},initNonuniformCatmullRom:function(e,t,n,r,s,o,a){let c=(t-e)/s-(n-e)/(s+o)+(n-t)/o,l=(n-t)/o-(r-t)/(o+a)+(r-n)/a;c*=o,l*=o,i(t,n,c,l)},calc:function(i){const s=i*i;return e+t*i+n*s+r*(s*i)}}}const Xu=new Pr,Ku=new qu,Yu=new qu,Ju=new qu;class $u extends Qu{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new Pr){const n=t,r=this.points,i=r.length,s=(i-(this.closed?0:1))*e;let o,a,c=Math.floor(s),l=s-c;this.closed?c+=c>0?0:(Math.floor(Math.abs(c)/i)+1)*i:0===l&&c===i-1&&(c=i-2,l=1),this.closed||c>0?o=r[(c-1)%i]:(Xu.subVectors(r[0],r[1]).add(r[0]),o=Xu);const u=r[c%i],h=r[(c+1)%i];if(this.closed||c+2<i?a=r[(c+2)%i]:(Xu.subVectors(r[i-1],r[i-2]).add(r[i-1]),a=Xu),"centripetal"===this.curveType||"chordal"===this.curveType){const e="chordal"===this.curveType?.5:.25;let t=Math.pow(o.distanceToSquared(u),e),n=Math.pow(u.distanceToSquared(h),e),r=Math.pow(h.distanceToSquared(a),e);n<1e-4&&(n=1),t<1e-4&&(t=n),r<1e-4&&(r=n),Ku.initNonuniformCatmullRom(o.x,u.x,h.x,a.x,t,n,r),Yu.initNonuniformCatmullRom(o.y,u.y,h.y,a.y,t,n,r),Ju.initNonuniformCatmullRom(o.z,u.z,h.z,a.z,t,n,r)}else"catmullrom"===this.curveType&&(Ku.initCatmullRom(o.x,u.x,h.x,a.x,this.tension),Yu.initCatmullRom(o.y,u.y,h.y,a.y,this.tension),Ju.initCatmullRom(o.z,u.z,h.z,a.z,this.tension));return n.set(Ku.calc(l),Yu.calc(l),Ju.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new Pr).fromArray(n))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Zu(e,t,n,r,i){const s=.5*(r-t),o=.5*(i-n),a=e*e;return(2*n-2*r+s+o)*(e*a)+(-3*n+3*r-2*s-o)*a+s*e+n}function eh(e,t,n,r){return function(e,t){const n=1-e;return n*n*t}(e,t)+function(e,t){return 2*(1-e)*e*t}(e,n)+function(e,t){return e*e*t}(e,r)}function th(e,t,n,r,i){return function(e,t){const n=1-e;return n*n*n*t}(e,t)+function(e,t){const n=1-e;return 3*n*n*e*t}(e,n)+function(e,t){return 3*(1-e)*e*e*t}(e,r)+function(e,t){return e*e*e*t}(e,i)}class nh extends Qu{constructor(e=new er,t=new er,n=new er,r=new er){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new er){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(th(e,r.x,i.x,s.x,o.x),th(e,r.y,i.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class rh extends Qu{constructor(e=new Pr,t=new Pr,n=new Pr,r=new Pr){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Pr){const n=t,r=this.v0,i=this.v1,s=this.v2,o=this.v3;return n.set(th(e,r.x,i.x,s.x,o.x),th(e,r.y,i.y,s.y,o.y),th(e,r.z,i.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class ih extends Qu{constructor(e=new er,t=new er){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new er){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new er){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class sh extends Qu{constructor(e=new Pr,t=new Pr){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Pr){const n=t;return 1===e?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Pr){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class oh extends Qu{constructor(e=new er,t=new er,n=new er){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new er){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(eh(e,r.x,i.x,s.x),eh(e,r.y,i.y,s.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ah extends Qu{constructor(e=new Pr,t=new Pr,n=new Pr){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Pr){const n=t,r=this.v0,i=this.v1,s=this.v2;return n.set(eh(e,r.x,i.x,s.x),eh(e,r.y,i.y,s.y),eh(e,r.z,i.z,s.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class ch extends Qu{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new er){const n=t,r=this.points,i=(r.length-1)*e,s=Math.floor(i),o=i-s,a=r[0===s?s:s-1],c=r[s],l=r[s>r.length-2?r.length-1:s+1],u=r[s>r.length-3?r.length-1:s+2];return n.set(Zu(o,a.x,c.x,l.x,u.x),Zu(o,a.y,c.y,l.y,u.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const n=this.points[t];e.points.push(n.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const n=e.points[t];this.points.push((new er).fromArray(n))}return this}}var lh=Object.freeze({__proto__:null,ArcCurve:Wu,CatmullRomCurve3:$u,CubicBezierCurve:nh,CubicBezierCurve3:rh,EllipseCurve:Hu,LineCurve:ih,LineCurve3:sh,QuadraticBezierCurve:oh,QuadraticBezierCurve3:ah,SplineCurve:ch});class uh extends Qu{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=!0===e.isVector2?"LineCurve":"LineCurve3";this.curves.push(new lh[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let i=0;for(;i<r.length;){if(r[i]>=n){const e=r[i]-n,s=this.curves[i],o=s.getLength(),a=0===o?0:1-e/o;return s.getPointAt(a,t)}i++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,i=this.curves;r<i.length;r++){const s=i[r],o=s.isEllipseCurve?2*e:s.isLineCurve||s.isLineCurve3?1:s.isSplineCurve?e*s.points.length:e,a=s.getPoints(o);for(let e=0;e<a.length;e++){const r=a[e];n&&n.equals(r)||(t.push(r),n=r)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push(n.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const n=this.curves[t];e.curves.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const n=e.curves[t];this.curves.push((new lh[n.type]).fromJSON(n))}return this}}class hh extends uh{constructor(e){super(),this.type="Path",this.currentPoint=new er,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new ih(this.currentPoint.clone(),new er(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const i=new oh(this.currentPoint.clone(),new er(e,t),new er(n,r));return this.curves.push(i),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,i,s){const o=new nh(this.currentPoint.clone(),new er(e,t),new er(n,r),new er(i,s));return this.curves.push(o),this.currentPoint.set(i,s),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new ch(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,i,s){const o=this.currentPoint.x,a=this.currentPoint.y;return this.absarc(e+o,t+a,n,r,i,s),this}absarc(e,t,n,r,i,s){return this.absellipse(e,t,n,n,r,i,s),this}ellipse(e,t,n,r,i,s,o,a){const c=this.currentPoint.x,l=this.currentPoint.y;return this.absellipse(e+c,t+l,n,r,i,s,o,a),this}absellipse(e,t,n,r,i,s,o,a){const c=new Hu(e,t,n,r,i,s,o,a);if(this.curves.length>0){const e=c.getPoint(0);e.equals(this.currentPoint)||this.lineTo(e.x,e.y)}this.curves.push(c);const l=c.getPoint(1);return this.currentPoint.copy(l),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class dh extends Ss{constructor(e=[new er(0,-.5),new er(.5,0),new er(0,.5)],t=12,n=0,r=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Xn(r,0,2*Math.PI);const i=[],s=[],o=[],a=[],c=[],l=1/t,u=new Pr,h=new er,d=new Pr,p=new Pr,f=new Pr;let m=0,g=0;for(let t=0;t<=e.length-1;t++)switch(t){case 0:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,f.copy(d),d.normalize(),a.push(d.x,d.y,d.z);break;case e.length-1:a.push(f.x,f.y,f.z);break;default:m=e[t+1].x-e[t].x,g=e[t+1].y-e[t].y,d.x=1*g,d.y=-m,d.z=0*g,p.copy(d),d.x+=f.x,d.y+=f.y,d.z+=f.z,d.normalize(),a.push(d.x,d.y,d.z),f.copy(p)}for(let i=0;i<=t;i++){const d=n+i*l*r,p=Math.sin(d),f=Math.cos(d);for(let n=0;n<=e.length-1;n++){u.x=e[n].x*p,u.y=e[n].y,u.z=e[n].x*f,s.push(u.x,u.y,u.z),h.x=i/t,h.y=n/(e.length-1),o.push(h.x,h.y);const r=a[3*n+0]*p,l=a[3*n+1],d=a[3*n+0]*f;c.push(r,l,d)}}for(let n=0;n<t;n++)for(let t=0;t<e.length-1;t++){const r=t+n*e.length,s=r,o=r+e.length,a=r+e.length+1,c=r+1;i.push(s,o,c),i.push(a,c,o)}this.setIndex(i),this.setAttribute("position",new ys(s,3)),this.setAttribute("uv",new ys(o,2)),this.setAttribute("normal",new ys(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dh(e.points,e.segments,e.phiStart,e.phiLength)}}class ph extends dh{constructor(e=1,t=1,n=4,r=8){const i=new hh;i.absarc(0,-t/2,e,1.5*Math.PI,0),i.absarc(0,t/2,e,0,.5*Math.PI),super(i.getPoints(n),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:n,radialSegments:r}}static fromJSON(e){return new ph(e.radius,e.length,e.capSegments,e.radialSegments)}}class fh extends Ss{constructor(e=1,t=32,n=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const i=[],s=[],o=[],a=[],c=new Pr,l=new er;s.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let i=0,u=3;i<=t;i++,u+=3){const h=n+i/t*r;c.x=e*Math.cos(h),c.y=e*Math.sin(h),s.push(c.x,c.y,c.z),o.push(0,0,1),l.x=(s[u]/e+1)/2,l.y=(s[u+1]/e+1)/2,a.push(l.x,l.y)}for(let e=1;e<=t;e++)i.push(e,e+1,0);this.setIndex(i),this.setAttribute("position",new ys(s,3)),this.setAttribute("normal",new ys(o,3)),this.setAttribute("uv",new ys(a,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new fh(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class mh extends Ss{constructor(e=1,t=1,n=1,r=32,i=1,s=!1,o=0,a=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:i,openEnded:s,thetaStart:o,thetaLength:a};const c=this;r=Math.floor(r),i=Math.floor(i);const l=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let g=0;function A(n){const i=p,s=new er,f=new Pr;let A=0;const y=!0===n?e:t,_=!0===n?1:-1;for(let e=1;e<=r;e++)u.push(0,m*_,0),h.push(0,_,0),d.push(.5,.5),p++;const v=p;for(let e=0;e<=r;e++){const t=e/r*a+o,n=Math.cos(t),i=Math.sin(t);f.x=y*i,f.y=m*_,f.z=y*n,u.push(f.x,f.y,f.z),h.push(0,_,0),s.x=.5*n+.5,s.y=.5*i*_+.5,d.push(s.x,s.y),p++}for(let e=0;e<r;e++){const t=i+e,r=v+e;!0===n?l.push(r,r+1,t):l.push(r+1,r,t),A+=3}c.addGroup(g,A,!0===n?1:2),g+=A}!function(){const s=new Pr,A=new Pr;let y=0;const _=(t-e)/n;for(let c=0;c<=i;c++){const l=[],g=c/i,y=g*(t-e)+e;for(let e=0;e<=r;e++){const t=e/r,i=t*a+o,c=Math.sin(i),f=Math.cos(i);A.x=y*c,A.y=-g*n+m,A.z=y*f,u.push(A.x,A.y,A.z),s.set(c,_,f).normalize(),h.push(s.x,s.y,s.z),d.push(t,1-g),l.push(p++)}f.push(l)}for(let e=0;e<r;e++)for(let t=0;t<i;t++){const n=f[t][e],r=f[t+1][e],i=f[t+1][e+1],s=f[t][e+1];l.push(n,r,s),l.push(r,i,s),y+=6}c.addGroup(g,y,0),g+=y}(),!1===s&&(e>0&&A(!0),t>0&&A(!1)),this.setIndex(l),this.setAttribute("position",new ys(u,3)),this.setAttribute("normal",new ys(h,3)),this.setAttribute("uv",new ys(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new mh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class gh extends mh{constructor(e=1,t=1,n=32,r=1,i=!1,s=0,o=2*Math.PI){super(0,e,t,n,r,i,s,o),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:i,thetaStart:s,thetaLength:o}}static fromJSON(e){return new gh(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ah extends Ss{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const i=[],s=[];function o(e,t,n,r){const i=r+1,s=[];for(let r=0;r<=i;r++){s[r]=[];const o=e.clone().lerp(n,r/i),a=t.clone().lerp(n,r/i),c=i-r;for(let e=0;e<=c;e++)s[r][e]=0===e&&r===i?o:o.clone().lerp(a,e/c)}for(let e=0;e<i;e++)for(let t=0;t<2*(i-e)-1;t++){const n=Math.floor(t/2);t%2==0?(a(s[e][n+1]),a(s[e+1][n]),a(s[e][n])):(a(s[e][n+1]),a(s[e+1][n+1]),a(s[e+1][n]))}}function a(e){i.push(e.x,e.y,e.z)}function c(t,n){const r=3*t;n.x=e[r+0],n.y=e[r+1],n.z=e[r+2]}function l(e,t,n,r){r<0&&1===e.x&&(s[t]=e.x-1),0===n.x&&0===n.z&&(s[t]=r/2/Math.PI+.5)}function u(e){return Math.atan2(e.z,-e.x)}!function(e){const n=new Pr,r=new Pr,i=new Pr;for(let s=0;s<t.length;s+=3)c(t[s+0],n),c(t[s+1],r),c(t[s+2],i),o(n,r,i,e)}(r),function(e){const t=new Pr;for(let n=0;n<i.length;n+=3)t.x=i[n+0],t.y=i[n+1],t.z=i[n+2],t.normalize().multiplyScalar(e),i[n+0]=t.x,i[n+1]=t.y,i[n+2]=t.z}(n),function(){const e=new Pr;for(let n=0;n<i.length;n+=3){e.x=i[n+0],e.y=i[n+1],e.z=i[n+2];const r=u(e)/2/Math.PI+.5,o=(t=e,Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))/Math.PI+.5);s.push(r,1-o)}var t;(function(){const e=new Pr,t=new Pr,n=new Pr,r=new Pr,o=new er,a=new er,c=new er;for(let h=0,d=0;h<i.length;h+=9,d+=6){e.set(i[h+0],i[h+1],i[h+2]),t.set(i[h+3],i[h+4],i[h+5]),n.set(i[h+6],i[h+7],i[h+8]),o.set(s[d+0],s[d+1]),a.set(s[d+2],s[d+3]),c.set(s[d+4],s[d+5]),r.copy(e).add(t).add(n).divideScalar(3);const p=u(r);l(o,d+0,e,p),l(a,d+2,t,p),l(c,d+4,n,p)}})(),function(){for(let e=0;e<s.length;e+=6){const t=s[e+0],n=s[e+2],r=s[e+4],i=Math.max(t,n,r),o=Math.min(t,n,r);i>.9&&o<.1&&(t<.2&&(s[e+0]+=1),n<.2&&(s[e+2]+=1),r<.2&&(s[e+4]+=1))}}()}(),this.setAttribute("position",new ys(i,3)),this.setAttribute("normal",new ys(i.slice(),3)),this.setAttribute("uv",new ys(s,2)),0===r?this.computeVertexNormals():this.normalizeNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ah(e.vertices,e.indices,e.radius,e.details)}}class yh extends Ah{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n;super([-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9],e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new yh(e.radius,e.detail)}}const _h=new Pr,vh=new Pr,bh=new Pr,xh=new Wi;class wh extends Ss{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},null!==e){const n=4,r=Math.pow(10,n),i=Math.cos(Hn*t),s=e.getIndex(),o=e.getAttribute("position"),a=s?s.count:o.count,c=[0,0,0],l=["a","b","c"],u=new Array(3),h={},d=[];for(let e=0;e<a;e+=3){s?(c[0]=s.getX(e),c[1]=s.getX(e+1),c[2]=s.getX(e+2)):(c[0]=e,c[1]=e+1,c[2]=e+2);const{a:t,b:n,c:a}=xh;if(t.fromBufferAttribute(o,c[0]),n.fromBufferAttribute(o,c[1]),a.fromBufferAttribute(o,c[2]),xh.getNormal(bh),u[0]=`${Math.round(t.x*r)},${Math.round(t.y*r)},${Math.round(t.z*r)}`,u[1]=`${Math.round(n.x*r)},${Math.round(n.y*r)},${Math.round(n.z*r)}`,u[2]=`${Math.round(a.x*r)},${Math.round(a.y*r)},${Math.round(a.z*r)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let e=0;e<3;e++){const t=(e+1)%3,n=u[e],r=u[t],s=xh[l[e]],o=xh[l[t]],a=`${n}_${r}`,p=`${r}_${n}`;p in h&&h[p]?(bh.dot(h[p].normal)<=i&&(d.push(s.x,s.y,s.z),d.push(o.x,o.y,o.z)),h[p]=null):a in h||(h[a]={index0:c[e],index1:c[t],normal:bh.clone()})}}for(const e in h)if(h[e]){const{index0:t,index1:n}=h[e];_h.fromBufferAttribute(o,t),vh.fromBufferAttribute(o,n),d.push(_h.x,_h.y,_h.z),d.push(vh.x,vh.y,vh.z)}this.setAttribute("position",new ys(d,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Eh extends hh{constructor(e){super(e),this.uuid=qn(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push(n.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const n=this.holes[t];e.holes.push(n.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const n=e.holes[t];this.holes.push((new hh).fromJSON(n))}return this}}const Th=function(e,t,n=2){const r=t&&t.length,i=r?t[0]*n:e.length;let s=Sh(e,0,i,n,!0);const o=[];if(!s||s.next===s.prev)return o;let a,c,l,u,h,d,p;if(r&&(s=function(e,t,n,r){const i=[];let s,o,a,c,l;for(s=0,o=t.length;s<o;s++)a=t[s]*r,c=s<o-1?t[s+1]*r:e.length,l=Sh(e,a,c,r,!1),l===l.next&&(l.steiner=!0),i.push(Fh(l));for(i.sort(Dh),s=0;s<i.length;s++)n=Oh(i[s],n);return n}(e,t,s,n)),e.length>80*n){a=l=e[0],c=u=e[1];for(let t=n;t<i;t+=n)h=e[t],d=e[t+1],h<a&&(a=h),d<c&&(c=d),h>l&&(l=h),d>u&&(u=d);p=Math.max(l-a,u-c),p=0!==p?32767/p:0}return Ch(s,o,n,a,c,p,0),o};function Sh(e,t,n,r,i){let s,o;if(i===function(e,t,n,r){let i=0;for(let s=t,o=n-r;s<n;s+=r)i+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return i}(e,t,n,r)>0)for(s=t;s<n;s+=r)o=qh(s,e[s],e[s+1],o);else for(s=n-r;s>=t;s-=r)o=qh(s,e[s],e[s+1],o);return o&&Gh(o,o.next)&&(Xh(o),o=o.next),o}function Mh(e,t){if(!e)return e;t||(t=e);let n,r=e;do{if(n=!1,r.steiner||!Gh(r,r.next)&&0!==zh(r.prev,r,r.next))r=r.next;else{if(Xh(r),r=t=r.prev,r===r.next)break;n=!0}}while(n||r!==t);return t}function Ch(e,t,n,r,i,s,o){if(!e)return;!o&&s&&function(e,t,n,r){let i=e;do{0===i.z&&(i.z=Nh(i.x,i.y,t,n,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==e);i.prevZ.nextZ=null,i.prevZ=null,function(e){let t,n,r,i,s,o,a,c,l=1;do{for(n=e,e=null,s=null,o=0;n;){for(o++,r=n,a=0,t=0;t<l&&(a++,r=r.nextZ,r);t++);for(c=l;a>0||c>0&&r;)0!==a&&(0===c||!r||n.z<=r.z)?(i=n,n=n.nextZ,a--):(i=r,r=r.nextZ,c--),s?s.nextZ=i:e=i,i.prevZ=s,s=i;n=r}s.nextZ=null,l*=2}while(o>1)}(i)}(e,r,i,s);let a,c,l=e;for(;e.prev!==e.next;)if(a=e.prev,c=e.next,s?Rh(e,r,i,s):Ih(e))t.push(a.i/n|0),t.push(e.i/n|0),t.push(c.i/n|0),Xh(e),e=c.next,l=c.next;else if((e=c)===l){o?1===o?Ch(e=Bh(Mh(e),t,n),t,n,r,i,s,2):2===o&&Ph(e,t,n,r,i,s):Ch(Mh(e),t,n,r,i,s,1);break}}function Ih(e){const t=e.prev,n=e,r=e.next;if(zh(t,n,r)>=0)return!1;const i=t.x,s=n.x,o=r.x,a=t.y,c=n.y,l=r.y,u=i<s?i<o?i:o:s<o?s:o,h=a<c?a<l?a:l:c<l?c:l,d=i>s?i>o?i:o:s>o?s:o,p=a>c?a>l?a:l:c>l?c:l;let f=r.next;for(;f!==t;){if(f.x>=u&&f.x<=d&&f.y>=h&&f.y<=p&&Uh(i,a,s,c,o,l,f.x,f.y)&&zh(f.prev,f,f.next)>=0)return!1;f=f.next}return!0}function Rh(e,t,n,r){const i=e.prev,s=e,o=e.next;if(zh(i,s,o)>=0)return!1;const a=i.x,c=s.x,l=o.x,u=i.y,h=s.y,d=o.y,p=a<c?a<l?a:l:c<l?c:l,f=u<h?u<d?u:d:h<d?h:d,m=a>c?a>l?a:l:c>l?c:l,g=u>h?u>d?u:d:h>d?h:d,A=Nh(p,f,t,n,r),y=Nh(m,g,t,n,r);let _=e.prevZ,v=e.nextZ;for(;_&&_.z>=A&&v&&v.z<=y;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==o&&Uh(a,u,c,h,l,d,_.x,_.y)&&zh(_.prev,_,_.next)>=0)return!1;if(_=_.prevZ,v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==o&&Uh(a,u,c,h,l,d,v.x,v.y)&&zh(v.prev,v,v.next)>=0)return!1;v=v.nextZ}for(;_&&_.z>=A;){if(_.x>=p&&_.x<=m&&_.y>=f&&_.y<=g&&_!==i&&_!==o&&Uh(a,u,c,h,l,d,_.x,_.y)&&zh(_.prev,_,_.next)>=0)return!1;_=_.prevZ}for(;v&&v.z<=y;){if(v.x>=p&&v.x<=m&&v.y>=f&&v.y<=g&&v!==i&&v!==o&&Uh(a,u,c,h,l,d,v.x,v.y)&&zh(v.prev,v,v.next)>=0)return!1;v=v.nextZ}return!0}function Bh(e,t,n){let r=e;do{const i=r.prev,s=r.next.next;!Gh(i,s)&&jh(i,r,r.next,s)&&Hh(i,s)&&Hh(s,i)&&(t.push(i.i/n|0),t.push(r.i/n|0),t.push(s.i/n|0),Xh(r),Xh(r.next),r=e=s),r=r.next}while(r!==e);return Mh(r)}function Ph(e,t,n,r,i,s){let o=e;do{let e=o.next.next;for(;e!==o.prev;){if(o.i!==e.i&&kh(o,e)){let a=Wh(o,e);return o=Mh(o,o.next),a=Mh(a,a.next),Ch(o,t,n,r,i,s,0),void Ch(a,t,n,r,i,s,0)}e=e.next}o=o.next}while(o!==e)}function Dh(e,t){return e.x-t.x}function Oh(e,t){const n=function(e,t){let n,r=t,i=-1/0;const s=e.x,o=e.y;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){const e=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(e<=s&&e>i&&(i=e,n=r.x<r.next.x?r:r.next,e===s))return n}r=r.next}while(r!==t);if(!n)return null;const a=n,c=n.x,l=n.y;let u,h=1/0;r=n;do{s>=r.x&&r.x>=c&&s!==r.x&&Uh(o<l?s:i,o,c,l,o<l?i:s,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(s-r.x),Hh(r,e)&&(u<h||u===h&&(r.x>n.x||r.x===n.x&&Lh(n,r)))&&(n=r,h=u)),r=r.next}while(r!==a);return n}(e,t);if(!n)return t;const r=Wh(n,e);return Mh(r,r.next),Mh(n,n.next)}function Lh(e,t){return zh(e.prev,e,t.prev)<0&&zh(t.next,e,e.next)<0}function Nh(e,t,n,r,i){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*i|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*i|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function Fh(e){let t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function Uh(e,t,n,r,i,s,o,a){return(i-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(r-a)>=(n-o)*(t-a)&&(n-o)*(s-a)>=(i-o)*(r-a)}function kh(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){let n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&jh(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(Hh(e,t)&&Hh(t,e)&&function(e,t){let n=e,r=!1;const i=(e.x+t.x)/2,s=(e.y+t.y)/2;do{n.y>s!=n.next.y>s&&n.next.y!==n.y&&i<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(zh(e.prev,e,t.prev)||zh(e,t.prev,t))||Gh(e,t)&&zh(e.prev,e,e.next)>0&&zh(t.prev,t,t.next)>0)}function zh(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function Gh(e,t){return e.x===t.x&&e.y===t.y}function jh(e,t,n,r){const i=Qh(zh(e,t,n)),s=Qh(zh(e,t,r)),o=Qh(zh(n,r,e)),a=Qh(zh(n,r,t));return i!==s&&o!==a||(!(0!==i||!Vh(e,n,t))||(!(0!==s||!Vh(e,r,t))||(!(0!==o||!Vh(n,e,r))||!(0!==a||!Vh(n,t,r)))))}function Vh(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function Qh(e){return e>0?1:e<0?-1:0}function Hh(e,t){return zh(e.prev,e,e.next)<0?zh(e,t,e.next)>=0&&zh(e,e.prev,t)>=0:zh(e,t,e.prev)<0||zh(e,e.next,t)<0}function Wh(e,t){const n=new Kh(e.i,e.x,e.y),r=new Kh(t.i,t.x,t.y),i=e.next,s=t.prev;return e.next=t,t.prev=e,n.next=i,i.prev=n,r.next=n,n.prev=r,s.next=r,r.prev=s,r}function qh(e,t,n,r){const i=new Kh(e,t,n);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Xh(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Kh(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}class Yh{static area(e){const t=e.length;let n=0;for(let r=t-1,i=0;i<t;r=i++)n+=e[r].x*e[i].y-e[i].x*e[r].y;return.5*n}static isClockWise(e){return Yh.area(e)<0}static triangulateShape(e,t){const n=[],r=[],i=[];Jh(e),$h(n,e);let s=e.length;t.forEach(Jh);for(let e=0;e<t.length;e++)r.push(s),s+=t[e].length,$h(n,t[e]);const o=Th(n,r);for(let e=0;e<o.length;e+=3)i.push(o.slice(e,e+3));return i}}function Jh(e){const t=e.length;t>2&&e[t-1].equals(e[0])&&e.pop()}function $h(e,t){for(let n=0;n<t.length;n++)e.push(t[n].x),e.push(t[n].y)}class Zh extends Ss{constructor(e=new Eh([new er(.5,.5),new er(-.5,.5),new er(-.5,-.5),new er(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],i=[];for(let t=0,n=e.length;t<n;t++){s(e[t])}function s(e){const s=[],o=void 0!==t.curveSegments?t.curveSegments:12,a=void 0!==t.steps?t.steps:1,c=void 0!==t.depth?t.depth:1;let l=void 0===t.bevelEnabled||t.bevelEnabled,u=void 0!==t.bevelThickness?t.bevelThickness:.2,h=void 0!==t.bevelSize?t.bevelSize:u-.1,d=void 0!==t.bevelOffset?t.bevelOffset:0,p=void 0!==t.bevelSegments?t.bevelSegments:3;const f=t.extrudePath,m=void 0!==t.UVGenerator?t.UVGenerator:ed;let g,A,y,_,v,b=!1;f&&(g=f.getSpacedPoints(a),b=!0,l=!1,A=f.computeFrenetFrames(a,!1),y=new Pr,_=new Pr,v=new Pr),l||(p=0,u=0,h=0,d=0);const x=e.extractPoints(o);let w=x.shape;const E=x.holes;if(!Yh.isClockWise(w)){w=w.reverse();for(let e=0,t=E.length;e<t;e++){const t=E[e];Yh.isClockWise(t)&&(E[e]=t.reverse())}}const T=Yh.triangulateShape(w,E),S=w;for(let e=0,t=E.length;e<t;e++){const t=E[e];w=w.concat(t)}function M(e,t,n){return t||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().addScaledVector(t,n)}const C=w.length,I=T.length;function R(e,t,n){let r,i,s;const o=e.x-t.x,a=e.y-t.y,c=n.x-e.x,l=n.y-e.y,u=o*o+a*a,h=o*l-a*c;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(c*c+l*l),p=t.x-a/h,f=t.y+o/h,m=((n.x-l/d-p)*l-(n.y+c/d-f)*c)/(o*l-a*c);r=p+o*m-e.x,i=f+a*m-e.y;const g=r*r+i*i;if(g<=2)return new er(r,i);s=Math.sqrt(g/2)}else{let e=!1;o>Number.EPSILON?c>Number.EPSILON&&(e=!0):o<-Number.EPSILON?c<-Number.EPSILON&&(e=!0):Math.sign(a)===Math.sign(l)&&(e=!0),e?(r=-a,i=o,s=Math.sqrt(u)):(r=o,i=a,s=Math.sqrt(u/2))}return new er(r/s,i/s)}const B=[];for(let e=0,t=S.length,n=t-1,r=e+1;e<t;e++,n++,r++)n===t&&(n=0),r===t&&(r=0),B[e]=R(S[e],S[n],S[r]);const P=[];let D,O=B.concat();for(let e=0,t=E.length;e<t;e++){const t=E[e];D=[];for(let e=0,n=t.length,r=n-1,i=e+1;e<n;e++,r++,i++)r===n&&(r=0),i===n&&(i=0),D[e]=R(t[e],t[r],t[i]);P.push(D),O=O.concat(D)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=S.length;e<t;e++){const t=M(S[e],B[e],r);F(t.x,t.y,-n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];D=P[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],D[e],r);F(i.x,i.y,-n)}}}const L=h+d;for(let e=0;e<C;e++){const t=l?M(w[e],O[e],L):w[e];b?(_.copy(A.normals[0]).multiplyScalar(t.x),y.copy(A.binormals[0]).multiplyScalar(t.y),v.copy(g[0]).add(_).add(y),F(v.x,v.y,v.z)):F(t.x,t.y,0)}for(let e=1;e<=a;e++)for(let t=0;t<C;t++){const n=l?M(w[t],O[t],L):w[t];b?(_.copy(A.normals[e]).multiplyScalar(n.x),y.copy(A.binormals[e]).multiplyScalar(n.y),v.copy(g[e]).add(_).add(y),F(v.x,v.y,v.z)):F(n.x,n.y,c/a*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),r=h*Math.sin(t*Math.PI/2)+d;for(let e=0,t=S.length;e<t;e++){const t=M(S[e],B[e],r);F(t.x,t.y,c+n)}for(let e=0,t=E.length;e<t;e++){const t=E[e];D=P[e];for(let e=0,i=t.length;e<i;e++){const i=M(t[e],D[e],r);b?F(i.x,i.y+g[a-1].y,g[a-1].x+n):F(i.x,i.y,c+n)}}}function N(e,t){let n=e.length;for(;--n>=0;){const r=n;let i=n-1;i<0&&(i=e.length-1);for(let e=0,n=a+2*p;e<n;e++){const n=C*e,s=C*(e+1);k(t+r+n,t+i+n,t+i+s,t+r+s)}}}function F(e,t,n){s.push(e),s.push(t),s.push(n)}function U(e,t,i){z(e),z(t),z(i);const s=r.length/3,o=m.generateTopUV(n,r,s-3,s-2,s-1);G(o[0]),G(o[1]),G(o[2])}function k(e,t,i,s){z(e),z(t),z(s),z(t),z(i),z(s);const o=r.length/3,a=m.generateSideWallUV(n,r,o-6,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[3]),G(a[1]),G(a[2]),G(a[3])}function z(e){r.push(s[3*e+0]),r.push(s[3*e+1]),r.push(s[3*e+2])}function G(e){i.push(e.x),i.push(e.y)}!function(){const e=r.length/3;if(l){let e=0,t=C*e;for(let e=0;e<I;e++){const n=T[e];U(n[2]+t,n[1]+t,n[0]+t)}e=a+2*p,t=C*e;for(let e=0;e<I;e++){const n=T[e];U(n[0]+t,n[1]+t,n[2]+t)}}else{for(let e=0;e<I;e++){const t=T[e];U(t[2],t[1],t[0])}for(let e=0;e<I;e++){const t=T[e];U(t[0]+C*a,t[1]+C*a,t[2]+C*a)}}n.addGroup(e,r.length/3-e,0)}(),function(){const e=r.length/3;let t=0;N(S,t),t+=S.length;for(let e=0,n=E.length;e<n;e++){const n=E[e];N(n,t),t+=n.length}n.addGroup(e,r.length/3-e,1)}()}this.setAttribute("position",new ys(r,3)),this.setAttribute("uv",new ys(i,2)),this.computeVertexNormals()}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t,n){if(n.shapes=[],Array.isArray(e))for(let t=0,r=e.length;t<r;t++){const r=e[t];n.shapes.push(r.uuid)}else n.shapes.push(e.uuid);n.options=Object.assign({},t),void 0!==t.extrudePath&&(n.options.extrudePath=t.extrudePath.toJSON());return n}(this.parameters.shapes,this.parameters.options,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}const r=e.options.extrudePath;return void 0!==r&&(e.options.extrudePath=(new lh[r.type]).fromJSON(r)),new Zh(n,e.options)}}const ed={generateTopUV:function(e,t,n,r,i){const s=t[3*n],o=t[3*n+1],a=t[3*r],c=t[3*r+1],l=t[3*i],u=t[3*i+1];return[new er(s,o),new er(a,c),new er(l,u)]},generateSideWallUV:function(e,t,n,r,i,s){const o=t[3*n],a=t[3*n+1],c=t[3*n+2],l=t[3*r],u=t[3*r+1],h=t[3*r+2],d=t[3*i],p=t[3*i+1],f=t[3*i+2],m=t[3*s],g=t[3*s+1],A=t[3*s+2];return Math.abs(a-u)<Math.abs(o-l)?[new er(o,1-c),new er(l,1-h),new er(d,1-f),new er(m,1-A)]:[new er(a,1-c),new er(u,1-h),new er(p,1-f),new er(g,1-A)]}};class td extends Ah{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2;super([-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1],e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new td(e.radius,e.detail)}}class nd extends Ah{constructor(e=1,t=0){super([1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2],e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new nd(e.radius,e.detail)}}class rd extends Ss{constructor(e=.5,t=1,n=32,r=1,i=0,s=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:i,thetaLength:s},n=Math.max(3,n);const o=[],a=[],c=[],l=[];let u=e;const h=(t-e)/(r=Math.max(1,r)),d=new Pr,p=new er;for(let e=0;e<=r;e++){for(let e=0;e<=n;e++){const r=i+e/n*s;d.x=u*Math.cos(r),d.y=u*Math.sin(r),a.push(d.x,d.y,d.z),c.push(0,0,1),p.x=(d.x/t+1)/2,p.y=(d.y/t+1)/2,l.push(p.x,p.y)}u+=h}for(let e=0;e<r;e++){const t=e*(n+1);for(let e=0;e<n;e++){const r=e+t,i=r,s=r+n+1,a=r+n+2,c=r+1;o.push(i,s,c),o.push(s,a,c)}}this.setIndex(o),this.setAttribute("position",new ys(a,3)),this.setAttribute("normal",new ys(c,3)),this.setAttribute("uv",new ys(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new rd(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class id extends Ss{constructor(e=new Eh([new er(0,.5),new er(-.5,-.5),new er(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],i=[],s=[];let o=0,a=0;if(!1===Array.isArray(e))c(e);else for(let t=0;t<e.length;t++)c(e[t]),this.addGroup(o,a,t),o+=a,a=0;function c(e){const o=r.length/3,c=e.extractPoints(t);let l=c.shape;const u=c.holes;!1===Yh.isClockWise(l)&&(l=l.reverse());for(let e=0,t=u.length;e<t;e++){const t=u[e];!0===Yh.isClockWise(t)&&(u[e]=t.reverse())}const h=Yh.triangulateShape(l,u);for(let e=0,t=u.length;e<t;e++){const t=u[e];l=l.concat(t)}for(let e=0,t=l.length;e<t;e++){const t=l[e];r.push(t.x,t.y,0),i.push(0,0,1),s.push(t.x,t.y)}for(let e=0,t=h.length;e<t;e++){const t=h[e],r=t[0]+o,i=t[1]+o,s=t[2]+o;n.push(r,i,s),a+=3}}this.setIndex(n),this.setAttribute("position",new ys(r,3)),this.setAttribute("normal",new ys(i,3)),this.setAttribute("uv",new ys(s,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return function(e,t){if(t.shapes=[],Array.isArray(e))for(let n=0,r=e.length;n<r;n++){const r=e[n];t.shapes.push(r.uuid)}else t.shapes.push(e.uuid);return t}(this.parameters.shapes,e)}static fromJSON(e,t){const n=[];for(let r=0,i=e.shapes.length;r<i;r++){const i=t[e.shapes[r]];n.push(i)}return new id(n,e.curveSegments)}}class sd extends Ss{constructor(e=1,t=32,n=16,r=0,i=2*Math.PI,s=0,o=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:i,thetaStart:s,thetaLength:o},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const a=Math.min(s+o,Math.PI);let c=0;const l=[],u=new Pr,h=new Pr,d=[],p=[],f=[],m=[];for(let d=0;d<=n;d++){const g=[],A=d/n;let y=0;0===d&&0===s?y=.5/t:d===n&&a===Math.PI&&(y=-.5/t);for(let n=0;n<=t;n++){const a=n/t;u.x=-e*Math.cos(r+a*i)*Math.sin(s+A*o),u.y=e*Math.cos(s+A*o),u.z=e*Math.sin(r+a*i)*Math.sin(s+A*o),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(a+y,1-A),g.push(c++)}l.push(g)}for(let e=0;e<n;e++)for(let r=0;r<t;r++){const t=l[e][r+1],i=l[e][r],o=l[e+1][r],c=l[e+1][r+1];(0!==e||s>0)&&d.push(t,i,c),(e!==n-1||a<Math.PI)&&d.push(i,o,c)}this.setIndex(d),this.setAttribute("position",new ys(p,3)),this.setAttribute("normal",new ys(f,3)),this.setAttribute("uv",new ys(m,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new sd(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class od extends Ah{constructor(e=1,t=0){super([1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],[2,1,0,0,3,2,1,3,0,2,3,1],e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new od(e.radius,e.detail)}}class ad extends Ss{constructor(e=1,t=.4,n=12,r=48,i=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:i},n=Math.floor(n),r=Math.floor(r);const s=[],o=[],a=[],c=[],l=new Pr,u=new Pr,h=new Pr;for(let s=0;s<=n;s++)for(let d=0;d<=r;d++){const p=d/r*i,f=s/n*Math.PI*2;u.x=(e+t*Math.cos(f))*Math.cos(p),u.y=(e+t*Math.cos(f))*Math.sin(p),u.z=t*Math.sin(f),o.push(u.x,u.y,u.z),l.x=e*Math.cos(p),l.y=e*Math.sin(p),h.subVectors(u,l).normalize(),a.push(h.x,h.y,h.z),c.push(d/r),c.push(s/n)}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*e+t-1,i=(r+1)*(e-1)+t-1,o=(r+1)*(e-1)+t,a=(r+1)*e+t;s.push(n,i,a),s.push(i,o,a)}this.setIndex(s),this.setAttribute("position",new ys(o,3)),this.setAttribute("normal",new ys(a,3)),this.setAttribute("uv",new ys(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ad(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class cd extends Ss{constructor(e=1,t=.4,n=64,r=8,i=2,s=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:i,q:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],c=[],l=[],u=new Pr,h=new Pr,d=new Pr,p=new Pr,f=new Pr,m=new Pr,g=new Pr;for(let o=0;o<=n;++o){const y=o/n*i*Math.PI*2;A(y,i,s,e,d),A(y+.01,i,s,e,p),m.subVectors(p,d),g.addVectors(p,d),f.crossVectors(m,g),g.crossVectors(f,m),f.normalize(),g.normalize();for(let e=0;e<=r;++e){const i=e/r*Math.PI*2,s=-t*Math.cos(i),p=t*Math.sin(i);u.x=d.x+(s*g.x+p*f.x),u.y=d.y+(s*g.y+p*f.y),u.z=d.z+(s*g.z+p*f.z),a.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),c.push(h.x,h.y,h.z),l.push(o/n),l.push(e/r)}}for(let e=1;e<=n;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,a=(r+1)*(e-1)+t;o.push(n,i,a),o.push(i,s,a)}function A(e,t,n,r,i){const s=Math.cos(e),o=Math.sin(e),a=n/t*e,c=Math.cos(a);i.x=r*(2+c)*.5*s,i.y=r*(2+c)*o*.5,i.z=r*Math.sin(a)*.5}this.setIndex(o),this.setAttribute("position",new ys(a,3)),this.setAttribute("normal",new ys(c,3)),this.setAttribute("uv",new ys(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new cd(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class ld extends Ss{constructor(e=new ah(new Pr(-1,-1,0),new Pr(-1,1,0),new Pr(1,1,0)),t=64,n=1,r=8,i=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:i};const s=e.computeFrenetFrames(t,i);this.tangents=s.tangents,this.normals=s.normals,this.binormals=s.binormals;const o=new Pr,a=new Pr,c=new er;let l=new Pr;const u=[],h=[],d=[],p=[];function f(i){l=e.getPointAt(i/t,l);const c=s.normals[i],d=s.binormals[i];for(let e=0;e<=r;e++){const t=e/r*Math.PI*2,i=Math.sin(t),s=-Math.cos(t);a.x=s*c.x+i*d.x,a.y=s*c.y+i*d.y,a.z=s*c.z+i*d.z,a.normalize(),h.push(a.x,a.y,a.z),o.x=l.x+n*a.x,o.y=l.y+n*a.y,o.z=l.z+n*a.z,u.push(o.x,o.y,o.z)}}!function(){for(let e=0;e<t;e++)f(e);f(!1===i?t:0),function(){for(let e=0;e<=t;e++)for(let n=0;n<=r;n++)c.x=e/t,c.y=n/r,d.push(c.x,c.y)}(),function(){for(let e=1;e<=t;e++)for(let t=1;t<=r;t++){const n=(r+1)*(e-1)+(t-1),i=(r+1)*e+(t-1),s=(r+1)*e+t,o=(r+1)*(e-1)+t;p.push(n,i,o),p.push(i,s,o)}}()}(),this.setIndex(p),this.setAttribute("position",new ys(u,3)),this.setAttribute("normal",new ys(h,3)),this.setAttribute("uv",new ys(d,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new ld((new lh[e.path.type]).fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class ud extends Ss{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},null!==e){const t=[],n=new Set,r=new Pr,i=new Pr;if(null!==e.index){const s=e.attributes.position,o=e.index;let a=e.groups;0===a.length&&(a=[{start:0,count:o.count,materialIndex:0}]);for(let e=0,c=a.length;e<c;++e){const c=a[e],l=c.start;for(let e=l,a=l+c.count;e<a;e+=3)for(let a=0;a<3;a++){const c=o.getX(e+a),l=o.getX(e+(a+1)%3);r.fromBufferAttribute(s,c),i.fromBufferAttribute(s,l),!0===hd(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}}else{const s=e.attributes.position;for(let e=0,o=s.count/3;e<o;e++)for(let o=0;o<3;o++){const a=3*e+o,c=3*e+(o+1)%3;r.fromBufferAttribute(s,a),i.fromBufferAttribute(s,c),!0===hd(r,i,n)&&(t.push(r.x,r.y,r.z),t.push(i.x,i.y,i.z))}}this.setAttribute("position",new ys(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function hd(e,t,n){const r=`${e.x},${e.y},${e.z}-${t.x},${t.y},${t.z}`,i=`${t.x},${t.y},${t.z}-${e.x},${e.y},${e.z}`;return!0!==n.has(r)&&!0!==n.has(i)&&(n.add(r),n.add(i),!0)}var dd=Object.freeze({__proto__:null,BoxGeometry:Ws,CapsuleGeometry:ph,CircleGeometry:fh,ConeGeometry:gh,CylinderGeometry:mh,DodecahedronGeometry:yh,EdgesGeometry:wh,ExtrudeGeometry:Zh,IcosahedronGeometry:td,LatheGeometry:dh,OctahedronGeometry:nd,PlaneGeometry:Ao,PolyhedronGeometry:Ah,RingGeometry:rd,ShapeGeometry:id,SphereGeometry:sd,TetrahedronGeometry:od,TorusGeometry:ad,TorusKnotGeometry:cd,TubeGeometry:ld,WireframeGeometry:ud});class pd extends es{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Ji(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class fd extends Js{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class md extends es{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Ji(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qt,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yi,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class gd extends md{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new er(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Xn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(e){this.ior=(1+.4*e)/(1-.4*e)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Ji(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Ji(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Ji(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Ad extends es{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Ji(16777215),this.specular=new Ji(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qt,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yi,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class yd extends es{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Ji(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qt,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class _d extends es{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qt,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class vd extends es{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Ji(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Ji(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qt,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new yi,this.combine=J,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bd extends es{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Ji(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=qt,this.normalScale=new er(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xd extends Au{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function wd(e,t,n){return!e||!n&&e.constructor===t?e:"number"==typeof t.BYTES_PER_ELEMENT?new t(e):Array.prototype.slice.call(e)}function Ed(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Td(e){const t=e.length,n=new Array(t);for(let e=0;e!==t;++e)n[e]=e;return n.sort((function(t,n){return e[t]-e[n]})),n}function Sd(e,t,n){const r=e.length,i=new e.constructor(r);for(let s=0,o=0;o!==r;++s){const r=n[s]*t;for(let n=0;n!==t;++n)i[o++]=e[r+n]}return i}function Md(e,t,n,r){let i=1,s=e[0];for(;void 0!==s&&void 0===s[r];)s=e[i++];if(void 0===s)return;let o=s[r];if(void 0!==o)if(Array.isArray(o))do{o=s[r],void 0!==o&&(t.push(s.time),n.push.apply(n,o)),s=e[i++]}while(void 0!==s);else if(void 0!==o.toArray)do{o=s[r],void 0!==o&&(t.push(s.time),o.toArray(n,n.length)),s=e[i++]}while(void 0!==s);else do{o=s[r],void 0!==o&&(t.push(s.time),n.push(o)),s=e[i++]}while(void 0!==s)}const Cd={convertArray:wd,isTypedArray:Ed,getKeyframeOrder:Td,sortedArray:Sd,flattenJSON:Md,subclip:function(e,t,n,r,i=30){const s=e.clone();s.name=t;const o=[];for(let e=0;e<s.tracks.length;++e){const t=s.tracks[e],a=t.getValueSize(),c=[],l=[];for(let e=0;e<t.times.length;++e){const s=t.times[e]*i;if(!(s<n||s>=r)){c.push(t.times[e]);for(let n=0;n<a;++n)l.push(t.values[e*a+n])}}0!==c.length&&(t.times=wd(c,t.times.constructor),t.values=wd(l,t.values.constructor),o.push(t))}s.tracks=o;let a=1/0;for(let e=0;e<s.tracks.length;++e)a>s.tracks[e].times[0]&&(a=s.tracks[e].times[0]);for(let e=0;e<s.tracks.length;++e)s.tracks[e].shift(-1*a);return s.resetDuration(),s},makeClipAdditive:function(e,t=0,n=e,r=30){r<=0&&(r=30);const i=n.tracks.length,s=t/r;for(let t=0;t<i;++t){const r=n.tracks[t],i=r.ValueTypeName;if("bool"===i||"string"===i)continue;const o=e.tracks.find((function(e){return e.name===r.name&&e.ValueTypeName===i}));if(void 0===o)continue;let a=0;const c=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(a=c/3);let l=0;const u=o.getValueSize();o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(l=u/3);const h=r.times.length-1;let d;if(s<=r.times[0]){const e=a,t=c-a;d=r.values.slice(e,t)}else if(s>=r.times[h]){const e=h*c+a,t=e+c-a;d=r.values.slice(e,t)}else{const e=r.createInterpolant(),t=a,n=c-a;e.evaluate(s),d=e.resultBuffer.slice(t,n)}if("quaternion"===i){(new Br).fromArray(d).normalize().conjugate().toArray(d)}const p=o.times.length;for(let e=0;e<p;++e){const t=e*u+l;if("quaternion"===i)Br.multiplyQuaternionsFlat(o.values,t,d,0,o.values,t);else{const e=u-2*l;for(let n=0;n<e;++n)o.values[t+n]-=d[n]}}}return e.blendMode=Gt,e}};class Id{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],i=t[n-1];e:{t:{let s;n:{r:if(!(e<r)){for(let s=n+2;;){if(void 0===r){if(e<i)break r;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===s)break;if(i=r,r=t[++n],e<r)break t}s=t.length;break n}if(e>=i)break e;{const o=t[1];e<o&&(n=2,i=o);for(let s=n-2;;){if(void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(n===s)break;if(r=i,i=t[--n-1],e>=i)break t}s=n,n=0}}for(;n<s;){const r=n+s>>>1;e<t[r]?s=r:n=r+1}if(r=t[n],i=t[n-1],void 0===i)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,i,r)}return this.interpolate_(n,i,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r;for(let e=0;e!==r;++e)t[e]=n[i+e];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Rd extends Id{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Ft,endingEnd:Ft}}intervalChanged_(e,t,n){const r=this.parameterPositions;let i=e-2,s=e+1,o=r[i],a=r[s];if(void 0===o)switch(this.getSettings_().endingStart){case Ut:i=e,o=2*t-n;break;case kt:i=r.length-2,o=t+r[i]-r[i+1];break;default:i=e,o=n}if(void 0===a)switch(this.getSettings_().endingEnd){case Ut:s=e,a=2*n-t;break;case kt:s=1,a=n+r[1]-r[0];break;default:s=e-1,a=t}const c=.5*(n-t),l=this.valueSize;this._weightPrev=c/(t-o),this._weightNext=c/(a-n),this._offsetPrev=i*l,this._offsetNext=s*l}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,c=a-o,l=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-t)/(r-t),f=p*p,m=f*p,g=-h*m+2*h*f-h*p,A=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,_=d*m-d*f;for(let e=0;e!==o;++e)i[e]=g*s[l+e]+A*s[c+e]+y*s[a+e]+_*s[u+e];return i}}class Bd extends Id{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=e*o,c=a-o,l=(n-t)/(r-t),u=1-l;for(let e=0;e!==o;++e)i[e]=s[c+e]*u+s[a+e]*l;return i}}class Pd extends Id{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Dd{constructor(e,t,n,r){if(void 0===e)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===t||0===t.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=wd(t,this.TimeBufferType),this.values=wd(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:wd(e.times,Array),values:wd(e.values,Array)};const t=e.getInterpolation();t!==e.DefaultInterpolation&&(n.interpolation=t)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new Pd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Bd(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Rd(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Ot:t=this.InterpolantFactoryMethodDiscrete;break;case Lt:t=this.InterpolantFactoryMethodLinear;break;case Nt:t=this.InterpolantFactoryMethodSmooth}if(void 0===t){const t="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(e===this.DefaultInterpolation)throw new Error(t);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",t),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Ot;case this.InterpolantFactoryMethodLinear:return Lt;case this.InterpolantFactoryMethodSmooth:return Nt}}getValueSize(){return this.values.length/this.times.length}shift(e){if(0!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(1!==e){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let i=0,s=r-1;for(;i!==r&&n[i]<e;)++i;for(;-1!==s&&n[s]>t;)--s;if(++s,0!==i||s!==r){i>=s&&(s=Math.max(s,1),i=s-1);const e=this.getValueSize();this.times=n.slice(i,s),this.values=this.values.slice(i*e,s*e)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,i=n.length;0===i&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let s=null;for(let t=0;t!==i;t++){const r=n[t];if("number"==typeof r&&isNaN(r)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,t,r),e=!1;break}if(null!==s&&s>r){console.error("THREE.KeyframeTrack: Out of order keys.",this,t,r,s),e=!1;break}s=r}if(void 0!==r&&Ed(r))for(let t=0,n=r.length;t!==n;++t){const n=r[t];if(isNaN(n)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,t,n),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===Nt,i=e.length-1;let s=1;for(let o=1;o<i;++o){let i=!1;const a=e[o];if(a!==e[o+1]&&(1!==o||a!==e[0]))if(r)i=!0;else{const e=o*n,r=e-n,s=e+n;for(let o=0;o!==n;++o){const n=t[e+o];if(n!==t[r+o]||n!==t[s+o]){i=!0;break}}}if(i){if(o!==s){e[s]=e[o];const r=o*n,i=s*n;for(let e=0;e!==n;++e)t[i+e]=t[r+e]}++s}}if(i>0){e[s]=e[i];for(let e=i*n,r=s*n,o=0;o!==n;++o)t[r+o]=t[e+o];++s}return s!==e.length?(this.times=e.slice(0,s),this.values=t.slice(0,s*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=new(0,this.constructor)(this.name,e,t);return n.createInterpolant=this.createInterpolant,n}}Dd.prototype.TimeBufferType=Float32Array,Dd.prototype.ValueBufferType=Float32Array,Dd.prototype.DefaultInterpolation=Lt;class Od extends Dd{constructor(e,t,n){super(e,t,n)}}Od.prototype.ValueTypeName="bool",Od.prototype.ValueBufferType=Array,Od.prototype.DefaultInterpolation=Ot,Od.prototype.InterpolantFactoryMethodLinear=void 0,Od.prototype.InterpolantFactoryMethodSmooth=void 0;class Ld extends Dd{}Ld.prototype.ValueTypeName="color";class Nd extends Dd{}Nd.prototype.ValueTypeName="number";class Fd extends Id{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(n-t)/(r-t);let c=e*o;for(let e=c+o;c!==e;c+=4)Br.slerpFlat(i,0,s,c-o,s,c,a);return i}}class Ud extends Dd{InterpolantFactoryMethodLinear(e){return new Fd(this.times,this.values,this.getValueSize(),e)}}Ud.prototype.ValueTypeName="quaternion",Ud.prototype.InterpolantFactoryMethodSmooth=void 0;class kd extends Dd{constructor(e,t,n){super(e,t,n)}}kd.prototype.ValueTypeName="string",kd.prototype.ValueBufferType=Array,kd.prototype.DefaultInterpolation=Ot,kd.prototype.InterpolantFactoryMethodLinear=void 0,kd.prototype.InterpolantFactoryMethodSmooth=void 0;class zd extends Dd{}zd.prototype.ValueTypeName="vector";class Gd{constructor(e="",t=-1,n=[],r=zt){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=qn(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let e=0,i=n.length;e!==i;++e)t.push(jd(n[e]).scale(r));const i=new this(e.name,e.duration,t,e.blendMode);return i.uuid=e.uuid,i}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let e=0,r=n.length;e!==r;++e)t.push(Dd.toJSON(n[e]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const i=t.length,s=[];for(let e=0;e<i;e++){let o=[],a=[];o.push((e+i-1)%i,e,(e+1)%i),a.push(0,1,0);const c=Td(o);o=Sd(o,1,c),a=Sd(a,1,c),r||0!==o[0]||(o.push(i),a.push(a[0])),s.push(new Nd(".morphTargetInfluences["+t[e].name+"]",o,a).scale(1/n))}return new this(e,-1,s)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const t=e;n=t.geometry&&t.geometry.animations||t.animations}for(let e=0;e<n.length;e++)if(n[e].name===t)return n[e];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},i=/^([\w-]*?)([\d]+)$/;for(let t=0,n=e.length;t<n;t++){const n=e[t],s=n.name.match(i);if(s&&s.length>1){const e=s[1];let t=r[e];t||(r[e]=t=[]),t.push(n)}}const s=[];for(const e in r)s.push(this.CreateFromMorphTargetSequence(e,r[e],t,n));return s}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(e,t,n,r,i){if(0!==n.length){const s=[],o=[];Md(n,s,o,r),0!==s.length&&i.push(new e(t,s,o))}},r=[],i=e.name||"default",s=e.fps||30,o=e.blendMode;let a=e.length||-1;const c=e.hierarchy||[];for(let e=0;e<c.length;e++){const i=c[e].keys;if(i&&0!==i.length)if(i[0].morphTargets){const e={};let t;for(t=0;t<i.length;t++)if(i[t].morphTargets)for(let n=0;n<i[t].morphTargets.length;n++)e[i[t].morphTargets[n]]=-1;for(const n in e){const e=[],s=[];for(let r=0;r!==i[t].morphTargets.length;++r){const r=i[t];e.push(r.time),s.push(r.morphTarget===n?1:0)}r.push(new Nd(".morphTargetInfluence["+n+"]",e,s))}a=e.length*s}else{const s=".bones["+t[e].name+"]";n(zd,s+".position",i,"pos",r),n(Ud,s+".quaternion",i,"rot",r),n(zd,s+".scale",i,"scl",r)}}if(0===r.length)return null;return new this(i,a,r,o)}resetDuration(){let e=0;for(let t=0,n=this.tracks.length;t!==n;++t){const n=this.tracks[t];e=Math.max(e,n.times[n.times.length-1])}return this.duration=e,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function jd(e){if(void 0===e.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const t=function(e){switch(e.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Nd;case"vector":case"vector2":case"vector3":case"vector4":return zd;case"color":return Ld;case"quaternion":return Ud;case"bool":case"boolean":return Od;case"string":return kd}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+e)}(e.type);if(void 0===e.times){const t=[],n=[];Md(e.keys,t,n,"value"),e.times=t,e.values=n}return void 0!==t.parse?t.parse(e):new t(e.name,e.times,e.values,e.interpolation)}const Vd={enabled:!1,files:{},add:function(e,t){!1!==this.enabled&&(this.files[e]=t)},get:function(e){if(!1!==this.enabled)return this.files[e]},remove:function(e){delete this.files[e]},clear:function(){this.files={}}};class Qd{constructor(e,t,n){const r=this;let i,s=!1,o=0,a=0;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.itemStart=function(e){a++,!1===s&&void 0!==r.onStart&&r.onStart(e,o,a),s=!0},this.itemEnd=function(e){o++,void 0!==r.onProgress&&r.onProgress(e,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(e){void 0!==r.onError&&r.onError(e)},this.resolveURL=function(e){return i?i(e):e},this.setURLModifier=function(e){return i=e,this},this.addHandler=function(e,t){return c.push(e,t),this},this.removeHandler=function(e){const t=c.indexOf(e);return-1!==t&&c.splice(t,2),this},this.getHandler=function(e){for(let t=0,n=c.length;t<n;t+=2){const n=c[t],r=c[t+1];if(n.global&&(n.lastIndex=0),n.test(e))return r}return null}}}const Hd=new Qd;class Wd{constructor(e){this.manager=void 0!==e?e:Hd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise((function(r,i){n.load(e,r,t,i)}))}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Wd.DEFAULT_MATERIAL_NAME="__DEFAULT";const qd={};class Xd extends Error{constructor(e,t){super(e),this.response=t}}class Kd extends Wd{constructor(e){super(e)}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=Vd.get(e);if(void 0!==i)return this.manager.itemStart(e),setTimeout((()=>{t&&t(i),this.manager.itemEnd(e)}),0),i;if(void 0!==qd[e])return void qd[e].push({onLoad:t,onProgress:n,onError:r});qd[e]=[],qd[e].push({onLoad:t,onProgress:n,onError:r});const s=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),o=this.mimeType,a=this.responseType;fetch(s).then((t=>{if(200===t.status||0===t.status){if(0===t.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),"undefined"==typeof ReadableStream||void 0===t.body||void 0===t.body.getReader)return t;const n=qd[e],r=t.body.getReader(),i=t.headers.get("X-File-Size")||t.headers.get("Content-Length"),s=i?parseInt(i):0,o=0!==s;let a=0;const c=new ReadableStream({start(e){!function t(){r.read().then((({done:r,value:i})=>{if(r)e.close();else{a+=i.byteLength;const r=new ProgressEvent("progress",{lengthComputable:o,loaded:a,total:s});for(let e=0,t=n.length;e<t;e++){const t=n[e];t.onProgress&&t.onProgress(r)}e.enqueue(i),t()}}),(t=>{e.error(t)}))}()}});return new Response(c)}throw new Xd(`fetch for "${t.url}" responded with ${t.status}: ${t.statusText}`,t)})).then((e=>{switch(a){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"document":return e.text().then((e=>(new DOMParser).parseFromString(e,o)));case"json":return e.json();default:if(void 0===o)return e.text();{const t=/charset="?([^;"\s]*)"?/i.exec(o),n=t&&t[1]?t[1].toLowerCase():void 0,r=new TextDecoder(n);return e.arrayBuffer().then((e=>r.decode(e)))}}})).then((t=>{Vd.add(e,t);const n=qd[e];delete qd[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onLoad&&r.onLoad(t)}})).catch((t=>{const n=qd[e];if(void 0===n)throw this.manager.itemError(e),t;delete qd[e];for(let e=0,r=n.length;e<r;e++){const r=n[e];r.onError&&r.onError(t)}this.manager.itemError(e)})).finally((()=>{this.manager.itemEnd(e)})),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class Yd extends Wd{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Kd(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=Gd.parse(e[n]);t.push(r)}return t}}class Jd extends Wd{constructor(e){super(e)}load(e,t,n,r){const i=this,s=[],o=new zu,a=new Kd(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(i.withCredentials);let c=0;function l(l){a.load(e[l],(function(e){const n=i.parse(e,!0);s[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(o.minFilter=Ee),o.image=s,o.format=n.format,o.needsUpdate=!0,t&&t(o))}),n,r)}if(Array.isArray(e))for(let t=0,n=e.length;t<n;++t)l(t);else a.load(e,(function(e){const n=i.parse(e,!0);if(n.isCubemap){const e=n.mipmaps.length/n.mipmapCount;for(let t=0;t<e;t++){s[t]={mipmaps:[]};for(let e=0;e<n.mipmapCount;e++)s[t].mipmaps.push(n.mipmaps[t*n.mipmapCount+e]),s[t].format=n.format,s[t].width=n.width,s[t].height=n.height}o.image=s}else o.image.width=n.width,o.image.height=n.height,o.mipmaps=n.mipmaps;1===n.mipmapCount&&(o.minFilter=Ee),o.format=n.format,o.needsUpdate=!0,t&&t(o)}),n,r);return o}}class $d extends Wd{constructor(e){super(e)}load(e,t,n,r){void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Vd.get(e);if(void 0!==s)return i.manager.itemStart(e),setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s;const o=or("img");function a(){l(),Vd.add(e,this),t&&t(this),i.manager.itemEnd(e)}function c(t){l(),r&&r(t),i.manager.itemError(e),i.manager.itemEnd(e)}function l(){o.removeEventListener("load",a,!1),o.removeEventListener("error",c,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",c,!1),"data:"!==e.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),i.manager.itemStart(e),o.src=e,o}}class Zd extends Wd{constructor(e){super(e)}load(e,t,n,r){const i=new so;i.colorSpace=Yt;const s=new $d(this.manager);s.setCrossOrigin(this.crossOrigin),s.setPath(this.path);let o=0;function a(n){s.load(e[n],(function(e){i.images[n]=e,o++,6===o&&(i.needsUpdate=!0,t&&t(i))}),void 0,r)}for(let t=0;t<e.length;++t)a(t);return i}}class ep extends Wd{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Ul,o=new Kd(this.manager);return o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setPath(this.path),o.setWithCredentials(i.withCredentials),o.load(e,(function(e){let n;try{n=i.parse(e)}catch(e){if(void 0===r)return void console.error(e);r(e)}void 0!==n.image?s.image=n.image:void 0!==n.data&&(s.image.width=n.width,s.image.height=n.height,s.image.data=n.data),s.wrapS=void 0!==n.wrapS?n.wrapS:Ae,s.wrapT=void 0!==n.wrapT?n.wrapT:Ae,s.magFilter=void 0!==n.magFilter?n.magFilter:Ee,s.minFilter=void 0!==n.minFilter?n.minFilter:Ee,s.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.colorSpace&&(s.colorSpace=n.colorSpace),void 0!==n.flipY&&(s.flipY=n.flipY),void 0!==n.format&&(s.format=n.format),void 0!==n.type&&(s.type=n.type),void 0!==n.mipmaps&&(s.mipmaps=n.mipmaps,s.minFilter=Me),1===n.mipmapCount&&(s.minFilter=Ee),void 0!==n.generateMipmaps&&(s.generateMipmaps=n.generateMipmaps),s.needsUpdate=!0,t&&t(s,n)}),n,r),s}}class tp extends Wd{constructor(e){super(e)}load(e,t,n,r){const i=new wr,s=new $d(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(e,(function(e){i.image=e,i.needsUpdate=!0,void 0!==t&&t(i)}),n,r),i}}class np extends Li{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Ji(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,void 0!==this.groundColor&&(t.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(t.object.distance=this.distance),void 0!==this.angle&&(t.object.angle=this.angle),void 0!==this.decay&&(t.object.decay=this.decay),void 0!==this.penumbra&&(t.object.penumbra=this.penumbra),void 0!==this.shadow&&(t.object.shadow=this.shadow.toJSON()),t}}class rp extends np{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Ji(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ip=new ci,sp=new Pr,op=new Pr;class ap{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new er(512,512),this.map=null,this.mapPass=null,this.matrix=new ci,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new fo,this._frameExtents=new er(1,1),this._viewportCount=1,this._viewports=[new Er(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;sp.setFromMatrixPosition(e.matrixWorld),t.position.copy(sp),op.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(op),t.updateMatrixWorld(),ip.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ip),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(ip)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return(new this.constructor).copy(this)}toJSON(){const e={};return 0!==this.bias&&(e.bias=this.bias),0!==this.normalBias&&(e.normalBias=this.normalBias),1!==this.radius&&(e.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class cp extends ap{constructor(){super(new no(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,n=2*Wn*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,i=e.distance||t.far;n===t.fov&&r===t.aspect&&i===t.far||(t.fov=n,t.aspect=r,t.far=i,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class lp extends np{constructor(e,t,n=0,r=Math.PI/3,i=0,s=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.target=new Li,this.distance=n,this.angle=r,this.penumbra=i,this.decay=s,this.map=null,this.shadow=new cp}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const up=new ci,hp=new Pr,dp=new Pr;class pp extends ap{constructor(){super(new no(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new er(4,2),this._viewportCount=6,this._viewports=[new Er(2,1,1,1),new Er(0,1,1,1),new Er(3,1,1,1),new Er(1,1,1,1),new Er(3,0,1,1),new Er(1,0,1,1)],this._cubeDirections=[new Pr(1,0,0),new Pr(-1,0,0),new Pr(0,0,1),new Pr(0,0,-1),new Pr(0,1,0),new Pr(0,-1,0)],this._cubeUps=[new Pr(0,1,0),new Pr(0,1,0),new Pr(0,1,0),new Pr(0,1,0),new Pr(0,0,1),new Pr(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,i=e.distance||n.far;i!==n.far&&(n.far=i,n.updateProjectionMatrix()),hp.setFromMatrixPosition(e.matrixWorld),n.position.copy(hp),dp.copy(n.position),dp.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(dp),n.updateMatrixWorld(),r.makeTranslation(-hp.x,-hp.y,-hp.z),up.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(up)}}class fp extends np{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new pp}get power(){return 4*this.intensity*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mp extends ap{constructor(){super(new Ro(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class gp extends np{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Li.DEFAULT_UP),this.updateMatrix(),this.target=new Li,this.shadow=new mp}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Ap extends np{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class yp extends np{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class _p{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Pr)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.282095),t.addScaledVector(s[1],.488603*r),t.addScaledVector(s[2],.488603*i),t.addScaledVector(s[3],.488603*n),t.addScaledVector(s[4],n*r*1.092548),t.addScaledVector(s[5],r*i*1.092548),t.addScaledVector(s[6],.315392*(3*i*i-1)),t.addScaledVector(s[7],n*i*1.092548),t.addScaledVector(s[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,i=e.z,s=this.coefficients;return t.copy(s[0]).multiplyScalar(.886227),t.addScaledVector(s[1],1.023328*r),t.addScaledVector(s[2],1.023328*i),t.addScaledVector(s[3],1.023328*n),t.addScaledVector(s[4],.858086*n*r),t.addScaledVector(s[5],.858086*r*i),t.addScaledVector(s[6],.743125*i*i-.247708),t.addScaledVector(s[7],.858086*n*i),t.addScaledVector(s[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+3*r);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+3*r);return e}static getBasisAt(e,t){const n=e.x,r=e.y,i=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*i,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*i,t[6]=.315392*(3*i*i-1),t[7]=1.092548*n*i,t[8]=.546274*(n*n-r*r)}}class vp extends np{constructor(e=new _p,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class bp extends Wd{constructor(e){super(e),this.textures={}}load(e,t,n,r){const i=this,s=new Kd(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t=this.textures;function n(e){return void 0===t[e]&&console.warn("THREE.MaterialLoader: Undefined texture",e),t[e]}const r=bp.createMaterialFromType(e.type);if(void 0!==e.uuid&&(r.uuid=e.uuid),void 0!==e.name&&(r.name=e.name),void 0!==e.color&&void 0!==r.color&&r.color.setHex(e.color),void 0!==e.roughness&&(r.roughness=e.roughness),void 0!==e.metalness&&(r.metalness=e.metalness),void 0!==e.sheen&&(r.sheen=e.sheen),void 0!==e.sheenColor&&(r.sheenColor=(new Ji).setHex(e.sheenColor)),void 0!==e.sheenRoughness&&(r.sheenRoughness=e.sheenRoughness),void 0!==e.emissive&&void 0!==r.emissive&&r.emissive.setHex(e.emissive),void 0!==e.specular&&void 0!==r.specular&&r.specular.setHex(e.specular),void 0!==e.specularIntensity&&(r.specularIntensity=e.specularIntensity),void 0!==e.specularColor&&void 0!==r.specularColor&&r.specularColor.setHex(e.specularColor),void 0!==e.shininess&&(r.shininess=e.shininess),void 0!==e.clearcoat&&(r.clearcoat=e.clearcoat),void 0!==e.clearcoatRoughness&&(r.clearcoatRoughness=e.clearcoatRoughness),void 0!==e.dispersion&&(r.dispersion=e.dispersion),void 0!==e.iridescence&&(r.iridescence=e.iridescence),void 0!==e.iridescenceIOR&&(r.iridescenceIOR=e.iridescenceIOR),void 0!==e.iridescenceThicknessRange&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),void 0!==e.transmission&&(r.transmission=e.transmission),void 0!==e.thickness&&(r.thickness=e.thickness),void 0!==e.attenuationDistance&&(r.attenuationDistance=e.attenuationDistance),void 0!==e.attenuationColor&&void 0!==r.attenuationColor&&r.attenuationColor.setHex(e.attenuationColor),void 0!==e.anisotropy&&(r.anisotropy=e.anisotropy),void 0!==e.anisotropyRotation&&(r.anisotropyRotation=e.anisotropyRotation),void 0!==e.fog&&(r.fog=e.fog),void 0!==e.flatShading&&(r.flatShading=e.flatShading),void 0!==e.blending&&(r.blending=e.blending),void 0!==e.combine&&(r.combine=e.combine),void 0!==e.side&&(r.side=e.side),void 0!==e.shadowSide&&(r.shadowSide=e.shadowSide),void 0!==e.opacity&&(r.opacity=e.opacity),void 0!==e.transparent&&(r.transparent=e.transparent),void 0!==e.alphaTest&&(r.alphaTest=e.alphaTest),void 0!==e.alphaHash&&(r.alphaHash=e.alphaHash),void 0!==e.depthFunc&&(r.depthFunc=e.depthFunc),void 0!==e.depthTest&&(r.depthTest=e.depthTest),void 0!==e.depthWrite&&(r.depthWrite=e.depthWrite),void 0!==e.colorWrite&&(r.colorWrite=e.colorWrite),void 0!==e.blendSrc&&(r.blendSrc=e.blendSrc),void 0!==e.blendDst&&(r.blendDst=e.blendDst),void 0!==e.blendEquation&&(r.blendEquation=e.blendEquation),void 0!==e.blendSrcAlpha&&(r.blendSrcAlpha=e.blendSrcAlpha),void 0!==e.blendDstAlpha&&(r.blendDstAlpha=e.blendDstAlpha),void 0!==e.blendEquationAlpha&&(r.blendEquationAlpha=e.blendEquationAlpha),void 0!==e.blendColor&&void 0!==r.blendColor&&r.blendColor.setHex(e.blendColor),void 0!==e.blendAlpha&&(r.blendAlpha=e.blendAlpha),void 0!==e.stencilWriteMask&&(r.stencilWriteMask=e.stencilWriteMask),void 0!==e.stencilFunc&&(r.stencilFunc=e.stencilFunc),void 0!==e.stencilRef&&(r.stencilRef=e.stencilRef),void 0!==e.stencilFuncMask&&(r.stencilFuncMask=e.stencilFuncMask),void 0!==e.stencilFail&&(r.stencilFail=e.stencilFail),void 0!==e.stencilZFail&&(r.stencilZFail=e.stencilZFail),void 0!==e.stencilZPass&&(r.stencilZPass=e.stencilZPass),void 0!==e.stencilWrite&&(r.stencilWrite=e.stencilWrite),void 0!==e.wireframe&&(r.wireframe=e.wireframe),void 0!==e.wireframeLinewidth&&(r.wireframeLinewidth=e.wireframeLinewidth),void 0!==e.wireframeLinecap&&(r.wireframeLinecap=e.wireframeLinecap),void 0!==e.wireframeLinejoin&&(r.wireframeLinejoin=e.wireframeLinejoin),void 0!==e.rotation&&(r.rotation=e.rotation),void 0!==e.linewidth&&(r.linewidth=e.linewidth),void 0!==e.dashSize&&(r.dashSize=e.dashSize),void 0!==e.gapSize&&(r.gapSize=e.gapSize),void 0!==e.scale&&(r.scale=e.scale),void 0!==e.polygonOffset&&(r.polygonOffset=e.polygonOffset),void 0!==e.polygonOffsetFactor&&(r.polygonOffsetFactor=e.polygonOffsetFactor),void 0!==e.polygonOffsetUnits&&(r.polygonOffsetUnits=e.polygonOffsetUnits),void 0!==e.dithering&&(r.dithering=e.dithering),void 0!==e.alphaToCoverage&&(r.alphaToCoverage=e.alphaToCoverage),void 0!==e.premultipliedAlpha&&(r.premultipliedAlpha=e.premultipliedAlpha),void 0!==e.forceSinglePass&&(r.forceSinglePass=e.forceSinglePass),void 0!==e.visible&&(r.visible=e.visible),void 0!==e.toneMapped&&(r.toneMapped=e.toneMapped),void 0!==e.userData&&(r.userData=e.userData),void 0!==e.vertexColors&&("number"==typeof e.vertexColors?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),void 0!==e.uniforms)for(const t in e.uniforms){const i=e.uniforms[t];switch(r.uniforms[t]={},i.type){case"t":r.uniforms[t].value=n(i.value);break;case"c":r.uniforms[t].value=(new Ji).setHex(i.value);break;case"v2":r.uniforms[t].value=(new er).fromArray(i.value);break;case"v3":r.uniforms[t].value=(new Pr).fromArray(i.value);break;case"v4":r.uniforms[t].value=(new Er).fromArray(i.value);break;case"m3":r.uniforms[t].value=(new tr).fromArray(i.value);break;case"m4":r.uniforms[t].value=(new ci).fromArray(i.value);break;default:r.uniforms[t].value=i.value}}if(void 0!==e.defines&&(r.defines=e.defines),void 0!==e.vertexShader&&(r.vertexShader=e.vertexShader),void 0!==e.fragmentShader&&(r.fragmentShader=e.fragmentShader),void 0!==e.glslVersion&&(r.glslVersion=e.glslVersion),void 0!==e.extensions)for(const t in e.extensions)r.extensions[t]=e.extensions[t];if(void 0!==e.lights&&(r.lights=e.lights),void 0!==e.clipping&&(r.clipping=e.clipping),void 0!==e.size&&(r.size=e.size),void 0!==e.sizeAttenuation&&(r.sizeAttenuation=e.sizeAttenuation),void 0!==e.map&&(r.map=n(e.map)),void 0!==e.matcap&&(r.matcap=n(e.matcap)),void 0!==e.alphaMap&&(r.alphaMap=n(e.alphaMap)),void 0!==e.bumpMap&&(r.bumpMap=n(e.bumpMap)),void 0!==e.bumpScale&&(r.bumpScale=e.bumpScale),void 0!==e.normalMap&&(r.normalMap=n(e.normalMap)),void 0!==e.normalMapType&&(r.normalMapType=e.normalMapType),void 0!==e.normalScale){let t=e.normalScale;!1===Array.isArray(t)&&(t=[t,t]),r.normalScale=(new er).fromArray(t)}return void 0!==e.displacementMap&&(r.displacementMap=n(e.displacementMap)),void 0!==e.displacementScale&&(r.displacementScale=e.displacementScale),void 0!==e.displacementBias&&(r.displacementBias=e.displacementBias),void 0!==e.roughnessMap&&(r.roughnessMap=n(e.roughnessMap)),void 0!==e.metalnessMap&&(r.metalnessMap=n(e.metalnessMap)),void 0!==e.emissiveMap&&(r.emissiveMap=n(e.emissiveMap)),void 0!==e.emissiveIntensity&&(r.emissiveIntensity=e.emissiveIntensity),void 0!==e.specularMap&&(r.specularMap=n(e.specularMap)),void 0!==e.specularIntensityMap&&(r.specularIntensityMap=n(e.specularIntensityMap)),void 0!==e.specularColorMap&&(r.specularColorMap=n(e.specularColorMap)),void 0!==e.envMap&&(r.envMap=n(e.envMap)),void 0!==e.envMapRotation&&r.envMapRotation.fromArray(e.envMapRotation),void 0!==e.envMapIntensity&&(r.envMapIntensity=e.envMapIntensity),void 0!==e.reflectivity&&(r.reflectivity=e.reflectivity),void 0!==e.refractionRatio&&(r.refractionRatio=e.refractionRatio),void 0!==e.lightMap&&(r.lightMap=n(e.lightMap)),void 0!==e.lightMapIntensity&&(r.lightMapIntensity=e.lightMapIntensity),void 0!==e.aoMap&&(r.aoMap=n(e.aoMap)),void 0!==e.aoMapIntensity&&(r.aoMapIntensity=e.aoMapIntensity),void 0!==e.gradientMap&&(r.gradientMap=n(e.gradientMap)),void 0!==e.clearcoatMap&&(r.clearcoatMap=n(e.clearcoatMap)),void 0!==e.clearcoatRoughnessMap&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),void 0!==e.clearcoatNormalMap&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),void 0!==e.clearcoatNormalScale&&(r.clearcoatNormalScale=(new er).fromArray(e.clearcoatNormalScale)),void 0!==e.iridescenceMap&&(r.iridescenceMap=n(e.iridescenceMap)),void 0!==e.iridescenceThicknessMap&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),void 0!==e.transmissionMap&&(r.transmissionMap=n(e.transmissionMap)),void 0!==e.thicknessMap&&(r.thicknessMap=n(e.thicknessMap)),void 0!==e.anisotropyMap&&(r.anisotropyMap=n(e.anisotropyMap)),void 0!==e.sheenColorMap&&(r.sheenColorMap=n(e.sheenColorMap)),void 0!==e.sheenRoughnessMap&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){return new{ShadowMaterial:pd,SpriteMaterial:cl,RawShaderMaterial:fd,ShaderMaterial:Js,PointsMaterial:Bu,MeshPhysicalMaterial:gd,MeshStandardMaterial:md,MeshPhongMaterial:Ad,MeshToonMaterial:yd,MeshNormalMaterial:_d,MeshLambertMaterial:vd,MeshDepthMaterial:kc,MeshDistanceMaterial:zc,MeshBasicMaterial:ts,MeshMatcapMaterial:bd,LineDashedMaterial:xd,LineBasicMaterial:Au,Material:es}[e]}}class xp{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),"undefined"!=typeof TextDecoder)return(new TextDecoder).decode(e);let t="";for(let n=0,r=e.length;n<r;n++)t+=String.fromCharCode(e[n]);try{return decodeURIComponent(escape(t))}catch(e){return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return-1===t?"./":e.slice(0,t+1)}static resolveURL(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class wp extends Ss{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class Ep extends Wd{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Kd(i.manager);s.setPath(i.path),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,(function(n){try{t(i.parse(JSON.parse(n)))}catch(t){r?r(t):console.error(t),i.manager.itemError(e)}}),n,r)}parse(e){const t={},n={};function r(e,r){if(void 0!==t[r])return t[r];const i=e.interleavedBuffers[r],s=function(e,t){if(void 0!==n[t])return n[t];const r=e.arrayBuffers,i=r[t],s=new Uint32Array(i).buffer;return n[t]=s,s}(e,i.buffer),o=sr(i.type,s),a=new sl(o,i.stride);return a.uuid=i.uuid,t[r]=a,a}const i=e.isInstancedBufferGeometry?new wp:new Ss,s=e.data.index;if(void 0!==s){const e=sr(s.type,s.array);i.setIndex(new ls(e,1))}const o=e.data.attributes;for(const t in o){const n=o[t];let s;if(n.isInterleavedBufferAttribute){const t=r(e.data,n.data);s=new al(t,n.itemSize,n.offset,n.normalized)}else{const e=sr(n.type,n.array);s=new(n.isInstancedBufferAttribute?jl:ls)(e,n.itemSize,n.normalized)}void 0!==n.name&&(s.name=n.name),void 0!==n.usage&&s.setUsage(n.usage),i.setAttribute(t,s)}const a=e.data.morphAttributes;if(a)for(const t in a){const n=a[t],s=[];for(let t=0,i=n.length;t<i;t++){const i=n[t];let o;if(i.isInterleavedBufferAttribute){const t=r(e.data,i.data);o=new al(t,i.itemSize,i.offset,i.normalized)}else{const e=sr(i.type,i.array);o=new ls(e,i.itemSize,i.normalized)}void 0!==i.name&&(o.name=i.name),s.push(o)}i.morphAttributes[t]=s}e.data.morphTargetsRelative&&(i.morphTargetsRelative=!0);const c=e.data.groups||e.data.drawcalls||e.data.offsets;if(void 0!==c)for(let e=0,t=c.length;e!==t;++e){const t=c[e];i.addGroup(t.start,t.count,t.materialIndex)}const l=e.data.boundingSphere;if(void 0!==l){const e=new Pr;void 0!==l.center&&e.fromArray(l.center),i.boundingSphere=new Zr(e,l.radius)}return e.name&&(i.name=e.name),e.userData&&(i.userData=e.userData),i}}class Tp extends Wd{constructor(e){super(e)}load(e,t,n,r){const i=this,s=""===this.path?xp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||s;const o=new Kd(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){let s=null;try{s=JSON.parse(n)}catch(t){return void 0!==r&&r(t),void console.error("THREE:ObjectLoader: Can't parse "+e+".",t.message)}const o=s.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())return void 0!==r&&r(new Error("THREE.ObjectLoader: Can't load "+e)),void console.error("THREE.ObjectLoader: Can't load "+e);i.parse(s,t)}),n,r)}async loadAsync(e,t){const n=""===this.path?xp.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||n;const r=new Kd(this.manager);r.setPath(this.path),r.setRequestHeader(this.requestHeader),r.setWithCredentials(this.withCredentials);const i=await r.loadAsync(e,t),s=JSON.parse(i),o=s.metadata;if(void 0===o||void 0===o.type||"geometry"===o.type.toLowerCase())throw new Error("THREE.ObjectLoader: Can't load "+e);return await this.parseAsync(s)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),i=this.parseGeometries(e.geometries,r),s=this.parseImages(e.images,(function(){void 0!==t&&t(c)})),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),c=this.parseObject(e.object,i,a,o,n),l=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,l),void 0!==t){let e=!1;for(const t in s)if(s[t].data instanceof HTMLImageElement){e=!0;break}!1===e&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),i=await this.parseImagesAsync(e.images),s=this.parseTextures(e.textures,i),o=this.parseMaterials(e.materials,s),a=this.parseObject(e.object,r,o,s,t),c=this.parseSkeletons(e.skeletons,a);return this.bindSkeletons(a,c),a}parseShapes(e){const t={};if(void 0!==e)for(let n=0,r=e.length;n<r;n++){const r=(new Eh).fromJSON(e[n]);t[r.uuid]=r}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse((function(e){e.isBone&&(r[e.uuid]=e)})),void 0!==e)for(let t=0,i=e.length;t<i;t++){const i=(new Gl).fromJSON(e[t],r);n[i.uuid]=i}return n}parseGeometries(e,t){const n={};if(void 0!==e){const r=new Ep;for(let i=0,s=e.length;i<s;i++){let s;const o=e[i];switch(o.type){case"BufferGeometry":case"InstancedBufferGeometry":s=r.parse(o);break;default:o.type in dd?s=dd[o.type].fromJSON(o,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${o.type}"`)}s.uuid=o.uuid,void 0!==o.name&&(s.name=o.name),void 0!==o.userData&&(s.userData=o.userData),n[o.uuid]=s}}return n}parseMaterials(e,t){const n={},r={};if(void 0!==e){const i=new bp;i.setTextures(t);for(let t=0,s=e.length;t<s;t++){const s=e[t];void 0===n[s.uuid]&&(n[s.uuid]=i.parse(s)),r[s.uuid]=n[s.uuid]}}return r}parseAnimations(e){const t={};if(void 0!==e)for(let n=0;n<e.length;n++){const r=e[n],i=Gd.parse(r);t[i.uuid]=i}return t}parseImages(e,t){const n=this,r={};let i;function s(e){if("string"==typeof e){const t=e;return function(e){return n.manager.itemStart(e),i.load(e,(function(){n.manager.itemEnd(e)}),void 0,(function(){n.manager.itemError(e),n.manager.itemEnd(e)}))}(/^(\/\/)|([a-z]+:(\/\/)?)/i.test(t)?t:n.resourcePath+t)}return e.data?{data:sr(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){const n=new Qd(t);i=new $d(n),i.setCrossOrigin(this.crossOrigin);for(let t=0,n=e.length;t<n;t++){const n=e[t],i=n.url;if(Array.isArray(i)){const e=[];for(let t=0,n=i.length;t<n;t++){const n=s(i[t]);null!==n&&(n instanceof HTMLImageElement?e.push(n):e.push(new Ul(n.data,n.width,n.height)))}r[n.uuid]=new vr(e)}else{const e=s(n.url);r[n.uuid]=new vr(e)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function i(e){if("string"==typeof e){const n=e,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(n)?n:t.resourcePath+n;return await r.loadAsync(i)}return e.data?{data:sr(e.type,e.data),width:e.width,height:e.height}:null}if(void 0!==e&&e.length>0){r=new $d(this.manager),r.setCrossOrigin(this.crossOrigin);for(let t=0,r=e.length;t<r;t++){const r=e[t],s=r.url;if(Array.isArray(s)){const e=[];for(let t=0,n=s.length;t<n;t++){const n=s[t],r=await i(n);null!==r&&(r instanceof HTMLImageElement?e.push(r):e.push(new Ul(r.data,r.width,r.height)))}n[r.uuid]=new vr(e)}else{const e=await i(r.url);n[r.uuid]=new vr(e)}}}return n}parseTextures(e,t){function n(e,t){return"number"==typeof e?e:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",e),t[e])}const r={};if(void 0!==e)for(let i=0,s=e.length;i<s;i++){const s=e[i];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===t[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image);const o=t[s.image],a=o.data;let c;Array.isArray(a)?(c=new so,6===a.length&&(c.needsUpdate=!0)):(c=a&&a.data?new Ul:new wr,a&&(c.needsUpdate=!0)),c.source=o,c.uuid=s.uuid,void 0!==s.name&&(c.name=s.name),void 0!==s.mapping&&(c.mapping=n(s.mapping,Sp)),void 0!==s.channel&&(c.channel=s.channel),void 0!==s.offset&&c.offset.fromArray(s.offset),void 0!==s.repeat&&c.repeat.fromArray(s.repeat),void 0!==s.center&&c.center.fromArray(s.center),void 0!==s.rotation&&(c.rotation=s.rotation),void 0!==s.wrap&&(c.wrapS=n(s.wrap[0],Mp),c.wrapT=n(s.wrap[1],Mp)),void 0!==s.format&&(c.format=s.format),void 0!==s.internalFormat&&(c.internalFormat=s.internalFormat),void 0!==s.type&&(c.type=s.type),void 0!==s.colorSpace&&(c.colorSpace=s.colorSpace),void 0!==s.minFilter&&(c.minFilter=n(s.minFilter,Cp)),void 0!==s.magFilter&&(c.magFilter=n(s.magFilter,Cp)),void 0!==s.anisotropy&&(c.anisotropy=s.anisotropy),void 0!==s.flipY&&(c.flipY=s.flipY),void 0!==s.generateMipmaps&&(c.generateMipmaps=s.generateMipmaps),void 0!==s.premultiplyAlpha&&(c.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(c.unpackAlignment=s.unpackAlignment),void 0!==s.compareFunction&&(c.compareFunction=s.compareFunction),void 0!==s.userData&&(c.userData=s.userData),r[s.uuid]=c}return r}parseObject(e,t,n,r,i){let s,o,a;function c(e){return void 0===t[e]&&console.warn("THREE.ObjectLoader: Undefined geometry",e),t[e]}function l(e){if(void 0!==e){if(Array.isArray(e)){const t=[];for(let r=0,i=e.length;r<i;r++){const i=e[r];void 0===n[i]&&console.warn("THREE.ObjectLoader: Undefined material",i),t.push(n[i])}return t}return void 0===n[e]&&console.warn("THREE.ObjectLoader: Undefined material",e),n[e]}}function u(e){return void 0===r[e]&&console.warn("THREE.ObjectLoader: Undefined texture",e),r[e]}switch(e.type){case"Scene":s=new il,void 0!==e.background&&(Number.isInteger(e.background)?s.background=new Ji(e.background):s.background=u(e.background)),void 0!==e.environment&&(s.environment=u(e.environment)),void 0!==e.fog&&("Fog"===e.fog.type?s.fog=new rl(e.fog.color,e.fog.near,e.fog.far):"FogExp2"===e.fog.type&&(s.fog=new nl(e.fog.color,e.fog.density)),""!==e.fog.name&&(s.fog.name=e.fog.name)),void 0!==e.backgroundBlurriness&&(s.backgroundBlurriness=e.backgroundBlurriness),void 0!==e.backgroundIntensity&&(s.backgroundIntensity=e.backgroundIntensity),void 0!==e.backgroundRotation&&s.backgroundRotation.fromArray(e.backgroundRotation),void 0!==e.environmentIntensity&&(s.environmentIntensity=e.environmentIntensity),void 0!==e.environmentRotation&&s.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":s=new no(e.fov,e.aspect,e.near,e.far),void 0!==e.focus&&(s.focus=e.focus),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.filmGauge&&(s.filmGauge=e.filmGauge),void 0!==e.filmOffset&&(s.filmOffset=e.filmOffset),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"OrthographicCamera":s=new Ro(e.left,e.right,e.top,e.bottom,e.near,e.far),void 0!==e.zoom&&(s.zoom=e.zoom),void 0!==e.view&&(s.view=Object.assign({},e.view));break;case"AmbientLight":s=new Ap(e.color,e.intensity);break;case"DirectionalLight":s=new gp(e.color,e.intensity);break;case"PointLight":s=new fp(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":s=new yp(e.color,e.intensity,e.width,e.height);break;case"SpotLight":s=new lp(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":s=new rp(e.color,e.groundColor,e.intensity);break;case"LightProbe":s=(new vp).fromJSON(e);break;case"SkinnedMesh":o=c(e.geometry),a=l(e.material),s=new Nl(o,a),void 0!==e.bindMode&&(s.bindMode=e.bindMode),void 0!==e.bindMatrix&&s.bindMatrix.fromArray(e.bindMatrix),void 0!==e.skeleton&&(s.skeleton=e.skeleton);break;case"Mesh":o=c(e.geometry),a=l(e.material),s=new Qs(o,a);break;case"InstancedMesh":o=c(e.geometry),a=l(e.material);const t=e.count,n=e.instanceMatrix,r=e.instanceColor;s=new Yl(o,a,t),s.instanceMatrix=new jl(new Float32Array(n.array),16),void 0!==r&&(s.instanceColor=new jl(new Float32Array(r.array),r.itemSize));break;case"BatchedMesh":o=c(e.geometry),a=l(e.material),s=new gu(e.maxGeometryCount,e.maxVertexCount,e.maxIndexCount,a),s.geometry=o,s.perObjectFrustumCulled=e.perObjectFrustumCulled,s.sortObjects=e.sortObjects,s._drawRanges=e.drawRanges,s._reservedRanges=e.reservedRanges,s._visibility=e.visibility,s._active=e.active,s._bounds=e.bounds.map((e=>{const t=new Lr;t.min.fromArray(e.boxMin),t.max.fromArray(e.boxMax);const n=new Zr;return n.radius=e.sphereRadius,n.center.fromArray(e.sphereCenter),{boxInitialized:e.boxInitialized,box:t,sphereInitialized:e.sphereInitialized,sphere:n}})),s._maxGeometryCount=e.maxGeometryCount,s._maxVertexCount=e.maxVertexCount,s._maxIndexCount=e.maxIndexCount,s._geometryInitialized=e.geometryInitialized,s._geometryCount=e.geometryCount,s._matricesTexture=u(e.matricesTexture.uuid),void 0!==e.colorsTexture&&(s._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":s=new Sl;break;case"Line":s=new Tu(c(e.geometry),l(e.material));break;case"LineLoop":s=new Ru(c(e.geometry),l(e.material));break;case"LineSegments":s=new Iu(c(e.geometry),l(e.material));break;case"PointCloud":case"Points":s=new Nu(c(e.geometry),l(e.material));break;case"Sprite":s=new xl(l(e.material));break;case"Group":s=new Wc;break;case"Bone":s=new Fl;break;default:s=new Li}if(s.uuid=e.uuid,void 0!==e.name&&(s.name=e.name),void 0!==e.matrix?(s.matrix.fromArray(e.matrix),void 0!==e.matrixAutoUpdate&&(s.matrixAutoUpdate=e.matrixAutoUpdate),s.matrixAutoUpdate&&s.matrix.decompose(s.position,s.quaternion,s.scale)):(void 0!==e.position&&s.position.fromArray(e.position),void 0!==e.rotation&&s.rotation.fromArray(e.rotation),void 0!==e.quaternion&&s.quaternion.fromArray(e.quaternion),void 0!==e.scale&&s.scale.fromArray(e.scale)),void 0!==e.up&&s.up.fromArray(e.up),void 0!==e.castShadow&&(s.castShadow=e.castShadow),void 0!==e.receiveShadow&&(s.receiveShadow=e.receiveShadow),e.shadow&&(void 0!==e.shadow.bias&&(s.shadow.bias=e.shadow.bias),void 0!==e.shadow.normalBias&&(s.shadow.normalBias=e.shadow.normalBias),void 0!==e.shadow.radius&&(s.shadow.radius=e.shadow.radius),void 0!==e.shadow.mapSize&&s.shadow.mapSize.fromArray(e.shadow.mapSize),void 0!==e.shadow.camera&&(s.shadow.camera=this.parseObject(e.shadow.camera))),void 0!==e.visible&&(s.visible=e.visible),void 0!==e.frustumCulled&&(s.frustumCulled=e.frustumCulled),void 0!==e.renderOrder&&(s.renderOrder=e.renderOrder),void 0!==e.userData&&(s.userData=e.userData),void 0!==e.layers&&(s.layers.mask=e.layers),void 0!==e.children){const o=e.children;for(let e=0;e<o.length;e++)s.add(this.parseObject(o[e],t,n,r,i))}if(void 0!==e.animations){const t=e.animations;for(let e=0;e<t.length;e++){const n=t[e];s.animations.push(i[n])}}if("LOD"===e.type){void 0!==e.autoUpdate&&(s.autoUpdate=e.autoUpdate);const t=e.levels;for(let e=0;e<t.length;e++){const n=t[e],r=s.getObjectByProperty("uuid",n.object);void 0!==r&&s.addLevel(r,n.distance,n.hysteresis)}}return s}bindSkeletons(e,t){0!==Object.keys(t).length&&e.traverse((function(e){if(!0===e.isSkinnedMesh&&void 0!==e.skeleton){const n=t[e.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",e.skeleton):e.bind(n,e.bindMatrix)}}))}}const Sp={UVMapping:ue,CubeReflectionMapping:he,CubeRefractionMapping:de,EquirectangularReflectionMapping:pe,EquirectangularRefractionMapping:fe,CubeUVReflectionMapping:me},Mp={RepeatWrapping:ge,ClampToEdgeWrapping:Ae,MirroredRepeatWrapping:ye},Cp={NearestFilter:_e,NearestMipmapNearestFilter:ve,NearestMipmapLinearFilter:xe,LinearFilter:Ee,LinearMipmapNearestFilter:Te,LinearMipmapLinearFilter:Me};class Ip extends Wd{constructor(e){super(e),this.isImageBitmapLoader=!0,"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,n,r){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);const i=this,s=Vd.get(e);if(void 0!==s)return i.manager.itemStart(e),s.then?void s.then((n=>{t&&t(n),i.manager.itemEnd(e)})).catch((e=>{r&&r(e)})):(setTimeout((function(){t&&t(s),i.manager.itemEnd(e)}),0),s);const o={};o.credentials="anonymous"===this.crossOrigin?"same-origin":"include",o.headers=this.requestHeader;const a=fetch(e,o).then((function(e){return e.blob()})).then((function(e){return createImageBitmap(e,Object.assign(i.options,{colorSpaceConversion:"none"}))})).then((function(n){return Vd.add(e,n),t&&t(n),i.manager.itemEnd(e),n})).catch((function(t){r&&r(t),Vd.remove(e),i.manager.itemError(e),i.manager.itemEnd(e)}));Vd.add(e,a),i.manager.itemStart(e)}}let Rp;class Bp{static getContext(){return void 0===Rp&&(Rp=new(window.AudioContext||window.webkitAudioContext)),Rp}static setContext(e){Rp=e}}class Pp extends Wd{constructor(e){super(e)}load(e,t,n,r){const i=this,s=new Kd(this.manager);function o(t){r?r(t):console.error(t),i.manager.itemError(e)}s.setResponseType("arraybuffer"),s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(function(e){try{const n=e.slice(0);Bp.getContext().decodeAudioData(n,(function(e){t(e)})).catch(o)}catch(e){o(e)}}),n,r)}}const Dp=new ci,Op=new ci,Lp=new ci;class Np{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new no,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new no,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Lp.copy(e.projectionMatrix);const n=t.eyeSep/2,r=n*t.near/t.focus,i=t.near*Math.tan(Hn*t.fov*.5)/t.zoom;let s,o;Op.elements[12]=-n,Dp.elements[12]=n,s=-i*t.aspect+r,o=i*t.aspect+r,Lp.elements[0]=2*t.near/(o-s),Lp.elements[8]=(o+s)/(o-s),this.cameraL.projectionMatrix.copy(Lp),s=-i*t.aspect-r,o=i*t.aspect-r,Lp.elements[0]=2*t.near/(o-s),Lp.elements[8]=(o+s)/(o-s),this.cameraR.projectionMatrix.copy(Lp)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Op),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Dp)}}class Fp{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Up(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=Up();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function Up(){return("undefined"==typeof performance?Date:performance).now()}const kp=new Pr,zp=new Br,Gp=new Pr,jp=new Pr;class Vp extends Li{constructor(){super(),this.type="AudioListener",this.context=Bp.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Fp}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(kp,zp,Gp),jp.set(0,0,-1).applyQuaternion(zp),t.positionX){const e=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(kp.x,e),t.positionY.linearRampToValueAtTime(kp.y,e),t.positionZ.linearRampToValueAtTime(kp.z,e),t.forwardX.linearRampToValueAtTime(jp.x,e),t.forwardY.linearRampToValueAtTime(jp.y,e),t.forwardZ.linearRampToValueAtTime(jp.z,e),t.upX.linearRampToValueAtTime(n.x,e),t.upY.linearRampToValueAtTime(n.y,e),t.upZ.linearRampToValueAtTime(n.z,e)}else t.setPosition(kp.x,kp.y,kp.z),t.setOrientation(jp.x,jp.y,jp.z,n.x,n.y,n.z)}}class Qp extends Li{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,null!==this.source&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(!1!==this._connected){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),!0===this._connected?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,!0===this.isPlaying&&void 0!==this.source.detune&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(!1!==this.hasPlaybackControl)return this.playbackRate=e,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(!1!==this.hasPlaybackControl)return this.loop=e,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const Hp=new Pr,Wp=new Br,qp=new Pr,Xp=new Pr;class Kp extends Qp{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Hp,Wp,qp),Xp.set(0,0,1).applyQuaternion(Wp);const t=this.panner;if(t.positionX){const e=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Hp.x,e),t.positionY.linearRampToValueAtTime(Hp.y,e),t.positionZ.linearRampToValueAtTime(Hp.z,e),t.orientationX.linearRampToValueAtTime(Xp.x,e),t.orientationY.linearRampToValueAtTime(Xp.y,e),t.orientationZ.linearRampToValueAtTime(Xp.z,e)}else t.setPosition(Hp.x,Hp.y,Hp.z),t.setOrientation(Xp.x,Xp.y,Xp.z)}}class Yp{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class Jp{constructor(e,t,n){let r,i,s;switch(this.binding=e,this.valueSize=n,t){case"quaternion":r=this._slerp,i=this._slerpAdditive,s=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":r=this._select,i=this._select,s=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:r=this._lerp,i=this._lerpAdditive,s=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=i,this._setIdentity=s,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,i=e*r+r;let s=this.cumulativeWeight;if(0===s){for(let e=0;e!==r;++e)n[i+e]=n[e];s=t}else{s+=t;const e=t/s;this._mixBufferRegion(n,i,0,e,r)}this.cumulativeWeight=s}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,i=this.cumulativeWeight,s=this.cumulativeWeightAdditive,o=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,i<1){const e=t*this._origIndex;this._mixBufferRegion(n,r,e,1-i,t)}s>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let e=t,i=t+t;e!==i;++e)if(n[e]!==n[e+t]){o.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let e=n,i=r;e!==i;++e)t[e]=t[r+e%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=3*this.valueSize;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,i){if(r>=.5)for(let r=0;r!==i;++r)e[t+r]=e[n+r]}_slerp(e,t,n,r){Br.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,i){const s=this._workIndex*i;Br.multiplyQuaternionsFlat(e,s,e,t,e,n),Br.slerpFlat(e,t,e,t,e,s,r)}_lerp(e,t,n,r,i){const s=1-r;for(let o=0;o!==i;++o){const i=t+o;e[i]=e[i]*s+e[n+o]*r}}_lerpAdditive(e,t,n,r,i){for(let s=0;s!==i;++s){const i=t+s;e[i]=e[i]+e[n+s]*r}}}const $p="\\[\\]\\.:\\/",Zp=new RegExp("["+$p+"]","g"),ef="[^"+$p+"]",tf="[^"+$p.replace("\\.","")+"]",nf=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",ef)+/(WCOD+)?/.source.replace("WCOD",tf)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",ef)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",ef)+"$"),rf=["material","materials","bones","map"];class sf{constructor(e,t,n){this.path=t,this.parsedPath=n||sf.parseTrackName(t),this.node=sf.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new sf.Composite(e,t,n):new sf(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Zp,"")}static parseTrackName(e){const t=nf.exec(e);if(null===t)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const e=n.nodeName.substring(r+1);-1!==rf.indexOf(e)&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=e)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(void 0===t||""===t||"."===t||-1===t||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(void 0!==n)return n}if(e.children){const n=function(e){for(let r=0;r<e.length;r++){const i=e[r];if(i.name===t||i.uuid===t)return i;const s=n(i.children);if(s)return s}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,i=n.length;r!==i;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let i=t.propertyIndex;if(e||(e=sf.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e)return void console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(n){let r=t.objectIndex;switch(n){case"materials":if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);e=e.material.materials;break;case"bones":if(!e.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);e=e.skeleton.bones;for(let t=0;t<e.length;t++)if(e[t].name===r){r=t;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!e.material.map)return void console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);e=e.material.map;break;default:if(void 0===e[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);e=e[n]}if(void 0!==r){if(void 0===e[r])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);e=e[r]}}const s=e[r];if(void 0===s){const n=t.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+r+" but it wasn't found.",e)}let o=this.Versioning.None;this.targetObject=e,void 0!==e.needsUpdate?o=this.Versioning.NeedsUpdate:void 0!==e.matrixWorldNeedsUpdate&&(o=this.Versioning.MatrixWorldNeedsUpdate);let a=this.BindingType.Direct;if(void 0!==i){if("morphTargetInfluences"===r){if(!e.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!e.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==e.morphTargetDictionary[i]&&(i=e.morphTargetDictionary[i])}a=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=i}else void 0!==s.fromArray&&void 0!==s.toArray?(a=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(a=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=r;this.getValue=this.GetterByBindingType[a],this.setValue=this.SetterByBindingTypeAndVersioning[a][o]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}sf.Composite=class{constructor(e,t,n){const r=n||sf.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];void 0!==r&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,i=n.length;r!==i;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}},sf.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},sf.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},sf.prototype.GetterByBindingType=[sf.prototype._getValue_direct,sf.prototype._getValue_array,sf.prototype._getValue_arrayElement,sf.prototype._getValue_toArray],sf.prototype.SetterByBindingTypeAndVersioning=[[sf.prototype._setValue_direct,sf.prototype._setValue_direct_setNeedsUpdate,sf.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[sf.prototype._setValue_array,sf.prototype._setValue_array_setNeedsUpdate,sf.prototype._setValue_array_setMatrixWorldNeedsUpdate],[sf.prototype._setValue_arrayElement,sf.prototype._setValue_arrayElement_setNeedsUpdate,sf.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[sf.prototype._setValue_fromArray,sf.prototype._setValue_fromArray_setNeedsUpdate,sf.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class of{constructor(){this.isAnimationObjectGroup=!0,this.uuid=qn(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let t=0,n=arguments.length;t!==n;++t)e[arguments[t].uuid]=t;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,i=this._bindings,s=i.length;let o,a=e.length,c=this.nCachedObjects_;for(let l=0,u=arguments.length;l!==u;++l){const u=arguments[l],h=u.uuid;let d=t[h];if(void 0===d){d=a++,t[h]=d,e.push(u);for(let e=0,t=s;e!==t;++e)i[e].push(new sf(u,n[e],r[e]))}else if(d<c){o=e[d];const a=--c,l=e[a];t[l.uuid]=d,e[d]=l,t[h]=a,e[a]=u;for(let e=0,t=s;e!==t;++e){const t=i[e],s=t[a];let o=t[d];t[d]=s,void 0===o&&(o=new sf(u,n[e],r[e])),t[a]=o}}else e[d]!==o&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_;for(let s=0,o=arguments.length;s!==o;++s){const o=arguments[s],a=o.uuid,c=t[a];if(void 0!==c&&c>=i){const s=i++,l=e[s];t[l.uuid]=c,e[c]=l,t[a]=s,e[s]=o;for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[s],i=t[c];t[c]=r,t[s]=i}}}this.nCachedObjects_=i}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let i=this.nCachedObjects_,s=e.length;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o].uuid,c=t[a];if(void 0!==c)if(delete t[a],c<i){const o=--i,a=e[o],l=--s,u=e[l];t[a.uuid]=c,e[c]=a,t[u.uuid]=o,e[o]=u,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e],r=t[o],i=t[l];t[c]=r,t[o]=i,t.pop()}}else{const i=--s,o=e[i];i>0&&(t[o.uuid]=c),e[c]=o,e.pop();for(let e=0,t=r;e!==t;++e){const t=n[e];t[c]=t[i],t.pop()}}}this.nCachedObjects_=i}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const i=this._bindings;if(void 0!==r)return i[r];const s=this._paths,o=this._parsedPaths,a=this._objects,c=a.length,l=this.nCachedObjects_,u=new Array(c);r=i.length,n[e]=r,s.push(e),o.push(t),i.push(u);for(let n=l,r=a.length;n!==r;++n){const r=a[n];u[n]=new sf(r,e,t)}return u}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(void 0!==n){const r=this._paths,i=this._parsedPaths,s=this._bindings,o=s.length-1,a=s[o];t[e[o]]=n,s[n]=a,s.pop(),i[n]=i[o],i.pop(),r[n]=r[o],r.pop()}}}class af{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const i=t.tracks,s=i.length,o=new Array(s),a={endingStart:Ft,endingEnd:Ft};for(let e=0;e!==s;++e){const t=i[e].createInterpolant(null);o[e]=t,t.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(s),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Pt,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n){if(e.fadeOut(t),this.fadeIn(t),n){const n=this._clip.duration,r=e._clip.duration,i=r/n,s=n/r;e.warp(1,i,t),this.warp(s,1,t)}return this}crossFadeTo(e,t,n){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return null!==e&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,i=r.time,s=this.timeScale;let o=this._timeScaleInterpolant;null===o&&(o=r._lendControlInterpolant(),this._timeScaleInterpolant=o);const a=o.parameterPositions,c=o.sampleValues;return a[0]=i,a[1]=i+n,c[0]=e/s,c[1]=t/s,this}stopWarping(){const e=this._timeScaleInterpolant;return null!==e&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled)return void this._updateWeight(e);const i=this._startTime;if(null!==i){const r=(e-i)*n;r<0||0===n?t=0:(this._startTime=null,t=n*r)}t*=this._updateTimeScale(e);const s=this._updateTime(t),o=this._updateWeight(e);if(o>0){const e=this._interpolants,t=this._propertyBindings;if(this.blendMode===Gt)for(let n=0,r=e.length;n!==r;++n)e[n].evaluate(s),t[n].accumulateAdditive(o);else for(let n=0,i=e.length;n!==i;++n)e[n].evaluate(s),t[n].accumulate(r,o)}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(null!==n){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),0===r&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){t*=n.evaluate(e)[0],e>n.parameterPositions[1]&&(this.stopWarping(),0===t?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,i=this._loopCount;const s=n===Dt;if(0===e)return-1===i||!s||1&~i?r:t-r;if(n===Bt){-1===i&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else{if(!(r<0)){this.time=r;break e}r=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(-1===i&&(e>=0?(i=0,this._setEndings(!0,0===this.repetitions,s)):this._setEndings(0===this.repetitions,!0,s)),r>=t||r<0){const n=Math.floor(r/t);r-=t*n,i+=Math.abs(n);const o=this.repetitions-i;if(o<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(1===o){const t=e<0;this._setEndings(t,!t,s)}else this._setEndings(!1,!1,s);this._loopCount=i,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=r;if(s&&!(1&~i))return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=Ut,r.endingEnd=Ut):(r.endingStart=e?this.zeroSlopeAtStart?Ut:Ft:kt,r.endingEnd=t?this.zeroSlopeAtEnd?Ut:Ft:kt)}_scheduleFading(e,t,n){const r=this._mixer,i=r.time;let s=this._weightInterpolant;null===s&&(s=r._lendControlInterpolant(),this._weightInterpolant=s);const o=s.parameterPositions,a=s.sampleValues;return o[0]=i,a[0]=t,o[1]=i+e,a[1]=n,this}}const cf=new Float32Array(1);class lf extends jn{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,i=r.length,s=e._propertyBindings,o=e._interpolants,a=n.uuid,c=this._bindingsByRootAndName;let l=c[a];void 0===l&&(l={},c[a]=l);for(let e=0;e!==i;++e){const i=r[e],c=i.name;let u=l[c];if(void 0!==u)++u.referenceCount,s[e]=u;else{if(u=s[e],void 0!==u){null===u._cacheIndex&&(++u.referenceCount,this._addInactiveBinding(u,a,c));continue}const r=t&&t._propertyBindings[e].binding.parsedPath;u=new Jp(sf.create(n,c,r),i.ValueTypeName,i.getValueSize()),++u.referenceCount,this._addInactiveBinding(u,a,c),s[e]=u}o[e].resultBuffer=u.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(null===e._cacheIndex){const t=(e._localRoot||this._root).uuid,n=e._clip.uuid,r=this._actionsByClip[n];this._bindAction(e,r&&r.knownActions[0]),this._addInactiveAction(e,n,t)}const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return null!==t&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,i=this._actionsByClip;let s=i[t];if(void 0===s)s={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,i[t]=s;else{const t=s.knownActions;e._byClipCacheIndex=t.length,t.push(e)}e._cacheIndex=r.length,r.push(e),s.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const i=e._clip.uuid,s=this._actionsByClip,o=s[i],a=o.knownActions,c=a[a.length-1],l=e._byClipCacheIndex;c._byClipCacheIndex=l,a[l]=c,a.pop(),e._byClipCacheIndex=null;delete o.actionByRoot[(e._localRoot||this._root).uuid],0===a.length&&delete s[i],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let e=0,n=t.length;e!==n;++e){const n=t[e];0===--n.referenceCount&&this._removeInactiveBinding(n)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,i=this._bindings;let s=r[t];void 0===s&&(s={},r[t]=s),s[n]=e,e._cacheIndex=i.length,i.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,i=n.path,s=this._bindingsByRootAndName,o=s[r],a=t[t.length-1],c=e._cacheIndex;a._cacheIndex=c,t[c]=a,t.pop(),delete o[i],0===Object.keys(o).length&&delete s[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,i=t[r];e._cacheIndex=r,t[r]=e,i._cacheIndex=n,t[n]=i}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return void 0===n&&(n=new Bd(new Float32Array(2),new Float32Array(2),1,cf),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,i=t[r];e.__cacheIndex=r,t[r]=e,i.__cacheIndex=n,t[n]=i}clipAction(e,t,n){const r=t||this._root,i=r.uuid;let s="string"==typeof e?Gd.findByName(r,e):e;const o=null!==s?s.uuid:e,a=this._actionsByClip[o];let c=null;if(void 0===n&&(n=null!==s?s.blendMode:zt),void 0!==a){const e=a.actionByRoot[i];if(void 0!==e&&e.blendMode===n)return e;c=a.knownActions[0],null===s&&(s=c._clip)}if(null===s)return null;const l=new af(this,s,t,n);return this._bindAction(l,c),this._addInactiveAction(l,o,i),l}existingAction(e,t){const n=t||this._root,r=n.uuid,i="string"==typeof e?Gd.findByName(n,e):e,s=i?i.uuid:e,o=this._actionsByClip[s];return void 0!==o&&o.actionByRoot[r]||null}stopAllAction(){const e=this._actions;for(let t=this._nActiveActions-1;t>=0;--t)e[t].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,i=Math.sign(e),s=this._accuIndex^=1;for(let o=0;o!==n;++o){t[o]._update(r,e,i,s)}const o=this._bindings,a=this._nActiveBindings;for(let e=0;e!==a;++e)o[e].apply(s);return this}setTime(e){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,i=r[n];if(void 0!==i){const e=i.knownActions;for(let n=0,r=e.length;n!==r;++n){const r=e[n];this._deactivateAction(r);const i=r._cacheIndex,s=t[t.length-1];r._cacheIndex=null,r._byClipCacheIndex=null,s._cacheIndex=i,t[i]=s,t.pop(),this._removeInactiveBindingsForAction(r)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const e in n){const r=n[e].actionByRoot[t];void 0!==r&&(this._deactivateAction(r),this._removeInactiveAction(r))}const r=this._bindingsByRootAndName[t];if(void 0!==r)for(const e in r){const t=r[e];t.restoreOriginalState(),this._removeInactiveBinding(t)}}uncacheAction(e,t){const n=this.existingAction(e,t);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class uf{constructor(e){this.value=e}clone(){return new uf(void 0===this.value.clone?this.value:this.value.clone())}}let hf=0;class df extends jn{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:hf++}),this.name="",this.usage=In,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return-1!==t&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let e=0,n=t.length;e<n;e++){const n=Array.isArray(t[e])?t[e]:[t[e]];for(let e=0;e<n.length;e++)this.uniforms.push(n[e].clone())}return this}clone(){return(new this.constructor).copy(this)}}class pf extends sl{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class ff{constructor(e,t,n,r,i){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=i,this.version=0}set needsUpdate(e){!0===e&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const mf=new ci;class gf{constructor(e,t,n=0,r=1/0){this.ray=new ai(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new _i,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return mf.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(mf),this}intersectObject(e,t=!0,n=[]){return yf(e,this,n,t),n.sort(Af),n}intersectObjects(e,t=!0,n=[]){for(let r=0,i=e.length;r<i;r++)yf(e[r],this,n,t);return n.sort(Af),n}}function Af(e,t){return e.distance-t.distance}function yf(e,t,n,r){let i=!0;if(e.layers.test(t.layers)){!1===e.raycast(t,n)&&(i=!1)}if(!0===i&&!0===r){const r=e.children;for(let e=0,i=r.length;e<i;e++)yf(r[e],t,n,!0)}}class _f{constructor(e=1,t=0,n=0){return this.radius=e,this.phi=t,this.theta=n,this}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){const e=1e-6;return this.phi=Math.max(e,Math.min(Math.PI-e,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Xn(t/this.radius,-1,1))),this}clone(){return(new this.constructor).copy(this)}}class vf{constructor(e=1,t=0,n=0){return this.radius=e,this.theta=t,this.y=n,this}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return(new this.constructor).copy(this)}}const bf=new er;class xf{constructor(e=new er(1/0,1/0),t=new er(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=bf.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return(new this.constructor).copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bf).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const wf=new Pr,Ef=new Pr;class Tf{constructor(e=new Pr,t=new Pr){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){wf.subVectors(e,this.start),Ef.subVectors(this.end,this.start);const n=Ef.dot(Ef);let r=Ef.dot(wf)/n;return t&&(r=Xn(r,0,1)),r}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return(new this.constructor).copy(this)}}const Sf=new Pr;class Mf extends Li{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Ss,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,t=1,n=32;e<n;e++,t++){const i=e/n*Math.PI*2,s=t/n*Math.PI*2;r.push(Math.cos(i),Math.sin(i),1,Math.cos(s),Math.sin(s),1)}n.setAttribute("position",new ys(r,3));const i=new Au({fog:!1,toneMapped:!1});this.cone=new Iu(n,i),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Sf.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Sf),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Cf=new Pr,If=new ci,Rf=new ci;class Bf extends Iu{constructor(e){const t=Pf(e),n=new Ss,r=[],i=[],s=new Ji(0,0,1),o=new Ji(0,1,0);for(let e=0;e<t.length;e++){const n=t[e];n.parent&&n.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),i.push(s.r,s.g,s.b),i.push(o.r,o.g,o.b))}n.setAttribute("position",new ys(r,3)),n.setAttribute("color",new ys(i,3));super(n,new Au({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0})),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");Rf.copy(this.root.matrixWorld).invert();for(let e=0,n=0;e<t.length;e++){const i=t[e];i.parent&&i.parent.isBone&&(If.multiplyMatrices(Rf,i.matrixWorld),Cf.setFromMatrixPosition(If),r.setXYZ(n,Cf.x,Cf.y,Cf.z),If.multiplyMatrices(Rf,i.parent.matrixWorld),Cf.setFromMatrixPosition(If),r.setXYZ(n+1,Cf.x,Cf.y,Cf.z),n+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function Pf(e){const t=[];!0===e.isBone&&t.push(e);for(let n=0;n<e.children.length;n++)t.push.apply(t,Pf(e.children[n]));return t}class Df extends Qs{constructor(e,t,n){super(new sd(t,4,2),new ts({wireframe:!0,fog:!1,toneMapped:!1})),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Of=new Pr,Lf=new Ji,Nf=new Ji;class Ff extends Li{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new nd(t);r.rotateY(.5*Math.PI),this.material=new ts({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const i=r.getAttribute("position"),s=new Float32Array(3*i.count);r.setAttribute("color",new ls(s,3)),this.add(new Qs(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Lf.copy(this.light.color),Nf.copy(this.light.groundColor);for(let e=0,n=t.count;e<n;e++){const r=e<n/2?Lf:Nf;t.setXYZ(e,r.r,r.g,r.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(Of.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Uf extends Iu{constructor(e=10,t=10,n=4473924,r=8947848){n=new Ji(n),r=new Ji(r);const i=t/2,s=e/t,o=e/2,a=[],c=[];for(let e=0,l=0,u=-o;e<=t;e++,u+=s){a.push(-o,0,u,o,0,u),a.push(u,0,-o,u,0,o);const t=e===i?n:r;t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3,t.toArray(c,l),l+=3}const l=new Ss;l.setAttribute("position",new ys(a,3)),l.setAttribute("color",new ys(c,3));super(l,new Au({vertexColors:!0,toneMapped:!1})),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class kf extends Iu{constructor(e=10,t=16,n=8,r=64,i=4473924,s=8947848){i=new Ji(i),s=new Ji(s);const o=[],a=[];if(t>1)for(let n=0;n<t;n++){const r=n/t*(2*Math.PI),c=Math.sin(r)*e,l=Math.cos(r)*e;o.push(0,0,0),o.push(c,0,l);const u=1&n?i:s;a.push(u.r,u.g,u.b),a.push(u.r,u.g,u.b)}for(let t=0;t<n;t++){const c=1&t?i:s,l=e-e/n*t;for(let e=0;e<r;e++){let t=e/r*(2*Math.PI),n=Math.sin(t)*l,i=Math.cos(t)*l;o.push(n,0,i),a.push(c.r,c.g,c.b),t=(e+1)/r*(2*Math.PI),n=Math.sin(t)*l,i=Math.cos(t)*l,o.push(n,0,i),a.push(c.r,c.g,c.b)}}const c=new Ss;c.setAttribute("position",new ys(o,3)),c.setAttribute("color",new ys(a,3));super(c,new Au({vertexColors:!0,toneMapped:!1})),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const zf=new Pr,Gf=new Pr,jf=new Pr;class Vf extends Li{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",void 0===t&&(t=1);let r=new Ss;r.setAttribute("position",new ys([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const i=new Au({fog:!1,toneMapped:!1});this.lightPlane=new Tu(r,i),this.add(this.lightPlane),r=new Ss,r.setAttribute("position",new ys([0,0,0,0,0,1],3)),this.targetLine=new Tu(r,i),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),zf.setFromMatrixPosition(this.light.matrixWorld),Gf.setFromMatrixPosition(this.light.target.matrixWorld),jf.subVectors(Gf,zf),this.lightPlane.lookAt(Gf),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Gf),this.targetLine.scale.z=jf.length()}}const Qf=new Pr,Hf=new $s;class Wf extends Iu{constructor(e){const t=new Ss,n=new Au({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],i=[],s={};function o(e,t){a(e),a(t)}function a(e){r.push(0,0,0),i.push(0,0,0),void 0===s[e]&&(s[e]=[]),s[e].push(r.length/3-1)}o("n1","n2"),o("n2","n4"),o("n4","n3"),o("n3","n1"),o("f1","f2"),o("f2","f4"),o("f4","f3"),o("f3","f1"),o("n1","f1"),o("n2","f2"),o("n3","f3"),o("n4","f4"),o("p","n1"),o("p","n2"),o("p","n3"),o("p","n4"),o("u1","u2"),o("u2","u3"),o("u3","u1"),o("c","t"),o("p","c"),o("cn1","cn2"),o("cn3","cn4"),o("cf1","cf2"),o("cf3","cf4"),t.setAttribute("position",new ys(r,3)),t.setAttribute("color",new ys(i,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update();const c=new Ji(16755200),l=new Ji(16711680),u=new Ji(43775),h=new Ji(16777215),d=new Ji(3355443);this.setColors(c,l,u,h,d)}setColors(e,t,n,r,i){const s=this.geometry.getAttribute("color");s.setXYZ(0,e.r,e.g,e.b),s.setXYZ(1,e.r,e.g,e.b),s.setXYZ(2,e.r,e.g,e.b),s.setXYZ(3,e.r,e.g,e.b),s.setXYZ(4,e.r,e.g,e.b),s.setXYZ(5,e.r,e.g,e.b),s.setXYZ(6,e.r,e.g,e.b),s.setXYZ(7,e.r,e.g,e.b),s.setXYZ(8,e.r,e.g,e.b),s.setXYZ(9,e.r,e.g,e.b),s.setXYZ(10,e.r,e.g,e.b),s.setXYZ(11,e.r,e.g,e.b),s.setXYZ(12,e.r,e.g,e.b),s.setXYZ(13,e.r,e.g,e.b),s.setXYZ(14,e.r,e.g,e.b),s.setXYZ(15,e.r,e.g,e.b),s.setXYZ(16,e.r,e.g,e.b),s.setXYZ(17,e.r,e.g,e.b),s.setXYZ(18,e.r,e.g,e.b),s.setXYZ(19,e.r,e.g,e.b),s.setXYZ(20,e.r,e.g,e.b),s.setXYZ(21,e.r,e.g,e.b),s.setXYZ(22,e.r,e.g,e.b),s.setXYZ(23,e.r,e.g,e.b),s.setXYZ(24,t.r,t.g,t.b),s.setXYZ(25,t.r,t.g,t.b),s.setXYZ(26,t.r,t.g,t.b),s.setXYZ(27,t.r,t.g,t.b),s.setXYZ(28,t.r,t.g,t.b),s.setXYZ(29,t.r,t.g,t.b),s.setXYZ(30,t.r,t.g,t.b),s.setXYZ(31,t.r,t.g,t.b),s.setXYZ(32,n.r,n.g,n.b),s.setXYZ(33,n.r,n.g,n.b),s.setXYZ(34,n.r,n.g,n.b),s.setXYZ(35,n.r,n.g,n.b),s.setXYZ(36,n.r,n.g,n.b),s.setXYZ(37,n.r,n.g,n.b),s.setXYZ(38,r.r,r.g,r.b),s.setXYZ(39,r.r,r.g,r.b),s.setXYZ(40,i.r,i.g,i.b),s.setXYZ(41,i.r,i.g,i.b),s.setXYZ(42,i.r,i.g,i.b),s.setXYZ(43,i.r,i.g,i.b),s.setXYZ(44,i.r,i.g,i.b),s.setXYZ(45,i.r,i.g,i.b),s.setXYZ(46,i.r,i.g,i.b),s.setXYZ(47,i.r,i.g,i.b),s.setXYZ(48,i.r,i.g,i.b),s.setXYZ(49,i.r,i.g,i.b),s.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap;Hf.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),qf("c",t,e,Hf,0,0,-1),qf("t",t,e,Hf,0,0,1),qf("n1",t,e,Hf,-1,-1,-1),qf("n2",t,e,Hf,1,-1,-1),qf("n3",t,e,Hf,-1,1,-1),qf("n4",t,e,Hf,1,1,-1),qf("f1",t,e,Hf,-1,-1,1),qf("f2",t,e,Hf,1,-1,1),qf("f3",t,e,Hf,-1,1,1),qf("f4",t,e,Hf,1,1,1),qf("u1",t,e,Hf,.7,1.1,-1),qf("u2",t,e,Hf,-.7,1.1,-1),qf("u3",t,e,Hf,0,2,-1),qf("cf1",t,e,Hf,-1,0,1),qf("cf2",t,e,Hf,1,0,1),qf("cf3",t,e,Hf,0,-1,1),qf("cf4",t,e,Hf,0,1,1),qf("cn1",t,e,Hf,-1,0,-1),qf("cn2",t,e,Hf,1,0,-1),qf("cn3",t,e,Hf,0,-1,-1),qf("cn4",t,e,Hf,0,1,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function qf(e,t,n,r,i,s,o){Qf.set(i,s,o).unproject(r);const a=t[e];if(void 0!==a){const e=n.getAttribute("position");for(let t=0,n=a.length;t<n;t++)e.setXYZ(a[t],Qf.x,Qf.y,Qf.z)}}const Xf=new Lr;class Kf extends Iu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(24),i=new Ss;i.setIndex(new ls(n,1)),i.setAttribute("position",new ls(r,3)),super(i,new Au({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Xf.setFromObject(this.object),Xf.isEmpty())return;const t=Xf.min,n=Xf.max,r=this.geometry.attributes.position,i=r.array;i[0]=n.x,i[1]=n.y,i[2]=n.z,i[3]=t.x,i[4]=n.y,i[5]=n.z,i[6]=t.x,i[7]=t.y,i[8]=n.z,i[9]=n.x,i[10]=t.y,i[11]=n.z,i[12]=n.x,i[13]=n.y,i[14]=t.z,i[15]=t.x,i[16]=n.y,i[17]=t.z,i[18]=t.x,i[19]=t.y,i[20]=t.z,i[21]=n.x,i[22]=t.y,i[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Yf extends Iu{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Ss;r.setIndex(new ls(n,1)),r.setAttribute("position",new ys([1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],3)),super(r,new Au({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class Jf extends Tu{constructor(e,t=1,n=16776960){const r=n,i=new Ss;i.setAttribute("position",new ys([1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),i.computeBoundingSphere(),super(i,new Au({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const s=new Ss;s.setAttribute("position",new ys([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),s.computeBoundingSphere(),this.add(new Qs(s,new ts({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const $f=new Pr;let Zf,em;class tm extends Li{constructor(e=new Pr(0,0,1),t=new Pr(0,0,0),n=1,r=16776960,i=.2*n,s=.2*i){super(),this.type="ArrowHelper",void 0===Zf&&(Zf=new Ss,Zf.setAttribute("position",new ys([0,0,0,0,1,0],3)),em=new mh(0,.5,1,5,1),em.translate(0,-.5,0)),this.position.copy(t),this.line=new Tu(Zf,new Au({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Qs(em,new ts({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,i,s)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{$f.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle($f,t)}}setLength(e,t=.2*e,n=.2*t){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class nm extends Iu{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=new Ss;n.setAttribute("position",new ys(t,3)),n.setAttribute("color",new ys([1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],3));super(n,new Au({vertexColors:!0,toneMapped:!1})),this.type="AxesHelper"}setColors(e,t,n){const r=new Ji,i=this.geometry.attributes.color.array;return r.set(e),r.toArray(i,0),r.toArray(i,3),r.set(t),r.toArray(i,6),r.toArray(i,9),r.set(n),r.toArray(i,12),r.toArray(i,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class rm{constructor(){this.type="ShapePath",this.color=new Ji,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new hh,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,i,s){return this.currentPath.bezierCurveTo(e,t,n,r,i,s),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(e,t){const n=t.length;let r=!1;for(let i=n-1,s=0;s<n;i=s++){let n=t[i],o=t[s],a=o.x-n.x,c=o.y-n.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(n=t[s],a=-a,o=t[i],c=-c),e.y<n.y||e.y>o.y)continue;if(e.y===n.y){if(e.x===n.x)return!0}else{const t=c*(e.x-n.x)-a*(e.y-n.y);if(0===t)return!0;if(t<0)continue;r=!r}}else{if(e.y!==n.y)continue;if(o.x<=e.x&&e.x<=n.x||n.x<=e.x&&e.x<=o.x)return!0}}return r}const n=Yh.isClockWise,r=this.subPaths;if(0===r.length)return[];let i,s,o;const a=[];if(1===r.length)return s=r[0],o=new Eh,o.curves=s.curves,a.push(o),a;let c=!n(r[0].getPoints());c=e?!c:c;const l=[],u=[];let h,d,p=[],f=0;u[f]=void 0,p[f]=[];for(let t=0,o=r.length;t<o;t++)s=r[t],h=s.getPoints(),i=n(h),i=e?!i:i,i?(!c&&u[f]&&f++,u[f]={s:new Eh,p:h},u[f].s.curves=s.curves,c&&f++,p[f]=[]):p[f].push({h:s,p:h[0]});if(!u[0])return function(e){const t=[];for(let n=0,r=e.length;n<r;n++){const r=e[n],i=new Eh;i.curves=r.curves,t.push(i)}return t}(r);if(u.length>1){let e=!1,n=0;for(let e=0,t=u.length;e<t;e++)l[e]=[];for(let r=0,i=u.length;r<i;r++){const i=p[r];for(let s=0;s<i.length;s++){const o=i[s];let a=!0;for(let i=0;i<u.length;i++)t(o.p,u[i].p)&&(r!==i&&n++,a?(a=!1,l[i].push(o)):e=!0);a&&l[r].push(o)}}n>0&&!1===e&&(p=l)}for(let e=0,t=u.length;e<t;e++){o=u[e].s,a.push(o),d=p[e];for(let e=0,t=d.length;e<t;e++)o.holes.push(d[e].h)}return a}}class im extends Sr{constructor(e=1,t=1,n=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:n}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:r}})),"undefined"!=typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=r)},532:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DragControls:()=>m});var r=n(9437);const i=new r.Plane,s=new r.Raycaster,o=new r.Vector2,a=new r.Vector3,c=new r.Vector2,l=new r.Vector2,u=new r.Vector3,h=new r.Vector3,d=new r.Matrix4,p=new r.Vector3,f=new r.Vector3;class m extends r.EventDispatcher{constructor(e,t,n){super(),n.style.touchAction="none";let r=null,m=null;const g=[];this.mode="translate",this.rotateSpeed=1;const A=this;function y(){n.addEventListener("pointermove",v),n.addEventListener("pointerdown",b),n.addEventListener("pointerup",x),n.addEventListener("pointerleave",x)}function _(){n.removeEventListener("pointermove",v),n.removeEventListener("pointerdown",b),n.removeEventListener("pointerup",x),n.removeEventListener("pointerleave",x),n.style.cursor=""}function v(y){if(!1!==A.enabled){if(w(y),s.setFromCamera(o,t),r)"translate"===A.mode?s.ray.intersectPlane(i,u)&&r.position.copy(u.sub(a).applyMatrix4(d)):"rotate"===A.mode&&(c.subVectors(o,l).multiplyScalar(A.rotateSpeed),r.rotateOnWorldAxis(p,c.x),r.rotateOnWorldAxis(f.normalize(),-c.y)),A.dispatchEvent({type:"drag",object:r}),l.copy(o);else if("mouse"===y.pointerType||"pen"===y.pointerType)if(g.length=0,s.setFromCamera(o,t),s.intersectObjects(e,A.recursive,g),g.length>0){const e=g[0].object;i.setFromNormalAndCoplanarPoint(t.getWorldDirection(i.normal),h.setFromMatrixPosition(e.matrixWorld)),m!==e&&null!==m&&(A.dispatchEvent({type:"hoveroff",object:m}),n.style.cursor="auto",m=null),m!==e&&(A.dispatchEvent({type:"hoveron",object:e}),n.style.cursor="pointer",m=e)}else null!==m&&(A.dispatchEvent({type:"hoveroff",object:m}),n.style.cursor="auto",m=null);l.copy(o)}}function b(c){!1!==A.enabled&&(w(c),g.length=0,s.setFromCamera(o,t),s.intersectObjects(e,A.recursive,g),g.length>0&&(r=!0===A.transformGroup?E(g[0].object):g[0].object,i.setFromNormalAndCoplanarPoint(t.getWorldDirection(i.normal),h.setFromMatrixPosition(r.matrixWorld)),s.ray.intersectPlane(i,u)&&("translate"===A.mode?(d.copy(r.parent.matrixWorld).invert(),a.copy(u).sub(h.setFromMatrixPosition(r.matrixWorld))):"rotate"===A.mode&&(p.set(0,1,0).applyQuaternion(t.quaternion).normalize(),f.set(1,0,0).applyQuaternion(t.quaternion).normalize())),n.style.cursor="move",A.dispatchEvent({type:"dragstart",object:r})),l.copy(o))}function x(){!1!==A.enabled&&(r&&(A.dispatchEvent({type:"dragend",object:r}),r=null),n.style.cursor=m?"pointer":"auto")}function w(e){const t=n.getBoundingClientRect();o.x=(e.clientX-t.left)/t.width*2-1,o.y=-(e.clientY-t.top)/t.height*2+1}function E(e,t=null){return e.isGroup&&(t=e),null===e.parent?t:E(e.parent,t)}y(),this.enabled=!0,this.recursive=!0,this.transformGroup=!1,this.activate=y,this.deactivate=_,this.dispose=function(){_()},this.getObjects=function(){return e},this.getRaycaster=function(){return s},this.setObjects=function(t){e=t}}}},7024:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OrbitControls:()=>u});var r=n(9437);const i={type:"change"},s={type:"start"},o={type:"end"},a=new r.Ray,c=new r.Plane,l=Math.cos(70*r.MathUtils.DEG2RAD);class u extends r.EventDispatcher{constructor(e,t){super(),this.object=e,this.domElement=t,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new r.Vector3,this.cursor=new r.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minTargetRadius=0,this.maxTargetRadius=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.zoomToCursor=!1,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:r.MOUSE.ROTATE,MIDDLE:r.MOUSE.DOLLY,RIGHT:r.MOUSE.PAN},this.touches={ONE:r.TOUCH.ROTATE,TWO:r.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return p.phi},this.getAzimuthalAngle=function(){return p.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(e){e.addEventListener("keydown",ne),this._domElementKeyEvents=e},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",ne),this._domElementKeyEvents=null},this.saveState=function(){n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=function(){n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(i),n.update(),h=u.NONE},this.update=function(){const t=new r.Vector3,s=(new r.Quaternion).setFromUnitVectors(e.up,new r.Vector3(0,1,0)),o=s.clone().invert(),A=new r.Vector3,y=new r.Quaternion,_=new r.Vector3,v=2*Math.PI;return function(b=null){const x=n.object.position;t.copy(x).sub(n.target),t.applyQuaternion(s),p.setFromVector3(t),n.autoRotate&&h===u.NONE&&D(function(e){return null!==e?2*Math.PI/60*n.autoRotateSpeed*e:2*Math.PI/60/60*n.autoRotateSpeed}(b)),n.enableDamping?(p.theta+=f.theta*n.dampingFactor,p.phi+=f.phi*n.dampingFactor):(p.theta+=f.theta,p.phi+=f.phi);let w=n.minAzimuthAngle,E=n.maxAzimuthAngle;isFinite(w)&&isFinite(E)&&(w<-Math.PI?w+=v:w>Math.PI&&(w-=v),E<-Math.PI?E+=v:E>Math.PI&&(E-=v),p.theta=w<=E?Math.max(w,Math.min(E,p.theta)):p.theta>(w+E)/2?Math.max(w,p.theta):Math.min(E,p.theta)),p.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,p.phi)),p.makeSafe(),!0===n.enableDamping?n.target.addScaledVector(g,n.dampingFactor):n.target.add(g),n.target.sub(n.cursor),n.target.clampLength(n.minTargetRadius,n.maxTargetRadius),n.target.add(n.cursor);let T=!1;if(n.zoomToCursor&&C||n.object.isOrthographicCamera)p.radius=G(p.radius);else{const e=p.radius;p.radius=G(p.radius*m),T=e!=p.radius}if(t.setFromSpherical(p),t.applyQuaternion(o),x.copy(n.target).add(t),n.object.lookAt(n.target),!0===n.enableDamping?(f.theta*=1-n.dampingFactor,f.phi*=1-n.dampingFactor,g.multiplyScalar(1-n.dampingFactor)):(f.set(0,0,0),g.set(0,0,0)),n.zoomToCursor&&C){let i=null;if(n.object.isPerspectiveCamera){const e=t.length();i=G(e*m);const r=e-i;n.object.position.addScaledVector(S,r),n.object.updateMatrixWorld(),T=!!r}else if(n.object.isOrthographicCamera){const e=new r.Vector3(M.x,M.y,0);e.unproject(n.object);const s=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix(),T=s!==n.object.zoom;const o=new r.Vector3(M.x,M.y,0);o.unproject(n.object),n.object.position.sub(o).add(e),n.object.updateMatrixWorld(),i=t.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;null!==i&&(this.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(i).add(n.object.position):(a.origin.copy(n.object.position),a.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(a.direction))<l?e.lookAt(n.target):(c.setFromNormalAndCoplanarPoint(n.object.up,n.target),a.intersectPlane(c,n.target))))}else if(n.object.isOrthographicCamera){const e=n.object.zoom;n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),e!==n.object.zoom&&(n.object.updateProjectionMatrix(),T=!0)}return m=1,C=!1,!!(T||A.distanceToSquared(n.object.position)>d||8*(1-y.dot(n.object.quaternion))>d||_.distanceToSquared(n.target)>d)&&(n.dispatchEvent(i),A.copy(n.object.position),y.copy(n.object.quaternion),_.copy(n.target),!0)}}(),this.dispose=function(){n.domElement.removeEventListener("contextmenu",ie),n.domElement.removeEventListener("pointerdown",Y),n.domElement.removeEventListener("pointercancel",$),n.domElement.removeEventListener("wheel",Z),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",$);n.domElement.getRootNode().removeEventListener("keydown",ee,{capture:!0}),null!==n._domElementKeyEvents&&(n._domElementKeyEvents.removeEventListener("keydown",ne),n._domElementKeyEvents=null)};const n=this,u={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let h=u.NONE;const d=1e-6,p=new r.Spherical,f=new r.Spherical;let m=1;const g=new r.Vector3,A=new r.Vector2,y=new r.Vector2,_=new r.Vector2,v=new r.Vector2,b=new r.Vector2,x=new r.Vector2,w=new r.Vector2,E=new r.Vector2,T=new r.Vector2,S=new r.Vector3,M=new r.Vector2;let C=!1;const I=[],R={};let B=!1;function P(e){const t=Math.abs(.01*e);return Math.pow(.95,n.zoomSpeed*t)}function D(e){f.theta-=e}function O(e){f.phi-=e}const L=function(){const e=new r.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),g.add(e)}}(),N=function(){const e=new r.Vector3;return function(t,r){!0===n.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(n.object.up,e)),e.multiplyScalar(t),g.add(e)}}(),F=function(){const e=new r.Vector3;return function(t,r){const i=n.domElement;if(n.object.isPerspectiveCamera){const s=n.object.position;e.copy(s).sub(n.target);let o=e.length();o*=Math.tan(n.object.fov/2*Math.PI/180),L(2*t*o/i.clientHeight,n.object.matrix),N(2*r*o/i.clientHeight,n.object.matrix)}else n.object.isOrthographicCamera?(L(t*(n.object.right-n.object.left)/n.object.zoom/i.clientWidth,n.object.matrix),N(r*(n.object.top-n.object.bottom)/n.object.zoom/i.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}}();function U(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?m/=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function k(e){n.object.isPerspectiveCamera||n.object.isOrthographicCamera?m*=e:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function z(e,t){if(!n.zoomToCursor)return;C=!0;const r=n.domElement.getBoundingClientRect(),i=e-r.left,s=t-r.top,o=r.width,a=r.height;M.x=i/o*2-1,M.y=-s/a*2+1,S.set(M.x,M.y,1).unproject(n.object).sub(n.object.position).normalize()}function G(e){return Math.max(n.minDistance,Math.min(n.maxDistance,e))}function j(e){A.set(e.clientX,e.clientY)}function V(e){v.set(e.clientX,e.clientY)}function Q(e){if(1===I.length)A.set(e.pageX,e.pageY);else{const t=oe(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);A.set(n,r)}}function H(e){if(1===I.length)v.set(e.pageX,e.pageY);else{const t=oe(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);v.set(n,r)}}function W(e){const t=oe(e),n=e.pageX-t.x,r=e.pageY-t.y,i=Math.sqrt(n*n+r*r);w.set(0,i)}function q(e){if(1==I.length)y.set(e.pageX,e.pageY);else{const t=oe(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);y.set(n,r)}_.subVectors(y,A).multiplyScalar(n.rotateSpeed);const t=n.domElement;D(2*Math.PI*_.x/t.clientHeight),O(2*Math.PI*_.y/t.clientHeight),A.copy(y)}function X(e){if(1===I.length)b.set(e.pageX,e.pageY);else{const t=oe(e),n=.5*(e.pageX+t.x),r=.5*(e.pageY+t.y);b.set(n,r)}x.subVectors(b,v).multiplyScalar(n.panSpeed),F(x.x,x.y),v.copy(b)}function K(e){const t=oe(e),r=e.pageX-t.x,i=e.pageY-t.y,s=Math.sqrt(r*r+i*i);E.set(0,s),T.set(0,Math.pow(E.y/w.y,n.zoomSpeed)),U(T.y),w.copy(E);z(.5*(e.pageX+t.x),.5*(e.pageY+t.y))}function Y(e){!1!==n.enabled&&(0===I.length&&(n.domElement.setPointerCapture(e.pointerId),n.domElement.addEventListener("pointermove",J),n.domElement.addEventListener("pointerup",$)),function(e){for(let t=0;t<I.length;t++)if(I[t]==e.pointerId)return!0;return!1}(e)||(function(e){I.push(e.pointerId)}(e),"touch"===e.pointerType?re(e):function(e){let t;switch(e.button){case 0:t=n.mouseButtons.LEFT;break;case 1:t=n.mouseButtons.MIDDLE;break;case 2:t=n.mouseButtons.RIGHT;break;default:t=-1}switch(t){case r.MOUSE.DOLLY:if(!1===n.enableZoom)return;!function(e){z(e.clientX,e.clientX),w.set(e.clientX,e.clientY)}(e),h=u.DOLLY;break;case r.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enablePan)return;V(e),h=u.PAN}else{if(!1===n.enableRotate)return;j(e),h=u.ROTATE}break;case r.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===n.enableRotate)return;j(e),h=u.ROTATE}else{if(!1===n.enablePan)return;V(e),h=u.PAN}break;default:h=u.NONE}h!==u.NONE&&n.dispatchEvent(s)}(e)))}function J(e){!1!==n.enabled&&("touch"===e.pointerType?function(e){switch(se(e),h){case u.TOUCH_ROTATE:if(!1===n.enableRotate)return;q(e),n.update();break;case u.TOUCH_PAN:if(!1===n.enablePan)return;X(e),n.update();break;case u.TOUCH_DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&K(e),n.enablePan&&X(e)}(e),n.update();break;case u.TOUCH_DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&K(e),n.enableRotate&&q(e)}(e),n.update();break;default:h=u.NONE}}(e):function(e){switch(h){case u.ROTATE:if(!1===n.enableRotate)return;!function(e){y.set(e.clientX,e.clientY),_.subVectors(y,A).multiplyScalar(n.rotateSpeed);const t=n.domElement;D(2*Math.PI*_.x/t.clientHeight),O(2*Math.PI*_.y/t.clientHeight),A.copy(y),n.update()}(e);break;case u.DOLLY:if(!1===n.enableZoom)return;!function(e){E.set(e.clientX,e.clientY),T.subVectors(E,w),T.y>0?U(P(T.y)):T.y<0&&k(P(T.y)),w.copy(E),n.update()}(e);break;case u.PAN:if(!1===n.enablePan)return;!function(e){b.set(e.clientX,e.clientY),x.subVectors(b,v).multiplyScalar(n.panSpeed),F(x.x,x.y),v.copy(b),n.update()}(e)}}(e))}function $(e){switch(function(e){delete R[e.pointerId];for(let t=0;t<I.length;t++)if(I[t]==e.pointerId)return void I.splice(t,1)}(e),I.length){case 0:n.domElement.releasePointerCapture(e.pointerId),n.domElement.removeEventListener("pointermove",J),n.domElement.removeEventListener("pointerup",$),n.dispatchEvent(o),h=u.NONE;break;case 1:const t=I[0],r=R[t];re({pointerId:t,pageX:r.x,pageY:r.y})}}function Z(e){!1!==n.enabled&&!1!==n.enableZoom&&h===u.NONE&&(e.preventDefault(),n.dispatchEvent(s),function(e){z(e.clientX,e.clientY),e.deltaY<0?k(P(e.deltaY)):e.deltaY>0&&U(P(e.deltaY)),n.update()}(function(e){const t=e.deltaMode,n={clientX:e.clientX,clientY:e.clientY,deltaY:e.deltaY};switch(t){case 1:n.deltaY*=16;break;case 2:n.deltaY*=100}e.ctrlKey&&!B&&(n.deltaY*=10);return n}(e)),n.dispatchEvent(o))}function ee(e){if("Control"===e.key){B=!0;n.domElement.getRootNode().addEventListener("keyup",te,{passive:!0,capture:!0})}}function te(e){if("Control"===e.key){B=!1;n.domElement.getRootNode().removeEventListener("keyup",te,{passive:!0,capture:!0})}}function ne(e){!1!==n.enabled&&!1!==n.enablePan&&function(e){let t=!1;switch(e.code){case n.keys.UP:e.ctrlKey||e.metaKey||e.shiftKey?O(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):F(0,n.keyPanSpeed),t=!0;break;case n.keys.BOTTOM:e.ctrlKey||e.metaKey||e.shiftKey?O(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):F(0,-n.keyPanSpeed),t=!0;break;case n.keys.LEFT:e.ctrlKey||e.metaKey||e.shiftKey?D(2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):F(n.keyPanSpeed,0),t=!0;break;case n.keys.RIGHT:e.ctrlKey||e.metaKey||e.shiftKey?D(-2*Math.PI*n.rotateSpeed/n.domElement.clientHeight):F(-n.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),n.update())}(e)}function re(e){switch(se(e),I.length){case 1:switch(n.touches.ONE){case r.TOUCH.ROTATE:if(!1===n.enableRotate)return;Q(e),h=u.TOUCH_ROTATE;break;case r.TOUCH.PAN:if(!1===n.enablePan)return;H(e),h=u.TOUCH_PAN;break;default:h=u.NONE}break;case 2:switch(n.touches.TWO){case r.TOUCH.DOLLY_PAN:if(!1===n.enableZoom&&!1===n.enablePan)return;!function(e){n.enableZoom&&W(e),n.enablePan&&H(e)}(e),h=u.TOUCH_DOLLY_PAN;break;case r.TOUCH.DOLLY_ROTATE:if(!1===n.enableZoom&&!1===n.enableRotate)return;!function(e){n.enableZoom&&W(e),n.enableRotate&&Q(e)}(e),h=u.TOUCH_DOLLY_ROTATE;break;default:h=u.NONE}break;default:h=u.NONE}h!==u.NONE&&n.dispatchEvent(s)}function ie(e){!1!==n.enabled&&e.preventDefault()}function se(e){let t=R[e.pointerId];void 0===t&&(t=new r.Vector2,R[e.pointerId]=t),t.set(e.pageX,e.pageY)}function oe(e){const t=e.pointerId===I[0]?I[1]:I[0];return R[t]}n.domElement.addEventListener("contextmenu",ie),n.domElement.addEventListener("pointerdown",Y),n.domElement.addEventListener("pointercancel",$),n.domElement.addEventListener("wheel",Z,{passive:!1});n.domElement.getRootNode().addEventListener("keydown",ee,{passive:!0,capture:!0}),this.update()}}},9318:(e,t,n)=>{"use strict";n.r(t),n.d(t,{PointerLockControls:()=>u});var r=n(9437);const i=new r.Euler(0,0,0,"YXZ"),s=new r.Vector3,o={type:"change"},a={type:"lock"},c={type:"unlock"},l=Math.PI/2;class u extends r.EventDispatcher{constructor(e,t){super(),this.camera=e,this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=h.bind(this),this._onPointerlockChange=d.bind(this),this._onPointerlockError=p.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(e){return e.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(e){const t=this.camera;s.setFromMatrixColumn(t.matrix,0),s.crossVectors(t.up,s),t.position.addScaledVector(s,e)}moveRight(e){const t=this.camera;s.setFromMatrixColumn(t.matrix,0),t.position.addScaledVector(s,e)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function h(e){if(!1===this.isLocked)return;const t=e.movementX||e.mozMovementX||e.webkitMovementX||0,n=e.movementY||e.mozMovementY||e.webkitMovementY||0,r=this.camera;i.setFromQuaternion(r.quaternion),i.y-=.002*t*this.pointerSpeed,i.x-=.002*n*this.pointerSpeed,i.x=Math.max(l-this.maxPolarAngle,Math.min(l-this.minPolarAngle,i.x)),r.quaternion.setFromEuler(i),this.dispatchEvent(o)}function d(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(a),this.isLocked=!0):(this.dispatchEvent(c),this.isLocked=!1)}function p(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}},5e3:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TransformControls:()=>p,TransformControlsGizmo:()=>O,TransformControlsPlane:()=>L});var r=n(9437);const i=new r.Raycaster,s=new r.Vector3,o=new r.Vector3,a=new r.Quaternion,c={X:new r.Vector3(1,0,0),Y:new r.Vector3(0,1,0),Z:new r.Vector3(0,0,1)},l={type:"change"},u={type:"mouseDown",mode:null},h={type:"mouseUp",mode:null},d={type:"objectChange"};class p extends r.Object3D{constructor(e,t){super(),void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),this.isTransformControls=!0,this.visible=!1,this.domElement=t,this.domElement.style.touchAction="none";const n=new O;this._gizmo=n,this.add(n);const i=new L;this._plane=i,this.add(i);const s=this;function o(e,t){let r=t;Object.defineProperty(s,e,{get:function(){return void 0!==r?r:t},set:function(t){r!==t&&(r=t,i[e]=t,n[e]=t,s.dispatchEvent({type:e+"-changed",value:t}),s.dispatchEvent(l))}}),s[e]=t,i[e]=t,n[e]=t}o("camera",e),o("object",void 0),o("enabled",!0),o("axis",null),o("mode","translate"),o("translationSnap",null),o("rotationSnap",null),o("scaleSnap",null),o("space","world"),o("size",1),o("dragging",!1),o("showX",!0),o("showY",!0),o("showZ",!0);const a=new r.Vector3,c=new r.Vector3,u=new r.Quaternion,h=new r.Quaternion,d=new r.Vector3,p=new r.Quaternion,_=new r.Vector3,v=new r.Vector3,b=new r.Vector3,x=new r.Vector3;o("worldPosition",a),o("worldPositionStart",c),o("worldQuaternion",u),o("worldQuaternionStart",h),o("cameraPosition",d),o("cameraQuaternion",p),o("pointStart",_),o("pointEnd",v),o("rotationAxis",b),o("rotationAngle",0),o("eye",x),this._offset=new r.Vector3,this._startNorm=new r.Vector3,this._endNorm=new r.Vector3,this._cameraScale=new r.Vector3,this._parentPosition=new r.Vector3,this._parentQuaternion=new r.Quaternion,this._parentQuaternionInv=new r.Quaternion,this._parentScale=new r.Vector3,this._worldScaleStart=new r.Vector3,this._worldQuaternionInv=new r.Quaternion,this._worldScale=new r.Vector3,this._positionStart=new r.Vector3,this._quaternionStart=new r.Quaternion,this._scaleStart=new r.Vector3,this._getPointer=f.bind(this),this._onPointerDown=g.bind(this),this._onPointerHover=m.bind(this),this._onPointerMove=A.bind(this),this._onPointerUp=y.bind(this),this.domElement.addEventListener("pointerdown",this._onPointerDown),this.domElement.addEventListener("pointermove",this._onPointerHover),this.domElement.addEventListener("pointerup",this._onPointerUp)}updateMatrixWorld(e){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(this._parentPosition,this._parentQuaternion,this._parentScale),this.object.matrixWorld.decompose(this.worldPosition,this.worldQuaternion,this._worldScale),this._parentQuaternionInv.copy(this._parentQuaternion).invert(),this._worldQuaternionInv.copy(this.worldQuaternion).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(this.cameraPosition,this.cameraQuaternion,this._cameraScale),this.camera.isOrthographicCamera?this.camera.getWorldDirection(this.eye).negate():this.eye.copy(this.cameraPosition).sub(this.worldPosition).normalize(),super.updateMatrixWorld(e)}pointerHover(e){if(void 0===this.object||!0===this.dragging)return;null!==e&&i.setFromCamera(e,this.camera);const t=_(this._gizmo.picker[this.mode],i);this.axis=t?t.object.name:null}pointerDown(e){if(void 0!==this.object&&!0!==this.dragging&&(null==e||0===e.button)&&null!==this.axis){null!==e&&i.setFromCamera(e,this.camera);const t=_(this._plane,i,!0);t&&(this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),this._positionStart.copy(this.object.position),this._quaternionStart.copy(this.object.quaternion),this._scaleStart.copy(this.object.scale),this.object.matrixWorld.decompose(this.worldPositionStart,this.worldQuaternionStart,this._worldScaleStart),this.pointStart.copy(t.point).sub(this.worldPositionStart)),this.dragging=!0,u.mode=this.mode,this.dispatchEvent(u)}}pointerMove(e){const t=this.axis,n=this.mode,r=this.object;let u=this.space;if("scale"===n?u="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(u="world"),void 0===r||null===t||!1===this.dragging||null!==e&&-1!==e.button)return;null!==e&&i.setFromCamera(e,this.camera);const h=_(this._plane,i,!0);if(h){if(this.pointEnd.copy(h.point).sub(this.worldPositionStart),"translate"===n)this._offset.copy(this.pointEnd).sub(this.pointStart),"local"===u&&"XYZ"!==t&&this._offset.applyQuaternion(this._worldQuaternionInv),-1===t.indexOf("X")&&(this._offset.x=0),-1===t.indexOf("Y")&&(this._offset.y=0),-1===t.indexOf("Z")&&(this._offset.z=0),"local"===u&&"XYZ"!==t?this._offset.applyQuaternion(this._quaternionStart).divide(this._parentScale):this._offset.applyQuaternion(this._parentQuaternionInv).divide(this._parentScale),r.position.copy(this._offset).add(this._positionStart),this.translationSnap&&("local"===u&&(r.position.applyQuaternion(a.copy(this._quaternionStart).invert()),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.position.applyQuaternion(this._quaternionStart)),"world"===u&&(r.parent&&r.position.add(s.setFromMatrixPosition(r.parent.matrixWorld)),-1!==t.search("X")&&(r.position.x=Math.round(r.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(r.position.y=Math.round(r.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(r.position.z=Math.round(r.position.z/this.translationSnap)*this.translationSnap),r.parent&&r.position.sub(s.setFromMatrixPosition(r.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){let e=this.pointEnd.length()/this.pointStart.length();this.pointEnd.dot(this.pointStart)<0&&(e*=-1),o.set(e,e,e)}else s.copy(this.pointStart),o.copy(this.pointEnd),s.applyQuaternion(this._worldQuaternionInv),o.applyQuaternion(this._worldQuaternionInv),o.divide(s),-1===t.search("X")&&(o.x=1),-1===t.search("Y")&&(o.y=1),-1===t.search("Z")&&(o.z=1);r.scale.copy(this._scaleStart).multiply(o),this.scaleSnap&&(-1!==t.search("X")&&(r.scale.x=Math.round(r.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(r.scale.y=Math.round(r.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(r.scale.z=Math.round(r.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){this._offset.copy(this.pointEnd).sub(this.pointStart);const e=20/this.worldPosition.distanceTo(s.setFromMatrixPosition(this.camera.matrixWorld));let n=!1;"XYZE"===t?(this.rotationAxis.copy(this._offset).cross(this.eye).normalize(),this.rotationAngle=this._offset.dot(s.copy(this.rotationAxis).cross(this.eye))*e):"X"!==t&&"Y"!==t&&"Z"!==t||(this.rotationAxis.copy(c[t]),s.copy(c[t]),"local"===u&&s.applyQuaternion(this.worldQuaternion),s.cross(this.eye),0===s.length()?n=!0:this.rotationAngle=this._offset.dot(s.normalize())*e),("E"===t||n)&&(this.rotationAxis.copy(this.eye),this.rotationAngle=this.pointEnd.angleTo(this.pointStart),this._startNorm.copy(this.pointStart).normalize(),this._endNorm.copy(this.pointEnd).normalize(),this.rotationAngle*=this._endNorm.cross(this._startNorm).dot(this.eye)<0?1:-1),this.rotationSnap&&(this.rotationAngle=Math.round(this.rotationAngle/this.rotationSnap)*this.rotationSnap),"local"===u&&"E"!==t&&"XYZE"!==t?(r.quaternion.copy(this._quaternionStart),r.quaternion.multiply(a.setFromAxisAngle(this.rotationAxis,this.rotationAngle)).normalize()):(this.rotationAxis.applyQuaternion(this._parentQuaternionInv),r.quaternion.copy(a.setFromAxisAngle(this.rotationAxis,this.rotationAngle)),r.quaternion.multiply(this._quaternionStart).normalize())}this.dispatchEvent(l),this.dispatchEvent(d)}}pointerUp(e){null!==e&&0!==e.button||(this.dragging&&null!==this.axis&&(h.mode=this.mode,this.dispatchEvent(h)),this.dragging=!1,this.axis=null)}dispose(){this.domElement.removeEventListener("pointerdown",this._onPointerDown),this.domElement.removeEventListener("pointermove",this._onPointerHover),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.domElement.removeEventListener("pointerup",this._onPointerUp),this.traverse((function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()}))}attach(e){return this.object=e,this.visible=!0,this}detach(){return this.object=void 0,this.visible=!1,this.axis=null,this}reset(){this.enabled&&this.dragging&&(this.object.position.copy(this._positionStart),this.object.quaternion.copy(this._quaternionStart),this.object.scale.copy(this._scaleStart),this.dispatchEvent(l),this.dispatchEvent(d),this.pointStart.copy(this.pointEnd))}getRaycaster(){return i}getMode(){return this.mode}setMode(e){this.mode=e}setTranslationSnap(e){this.translationSnap=e}setRotationSnap(e){this.rotationSnap=e}setScaleSnap(e){this.scaleSnap=e}setSize(e){this.size=e}setSpace(e){this.space=e}}function f(e){if(this.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};{const t=this.domElement.getBoundingClientRect();return{x:(e.clientX-t.left)/t.width*2-1,y:-(e.clientY-t.top)/t.height*2+1,button:e.button}}}function m(e){if(this.enabled)switch(e.pointerType){case"mouse":case"pen":this.pointerHover(this._getPointer(e))}}function g(e){this.enabled&&(document.pointerLockElement||this.domElement.setPointerCapture(e.pointerId),this.domElement.addEventListener("pointermove",this._onPointerMove),this.pointerHover(this._getPointer(e)),this.pointerDown(this._getPointer(e)))}function A(e){this.enabled&&this.pointerMove(this._getPointer(e))}function y(e){this.enabled&&(this.domElement.releasePointerCapture(e.pointerId),this.domElement.removeEventListener("pointermove",this._onPointerMove),this.pointerUp(this._getPointer(e)))}function _(e,t,n){const r=t.intersectObject(e,!0);for(let e=0;e<r.length;e++)if(r[e].object.visible||n)return r[e];return!1}const v=new r.Euler,b=new r.Vector3(0,1,0),x=new r.Vector3(0,0,0),w=new r.Matrix4,E=new r.Quaternion,T=new r.Quaternion,S=new r.Vector3,M=new r.Matrix4,C=new r.Vector3(1,0,0),I=new r.Vector3(0,1,0),R=new r.Vector3(0,0,1),B=new r.Vector3,P=new r.Vector3,D=new r.Vector3;class O extends r.Object3D{constructor(){super(),this.isTransformControlsGizmo=!0,this.type="TransformControlsGizmo";const e=new r.MeshBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),t=new r.LineBasicMaterial({depthTest:!1,depthWrite:!1,fog:!1,toneMapped:!1,transparent:!0}),n=e.clone();n.opacity=.15;const i=t.clone();i.opacity=.5;const s=e.clone();s.color.setHex(16711680);const o=e.clone();o.color.setHex(65280);const a=e.clone();a.color.setHex(255);const c=e.clone();c.color.setHex(16711680),c.opacity=.5;const l=e.clone();l.color.setHex(65280),l.opacity=.5;const u=e.clone();u.color.setHex(255),u.opacity=.5;const h=e.clone();h.opacity=.25;const d=e.clone();d.color.setHex(16776960),d.opacity=.25;e.clone().color.setHex(16776960);const p=e.clone();p.color.setHex(7895160);const f=new r.CylinderGeometry(0,.04,.1,12);f.translate(0,.05,0);const m=new r.BoxGeometry(.08,.08,.08);m.translate(0,.04,0);const g=new r.BufferGeometry;g.setAttribute("position",new r.Float32BufferAttribute([0,0,0,1,0,0],3));const A=new r.CylinderGeometry(.0075,.0075,.5,3);function y(e,t){const n=new r.TorusGeometry(e,.0075,3,64,t*Math.PI*2);return n.rotateY(Math.PI/2),n.rotateX(Math.PI/2),n}A.translate(0,.25,0);const _={X:[[new r.Mesh(f,s),[.5,0,0],[0,0,-Math.PI/2]],[new r.Mesh(f,s),[-.5,0,0],[0,0,Math.PI/2]],[new r.Mesh(A,s),[0,0,0],[0,0,-Math.PI/2]]],Y:[[new r.Mesh(f,o),[0,.5,0]],[new r.Mesh(f,o),[0,-.5,0],[Math.PI,0,0]],[new r.Mesh(A,o)]],Z:[[new r.Mesh(f,a),[0,0,.5],[Math.PI/2,0,0]],[new r.Mesh(f,a),[0,0,-.5],[-Math.PI/2,0,0]],[new r.Mesh(A,a),null,[Math.PI/2,0,0]]],XYZ:[[new r.Mesh(new r.OctahedronGeometry(.1,0),h.clone()),[0,0,0]]],XY:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),u.clone()),[.15,.15,0]]],YZ:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),c.clone()),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),l.clone()),[.15,0,.15],[-Math.PI/2,0,0]]]},v={X:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[0,.3,0]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XYZ:[[new r.Mesh(new r.OctahedronGeometry(.2,0),n)]],XY:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]]},b={START:[[new r.Mesh(new r.OctahedronGeometry(.01,2),i),null,null,null,"helper"]],END:[[new r.Mesh(new r.OctahedronGeometry(.01,2),i),null,null,null,"helper"]],DELTA:[[new r.Line(function(){const e=new r.BufferGeometry;return e.setAttribute("position",new r.Float32BufferAttribute([0,0,0,1,1,1],3)),e}(),i),null,null,null,"helper"]],X:[[new r.Line(g,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new r.Line(g,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new r.Line(g,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},x={XYZE:[[new r.Mesh(y(.5,1),p),null,[0,Math.PI/2,0]]],X:[[new r.Mesh(y(.5,.5),s)]],Y:[[new r.Mesh(y(.5,.5),o),null,[0,0,-Math.PI/2]]],Z:[[new r.Mesh(y(.5,.5),a),null,[0,Math.PI/2,0]]],E:[[new r.Mesh(y(.75,1),d),null,[0,Math.PI/2,0]]]},w={AXIS:[[new r.Line(g,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},E={XYZE:[[new r.Mesh(new r.SphereGeometry(.25,10,8),n)]],X:[[new r.Mesh(new r.TorusGeometry(.5,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new r.Mesh(new r.TorusGeometry(.5,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new r.Mesh(new r.TorusGeometry(.5,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new r.Mesh(new r.TorusGeometry(.75,.1,2,24),n)]]},T={X:[[new r.Mesh(m,s),[.5,0,0],[0,0,-Math.PI/2]],[new r.Mesh(A,s),[0,0,0],[0,0,-Math.PI/2]],[new r.Mesh(m,s),[-.5,0,0],[0,0,Math.PI/2]]],Y:[[new r.Mesh(m,o),[0,.5,0]],[new r.Mesh(A,o)],[new r.Mesh(m,o),[0,-.5,0],[0,0,Math.PI]]],Z:[[new r.Mesh(m,a),[0,0,.5],[Math.PI/2,0,0]],[new r.Mesh(A,a),[0,0,0],[Math.PI/2,0,0]],[new r.Mesh(m,a),[0,0,-.5],[-Math.PI/2,0,0]]],XY:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),u),[.15,.15,0]]],YZ:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),c),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r.Mesh(new r.BoxGeometry(.15,.15,.01),l),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new r.Mesh(new r.BoxGeometry(.1,.1,.1),h.clone())]]},S={X:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[.3,0,0],[0,0,-Math.PI/2]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[-.3,0,0],[0,0,Math.PI/2]]],Y:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[0,.3,0]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[0,-.3,0],[0,0,Math.PI]]],Z:[[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[0,0,.3],[Math.PI/2,0,0]],[new r.Mesh(new r.CylinderGeometry(.2,0,.6,4),n),[0,0,-.3],[-Math.PI/2,0,0]]],XY:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),n),[.15,.15,0]]],YZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),n),[0,.15,.15],[0,Math.PI/2,0]]],XZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.01),n),[.15,0,.15],[-Math.PI/2,0,0]]],XYZ:[[new r.Mesh(new r.BoxGeometry(.2,.2,.2),n),[0,0,0]]]},M={X:[[new r.Line(g,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new r.Line(g,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new r.Line(g,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]};function C(e){const t=new r.Object3D;for(const n in e)for(let r=e[n].length;r--;){const i=e[n][r][0].clone(),s=e[n][r][1],o=e[n][r][2],a=e[n][r][3],c=e[n][r][4];i.name=n,i.tag=c,s&&i.position.set(s[0],s[1],s[2]),o&&i.rotation.set(o[0],o[1],o[2]),a&&i.scale.set(a[0],a[1],a[2]),i.updateMatrix();const l=i.geometry.clone();l.applyMatrix4(i.matrix),i.geometry=l,i.renderOrder=1/0,i.position.set(0,0,0),i.rotation.set(0,0,0),i.scale.set(1,1,1),t.add(i)}return t}this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=C(_)),this.add(this.gizmo.rotate=C(x)),this.add(this.gizmo.scale=C(T)),this.add(this.picker.translate=C(v)),this.add(this.picker.rotate=C(E)),this.add(this.picker.scale=C(S)),this.add(this.helper.translate=C(b)),this.add(this.helper.rotate=C(w)),this.add(this.helper.scale=C(M)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1}updateMatrixWorld(e){const t="local"===("scale"===this.mode?"local":this.space)?this.worldQuaternion:T;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;let n=[];n=n.concat(this.picker[this.mode].children),n=n.concat(this.gizmo[this.mode].children),n=n.concat(this.helper[this.mode].children);for(let e=0;e<n.length;e++){const r=n[e];let i;if(r.visible=!0,r.rotation.set(0,0,0),r.position.copy(this.worldPosition),i=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),r.scale.set(1,1,1).multiplyScalar(i*this.size/4),"helper"!==r.tag){if(r.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){const e=.99,n=.2;"X"===r.name&&Math.abs(b.copy(C).applyQuaternion(t).dot(this.eye))>e&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"Y"===r.name&&Math.abs(b.copy(I).applyQuaternion(t).dot(this.eye))>e&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"Z"===r.name&&Math.abs(b.copy(R).applyQuaternion(t).dot(this.eye))>e&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"XY"===r.name&&Math.abs(b.copy(R).applyQuaternion(t).dot(this.eye))<n&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"YZ"===r.name&&Math.abs(b.copy(C).applyQuaternion(t).dot(this.eye))<n&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1),"XZ"===r.name&&Math.abs(b.copy(I).applyQuaternion(t).dot(this.eye))<n&&(r.scale.set(1e-10,1e-10,1e-10),r.visible=!1)}else"rotate"===this.mode&&(E.copy(t),b.copy(this.eye).applyQuaternion(a.copy(t).invert()),-1!==r.name.search("E")&&r.quaternion.setFromRotationMatrix(w.lookAt(this.eye,x,I)),"X"===r.name&&(a.setFromAxisAngle(C,Math.atan2(-b.y,b.z)),a.multiplyQuaternions(E,a),r.quaternion.copy(a)),"Y"===r.name&&(a.setFromAxisAngle(I,Math.atan2(b.x,b.z)),a.multiplyQuaternions(E,a),r.quaternion.copy(a)),"Z"===r.name&&(a.setFromAxisAngle(R,Math.atan2(b.y,b.x)),a.multiplyQuaternions(E,a),r.quaternion.copy(a)));r.visible=r.visible&&(-1===r.name.indexOf("X")||this.showX),r.visible=r.visible&&(-1===r.name.indexOf("Y")||this.showY),r.visible=r.visible&&(-1===r.name.indexOf("Z")||this.showZ),r.visible=r.visible&&(-1===r.name.indexOf("E")||this.showX&&this.showY&&this.showZ),r.material._color=r.material._color||r.material.color.clone(),r.material._opacity=r.material._opacity||r.material.opacity,r.material.color.copy(r.material._color),r.material.opacity=r.material._opacity,this.enabled&&this.axis&&(r.name===this.axis||this.axis.split("").some((function(e){return r.name===e})))&&(r.material.color.setHex(16776960),r.material.opacity=1)}else r.visible=!1,"AXIS"===r.name?(r.visible=!!this.axis,"X"===this.axis&&(a.setFromEuler(v.set(0,0,0)),r.quaternion.copy(t).multiply(a),Math.abs(b.copy(C).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),"Y"===this.axis&&(a.setFromEuler(v.set(0,0,Math.PI/2)),r.quaternion.copy(t).multiply(a),Math.abs(b.copy(I).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),"Z"===this.axis&&(a.setFromEuler(v.set(0,Math.PI/2,0)),r.quaternion.copy(t).multiply(a),Math.abs(b.copy(R).applyQuaternion(t).dot(this.eye))>.9&&(r.visible=!1)),"XYZE"===this.axis&&(a.setFromEuler(v.set(0,Math.PI/2,0)),b.copy(this.rotationAxis),r.quaternion.setFromRotationMatrix(w.lookAt(x,b,I)),r.quaternion.multiply(a),r.visible=this.dragging),"E"===this.axis&&(r.visible=!1)):"START"===r.name?(r.position.copy(this.worldPositionStart),r.visible=this.dragging):"END"===r.name?(r.position.copy(this.worldPosition),r.visible=this.dragging):"DELTA"===r.name?(r.position.copy(this.worldPositionStart),r.quaternion.copy(this.worldQuaternionStart),s.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),s.applyQuaternion(this.worldQuaternionStart.clone().invert()),r.scale.copy(s),r.visible=this.dragging):(r.quaternion.copy(t),this.dragging?r.position.copy(this.worldPositionStart):r.position.copy(this.worldPosition),this.axis&&(r.visible=-1!==this.axis.search(r.name)))}super.updateMatrixWorld(e)}}class L extends r.Mesh{constructor(){super(new r.PlaneGeometry(1e5,1e5,2,2),new r.MeshBasicMaterial({visible:!1,wireframe:!0,side:r.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),this.isTransformControlsPlane=!0,this.type="TransformControlsPlane"}updateMatrixWorld(e){let t=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(t="local"),B.copy(C).applyQuaternion("local"===t?this.worldQuaternion:T),P.copy(I).applyQuaternion("local"===t?this.worldQuaternion:T),D.copy(R).applyQuaternion("local"===t?this.worldQuaternion:T),b.copy(P),this.mode){case"translate":case"scale":switch(this.axis){case"X":b.copy(this.eye).cross(B),S.copy(B).cross(b);break;case"Y":b.copy(this.eye).cross(P),S.copy(P).cross(b);break;case"Z":b.copy(this.eye).cross(D),S.copy(D).cross(b);break;case"XY":S.copy(D);break;case"YZ":S.copy(B);break;case"XZ":b.copy(D),S.copy(P);break;case"XYZ":case"E":S.set(0,0,0)}break;default:S.set(0,0,0)}0===S.length()?this.quaternion.copy(this.cameraQuaternion):(M.lookAt(s.set(0,0,0),S,b),this.quaternion.setFromRotationMatrix(M)),super.updateMatrixWorld(e)}}},3950:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RoomEnvironment:()=>i});var r=n(9437);class i extends r.Scene{constructor(e=null){super();const t=new r.BoxGeometry;t.deleteAttribute("uv");const n=new r.MeshStandardMaterial({side:r.BackSide}),i=new r.MeshStandardMaterial,o=new r.PointLight(16777215,900,28,2);o.position.set(.418,16.199,.3),this.add(o);const a=new r.Mesh(t,n);a.position.set(-.757,13.219,.717),a.scale.set(31.713,28.305,28.591),this.add(a);const c=new r.Mesh(t,i);c.position.set(-10.906,2.009,1.846),c.rotation.set(0,-.195,0),c.scale.set(2.328,7.905,4.651),this.add(c);const l=new r.Mesh(t,i);l.position.set(-5.607,-.754,-.758),l.rotation.set(0,.994,0),l.scale.set(1.97,1.534,3.955),this.add(l);const u=new r.Mesh(t,i);u.position.set(6.167,.857,7.803),u.rotation.set(0,.561,0),u.scale.set(3.927,6.285,3.687),this.add(u);const h=new r.Mesh(t,i);h.position.set(-2.017,.018,6.124),h.rotation.set(0,.333,0),h.scale.set(2.002,4.566,2.064),this.add(h);const d=new r.Mesh(t,i);d.position.set(2.291,-.756,-2.621),d.rotation.set(0,-.286,0),d.scale.set(1.546,1.552,1.496),this.add(d);const p=new r.Mesh(t,i);p.position.set(-2.193,-.369,-5.547),p.rotation.set(0,.516,0),p.scale.set(3.875,3.487,2.986),this.add(p);const f=new r.Mesh(t,s(50));f.position.set(-16.116,14.37,8.208),f.scale.set(.1,2.428,2.739),this.add(f);const m=new r.Mesh(t,s(50));m.position.set(-16.109,18.021,-8.207),m.scale.set(.1,2.425,2.751),this.add(m);const g=new r.Mesh(t,s(17));g.position.set(14.904,12.198,-1.832),g.scale.set(.15,4.265,6.331),this.add(g);const A=new r.Mesh(t,s(43));A.position.set(-.462,8.89,14.52),A.scale.set(4.38,5.441,.088),this.add(A);const y=new r.Mesh(t,s(20));y.position.set(3.235,11.486,-12.541),y.scale.set(2.5,2,.1),this.add(y);const _=new r.Mesh(t,s(100));_.position.set(0,20,0),_.scale.set(1,.1,1),this.add(_)}dispose(){const e=new Set;this.traverse((t=>{t.isMesh&&(e.add(t.geometry),e.add(t.material))}));for(const t of e)t.dispose()}}function s(e){const t=new r.MeshBasicMaterial;return t.color.setScalar(e),t}},5006:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GLTFExporter:()=>u});var r=n(9437);let i,s,o,a;function c(e,t=1/0,n=null){s||(s=new r.PlaneGeometry(2,2,1,1)),o||(o=new r.ShaderMaterial({uniforms:{blitTexture:new r.Uniform(e)},vertexShader:"\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main(){\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = vec4(position.xy * 1.0,0.,.999999);\n\t\t\t}",fragmentShader:"\n\t\t\tuniform sampler2D blitTexture; \n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main(){ \n\t\t\t\tgl_FragColor = vec4(vUv.xy, 0, 1);\n\t\t\t\t\n\t\t\t\t#ifdef IS_SRGB\n\t\t\t\tgl_FragColor = LinearTosRGB( texture2D( blitTexture, vUv) );\n\t\t\t\t#else\n\t\t\t\tgl_FragColor = texture2D( blitTexture, vUv);\n\t\t\t\t#endif\n\t\t\t}"})),o.uniforms.blitTexture.value=e,o.defines.IS_SRGB=e.colorSpace==r.SRGBColorSpace,o.needsUpdate=!0,a||(a=new r.Mesh(s,o),a.frustumCulled=!1);const c=new r.PerspectiveCamera,l=new r.Scene;l.add(a),null===n&&(n=i=new r.WebGLRenderer({antialias:!1}));const u=Math.min(e.image.width,t),h=Math.min(e.image.height,t);n.setSize(u,h),n.clear(),n.render(l,c);const d=document.createElement("canvas"),p=d.getContext("2d");d.width=u,d.height=h,p.drawImage(n.domElement,0,0,u,h);const f=new r.CanvasTexture(d);return f.minFilter=e.minFilter,f.magFilter=e.magFilter,f.wrapS=e.wrapS,f.wrapT=e.wrapT,f.name=e.name,i&&(i.forceContextLoss(),i.dispose(),i=null),f}const l={POSITION:["byte","byte normalized","unsigned byte","unsigned byte normalized","short","short normalized","unsigned short","unsigned short normalized"],NORMAL:["byte normalized","short normalized"],TANGENT:["byte normalized","short normalized"],TEXCOORD:["byte","byte normalized","unsigned byte","short","short normalized","unsigned short"]};class u{constructor(){this.pluginCallbacks=[],this.register((function(e){return new Q(e)})),this.register((function(e){return new H(e)})),this.register((function(e){return new K(e)})),this.register((function(e){return new Y(e)})),this.register((function(e){return new J(e)})),this.register((function(e){return new $(e)})),this.register((function(e){return new W(e)})),this.register((function(e){return new q(e)})),this.register((function(e){return new X(e)})),this.register((function(e){return new Z(e)})),this.register((function(e){return new ee(e)})),this.register((function(e){return new te(e)})),this.register((function(e){return new ne(e)})),this.register((function(e){return new re(e)}))}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){const i=new V,s=[];for(let e=0,t=this.pluginCallbacks.length;e<t;e++)s.push(this.pluginCallbacks[e](i));i.setPlugins(s),i.write(e,t,r).catch(n)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,r,i,t)}))}}const h=0,d=1,p=2,f=3,m=4,g=5120,A=5121,y=5122,_=5123,v=5124,b=5125,x=5126,w=34962,E=34963,T=9728,S=9729,M=9984,C=9985,I=9986,R=9987,B=33071,P=33648,D=10497,O="KHR_mesh_quantization",L={};L[r.NearestFilter]=T,L[r.NearestMipmapNearestFilter]=M,L[r.NearestMipmapLinearFilter]=I,L[r.LinearFilter]=S,L[r.LinearMipmapNearestFilter]=C,L[r.LinearMipmapLinearFilter]=R,L[r.ClampToEdgeWrapping]=B,L[r.RepeatWrapping]=D,L[r.MirroredRepeatWrapping]=P;const N={scale:"scale",position:"translation",quaternion:"rotation",morphTargetInfluences:"weights"},F=new r.Color;function U(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function k(e){return 4*Math.ceil(e/4)}function z(e,t=0){const n=k(e.byteLength);if(n!==e.byteLength){const r=new Uint8Array(n);if(r.set(new Uint8Array(e)),0!==t)for(let i=e.byteLength;i<n;i++)r[i]=t;return r.buffer}return e}function G(){return"undefined"==typeof document&&"undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(1,1):document.createElement("canvas")}function j(e,t){if(void 0!==e.toBlob)return new Promise((n=>e.toBlob(n,t)));let n;return"image/jpeg"===t?n=.92:"image/webp"===t&&(n=.8),e.convertToBlob({type:t,quality:n})}class V{constructor(){this.plugins=[],this.options={},this.pending=[],this.buffers=[],this.byteOffset=0,this.buffers=[],this.nodeMap=new Map,this.skins=[],this.extensionsUsed={},this.extensionsRequired={},this.uids=new Map,this.uid=0,this.json={asset:{version:"2.0",generator:"THREE.GLTFExporter r"+r.REVISION}},this.cache={meshes:new Map,attributes:new Map,attributesNormalized:new Map,materials:new Map,textures:new Map,images:new Map}}setPlugins(e){this.plugins=e}async write(e,t,n={}){this.options=Object.assign({binary:!1,trs:!1,onlyVisible:!0,maxTextureSize:1/0,animations:[],includeCustomExtensions:!1},n),this.options.animations.length>0&&(this.options.trs=!0),this.processInput(e),await Promise.all(this.pending);const r=this,i=r.buffers,s=r.json;n=r.options;const o=r.extensionsUsed,a=r.extensionsRequired,c=new Blob(i,{type:"application/octet-stream"}),l=Object.keys(o),u=Object.keys(a);if(l.length>0&&(s.extensionsUsed=l),u.length>0&&(s.extensionsRequired=u),s.buffers&&s.buffers.length>0&&(s.buffers[0].byteLength=c.size),!0===n.binary){const e=new FileReader;e.readAsArrayBuffer(c),e.onloadend=function(){const n=z(e.result),r=new DataView(new ArrayBuffer(8));r.setUint32(0,n.byteLength,!0),r.setUint32(4,5130562,!0);const i=z((o=JSON.stringify(s),(new TextEncoder).encode(o).buffer),32);var o;const a=new DataView(new ArrayBuffer(8));a.setUint32(0,i.byteLength,!0),a.setUint32(4,1313821514,!0);const c=new ArrayBuffer(12),l=new DataView(c);l.setUint32(0,1179937895,!0),l.setUint32(4,2,!0);const u=12+a.byteLength+i.byteLength+r.byteLength+n.byteLength;l.setUint32(8,u,!0);const h=new Blob([c,a,i,r,n],{type:"application/octet-stream"}),d=new FileReader;d.readAsArrayBuffer(h),d.onloadend=function(){t(d.result)}}}else if(s.buffers&&s.buffers.length>0){const e=new FileReader;e.readAsDataURL(c),e.onloadend=function(){const n=e.result;s.buffers[0].uri=n,t(s)}}else t(s)}serializeUserData(e,t){if(0===Object.keys(e.userData).length)return;const n=this.options,r=this.extensionsUsed;try{const i=JSON.parse(JSON.stringify(e.userData));if(n.includeCustomExtensions&&i.gltfExtensions){void 0===t.extensions&&(t.extensions={});for(const e in i.gltfExtensions)t.extensions[e]=i.gltfExtensions[e],r[e]=!0;delete i.gltfExtensions}Object.keys(i).length>0&&(t.extras=i)}catch(t){console.warn("THREE.GLTFExporter: userData of '"+e.name+"' won't be serialized because of JSON.stringify error - "+t.message)}}getUID(e,t=!1){if(!1===this.uids.has(e)){const t=new Map;t.set(!0,this.uid++),t.set(!1,this.uid++),this.uids.set(e,t)}return this.uids.get(e).get(t)}isNormalizedNormalAttribute(e){if(this.cache.attributesNormalized.has(e))return!1;const t=new r.Vector3;for(let n=0,r=e.count;n<r;n++)if(Math.abs(t.fromBufferAttribute(e,n).length()-1)>5e-4)return!1;return!0}createNormalizedNormalAttribute(e){const t=this.cache;if(t.attributesNormalized.has(e))return t.attributesNormalized.get(e);const n=e.clone(),i=new r.Vector3;for(let e=0,t=n.count;e<t;e++)i.fromBufferAttribute(n,e),0===i.x&&0===i.y&&0===i.z?i.setX(1):i.normalize(),n.setXYZ(e,i.x,i.y,i.z);return t.attributesNormalized.set(e,n),n}applyTextureTransform(e,t){let n=!1;const r={};0===t.offset.x&&0===t.offset.y||(r.offset=t.offset.toArray(),n=!0),0!==t.rotation&&(r.rotation=t.rotation,n=!0),1===t.repeat.x&&1===t.repeat.y||(r.scale=t.repeat.toArray(),n=!0),n&&(e.extensions=e.extensions||{},e.extensions.KHR_texture_transform=r,this.extensionsUsed.KHR_texture_transform=!0)}buildMetalRoughTexture(e,t){if(e===t)return e;function n(e){return e.colorSpace===r.SRGBColorSpace?function(e){return e<.04045?.0773993808*e:Math.pow(.9478672986*e+.0521327014,2.4)}:function(e){return e}}console.warn("THREE.GLTFExporter: Merged metalnessMap and roughnessMap textures."),e instanceof r.CompressedTexture&&(e=c(e)),t instanceof r.CompressedTexture&&(t=c(t));const i=e?e.image:null,s=t?t.image:null,o=Math.max(i?i.width:0,s?s.width:0),a=Math.max(i?i.height:0,s?s.height:0),l=G();l.width=o,l.height=a;const u=l.getContext("2d");u.fillStyle="#00ffff",u.fillRect(0,0,o,a);const h=u.getImageData(0,0,o,a);if(i){u.drawImage(i,0,0,o,a);const t=n(e),r=u.getImageData(0,0,o,a).data;for(let e=2;e<r.length;e+=4)h.data[e]=256*t(r[e]/256)}if(s){u.drawImage(s,0,0,o,a);const e=n(t),r=u.getImageData(0,0,o,a).data;for(let t=1;t<r.length;t+=4)h.data[t]=256*e(r[t]/256)}u.putImageData(h,0,0);const d=(e||t).clone();return d.source=new r.Source(l),d.colorSpace=r.NoColorSpace,d.channel=(e||t).channel,e&&t&&e.channel!==t.channel&&console.warn("THREE.GLTFExporter: UV channels for metalnessMap and roughnessMap textures must match."),d}processBuffer(e){const t=this.json,n=this.buffers;return t.buffers||(t.buffers=[{byteLength:0}]),n.push(e),0}processBufferView(e,t,n,i,s){const o=this.json;let a;switch(o.bufferViews||(o.bufferViews=[]),t){case g:case A:a=1;break;case y:case _:a=2;break;default:a=4}let c=e.itemSize*a;s===w&&(c=4*Math.ceil(c/4));const l=k(i*c),u=new DataView(new ArrayBuffer(l));let h=0;for(let s=n;s<n+i;s++){for(let n=0;n<e.itemSize;n++){let i;e.itemSize>4?i=e.array[s*e.itemSize+n]:(0===n?i=e.getX(s):1===n?i=e.getY(s):2===n?i=e.getZ(s):3===n&&(i=e.getW(s)),!0===e.normalized&&(i=r.MathUtils.normalize(i,e.array))),t===x?u.setFloat32(h,i,!0):t===v?u.setInt32(h,i,!0):t===b?u.setUint32(h,i,!0):t===y?u.setInt16(h,i,!0):t===_?u.setUint16(h,i,!0):t===g?u.setInt8(h,i):t===A&&u.setUint8(h,i),h+=a}h%c!==0&&(h+=c-h%c)}const d={buffer:this.processBuffer(u.buffer),byteOffset:this.byteOffset,byteLength:l};void 0!==s&&(d.target=s),s===w&&(d.byteStride=c),this.byteOffset+=l,o.bufferViews.push(d);return{id:o.bufferViews.length-1,byteLength:0}}processBufferViewImage(e){const t=this,n=t.json;return n.bufferViews||(n.bufferViews=[]),new Promise((function(r){const i=new FileReader;i.readAsArrayBuffer(e),i.onloadend=function(){const e=z(i.result),s={buffer:t.processBuffer(e),byteOffset:t.byteOffset,byteLength:e.byteLength};t.byteOffset+=e.byteLength,r(n.bufferViews.push(s)-1)}}))}processAccessor(e,t,n,i){const s=this.json;let o;if(e.array.constructor===Float32Array)o=x;else if(e.array.constructor===Int32Array)o=v;else if(e.array.constructor===Uint32Array)o=b;else if(e.array.constructor===Int16Array)o=y;else if(e.array.constructor===Uint16Array)o=_;else if(e.array.constructor===Int8Array)o=g;else{if(e.array.constructor!==Uint8Array)throw new Error("THREE.GLTFExporter: Unsupported bufferAttribute component type: "+e.array.constructor.name);o=A}if(void 0===n&&(n=0),void 0!==i&&i!==1/0||(i=e.count),0===i)return null;const a=function(e,t,n){const i={min:new Array(e.itemSize).fill(Number.POSITIVE_INFINITY),max:new Array(e.itemSize).fill(Number.NEGATIVE_INFINITY)};for(let s=t;s<t+n;s++)for(let t=0;t<e.itemSize;t++){let n;e.itemSize>4?n=e.array[s*e.itemSize+t]:(0===t?n=e.getX(s):1===t?n=e.getY(s):2===t?n=e.getZ(s):3===t&&(n=e.getW(s)),!0===e.normalized&&(n=r.MathUtils.normalize(n,e.array))),i.min[t]=Math.min(i.min[t],n),i.max[t]=Math.max(i.max[t],n)}return i}(e,n,i);let c;void 0!==t&&(c=e===t.index?E:w);const l=this.processBufferView(e,o,n,i,c),u={bufferView:l.id,byteOffset:l.byteOffset,componentType:o,count:i,max:a.max,min:a.min,type:{1:"SCALAR",2:"VEC2",3:"VEC3",4:"VEC4",9:"MAT3",16:"MAT4"}[e.itemSize]};return!0===e.normalized&&(u.normalized=!0),s.accessors||(s.accessors=[]),s.accessors.push(u)-1}processImage(e,t,n,i="image/png"){if(null!==e){const s=this,o=s.cache,a=s.json,c=s.options,l=s.pending;o.images.has(e)||o.images.set(e,{});const u=o.images.get(e),h=i+":flipY/"+n.toString();if(void 0!==u[h])return u[h];a.images||(a.images=[]);const d={mimeType:i},p=G();p.width=Math.min(e.width,c.maxTextureSize),p.height=Math.min(e.height,c.maxTextureSize);const f=p.getContext("2d");if(!0===n&&(f.translate(0,p.height),f.scale(1,-1)),void 0!==e.data){t!==r.RGBAFormat&&console.error("GLTFExporter: Only RGBAFormat is supported.",t),(e.width>c.maxTextureSize||e.height>c.maxTextureSize)&&console.warn("GLTFExporter: Image size is bigger than maxTextureSize",e);const n=new Uint8ClampedArray(e.height*e.width*4);for(let t=0;t<n.length;t+=4)n[t+0]=e.data[t+0],n[t+1]=e.data[t+1],n[t+2]=e.data[t+2],n[t+3]=e.data[t+3];f.putImageData(new ImageData(n,e.width,e.height),0,0)}else{if(!("undefined"!=typeof HTMLImageElement&&e instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&e instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&e instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&e instanceof OffscreenCanvas))throw new Error("THREE.GLTFExporter: Invalid image type. Use HTMLImageElement, HTMLCanvasElement, ImageBitmap or OffscreenCanvas.");f.drawImage(e,0,0,p.width,p.height)}!0===c.binary?l.push(j(p,i).then((e=>s.processBufferViewImage(e))).then((e=>{d.bufferView=e}))):void 0!==p.toDataURL?d.uri=p.toDataURL(i):l.push(j(p,i).then((e=>(new FileReader).readAsDataURL(e))).then((e=>{d.uri=e})));const m=a.images.push(d)-1;return u[h]=m,m}throw new Error("THREE.GLTFExporter: No valid image data found. Unable to process texture.")}processSampler(e){const t=this.json;t.samplers||(t.samplers=[]);const n={magFilter:L[e.magFilter],minFilter:L[e.minFilter],wrapS:L[e.wrapS],wrapT:L[e.wrapT]};return t.samplers.push(n)-1}processTexture(e){const t=this.options,n=this.cache,i=this.json;if(n.textures.has(e))return n.textures.get(e);i.textures||(i.textures=[]),e instanceof r.CompressedTexture&&(e=c(e,t.maxTextureSize));let s=e.userData.mimeType;"image/webp"===s&&(s="image/png");const o={sampler:this.processSampler(e),source:this.processImage(e.image,e.format,e.flipY,s)};e.name&&(o.name=e.name),this._invokeAll((function(t){t.writeTexture&&t.writeTexture(e,o)}));const a=i.textures.push(o)-1;return n.textures.set(e,a),a}processMaterial(e){const t=this.cache,n=this.json;if(t.materials.has(e))return t.materials.get(e);if(e.isShaderMaterial)return console.warn("GLTFExporter: THREE.ShaderMaterial not supported."),null;n.materials||(n.materials=[]);const i={pbrMetallicRoughness:{}};!0!==e.isMeshStandardMaterial&&!0!==e.isMeshBasicMaterial&&console.warn("GLTFExporter: Use MeshStandardMaterial or MeshBasicMaterial for best results.");const s=e.color.toArray().concat([e.opacity]);if(U(s,[1,1,1,1])||(i.pbrMetallicRoughness.baseColorFactor=s),e.isMeshStandardMaterial?(i.pbrMetallicRoughness.metallicFactor=e.metalness,i.pbrMetallicRoughness.roughnessFactor=e.roughness):(i.pbrMetallicRoughness.metallicFactor=.5,i.pbrMetallicRoughness.roughnessFactor=.5),e.metalnessMap||e.roughnessMap){const t=this.buildMetalRoughTexture(e.metalnessMap,e.roughnessMap),n={index:this.processTexture(t),channel:t.channel};this.applyTextureTransform(n,t),i.pbrMetallicRoughness.metallicRoughnessTexture=n}if(e.map){const t={index:this.processTexture(e.map),texCoord:e.map.channel};this.applyTextureTransform(t,e.map),i.pbrMetallicRoughness.baseColorTexture=t}if(e.emissive){const t=e.emissive;if(Math.max(t.r,t.g,t.b)>0&&(i.emissiveFactor=e.emissive.toArray()),e.emissiveMap){const t={index:this.processTexture(e.emissiveMap),texCoord:e.emissiveMap.channel};this.applyTextureTransform(t,e.emissiveMap),i.emissiveTexture=t}}if(e.normalMap){const t={index:this.processTexture(e.normalMap),texCoord:e.normalMap.channel};e.normalScale&&1!==e.normalScale.x&&(t.scale=e.normalScale.x),this.applyTextureTransform(t,e.normalMap),i.normalTexture=t}if(e.aoMap){const t={index:this.processTexture(e.aoMap),texCoord:e.aoMap.channel};1!==e.aoMapIntensity&&(t.strength=e.aoMapIntensity),this.applyTextureTransform(t,e.aoMap),i.occlusionTexture=t}e.transparent?i.alphaMode="BLEND":e.alphaTest>0&&(i.alphaMode="MASK",i.alphaCutoff=e.alphaTest),e.side===r.DoubleSide&&(i.doubleSided=!0),""!==e.name&&(i.name=e.name),this.serializeUserData(e,i),this._invokeAll((function(t){t.writeMaterial&&t.writeMaterial(e,i)}));const o=n.materials.push(i)-1;return t.materials.set(e,o),o}processMesh(e){const t=this.cache,n=this.json,i=[e.geometry.uuid];if(Array.isArray(e.material))for(let t=0,n=e.material.length;t<n;t++)i.push(e.material[t].uuid);else i.push(e.material.uuid);const s=i.join(":");if(t.meshes.has(s))return t.meshes.get(s);const o=e.geometry;let a;a=e.isLineSegments?d:e.isLineLoop?p:e.isLine?f:e.isPoints?h:e.material.wireframe?d:m;const c={},l={},u=[],g=[],A={uv:"TEXCOORD_0",uv1:"TEXCOORD_1",uv2:"TEXCOORD_2",uv3:"TEXCOORD_3",color:"COLOR_0",skinWeight:"WEIGHTS_0",skinIndex:"JOINTS_0"},y=o.getAttribute("normal");void 0===y||this.isNormalizedNormalAttribute(y)||(console.warn("THREE.GLTFExporter: Creating normalized normal attribute from the non-normalized one."),o.setAttribute("normal",this.createNormalizedNormalAttribute(y)));let _=null;for(let e in o.attributes){if("morph"===e.slice(0,5))continue;const n=o.attributes[e];e=A[e]||e.toUpperCase();if(/^(POSITION|NORMAL|TANGENT|TEXCOORD_\d+|COLOR_\d+|JOINTS_\d+|WEIGHTS_\d+)$/.test(e)||(e="_"+e),t.attributes.has(this.getUID(n))){l[e]=t.attributes.get(this.getUID(n));continue}_=null;const i=n.array;"JOINTS_0"!==e||i instanceof Uint16Array||i instanceof Uint8Array||(console.warn('GLTFExporter: Attribute "skinIndex" converted to type UNSIGNED_SHORT.'),_=new r.BufferAttribute(new Uint16Array(i),n.itemSize,n.normalized));const s=this.processAccessor(_||n,o);null!==s&&(e.startsWith("_")||this.detectMeshQuantization(e,n),l[e]=s,t.attributes.set(this.getUID(n),s))}if(void 0!==y&&o.setAttribute("normal",y),0===Object.keys(l).length)return null;if(void 0!==e.morphTargetInfluences&&e.morphTargetInfluences.length>0){const n=[],r=[],i={};if(void 0!==e.morphTargetDictionary)for(const t in e.morphTargetDictionary)i[e.morphTargetDictionary[t]]=t;for(let s=0;s<e.morphTargetInfluences.length;++s){const a={};let c=!1;for(const e in o.morphAttributes){if("position"!==e&&"normal"!==e){c||(console.warn("GLTFExporter: Only POSITION and NORMAL morph are supported."),c=!0);continue}const n=o.morphAttributes[e][s],r=e.toUpperCase(),i=o.attributes[e];if(t.attributes.has(this.getUID(n,!0))){a[r]=t.attributes.get(this.getUID(n,!0));continue}const l=n.clone();if(!o.morphTargetsRelative)for(let e=0,t=n.count;e<t;e++)for(let t=0;t<n.itemSize;t++)0===t&&l.setX(e,n.getX(e)-i.getX(e)),1===t&&l.setY(e,n.getY(e)-i.getY(e)),2===t&&l.setZ(e,n.getZ(e)-i.getZ(e)),3===t&&l.setW(e,n.getW(e)-i.getW(e));a[r]=this.processAccessor(l,o),t.attributes.set(this.getUID(i,!0),a[r])}g.push(a),n.push(e.morphTargetInfluences[s]),void 0!==e.morphTargetDictionary&&r.push(i[s])}c.weights=n,r.length>0&&(c.extras={},c.extras.targetNames=r)}const v=Array.isArray(e.material);if(v&&0===o.groups.length)return null;let b=!1;if(v&&null===o.index){const e=[];for(let t=0,n=o.attributes.position.count;t<n;t++)e[t]=t;o.setIndex(e),b=!0}const x=v?e.material:[e.material],w=v?o.groups:[{materialIndex:0,start:void 0,count:void 0}];for(let e=0,n=w.length;e<n;e++){const n={mode:a,attributes:l};if(this.serializeUserData(o,n),g.length>0&&(n.targets=g),null!==o.index){let r=this.getUID(o.index);void 0===w[e].start&&void 0===w[e].count||(r+=":"+w[e].start+":"+w[e].count),t.attributes.has(r)?n.indices=t.attributes.get(r):(n.indices=this.processAccessor(o.index,o,w[e].start,w[e].count),t.attributes.set(r,n.indices)),null===n.indices&&delete n.indices}const r=this.processMaterial(x[w[e].materialIndex]);null!==r&&(n.material=r),u.push(n)}!0===b&&o.setIndex(null),c.primitives=u,n.meshes||(n.meshes=[]),this._invokeAll((function(t){t.writeMesh&&t.writeMesh(e,c)}));const E=n.meshes.push(c)-1;return t.meshes.set(s,E),E}detectMeshQuantization(e,t){if(this.extensionsUsed[O])return;let n;switch(t.array.constructor){case Int8Array:n="byte";break;case Uint8Array:n="unsigned byte";break;case Int16Array:n="short";break;case Uint16Array:n="unsigned short";break;default:return}t.normalized&&(n+=" normalized");const r=e.split("_",1)[0];l[r]&&l[r].includes(n)&&(this.extensionsUsed[O]=!0,this.extensionsRequired[O]=!0)}processCamera(e){const t=this.json;t.cameras||(t.cameras=[]);const n=e.isOrthographicCamera,i={type:n?"orthographic":"perspective"};return n?i.orthographic={xmag:2*e.right,ymag:2*e.top,zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near}:i.perspective={aspectRatio:e.aspect,yfov:r.MathUtils.degToRad(e.fov),zfar:e.far<=0?.001:e.far,znear:e.near<0?0:e.near},""!==e.name&&(i.name=e.type),t.cameras.push(i)-1}processAnimation(e,t){const n=this.json,i=this.nodeMap;n.animations||(n.animations=[]);const s=(e=u.Utils.mergeMorphTargetTracks(e.clone(),t)).tracks,o=[],a=[];for(let e=0;e<s.length;++e){const n=s[e],c=r.PropertyBinding.parseTrackName(n.name);let l=r.PropertyBinding.findNode(t,c.nodeName);const u=N[c.propertyName];if("bones"===c.objectName&&(l=!0===l.isSkinnedMesh?l.skeleton.getBoneByName(c.objectIndex):void 0),!l||!u)return console.warn('THREE.GLTFExporter: Could not export animation track "%s".',n.name),null;const h=1;let d,p=n.values.length/n.times.length;u===N.morphTargetInfluences&&(p/=l.morphTargetInfluences.length),!0===n.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline?(d="CUBICSPLINE",p/=3):d=n.getInterpolation()===r.InterpolateDiscrete?"STEP":"LINEAR",a.push({input:this.processAccessor(new r.BufferAttribute(n.times,h)),output:this.processAccessor(new r.BufferAttribute(n.values,p)),interpolation:d}),o.push({sampler:a.length-1,target:{node:i.get(l),path:u}})}return n.animations.push({name:e.name||"clip_"+n.animations.length,samplers:a,channels:o}),n.animations.length-1}processSkin(e){const t=this.json,n=this.nodeMap,i=t.nodes[n.get(e)],s=e.skeleton;if(void 0===s)return null;const o=e.skeleton.bones[0];if(void 0===o)return null;const a=[],c=new Float32Array(16*s.bones.length),l=new r.Matrix4;for(let t=0;t<s.bones.length;++t)a.push(n.get(s.bones[t])),l.copy(s.boneInverses[t]),l.multiply(e.bindMatrix).toArray(c,16*t);void 0===t.skins&&(t.skins=[]),t.skins.push({inverseBindMatrices:this.processAccessor(new r.BufferAttribute(c,16)),joints:a,skeleton:n.get(o)});return i.skin=t.skins.length-1}processNode(e){const t=this.json,n=this.options,r=this.nodeMap;t.nodes||(t.nodes=[]);const i={};if(n.trs){const t=e.quaternion.toArray(),n=e.position.toArray(),r=e.scale.toArray();U(t,[0,0,0,1])||(i.rotation=t),U(n,[0,0,0])||(i.translation=n),U(r,[1,1,1])||(i.scale=r)}else e.matrixAutoUpdate&&e.updateMatrix(),!1===U(e.matrix.elements,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])&&(i.matrix=e.matrix.elements);if(""!==e.name&&(i.name=String(e.name)),this.serializeUserData(e,i),e.isMesh||e.isLine||e.isPoints){const t=this.processMesh(e);null!==t&&(i.mesh=t)}else e.isCamera&&(i.camera=this.processCamera(e));if(e.isSkinnedMesh&&this.skins.push(e),e.children.length>0){const t=[];for(let r=0,i=e.children.length;r<i;r++){const i=e.children[r];if(i.visible||!1===n.onlyVisible){const e=this.processNode(i);null!==e&&t.push(e)}}t.length>0&&(i.children=t)}this._invokeAll((function(t){t.writeNode&&t.writeNode(e,i)}));const s=t.nodes.push(i)-1;return r.set(e,s),s}processScene(e){const t=this.json,n=this.options;t.scenes||(t.scenes=[],t.scene=0);const r={};""!==e.name&&(r.name=e.name),t.scenes.push(r);const i=[];for(let t=0,r=e.children.length;t<r;t++){const r=e.children[t];if(r.visible||!1===n.onlyVisible){const e=this.processNode(r);null!==e&&i.push(e)}}i.length>0&&(r.nodes=i),this.serializeUserData(e,r)}processObjects(e){const t=new r.Scene;t.name="AuxScene";for(let n=0;n<e.length;n++)t.children.push(e[n]);this.processScene(t)}processInput(e){const t=this.options;e=e instanceof Array?e:[e],this._invokeAll((function(t){t.beforeParse&&t.beforeParse(e)}));const n=[];for(let t=0;t<e.length;t++)e[t]instanceof r.Scene?this.processScene(e[t]):n.push(e[t]);n.length>0&&this.processObjects(n);for(let e=0;e<this.skins.length;++e)this.processSkin(this.skins[e]);for(let n=0;n<t.animations.length;++n)this.processAnimation(t.animations[n],e[0]);this._invokeAll((function(t){t.afterParse&&t.afterParse(e)}))}_invokeAll(e){for(let t=0,n=this.plugins.length;t<n;t++)e(this.plugins[t])}}class Q{constructor(e){this.writer=e,this.name="KHR_lights_punctual"}writeNode(e,t){if(!e.isLight)return;if(!e.isDirectionalLight&&!e.isPointLight&&!e.isSpotLight)return void console.warn("THREE.GLTFExporter: Only directional, point, and spot lights are supported.",e);const n=this.writer,r=n.json,i=n.extensionsUsed,s={};e.name&&(s.name=e.name),s.color=e.color.toArray(),s.intensity=e.intensity,e.isDirectionalLight?s.type="directional":e.isPointLight?(s.type="point",e.distance>0&&(s.range=e.distance)):e.isSpotLight&&(s.type="spot",e.distance>0&&(s.range=e.distance),s.spot={},s.spot.innerConeAngle=(1-e.penumbra)*e.angle,s.spot.outerConeAngle=e.angle),void 0!==e.decay&&2!==e.decay&&console.warn("THREE.GLTFExporter: Light decay may be lost. glTF is physically-based, and expects light.decay=2."),!e.target||e.target.parent===e&&0===e.target.position.x&&0===e.target.position.y&&-1===e.target.position.z||console.warn("THREE.GLTFExporter: Light direction may be lost. For best results, make light.target a child of the light with position 0,0,-1."),i[this.name]||(r.extensions=r.extensions||{},r.extensions[this.name]={lights:[]},i[this.name]=!0);const o=r.extensions[this.name].lights;o.push(s),t.extensions=t.extensions||{},t.extensions[this.name]={light:o.length-1}}}class H{constructor(e){this.writer=e,this.name="KHR_materials_unlit"}writeMaterial(e,t){if(!e.isMeshBasicMaterial)return;const n=this.writer.extensionsUsed;t.extensions=t.extensions||{},t.extensions[this.name]={},n[this.name]=!0,t.pbrMetallicRoughness.metallicFactor=0,t.pbrMetallicRoughness.roughnessFactor=.9}}class W{constructor(e){this.writer=e,this.name="KHR_materials_clearcoat"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.clearcoat)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.clearcoatFactor=e.clearcoat,e.clearcoatMap){const t={index:n.processTexture(e.clearcoatMap),texCoord:e.clearcoatMap.channel};n.applyTextureTransform(t,e.clearcoatMap),i.clearcoatTexture=t}if(i.clearcoatRoughnessFactor=e.clearcoatRoughness,e.clearcoatRoughnessMap){const t={index:n.processTexture(e.clearcoatRoughnessMap),texCoord:e.clearcoatRoughnessMap.channel};n.applyTextureTransform(t,e.clearcoatRoughnessMap),i.clearcoatRoughnessTexture=t}if(e.clearcoatNormalMap){const t={index:n.processTexture(e.clearcoatNormalMap),texCoord:e.clearcoatNormalMap.channel};1!==e.clearcoatNormalScale.x&&(t.scale=e.clearcoatNormalScale.x),n.applyTextureTransform(t,e.clearcoatNormalMap),i.clearcoatNormalTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class q{constructor(e){this.writer=e,this.name="KHR_materials_dispersion"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.dispersion)return;const n=this.writer.extensionsUsed,r={};r.dispersion=e.dispersion,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class X{constructor(e){this.writer=e,this.name="KHR_materials_iridescence"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.iridescence)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.iridescenceFactor=e.iridescence,e.iridescenceMap){const t={index:n.processTexture(e.iridescenceMap),texCoord:e.iridescenceMap.channel};n.applyTextureTransform(t,e.iridescenceMap),i.iridescenceTexture=t}if(i.iridescenceIor=e.iridescenceIOR,i.iridescenceThicknessMinimum=e.iridescenceThicknessRange[0],i.iridescenceThicknessMaximum=e.iridescenceThicknessRange[1],e.iridescenceThicknessMap){const t={index:n.processTexture(e.iridescenceThicknessMap),texCoord:e.iridescenceThicknessMap.channel};n.applyTextureTransform(t,e.iridescenceThicknessMap),i.iridescenceThicknessTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class K{constructor(e){this.writer=e,this.name="KHR_materials_transmission"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.transmissionFactor=e.transmission,e.transmissionMap){const t={index:n.processTexture(e.transmissionMap),texCoord:e.transmissionMap.channel};n.applyTextureTransform(t,e.transmissionMap),i.transmissionTexture=t}t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class Y{constructor(e){this.writer=e,this.name="KHR_materials_volume"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0===e.transmission)return;const n=this.writer,r=n.extensionsUsed,i={};if(i.thicknessFactor=e.thickness,e.thicknessMap){const t={index:n.processTexture(e.thicknessMap),texCoord:e.thicknessMap.channel};n.applyTextureTransform(t,e.thicknessMap),i.thicknessTexture=t}i.attenuationDistance=e.attenuationDistance,i.attenuationColor=e.attenuationColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class J{constructor(e){this.writer=e,this.name="KHR_materials_ior"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1.5===e.ior)return;const n=this.writer.extensionsUsed,r={};r.ior=e.ior,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class ${constructor(e){this.writer=e,this.name="KHR_materials_specular"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||1===e.specularIntensity&&e.specularColor.equals(F)&&!e.specularIntensityMap&&!e.specularColorMap)return;const n=this.writer,r=n.extensionsUsed,i={};if(e.specularIntensityMap){const t={index:n.processTexture(e.specularIntensityMap),texCoord:e.specularIntensityMap.channel};n.applyTextureTransform(t,e.specularIntensityMap),i.specularTexture=t}if(e.specularColorMap){const t={index:n.processTexture(e.specularColorMap),texCoord:e.specularColorMap.channel};n.applyTextureTransform(t,e.specularColorMap),i.specularColorTexture=t}i.specularFactor=e.specularIntensity,i.specularColorFactor=e.specularColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class Z{constructor(e){this.writer=e,this.name="KHR_materials_sheen"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0==e.sheen)return;const n=this.writer,r=n.extensionsUsed,i={};if(e.sheenRoughnessMap){const t={index:n.processTexture(e.sheenRoughnessMap),texCoord:e.sheenRoughnessMap.channel};n.applyTextureTransform(t,e.sheenRoughnessMap),i.sheenRoughnessTexture=t}if(e.sheenColorMap){const t={index:n.processTexture(e.sheenColorMap),texCoord:e.sheenColorMap.channel};n.applyTextureTransform(t,e.sheenColorMap),i.sheenColorTexture=t}i.sheenRoughnessFactor=e.sheenRoughness,i.sheenColorFactor=e.sheenColor.toArray(),t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class ee{constructor(e){this.writer=e,this.name="KHR_materials_anisotropy"}writeMaterial(e,t){if(!e.isMeshPhysicalMaterial||0==e.anisotropy)return;const n=this.writer,r=n.extensionsUsed,i={};if(e.anisotropyMap){const t={index:n.processTexture(e.anisotropyMap)};n.applyTextureTransform(t,e.anisotropyMap),i.anisotropyTexture=t}i.anisotropyStrength=e.anisotropy,i.anisotropyRotation=e.anisotropyRotation,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class te{constructor(e){this.writer=e,this.name="KHR_materials_emissive_strength"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||1===e.emissiveIntensity)return;const n=this.writer.extensionsUsed,r={};r.emissiveStrength=e.emissiveIntensity,t.extensions=t.extensions||{},t.extensions[this.name]=r,n[this.name]=!0}}class ne{constructor(e){this.writer=e,this.name="EXT_materials_bump"}writeMaterial(e,t){if(!e.isMeshStandardMaterial||1===e.bumpScale&&!e.bumpMap)return;const n=this.writer,r=n.extensionsUsed,i={};if(e.bumpMap){const t={index:n.processTexture(e.bumpMap),texCoord:e.bumpMap.channel};n.applyTextureTransform(t,e.bumpMap),i.bumpTexture=t}i.bumpFactor=e.bumpScale,t.extensions=t.extensions||{},t.extensions[this.name]=i,r[this.name]=!0}}class re{constructor(e){this.writer=e,this.name="EXT_mesh_gpu_instancing"}writeNode(e,t){if(!e.isInstancedMesh)return;const n=this.writer,i=e,s=new Float32Array(3*i.count),o=new Float32Array(4*i.count),a=new Float32Array(3*i.count),c=new r.Matrix4,l=new r.Vector3,u=new r.Quaternion,h=new r.Vector3;for(let e=0;e<i.count;e++)i.getMatrixAt(e,c),c.decompose(l,u,h),l.toArray(s,3*e),u.toArray(o,4*e),h.toArray(a,3*e);const d={TRANSLATION:n.processAccessor(new r.BufferAttribute(s,3)),ROTATION:n.processAccessor(new r.BufferAttribute(o,4)),SCALE:n.processAccessor(new r.BufferAttribute(a,3))};i.instanceColor&&(d._COLOR_0=n.processAccessor(i.instanceColor)),t.extensions=t.extensions||{},t.extensions[this.name]={attributes:d},n.extensionsUsed[this.name]=!0,n.extensionsRequired[this.name]=!0}}u.Utils={insertKeyframe:function(e,t){const n=.001,r=e.getValueSize(),i=new e.TimeBufferType(e.times.length+1),s=new e.ValueBufferType(e.values.length+r),o=e.createInterpolant(new e.ValueBufferType(r));let a;if(0===e.times.length){i[0]=t;for(let e=0;e<r;e++)s[e]=0;a=0}else if(t<e.times[0]){if(Math.abs(e.times[0]-t)<n)return 0;i[0]=t,i.set(e.times,1),s.set(o.evaluate(t),0),s.set(e.values,r),a=0}else if(t>e.times[e.times.length-1]){if(Math.abs(e.times[e.times.length-1]-t)<n)return e.times.length-1;i[i.length-1]=t,i.set(e.times,0),s.set(e.values,0),s.set(o.evaluate(t),e.values.length),a=i.length-1}else for(let c=0;c<e.times.length;c++){if(Math.abs(e.times[c]-t)<n)return c;if(e.times[c]<t&&e.times[c+1]>t){i.set(e.times.slice(0,c+1),0),i[c+1]=t,i.set(e.times.slice(c+1),c+2),s.set(e.values.slice(0,(c+1)*r),0),s.set(o.evaluate(t),(c+1)*r),s.set(e.values.slice((c+1)*r),(c+2)*r),a=c+1;break}}return e.times=i,e.values=s,a},mergeMorphTargetTracks:function(e,t){const n=[],i={},s=e.tracks;for(let e=0;e<s.length;++e){let o=s[e];const a=r.PropertyBinding.parseTrackName(o.name),c=r.PropertyBinding.findNode(t,a.nodeName);if("morphTargetInfluences"!==a.propertyName||void 0===a.propertyIndex){n.push(o);continue}if(o.createInterpolant!==o.InterpolantFactoryMethodDiscrete&&o.createInterpolant!==o.InterpolantFactoryMethodLinear){if(o.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline)throw new Error("THREE.GLTFExporter: Cannot merge tracks with glTF CUBICSPLINE interpolation.");console.warn("THREE.GLTFExporter: Morph target interpolation mode not yet supported. Using LINEAR instead."),o=o.clone(),o.setInterpolation(r.InterpolateLinear)}const l=c.morphTargetInfluences.length,u=c.morphTargetDictionary[a.propertyIndex];if(void 0===u)throw new Error("THREE.GLTFExporter: Morph target name not found: "+a.propertyIndex);let h;if(void 0===i[c.uuid]){h=o.clone();const e=new h.ValueBufferType(l*h.times.length);for(let t=0;t<h.times.length;t++)e[t*l+u]=h.values[t];h.name=(a.nodeName||"")+".morphTargetInfluences",h.values=e,i[c.uuid]=h,n.push(h);continue}const d=o.createInterpolant(new o.ValueBufferType(1));h=i[c.uuid];for(let e=0;e<h.times.length;e++)h.values[e*l+u]=d.evaluate(h.times[e]);for(let e=0;e<o.times.length;e++){const t=this.insertKeyframe(h,o.times[e]);h.values[t*l+u]=o.values[e]}}return e.tracks=n,e}}},4385:(e,t,n)=>{"use strict";n.r(t),n.d(t,{TextGeometry:()=>i});var r=n(9437);class i extends r.ExtrudeGeometry{constructor(e,t={}){const n=t.font;if(void 0===n)super();else{const r=n.generateShapes(e,t.size);void 0===t.depth&&void 0!==t.height&&console.warn("THREE.TextGeometry: .height is now depreciated. Please use .depth instead"),t.depth=void 0!==t.depth?t.depth:void 0!==t.height?t.height:50,void 0===t.bevelThickness&&(t.bevelThickness=10),void 0===t.bevelSize&&(t.bevelSize=8),void 0===t.bevelEnabled&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}},7044:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RectAreaLightHelper:()=>i});var r=n(9437);class i extends r.Line{constructor(e,t){const n=new r.BufferGeometry;n.setAttribute("position",new r.Float32BufferAttribute([1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],3)),n.computeBoundingSphere();super(n,new r.LineBasicMaterial({fog:!1})),this.light=e,this.color=t,this.type="RectAreaLightHelper";const i=new r.BufferGeometry;i.setAttribute("position",new r.Float32BufferAttribute([1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],3)),i.computeBoundingSphere(),this.add(new r.Mesh(i,new r.MeshBasicMaterial({side:r.BackSide,fog:!1})))}updateMatrixWorld(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);const e=this.material.color,t=Math.max(e.r,e.g,e.b);t>1&&e.multiplyScalar(1/t),this.children[0].material.color.copy(this.material.color)}this.matrixWorld.extractRotation(this.light.matrixWorld).scale(this.scale).copyPosition(this.light.matrixWorld),this.children[0].matrixWorld.copy(this.matrixWorld)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}},3619:(e,t,n)=>{"use strict";n.r(t),n.d(t,{BooleanController:()=>i,ColorController:()=>h,Controller:()=>r,FunctionController:()=>d,GUI:()=>A,NumberController:()=>p,OptionController:()=>f,StringController:()=>m,default:()=>y});class r{constructor(e,t,n,i,s="div"){this.parent=e,this.object=t,this.property=n,this._disabled=!1,this._hidden=!1,this.initialValue=this.getValue(),this.domElement=document.createElement("div"),this.domElement.classList.add("controller"),this.domElement.classList.add(i),this.$name=document.createElement("div"),this.$name.classList.add("name"),r.nextNameID=r.nextNameID||0,this.$name.id="lil-gui-name-"+ ++r.nextNameID,this.$widget=document.createElement(s),this.$widget.classList.add("widget"),this.$disable=this.$widget,this.domElement.appendChild(this.$name),this.domElement.appendChild(this.$widget),this.parent.children.push(this),this.parent.controllers.push(this),this.parent.$children.appendChild(this.domElement),this._listenCallback=this._listenCallback.bind(this),this.name(n)}name(e){return this._name=e,this.$name.innerHTML=e,this}onChange(e){return this._onChange=e,this}_callOnChange(){this.parent._callOnChange(this),void 0!==this._onChange&&this._onChange.call(this,this.getValue()),this._changed=!0}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(){this._changed&&(this.parent._callOnFinishChange(this),void 0!==this._onFinishChange&&this._onFinishChange.call(this,this.getValue())),this._changed=!1}reset(){return this.setValue(this.initialValue),this._callOnFinishChange(),this}enable(e=!0){return this.disable(!e)}disable(e=!0){return e===this._disabled||(this._disabled=e,this.domElement.classList.toggle("disabled",e),this.$disable.toggleAttribute("disabled",e)),this}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}options(e){const t=this.parent.add(this.object,this.property,e);return t.name(this._name),this.destroy(),t}min(e){return this}max(e){return this}step(e){return this}decimals(e){return this}listen(e=!0){return this._listening=e,void 0!==this._listenCallbackID&&(cancelAnimationFrame(this._listenCallbackID),this._listenCallbackID=void 0),this._listening&&this._listenCallback(),this}_listenCallback(){this._listenCallbackID=requestAnimationFrame(this._listenCallback);const e=this.save();e!==this._listenPrevValue&&this.updateDisplay(),this._listenPrevValue=e}getValue(){return this.object[this.property]}setValue(e){return this.object[this.property]=e,this._callOnChange(),this.updateDisplay(),this}updateDisplay(){return this}load(e){return this.setValue(e),this._callOnFinishChange(),this}save(){return this.getValue()}destroy(){this.listen(!1),this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.controllers.splice(this.parent.controllers.indexOf(this),1),this.parent.$children.removeChild(this.domElement)}}class i extends r{constructor(e,t,n){super(e,t,n,"boolean","label"),this.$input=document.createElement("input"),this.$input.setAttribute("type","checkbox"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$input.addEventListener("change",(()=>{this.setValue(this.$input.checked),this._callOnFinishChange()})),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.checked=this.getValue(),this}}function s(e){let t,n;return(t=e.match(/(#|0x)?([a-f0-9]{6})/i))?n=t[2]:(t=e.match(/rgb\(\s*(\d*)\s*,\s*(\d*)\s*,\s*(\d*)\s*\)/))?n=parseInt(t[1]).toString(16).padStart(2,0)+parseInt(t[2]).toString(16).padStart(2,0)+parseInt(t[3]).toString(16).padStart(2,0):(t=e.match(/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/i))&&(n=t[1]+t[1]+t[2]+t[2]+t[3]+t[3]),!!n&&"#"+n}const o={isPrimitive:!0,match:e=>"string"==typeof e,fromHexString:s,toHexString:s},a={isPrimitive:!0,match:e=>"number"==typeof e,fromHexString:e=>parseInt(e.substring(1),16),toHexString:e=>"#"+e.toString(16).padStart(6,0)},c={isPrimitive:!1,match:Array.isArray,fromHexString(e,t,n=1){const r=a.fromHexString(e);t[0]=(r>>16&255)/255*n,t[1]=(r>>8&255)/255*n,t[2]=(255&r)/255*n},toHexString:([e,t,n],r=1)=>a.toHexString(e*(r=255/r)<<16^t*r<<8^n*r)},l={isPrimitive:!1,match:e=>Object(e)===e,fromHexString(e,t,n=1){const r=a.fromHexString(e);t.r=(r>>16&255)/255*n,t.g=(r>>8&255)/255*n,t.b=(255&r)/255*n},toHexString:({r:e,g:t,b:n},r=1)=>a.toHexString(e*(r=255/r)<<16^t*r<<8^n*r)},u=[o,a,c,l];class h extends r{constructor(e,t,n,r){var i;super(e,t,n,"color"),this.$input=document.createElement("input"),this.$input.setAttribute("type","color"),this.$input.setAttribute("tabindex",-1),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$text=document.createElement("input"),this.$text.setAttribute("type","text"),this.$text.setAttribute("spellcheck","false"),this.$text.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this.$display.appendChild(this.$input),this.$widget.appendChild(this.$display),this.$widget.appendChild(this.$text),this._format=(i=this.initialValue,u.find((e=>e.match(i)))),this._rgbScale=r,this._initialValueHexString=this.save(),this._textFocused=!1,this.$input.addEventListener("input",(()=>{this._setValueFromHexString(this.$input.value)})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$text.addEventListener("input",(()=>{const e=s(this.$text.value);e&&this._setValueFromHexString(e)})),this.$text.addEventListener("focus",(()=>{this._textFocused=!0,this.$text.select()})),this.$text.addEventListener("blur",(()=>{this._textFocused=!1,this.updateDisplay(),this._callOnFinishChange()})),this.$disable=this.$text,this.updateDisplay()}reset(){return this._setValueFromHexString(this._initialValueHexString),this}_setValueFromHexString(e){if(this._format.isPrimitive){const t=this._format.fromHexString(e);this.setValue(t)}else this._format.fromHexString(e,this.getValue(),this._rgbScale),this._callOnChange(),this.updateDisplay()}save(){return this._format.toHexString(this.getValue(),this._rgbScale)}load(e){return this._setValueFromHexString(e),this._callOnFinishChange(),this}updateDisplay(){return this.$input.value=this._format.toHexString(this.getValue(),this._rgbScale),this._textFocused||(this.$text.value=this.$input.value.substring(1)),this.$display.style.backgroundColor=this.$input.value,this}}class d extends r{constructor(e,t,n){super(e,t,n,"function"),this.$button=document.createElement("button"),this.$button.appendChild(this.$name),this.$widget.appendChild(this.$button),this.$button.addEventListener("click",(e=>{e.preventDefault(),this.getValue().call(this.object)})),this.$button.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$disable=this.$button}}class p extends r{constructor(e,t,n,r,i,s){super(e,t,n,"number"),this._initInput(),this.min(r),this.max(i);const o=void 0!==s;this.step(o?s:this._getImplicitStep(),o),this.updateDisplay()}decimals(e){return this._decimals=e,this.updateDisplay(),this}min(e){return this._min=e,this._onUpdateMinMax(),this}max(e){return this._max=e,this._onUpdateMinMax(),this}step(e,t=!0){return this._step=e,this._stepExplicit=t,this}updateDisplay(){const e=this.getValue();if(this._hasSlider){let t=(e-this._min)/(this._max-this._min);t=Math.max(0,Math.min(t,1)),this.$fill.style.width=100*t+"%"}return this._inputFocused||(this.$input.value=void 0===this._decimals?e:e.toFixed(this._decimals)),this}_initInput(){this.$input=document.createElement("input"),this.$input.setAttribute("type","number"),this.$input.setAttribute("step","any"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$widget.appendChild(this.$input),this.$disable=this.$input;const e=e=>{const t=parseFloat(this.$input.value);isNaN(t)||(this._snapClampSetValue(t+e),this.$input.value=this.getValue())};let t,n,r,i,s,o=!1;const a=e=>{if(o){const r=e.clientX-t,i=e.clientY-n;Math.abs(i)>5?(e.preventDefault(),this.$input.blur(),o=!1,this._setDraggingStyle(!0,"vertical")):Math.abs(r)>5&&c()}if(!o){const t=e.clientY-r;s-=t*this._step*this._arrowKeyMultiplier(e),i+s>this._max?s=this._max-i:i+s<this._min&&(s=this._min-i),this._snapClampSetValue(i+s)}r=e.clientY},c=()=>{this._setDraggingStyle(!1,"vertical"),this._callOnFinishChange(),window.removeEventListener("mousemove",a),window.removeEventListener("mouseup",c)};this.$input.addEventListener("input",(()=>{let e=parseFloat(this.$input.value);isNaN(e)||(this._stepExplicit&&(e=this._snap(e)),this.setValue(this._clamp(e)))})),this.$input.addEventListener("keydown",(t=>{"Enter"===t.code&&this.$input.blur(),"ArrowUp"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t))),"ArrowDown"===t.code&&(t.preventDefault(),e(this._step*this._arrowKeyMultiplier(t)*-1))})),this.$input.addEventListener("wheel",(t=>{this._inputFocused&&(t.preventDefault(),e(this._step*this._normalizeMouseWheel(t)))}),{passive:!1}),this.$input.addEventListener("mousedown",(e=>{t=e.clientX,n=r=e.clientY,o=!0,i=this.getValue(),s=0,window.addEventListener("mousemove",a),window.addEventListener("mouseup",c)})),this.$input.addEventListener("focus",(()=>{this._inputFocused=!0})),this.$input.addEventListener("blur",(()=>{this._inputFocused=!1,this.updateDisplay(),this._callOnFinishChange()}))}_initSlider(){this._hasSlider=!0,this.$slider=document.createElement("div"),this.$slider.classList.add("slider"),this.$fill=document.createElement("div"),this.$fill.classList.add("fill"),this.$slider.appendChild(this.$fill),this.$widget.insertBefore(this.$slider,this.$input),this.domElement.classList.add("hasSlider");const e=e=>{const t=this.$slider.getBoundingClientRect();let n=(r=e,i=t.left,s=t.right,o=this._min,(r-i)/(s-i)*(this._max-o)+o);var r,i,s,o;this._snapClampSetValue(n)},t=t=>{e(t.clientX)},n=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("mousemove",t),window.removeEventListener("mouseup",n)};let r,i,s=!1;const o=t=>{t.preventDefault(),this._setDraggingStyle(!0),e(t.touches[0].clientX),s=!1},a=t=>{if(s){const e=t.touches[0].clientX-r,n=t.touches[0].clientY-i;Math.abs(e)>Math.abs(n)?o(t):(window.removeEventListener("touchmove",a),window.removeEventListener("touchend",c))}else t.preventDefault(),e(t.touches[0].clientX)},c=()=>{this._callOnFinishChange(),this._setDraggingStyle(!1),window.removeEventListener("touchmove",a),window.removeEventListener("touchend",c)},l=this._callOnFinishChange.bind(this);let u;this.$slider.addEventListener("mousedown",(r=>{this._setDraggingStyle(!0),e(r.clientX),window.addEventListener("mousemove",t),window.addEventListener("mouseup",n)})),this.$slider.addEventListener("touchstart",(e=>{e.touches.length>1||(this._hasScrollBar?(r=e.touches[0].clientX,i=e.touches[0].clientY,s=!0):o(e),window.addEventListener("touchmove",a,{passive:!1}),window.addEventListener("touchend",c))}),{passive:!1}),this.$slider.addEventListener("wheel",(e=>{if(Math.abs(e.deltaX)<Math.abs(e.deltaY)&&this._hasScrollBar)return;e.preventDefault();const t=this._normalizeMouseWheel(e)*this._step;this._snapClampSetValue(this.getValue()+t),this.$input.value=this.getValue(),clearTimeout(u),u=setTimeout(l,400)}),{passive:!1})}_setDraggingStyle(e,t="horizontal"){this.$slider&&this.$slider.classList.toggle("active",e),document.body.classList.toggle("lil-gui-dragging",e),document.body.classList.toggle("lil-gui-"+t,e)}_getImplicitStep(){return this._hasMin&&this._hasMax?(this._max-this._min)/1e3:.1}_onUpdateMinMax(){!this._hasSlider&&this._hasMin&&this._hasMax&&(this._stepExplicit||this.step(this._getImplicitStep(),!1),this._initSlider(),this.updateDisplay())}_normalizeMouseWheel(e){let{deltaX:t,deltaY:n}=e;return Math.floor(e.deltaY)!==e.deltaY&&e.wheelDelta&&(t=0,n=-e.wheelDelta/120,n*=this._stepExplicit?1:10),t+-n}_arrowKeyMultiplier(e){let t=this._stepExplicit?1:10;return e.shiftKey?t*=10:e.altKey&&(t/=10),t}_snap(e){const t=Math.round(e/this._step)*this._step;return parseFloat(t.toPrecision(15))}_clamp(e){return e<this._min&&(e=this._min),e>this._max&&(e=this._max),e}_snapClampSetValue(e){this.setValue(this._clamp(this._snap(e)))}get _hasScrollBar(){const e=this.parent.root.$children;return e.scrollHeight>e.clientHeight}get _hasMin(){return void 0!==this._min}get _hasMax(){return void 0!==this._max}}class f extends r{constructor(e,t,n,r){super(e,t,n,"option"),this.$select=document.createElement("select"),this.$select.setAttribute("aria-labelledby",this.$name.id),this.$display=document.createElement("div"),this.$display.classList.add("display"),this._values=Array.isArray(r)?r:Object.values(r),this._names=Array.isArray(r)?r:Object.keys(r),this._names.forEach((e=>{const t=document.createElement("option");t.innerHTML=e,this.$select.appendChild(t)})),this.$select.addEventListener("change",(()=>{this.setValue(this._values[this.$select.selectedIndex]),this._callOnFinishChange()})),this.$select.addEventListener("focus",(()=>{this.$display.classList.add("focus")})),this.$select.addEventListener("blur",(()=>{this.$display.classList.remove("focus")})),this.$widget.appendChild(this.$select),this.$widget.appendChild(this.$display),this.$disable=this.$select,this.updateDisplay()}updateDisplay(){const e=this.getValue(),t=this._values.indexOf(e);return this.$select.selectedIndex=t,this.$display.innerHTML=-1===t?e:this._names[t],this}}class m extends r{constructor(e,t,n){super(e,t,n,"string"),this.$input=document.createElement("input"),this.$input.setAttribute("type","text"),this.$input.setAttribute("aria-labelledby",this.$name.id),this.$input.addEventListener("input",(()=>{this.setValue(this.$input.value)})),this.$input.addEventListener("keydown",(e=>{"Enter"===e.code&&this.$input.blur()})),this.$input.addEventListener("blur",(()=>{this._callOnFinishChange()})),this.$widget.appendChild(this.$input),this.$disable=this.$input,this.updateDisplay()}updateDisplay(){return this.$input.value=this.getValue(),this}}let g=!1;class A{constructor({parent:e,autoPlace:t=void 0===e,container:n,width:r,title:i="Controls",injectStyles:s=!0,touchStyles:o=!0}={}){if(this.parent=e,this.root=e?e.root:this,this.children=[],this.controllers=[],this.folders=[],this._closed=!1,this._hidden=!1,this.domElement=document.createElement("div"),this.domElement.classList.add("lil-gui"),this.$title=document.createElement("div"),this.$title.classList.add("title"),this.$title.setAttribute("role","button"),this.$title.setAttribute("aria-expanded",!0),this.$title.setAttribute("tabindex",0),this.$title.addEventListener("click",(()=>this.openAnimated(this._closed))),this.$title.addEventListener("keydown",(e=>{"Enter"!==e.code&&"Space"!==e.code||(e.preventDefault(),this.$title.click())})),this.$title.addEventListener("touchstart",(()=>{}),{passive:!0}),this.$children=document.createElement("div"),this.$children.classList.add("children"),this.domElement.appendChild(this.$title),this.domElement.appendChild(this.$children),this.title(i),o&&this.domElement.classList.add("allow-touch-styles"),this.parent)return this.parent.children.push(this),this.parent.folders.push(this),void this.parent.$children.appendChild(this.domElement);this.domElement.classList.add("root"),!g&&s&&(function(){const e=document.createElement("style");e.innerHTML='.lil-gui{--background-color:#1f1f1f;--text-color:#ebebeb;--title-background-color:#111;--title-text-color:#ebebeb;--widget-color:#424242;--hover-color:#4f4f4f;--focus-color:#595959;--number-color:#2cc9ff;--string-color:#a2db3c;--font-size:11px;--input-font-size:11px;--font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;--font-family-mono:Menlo,Monaco,Consolas,"Droid Sans Mono",monospace;--padding:4px;--spacing:4px;--widget-height:20px;--name-width:45%;--slider-knob-width:2px;--slider-input-width:27%;--color-input-width:27%;--slider-input-min-width:45px;--color-input-min-width:45px;--folder-indent:7px;--widget-padding:0 0 0 3px;--widget-border-radius:2px;--checkbox-size:calc(var(--widget-height)*0.75);--scrollbar-width:5px;background-color:var(--background-color);color:var(--text-color);font-family:var(--font-family);font-size:var(--font-size);font-style:normal;font-weight:400;line-height:1;text-align:left;touch-action:manipulation;user-select:none;-webkit-user-select:none}.lil-gui,.lil-gui *{box-sizing:border-box;margin:0;padding:0}.lil-gui.root{display:flex;flex-direction:column;width:var(--width,245px)}.lil-gui.root>.title{background:var(--title-background-color);color:var(--title-text-color)}.lil-gui.root>.children{overflow-x:hidden;overflow-y:auto}.lil-gui.root>.children::-webkit-scrollbar{background:var(--background-color);height:var(--scrollbar-width);width:var(--scrollbar-width)}.lil-gui.root>.children::-webkit-scrollbar-thumb{background:var(--focus-color);border-radius:var(--scrollbar-width)}.lil-gui.force-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}.lil-gui.autoPlace{max-height:100%;position:fixed;right:15px;top:0;z-index:1001}.lil-gui .controller{align-items:center;display:flex;margin:var(--spacing) 0;padding:0 var(--padding)}.lil-gui .controller.disabled{opacity:.5}.lil-gui .controller.disabled,.lil-gui .controller.disabled *{pointer-events:none!important}.lil-gui .controller>.name{flex-shrink:0;line-height:var(--widget-height);min-width:var(--name-width);padding-right:var(--spacing);white-space:pre}.lil-gui .controller .widget{align-items:center;display:flex;min-height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.string input{color:var(--string-color)}.lil-gui .controller.boolean .widget{cursor:pointer}.lil-gui .controller.color .display{border-radius:var(--widget-border-radius);height:var(--widget-height);position:relative;width:100%}.lil-gui .controller.color input[type=color]{cursor:pointer;height:100%;opacity:0;width:100%}.lil-gui .controller.color input[type=text]{flex-shrink:0;font-family:var(--font-family-mono);margin-left:var(--spacing);min-width:var(--color-input-min-width);width:var(--color-input-width)}.lil-gui .controller.option select{max-width:100%;opacity:0;position:absolute;width:100%}.lil-gui .controller.option .display{background:var(--widget-color);border-radius:var(--widget-border-radius);height:var(--widget-height);line-height:var(--widget-height);max-width:100%;overflow:hidden;padding-left:.55em;padding-right:1.75em;pointer-events:none;position:relative;word-break:break-all}.lil-gui .controller.option .display.active{background:var(--focus-color)}.lil-gui .controller.option .display:after{bottom:0;content:"↕";font-family:lil-gui;padding-right:.375em;position:absolute;right:0;top:0}.lil-gui .controller.option .widget,.lil-gui .controller.option select{cursor:pointer}.lil-gui .controller.number input{color:var(--number-color)}.lil-gui .controller.number.hasSlider input{flex-shrink:0;margin-left:var(--spacing);min-width:var(--slider-input-min-width);width:var(--slider-input-width)}.lil-gui .controller.number .slider{background-color:var(--widget-color);border-radius:var(--widget-border-radius);cursor:ew-resize;height:var(--widget-height);overflow:hidden;padding-right:var(--slider-knob-width);touch-action:pan-y;width:100%}.lil-gui .controller.number .slider.active{background-color:var(--focus-color)}.lil-gui .controller.number .slider.active .fill{opacity:.95}.lil-gui .controller.number .fill{border-right:var(--slider-knob-width) solid var(--number-color);box-sizing:content-box;height:100%}.lil-gui-dragging .lil-gui{--hover-color:var(--widget-color)}.lil-gui-dragging *{cursor:ew-resize!important}.lil-gui-dragging.lil-gui-vertical *{cursor:ns-resize!important}.lil-gui .title{--title-height:calc(var(--widget-height) + var(--spacing)*1.25);-webkit-tap-highlight-color:transparent;text-decoration-skip:objects;cursor:pointer;font-weight:600;height:var(--title-height);line-height:calc(var(--title-height) - 4px);outline:none;padding:0 var(--padding)}.lil-gui .title:before{content:"▾";display:inline-block;font-family:lil-gui;padding-right:2px}.lil-gui .title:active{background:var(--title-background-color);opacity:.75}.lil-gui.root>.title:focus{text-decoration:none!important}.lil-gui.closed>.title:before{content:"▸"}.lil-gui.closed>.children{opacity:0;transform:translateY(-7px)}.lil-gui.closed:not(.transition)>.children{display:none}.lil-gui.transition>.children{overflow:hidden;pointer-events:none;transition-duration:.3s;transition-property:height,opacity,transform;transition-timing-function:cubic-bezier(.2,.6,.35,1)}.lil-gui .children:empty:before{content:"Empty";display:block;font-style:italic;height:var(--widget-height);line-height:var(--widget-height);margin:var(--spacing) 0;opacity:.5;padding:0 var(--padding)}.lil-gui.root>.children>.lil-gui>.title{border-width:0;border-bottom:1px solid var(--widget-color);border-left:0 solid var(--widget-color);border-right:0 solid var(--widget-color);border-top:1px solid var(--widget-color);transition:border-color .3s}.lil-gui.root>.children>.lil-gui.closed>.title{border-bottom-color:transparent}.lil-gui+.controller{border-top:1px solid var(--widget-color);margin-top:0;padding-top:var(--spacing)}.lil-gui .lil-gui .lil-gui>.title{border:none}.lil-gui .lil-gui .lil-gui>.children{border:none;border-left:2px solid var(--widget-color);margin-left:var(--folder-indent)}.lil-gui .lil-gui .controller{border:none}.lil-gui input{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:0;border-radius:var(--widget-border-radius);color:var(--text-color);font-family:var(--font-family);font-size:var(--input-font-size);height:var(--widget-height);outline:none;width:100%}.lil-gui input:disabled{opacity:1}.lil-gui input[type=number],.lil-gui input[type=text]{padding:var(--widget-padding)}.lil-gui input[type=number]:focus,.lil-gui input[type=text]:focus{background:var(--focus-color)}.lil-gui input::-webkit-inner-spin-button,.lil-gui input::-webkit-outer-spin-button{-webkit-appearance:none;margin:0}.lil-gui input[type=number]{-moz-appearance:textfield}.lil-gui input[type=checkbox]{appearance:none;-webkit-appearance:none;border-radius:var(--widget-border-radius);cursor:pointer;height:var(--checkbox-size);text-align:center;width:var(--checkbox-size)}.lil-gui input[type=checkbox]:checked:before{content:"✓";font-family:lil-gui;font-size:var(--checkbox-size);line-height:var(--checkbox-size)}.lil-gui button{-webkit-tap-highlight-color:transparent;background:var(--widget-color);border:1px solid var(--widget-color);border-radius:var(--widget-border-radius);color:var(--text-color);cursor:pointer;font-family:var(--font-family);font-size:var(--font-size);height:var(--widget-height);line-height:calc(var(--widget-height) - 4px);outline:none;text-align:center;text-transform:none;width:100%}.lil-gui button:active{background:var(--focus-color)}@font-face{font-family:lil-gui;src:url("data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAUsAAsAAAAACJwAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAH4AAADAImwmYE9TLzIAAAGIAAAAPwAAAGBKqH5SY21hcAAAAcgAAAD0AAACrukyyJBnbHlmAAACvAAAAF8AAACEIZpWH2hlYWQAAAMcAAAAJwAAADZfcj2zaGhlYQAAA0QAAAAYAAAAJAC5AHhobXR4AAADXAAAABAAAABMAZAAAGxvY2EAAANsAAAAFAAAACgCEgIybWF4cAAAA4AAAAAeAAAAIAEfABJuYW1lAAADoAAAASIAAAIK9SUU/XBvc3QAAATEAAAAZgAAAJCTcMc2eJxVjbEOgjAURU+hFRBK1dGRL+ALnAiToyMLEzFpnPz/eAshwSa97517c/MwwJmeB9kwPl+0cf5+uGPZXsqPu4nvZabcSZldZ6kfyWnomFY/eScKqZNWupKJO6kXN3K9uCVoL7iInPr1X5baXs3tjuMqCtzEuagm/AAlzQgPAAB4nGNgYRBlnMDAysDAYM/gBiT5oLQBAwuDJAMDEwMrMwNWEJDmmsJwgCFeXZghBcjlZMgFCzOiKOIFAB71Bb8AeJy1kjFuwkAQRZ+DwRAwBtNQRUGKQ8OdKCAWUhAgKLhIuAsVSpWz5Bbkj3dEgYiUIszqWdpZe+Z7/wB1oCYmIoboiwiLT2WjKl/jscrHfGg/pKdMkyklC5Zs2LEfHYpjcRoPzme9MWWmk3dWbK9ObkWkikOetJ554fWyoEsmdSlt+uR0pCJR34b6t/TVg1SY3sYvdf8vuiKrpyaDXDISiegp17p7579Gp3p++y7HPAiY9pmTibljrr85qSidtlg4+l25GLCaS8e6rRxNBmsnERunKbaOObRz7N72ju5vdAjYpBXHgJylOAVsMseDAPEP8LYoUHicY2BiAAEfhiAGJgZWBgZ7RnFRdnVJELCQlBSRlATJMoLV2DK4glSYs6ubq5vbKrJLSbGrgEmovDuDJVhe3VzcXFwNLCOILB/C4IuQ1xTn5FPilBTj5FPmBAB4WwoqAHicY2BkYGAA4sk1sR/j+W2+MnAzpDBgAyEMQUCSg4EJxAEAwUgFHgB4nGNgZGBgSGFggJMhDIwMqEAYAByHATJ4nGNgAIIUNEwmAABl3AGReJxjYAACIQYlBiMGJ3wQAEcQBEV4nGNgZGBgEGZgY2BiAAEQyQWEDAz/wXwGAAsPATIAAHicXdBNSsNAHAXwl35iA0UQXYnMShfS9GPZA7T7LgIu03SSpkwzYTIt1BN4Ak/gKTyAeCxfw39jZkjymzcvAwmAW/wgwHUEGDb36+jQQ3GXGot79L24jxCP4gHzF/EIr4jEIe7wxhOC3g2TMYy4Q7+Lu/SHuEd/ivt4wJd4wPxbPEKMX3GI5+DJFGaSn4qNzk8mcbKSR6xdXdhSzaOZJGtdapd4vVPbi6rP+cL7TGXOHtXKll4bY1Xl7EGnPtp7Xy2n00zyKLVHfkHBa4IcJ2oD3cgggWvt/V/FbDrUlEUJhTn/0azVWbNTNr0Ens8de1tceK9xZmfB1CPjOmPH4kitmvOubcNpmVTN3oFJyjzCvnmrwhJTzqzVj9jiSX911FjeAAB4nG3HMRKCMBBA0f0giiKi4DU8k0V2GWbIZDOh4PoWWvq6J5V8If9NVNQcaDhyouXMhY4rPTcG7jwYmXhKq8Wz+p762aNaeYXom2n3m2dLTVgsrCgFJ7OTmIkYbwIbC6vIB7WmFfAAAA==") format("woff")}@media (pointer:coarse){.lil-gui.allow-touch-styles{--widget-height:28px;--padding:6px;--spacing:6px;--font-size:13px;--input-font-size:16px;--folder-indent:10px;--scrollbar-width:7px;--slider-input-min-width:50px;--color-input-min-width:65px}}@media (hover:hover){.lil-gui .controller.color .display:hover:before{border:1px solid #fff9;border-radius:var(--widget-border-radius);bottom:0;content:" ";display:block;left:0;position:absolute;right:0;top:0}.lil-gui .controller.option .display.focus{background:var(--focus-color)}.lil-gui .controller.option .widget:hover .display{background:var(--hover-color)}.lil-gui .controller.number .slider:hover{background-color:var(--hover-color)}body:not(.lil-gui-dragging) .lil-gui .title:hover{background:var(--title-background-color);opacity:.85}.lil-gui .title:focus{text-decoration:underline var(--focus-color)}.lil-gui input:hover{background:var(--hover-color)}.lil-gui input:active{background:var(--focus-color)}.lil-gui input[type=checkbox]:focus{box-shadow:inset 0 0 0 1px var(--focus-color)}.lil-gui button:hover{background:var(--hover-color);border-color:var(--hover-color)}.lil-gui button:focus{border-color:var(--focus-color)}}';const t=document.querySelector("head link[rel=stylesheet], head style");t?document.head.insertBefore(e,t):document.head.appendChild(e)}(),g=!0),n?n.appendChild(this.domElement):t&&(this.domElement.classList.add("autoPlace"),document.body.appendChild(this.domElement)),r&&this.domElement.style.setProperty("--width",r+"px"),this.domElement.addEventListener("keydown",(e=>e.stopPropagation())),this.domElement.addEventListener("keyup",(e=>e.stopPropagation()))}add(e,t,n,r,s){if(Object(n)===n)return new f(this,e,t,n);const o=e[t];switch(typeof o){case"number":return new p(this,e,t,n,r,s);case"boolean":return new i(this,e,t);case"string":return new m(this,e,t);case"function":return new d(this,e,t)}console.error("gui.add failed\n\tproperty:",t,"\n\tobject:",e,"\n\tvalue:",o)}addColor(e,t,n=1){return new h(this,e,t,n)}addFolder(e){return new A({parent:this,title:e})}load(e,t=!0){return e.controllers&&this.controllers.forEach((t=>{t instanceof d||t._name in e.controllers&&t.load(e.controllers[t._name])})),t&&e.folders&&this.folders.forEach((t=>{t._title in e.folders&&t.load(e.folders[t._title])})),this}save(e=!0){const t={controllers:{},folders:{}};return this.controllers.forEach((e=>{if(!(e instanceof d)){if(e._name in t.controllers)throw new Error(`Cannot save GUI with duplicate property "${e._name}"`);t.controllers[e._name]=e.save()}})),e&&this.folders.forEach((e=>{if(e._title in t.folders)throw new Error(`Cannot save GUI with duplicate folder "${e._title}"`);t.folders[e._title]=e.save()})),t}open(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),this.domElement.classList.toggle("closed",this._closed),this}close(){return this.open(!1)}show(e=!0){return this._hidden=!e,this.domElement.style.display=this._hidden?"none":"",this}hide(){return this.show(!1)}openAnimated(e=!0){return this._closed=!e,this.$title.setAttribute("aria-expanded",!this._closed),requestAnimationFrame((()=>{const t=this.$children.clientHeight;this.$children.style.height=t+"px",this.domElement.classList.add("transition");const n=e=>{e.target===this.$children&&(this.$children.style.height="",this.domElement.classList.remove("transition"),this.$children.removeEventListener("transitionend",n))};this.$children.addEventListener("transitionend",n);const r=e?this.$children.scrollHeight:0;this.domElement.classList.toggle("closed",!e),requestAnimationFrame((()=>{this.$children.style.height=r+"px"}))})),this}title(e){return this._title=e,this.$title.innerHTML=e,this}reset(e=!0){return(e?this.controllersRecursive():this.controllers).forEach((e=>e.reset())),this}onChange(e){return this._onChange=e,this}_callOnChange(e){this.parent&&this.parent._callOnChange(e),void 0!==this._onChange&&this._onChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}onFinishChange(e){return this._onFinishChange=e,this}_callOnFinishChange(e){this.parent&&this.parent._callOnFinishChange(e),void 0!==this._onFinishChange&&this._onFinishChange.call(this,{object:e.object,property:e.property,value:e.getValue(),controller:e})}destroy(){this.parent&&(this.parent.children.splice(this.parent.children.indexOf(this),1),this.parent.folders.splice(this.parent.folders.indexOf(this),1)),this.domElement.parentElement&&this.domElement.parentElement.removeChild(this.domElement),Array.from(this.children).forEach((e=>e.destroy()))}controllersRecursive(){let e=Array.from(this.controllers);return this.folders.forEach((t=>{e=e.concat(t.controllersRecursive())})),e}foldersRecursive(){let e=Array.from(this.folders);return this.folders.forEach((t=>{e=e.concat(t.foldersRecursive())})),e}}const y=A},1051:(e,t,n)=>{"use strict";n.r(t),n.d(t,{MeshoptDecoder:()=>r});var r=function(){var e=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]),t=new Uint8Array([32,0,65,2,1,106,34,33,3,128,11,4,13,64,6,253,10,7,15,116,127,5,8,12,40,16,19,54,20,9,27,255,113,17,42,67,24,23,146,148,18,14,22,45,70,69,56,114,101,21,25,63,75,136,108,28,118,29,73,115]);if("object"!=typeof WebAssembly)return{supported:!1};var n,r=WebAssembly.validate(e)?"b9H79TebbbeKl9Gbb9Gvuuuuueu9Giuuub9Geueuikqbbebeedddilve9Weeeviebeoweuec:q;Aekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbdY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVblE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtboK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbrL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbwl79IV9RbDq;t9tqlbzik9:evu8Jjjjjbcz9Rhbcbheincbhdcbhiinabcwfadfaicjuaead4ceGglE86bbaialfhiadcefgdcw9hmbkaec:q:yjjbfai86bbaecitc:q1jjbfab8Piw83ibaecefgecjd9hmbkk;h8JlHud97euo978Jjjjjbcj;kb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Rad;8qbbcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhwcbhDinaDae9pmeawaeaD9RaDawfae6Egqcsfgoc9WGgkci2hxakcethmaocl4cifcd4hPabaDad2fhscbhzdnincehHalhOcbhAdninaraO9RaP6miavcj;cbfaAak2fhCaOaPfhlcbhidnakc;ab6mbaral9Rc;Gb6mbcbhoinaCaofhidndndndndnaOaoco4fRbbgXciGPlbedibkaipxbbbbbbbbbbbbbbbbpklbxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklbalczfhlkdndndndndnaXcd4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklzxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklzalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklzalczfhlkdndndndndnaXcl4ciGPlbedibkaipxbbbbbbbbbbbbbbbbpklaxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklaalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaialpbbbpklaalczfhlkdndndndndnaXco4Plbedibkaipxbbbbbbbbbbbbbbbbpkl8WxikaialpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalclfaYpQbfaXc:q:yjjbfRbbfhlxdkaialpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibaXc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgXcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spkl8WalcwfaYpQbfaXc:q:yjjbfRbbfhlxekaialpbbbpkl8Walczfhlkaoc;abfhiaocjefak0meaihoaral9Rc;Fb0mbkkdndnaiak9pmbaici4hoinaral9RcK6mdaCaifhXdndndndndnaOaico4fRbbaocoG4ciGPlbedibkaXpxbbbbbbbbbbbbbbbbpklbxikaXalpbblalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLgQcdp:meaQpmbzeHdOiAlCvXoQrLpxiiiiiiiiiiiiiiiip9ogLpxiiiiiiiiiiiiiiiip8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalclfaYpQbfaKc:q:yjjbfRbbfhlxdkaXalpbbwalpbbbgQclp:meaQpmbzeHdOiAlCvXoQrLpxssssssssssssssssp9ogLpxssssssssssssssssp8JgQp5b9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibaKc:q:yjjbfpbbbgYaYpmbbbbbbbbbbbbbbbbaQp5e9cjF;8;4;W;G;ab9:9cU1:NgKcitc:q1jjbfpbibp9UpmbedilvorzHOACXQLpPaLaQp9spklbalcwfaYpQbfaKc:q:yjjbfRbbfhlxekaXalpbbbpklbalczfhlkaocdfhoaiczfgiak6mbkkalTmbaAci6hHalhOaAcefgohAaoclSmdxekkcbhlaHceGmdkdnakTmbavcjdfazfhiavazfpbdbhYcbhXinaiavcj;cbfaXfgopblbgLcep9TaLpxeeeeeeeeeeeeeeeegQp9op9Hp9rgLaoakfpblbg8Acep9Ta8AaQp9op9Hp9rg8ApmbzeHdOiAlCvXoQrLgEaoamfpblbg3cep9Ta3aQp9op9Hp9rg3aoaxfpblbg5cep9Ta5aQp9op9Hp9rg5pmbzeHdOiAlCvXoQrLg8EpmbezHdiOAlvCXorQLgQaQpmbedibedibedibediaYp9UgYp9AdbbaiadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaEa8EpmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwKDYq8AkEx3m5P8Es8FgLa3a5pmwKDYq8AkEx3m5P8Es8Fg8ApmbezHdiOAlvCXorQLgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfgoaYaLa8ApmwDKYqk8AExm35Ps8E8FgQaQpmbedibedibedibedip9UgYp9AdbbaoadfgoaYaQaQpmlvorlvorlvorlvorp9UgYp9AdbbaoadfgoaYaQaQpmwDqkwDqkwDqkwDqkp9UgYp9AdbbaoadfgoaYaQaQpmxmPsxmPsxmPsxmPsp9UgYp9AdbbaoadfhiaXczfgXak6mbkkazclfgzad6mbkasavcjdfaqad2;8qbbavavcjdfaqcufad2fad;8qbbaqaDfhDc9:hoalmexikkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;kbf8Kjjjjbaokwbz:bjjjbk;uzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecje;8kbavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:EPliuo97eue978Jjjjjbca9Rhidndnadcl9hmbdnaec98GglTmbcbhvabhdinadadpbbbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpkbbadczfhdavclfgval6mbkkalae9pmeaiaeciGgvcdtgdVcbczad9R;8kbaiabalcdtfglad;8qbbdnavTmbaiaipblbgocKp:RecKp:Sep;6egraocwp:RecKp:Sep;6earp;Geaoczp:RecKp:Sep;6egwp;Gep;Kep;LegDpxbbbbbbbbbbbbbbbbp:2egqarpxbbbjbbbjbbbjbbbjgkp9op9rp;Kegrpxbb;:9cbb;:9cbb;:9cbb;:9cararp;MeaDaDp;Meawaqawakp9op9rp;Kegrarp;Mep;Kep;Kep;Jep;Negwp;Mepxbbn0bbn0bbn0bbn0gqp;KepxFbbbFbbbFbbbFbbbp9oaopxbbbFbbbFbbbFbbbFp9op9qarawp;Meaqp;Kecwp:RepxbFbbbFbbbFbbbFbbp9op9qaDawp;Meaqp;Keczp:RepxbbFbbbFbbbFbbbFbp9op9qpklbkalaiad;8qbbskdnaec98GgxTmbcbhvabhdinadczfglalpbbbgopxbbbbbbFFbbbbbbFFgkp9oadpbbbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpkbbadaDakp9oawaopmbezHdiOAlvCXorQLp9qpkbbadcafhdavclfgvax6mbkkaxae9pmbaiaeciGgvcitgdfcbcaad9R;8kbaiabaxcitfglad;8qbbdnavTmbaiaipblzgopxbbbbbbFFbbbbbbFFgkp9oaipblbgDaopmlvorxmPsCXQL358E8FpxFubbFubbFubbFubbp9op;6eaDaopmbediwDqkzHOAKY8AEgoczp:Sep;6egrp;Geaoczp:Reczp:Sep;6egwp;Gep;Kep;Legopxb;:FSb;:FSb;:FSb;:FSawaopxbbbbbbbbbbbbbbbbp:2egqawpxbbbjbbbjbbbjbbbjgmp9op9rp;Kegwawp;Meaoaop;Mearaqaramp9op9rp;Kegoaop;Mep;Kep;Kep;Jep;Negrp;Mepxbbn0bbn0bbn0bbn0gqp;Keczp:Reawarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9op9qgwaoarp;Meaqp;KepxFFbbFFbbFFbbFFbbp9ogopmwDKYqk8AExm35Ps8E8Fp9qpklzaiaDakp9oawaopmbezHdiOAlvCXorQLp9qpklbkalaiad;8qbbkk;4wllue97euv978Jjjjjbc8W9Rhidnaec98GglTmbcbhvabhoinaiaopbbbgraoczfgwpbbbgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklbaopxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblbpEb:T:j83ibaocwfarp5eaipblbpEe:T:j83ibawaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblbpEd:T:j83ibaocKfakp5eaipblbpEi:T:j83ibaocafhoavclfgval6mbkkdnalae9pmbaiaeciGgvcitgofcbcaao9R;8kbaiabalcitfgwao;8qbbdnavTmbaiaipblbgraipblzgDpmlvorxmPsCXQL358E8Fgqczp:Segkclp:RepklaaipxbbjZbbjZbbjZbbjZpx;Zl81Z;Zl81Z;Zl81Z;Zl81Zakpxibbbibbbibbbibbbp9qp;6ep;NegkaraDpmbediwDqkzHOAKY8AEgrczp:Reczp:Sep;6ep;MegDaDp;Meakarczp:Sep;6ep;Megxaxp;Meakaqczp:Reczp:Sep;6ep;Megqaqp;Mep;Kep;Kep;Lepxbbbbbbbbbbbbbbbbp:4ep;Jepxb;:FSb;:FSb;:FSb;:FSgkp;Mepxbbn0bbn0bbn0bbn0grp;KepxFFbbFFbbFFbbFFbbgmp9oaxakp;Mearp;Keczp:Rep9qgxaqakp;Mearp;Keczp:ReaDakp;Mearp;Keamp9op9qgkpmbezHdiOAlvCXorQLgrp5baipblapEb:T:j83ibaiarp5eaipblapEe:T:j83iwaiaxakpmwDKYqk8AExm35Ps8E8Fgkp5baipblapEd:T:j83izaiakp5eaipblapEi:T:j83iKkawaiao;8qbbkk:Pddiue978Jjjjjbc;ab9Rhidnadcd4ae2glc98GgvTmbcbhdabheinaeaepbbbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepkbbaeczfheadclfgdav6mbkkdnaval9pmbaialciGgdcdtgeVcbc;abae9R;8kbaiabavcdtfgvae;8qbbdnadTmbaiaipblbgocwp:Recwp:Sep;6eaocep:SepxbbjZbbjZbbjZbbjZp:UepxbbjFbbjFbbjFbbjFp9op;Mepklbkavaiae;8qbbkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaikkkebcjwklz9Tbb":"b9H79Tebbbe8Fv9Gbb9Gvuuuuueu9Giuuub9Geueu9Giuuueuikqbeeedddillviebeoweuec:q;iekr;leDo9TW9T9VV95dbH9F9F939H79T9F9J9H229F9Jt9VV7bb8A9TW79O9V9Wt9F9KW9J9V9KW9wWVtW949c919M9MWVbeY9TW79O9V9Wt9F9KW9J9V9KW69U9KW949c919M9MWVbdE9TW79O9V9Wt9F9KW9J9V9KW69U9KW949tWG91W9U9JWbiL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9p9JtblK9TW79O9V9Wt9F9KW9J9V9KWS9P2tWV9r919HtbvL9TW79O9V9Wt9F9KW9J9V9KWS9P2tWVT949Wbol79IV9Rbrq:P8Yqdbk;3sezu8Jjjjjbcj;eb9Rgv8Kjjjjbc9:hodnadcefal0mbcuhoaiRbbc:Ge9hmbavaialfgrad9Radz1jjjbhwcj;abad9UhoaicefhldnadTmbaoc;WFbGgocjdaocjd6EhDcbhqinaqae9pmeaDaeaq9RaqaDfae6Egkcsfgocl4cifcd4hxdndndndnaoc9WGgmTmbcbhPcehsawcjdfhzalhHinaraH9Rax6midnaraHaxfgl9RcK6mbczhoinawcj;cbfaogifgoc9WfhOdndndndndnaHaic9WfgAco4fRbbaAci4coG4ciGPlbedibkaO9cb83ibaOcwf9cb83ibxikaOalRblalRbbgAco4gCaCciSgCE86bbaocGfalclfaCfgORbbaAcl4ciGgCaCciSgCE86bbaocVfaOaCfgORbbaAcd4ciGgCaCciSgCE86bbaoc7faOaCfgORbbaAciGgAaAciSgAE86bbaoctfaOaAfgARbbalRbegOco4gCaCciSgCE86bbaoc91faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc4faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc93faAaCfgARbbaOciGgOaOciSgOE86bbaoc94faAaOfgARbbalRbdgOco4gCaCciSgCE86bbaoc95faAaCfgARbbaOcl4ciGgCaCciSgCE86bbaoc96faAaCfgARbbaOcd4ciGgCaCciSgCE86bbaoc97faAaCfgARbbaOciGgOaOciSgOE86bbaoc98faAaOfgORbbalRbiglco4gAaAciSgAE86bbaoc99faOaAfgORbbalcl4ciGgAaAciSgAE86bbaoc9:faOaAfgORbbalcd4ciGgAaAciSgAE86bbaocufaOaAfgoRbbalciGglalciSglE86bbaoalfhlxdkaOalRbwalRbbgAcl4gCaCcsSgCE86bbaocGfalcwfaCfgORbbaAcsGgAaAcsSgAE86bbaocVfaOaAfgORbbalRbegAcl4gCaCcsSgCE86bbaoc7faOaCfgORbbaAcsGgAaAcsSgAE86bbaoctfaOaAfgORbbalRbdgAcl4gCaCcsSgCE86bbaoc91faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc4faOaAfgORbbalRbigAcl4gCaCcsSgCE86bbaoc93faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc94faOaAfgORbbalRblgAcl4gCaCcsSgCE86bbaoc95faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc96faOaAfgORbbalRbvgAcl4gCaCcsSgCE86bbaoc97faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc98faOaAfgORbbalRbogAcl4gCaCcsSgCE86bbaoc99faOaCfgORbbaAcsGgAaAcsSgAE86bbaoc9:faOaAfgORbbalRbrglcl4gAaAcsSgAE86bbaocufaOaAfgoRbbalcsGglalcsSglE86bbaoalfhlxekaOal8Pbb83bbaOcwfalcwf8Pbb83bbalczfhlkdnaiam9pmbaiczfhoaral9RcL0mekkaiam6mialTmidnakTmbawaPfRbbhOcbhoazhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkkazcefhzaPcefgPad6hsalhHaPad9hmexvkkcbhlasceGmdxikalaxad2fhCdnakTmbcbhHcehsawcjdfhminaral9Rax6mialTmdalaxfhlawaHfRbbhOcbhoamhiinaiawcj;cbfaofRbbgAce4cbaAceG9R7aOfgO86bbaiadfhiaocefgoak9hmbkamcefhmaHcefgHad6hsaHad9hmbkaChlxikcbhocehsinaral9Rax6mdalTmealaxfhlaocefgoad6hsadao9hmbkaChlxdkcbhlasceGTmekc9:hoxikabaqad2fawcjdfakad2z1jjjb8Aawawcjdfakcufad2fadz1jjjb8Aakaqfhqalmbkc9:hoxekcbc99aral9Radcaadca0ESEhokavcj;ebf8Kjjjjbaok;yzeHu8Jjjjjbc;ae9Rgv8Kjjjjbc9:hodnaeci9UgrcHfal0mbcuhoaiRbbgwc;WeGc;Ge9hmbawcsGgDce0mbavc;abfcFecjez:jjjjb8AavcUf9cu83ibavc8Wf9cu83ibavcyf9cu83ibavcaf9cu83ibavcKf9cu83ibavczf9cu83ibav9cu83iwav9cu83ibaialfc9WfhqaicefgwarfhodnaeTmbcmcsaDceSEhkcbhxcbhmcbhDcbhicbhlindnaoaq9nmbc9:hoxikdndnawRbbgrc;Ve0mbavc;abfalarcl4cu7fcsGcitfgPydlhsaPydbhzdnarcsGgPak9pmbavaiarcu7fcsGcdtfydbaxaPEhraPThPdndnadcd9hmbabaDcetfgHaz87ebaHcdfas87ebaHclfar87ebxekabaDcdtfgHazBdbaHclfasBdbaHcwfarBdbkaxaPfhxavc;abfalcitfgHarBdbaHasBdlavaicdtfarBdbavc;abfalcefcsGglcitfgHazBdbaHarBdlaiaPfhialcefhlxdkdndnaPcsSmbamaPfaPc987fcefhmxekaocefhrao8SbbgPcFeGhHdndnaPcu9mmbarhoxekaocvfhoaHcFbGhHcrhPdninar8SbbgOcFbGaPtaHVhHaOcu9kmearcefhraPcrfgPc8J9hmbxdkkarcefhokaHce4cbaHceG9R7amfhmkdndnadcd9hmbabaDcetfgraz87ebarcdfas87ebarclfam87ebxekabaDcdtfgrazBdbarclfasBdbarcwfamBdbkavc;abfalcitfgramBdbarasBdlavaicdtfamBdbavc;abfalcefcsGglcitfgrazBdbaramBdlaicefhialcefhlxekdnarcpe0mbaxcefgOavaiaqarcsGfRbbgPcl49RcsGcdtfydbaPcz6gHEhravaiaP9RcsGcdtfydbaOaHfgsaPcsGgOEhPaOThOdndnadcd9hmbabaDcetfgzax87ebazcdfar87ebazclfaP87ebxekabaDcdtfgzaxBdbazclfarBdbazcwfaPBdbkavaicdtfaxBdbavc;abfalcitfgzarBdbazaxBdlavaicefgicsGcdtfarBdbavc;abfalcefcsGcitfgzaPBdbazarBdlavaiaHfcsGgicdtfaPBdbavc;abfalcdfcsGglcitfgraxBdbaraPBdlalcefhlaiaOfhiasaOfhxxekaxcbaoRbbgzEgAarc;:eSgrfhsazcsGhCazcl4hXdndnazcs0mbascefhOxekashOavaiaX9RcsGcdtfydbhskdndnaCmbaOcefhxxekaOhxavaiaz9RcsGcdtfydbhOkdndnarTmbaocefhrxekaocdfhrao8SbegHcFeGhPdnaHcu9kmbaocofhAaPcFbGhPcrhodninar8SbbgHcFbGaotaPVhPaHcu9kmearcefhraocrfgoc8J9hmbkaAhrxekarcefhrkaPce4cbaPceG9R7amfgmhAkdndnaXcsSmbarhPxekarcefhPar8SbbgocFeGhHdnaocu9kmbarcvfhsaHcFbGhHcrhodninaP8SbbgrcFbGaotaHVhHarcu9kmeaPcefhPaocrfgoc8J9hmbkashPxekaPcefhPkaHce4cbaHceG9R7amfgmhskdndnaCcsSmbaPhoxekaPcefhoaP8SbbgrcFeGhHdnarcu9kmbaPcvfhOaHcFbGhHcrhrdninao8SbbgPcFbGartaHVhHaPcu9kmeaocefhoarcrfgrc8J9hmbkaOhoxekaocefhokaHce4cbaHceG9R7amfgmhOkdndnadcd9hmbabaDcetfgraA87ebarcdfas87ebarclfaO87ebxekabaDcdtfgraABdbarclfasBdbarcwfaOBdbkavc;abfalcitfgrasBdbaraABdlavaicdtfaABdbavc;abfalcefcsGcitfgraOBdbarasBdlavaicefgicsGcdtfasBdbavc;abfalcdfcsGcitfgraABdbaraOBdlavaiazcz6aXcsSVfgicsGcdtfaOBdbaiaCTaCcsSVfhialcifhlkawcefhwalcsGhlaicsGhiaDcifgDae6mbkkcbc99aoaqSEhokavc;aef8Kjjjjbaok:llevu8Jjjjjbcz9Rhvc9:hodnaecvfal0mbcuhoaiRbbc;:eGc;qe9hmbav9cb83iwaicefhraialfc98fhwdnaeTmbdnadcdSmbcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcdtfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfglBdbaoalBdbaDcefgDae9hmbxdkkcbhDindnaraw6mbc9:skarcefhoar8SbbglcFeGhidndnalcu9mmbaohrxekarcvfhraicFbGhicrhldninao8SbbgdcFbGaltaiVhiadcu9kmeaocefhoalcrfglc8J9hmbxdkkaocefhrkabaDcetfaicd4cbaice4ceG9R7avcwfaiceGcdtVgoydbfgl87ebaoalBdbaDcefgDae9hmbkkcbc99arawSEhokaok:Lvoeue99dud99eud99dndnadcl9hmbaeTmeindndnabcdfgd8Sbb:Yab8Sbbgi:Ygl:l:tabcefgv8Sbbgo:Ygr:l:tgwJbb;:9cawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai86bbdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad86bbdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad86bbabclfhbaecufgembxdkkaeTmbindndnabclfgd8Ueb:Yab8Uebgi:Ygl:l:tabcdfgv8Uebgo:Ygr:l:tgwJb;:FSawawNJbbbbawawJbbbb9GgDEgq:mgkaqaicb9iEalMgwawNakaqaocb9iEarMgqaqNMM:r:vglNJbbbZJbbb:;aDEMgr:lJbbb9p9DTmbar:Ohixekcjjjj94hikadai87ebdndnaqalNJbbbZJbbb:;aqJbbbb9GEMgq:lJbbb9p9DTmbaq:Ohdxekcjjjj94hdkavad87ebdndnawalNJbbbZJbbb:;awJbbbb9GEMgw:lJbbb9p9DTmbaw:Ohdxekcjjjj94hdkabad87ebabcwfhbaecufgembkkk;siliui99iue99dnaeTmbcbhiabhlindndnJ;Zl81Zalcof8UebgvciV:Y:vgoal8Ueb:YNgrJb;:FSNJbbbZJbbb:;arJbbbb9GEMgw:lJbbb9p9DTmbaw:OhDxekcjjjj94hDkalclf8Uebhqalcdf8UebhkabavcefciGaiVcetfaD87ebdndnaoak:YNgwJb;:FSNJbbbZJbbb:;awJbbbb9GEMgx:lJbbb9p9DTmbax:Ohkxekcjjjj94hkkabavcdfciGaiVcetfak87ebdndnaoaq:YNgoJb;:FSNJbbbZJbbb:;aoJbbbb9GEMgx:lJbbb9p9DTmbax:Ohqxekcjjjj94hqkabavcufciGaiVcetfaq87ebdndnJbbjZararN:tawawN:taoaoN:tgrJbbbbarJbbbb9GE:rJb;:FSNJbbbZMgr:lJbbb9p9DTmbar:Ohqxekcjjjj94hqkabavciGaiVcetfaq87ebalcwfhlaiclfhiaecufgembkkk9mbdnadcd4ae2geTmbinababydbgdcwtcw91:Yadce91cjjj;8ifcjjj98G::NUdbabclfhbaecufgembkkk9teiucbcbydj1jjbgeabcifc98GfgbBdj1jjbdndnabZbcztgd9nmbcuhiabad9RcFFifcz4nbcuSmekaehikaik;LeeeudndnaeabVciGTmbabhixekdndnadcz9pmbabhixekabhiinaiaeydbBdbaiclfaeclfydbBdbaicwfaecwfydbBdbaicxfaecxfydbBdbaiczfhiaeczfheadc9Wfgdcs0mbkkadcl6mbinaiaeydbBdbaeclfheaiclfhiadc98fgdci0mbkkdnadTmbinaiaeRbb86bbaicefhiaecefheadcufgdmbkkabk;aeedudndnabciGTmbabhixekaecFeGc:b:c:ew2hldndnadcz9pmbabhixekabhiinaialBdbaicxfalBdbaicwfalBdbaiclfalBdbaiczfhiadc9Wfgdcs0mbkkadcl6mbinaialBdbaiclfhiadc98fgdci0mbkkdnadTmbinaiae86bbaicefhiadcufgdmbkkabkkkebcjwklz9Kbb",i=WebAssembly.instantiate(s(r),{}).then((function(e){(n=e.instance).exports.__wasm_call_ctors()}));function s(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;++r){var i=e.charCodeAt(r);n[r]=i>96?i-97:i>64?i-39:i+4}var s=0;for(r=0;r<e.length;++r)n[s++]=n[r]<60?t[n[r]]:64*(n[r]-60)+n[++r];return n.buffer.slice(0,s)}function o(e,t,r,i,s,o){var a=n.exports.sbrk,c=r+3&-4,l=a(c*i),u=a(s.length),h=new Uint8Array(n.exports.memory.buffer);h.set(s,u);var d=e(l,r,i,u,s.length);if(0==d&&o&&o(l,c,i),t.set(h.subarray(l,l+r*i)),a(l-a(0)),0!=d)throw new Error("Malformed buffer data: "+d)}var a={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},c={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"},l=[],u=0;function h(e){var t={object:new Worker(e),pending:0,requests:{}};return t.object.onmessage=function(e){var n=e.data;t.pending-=n.count,t.requests[n.id][n.action](n.value),delete t.requests[n.id]},t}function d(e){for(var t="var instance; var ready = WebAssembly.instantiate(new Uint8Array(["+new Uint8Array(s(r))+"]), {}).then(function(result) { instance = result.instance; instance.exports.__wasm_call_ctors(); });self.onmessage = workerProcess;"+o.toString()+p.toString(),n=new Blob([t],{type:"text/javascript"}),i=URL.createObjectURL(n),a=0;a<e;++a)l[a]=h(i);URL.revokeObjectURL(i)}function p(e){i.then((function(){var t=e.data;try{var r=new Uint8Array(t.count*t.size);o(n.exports[t.mode],r,t.count,t.size,t.source,n.exports[t.filter]),self.postMessage({id:t.id,count:t.count,action:"resolve",value:r},[r.buffer])}catch(e){self.postMessage({id:t.id,count:t.count,action:"reject",value:e})}}))}return{ready:i,supported:!0,useWorkers:function(e){d(e)},decodeVertexBuffer:function(e,t,r,i,s){o(n.exports.meshopt_decodeVertexBuffer,e,t,r,i,n.exports[a[s]])},decodeIndexBuffer:function(e,t,r,i){o(n.exports.meshopt_decodeIndexBuffer,e,t,r,i)},decodeIndexSequence:function(e,t,r,i){o(n.exports.meshopt_decodeIndexSequence,e,t,r,i)},decodeGltfBuffer:function(e,t,r,i,s,l){o(n.exports[c[s]],e,t,r,i,n.exports[a[l]])},decodeGltfBufferAsync:function(e,t,r,s,h){return l.length>0?function(e,t,n,r,i){for(var s=l[0],o=1;o<l.length;++o)l[o].pending<s.pending&&(s=l[o]);return new Promise((function(o,a){var c=new Uint8Array(n),l=u++;s.pending+=e,s.requests[l]={resolve:o,reject:a},s.object.postMessage({id:l,count:e,size:t,source:c,mode:r,filter:i},[c.buffer])}))}(e,t,r,c[s],a[h]):i.then((function(){var i=new Uint8Array(e*t);return o(n.exports[c[s]],i,e,t,r,n.exports[a[h]]),i}))}}}()},9777:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=function(){var e=0,t=document.createElement("div");function n(e){return t.appendChild(e.dom),e}function i(n){for(var r=0;r<t.children.length;r++)t.children[r].style.display=r===n?"block":"none";e=n}t.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",t.addEventListener("click",(function(n){n.preventDefault(),i(++e%t.children.length)}),!1);var s=(performance||Date).now(),o=s,a=0,c=n(new r.Panel("FPS","#0ff","#002")),l=n(new r.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=n(new r.Panel("MB","#f08","#201"));return i(0),{REVISION:16,dom:t,addPanel:n,showPanel:i,begin:function(){s=(performance||Date).now()},end:function(){a++;var e=(performance||Date).now();if(l.update(e-s,200),e>=o+1e3&&(c.update(1e3*a/(e-o),100),o=e,a=0,u)){var t=performance.memory;u.update(t.usedJSHeapSize/1048576,t.jsHeapSizeLimit/1048576)}return e},update:function(){s=this.end()},domElement:t,setMode:i}};r.Panel=function(e,t,n){var r=1/0,i=0,s=Math.round,o=s(window.devicePixelRatio||1),a=80*o,c=48*o,l=3*o,u=2*o,h=3*o,d=15*o,p=74*o,f=30*o,m=document.createElement("canvas");m.width=a,m.height=c,m.style.cssText="width:80px;height:48px";var g=m.getContext("2d");return g.font="bold "+9*o+"px Helvetica,Arial,sans-serif",g.textBaseline="top",g.fillStyle=n,g.fillRect(0,0,a,c),g.fillStyle=t,g.fillText(e,l,u),g.fillRect(h,d,p,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h,d,p,f),{dom:m,update:function(c,A){r=Math.min(r,c),i=Math.max(i,c),g.fillStyle=n,g.globalAlpha=1,g.fillRect(0,0,a,d),g.fillStyle=t,g.fillText(s(c)+" "+e+" ("+s(r)+"-"+s(i)+")",l,u),g.drawImage(m,h+o,d,p-o,f,h,d,p-o,f),g.fillRect(h+p-o,d,o,f),g.fillStyle=n,g.globalAlpha=.9,g.fillRect(h+p-o,d,o,s((1-c/A)*f))}}};const i=r},4302:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RectAreaLightUniformsLib:()=>i});var r=n(9437);class i{static init(){const e=[1,0,0,2e-5,1,0,0,503905e-9,1,0,0,.00201562,1,0,0,.00453516,1,0,0,.00806253,1,0,0,.0125978,1,0,0,.018141,1,0,0,.0246924,1,0,0,.0322525,1,0,0,.0408213,1,0,0,.0503999,1,0,0,.0609894,1,0,0,.0725906,1,0,0,.0852058,1,0,0,.0988363,1,0,0,.113484,1,0,0,.129153,1,0,0,.145839,1,0,0,.163548,1,0,0,.182266,1,0,0,.201942,1,0,0,.222314,1,0,0,.241906,1,0,0,.262314,1,0,0,.285754,1,0,0,.310159,1,0,0,.335426,1,0,0,.361341,1,0,0,.387445,1,0,0,.412784,1,0,0,.438197,1,0,0,.466966,1,0,0,.49559,1,0,0,.523448,1,0,0,.549938,1,0,0,.57979,1,0,0,.608746,1,0,0,.636185,1,0,0,.664748,1,0,0,.69313,1,0,0,.71966,1,0,0,.747662,1,0,0,.774023,1,0,0,.799775,1,0,0,.825274,1,0,0,.849156,1,0,0,.873248,1,0,0,.89532,1,0,0,.917565,1,0,0,.937863,1,0,0,.958139,1,0,0,.976563,1,0,0,.994658,1,0,0,1.0112,1,0,0,1.02712,1,0,0,1.04189,1,0,0,1.05568,1,0,0,1.06877,1,0,0,1.08058,1,0,0,1.09194,1,0,0,1.10191,1,0,0,1.11161,1,0,0,1.1199,1,0,0,1.12813,.999547,-4.48815e-7,.0224417,199902e-10,.999495,-113079e-10,.0224406,503651e-9,.999496,-452317e-10,.0224406,.00201461,.999496,-101772e-9,.0224406,.00453287,.999495,-180928e-9,.0224406,.00805845,.999497,-282702e-9,.0224406,.0125914,.999496,-407096e-9,.0224406,.0181319,.999498,-554114e-9,.0224406,.02468,.999499,-723768e-9,.0224406,.0322363,.999495,-916058e-9,.0224405,.0408009,.999499,-.00113101,.0224408,.050375,.999494,-.00136863,.0224405,.0609586,.999489,-.00162896,.0224401,.0725537,.999489,-.00191201,.0224414,.0851619,.999498,-.00221787,.0224413,.0987867,.999492,-.00254642,.0224409,.113426,.999507,-.00289779,.0224417,.129088,.999494,-.0032716,.0224386,.145767,.999546,-.0036673,.0224424,.163472,.999543,-.00408166,.0224387,.182182,.999499,-.00450056,.0224338,.201843,.999503,-.00483661,.0224203,.222198,.999546,-.00452928,.022315,.241714,.999508,-.00587403,.0224329,.262184,.999509,-.00638806,.0224271,.285609,.999501,-.00691028,.0224166,.309998,.999539,-.00741979,.0223989,.335262,.999454,-.00786282,.0223675,.361154,.999529,-.00811928,.0222828,.387224,.999503,-.00799941,.0221063,.41252,.999561,-.00952753,.0223057,.438006,.999557,-.0099134,.0222065,.466735,.999541,-.0100935,.0220402,.495332,.999562,-.00996821,.0218067,.523197,.999556,-.0105031,.0217096,.550223,.999561,-.0114191,.0217215,.579498,.999588,-.0111818,.0213357,.608416,.999633,-.0107725,.0208689,.635965,.999527,-.0121671,.0210149,.664476,.999508,-.0116005,.020431,.692786,.999568,-.0115604,.0199791,.719709,.999671,-.0121117,.0197415,.74737,.999688,-.0110769,.0188846,.773692,.99962,-.0122368,.0188452,.799534,.999823,-.0110325,.0178001,.825046,.999599,-.0114923,.0174221,.849075,.999619,-.0105923,.0164345,.872999,.999613,-.0105988,.0158227,.895371,.99964,-.00979861,.0148131,.917364,.99977,-.00967238,.0140721,.938002,.999726,-.00869175,.0129543,.957917,.99973,-.00866872,.0122329,.976557,.999773,-.00731956,.0108958,.994459,.999811,-.00756027,.0102715,1.01118,.999862,-.00583732,.00878781,1.02701,.999835,-.00631438,.00827529,1.04186,.999871,-.00450785,.00674583,1.05569,.999867,-.00486079,.00621041,1.06861,.999939,-.00322072,.00478301,1.08064,.999918,-.00318199,.00406395,1.09181,1.00003,-.00193348,.00280682,1.10207,.999928,-.00153729,.00198741,1.11152,.999933,-623666e-9,917714e-9,1.12009,1,-102387e-11,9.07581e-7,1.12813,.997866,-8.96716e-7,.0448334,199584e-10,.997987,-225945e-10,.0448389,502891e-9,.997987,-903781e-10,.0448388,.00201156,.997985,-203351e-9,.0448388,.00452602,.997986,-361514e-9,.0448388,.00804629,.997987,-56487e-8,.0448389,.0125724,.997988,-813423e-9,.0448389,.0181045,.997984,-.00110718,.0448387,.0246427,.997985,-.00144616,.0448388,.0321875,.997987,-.00183038,.044839,.0407392,.997983,-.00225987,.0448387,.0502986,.997991,-.00273467,.0448389,.0608667,.997984,-.00325481,.0448384,.0724444,.998002,-.00382043,.044839,.0850348,.997997,-.00443145,.0448396,.0986372,.998007,-.00508796,.0448397,.113255,.998008,-.00578985,.04484,.128891,.998003,-.00653683,.0448384,.145548,.997983,-.00732713,.0448358,.163221,.997985,-.00815454,.0448358,.181899,.998005,-.00898985,.0448286,.201533,.998026,-.00964404,.0447934,.221821,.998055,-.00922677,.044611,.241282,.99804,-.0117361,.0448245,.261791,.998048,-.0127628,.0448159,.285181,.998088,-.0138055,.0447996,.30954,.998058,-.0148206,.0447669,.334751,.998099,-.0156998,.044697,.36061,.998116,-.0161976,.0445122,.386603,.998195,-.015945,.0441711,.411844,.998168,-.0183947,.0444255,.43773,.998184,-.0197913,.0443809,.466009,.998251,-.0201426,.0440689,.494574,.998305,-.0198847,.0435632,.522405,.998273,-.0210577,.043414,.549967,.998254,-.0227901,.0433943,.578655,.998349,-.0223108,.0426529,.60758,.99843,-.0223088,.042,.635524,.998373,-.0241141,.0418987,.663621,.998425,-.0231446,.0408118,.691906,.998504,-.0233684,.0400565,.719339,.998443,-.0241652,.0394634,.74643,.99848,-.0228715,.0380002,.773086,.998569,-.023519,.0372322,.798988,.998619,-.0223108,.0356468,.824249,.998594,-.0223105,.034523,.848808,.998622,-.0213426,.0328887,.87227,.998669,-.0207912,.0314374,.895157,.998705,-.0198416,.0296925,.916769,.998786,-.0189168,.0279634,.937773,.998888,-.0178811,.0261597,.957431,.99906,-.0166845,.0242159,.976495,.999038,-.0155464,.0222638,.994169,.999237,-.0141349,.0201967,1.01112,.999378,-.0129324,.0181744,1.02692,.999433,-.0113192,.0159898,1.04174,.999439,-.0101244,.0140385,1.05559,.999614,-.00837456,.0117826,1.06852,.999722,-.00721769,.00983745,1.08069,.999817,-.00554067,.00769002,1.09176,.99983,-.00426961,.005782,1.10211,.999964,-.00273904,.00374503,1.11152,1.00001,-.00136739,.00187176,1.12031,.999946,393227e-10,-28919e-9,1.12804,.995847,-13435e-10,.0671785,19916e-9,.995464,-338387e-10,.0671527,501622e-9,.99547,-135355e-9,.0671531,.00200649,.995471,-30455e-8,.0671532,.00451461,.99547,-541423e-9,.0671531,.008026,.995471,-84598e-8,.0671531,.0125407,.99547,-.00121823,.0671531,.0180589,.99547,-.00165817,.0671531,.0245806,.995463,-.00216583,.0671526,.0321062,.995468,-.00274127,.0671527,.0406366,.995474,-.00338447,.0671534,.0501717,.995473,-.00409554,.0671533,.0607131,.995478,-.00487451,.0671531,.0722618,.995476,-.00572148,.0671532,.0848191,.995477,-.00663658,.0671539,.0983882,.995498,-.00761986,.0671541,.112972,.995509,-.00867094,.0671542,.128568,.995509,-.00978951,.0671531,.145183,.995503,-.0109725,.0671491,.162808,.995501,-.012211,.0671465,.181441,.99553,-.0134565,.0671371,.201015,.99555,-.014391,.0670831,.221206,.99558,-.014351,.0668883,.240813,.995577,-.0173997,.0671055,.261257,.995602,-.0191111,.0671178,.284467,.995623,-.0206705,.0670946,.308765,.995658,-.022184,.0670472,.333905,.995705,-.0234832,.0669417,.359677,.995719,-.0241933,.0666714,.385554,.995786,-.0243539,.066266,.410951,.995887,-.0271866,.0664367,.437163,.995944,-.0296012,.0664931,.464842,.996004,-.0301045,.0660105,.49332,.996128,-.0298311,.0652694,.521131,.996253,-.0316426,.0650739,.549167,.996244,-.0339043,.0649433,.57737,.996309,-.033329,.0638926,.606073,.996417,-.0338935,.0630849,.634527,.996372,-.0353104,.0625083,.66256,.996542,-.0348942,.0611986,.690516,.996568,-.0351614,.060069,.718317,.996711,-.0354317,.0588522,.74528,.996671,-.0349513,.0571902,.772061,.996865,-.0345622,.0555321,.798089,.996802,-.0342566,.0537816,.823178,.996992,-.0330862,.0516095,.847949,.996944,-.0324666,.0495537,.871431,.997146,-.0309544,.0470302,.894357,.997189,-.0299372,.0446043,.916142,.997471,-.0281389,.0418812,.937193,.997515,-.0268702,.0391823,.957,.997812,-.0247166,.0361338,.975936,.998027,-.0233525,.0333945,.99391,.998233,-.0209839,.0301917,1.01075,.998481,-.0194309,.027271,1.02669,.998859,-.0169728,.0240162,1.04173,.99894,-.0152322,.0210517,1.05551,.999132,-.0127497,.0178632,1.06856,.999369,-.0108282,.014787,1.08054,.999549,-.00845886,.0116185,1.09185,.999805,-.0063937,.00867209,1.10207,.99985,-.00414582,.00566823,1.1117,.999912,-.00207443,.00277562,1.12022,1.00001,870226e-10,-53766e-9,1.12832,.991943,-178672e-11,.0893382,198384e-10,.991952,-450183e-10,.089339,499849e-9,.991956,-180074e-9,.0893394,.0019994,.991955,-405167e-9,.0893393,.00449867,.991953,-720298e-9,.0893391,.00799764,.991955,-.00112548,.0893393,.0124964,.991957,-.0016207,.0893395,.0179951,.991958,-.00220601,.0893396,.0244939,.991947,-.00288137,.0893385,.0319929,.991962,-.00364693,.0893399,.0404933,.991965,-.00450264,.0893399,.049995,.99198,-.00544862,.0893411,.0604995,.99197,-.00648491,.0893397,.0720074,.991976,-.00761164,.089341,.0845207,.99198,-.00882891,.0893405,.0980413,.991982,-.0101367,.0893396,.112571,.992008,-.011535,.0893415,.128115,.992026,-.0130228,.0893414,.144672,.992064,-.0145966,.0893418,.162241,.992041,-.0162421,.0893359,.180801,.992086,-.0178888,.0893214,.200302,.992157,-.0190368,.0892401,.220332,.992181,-.0195584,.0890525,.240144,.992175,-.0227257,.0892153,.260728,.99221,-.0254195,.089304,.283473,.99222,-.0274883,.0892703,.307673,.992317,-.0294905,.0892027,.332729,.992374,-.0311861,.0890577,.358387,.992505,-.0320656,.0886994,.384102,.992568,-.0329715,.0883198,.409767,.992675,-.036006,.0883602,.436145,.992746,-.0392897,.0884591,.463217,.992873,-.0399337,.0878287,.491557,.992934,-.040231,.0870108,.519516,.993091,-.0422013,.0865857,.547741,.993259,-.0443503,.0861937,.575792,.993455,-.0446368,.0851187,.604233,.993497,-.0454299,.0840576,.632925,.993694,-.0463296,.0829671,.660985,.993718,-.0470619,.0817185,.688714,.993973,-.0468838,.0800294,.716743,.994207,-.046705,.0781286,.74377,.994168,-.0469698,.0763337,.77042,.9945,-.0456816,.0738184,.796659,.994356,-.0455518,.0715545,.821868,.994747,-.0439488,.0686085,.846572,.994937,-.0430056,.065869,.870435,.995142,-.0413414,.0626446,.893272,.995451,-.0396521,.05929,.915376,.995445,-.0378453,.0558503,.936196,.995967,-.0355219,.0520949,.956376,.996094,-.0335146,.048377,.975327,.996622,-.030682,.0442575,.993471,.996938,-.0285504,.0404693,1.01052,.997383,-.0253399,.0360903,1.02637,.997714,-.0231651,.0322176,1.04139,.998249,-.0198138,.0278433,1.05542,.998596,-.0174337,.0238759,1.06846,.998946,-.0141349,.0195944,1.08056,.99928,-.0115603,.0156279,1.09181,.999507,-.00839065,.0114607,1.10213,.999697,-.005666,.00763325,1.11169,.999869,-.00269902,.00364946,1.12042,1.00001,623836e-10,-319288e-10,1.12832,.987221,-222675e-11,.111332,197456e-10,.98739,-561116e-10,.111351,497563e-9,.987448,-224453e-9,.111357,.00199031,.987441,-505019e-9,.111357,.0044782,.987442,-897816e-9,.111357,.00796129,.987442,-.00140284,.111357,.0124396,.987444,-.00202012,.111357,.0179132,.987442,-.00274964,.111357,.0243824,.987446,-.00359147,.111357,.0318474,.987435,-.00454562,.111356,.0403086,.987461,-.00561225,.111358,.0497678,.987458,-.00679125,.111358,.0602239,.987443,-.0080828,.111356,.0716792,.987476,-.0094872,.111358,.0841364,.98749,-.0110044,.111361,.097597,.987508,-.0126344,.111362,.112062,.987494,-.0143767,.111357,.127533,.987526,-.0162307,.111359,.144015,.987558,-.0181912,.111361,.161502,.987602,-.0202393,.111355,.179979,.987692,-.022273,.111346,.199386,.987702,-.0235306,.111215,.219183,.987789,-.0247628,.111061,.239202,.987776,-.0280668,.111171,.259957,.987856,-.0316751,.111327,.282198,.987912,-.0342468,.111282,.306294,.988,-.0367205,.111198,.331219,.988055,-.0387766,.110994,.356708,.988241,-.0397722,.110547,.382234,.988399,-.0416076,.110198,.408227,.988539,-.0448192,.110137,.434662,.988661,-.0483793,.110143,.461442,.988967,-.0495895,.109453,.489318,.989073,-.0506797,.108628,.517516,.989274,-.0526953,.108003,.545844,.989528,-.054578,.107255,.573823,.989709,-.0561503,.106294,.601944,.989991,-.056866,.104896,.630855,.990392,-.0572914,.103336,.658925,.990374,-.0586224,.10189,.686661,.990747,-.0584764,.099783,.714548,.991041,-.0582662,.0974309,.74186,.991236,-.0584118,.0951678,.768422,.991585,-.0573055,.0921581,.794817,.991984,-.0564241,.0891167,.820336,.9921,-.0553608,.085805,.84493,.992749,-.0533816,.0820354,.868961,.99288,-.0518661,.0782181,.891931,.993511,-.0492492,.0738935,.914186,.993617,-.0471956,.0696402,.93532,.99411,-.044216,.0649659,.95543,.994595,-.0416654,.0603177,.974685,.994976,-.0384314,.0553493,.992807,.995579,-.0353491,.0503942,1.00996,.996069,-.0319787,.0452123,1.02606,.996718,-.028472,.0400112,1.04114,.997173,-.0250789,.0349456,1.05517,.997818,-.0213326,.029653,1.0683,.998318,-.0178509,.024549,1.0805,.998853,-.0141118,.0194197,1.09177,.999218,-.0105914,.0143869,1.1022,.999594,-.00693474,.00943517,1.11175,.99975,-.00340478,.00464051,1.12056,1.00001,109172e-9,-112821e-9,1.12853,.983383,-266524e-11,.133358,196534e-10,.981942,-671009e-10,.133162,494804e-9,.981946,-268405e-9,.133163,.00197923,.981944,-603912e-9,.133163,.00445326,.981941,-.00107362,.133162,.00791693,.981946,-.00167755,.133163,.0123703,.981944,-.00241569,.133162,.0178135,.981945,-.00328807,.133163,.0242466,.981945,-.00429472,.133162,.03167,.981955,-.00543573,.133164,.0400846,.981951,-.00671105,.133163,.0494901,.981968,-.00812092,.133165,.0598886,.981979,-.00966541,.133166,.0712811,.981996,-.0113446,.133168,.083669,.982014,-.0131585,.133169,.0970533,.982011,-.0151073,.133167,.111438,.982062,-.0171906,.133172,.126826,.9821,-.0194067,.133175,.143215,.982149,-.0217502,.133176,.160609,.982163,-.0241945,.133173,.178981,.982247,-.0265907,.133148,.198249,.982291,-.027916,.132974,.217795,.982396,-.0299663,.132868,.238042,.982456,-.0334544,.132934,.258901,.982499,-.0378636,.133137,.280639,.982617,-.0409274,.133085,.304604,.98274,-.0438523,.132985,.329376,.982944,-.0462288,.132728,.354697,.98308,-.0475995,.132228,.380102,.983391,-.0501901,.131924,.406256,.983514,-.0535899,.131737,.432735,.98373,-.0571858,.131567,.459359,.984056,-.0592353,.130932,.486637,.984234,-.0610488,.130092,.51509,.984748,-.0630758,.12923,.543461,.985073,-.0647398,.128174,.571376,.985195,-.0671941,.127133,.599414,.985734,-.0681345,.125576,.628134,.986241,-.0686089,.123639,.656399,.986356,-.0698511,.121834,.684258,.986894,-.0700931,.119454,.711818,.987382,-.0698321,.116718,.739511,.988109,-.0693975,.113699,.766267,.988363,-.0689584,.110454,.792456,.989112,-.0672353,.106602,.81813,.989241,-.0662034,.10267,.842889,.990333,-.0638938,.0981381,.867204,.990591,-.0618534,.0935388,.89038,.991106,-.0593117,.088553,.912576,.991919,-.0562676,.0832187,.934118,.992111,-.0534085,.0778302,.954254,.992997,-.0495459,.0720453,.973722,.993317,-.0463707,.0663458,.991949,.994133,-.0421245,.0601883,1.00936,.994705,-.0384977,.0542501,1.02559,.995495,-.0340956,.0479862,1.04083,.996206,-.030105,.041887,1.05497,.996971,-.0256095,.0355355,1.06824,.997796,-.0213932,.0293655,1.08056,.998272,-.0169612,.0232926,1.09182,.998857,-.0126756,.0172786,1.10219,.99939,-.00832486,.0113156,1.11192,.999752,-.00410826,.00557892,1.12075,1,150957e-9,-119101e-9,1.12885,.975169,-309397e-11,.154669,195073e-10,.975439,-779608e-10,.154712,491534e-9,.975464,-311847e-9,.154716,.00196617,.975464,-701656e-9,.154716,.00442387,.975462,-.0012474,.154715,.0078647,.975461,-.00194906,.154715,.0122886,.975464,-.00280667,.154715,.0176959,.975468,-.00382025,.154716,.0240867,.975471,-.00498985,.154716,.0314612,.975472,-.00631541,.154717,.0398199,.975486,-.00779719,.154718,.0491639,.975489,-.00943505,.154718,.0594932,.975509,-.0112295,.154721,.0708113,.97554,-.0131802,.154724,.0831176,.975557,-.0152876,.154726,.096415,.975585,-.0175512,.154728,.110705,.975605,-.0199713,.154729,.125992,.975645,-.0225447,.154729,.142272,.975711,-.0252649,.154735,.159549,.975788,-.0280986,.154736,.177805,.975872,-.0308232,.154704,.196911,.975968,-.0324841,.154525,.216324,.976063,-.0351281,.154432,.236628,.976157,-.0388618,.15446,.257539,.976204,-.0437704,.154665,.278975,.976358,-.047514,.154652,.302606,.976571,-.0508638,.154535,.327204,.976725,-.0534995,.154221,.352276,.977013,-.0555547,.153737,.377696,.977294,-.0586728,.153403,.403855,.977602,-.0622715,.15312,.430333,.977932,-.0658166,.152755,.456855,.978241,-.0689877,.152233,.483668,.978602,-.0712805,.15132,.512097,.979234,-.0732775,.150235,.540455,.97977,-.075163,.148978,.568486,.979995,-.0778026,.147755,.596524,.98078,-.0791854,.146019,.624825,.981628,-.0799666,.143906,.653403,.982067,-.0808532,.141561,.681445,.98271,-.0816024,.139025,.708918,.983734,-.0812511,.135764,.736594,.98431,-.0806201,.132152,.763576,.985071,-.0801605,.12846,.789797,.98618,-.0784208,.124084,.815804,.986886,-.0766643,.1193,.840869,.987485,-.0747744,.114236,.864952,.988431,-.0716701,.108654,.888431,.988886,-.0691609,.102994,.910963,.990024,-.0654048,.0967278,.932629,.990401,-.0619765,.090384,.95313,.991093,-.0579296,.0837885,.972587,.992018,-.0536576,.0770171,.991184,.992536,-.0493719,.0701486,1.00863,.993421,-.0444813,.062953,1.02494,.993928,-.040008,.0560455,1.04017,.994994,-.0347982,.04856,1.05463,.995866,-.0301017,.0416152,1.06807,.996916,-.0248225,.0342597,1.08039,.997766,-.0199229,.0271668,1.09177,.998479,-.0147422,.0201387,1.10235,.99921,-.00980173,.0131944,1.11206,.999652,-.0047426,.00640712,1.12104,.999998,891673e-10,-10379e-8,1.12906,.967868,-351885e-11,.175947,193569e-10,.968001,-886733e-10,.175972,487782e-9,.96801,-354697e-9,.175973,.00195115,.968012,-798063e-9,.175974,.00439006,.968011,-.00141879,.175973,.00780461,.968011,-.00221686,.175973,.0121948,.968016,-.00319231,.175974,.0175607,.968019,-.00434515,.175974,.0239027,.968018,-.00567538,.175974,.0312208,.968033,-.00718308,.175977,.0395158,.968049,-.00886836,.175979,.0487885,.968047,-.0107312,.175978,.0590394,.968072,-.0127719,.175981,.0702705,.968108,-.0149905,.175986,.0824836,.968112,-.0173866,.175985,.0956783,.968173,-.0199611,.175993,.109862,.96827,-.0227128,.176008,.125033,.968292,-.025639,.17601,.141193,.968339,-.0287299,.176007,.158336,.968389,-.0319399,.176001,.176441,.968501,-.034941,.175962,.195359,.968646,-.0370812,.175793,.214686,.968789,-.0402329,.175708,.234973,.96886,-.0442601,.1757,.255871,.969013,-.049398,.175876,.277238,.969242,-.0539932,.17594,.300326,.969419,-.0577299,.175781,.324702,.969763,-.0605643,.175432,.349527,.970093,-.0634488,.174992,.374976,.970361,-.0670589,.174611,.401097,.970825,-.0708246,.174226,.427496,.971214,-.0742871,.173684,.453858,.971622,-.0782608,.173186,.480637,.972175,-.0813151,.172288,.508655,.972944,-.0832678,.170979,.536973,.973595,-.0855964,.169573,.565138,.974345,-.0882163,.168152,.593222,.975233,-.0901671,.166314,.621201,.976239,-.0912111,.163931,.649919,.977289,-.0916959,.161106,.678011,.978076,-.0927061,.158272,.705717,.979533,-.0925562,.15475,.733228,.980335,-.0918159,.150638,.760454,.981808,-.0908508,.146201,.786918,.983061,-.0896172,.141386,.812953,.984148,-.0871588,.135837,.838281,.985047,-.0850624,.130135,.862594,.986219,-.0818541,.123882,.88633,.987043,-.0784523,.117126,.908952,.988107,-.0749601,.110341,.930744,.988955,-.0703548,.102885,.951728,.989426,-.0662798,.0954167,.971166,.990421,-.0610834,.0876331,.989984,.991032,-.0562936,.0797785,1.00765,.992041,-.0508154,.0718166,1.02434,.992794,-.0454045,.0637125,1.03976,.993691,-.0398194,.0555338,1.05418,.994778,-.0341482,.0473388,1.06772,.995915,-.028428,.0391016,1.08028,.997109,-.022642,.0309953,1.09185,.998095,-.0168738,.0230288,1.10247,.998985,-.0111274,.0150722,1.11229,.999581,-.00543881,.00740605,1.12131,1.00003,162239e-9,-105549e-9,1.12946,.959505,-393734e-11,.196876,191893e-10,.959599,-992157e-10,.196895,483544e-9,.959641,-396868e-9,.196903,.0019342,.959599,-892948e-9,.196895,.00435193,.959603,-.00158747,.196896,.0077368,.959604,-.00248042,.196896,.0120888,.959605,-.00357184,.196896,.0174082,.959605,-.00486169,.196896,.0236949,.959613,-.00635008,.196897,.0309497,.959619,-.00803696,.196898,.0391725,.959636,-.00992255,.196901,.0483649,.959634,-.0120067,.1969,.0585266,.959675,-.0142898,.196906,.0696609,.959712,-.0167717,.196911,.0817678,.959752,-.0194524,.196918,.0948494,.959807,-.0223321,.196925,.10891,.959828,-.0254091,.196924,.123947,.959906,-.0286815,.196934,.139968,.960005,-.0321371,.196944,.156968,.960071,-.0357114,.196936,.17491,.960237,-.0389064,.196882,.193597,.960367,-.041623,.196731,.21285,.960562,-.0452655,.196654,.233075,.960735,-.0496207,.196643,.253941,.960913,-.0549379,.196774,.275278,.961121,-.0603414,.196893,.297733,.96139,-.0644244,.196717,.321877,.961818,-.067556,.196314,.346476,.962175,-.0712709,.195917,.371907,.96255,-.0752848,.1955,.397916,.963164,-.0792073,.195026,.424229,.963782,-.0828225,.194424,.450637,.964306,-.0873119,.193831,.477288,.964923,-.0911051,.192973,.504716,.966048,-.093251,.19151,.533053,.967024,-.0958983,.190013,.561366,.968038,-.09835,.188253,.589464,.969152,-.100754,.186257,.617433,.970557,-.102239,.183775,.645801,.972104,-.102767,.180645,.674278,.973203,-.103492,.177242,.702004,.975123,-.103793,.17345,.729529,.97641,-.102839,.168886,.756712,.978313,-.101687,.163892,.783801,.980036,-.100314,.158439,.809671,.981339,-.097836,.152211,.835402,.982794,-.0950006,.145679,.860081,.984123,-.0920994,.138949,.883757,.984918,-.0878641,.131283,.90685,.985999,-.083939,.123464,.928786,.987151,-.0791234,.115324,.94983,.987827,-.0739332,.106854,.96962,.988806,-.0688088,.0982691,.98861,.989588,-.0628962,.0893456,1.00667,.990438,-.0573146,.0805392,1.02344,.991506,-.0509433,.0713725,1.03933,.992492,-.0448724,.0623732,1.05378,.993663,-.0383497,.0530838,1.06747,.994956,-.0319593,.0439512,1.08007,.99634,-.025401,.0347803,1.09182,.99761,-.0189687,.0257954,1.1025,.99863,-.0124441,.0169893,1.11247,.99947,-.00614003,.00829498,1.12151,1.00008,216624e-9,-146107e-9,1.12993,.950129,-434955e-11,.217413,190081e-10,.950264,-10957e-8,.217444,47884e-8,.9503,-438299e-9,.217451,.00191543,.950246,-986124e-9,.21744,.00430951,.950246,-.00175311,.21744,.00766137,.950245,-.00273923,.21744,.011971,.950253,-.00394453,.217441,.0172385,.950258,-.00536897,.217442,.0234641,.950267,-.00701262,.217444,.030648,.950277,-.00887551,.217446,.038791,.950284,-.0109576,.217446,.0478931,.950312,-.0132591,.217451,.0579568,.950334,-.01578,.217454,.0689821,.950378,-.0185204,.217462,.0809714,.950417,-.0214803,.217467,.0939265,.950488,-.0246594,.217479,.10785,.950534,-.0280565,.217483,.122743,.950633,-.0316685,.217498,.138611,.950698,-.0354787,.217499,.155442,.950844,-.0394003,.217507,.173208,.950999,-.0426812,.217419,.191605,.951221,-.0461302,.217317,.21084,.951412,-.0502131,.217238,.230945,.951623,-.0549183,.21722,.251745,.951867,-.0604493,.217306,.273001,.952069,-.0665189,.217466,.294874,.952459,-.0709179,.217266,.318732,.952996,-.0746112,.216891,.34318,.953425,-.0789252,.216503,.36849,.953885,-.0833293,.216042,.394373,.954617,-.087371,.215469,.420505,.955429,-.0914054,.214802,.446907,.956068,-.0961671,.214146,.473522,.957094,-.10048,.213286,.50052,.958372,-.103248,.211796,.528715,.959654,-.106033,.21016,.557065,.961305,-.108384,.208149,.585286,.962785,-.111122,.206024,.613334,.964848,-.112981,.203442,.641334,.966498,-.113717,.19996,.669955,.968678,-.114121,.196105,.698094,.970489,-.114524,.191906,.725643,.972903,-.113792,.186963,.752856,.974701,-.112406,.181343,.780013,.976718,-.110685,.175185,.806268,.978905,-.108468,.168535,.832073,.980267,-.105061,.161106,.857149,.981967,-.101675,.153387,.881145,.983063,-.0974492,.145199,.904255,.984432,-.0925815,.136527,.926686,.985734,-.0877983,.127584,.947901,.986228,-.081884,.118125,.968111,.98719,-.0761208,.108594,.98719,.988228,-.0698196,.0989996,1.00559,.989046,-.0632739,.0890074,1.02246,.990242,-.056522,.0790832,1.03841,.991252,-.0495272,.0689182,1.05347,.992542,-.0425373,.0588592,1.06724,.994096,-.0353198,.0486833,1.08009,.995593,-.028235,.0385977,1.09177,.99711,-.0209511,.0286457,1.10274,.998263,-.0139289,.0188497,1.11262,.999254,-.0067359,.009208,1.12191,.999967,141846e-9,-657764e-10,1.13024,.935608,-474692e-11,.236466,187817e-10,.93996,-11971e-8,.237568,473646e-9,.939959,-478845e-9,.237567,.0018946,.939954,-.0010774,.237566,.00426284,.939956,-.00191538,.237566,.00757842,.939954,-.00299277,.237566,.0118413,.93996,-.00430961,.237567,.0170518,.939969,-.00586589,.237569,.02321,.939982,-.00766166,.237572,.0303164,.939987,-.00969686,.237572,.0383711,.939997,-.0119715,.237574,.0473751,.940031,-.0144858,.237581,.0573298,.940073,-.0172399,.237589,.0682366,.94012,-.0202335,.237598,.080097,.940162,-.0234663,.237604,.0929116,.940237,-.0269387,.237615,.106686,.940328,-.0306489,.237632,.121421,.940419,-.0345917,.237645,.137115,.940522,-.0387481,.237654,.153766,.940702,-.0429906,.237661,.17133,.940871,-.0465089,.237561,.189502,.941103,-.050531,.23748,.208616,.941369,-.0550657,.237423,.228595,.941641,-.0601337,.237399,.249287,.941903,-.0658804,.237443,.270467,.942224,-.0722674,.237597,.292024,.942633,-.0771788,.237419,.315272,.943172,-.0815623,.237068,.339579,.943691,-.0863973,.236682,.364717,.944382,-.0911536,.236213,.390435,.945392,-.0952967,.235562,.416425,.946185,-.0998948,.234832,.442772,.947212,-.104796,.234114,.469347,.948778,-.10928,.233222,.496162,.950149,-.113081,.231845,.523978,.951989,-.115893,.230005,.552295,.953921,-.11846,.227862,.580569,.955624,-.12115,.225439,.608698,.958234,-.123373,.222635,.636696,.960593,-.124519,.219093,.665208,.963201,-.124736,.214749,.693557,.965642,-.125012,.210059,.721334,.968765,-.124661,.204935,.748613,.971753,-.122996,.198661,.776224,.973751,-.120998,.191823,.802461,.976709,-.118583,.184359,.828399,.977956,-.115102,.176437,.853693,.979672,-.111077,.167681,.877962,.981816,-.10688,.158872,.901564,.98238,-.101469,.149398,.924057,.983964,-.0960013,.139436,.945751,.984933,-.0899626,.12943,.966272,.985694,-.0832973,.11894,.985741,.986822,-.0767082,.108349,1.00407,.987725,-.0693614,.0976026,1.02154,.98877,-.06211,.086652,1.03757,.990129,-.0544143,.0756182,1.05296,.991337,-.046744,.0645753,1.06683,.992978,-.0387931,.0534683,1.0798,.994676,-.030973,.0424137,1.09181,.99645,-.0230311,.0314035,1.10286,.997967,-.0152065,.0206869,1.11291,.99922,-.00744837,.010155,1.12237,1.00002,240209e-9,-752767e-10,1.13089,.922948,-515351e-11,.255626,186069e-10,.928785,-129623e-9,.257244,468009e-9,.928761,-51849e-8,.257237,.00187202,.928751,-.0011666,.257235,.00421204,.928751,-.00207395,.257234,.0074881,.928754,-.00324055,.257235,.0117002,.92876,-.00466639,.257236,.0168486,.928763,-.00635149,.257237,.0229334,.928774,-.00829584,.257239,.029955,.928791,-.0104995,.257243,.0379139,.928804,-.0129623,.257245,.0468108,.928847,-.0156846,.257255,.0566473,.92889,-.0186661,.257263,.0674246,.928924,-.0219067,.257268,.0791433,.928989,-.0254066,.257282,.0918076,.92909,-.0291651,.257301,.105419,.92918,-.0331801,.257316,.119978,.92929,-.0374469,.257332,.135491,.929453,-.041939,.257357,.151948,.929586,-.0464612,.257347,.169275,.929858,-.0503426,.257269,.187257,.930125,-.0548409,.257199,.206204,.930403,-.0598063,.257149,.22601,.930726,-.0652437,.257122,.246561,.931098,-.0712376,.257153,.267618,.931396,-.0777506,.257237,.288993,.931947,-.0832374,.257124,.311527,.932579,-.0883955,.25683,.335697,.933194,-.0937037,.256444,.360634,.934013,-.0987292,.255939,.386126,.935307,-.103215,.255282,.412018,.936374,-.108234,.254538,.438292,.93776,-.113234,.253728,.464805,.939599,-.118013,.25275,.491464,.941036,-.122661,.251404,.518751,.94337,-.125477,.249435,.547133,.945318,-.128374,.247113,.575456,.947995,-.130996,.244441,.60372,.950818,-.133438,.241352,.63174,.954378,-.135004,.237849,.659971,.957151,-.135313,.233188,.688478,.960743,-.13521,.228001,.716767,.964352,-.135007,.222249,.744349,.967273,-.133523,.21542,.771786,.969767,-.131155,.208039,.798639,.973195,-.128492,.200076,.824774,.975557,-.125094,.191451,.850222,.977692,-.120578,.18184,.874761,.98026,-.115882,.172102,.898497,.981394,-.110372,.161859,.921636,.982386,-.10415,.15108,.943467,.983783,-.0978128,.140407,.964045,.98422,-.0906171,.129058,.98398,.985447,-.0832921,.117614,1.00276,.986682,-.0754412,.10585,1.02047,.987326,-.0673885,.0940943,1.03678,.988707,-.0592565,.0822093,1.05218,.990185,-.050717,.070192,1.06652,.991866,-.0423486,.0582081,1.07965,.993897,-.0336118,.0460985,1.09188,.995841,-.0252178,.0342737,1.10307,.997605,-.0164893,.0224829,1.11324,.999037,-.00817112,.0110647,1.12262,1.00003,291686e-9,-168673e-9,1.13139,.915304,-552675e-11,.275999,183285e-10,.91668,-139285e-9,.276414,461914e-9,.916664,-55713e-8,.276409,.00184763,.916653,-.00125354,.276406,.00415715,.916651,-.00222851,.276405,.00739053,.916655,-.00348205,.276406,.0115478,.916653,-.00501414,.276405,.0166291,.916667,-.00682478,.276409,.0226346,.91668,-.00891398,.276412,.0295648,.91669,-.0112817,.276413,.0374199,.916727,-.013928,.276422,.0462016,.916759,-.0168528,.276429,.0559101,.916793,-.0200558,.276436,.0665466,.916849,-.0235373,.276448,.0781139,.916964,-.0272973,.276474,.0906156,.917047,-.0313344,.276491,.104051,.917152,-.0356465,.276511,.118424,.917286,-.0402271,.276533,.133736,.917469,-.0450408,.276564,.149978,.917686,-.0497872,.276563,.167057,.917953,-.0540937,.276493,.184846,.918228,-.0590709,.276437,.203614,.918572,-.0644277,.276398,.223212,.918918,-.0702326,.276362,.243584,.919356,-.076484,.276383,.264465,.919842,-.0830808,.276434,.285701,.920451,-.0892972,.276407,.307559,.921113,-.095016,.276128,.331501,.921881,-.100771,.275754,.356207,.923027,-.106029,.275254,.381477,.924364,-.111029,.274595,.40722,.925818,-.116345,.273841,.433385,.92746,-.121424,.272913,.459848,.929167,-.12657,.271837,.486493,.931426,-.131581,.270575,.513432,.934001,-.135038,.268512,.541502,.936296,-.138039,.266135,.569658,.939985,-.140687,.263271,.598375,.943516,-.143247,.260058,.626563,.94782,-.145135,.256138,.654711,.951023,-.145733,.251154,.683285,.955338,-.145554,.245562,.711831,.959629,-.145008,.239265,.739573,.963123,-.144003,.232064,.767027,.966742,-.141289,.224036,.794359,.969991,-.138247,.215305,.820361,.973403,-.134786,.206051,.846548,.975317,-.129966,.195914,.871541,.977647,-.12471,.185184,.895313,.980137,-.119086,.174161,.918398,.981031,-.112297,.162792,.940679,.982037,-.105372,.150952,.961991,.983164,-.097821,.138921,.981913,.983757,-.0897245,.126611,1.00109,.985036,-.0815974,.114228,1.01902,.986289,-.0727725,.101389,1.03604,.987329,-.0639323,.0886476,1.05149,.989193,-.0548109,.0756837,1.06619,.990716,-.045687,.0627581,1.07948,.992769,-.0364315,.0498337,1.09172,.99524,-.0271761,.0370305,1.1033,.997154,-.0179609,.0243959,1.11353,.998845,-.00878063,.0119567,1.12319,1.00002,259038e-9,-108146e-9,1.13177,.903945,-591681e-11,.295126,181226e-10,.903668,-148672e-9,.295037,455367e-9,.903677,-594683e-9,.29504,.00182145,.903673,-.00133805,.295039,.00409831,.903666,-.00237872,.295036,.00728584,.903668,-.00371676,.295037,.0113842,.903679,-.00535212,.29504,.0163936,.903684,-.00728479,.295041,.0223141,.903698,-.00951473,.295044,.0291462,.903718,-.0120419,.295049,.0368904,.903754,-.0148664,.295058,.0455477,.903801,-.017988,.29507,.0551194,.903851,-.0214064,.295082,.0656058,.903921,-.0251219,.295097,.0770109,.904002,-.0291337,.295116,.0893354,.904111,-.033441,.29514,.102583,.904246,-.0380415,.295169,.116755,.904408,-.0429258,.295202,.131853,.904637,-.0480468,.295245,.147869,.904821,-.0529208,.295214,.164658,.905163,-.0577748,.295185,.182274,.905469,-.0631763,.295143,.200828,.905851,-.068917,.295112,.2202,.906322,-.0750861,.295104,.240372,.906761,-.0815855,.295086,.261082,.90735,-.0882138,.295095,.282123,.908087,-.095082,.295139,.303563,.908826,-.101488,.29492,.327028,.909832,-.107577,.294577,.351464,.911393,-.113033,.294115,.376497,.912804,-.118629,.293446,.402115,.914081,-.124232,.292581,.428111,.91637,-.129399,.29166,.454442,.91814,-.134892,.290422,.481024,.921179,-.140069,.289194,.507924,.924544,-.144431,.287421,.535557,.927995,-.147498,.284867,.563984,.931556,-.150197,.281722,.5923,.935777,-.152711,.278207,.620832,.940869,-.154836,.274148,.649069,.945994,-.155912,.269057,.677746,.949634,-.155641,.262799,.706293,.955032,-.154809,.256097,.734278,.95917,-.153678,.248618,.761751,.962931,-.151253,.239794,.789032,.966045,-.147625,.230281,.815422,.96971,-.143964,.220382,.841787,.972747,-.139464,.209846,.867446,.975545,-.133459,.198189,.892004,.978381,-.127424,.186362,.915458,.979935,-.120506,.173964,.937948,.980948,-.11282,.161429,.959732,.982234,-.104941,.148557,.980118,.982767,-.0962905,.135508,.999463,.983544,-.0873625,.122338,1.01756,.984965,-.0783447,.108669,1.03492,.986233,-.0684798,.0949911,1.05087,.987796,-.0590867,.0811386,1.0656,.989885,-.0489145,.0673099,1.0794,.991821,-.0391,.0535665,1.09174,.99448,-.029087,.0397529,1.10341,.996769,-.019114,.0261463,1.11383,.998641,-.00947007,.0128731,1.1237,.999978,446316e-9,-169093e-9,1.13253,.888362,-627064e-11,.312578,178215e-10,.889988,-157791e-9,.313148,448451e-9,.889825,-631076e-9,.313092,.00179356,.88984,-.00141994,.313097,.00403554,.889828,-.0025243,.313092,.00717429,.889831,-.00394421,.313093,.0112099,.889831,-.00567962,.313093,.0161425,.889844,-.00773051,.313096,.0219724,.889858,-.0100968,.3131,.0286999,.889882,-.0127786,.313106,.0363256,.889918,-.0157757,.313116,.0448509,.889967,-.0190878,.313129,.0542758,.89003,-.022715,.313145,.0646032,.890108,-.0266566,.313165,.0758339,.890218,-.0309131,.313193,.0879729,.890351,-.0354819,.313226,.101019,.89051,-.0403613,.313263,.114979,.890672,-.0455385,.313294,.129848,.890882,-.0509444,.313333,.145616,.891189,-.0559657,.313324,.162122,.891457,-.0613123,.313281,.179524,.891856,-.0671488,.313281,.197855,.892312,-.0732732,.313268,.216991,.892819,-.0797865,.313263,.236924,.893369,-.0865269,.313247,.257433,.894045,-.0931592,.313205,.278215,.894884,-.100532,.313276,.299467,.895832,-.107716,.313205,.322276,.897043,-.114099,.312873,.34642,.898515,-.119941,.312331,.371187,.900191,-.126044,.311731,.396656,.90188,-.131808,.310859,.422488,.904359,-.137289,.309857,.448744,.906923,-.142991,.308714,.475239,.910634,-.148253,.307465,.501983,.914502,-.153332,.305774,.529254,.919046,-.156646,.303156,.557709,.923194,-.159612,.299928,.586267,.928858,-.162027,.296245,.614925,.934464,-.164203,.291832,.643187,.939824,-.165602,.286565,.671601,.944582,-.165383,.280073,.700213,.949257,-.164439,.272891,.728432,.954389,-.162953,.264771,.756082,.958595,-.161007,.255927,.78369,.962138,-.157243,.245769,.810769,.966979,-.152872,.235127,.836999,.969566,-.148209,.22347,.862684,.972372,-.142211,.211147,.887847,.975916,-.135458,.198606,.911843,.978026,-.128398,.185498,.934795,.979686,-.120313,.17171,.956787,.980748,-.11166,.158159,.978046,.981622,-.103035,.144399,.997693,.982356,-.0930328,.13001,1.01642,.983308,-.0834627,.115778,1.03366,.985037,-.0732249,.101327,1.05014,.986493,-.0628145,.086554,1.06507,.988484,-.0526556,.0720413,1.07907,.991051,-.0415744,.0571151,1.09189,.993523,-.0314275,.0426643,1.10369,.99628,-.0203603,.0279325,1.11423,.998344,-.0102446,.0138182,1.12421,.999997,42612e-8,-193628e-9,1.1333,.871555,-660007e-11,.329176,174749e-10,.875255,-166579e-9,.330571,441051e-9,.875644,-666394e-9,.330718,.00176441,.875159,-.00149903,.330536,.00396899,.87516,-.00266493,.330536,.007056,.875158,-.00416393,.330535,.0110251,.87516,-.00599598,.330535,.0158764,.875163,-.00816108,.330536,.0216101,.875174,-.0106591,.330538,.0282266,.875199,-.0134899,.330545,.0357266,.875257,-.0166538,.330563,.0441117,.875304,-.0201501,.330575,.0533821,.875373,-.0239785,.330595,.0635395,.875464,-.0281389,.330619,.0745872,.875565,-.0326301,.330645,.0865255,.875691,-.0374516,.330676,.0993599,.875897,-.0425993,.330733,.113093,.876091,-.0480576,.330776,.127722,.876353,-.0537216,.330826,.143227,.876649,-.0589807,.330809,.159462,.877034,-.0647865,.330819,.176642,.877443,-.0709789,.330817,.194702,.877956,-.0774782,.330832,.213577,.878499,-.0843175,.330822,.233246,.879144,-.0912714,.330804,.253512,.879982,-.0980824,.330766,.274137,.88097,-.105823,.330864,.295209,.882051,-.113671,.330896,.317226,.883397,-.120303,.330545,.341068,.884987,-.12667,.330068,.365613,.886789,-.133118,.329418,.390807,.889311,-.139024,.328683,.416494,.891995,-.144971,.327729,.442618,.895106,-.150747,.326521,.469131,.899527,-.156283,.325229,.495921,.90504,-.161707,.32378,.523162,.909875,-.165661,.32122,.55092,.91561,-.168755,.317942,.579928,.921225,-.171193,.313983,.608539,.927308,-.17319,.309636,.636854,.933077,-.174819,.304262,.66523,.938766,-.175002,.297563,.693609,.943667,-.173946,.289613,.722157,.949033,-.172221,.281227,.750021,.953765,-.169869,.271545,.777466,.95804,-.166578,.261034,.804853,.962302,-.161761,.249434,.831569,.966544,-.156636,.237484,.857779,.969372,-.150784,.224395,.883051,.972486,-.143672,.210786,.907864,.975853,-.135772,.196556,.931223,.977975,-.127942,.182307,.954061,.979122,-.118347,.167607,.97531,.980719,-.109112,.152739,.995666,.981223,-.0991789,.137932,1.01475,.98216,-.0883553,.122692,1.03253,.983379,-.0780825,.107493,1.04917,.985434,-.0665646,.0917791,1.06464,.987332,-.0557714,.0764949,1.07896,.990004,-.0442805,.060721,1.09199,.992975,-.0331676,.0452284,1.10393,.995811,-.0219547,.0297934,1.11476,.9982,-.0107613,.0146415,1.12484,1.00002,248678e-9,-14555e-8,1.13413,.859519,-693595e-11,.347264,171673e-10,.859843,-17503e-8,.347394,433219e-9,.859656,-700076e-9,.347319,.00173277,.859671,-.00157517,.347325,.00389875,.859669,-.00280028,.347324,.00693112,.85967,-.0043754,.347324,.01083,.859665,-.00630049,.347321,.0155954,.859685,-.0085755,.347328,.0212278,.859694,-.0112003,.347329,.0277273,.859718,-.0141747,.347336,.0350946,.85976,-.0174988,.347348,.0433314,.85982,-.0211722,.347366,.0524384,.859892,-.0251941,.347387,.0624168,.860006,-.0295649,.347422,.0732708,.860122,-.0342825,.347453,.0849999,.860282,-.0393462,.347499,.0976102,.860482,-.0447513,.347554,.111104,.860719,-.0504775,.347614,.125479,.860998,-.0563577,.347666,.140703,.861322,-.0619473,.347662,.156681,.861724,-.0681277,.347684,.173597,.862198,-.0746567,.347709,.191371,.862733,-.0815234,.347727,.209976,.863371,-.0886643,.347744,.229351,.86414,-.0957908,.347734,.24934,.865138,-.102912,.34772,.269797,.866182,-.110924,.3478,.290654,.867436,-.119223,.347911,.312074,.869087,-.126197,.347649,.335438,.870859,-.133145,.347222,.359732,.872997,-.139869,.346645,.38467,.875939,-.146089,.345935,.41019,.879012,-.152334,.345012,.436218,.883353,-.15821,.343924,.462641,.888362,-.164097,.342636,.489449,.895026,-.169528,.341351,.516629,.900753,-.174408,.339115,.544109,.906814,-.17751,.335809,.572857,.912855,-.180101,.331597,.601554,.919438,-.182116,.32698,.630198,.925962,-.183494,.321449,.658404,.931734,-.184159,.314595,.686625,.93762,-.18304,.306462,.71531,.943858,-.181323,.297514,.744272,.948662,-.178683,.287447,.771462,.953299,-.175379,.276166,.798593,.957346,-.170395,.263758,.8256,.962565,-.165042,.251019,.852575,.966075,-.158655,.237011,.878316,.969048,-.151707,.222518,.90329,.972423,-.143271,.207848,.927745,.975833,-.134824,.192463,.950859,.977629,-.125444,.1768,.972947,.978995,-.114949,.161033,.993263,.980533,-.104936,.145523,1.01337,.980745,-.0935577,.129799,1.03128,.981814,-.0822956,.113486,1.04825,.983943,-.0710082,.0972925,1.06405,.986141,-.0587931,.0808138,1.0785,.988878,-.0472755,.0644915,1.09204,.992132,-.0349128,.0478128,1.10413,.9953,-.0232407,.031621,1.11527,.998117,-.0112713,.0154935,1.12551,1.00003,339743e-9,-195763e-9,1.13504,.845441,-729126e-11,.364305,169208e-10,.843588,-183164e-9,.363506,425067e-9,.843412,-73253e-8,.36343,.00169999,.843401,-.00164818,.363426,.00382495,.843399,-.00293008,.363425,.00679993,.843401,-.00457822,.363425,.010625,.843394,-.00659249,.363421,.0153002,.843398,-.00897282,.363421,.0208258,.843415,-.0117191,.363426,.0272024,.843438,-.0148312,.363432,.0344305,.843483,-.018309,.363447,.0425116,.84356,-.0221521,.363472,.0514471,.843646,-.0263597,.363499,.061238,.843743,-.0309315,.363527,.0718873,.84388,-.0358658,.363569,.0833969,.844079,-.0411624,.363631,.0957742,.844279,-.0468128,.363688,.109015,.844549,-.0527923,.363761,.123124,.844858,-.0588204,.363817,.138044,.84522,-.0647573,.36383,.153755,.845669,-.0713181,.363879,.170394,.846155,-.0781697,.363908,.187861,.846789,-.0853913,.363969,.206176,.847502,-.0928086,.363999,.225244,.8484,-.10005,.363997,.244926,.849461,-.107615,.364008,.265188,.850562,-.115814,.364055,.28587,.851962,-.124334,.364179,.306926,.854326,-.131995,.364233,.329605,.856295,-.139338,.363856,.35359,.858857,-.146346,.363347,.37831,.862428,-.152994,.362807,.403722,.866203,-.159463,.361963,.429537,.871629,-.165623,.36112,.456,.877365,-.171649,.359917,.482773,.883744,-.177151,.35848,.509705,.890693,-.182381,.356523,.537215,.897278,-.186076,.3533,.565493,.903958,-.188602,.349095,.594293,.910908,-.190755,.344215,.623165,.918117,-.192063,.338606,.651573,.924644,-.192758,.331544,.679869,.931054,-.192238,.323163,.708668,.937303,-.190035,.313529,.737201,.943387,-.187162,.303152,.764977,.948494,-.183876,.29146,.792683,.952546,-.178901,.277917,.819228,.958077,-.173173,.264753,.846559,.962462,-.16645,.25002,.872962,.966569,-.159452,.234873,.898729,.969108,-.15074,.218752,.923126,.973072,-.141523,.202673,.947278,.975452,-.132075,.186326,.969938,.977784,-.121257,.169396,.991325,.97899,-.110182,.153044,1.01123,.979777,-.0989634,.136485,1.0299,.980865,-.0865894,.119343,1.04727,.982432,-.0746115,.102452,1.06341,.984935,-.0621822,.0852423,1.07834,.987776,-.0495694,.0678546,1.092,.99103,-.0372386,.0506917,1.1043,.99474,-.0244353,.0333316,1.11576,.997768,-.0121448,.0164348,1.12617,1.00003,31774e-8,-169504e-9,1.13598,.825551,-756799e-11,.378425,165099e-10,.82664,-190922e-9,.378923,416504e-9,.826323,-763495e-9,.378779,.0016656,.826359,-.00171789,.378795,.00374768,.82636,-.00305402,.378795,.00666259,.826368,-.00477185,.378798,.0104104,.826364,-.00687131,.378795,.0149912,.826368,-.00935232,.378795,.0204054,.826376,-.0122146,.378797,.0266532,.826399,-.0154581,.378803,.0337355,.82646,-.0190825,.378824,.0416537,.826525,-.0230873,.378846,.0504091,.826614,-.0274719,.378876,.0600032,.82674,-.0322355,.378917,.0704393,.826888,-.0373766,.378964,.0817195,.827078,-.0428936,.379024,.0938492,.827318,-.0487778,.379099,.106828,.82764,-.0549935,.379199,.120659,.827926,-.0611058,.379227,.13526,.828325,-.0675054,.379275,.150713,.828801,-.0743455,.379332,.167034,.8294,-.0815523,.379415,.184209,.830094,-.0890779,.379495,.202203,.8309,-.096736,.379555,.220945,.831943,-.104135,.379577,.240306,.833037,-.112106,.379604,.260317,.834278,-.120554,.379668,.2808,.836192,-.129128,.3799,.301654,.838671,-.137541,.380109,.323502,.840939,-.14523,.379809,.347176,.844575,-.15248,.379593,.371706,.848379,-.159607,.37909,.39688,.853616,-.166267,.378617,.422702,.858921,-.172698,.377746,.448919,.865324,-.178823,.376749,.475661,.872207,-.184542,.375363,.502599,.880018,-.189836,.373657,.529914,.88694,-.194294,.370673,.557683,.894779,-.197022,.36662,.586848,.902242,-.199108,.36138,.615831,.909914,-.200398,.355434,.644478,.917088,-.20094,.348173,.672905,.923888,-.200671,.339482,.701327,.930495,-.198773,.32956,.730101,.937247,-.195394,.318363,.758383,.943108,-.191956,.306323,.786539,.948296,-.187227,.292576,.813637,.953472,-.181165,.278234,.840793,.958485,-.174119,.263054,.867712,.962714,-.166564,.246756,.893635,.966185,-.158181,.229945,.919028,.970146,-.148275,.212633,.943413,.973491,-.138157,.195229,.966627,.975741,-.127574,.178048,.988817,.977238,-.11554,.160312,1.00924,.978411,-.10364,.142857,1.02845,.979811,-.0913122,.125317,1.04648,.98116,-.0782558,.107627,1.06284,.983543,-.0655957,.0895862,1.07798,.986789,-.0520411,.0713756,1.092,.990292,-.0389727,.053228,1.10484,.994187,-.025808,.0351945,1.11642,.997499,-.0126071,.0173198,1.12703,.999999,275604e-9,-148602e-9,1.13674,.81075,-78735e-10,.394456,161829e-10,.808692,-198293e-9,.393453,407564e-9,.80846,-792877e-9,.39334,.00162965,.808595,-.00178416,.393407,.00366711,.808597,-.00317182,.393408,.00651934,.808598,-.00495589,.393408,.0101866,.808591,-.00713627,.393403,.0146689,.808592,-.00971285,.393402,.0199667,.80861,-.0126855,.393407,.0260803,.808633,-.0160538,.393413,.0330107,.80868,-.0198175,.393429,.0407589,.808748,-.0239758,.393453,.0493264,.808854,-.0285286,.39349,.0587161,.808992,-.0334748,.39354,.0689304,.809141,-.0388116,.393588,.0799707,.809352,-.0445375,.39366,.0918432,.809608,-.0506427,.393742,.104549,.809915,-.0570708,.393834,.118085,.810253,-.0633526,.393885,.132377,.810687,-.0700966,.393953,.147537,.811233,-.0772274,.394047,.163543,.811865,-.0847629,.394148,.180394,.812648,-.0925663,.394265,.198051,.813583,-.100416,.394363,.216443,.814683,-.108119,.394402,.235502,.815948,-.11644,.394489,.255242,.817278,-.125036,.394542,.275441,.819605,-.133655,.39486,.296094,.822256,-.142682,.395248,.317309,.825349,-.150756,.395241,.340516,.829605,-.158392,.395285,.364819,.83391,-.165801,.394922,.389736,.839808,-.172677,.394691,.415409,.845708,-.179448,.394006,.441546,.853025,-.185746,.393279,.46832,.859666,-.191684,.391655,.495302,.86789,-.197146,.390068,.52262,.875845,-.201904,.38727,.550336,.882634,-.205023,.382688,.578825,.891076,-.207098,.377543,.608103,.900589,-.208474,.371752,.63723,.90791,-.209068,.364016,.665769,.915971,-.208655,.355593,.694428,.923455,-.20729,.345439,.723224,.931514,-.203821,.334099,.751925,.937885,-.19986,.321069,.780249,.943136,-.194993,.306571,.8077,.948818,-.189132,.291556,.83497,.954433,-.181617,.275745,.86188,.959078,-.173595,.258695,.888562,.962705,-.164855,.240825,.914008,.966753,-.155129,.22268,.939145,.970704,-.144241,.204542,.963393,.973367,-.133188,.185927,.985983,.975984,-.121146,.167743,1.00704,.976994,-.108366,.149218,1.02715,.978485,-.0956746,.13131,1.0455,.980074,-.0820733,.112513,1.06221,.98225,-.0684061,.0938323,1.07782,.98553,-.0549503,.0749508,1.09199,.989529,-.0407857,.055848,1.10508,.993536,-.0271978,.0368581,1.11684,.997247,-.0132716,.0181845,1.12789,1,431817e-9,-198809e-9,1.13792,.785886,-812608e-11,.405036,157669e-10,.790388,-205278e-9,.407355,398297e-9,.790145,-820824e-9,.407231,.00159263,.790135,-.00184681,.407226,.00358336,.790119,-.00328316,.407218,.00637039,.790126,-.00512988,.40722,.0099539,.79013,-.00738684,.407221,.0143339,.790135,-.0100538,.407221,.0195107,.790134,-.0131306,.407217,.0254848,.79016,-.0166169,.407224,.0322572,.790197,-.020512,.407236,.0398284,.790273,-.0248157,.407263,.0482014,.790381,-.029527,.407304,.0573777,.790521,-.0346446,.407355,.0673602,.790704,-.0401665,.40742,.0781522,.790925,-.0460896,.407499,.0897582,.791195,-.0524017,.407589,.10218,.791522,-.0590121,.407691,.11541,.791878,-.0654876,.407748,.12939,.792361,-.0725207,.407849,.144237,.792942,-.0799844,.407963,.159924,.79362,-.0877896,.408087,.176425,.794529,-.0958451,.408259,.193733,.795521,-.103827,.408362,.211756,.796778,-.111937,.408482,.230524,.798027,-.120521,.408547,.249967,.799813,-.129242,.408721,.269926,.802387,-.138048,.409148,.290338,.805279,-.147301,.409641,.311193,.809251,-.155895,.410154,.333611,.813733,-.163942,.410297,.357615,.819081,-.171666,.410373,.382339,.825427,-.178905,.410348,.407828,.83172,-.185812,.409486,.434034,.83877,-.192318,.408776,.460493,.845817,-.198249,.407176,.487346,.854664,-.204034,.405719,.514832,.863495,-.208908,.403282,.542401,.871883,-.212765,.399293,.570683,.88065,-.214911,.393803,.599947,.89004,-.216214,.387536,.62932,.898476,-.216745,.379846,.658319,.906738,-.216387,.370625,.687138,.914844,-.215053,.360139,.71601,.923877,-.212007,.348849,.745124,.931925,-.207481,.335639,.773366,.938054,-.202418,.320798,.801636,.943895,-.196507,.304772,.829055,.949468,-.189009,.288033,.856097,.955152,-.180539,.270532,.88301,.959403,-.171437,.251639,.909296,.963309,-.161661,.232563,.934868,.967399,-.150425,.213231,.959662,.972009,-.138659,.194247,.98302,.97433,-.126595,.174718,1.00517,.975823,-.113205,.155518,1.02566,.976371,-.0996096,.136709,1.04418,.978705,-.0860754,.117571,1.06146,.981477,-.0714438,.0980046,1.07777,.984263,-.0572304,.0782181,1.09214,.988423,-.0428875,.0584052,1.10553,.993,-.0282442,.038522,1.11758,.99704,-.0140183,.0190148,1.12864,.999913,369494e-9,-145203e-9,1.13901,.777662,-84153e-10,.423844,154403e-10,.770458,-211714e-9,.419915,38845e-8,.770716,-846888e-9,.420055,.00155386,.770982,-.00190567,.420202,.00349653,.770981,-.00338782,.420201,.00621606,.77098,-.00529338,.4202,.00971274,.770983,-.00762223,.4202,.0139867,.770985,-.0103741,.420198,.0190381,.770996,-.0135489,.4202,.0248677,.771029,-.0171461,.420212,.0314764,.771052,-.0211647,.420215,.0388648,.771131,-.0256048,.420245,.047036,.771235,-.0304647,.420284,.0559911,.771383,-.0357436,.420341,.0657346,.771591,-.0414392,.420423,.0762694,.771819,-.0475462,.420506,.0875984,.772123,-.0540506,.420617,.099727,.772464,-.060797,.42072,.112637,.772855,-.0675393,.420799,.126313,.773317,-.0748323,.420893,.140824,.773981,-.0825681,.421058,.15617,.774746,-.0906307,.421226,.172322,.77566,-.0988982,.421397,.189253,.776837,-.106994,.421569,.206912,.778097,-.115528,.421704,.225359,.779588,-.124317,.421849,.24447,.781574,-.133139,.422097,.264156,.784451,-.142179,.422615,.284318,.787682,-.15165,.423269,.304902,.792433,-.160771,.424396,.3265,.797359,-.169166,.424772,.35014,.803986,-.177149,.425475,.374768,.809504,-.184745,.424996,.399928,.815885,-.19173,.424247,.425796,.823513,-.198525,.423515,.452287,.832549,-.204709,.422787,.479321,.841653,-.210447,.421187,.506718,.850401,-.215501,.418519,.53432,.859854,-.219752,.414715,.56242,.869364,-.222305,.409462,.591558,.878837,-.223744,.402926,.621074,.888636,-.224065,.395043,.650538,.898132,-.223742,.38564,.679538,.907181,-.222308,.375378,.708674,.915621,-.219837,.363212,.737714,.9239,-.215233,.349313,.767014,.931644,-.209592,.334162,.795133,.938887,-.203644,.317943,.823228,.945282,-.196349,.300581,.850822,.950758,-.18742,.282195,.877594,.956146,-.177879,.262481,.904564,.960355,-.167643,.242487,.930741,.965256,-.156671,.222668,.955868,.968029,-.144123,.201907,.979869,.97251,-.131305,.18202,1.00291,.974925,-.118335,.161909,1.02392,.975402,-.103714,.142129,1.0433,.976987,-.089415,.122447,1.06089,.979677,-.0748858,.102248,1.07713,.983184,-.0596086,.0814851,1.09218,.987466,-.0447671,.0609484,1.10585,.992348,-.0295217,.0401835,1.11829,.996674,-.0143917,.0198163,1.12966,1.00003,321364e-9,-149983e-9,1.1402,.757901,-869074e-11,.436176,151011e-10,.751195,-217848e-9,.432317,378533e-9,.751178,-871373e-9,.432307,.0015141,.751195,-.00196061,.432317,.0034068,.751198,-.00348552,.432318,.00605659,.751195,-.00544599,.432315,.00946353,.751207,-.00784203,.43232,.013628,.751213,-.0106732,.43232,.0185499,.751221,-.0139393,.432319,.0242302,.751244,-.0176398,.432325,.0306694,.7513,-.0217743,.432348,.0378698,.751358,-.0263412,.432367,.0458321,.751458,-.0313396,.432404,.0545587,.751608,-.0367682,.432464,.0640543,.7518,-.0426246,.43254,.0743222,.752065,-.0489031,.432645,.0853668,.752376,-.0555828,.432762,.0971911,.752715,-.0623861,.432859,.109768,.753137,-.069415,.432958,.123126,.753676,-.0770039,.433099,.137308,.754345,-.084971,.433272,.15229,.755235,-.0932681,.433504,.168075,.756186,-.10171,.433693,.184625,.757363,-.110019,.433857,.201897,.75884,-.11887,.434102,.220014,.760467,-.127881,.434306,.238778,.762969,-.136766,.434751,.258172,.765823,-.14612,.43529,.278062,.769676,-.15566,.436236,.298437,.774909,-.165177,.437754,.319532,.77994,-.17402,.438343,.342505,.785757,-.182201,.438609,.366693,.792487,-.190104,.438762,.391668,.80038,-.197438,.438795,.417494,.808494,-.204365,.438226,.443933,.817695,-.210714,.437283,.470929,.828111,-.216651,.436087,.498569,.837901,-.221804,.433717,.526165,.847813,-.226318,.430133,.554155,.858314,-.229297,.425213,.582822,.868891,-.230999,.418576,.612847,.878941,-.231155,.410405,.642445,.888809,-.230935,.400544,.672024,.898089,-.229343,.389613,.701366,.908081,-.226886,.377197,.730763,.916819,-.222676,.363397,.759642,.924968,-.216835,.347437,.788775,.932906,-.210245,.32995,.817135,.940025,-.202992,.312262,.844912,.946101,-.19436,.293313,.872164,.952835,-.184125,.273638,.899443,.957347,-.173657,.252385,.926389,.961434,-.162204,.231038,.951947,.965522,-.14979,.209834,.976751,.969412,-.136307,.188821,1.00022,.973902,-.122527,.168013,1.02229,.974045,-.108213,.147634,1.04199,.975775,-.0927397,.12705,1.06019,.978383,-.0778212,.106309,1.07711,.98211,-.0621216,.0849279,1.09245,.986517,-.0463847,.0633519,1.10651,.991696,-.0309353,.0419698,1.11903,.996349,-.0150914,.0206272,1.13073,1.00003,442449e-9,-231396e-9,1.14146,.727498,-885074e-11,.441528,145832e-10,.730897,-223525e-9,.443589,368298e-9,.730796,-893996e-9,.443528,.00147303,.730805,-.00201149,.443533,.00331433,.730814,-.00357596,.443538,.00589222,.730815,-.00558734,.443538,.00920678,.730822,-.00804544,.44354,.0132582,.730836,-.0109501,.443545,.0180468,.730848,-.0143008,.443546,.0235732,.730871,-.0180969,.443552,.0298382,.730915,-.022338,.443567,.0368438,.730982,-.0270225,.443591,.044591,.731076,-.0321491,.443627,.0530831,.731245,-.0377166,.443699,.0623243,.73144,-.0437216,.443777,.0723181,.7317,-.0501576,.443881,.0830691,.732034,-.0569942,.444014,.0945809,.732388,-.0638756,.444113,.106825,.732853,-.071203,.444247,.119859,.733473,-.0790076,.444442,.13369,.734195,-.0871937,.444645,.148304,.735069,-.095696,.444877,.163702,.736169,-.10426,.445133,.179861,.73747,-.112853,.44537,.196778,.738991,-.12199,.445651,.214496,.740865,-.131153,.445958,.232913,.743637,-.140245,.446548,.251977,.746797,-.149722,.447246,.271551,.751517,-.159341,.448656,.291774,.756156,-.169106,.449866,.312455,.761519,-.178436,.450919,.334552,.768295,-.186904,.451776,.358491,.776613,-.195117,.452832,.383446,.783966,-.202695,.45249,.408945,.793542,-.20985,.452587,.435364,.803192,-.216403,.451852,.462336,.813892,-.22251,.450708,.48987,.824968,-.227676,.4486,.517697,.835859,-.232443,.445156,.545975,.846825,-.235775,.440351,.574483,.858085,-.237897,.433641,.604246,.868825,-.238074,.425354,.634101,.879638,-.237661,.415383,.664201,.889966,-.236186,.404136,.693918,.899479,-.233599,.390917,.723481,.908769,-.229737,.376352,.75258,.917966,-.223836,.360372,.781764,.926304,-.217067,.342551,.811139,.934626,-.209309,.324238,.839585,.941841,-.20071,.304484,.867044,.94789,-.190602,.283607,.894579,.954196,-.179253,.262205,.921743,.958383,-.167646,.239847,.948026,.963119,-.155073,.218078,.973296,.966941,-.141426,.195899,.998135,.970836,-.126849,.174121,1.02021,.973301,-.112296,.153052,1.04085,.97448,-.0964965,.131733,1.05946,.977045,-.080489,.10997,1.07693,.980751,-.064844,.0881657,1.09254,.985475,-.0481938,.0657987,1.10697,.991089,-.0319185,.0435215,1.12004,.996122,-.0158088,.0214779,1.13173,1.00001,372455e-9,-200295e-9,1.14291,.708622,-907597e-11,.45304,141962e-10,.711162,-228911e-9,.454662,358052e-9,.709812,-914446e-9,.453797,.00143034,.709865,-.00205819,.453834,.00321935,.709864,-.00365894,.453833,.00572331,.709855,-.00571692,.453826,.00894278,.709862,-.00823201,.453828,.012878,.709875,-.011204,.453832,.0175295,.709896,-.0146323,.453839,.0228978,.709925,-.0185163,.453847,.0289839,.709974,-.0228551,.453866,.0357894,.710045,-.0276473,.453892,.0433161,.710133,-.032891,.453924,.0515665,.710292,-.0385851,.453992,.0605458,.710485,-.0447254,.45407,.0702574,.710769,-.0513051,.454192,.0807077,.711106,-.0582733,.454329,.091896,.711516,-.0652866,.45446,.103814,.712071,-.0728426,.454653,.116508,.712676,-.0808307,.45484,.129968,.713476,-.0892216,.455096,.144206,.714377,-.0979047,.455346,.159212,.715579,-.106531,.455647,.174973,.716977,-.115492,.455961,.191504,.71862,-.124821,.456315,.208835,.72084,-.134079,.4568,.226869,.723786,-.143427,.457521,.245582,.727464,-.153061,.458475,.264957,.732771,-.162768,.460239,.284948,.736515,-.172627,.460899,.30522,.743519,-.182487,.463225,.326717,.750041,-.191295,.464027,.350113,.758589,-.199746,.465227,.374782,.767703,-.207584,.465877,.400226,.777484,-.214973,.465996,.426442,.788792,-.221796,.466019,.453688,.800194,-.228038,.465083,.481246,.811234,-.233346,.462506,.509086,.822859,-.238073,.459257,.537338,.835082,-.241764,.454863,.566108,.846332,-.244241,.448163,.595126,.858355,-.244736,.439709,.625574,.87034,-.244278,.429837,.65617,.881027,-.24255,.418002,.686029,.891007,-.239912,.404325,.716039,.900874,-.236133,.389222,.745518,.911072,-.230672,.373269,.775026,.920359,-.22356,.355083,.804521,.928604,-.215591,.335533,.834045,.937175,-.206503,.315278,.861612,.942825,-.196684,.293653,.889131,.949805,-.185116,.271503,.916853,.955535,-.172703,.248821,.943541,.959843,-.159978,.225591,.970132,.964393,-.146375,.202719,.994709,.968008,-.131269,.179928,1.0186,.971013,-.11569,.158007,1.03928,.973334,-.1003,.13624,1.05887,.975775,-.0833352,.1138,1.07652,.979579,-.0668981,.0913141,1.09297,.984323,-.0500902,.0683051,1.10734,.990351,-.0332377,.0451771,1.12084,.995823,-.0161491,.0221705,1.13296,1.0001,234083e-9,-108712e-9,1.14441,.683895,-924677e-11,.46015,137429e-10,.68833,-233383e-9,.463134,346865e-9,.688368,-933547e-9,.463159,.00138748,.688367,-.00210049,.463159,.00312187,.688369,-.00373415,.463159,.00555004,.688377,-.00583449,.463163,.00867216,.688386,-.00840128,.463166,.0124884,.688398,-.0114343,.463169,.0169993,.688418,-.0149329,.463175,.0222054,.688453,-.0188964,.463188,.028108,.688515,-.0233239,.463214,.0347085,.68857,-.0282136,.463231,.0420091,.688679,-.033564,.463276,.0500132,.688854,-.0393733,.463356,.0587255,.689038,-.0456354,.46343,.0681476,.689321,-.0523433,.463553,.0782897,.689662,-.059412,.463693,.0891501,.690188,-.0665736,.4639,.100735,.690755,-.0743106,.464107,.113074,.691405,-.0824722,.464329,.126161,.692198,-.0910484,.464585,.140007,.693196,-.0998778,.464893,.154612,.69454,-.108651,.465285,.169984,.695921,-.117855,.465596,.186106,.697749,-.12734,.466056,.203034,.700375,-.136714,.466771,.220703,.703395,-.146386,.467579,.239062,.707904,-.156096,.469067,.258188,.711673,-.165904,.469851,.277759,.717489,-.175812,.471815,.297935,.724051,-.185931,.47389,.318916,.731965,-.195238,.47587,.341591,.741151,-.204021,.477523,.366062,.751416,-.212113,.478881,.391396,.761848,-.21979,.479226,.417599,.771886,-.2267,.478495,.444401,.783998,-.232991,.477622,.472084,.796523,-.238645,.475833,.500193,.808851,-.243396,.472568,.52865,.821191,-.247226,.467857,.557362,.834261,-.250102,.461871,.586768,.846762,-.251056,.453543,.617085,.859867,-.250604,.443494,.647659,.871948,-.248783,.431711,.678119,.882967,-.245855,.417911,.708399,.892826,-.242168,.401993,.738256,.90332,-.237062,.385371,.767999,.913633,-.22997,.366837,.798191,.922774,-.221687,.346372,.827756,.931371,-.212345,.325682,.856425,.938929,-.20206,.303665,.884299,.944821,-.190981,.280786,.912023,.951792,-.178065,.2573,.939669,.957712,-.164634,.233448,.96655,.961912,-.150863,.209504,.992366,.966382,-.13577,.18597,1.01633,.969588,-.119593,.162905,1.03843,.971777,-.103203,.14053,1.05841,.97433,-.0865888,.117909,1.07632,.978686,-.0690829,.0944101,1.09326,.983281,-.0516568,.0705671,1.10796,.989562,-.034558,.0468592,1.12182,.995465,-.0167808,.0229846,1.1342,.999991,373016e-9,-235606e-9,1.1459,.662251,-939016e-11,.468575,132714e-10,.666634,-237624e-9,.471675,335842e-9,.666411,-950385e-9,.471516,.00134321,.666399,-.00213833,.471509,.00302221,.666386,-.0038014,.471499,.00537283,.666405,-.00593958,.471511,.00839533,.666406,-.00855253,.471508,.0120898,.666428,-.0116401,.471519,.0164569,.666444,-.0152015,.471522,.0214971,.66649,-.0192362,.471543,.027212,.666537,-.0237428,.471558,.033603,.666617,-.0287198,.471591,.0406728,.666718,-.0341647,.471631,.0484238,.666889,-.0400759,.47171,.0568621,.667104,-.0464479,.471805,.0659915,.667374,-.0532677,.471923,.0758178,.667772,-.0603805,.472098,.0863425,.668371,-.0677392,.472363,.0975917,.668971,-.0756028,.472596,.109567,.669696,-.0839293,.472869,.122272,.670481,-.0926683,.473126,.135718,.6715,-.1016,.473442,.149914,.672911,-.110566,.47389,.164882,.674512,-.119984,.474354,.180602,.67651,-.129574,.474922,.19711,.679292,-.139106,.475764,.214371,.682798,-.148993,.476886,.232405,.686955,-.158737,.478179,.251153,.691406,-.168754,.479432,.270436,.697438,-.178703,.481481,.290374,.704761,-.188955,.484143,.311044,.713599,-.198814,.487007,.333003,.723194,-.207869,.488962,.357144,.732601,-.216189,.489815,.382169,.744193,-.22398,.490888,.408227,.754907,-.231156,.490355,.434928,.767403,-.23747,.489548,.462599,.78107,-.243503,.488274,.490908,.793893,-.248114,.484843,.519421,.807296,-.25222,.4803,.548561,.820529,-.255265,.474097,.577772,.833716,-.256741,.466041,.607782,.848403,-.25637,.456547,.638807,.860755,-.254804,.443946,.670058,.874012,-.251834,.430852,.700749,.885619,-.247867,.414903,.731446,.896069,-.242634,.397276,.761191,.906266,-.236093,.378535,.791053,.916759,-.227543,.358038,.821298,.92523,-.21783,.335705,.850747,.93436,-.207534,.313797,.879258,.941631,-.195983,.289671,.907734,.947564,-.183567,.265319,.935206,.953681,-.169345,.240815,.962739,.960008,-.154909,.216119,.989227,.964145,-.140161,.192096,1.01465,.968171,-.123411,.167855,1.03737,.969859,-.106525,.144817,1.05767,.972666,-.0891023,.12149,1.0761,.977055,-.0718094,.0975306,1.09336,.982527,-.0534213,.0730217,1.10878,.989001,-.0355579,.0483366,1.12285,.99512,-.0176383,.023938,1.13548,1.00007,368831e-9,-211581e-9,1.14744,.651047,-960845e-11,.484101,12922e-9,.644145,-241347e-9,.478968,324578e-9,.64396,-965142e-9,.478831,.00129798,.64396,-.00217154,.47883,.00292046,.643968,-.00386049,.478835,.00519202,.643974,-.00603186,.478838,.0081128,.643977,-.0086854,.478836,.011683,.643982,-.0118207,.478834,.0159031,.644024,-.0154374,.478856,.0207743,.644059,-.0195343,.478868,.0262975,.644122,-.0241103,.478896,.0324747,.644207,-.0291638,.478933,.039309,.64432,-.0346919,.478981,.0468029,.644481,-.0406919,.479053,.0549614,.644722,-.047159,.479169,.0637909,.645013,-.0540748,.479302,.0732974,.645503,-.0612001,.479541,.0834898,.646117,-.0687303,.479829,.0943873,.646707,-.0767846,.480061,.105991,.647431,-.0852465,.480343,.11831,.64831,-.0940719,.48066,.131348,.649486,-.103056,.481083,.14514,.650864,-.112261,.481528,.159676,.652604,-.121852,.482102,.174979,.654825,-.131505,.482813,.191079,.657876,-.141189,.483876,.207927,.661339,-.151239,.48499,.225586,.665463,-.161091,.486279,.243947,.670542,-.171235,.487968,.262957,.677361,-.181347,.49053,.282781,.685672,-.191679,.493862,.303311,.694551,-.201781,.49699,.324607,.703753,-.211164,.498884,.347916,.713703,-.219675,.500086,.372628,.725911,-.227836,.501554,.398694,.73862,-.23533,.502193,.425529,.752118,-.241786,.501811,.453209,.76579,-.247865,.500185,.481381,.779568,-.252696,.497159,.51011,.793991,-.256802,.492765,.539322,.808182,-.259942,.486827,.569078,.821698,-.261703,.478386,.598818,.836009,-.262006,.468772,.629762,.849824,-.260333,.456352,.661366,.863888,-.257398,.442533,.69295,.876585,-.253264,.426573,.723608,.888665,-.248026,.408964,.754378,.899537,-.241487,.389677,.784761,.9094,-.233463,.368516,.814688,.920166,-.223397,.346624,.845009,.928899,-.21255,.322717,.874431,.937156,-.200869,.298698,.902922,.943861,-.188387,.273491,.931356,.949557,-.174341,.247866,.958854,.955862,-.158994,.222496,.986098,.961721,-.143664,.197522,1.01229,.965976,-.127412,.17302,1.03571,.968652,-.109798,.148954,1.05699,.971084,-.0916787,.125044,1.07587,.975584,-.0739634,.100577,1.09372,.98122,-.055322,.0753666,1.10948,.988253,-.0366825,.0498899,1.12394,.99482,-.0180389,.024611,1.13694,1.00001,229839e-9,-188283e-9,1.14919,.613867,-964198e-11,.479449,123452e-10,.621485,-244534e-9,.485399,313091e-9,.621429,-978202e-9,.485353,.00125245,.62112,-.00220004,.485114,.00281687,.621119,-.0039111,.485112,.00500783,.621122,-.00611091,.485112,.00782498,.621133,-.00879922,.485117,.0112687,.621152,-.0119756,.485125,.0153394,.621183,-.0156396,.485139,.0200382,.621227,-.0197898,.485158,.0253663,.621298,-.0244253,.485192,.0313261,.621388,-.0295441,.485233,.0379204,.621507,-.0351432,.485286,.0451523,.621693,-.0412198,.485378,.0530277,.621933,-.0477673,.485495,.0615522,.622232,-.0547574,.485635,.0707316,.622809,-.0619417,.485943,.0805883,.623407,-.069625,.486232,.0911267,.62406,-.077796,.486516,.102354,.624835,-.0863731,.486838,.114279,.625758,-.095251,.487188,.126902,.627043,-.104299,.487695,.140285,.628438,-.113724,.488163,.154397,.630325,-.123417,.488858,.169267,.632801,-.133137,.489754,.184941,.635784,-.143052,.490815,.20136,.639406,-.153132,.492048,.218643,.643872,-.163143,.49363,.236615,.6499,-.17333,.496009,.255449,.657201,-.183622,.498994,.275006,.666221,-.194019,.502888,.295354,.674419,-.204192,.505459,.316244,.683729,-.21406,.507771,.33849,.695584,-.222854,.510245,.363166,.708583,-.231315,.512293,.389071,.721233,-.238911,.512747,.415737,.735134,-.245657,.512482,.443331,.750179,-.251879,.511526,.471891,.765073,-.256911,.508935,.500892,.779794,-.261144,.504341,.530294,.794801,-.264316,.498515,.560144,.810339,-.266276,.491015,.590213,.824818,-.266981,.481126,.620865,.839375,-.265778,.468685,.652687,.853043,-.262748,.453925,.684759,.867335,-.258474,.437912,.716209,.88037,-.253187,.419648,.747508,.891711,-.246476,.39982,.77797,.902896,-.238735,.37879,.808586,.913601,-.22885,.355891,.838843,.923019,-.217656,.331773,.869014,.933432,-.205539,.307356,.898512,.939691,-.192595,.281321,.9269,.946938,-.178945,.255441,.955297,.952372,-.163587,.229013,.983231,.95909,-.147214,.203179,1.00971,.963675,-.13064,.17792,1.03438,.968247,-.113121,.152898,1.05625,.97001,-.0945824,.128712,1.07598,.974458,-.0755648,.103349,1.094,.980168,-.0571998,.0776731,1.1104,.987295,-.0377994,.0514445,1.12491,.994432,-.0186417,.025429,1.13851,.999975,542714e-9,-282356e-9,1.15108,.592656,-980249e-11,.486018,119532e-10,.598467,-247275e-9,.490781,301531e-9,.597934,-988317e-9,.490343,.00120517,.597903,-.00222366,.490319,.0027116,.597913,-.00395315,.490327,.00482077,.597919,-.00617653,.490329,.00753264,.597936,-.00889375,.490339,.0108478,.597956,-.0121043,.490347,.0147668,.597992,-.0158073,.490365,.0192905,.598032,-.0200017,.490382,.0244204,.598109,-.0246865,.49042,.0301593,.598215,-.0298594,.490474,.03651,.59833,-.0355167,.490524,.0434757,.598525,-.0416559,.490624,.0510629,.598778,-.0482692,.490753,.0592781,.599135,-.0553114,.49094,.0681304,.599802,-.062542,.491328,.0776467,.600361,-.0703638,.491598,.0878184,.60101,-.0786256,.491882,.0986573,.601811,-.0872962,.492232,.11018,.602861,-.0962284,.492684,.1224,.604167,-.10538,.493213,.135354,.605693,-.114896,.493799,.149034,.607682,-.124654,.494576,.163469,.610672,-.13456,.4959,.178747,.613313,-.144581,.496713,.194723,.617603,-.154703,.498499,.211617,.622174,-.16489,.500188,.229183,.628855,-.175164,.503072,.247786,.636963,-.185565,.506798,.267116,.644866,-.195911,.509719,.28702,.653741,-.206104,.512776,.307763,.664942,-.216447,.516812,.329631,.67633,-.22552,.519181,.353515,.690012,-.234316,.521681,.379226,.704243,-.242032,.523129,.405901,.719396,-.249172,.523768,.433585,.734471,-.255543,.522541,.462085,.750539,-.260697,.520217,.491233,.766365,-.26501,.516293,.521094,.781677,-.268409,.509708,.551014,.797132,-.270399,.501944,.581463,.812655,-.271247,.492025,.612402,.828592,-.270708,.480424,.643798,.844044,-.268085,.465955,.67682,.857305,-.263459,.448425,.708496,.87114,-.258151,.430243,.74046,.884936,-.251171,.410578,.771583,.895772,-.243305,.38862,.802234,.906961,-.234037,.365214,.833179,.917775,-.222714,.34116,.86353,.927883,-.210175,.31572,.893557,.936617,-.196925,.289159,.922976,.943384,-.182788,.261996,.951606,.949713,-.167965,.235324,.979958,.955818,-.151109,.208408,1.00765,.961344,-.133834,.182591,1.03329,.965469,-.115987,.156958,1.0557,.968693,-.09746,.132239,1.07583,.973165,-.0778514,.106195,1.09451,.979387,-.0585067,.0797669,1.11137,.98671,-.0390409,.0530263,1.12643,.994093,-.019408,.0263163,1.14016,1.00002,540029e-9,-194487e-9,1.15299,.574483,-989066e-11,.494533,114896e-10,.574478,-249127e-9,.494528,289403e-9,.574607,-996811e-9,.494637,.00115797,.574396,-.00224241,.494458,.00260498,.574377,-.00398632,.49444,.00463102,.574386,-.00622836,.494445,.00723623,.574401,-.0089683,.494453,.010421,.574419,-.0122056,.49446,.0141859,.574459,-.0159396,.494481,.0185322,.574525,-.0201692,.49452,.0234617,.574587,-.0248924,.494547,.0289762,.574697,-.0301074,.494604,.0350797,.574853,-.0358114,.494688,.0417767,.575027,-.041999,.494772,.0490718,.575294,-.0486618,.494915,.0569728,.575733,-.0557148,.495173,.0654955,.576356,-.0630489,.495537,.0746612,.576944,-.0709285,.495836,.0844615,.57765,-.0792723,.496177,.0949142,.578491,-.0880167,.496563,.10603,.579639,-.0969462,.497096,.117841,.580989,-.10622,.497684,.130367,.582587,-.115861,.498337,.143609,.584951,-.125605,.499414,.157625,.587602,-.135608,.500518,.172413,.59076,-.145742,.501767,.187999,.594992,-.155934,.503542,.20445,.600656,-.166303,.506135,.221764,.607816,-.176681,.509542,.24002,.61522,-.187071,.51263,.258992,.623702,-.197465,.516021,.278773,.634192,-.207816,.520422,.299377,.644936,-.218183,.524073,.320802,.657888,-.2278,.528049,.34384,.670666,-.236747,.52986,.36916,.685626,-.24484,.531892,.395867,.701304,-.252071,.532727,.423488,.717727,-.258714,.532146,.452201,.733914,-.264211,.529883,.481579,.750529,-.26859,.5259,.511558,.76747,-.272046,.51999,.542042,.785189,-.274225,.513083,.572799,.800954,-.275189,.502936,.603816,.816962,-.274946,.490921,.635461,.83336,-.272695,.47684,.6676,.848143,-.268223,.459405,.70051,.861818,-.262768,.440319,.732902,.876828,-.255872,.420123,.765084,.889312,-.247703,.398379,.796391,.900412,-.238381,.374496,.827333,.912251,-.227783,.349874,.858385,.921792,-.214832,.323181,.888652,.931273,-.200949,.296624,.917763,.940295,-.186537,.269211,.947878,.946812,-.171538,.241447,.977016,.953588,-.155254,.213829,1.00501,.958841,-.137156,.186807,1.03179,.963746,-.118699,.160706,1.05502,.966468,-.0998358,.135504,1.07568,.971178,-.0805186,.109131,1.09479,.97831,-.0599348,.0818293,1.1123,.985886,-.0399661,.0545872,1.12771,.994021,-.0198682,.0269405,1.14186,1.00009,271022e-9,-12989e-8,1.15514,.538716,-990918e-11,.486732,109675e-10,.550656,-250642e-9,.497518,277412e-9,.55057,-.00100265,.497441,.00110974,.550903,-.00225672,.497733,.00249779,.550568,-.00401046,.497438,.00443906,.550574,-.00626613,.49744,.00693637,.550591,-.0090226,.497449,.00998921,.550623,-.0122795,.497469,.0135984,.550667,-.0160361,.497495,.0177654,.550724,-.0202908,.497526,.0224915,.550792,-.0250421,.497557,.0277795,.550918,-.0302878,.49763,.0336334,.551058,-.0360241,.497701,.0400573,.551276,-.0422473,.497824,.0470585,.551551,-.0489441,.497977,.0546433,.552074,-.0559596,.498312,.0628367,.552681,-.0633978,.498679,.071646,.553324,-.0713176,.499031,.0810746,.554011,-.0797268,.499365,.091129,.55488,-.0885238,.499779,.101837,.556171,-.0974417,.500444,.113239,.557498,-.106841,.501025,.125316,.559299,-.116533,.501864,.138128,.561647,-.126298,.502967,.151695,.564347,-.136388,.504129,.16604,.567863,-.146576,.505713,.181207,.572569,-.156832,.507953,.197259,.578919,-.167323,.511186,.214258,.585387,-.177712,.514042,.232038,.593134,-.188184,.517484,.250733,.603295,-.198717,.522345,.270454,.613854,-.209177,.526751,.290807,.626092,-.219644,.531595,.312202,.637868,-.229494,.534721,.334435,.652458,-.238718,.538304,.359184,.666985,-.247061,.539875,.385637,.683301,-.254652,.541042,.41328,.69998,-.261376,.540735,.441903,.717824,-.267085,.539139,.471609,.734617,-.271465,.534958,.501446,.753663,-.27528,.53032,.532571,.770512,-.277617,.522134,.563641,.787356,-.278525,.51206,.595067,.806252,-.278512,.50119,.627226,.822061,-.277023,.486791,.659402,.838959,-.273175,.470467,.692874,.85379,-.267238,.450688,.725702,.868268,-.260327,.429741,.75832,.881994,-.251946,.407223,.790189,.893885,-.242432,.383214,.821625,.905118,-.231904,.357297,.853011,.916045,-.219545,.330733,.883773,.927614,-.205378,.303916,.914435,.936005,-.190388,.275941,.944502,.944533,-.1749,.247493,.974439,.950758,-.158588,.218996,1.00286,.957078,-.141027,.191559,1.0304,.962448,-.121507,.164457,1.05466,.964993,-.102068,.138636,1.0761,.970017,-.0822598,.111861,1.09541,.97661,-.062033,.0843438,1.11317,.985073,-.0409832,.0558496,1.12911,.993515,-.020146,.0275331,1.1438,1.00006,27329e-8,-107883e-9,1.15736,.525324,-999341e-11,.498153,105385e-10,.526513,-251605e-9,.499277,265329e-9,.526517,-.00100641,.499282,.0010613,.526588,-.00226466,.499337,.00238823,.526539,-.0040255,.499302,.00424535,.526547,-.00628954,.499306,.00663364,.526561,-.00905628,.499313,.00955337,.526593,-.0123253,.499334,.0130054,.526642,-.0160957,.499365,.0169911,.5267,-.0203661,.499396,.0215122,.526792,-.0251347,.499451,.0265718,.526904,-.0303985,.499511,.0321732,.527079,-.0361554,.499617,.0383231,.527285,-.0423982,.499731,.045026,.527602,-.0491121,.499924,.0522936,.528166,-.0561127,.500306,.0601528,.52879,-.0635988,.5007,.0686059,.529421,-.071581,.501048,.0776518,.530144,-.0799854,.501421,.0873148,.531062,-.0888032,.501884,.0976084,.532374,-.0977643,.50259,.108588,.533828,-.107197,.50329,.120234,.53581,-.116887,.504312,.132602,.538063,-.126755,.505365,.145721,.5409,-.136819,.506668,.159617,.544882,-.147117,.508731,.174369,.550238,-.157446,.511601,.190028,.556038,-.167988,.514431,.206587,.563031,-.178364,.517808,.224046,.571543,-.189007,.521937,.242503,.582255,-.199546,.527415,.261977,.59272,-.210084,.531682,.282162,.605648,-.220448,.537123,.303426,.61785,-.230593,.540664,.325323,.632223,-.240238,.544467,.348993,.648819,-.24887,.547594,.375462,.665825,-.256657,.54912,.403024,.683389,-.263711,.549294,.431773,.701495,-.269666,.547649,.461494,.719197,-.274169,.543786,.491623,.737906,-.278124,.538644,.522994,.756652,-.280632,.531057,.554775,.775279,-.281741,.521972,.586441,.792688,-.281652,.509613,.618596,.811894,-.280345,.496497,.651462,.827938,-.277128,.47968,.684023,.844837,-.271646,.460688,.718024,.859239,-.264397,.438872,.751207,.874088,-.256144,.41577,.784232,.887693,-.246311,.391369,.816191,.899402,-.235497,.365872,.847828,.910973,-.223631,.338618,.87934,.92204,-.209874,.310803,.910325,.930987,-.194265,.281802,.940695,.94,-.178125,.252836,.970958,.948018,-.161479,.224239,1.00078,.955141,-.144038,.195857,1.0288,.960513,-.124915,.168487,1.05371,.963964,-.104284,.141495,1.07596,.968713,-.0838732,.114437,1.09628,.975524,-.0635579,.0863105,1.11448,.98431,-.042291,.0574774,1.13069,.992916,-.0209131,.0284343,1.14568,.999926,743097e-9,-379265e-9,1.15955,.501042,-998428e-11,.498726,100306e-10,.502992,-252112e-9,.500665,253283e-9,.502417,-.00100791,.500092,.00101259,.502965,-.00226919,.500621,.00227978,.502318,-.00403109,.499994,.00405011,.502333,-.00629832,.500005,.00632868,.502362,-.00906907,.500027,.00911446,.502369,-.0123423,.500023,.0124078,.50243,-.0161178,.500066,.016211,.502493,-.0203937,.500103,.0205256,.502592,-.0251684,.500166,.0253548,.502707,-.0304389,.50023,.0307029,.502881,-.0362015,.500335,.0365753,.503124,-.0424507,.500488,.0429798,.503443,-.0491582,.500686,.0499268,.504083,-.0561476,.501155,.0574541,.504668,-.0636846,.501524,.0655408,.505319,-.0716834,.501904,.0742072,.50609,-.0800925,.502321,.0834699,.507122,-.0888425,.502896,.0933603,.508414,-.097855,.503603,.10391,.509955,-.107304,.504416,.115113,.512061,-.116921,.505565,.127054,.514419,-.12689,.506732,.139709,.517529,-.136934,.508338,.153173,.522085,-.147327,.510987,.167528,.526986,-.157612,.513527,.182708,.533122,-.168213,.516717,.198881,.540807,-.178688,.520832,.215986,.550687,-.189511,.52632,.234335,.560567,-.199998,.531009,.253375,.571698,-.210652,.535839,.273499,.584364,-.220917,.541091,.294355,.599066,-.23137,.546875,.316525,.614148,-.241206,.551306,.339671,.631157,-.250379,.555187,.36531,.647919,-.258397,.556595,.392767,.666112,-.265528,.556949,.421397,.686158,-.271827,.556617,.451433,.704838,-.27674,.552975,.482131,.723957,-.280733,.547814,.513458,.74262,-.283359,.53997,.545446,.762009,-.284541,.530422,.57775,.781314,-.284507,.518546,.610434,.799116,-.283309,.504178,.643178,.817604,-.280378,.48843,.676248,.83459,-.275619,.469457,.709698,.850974,-.26856,.447698,.744245,.866747,-.260094,.424791,.777695,.881412,-.249929,.399913,.810392,.8936,-.239137,.37308,.842872,.905943,-.226818,.345705,.874677,.916408,-.213699,.31706,.906257,.927215,-.198428,.288444,.936881,.935625,-.181643,.258329,.96795,.944076,-.164386,.228488,.998216,.951229,-.146339,.199763,1.02689,.958793,-.127709,.172153,1.0535,.963219,-.107244,.144989,1.07646,.967562,-.0857764,.11685,1.09675,.974866,-.0645377,.0880571,1.11576,.983353,-.0431732,.0587352,1.13227,.992503,-.0218356,.0294181,1.1478,1.00003,605203e-9,-231013e-9,1.16207,.482935,-101177e-10,.504695,968142e-11,.477554,-251521e-9,.499071,240676e-9,.477904,-.00100683,.499436,96342e-8,.478368,-.00226636,.499899,.0021687,.477977,-.00402719,.499513,.00385384,.477993,-.00629226,.499525,.0060221,.478011,-.00906011,.499536,.00867289,.478051,-.0123305,.499566,.0118074,.478089,-.016102,.499587,.0154269,.478171,-.0203736,.499645,.0195341,.478254,-.025143,.499692,.0241318,.47839,-.0304071,.499779,.0292247,.478588,-.0361631,.499911,.0348196,.478812,-.0424023,.500046,.0409231,.479208,-.0490724,.500326,.047552,.479841,-.0560722,.500805,.0547377,.480392,-.0636125,.501152,.0624607,.481068,-.0716134,.501561,.0707473,.481898,-.0800062,.502054,.0796118,.483022,-.0886568,.502728,.0890974,.484332,-.0977553,.503479,.0992099,.486126,-.107173,.504546,.10999,.488066,-.11677,.50557,.121476,.490521,-.126725,.506849,.133672,.494232,-.136793,.50911,.146731,.498302,-.147116,.511345,.160577,.503565,-.157446,.514344,.175335,.510902,-.168121,.518824,.191207,.519263,-.178799,.523666,.208058,.528204,-.189407,.528296,.225875,.538854,-.200145,.533724,.244782,.551278,-.210701,.539833,.264753,.565222,-.221303,.546131,.285745,.579403,-.231688,.551496,.307592,.595469,-.241718,.556809,.330582,.610929,-.250992,.559641,.354995,.629433,-.259602,.562379,.382471,.648504,-.267038,.563676,.411126,.66756,-.273388,.562092,.440924,.689143,-.278788,.560807,.472118,.709056,-.282783,.555701,.503774,.729855,-.285836,.548698,.536364,.748954,-.287078,.538544,.56895,.768373,-.287133,.526711,.601991,.78827,-.285839,.512511,.635403,.807465,-.283238,.496323,.668797,.825194,-.27906,.477638,.702584,.842203,-.272286,.456253,.736393,.857749,-.263854,.432412,.77096,.874799,-.253943,.407806,.80489,.887497,-.24237,.38033,.83771,.89966,-.230278,.352446,.870376,.911753,-.21646,.323268,.902256,.923011,-.202071,.294314,.933306,.932375,-.185519,.264104,.965177,.940537,-.167604,.234035,.996303,.948904,-.149068,.20412,1.0261,.955263,-.129539,.175431,1.05304,.960303,-.109932,.148116,1.07617,.965512,-.0880572,.119693,1.09742,.973466,-.0660548,.0901619,1.11721,.98284,-.0439228,.0599875,1.13436,.992216,-.0219588,.0298975,1.15006,.999946,119402e-9,-208547e-10,1.16471,.447827,-100414e-10,.491543,914833e-11,.454778,-251257e-9,.499172,22891e-8,.453519,-.00100342,.497787,914184e-9,.45357,-.00225776,.497847,.00205701,.453578,-.00401371,.497855,.00365705,.45357,-.00627107,.497841,.00571453,.453598,-.00902968,.497864,.00823019,.453627,-.0122888,.497882,.0112049,.453684,-.0160475,.497923,.0146405,.453764,-.0203044,.49798,.0185394,.453866,-.0250576,.498049,.0229054,.453996,-.0303028,.49813,.0277424,.454196,-.0360379,.498267,.0330587,.454457,-.0422521,.498445,.0388613,.454926,-.0488393,.498812,.0451767,.455525,-.0558653,.499272,.0520153,.456074,-.0633772,.499625,.0593754,.456752,-.0713606,.500049,.0672751,.457648,-.07971,.500615,.0757447,.458849,-.0883032,.501399,.0848231,.46029,-.0974095,.502293,.0945135,.462,-.106729,.503301,.104848,.464121,-.116354,.504533,.115884,.466889,-.126214,.506172,.127652,.470744,-.136324,.508667,.14024,.47488,-.146595,.510995,.153673,.480845,-.157027,.514832,.168053,.488262,-.167658,.519506,.183508,.496547,-.178343,.524347,.199948,.506254,-.188916,.52983,.217503,.517961,-.199975,.536357,.236272,.531484,-.210624,.543641,.256096,.545496,-.221227,.550048,.277085,.559497,-.231568,.555076,.298615,.575752,-.241698,.560541,.321547,.591999,-.251172,.564156,.345602,.610654,-.260178,.567607,.371851,.630484,-.268094,.56923,.40076,.651807,-.274661,.569779,.430801,.67239,-.280331,.566791,.461939,.693024,-.284501,.562007,.493854,.715473,-.287852,.555791,.526992,.736323,-.28929,.546345,.560102,.755771,-.289405,.534,.593543,.775424,-.2881,.519114,.627256,.795447,-.285562,.502543,.661464,.815319,-.281416,.484773,.695206,.831769,-.275523,.463445,.729044,.849464,-.267516,.440269,.764069,.866775,-.257584,.415049,.799089,.881252,-.245817,.388049,.831948,.894209,-.233127,.35889,.865526,.906922,-.219579,.329915,.89818,.919686,-.204491,.300441,.930013,.929044,-.188962,.269445,.962061,.938393,-.171079,.238402,.994214,.94661,-.15199,.208204,1.02533,.953095,-.131953,.178653,1.0529,.958644,-.111233,.150684,1.0771,.963925,-.0903098,.122359,1.09855,.971995,-.0680505,.0923342,1.11874,.981658,-.0448512,.0614195,1.13635,.991649,-.0221931,.0303582,1.15238,.999985,393403e-9,-111086e-9,1.16772,.396806,-971563e-11,.457671,842355e-11,.429186,-249421e-9,.495017,21625e-8,.429324,-998052e-9,.495173,865322e-9,.429175,-.00224487,.494999,.00194637,.429129,-.00399041,.494952,.00346004,.429153,-.00623476,.494974,.00540684,.429168,-.0089773,.494983,.00778714,.429207,-.0122175,.495012,.0106022,.429257,-.0159542,.495047,.0138535,.429338,-.0201864,.495106,.0175443,.429431,-.0249104,.495165,.0216774,.429587,-.0301252,.495279,.0262594,.429796,-.0358249,.495432,.0312968,.430065,-.0419972,.495621,.0367985,.430588,-.0485144,.496061,.042798,.43113,-.0555028,.496472,.0492914,.431743,-.0629852,.496904,.0562907,.432448,-.0709256,.497369,.0638056,.433414,-.0791942,.498032,.071885,.434638,-.0877346,.498854,.0805517,.43611,-.0968056,.499812,.0898047,.437859,-.106002,.500891,.0997142,.440017,-.115648,.502198,.110289,.443236,-.125427,.504389,.121644,.44697,-.135492,.506809,.133769,.451689,-.145746,.509858,.146787,.45811,-.156219,.514247,.160793,.465305,-.166834,.518816,.175791,.474085,-.177546,.524331,.191906,.484808,-.188262,.53104,.209199,.49732,-.199346,.538511,.227825,.509693,-.209951,.544554,.247269,.524367,-.220533,.551616,.267978,.539228,-.231082,.557368,.289672,.55644,-.241342,.563782,.31268,.574204,-.250964,.568851,.33651,.593388,-.260306,.57312,.362219,.613358,-.268667,.574916,.390322,.634512,-.275591,.575053,.420478,.65563,-.281328,.572404,.451614,.678265,-.285948,.568893,.484112,.70011,-.289408,.561878,.517348,.723005,-.291328,.55359,.551355,.743744,-.291418,.541099,.585109,.763949,-.290252,.526489,.619487,.784186,-.287648,.509496,.65404,.804304,-.283782,.491484,.688649,.823629,-.278067,.470517,.723133,.84094,-.270588,.44705,.757163,.857852,-.261188,.421252,.792816,.874934,-.249313,.394191,.827248,.888709,-.236492,.365359,.861074,.902589,-.222185,.336016,.894417,.914201,-.207314,.30527,.926825,.925978,-.191146,.274532,.9595,.93512,-.174135,.243393,.991583,.943656,-.155231,.212414,1.02356,.951719,-.134403,.182005,1.05239,.957164,-.113023,.153043,1.07754,.962656,-.0914493,.124186,1.09984,.970695,-.0694179,.0941654,1.12,.980749,-.0466199,.0629671,1.13849,.991205,-.0227032,.0311146,1.15494,.999884,632388e-9,-254483e-9,1.1706,.379821,-957289e-11,.460637,789337e-11,.405188,-247483e-9,.491396,204064e-9,.404796,-989434e-9,.490914,815853e-9,.40483,-.00222607,.490949,.00183559,.40473,-.00395723,.49084,.00326332,.404731,-.00618287,.490836,.00509945,.404768,-.00890258,.490871,.00734463,.404791,-.0121156,.490883,.00999992,.404857,-.0158214,.490938,.0130676,.404943,-.0200178,.491004,.0165503,.405059,-.0247027,.491093,.0204521,.405213,-.0298729,.491205,.0247788,.405399,-.0355226,.491333,.0295373,.405731,-.0416352,.491604,.034741,.406303,-.0480807,.492116,.0404255,.406814,-.0550458,.492506,.0465732,.407404,-.0624652,.492926,.0532058,.408149,-.0702958,.493442,.0603442,.409128,-.0784623,.494136,.0680297,.410408,-.087007,.495054,.0762786,.411813,-.0959639,.495962,.0851046,.413735,-.105075,.497257,.0945878,.416137,-.114646,.498882,.104725,.41934,-.124394,.501132,.11563,.423326,-.134328,.503883,.127325,.428419,-.14458,.50747,.139911,.43484,-.154979,.511964,.153481,.442641,-.165628,.517328,.168114,.452511,-.176365,.524258,.183995,.463473,-.187298,.531248,.200953,.475564,-.198244,.538367,.219176,.488664,-.208938,.545175,.238514,.504073,-.219599,.553227,.259129,.520832,-.230378,.560653,.280997,.538455,-.240703,.567523,.303821,.55709,-.250548,.573287,.327948,.576646,-.259964,.577795,.353362,.596705,-.268721,.580077,.380336,.618053,-.276054,.58018,.4101,.640303,-.282176,.578747,.44161,.662365,-.286931,.574294,.474106,.684542,-.290521,.567035,.507549,.707984,-.292672,.558687,.541853,.730913,-.293189,.547606,.576581,.752948,-.292199,.533471,.61172,.773452,-.289508,.516395,.646339,.794715,-.285716,.497873,.682131,.814251,-.280051,.476845,.716396,.833057,-.272873,.453449,.751503,.84959,-.263982,.427857,.786085,.867022,-.252745,.400335,.821355,.882277,-.239655,.371304,.85646,.895375,-.225386,.340397,.890828,.909347,-.209587,.310005,.923532,.921885,-.193433,.2796,.956419,.932127,-.176135,.247276,.989445,.941869,-.157872,.216186,1.02221,.949735,-.137577,.185602,1.05195,.956617,-.115285,.155767,1.07822,.961974,-.0928418,.126103,1.10149,.96972,-.0700592,.0956758,1.12207,.98012,-.0474671,.0643269,1.1408,.990825,-.0238113,.0320863,1.1577,.999876,381574e-9,-812203e-10,1.17403,.367636,-961342e-11,.469176,753287e-11,.380377,-244772e-9,.485434,191797e-9,.380416,-978857e-9,.485475,767015e-9,.380376,-.00220165,.485435,.00172522,.380419,-.00391408,.485487,.00306734,.380438,-.00611549,.485505,.00479332,.380462,-.00880558,.485525,.00690391,.380496,-.0119837,.485551,.00940039,.38056,-.0156487,.485605,.0122848,.38064,-.0197988,.485666,.0155601,.380767,-.0244324,.48577,.0192313,.380909,-.0295444,.485871,.0233032,.381142,-.0351321,.48606,.0277861,.381472,-.0411535,.486336,.0326939,.382015,-.0475408,.486833,.0380565,.382523,-.0544395,.487231,.0438615,.383129,-.061784,.487683,.0501332,.383952,-.0695085,.488313,.0568996,.38498,-.0775819,.489077,.0641952,.386331,-.0860443,.490113,.0720324,.387788,-.0948406,.491099,.0804379,.389808,-.103899,.492566,.0894899,.39252,-.113313,.494601,.0992098,.395493,-.123007,.496619,.109641,.399826,-.132859,.499912,.120919,.405341,-.143077,.504061,.133107,.411932,-.153465,.508905,.146263,.420591,-.164108,.515482,.160544,.43101,-.174893,.523191,.176123,.441881,-.185839,.53026,.192757,.453919,-.196633,.537295,.210535,.468715,-.207611,.546156,.229886,.485182,-.218517,.555173,.250543,.501926,-.229249,.562728,.27221,.51785,-.239481,.567494,.294892,.536947,-.249395,.573889,.318987,.557115,-.259,.578831,.344348,.577966,-.268075,.582055,.371223,.599489,-.276115,.583307,.399834,.62479,-.282523,.583902,.431415,.647504,-.287663,.57953,.464301,.670601,-.291538,.573103,.498123,.693539,-.293842,.563731,.532662,.717385,-.294681,.553169,.567925,.741533,-.293717,.539908,.603502,.762142,-.291156,.521902,.639074,.783014,-.28719,.502815,.674439,.805158,-.281773,.482598,.710497,.823646,-.274682,.458949,.7456,.841879,-.266184,.433129,.781085,.859515,-.255682,.406064,.816,.875335,-.242849,.376509,.851074,.890147,-.228329,.345502,.886473,.903144,-.212491,.31428,.920751,.916618,-.195695,.282994,.954606,.927953,-.178267,.251091,.988402,.937414,-.159549,.219107,1.02141,.946823,-.140022,.18896,1.05167,.954651,-.118154,.158667,1.07819,.959955,-.0946636,.128808,1.1025,.96858,-.0711792,.0973787,1.12391,.97938,-.0475046,.0650965,1.14322,.990498,-.024059,.0326267,1.16077,.999844,-512408e-10,112444e-9,1.17727,.316912,-934977e-11,.425996,695559e-11,.356423,-241372e-9,.479108,179562e-9,.356272,-965292e-9,.478897,71811e-8,.356262,-.00217182,.478894,.00161574,.356265,-.00386092,.478895,.00287261,.356278,-.0060324,.478905,.00448907,.356293,-.00868565,.478914,.00646572,.356346,-.0118207,.478965,.00880438,.356395,-.0154355,.479001,.0115066,.356484,-.019529,.479075,.0145762,.356609,-.0240991,.47918,.018018,.356766,-.0291413,.479305,.0218379,.357009,-.0346498,.479512,.0260454,.357424,-.0405462,.479909,.0306657,.357899,-.0468825,.480337,.0357054,.358424,-.0536887,.480771,.0411728,.359041,-.0609416,.481242,.0470841,.359903,-.0685239,.481943,.0534831,.360932,-.0764883,.482741,.0603795,.362196,-.0848364,.483688,.0678028,.363847,-.0935002,.484947,.0758086,.365972,-.102471,.486588,.0844173,.368741,-.111751,.488787,.0937199,.372146,-.121334,.491405,.103732,.377114,-.131147,.495604,.114608,.38226,-.141213,.499436,.126345,.389609,-.151632,.505334,.139116,.397925,-.162073,.51168,.152995,.407824,-.172819,.518876,.168071,.420014,-.183929,.527639,.184495,.434266,-.195032,.537588,.20232,.447352,-.205792,.544379,.221189,.463726,-.216704,.553422,.241616,.481406,-.227531,.562074,.263298,.498707,-.238017,.568227,.286116,.518039,-.247936,.574473,.3101,.538277,-.257437,.579191,.335401,.561166,-.266829,.584807,.362246,.583189,-.275329,.586476,.390609,.606024,-.28234,.585578,.420998,.632419,-.287924,.584496,.454357,.656128,-.291972,.577766,.488233,.679953,-.29456,.56875,.523248,.704654,-.295816,.558388,.559168,.729016,-.295157,.544826,.595326,.752062,-.292779,.528273,.631864,.773138,-.288681,.508482,.667793,.794869,-.283358,.487341,.704035,.815101,-.27608,.46354,.739925,.834212,-.26767,.438672,.775539,.852368,-.257397,.411239,.810895,.870207,-.245689,.3829,.846472,.884063,-.231452,.351496,.881788,.898284,-.215561,.31895,.917438,.912964,-.198208,.287367,.952422,.924666,-.180426,.254487,.987551,.934429,-.161525,.222226,1.02142,.943485,-.141197,.191143,1.05218,.9521,-.120085,.161112,1.07937,.957876,-.0975881,.130982,1.10403,.966943,-.0726842,.0990553,1.12616,.978313,-.0483705,.0662818,1.14619,.990048,-.0239072,.0329243,1.16413,.999984,461885e-9,-772859e-10,1.18099,.321287,-935049e-11,.455413,659662e-11,.332595,-237513e-9,.471437,167562e-9,.332729,-949964e-9,.471618,670192e-9,.332305,-.00213618,.471028,.00150712,.332326,-.00379765,.471055,.00267959,.332344,-.00593353,.471072,.00418751,.332356,-.00854349,.471077,.00603172,.332403,-.0116268,.471121,.00821362,.332461,-.0151824,.47117,.0107357,.332552,-.0192088,.471251,.0136014,.332657,-.0237024,.47133,.0168152,.332835,-.0286615,.471487,.0203853,.333083,-.0340765,.471708,.0243212,.333547,-.0398563,.47219,.0286518,.333989,-.0460916,.472587,.0333763,.334532,-.0527897,.473054,.0385084,.335167,-.0599284,.473568,.0440638,.33608,-.0673514,.474362,.0500962,.337146,-.0752237,.475231,.0566022,.338462,-.083418,.476282,.0636272,.34014,-.0919382,.477615,.0712153,.342341,-.100741,.479404,.079417,.345088,-.109905,.481618,.0882631,.349049,-.119369,.485081,.0978851,.353939,-.129033,.489317,.108336,.359893,-.139038,.494309,.119698,.366945,-.149411,.499983,.132024,.375814,-.159843,.507185,.145558,.387112,-.170664,.516392,.160433,.40023,-.181897,.526519,.176648,.412555,-.192785,.53423,.193922,.427023,-.203663,.542741,.212662,.443685,-.214695,.552066,.232944,.461499,-.225561,.560762,.254495,.480975,-.236257,.569421,.277531,.501,-.24639,.576101,.301724,.521691,-.256101,.581493,.327112,.543478,-.265289,.585221,.353917,.566094,-.273938,.587614,.381941,.589578,-.281679,.587991,.41172,.614583,-.287655,.585928,.444148,.641813,-.292228,.582092,.478617,.666189,-.295172,.57398,.51397,.690475,-.29648,.561676,.550118,.715543,-.296203,.548758,.586933,.740405,-.293999,.532792,.62384,.762183,-.28998,.512735,.660723,.786069,-.28478,.492402,.69807,.806812,-.277568,.469058,.734422,.826987,-.268951,.443017,.770946,.844588,-.259049,.415501,.80699,.863725,-.2471,.387328,.842107,.879137,-.234157,.356108,.878078,.894634,-.218719,.324315,.914058,.909162,-.201293,.291813,.949922,.92072,-.18267,.258474,.985337,.93158,-.163212,.225593,1.0205,.941238,-.142771,.193986,1.05273,.949293,-.120956,.163392,1.08075,.956226,-.0985743,.132934,1.10559,.96546,-.075118,.101255,1.12823,.977403,-.0497921,.0675441,1.149,.989648,-.0241574,.0334681,1.16765,1.00001,5762e-7,-184807e-9,1.18519,.303474,-916603e-11,.4542,61243e-10,.308894,-232869e-9,.462306,155592e-9,.309426,-931661e-9,.463093,622499e-9,.308643,-.0020949,.461933,.00139979,.308651,-.0037242,.461941,.00248874,.308662,-.00581873,.46195,.00388933,.308687,-.00837818,.461974,.00560247,.308728,-.0114016,.462011,.00762948,.308789,-.0148884,.462067,.00997326,.308882,-.0188369,.462151,.0126375,.309007,-.0232436,.462263,.0156271,.30918,-.0281054,.462417,.0189498,.309442,-.0334065,.462667,.0226167,.309901,-.0390589,.463162,.0266614,.310331,-.0452042,.463555,.0310715,.310858,-.0517735,.464019,.0358698,.311576,-.0587359,.464669,.0410848,.312436,-.0660383,.465406,.0467453,.313526,-.0737266,.466339,.0528718,.314903,-.0817574,.467504,.0595039,.316814,-.090167,.469226,.0666888,.318965,-.0987555,.470981,.0744658,.322077,-.107792,.473814,.082912,.325947,-.117098,.477241,.0920846,.331008,-.126602,.48184,.102137,.337893,-.136619,.488334,.113135,.345106,-.146838,.494415,.12511,.355111,-.157357,.503275,.138356,.365095,-.167955,.510966,.152686,.378344,-.179157,.521508,.16856,.391599,-.190143,.530455,.18561,.407786,-.20123,.541275,.204308,.425294,-.212456,.551784,.224623,.444021,-.223568,.561493,.246172,.463418,-.234154,.569886,.268979,.484077,-.244546,.577116,.293411,.505513,-.254301,.582914,.318936,.527672,-.263564,.587208,.345856,.550565,-.272332,.589277,.374054,.573656,-.280011,.588426,.403276,.59827,-.286924,.587504,.43474,.624731,-.291994,.583401,.468767,.652396,-.295159,.576997,.504411,.67732,-.296954,.565863,.54114,.703147,-.296877,.552316,.57816,.728715,-.295147,.536773,.616124,.752448,-.291275,.51771,.653885,.775169,-.285905,.496087,.691537,.799307,-.279064,.474232,.729251,.819482,-.270294,.447676,.766267,.837659,-.260032,.419656,.802616,.856903,-.248497,.391328,.838583,.873325,-.235252,.360285,.874711,.889788,-.221126,.329215,.91077,.904486,-.204304,.296392,.94653,.917711,-.185562,.262159,.983828,.928969,-.165635,.229142,1.01955,.939707,-.14442,.19673,1.05317,.948167,-.122147,.165095,1.0823,.955222,-.099098,.13451,1.10791,.964401,-.0755332,.102476,1.1312,.976605,-.0513817,.0689667,1.15218,.989085,-.0258499,.034506,1.17129,.999908,617773e-9,-271268e-9,1.18961,.285803,-905752e-11,.452348,572272e-11,.284689,-22732e-8,.450581,143626e-9,.285263,-910214e-9,.451482,575099e-9,.285302,-.00204784,.451553,.00129395,.285318,-.00364057,.451574,.0023006,.28533,-.00568813,.451585,.00359547,.285361,-.00819001,.451618,.00517934,.285397,-.0111458,.45165,.007054,.285447,-.0145536,.451688,.00922167,.285527,-.0184127,.451758,.0116869,.285688,-.0227207,.451929,.0144555,.28584,-.0274712,.452055,.0175341,.286136,-.0326278,.452369,.0209406,.286574,-.0381792,.452853,.0246965,.287012,-.0441879,.453272,.0287996,.287542,-.0506096,.453752,.033268,.288299,-.0573634,.454488,.0381504,.289186,-.0645458,.455294,.0434447,.290302,-.0720405,.456301,.0491973,.291776,-.0799046,.457648,.0554453,.29372,-.088117,.459483,.0622311,.296052,-.0965328,.461571,.0695992,.299563,-.105409,.465085,.077658,.30335,-.114553,.468506,.0864176,.309167,-.123917,.474423,.0961078,.31529,-.13381,.47995,.106643,.324163,-.144021,.488592,.118322,.333272,-.154382,.496461,.131133,.344224,-.165015,.50562,.145208,.357733,-.176168,.516719,.16073,.373046,-.187468,.528513,.177807,.38788,-.198488,.537713,.196072,.405133,-.209545,.547999,.21605,.423845,-.220724,.55759,.237484,.443777,-.231518,.566246,.26039,.464824,-.242035,.574326,.284835,.486635,-.251898,.58037,.310518,.51012,-.261304,.58568,.337678,.535301,-.270384,.590197,.366242,.559193,-.27841,.590569,.395873,.583544,-.285325,.588161,.426857,.608834,-.291113,.584249,.459477,.635753,-.294882,.57763,.494734,.664367,-.297088,.569479,.532023,.689688,-.297364,.555064,.569629,.715732,-.295949,.539522,.608124,.741307,-.292259,.521613,.646231,.764949,-.287063,.49969,.684938,.788599,-.28012,.476747,.723548,.81048,-.27153,.45116,.761135,.831372,-.261289,.424101,.798916,.850092,-.249559,.39443,.835952,.867777,-.236348,.363849,.871606,.884632,-.221569,.332477,.907843,.90047,-.20618,.300667,.944187,.914524,-.188771,.266552,.981371,.926892,-.168362,.232349,1.01841,.937951,-.146761,.199359,1.05308,.947236,-.123813,.1675,1.0839,.954367,-.099984,.136166,1.11047,.963907,-.0759278,.103808,1.13414,.976218,-.0511367,.0697061,1.15575,.988772,-.0267415,.0352529,1.17531,.999888,-520778e-9,289926e-9,1.19389,.263546,-883274e-11,.441896,526783e-11,.262352,-221849e-9,.439889,132311e-9,.262325,-886683e-9,.439848,528824e-9,.26228,-.00199476,.439765,.00118975,.262372,-.00354671,.439922,.00211568,.26239,-.00554141,.439941,.00330652,.262412,-.00797888,.439961,.00476346,.262453,-.0108584,.440002,.00648818,.262528,-.0141788,.440085,.0084835,.262615,-.017938,.440166,.0107533,.262744,-.0221346,.440291,.0133044,.262939,-.026762,.440493,.0161445,.263277,-.0317573,.440889,.0192974,.26368,-.0371832,.441338,.0227699,.264106,-.0430371,.441753,.0265698,.264624,-.0493035,.442227,.0307178,.265378,-.0558669,.442985,.0352616,.266253,-.0628718,.443795,.0401968,.267478,-.0701569,.445008,.04559,.269062,-.077845,.446599,.0514539,.270926,-.0857941,.448349,.0578382,.273693,-.0940773,.451221,.0648363,.276746,-.102704,.454097,.0724389,.281693,-.111735,.459517,.0808744,.287335,-.121004,.46531,.0901551,.29448,-.130734,.472605,.100371,.30257,-.140777,.480251,.111644,.312465,-.15111,.489444,.124111,.324856,-.16189,.500919,.137979,.33774,-.172946,.511317,.153163,.35255,-.184152,.522684,.169817,.367786,-.19522,.53248,.187886,.385474,-.20632,.543326,.207634,.404976,-.217744,.554109,.229165,.425203,-.228691,.563395,.252068,.446704,-.239299,.571565,.276471,.468951,-.249348,.577935,.302323,.493487,-.258933,.584309,.329882,.517861,-.268009,.58773,.358525,.543309,-.276238,.589612,.388585,.569704,-.28356,.589294,.419787,.594871,-.289497,.585137,.452114,.622555,-.294452,.580356,.486466,.651167,-.296918,.57185,.523079,.677332,-.297647,.558428,.5611,.703718,-.296321,.542232,.599592,.730262,-.293339,.524541,.639138,.754304,-.288036,.502691,.677978,.778051,-.281018,.479212,.716537,.801557,-.272414,.454071,.75586,.822559,-.262419,.425952,.794477,.843051,-.250702,.397313,.832664,.86232,-.237264,.366534,.869876,.879044,-.222716,.334816,.906973,.896362,-.206827,.303143,.943558,.910342,-.189659,.269699,.979759,.924119,-.171108,.236411,1.01718,.935374,-.149579,.202224,1.05289,.944295,-.126295,.16989,1.08496,.952227,-.101511,.138089,1.11256,.962041,-.0766392,.105053,1.1375,.97528,-.0511967,.070329,1.15983,.988476,-.025463,.0351268,1.17987,.999962,286808e-10,145564e-10,1.19901,.227089,-841413e-11,.404216,472707e-11,.239725,-215083e-9,.426708,120833e-9,.239904,-860718e-9,.427028,483555e-9,.239911,-.00193661,.427039,.00108806,.239914,-.00344276,.42704,.00193457,.239933,-.00537907,.427064,.00302363,.239944,-.00774482,.427065,.00435604,.239993,-.01054,.427122,.00593398,.240052,-.0137626,.427179,.00775987,.240148,-.0174115,.427279,.00983854,.240278,-.021484,.42741,.0121763,.240472,-.0259729,.427618,.0147827,.240839,-.0308131,.428086,.0176837,.241201,-.0360893,.428482,.0208775,.241626,-.0417723,.428907,.0243821,.242207,-.0478337,.42952,.0282228,.24298,-.0542199,.430332,.0324333,.243881,-.0610015,.431222,.0370252,.245123,-.0680874,.432512,.0420535,.24667,-.0755482,.434088,.0475414,.248779,-.0832873,.436323,.0535542,.251665,-.0913546,.439509,.0601716,.255305,-.0998489,.443478,.0674282,.260049,-.108576,.448713,.0754673,.266192,-.117754,.455524,.084339,.273158,-.127294,.4627,.0941683,.282131,-.137311,.472068,.10515,.293332,-.147736,.483565,.117402,.304667,-.158357,.493702,.130824,.317785,-.169274,.504708,.145724,.333245,-.180595,.517107,.16215,.349843,-.191892,.528849,.180149,.367944,-.203168,.540301,.199746,.387579,-.214443,.551514,.221047,.408247,-.225624,.560906,.243981,.43014,-.236422,.56959,.268513,.452669,-.24654,.576098,.294409,.476196,-.256157,.580925,.322002,.501157,-.265289,.584839,.351052,.527632,-.273671,.587614,.3812,.555754,-.281254,.589119,.412994,.581682,-.287448,.585204,.445498,.608196,-.292614,.579006,.479505,.635661,-.296068,.571297,.514643,.664999,-.297395,.560855,.552213,.691039,-.296645,.544525,.591365,.7179,-.293785,.526535,.630883,.744059,-.289089,.50545,.670932,.76863,-.282239,.482514,.710904,.793273,-.273688,.457246,.750259,.814731,-.26328,.428872,.78948,.835603,-.251526,.399384,.828597,.85489,-.238339,.368811,.866892,.872828,-.223607,.336617,.90563,.889462,-.207538,.303997,.943538,.904929,-.190297,.270812,.980591,.919101,-.172034,.237453,1.01935,.930536,-.152058,.204431,1.05498,.941223,-.129515,.172495,1.08717,.94982,-.104263,.140175,1.11551,.960592,-.0781944,.106465,1.14098,.974629,-.051688,.0711592,1.16418,.98811,-.0253929,.0354432,1.18465,1.00004,804378e-9,-330876e-9,1.20462,.214668,-821282e-11,.406619,433582e-11,.218053,-208144e-9,.413025,109887e-9,.217987,-832212e-9,.412901,439362e-9,.217971,-.00187246,.412876,988623e-9,.217968,-.00332855,.41286,.00175772,.217985,-.00520055,.412882,.00274729,.218014,-.00748814,.412916,.00395842,.218054,-.0101901,.412957,.00539274,.218106,-.0133057,.413005,.00705348,.218217,-.0168342,.413139,.00894581,.218338,-.0207707,.413258,.0110754,.21855,-.0251001,.413509,.0134551,.218913,-.0297861,.413992,.0161081,.219265,-.0348956,.414383,.0190307,.219696,-.0403909,.414839,.0222458,.220329,-.0462003,.415567,.025792,.220989,-.0524208,.41621,.0296637,.222027,-.058948,.417385,.0339323,.223301,-.0658208,.418779,.0386055,.224988,-.0730347,.420665,.0437355,.227211,-.0805274,.423198,.0493844,.230131,-.088395,.426566,.0556135,.233908,-.0966208,.43091,.0624829,.239092,-.105223,.437148,.0701636,.245315,-.11424,.444302,.0786949,.253166,-.12368,.453262,.0882382,.262374,-.133569,.463211,.0988682,.273145,-.143836,.474271,.110727,.285512,-.154577,.4863,.123945,.299512,-.165501,.498817,.138581,.314287,-.176698,.510341,.154676,.331083,-.188066,.522583,.172459,.349615,-.199597,.534879,.191979,.369318,-.210843,.546083,.21309,.390377,-.222068,.5562,.235998,.412411,-.233059,.564704,.260518,.435715,-.24357,.572314,.286795,.461196,-.253356,.579395,.314559,.485587,-.262362,.581985,.343581,.511908,-.270895,.584347,.374367,.539798,-.278452,.58505,.406015,.567974,-.284877,.583344,.439168,.594303,-.290124,.577348,.473005,.622951,-.294183,.570751,.508534,.652404,-.296389,.561541,.544764,.679291,-.296605,.546426,.582927,.706437,-.294095,.528599,.622681,.734485,-.28978,.508676,.663567,.758841,-.283363,.484768,.704092,.78537,-.275015,.460434,.745101,.807315,-.264689,.432166,.784712,.8271,-.252597,.401807,.824241,.849191,-.239154,.371458,.863803,.867046,-.224451,.338873,.903063,.8852,-.208342,.306175,.942763,.901771,-.190684,.272759,.981559,.915958,-.172105,.239306,1.02048,.928046,-.152214,.206071,1.05765,.939961,-.130247,.17367,1.08999,.948711,-.10672,.142201,1.11829,.959305,-.0808688,.108454,1.14467,.973009,-.0539145,.0728109,1.16839,.987631,-.0262947,.0360625,1.19004,.999978,.00132758,-559424e-9,1.21058,.193925,-793421e-11,.391974,392537e-11,.196746,-200315e-9,.397675,991033e-10,.19667,-801099e-9,.397521,396342e-9,.196633,-.00180246,.397445,891829e-9,.196654,-.00320443,.397482,.00158582,.196659,-.00500647,.39748,.00247867,.196683,-.0072086,.397506,.00357167,.196728,-.00981001,.397562,.00486675,.196792,-.0128096,.397633,.00636707,.19689,-.0162055,.397746,.00807752,.197017,-.0199943,.397884,.0100052,.19729,-.024139,.39827,.0121691,.197583,-.0286671,.398639,.0145755,.197927,-.0335858,.399034,.0172355,.198383,-.0388806,.399554,.0201718,.199002,-.0444736,.400289,.0234194,.199739,-.0504583,.401111,.026984,.200784,-.056729,.402349,.0309217,.202075,-.0633643,.403841,.0352496,.203898,-.0703247,.406076,.0400313,.206199,-.0775565,.408841,.0453282,.209252,-.085184,.41259,.0511794,.213638,-.0931994,.418288,.0577459,.21881,-.101617,.424681,.0650508,.225642,-.11052,.433429,.0732759,.233717,-.119772,.442897,.0824683,.242823,-.129505,.452888,.0927484,.254772,-.139906,.466407,.104417,.266603,-.150402,.477413,.117211,.28073,-.161395,.490519,.131598,.295399,-.172465,.50201,.147407,.312705,-.183982,.515311,.165031,.331335,-.195532,.52786,.184336,.351037,-.206971,.5392,.205361,.372175,-.218117,.54941,.228043,.394548,-.229327,.558642,.25267,.419598,-.240052,.567861,.279071,.443922,-.249937,.573332,.306882,.471495,-.259407,.58013,.33661,.496769,-.267749,.580564,.367328,.524951,-.275524,.581696,.399753,.55318,-.282148,.579885,.433134,.581577,-.287533,.575471,.467534,.609231,-.291612,.567445,.502943,.637478,-.293911,.557657,.53871,.667795,-.295096,.546535,.576568,.694272,-.294073,.529561,.614929,.722937,-.290386,.510561,.655909,.749682,-.284481,.487846,.697663,.774754,-.276188,.462487,.738515,.799301,-.266215,.43481,.779802,.820762,-.254116,.404879,.820045,.843231,-.240393,.374559,.860294,.861857,-.225503,.341582,.900965,.880815,-.209382,.308778,.941727,.89766,-.19155,.275232,.980916,.912926,-.172346,.240938,1.02162,.926391,-.151799,.207223,1.0597,.938429,-.129968,.17484,1.09291,.947834,-.10651,.142984,1.12248,.958432,-.0824098,.109902,1.149,.972402,-.0565242,.0744454,1.1733,.987191,-.028427,.0373794,1.19538,.999975,385685e-10,-4203e-8,1.21676,.178114,-766075e-11,.385418,354027e-11,.176074,-191966e-9,.381002,887135e-10,.17601,-767549e-9,.380861,354715e-9,.17598,-.00172696,.380798,798168e-9,.175994,-.00307012,.380824,.00141928,.176017,-.00479684,.380858,.00221859,.176019,-.00690648,.380839,.00319714,.176072,-.00939888,.380913,.0043572,.176131,-.0122726,.380979,.005702,.176239,-.0155264,.38112,.00723689,.176371,-.0191551,.381272,.00896907,.176638,-.023117,.381669,.0109194,.176912,-.0274633,.382015,.0130903,.177279,-.032173,.382476,.0154949,.17774,-.0372219,.383041,.0181669,.178344,-.0426132,.38378,.0211209,.179153,-.0483309,.384773,.0243899,.180197,-.0543447,.386076,.0280062,.181581,-.0607122,.387809,.032004,.18344,-.0673855,.390205,.036453,.186139,-.0743989,.393944,.0414162,.189432,-.0817731,.39832,.0469394,.193795,-.0895464,.404188,.0531442,.199641,-.0978264,.4121,.0601374,.206679,-.106499,.421425,.0680078,.214865,-.115654,.431504,.076919,.224406,-.125268,.442526,.0868835,.235876,-.135475,.455465,.0981875,.248335,-.146023,.4681,.110759,.262868,-.157016,.482069,.124885,.278962,-.168245,.496182,.140645,.295082,-.17958,.507401,.157838,.313738,-.191227,.520252,.17695,.333573,-.202718,.531708,.197817,.356433,-.214424,.544509,.220785,.378853,-.225492,.55373,.245306,.402717,-.236236,.561348,.271593,.428375,-.246568,.568538,.299776,.454724,-.255941,.573462,.329433,.482291,-.264511,.576356,.360598,.509706,-.272129,.576446,.393204,.538805,-.278979,.575298,.427227,.568919,-.284528,.572154,.462157,.596804,-.288801,.564691,.497997,.625987,-.291334,.555134,.534467,.656414,-.292722,.545051,.571736,.683916,-.292185,.528813,.610158,.711809,-.290043,.51106,.649061,.739547,-.285246,.490103,.690081,.766914,-.277647,.465523,.732554,.791375,-.267603,.437718,.773982,.814772,-.256109,.40882,.81609,.836691,-.242281,.377823,.856849,.856984,-.227155,.34496,.898363,.876332,-.210395,.311335,.939471,.894988,-.192612,.277703,.980799,.911113,-.173236,.243019,1.02215,.924092,-.152258,.209037,1.06139,.936828,-.129575,.175909,1.09635,.946869,-.10594,.143852,1.12707,.958284,-.081318,.110289,1.15419,.972325,-.0556133,.0747232,1.17909,.986878,-.0297899,.0383149,1.20163,.999936,-.00197169,912402e-9,1.22338,.151174,-720365e-11,.351531,309789e-11,.155594,-18279e-8,.361806,78608e-9,.156099,-731569e-9,.362982,314615e-9,.156053,-.00164578,.362869,707845e-9,.156093,-.0029261,.362961,.00125884,.156099,-.00457155,.362959,.00196783,.15612,-.00658224,.362982,.00283622,.156168,-.00895774,.363048,.00386625,.156221,-.0116962,.363101,.00506109,.156324,-.0147973,.363241,.00642675,.156476,-.0182503,.363448,.00797175,.156731,-.0220266,.36384,.00971484,.156994,-.026176,.364179,.0116575,.157341,-.0306701,.36462,.0138207,.157867,-.0354591,.365364,.0162356,.15846,-.0406141,.366111,.0189092,.159308,-.0460519,.367248,.021885,.160426,-.0518096,.368767,.0252004,.161877,-.0578906,.370745,.0288825,.163995,-.0642812,.373831,.0330139,.16655,-.0710067,.377366,.0376283,.170237,-.0781522,.382799,.0428493,.175096,-.0857172,.389915,.0487324,.181069,-.0938025,.398487,.0554214,.188487,-.102363,.408799,.0630189,.197029,-.111343,.419991,.071634,.206684,-.120812,.431455,.0812797,.218698,-.131033,.445746,.0923651,.230726,-.141373,.457471,.104545,.245516,-.152387,.472388,.118449,.261551,-.163628,.486671,.133923,.277437,-.174814,.49762,.150849,.296662,-.186713,.51162,.169924,.31795,-.198513,.525435,.190848,.339422,-.210119,.536267,.213504,.362143,-.221354,.545982,.237947,.387198,-.23224,.555364,.264427,.412349,-.24257,.561489,.292519,.439274,-.252284,.566903,.322561,.466779,-.261023,.569614,.353952,.496011,-.26899,.571589,.387278,.524964,-.275498,.570325,.421356,.556518,-.281449,.568792,.457314,.584363,-.285526,.560268,.493199,.614214,-.28844,.55205,.530276,.645684,-.289777,.541906,.56855,.673446,-.289722,.526464,.606927,.701924,-.287792,.509872,.645945,.73037,-.284315,.490649,.685564,.757405,-.278804,.467964,.726511,.784025,-.269543,.441468,.768601,.808255,-.258117,.41216,.811321,.830739,-.244728,.380606,.853496,.851914,-.229428,.348111,.895374,.872586,-.212508,.314732,.937674,.891581,-.194025,.280338,.979869,.907641,-.174711,.245203,1.02253,.922233,-.153509,.21077,1.06371,.935878,-.130418,.177399,1.09972,.946338,-.105558,.144507,1.13124,.957265,-.080059,.110508,1.15973,.971668,-.0539766,.0742311,1.18515,.9866,-.0277101,.0375224,1.20858,1.00021,-515531e-9,135226e-9,1.23135,.137468,-686011e-11,.345041,273315e-11,.13703,-173378e-9,.343936,690761e-10,.136986,-693048e-9,.34383,276126e-9,.136964,-.00155931,.343761,621337e-9,.137003,-.00277211,.343863,.00110494,.137012,-.00433103,.343868,.00172744,.137043,-.00623606,.343916,.00249022,.13709,-.0084868,.343986,.00339559,.137145,-.0110814,.344045,.00444687,.137242,-.0140187,.344177,.00565007,.137431,-.0172713,.344491,.00701868,.137644,-.0208605,.344805,.00856042,.13791,-.024792,.345172,.0102863,.138295,-.0290461,.345734,.0122185,.138764,-.0335957,.346371,.0143771,.139415,-.038467,.347298,.0167894,.140272,-.0436176,.348527,.0194895,.141457,-.0491016,.350276,.0225043,.14303,-.0548764,.352646,.0258962,.145289,-.0610096,.356206,.0297168,.148502,-.0674777,.361488,.0340562,.152188,-.074345,.367103,.0389534,.157359,-.0817442,.375247,.0445541,.16379,-.0896334,.385064,.0509535,.171376,-.098005,.396082,.0582611,.179901,-.106817,.407418,.06654,.189892,-.116239,.420031,.075994,.201838,-.12627,.434321,.0867239,.214311,-.136701,.447631,.0987517,.228902,-.147616,.462046,.112353,.245107,-.158871,.476942,.127605,.262292,-.170261,.490285,.144469,.281215,-.182017,.503783,.163282,.301058,-.193729,.515505,.183873,.322752,-.205512,.52682,.206466,.347547,-.217214,.539473,.231194,.370969,-.227966,.546625,.257288,.397533,-.238555,.55472,.285789,.42398,-.248278,.559468,.315746,.452928,-.257422,.564095,.347724,.482121,-.265306,.565426,.380922,.510438,-.272043,.563205,.415639,.541188,-.277614,.561087,.451702,.571667,-.281927,.554922,.48845,.602432,-.285015,.546838,.526442,.634126,-.286512,.537415,.564896,.662816,-.286388,.522906,.604037,.692411,-.284734,.507003,.643795,.720946,-.281297,.488398,.68298,.748293,-.276262,.466353,.723466,.776931,-.269978,.443573,.764565,.801065,-.260305,.415279,.805838,.825843,-.247426,.384773,.849985,.84807,-.232437,.352555,.893174,.869122,-.215806,.318642,.936564,.888963,-.197307,.28381,.980253,.905547,-.177203,.247888,1.02463,.918554,-.155542,.212904,1.06714,.931395,-.131948,.1787,1.10451,.941749,-.106723,.145902,1.13694,.954551,-.0804939,.111193,1.1666,.970279,-.0534239,.0744697,1.19249,.986117,-.0257452,.0368788,1.21665,.999938,.00190634,-.0010291,1.23981,.118493,-647439e-11,.32272,23772e-10,.118765,-163023e-9,.323456,598573e-10,.118772,-65212e-8,.323477,239447e-9,.118843,-.00146741,.323657,538881e-9,.118804,-.00260846,.323553,95826e-8,.118826,-.00407576,.323595,.00149845,.118846,-.00586826,.323617,.00216047,.118886,-.00798578,.32367,.00294679,.118947,-.0104273,.323753,.00386124,.119055,-.0131909,.323922,.00490999,.119241,-.0162444,.324251,.00610804,.11944,-.0196339,.324544,.00745805,.119739,-.0233378,.325026,.00897805,.12011,-.0273179,.325586,.0106895,.120571,-.0316143,.326231,.0126073,.12124,-.0361939,.327264,.0147654,.122162,-.0410511,.328733,.0172001,.123378,-.0462233,.330659,.0199375,.125183,-.0517109,.333754,.0230498,.127832,-.0575652,.338507,.026597,.130909,-.0637441,.343666,.0306345,.135221,-.0704302,.351063,.035273,.14082,-.0776364,.360604,.0406137,.146781,-.0852293,.369638,.0466788,.155121,-.0935351,.3827,.0537628,.16398,-.102234,.39522,.0617985,.173926,-.111465,.40793,.07097,.185137,-.121296,.42105,.0813426,.19826,-.13169,.435735,.0931596,.212938,-.142614,.450932,.106547,.229046,-.153884,.465726,.121575,.246246,-.165382,.479461,.138286,.264637,-.176806,.492106,.15666,.284959,-.188793,.504774,.17728,.308157,-.200763,.518805,.19988,.330951,-.21239,.528231,.224293,.3549,-.223521,.536376,.250541,.381502,-.234169,.544846,.278902,.409529,-.244077,.551717,.309227,.437523,-.253363,.55517,.341426,.467624,-.261659,.557772,.37518,.497268,-.268498,.556442,.41007,.528294,-.274018,.553915,.446445,.559053,-.278169,.549153,.483779,.589329,-.281229,.539878,.522249,.622503,-.282902,.53162,.561754,.652382,-.282815,.518119,.601544,.681847,-.281247,.502187,.641574,.712285,-.277986,.484824,.682633,.740094,-.273017,.463483,.723426,.768478,-.266692,.441299,.763747,.794556,-.258358,.415238,.805565,.819408,-.248807,.386912,.847254,.843411,-.236214,.356165,.891091,.862397,-.219794,.320562,.936174,.883113,-.201768,.285322,.982562,.90023,-.181672,.249713,1.02862,.915192,-.159279,.214546,1.07163,.928458,-.134725,.180285,1.10995,.94069,-.10913,.147119,1.14354,.953409,-.0821315,.112492,1.17372,.969537,-.0542677,.0752014,1.20043,.985612,-.0259096,.0370361,1.22528,.999835,.00298198,-.00151801,1.24959,.10097,-602574e-11,.300277,202619e-11,.101577,-152164e-9,.302077,511662e-10,.101572,-608889e-9,.302066,204751e-9,.101566,-.00136997,.302047,460753e-9,.101592,-.00243557,.302114,819497e-9,.101608,-.0038053,.30214,.00128154,.101627,-.00547906,.30216,.0018483,.101669,-.00745647,.302224,.00252223,.101732,-.00973615,.302318,.00330716,.101844,-.0123097,.302513,.00421061,.102025,-.0151681,.30285,.00524481,.102224,-.0183334,.303166,.0064154,.102515,-.0217819,.303654,.00774063,.102886,-.0255067,.304243,.0092398,.103395,-.029514,.305089,.0109339,.104109,-.0337912,.306301,.0128561,.105074,-.0383565,.30798,.0150338,.10654,-.0432132,.310726,.0175228,.108478,-.0484244,.314351,.0203648,.111015,-.0539339,.319032,.0236325,.114682,-.0598885,.32605,.0274188,.11911,-.0663375,.334109,.0317905,.124736,-.0733011,.344013,.0368502,.131479,-.0807744,.355358,.0427104,.139283,-.0888204,.367614,.0494788,.148054,-.0973394,.380072,.0572367,.159037,-.10665,.395678,.0662704,.169794,-.116221,.40795,.0763192,.18314,-.126632,.423546,.087956,.197515,-.137383,.438213,.101042,.213514,-.148641,.453248,.115827,.23065,-.160117,.46688,.132283,.249148,-.171807,.479962,.150644,.270219,-.183695,.494618,.171073,.292338,-.195574,.506937,.193378,.314999,-.207205,.516463,.217585,.340991,-.218955,.528123,.24428,.367982,-.229917,.537025,.272784,.39432,-.239737,.541627,.302742,.423364,-.249048,.546466,.335112,.453751,-.257329,.549466,.369032,.48416,-.264623,.549503,.404577,.515262,-.270411,.547008,.441337,.547036,-.274581,.542249,.479162,.576614,-.277266,.533015,.517904,.611143,-.279144,.525512,.558508,.640989,-.279001,.51154,.598995,.671182,-.277324,.495641,.639935,.700848,-.273908,.477526,.681017,.729862,-.269063,.457955,.722764,.758273,-.262282,.434846,.764349,.784121,-.254281,.409203,.806206,.809798,-.24505,.382694,.848617,.834953,-.233861,.354034,.892445,.856817,-.221308,.321764,.936263,.877609,-.205996,.288118,.982401,.897489,-.186702,.253277,1.02975,.913792,-.164618,.217963,1.07488,.92785,-.140023,.183221,1.11487,.940378,-.11328,.149385,1.14947,.95273,-.0853958,.114152,1.1807,.969059,-.0568698,.0769845,1.20912,.985574,-.0276502,.0381186,1.23498,.999943,.00239052,-.00126861,1.25987,.0852715,-560067e-11,.279021,171162e-11,.0854143,-140871e-9,.279483,430516e-10,.0854191,-563385e-9,.2795,172184e-9,.0854188,-.00126753,.279493,387464e-9,.0854229,-.00225337,.279501,68918e-8,.0854443,-.00352086,.279549,.00107803,.0854697,-.00506962,.279591,.00155536,.0855093,-.00689873,.279652,.00212354,.0855724,-.00900821,.279752,.00278703,.0856991,-.0113799,.280011,.0035551,.085855,-.0140314,.280297,.00443449,.0860682,-.016963,.280682,.00543636,.086344,-.0201438,.281159,.0065788,.0867426,-.0235999,.281886,.00787977,.087239,-.0273069,.282745,.0093606,.0879815,-.031269,.284139,.011056,.0891258,-.035531,.28647,.0130065,.0906909,-.0400947,.289708,.0152495,.0927624,-.0449638,.293904,.0178454,.0958376,-.0502427,.300471,.0208915,.0995827,-.0559514,.30806,.0244247,.104526,-.0622152,.317874,.0285721,.110532,-.0690046,.329332,.0334227,.117385,-.0763068,.341217,.0390466,.12522,-.084184,.353968,.0455786,.134037,-.0925248,.366797,.0530773,.144014,-.101487,.380209,.0617424,.156013,-.111273,.395956,.071777,.168872,-.121431,.41053,.0830905,.183089,-.132105,.425073,.0959341,.198763,-.143286,.439833,.110448,.216159,-.154841,.454507,.126769,.234859,-.166588,.468368,.14495,.255879,-.178626,.482846,.165233,.27677,-.190218,.493489,.187217,.301184,-.202227,.506549,.211659,.325852,-.213764,.5158,.237922,.352824,-.22487,.525442,.26632,.380882,-.235246,.532487,.296691,.410137,-.244847,.537703,.329179,.439787,-.253122,.540361,.363135,.472291,-.260517,.542734,.399222,.501856,-.266519,.538826,.436352,.534816,-.270905,.535152,.474505,.565069,-.273826,.525979,.513988,.597154,-.275333,.516394,.554852,.630473,-.275314,.506206,.596592,.660574,-.273323,.489769,.638117,.692015,-.270008,.472578,.680457,.720647,-.265001,.452134,.723008,.750528,-.258311,.430344,.765954,.777568,-.250046,.405624,.809012,.80387,-.240114,.378339,.852425,.828439,-.228737,.349877,.895346,.851472,-.216632,.318968,.940695,.873906,-.202782,.287489,.987235,.89467,-.187059,.254394,1.03348,.912281,-.168818,.221294,1.07812,.927358,-.146494,.18675,1.11928,.940385,-.120009,.152322,1.15609,.952672,-.0917183,.117514,1.18875,.968496,-.0620321,.0797405,1.21821,.985236,-.0314945,.0402383,1.24523,.99998,-575153e-9,110644e-9,1.27133,.0702429,-512222e-11,.255273,140947e-11,.0702981,-128826e-9,.255469,354488e-10,.0703691,-515562e-9,.255727,141874e-9,.0703805,-.00116,.255754,31929e-8,.0703961,-.00206224,.255813,567999e-9,.0704102,-.00322223,.255839,88871e-8,.0704298,-.00463928,.255863,.00128272,.0704759,-.00631375,.255953,.00175283,.0705434,-.00824317,.256079,.00230342,.0706693,-.010412,.25636,.0029443,.0708189,-.0128439,.256647,.00368031,.0710364,-.0155177,.257084,.00452614,.0713223,-.0184374,.257637,.00549706,.0717182,-.0216002,.258416,.00661246,.072321,-.0249966,.259699,.00790147,.0731446,-.0286566,.261475,.0093884,.0743352,-.0325888,.264132,.0111186,.0760676,-.036843,.26815,.013145,.078454,-.0414292,.273636,.0155251,.0818618,-.0464634,.281653,.0183525,.0857382,-.0519478,.289992,.0216642,.0908131,-.0579836,.30066,.0255956,.0967512,-.0645124,.312204,.0301954,.103717,-.0716505,.325001,.0356017,.111596,-.0793232,.338129,.041896,.120933,-.087645,.352853,.0492447,.130787,-.096492,.366192,.0576749,.142311,-.105973,.380864,.0673969,.155344,-.116182,.396575,.0785899,.169535,-.126815,.411443,.0912377,.185173,-.138015,.426256,.105607,.201755,-.149325,.439607,.121551,.221334,-.161207,.455467,.139608,.241461,-.173162,.469096,.159591,.26294,-.18504,.481014,.18156,.286776,-.196881,.493291,.205781,.311596,-.208311,.503556,.231819,.338667,-.219671,.513268,.260274,.366021,-.230451,.519414,.290862,.395875,-.240131,.526766,.323196,.425564,-.248566,.52905,.357071,.457094,-.256195,.530796,.393262,.488286,-.262331,.528703,.430797,.522291,-.267141,.52727,.470231,.554172,-.270411,.519848,.510477,.586427,-.271986,.510307,.551594,.619638,-.27192,.499158,.593849,.650656,-.269817,.483852,.636314,.68284,-.266267,.467515,.679679,.714356,-.26113,.44931,.723884,.742717,-.254067,.425789,.767245,.770894,-.245652,.401144,.811819,.797358,-.235554,.374224,.856315,.823377,-.223896,.346167,.901077,.847456,-.210865,.316056,.946502,.870697,-.196574,.284503,.993711,.891068,-.180814,.251628,1.04134,.909267,-.163314,.219065,1.08609,.925653,-.143304,.186446,1.12702,.940017,-.121322,.153416,1.16371,.952398,-.0973872,.120334,1.19712,.967568,-.0698785,.08352,1.22791,.984772,-.0390031,.0439209,1.25672,1.00026,-.0070087,.00315668,1.28428,.0556653,-459654e-11,.227325,112556e-11,.0565238,-116382e-9,.230826,284985e-10,.0565717,-465666e-9,.231026,114036e-9,.0565859,-.00104773,.231079,256656e-9,.0565761,-.00186255,.231025,45663e-8,.0565913,-.00291002,.231058,714664e-9,.0566108,-.00418998,.231085,.00103224,.0566532,-.00570206,.231169,.00141202,.0567473,-.00743666,.231417,.00186018,.0568567,-.00940298,.231661,.00238264,.0569859,-.0115991,.231895,.00298699,.0572221,-.0140096,.232456,.00368957,.057519,-.0166508,.233096,.00450303,.0579534,-.01951,.234094,.00544945,.0585922,-.0225991,.235629,.00655564,.0595647,-.0259416,.238106,.00785724,.0609109,-.0295661,.241557,.00939127,.0628751,-.0335126,.246652,.0112198,.0656908,-.0378604,.254091,.0134168,.0691347,-.0426543,.262666,.0160374,.0732165,-.0478967,.272029,.0191514,.0782863,-.0536716,.283007,.0228597,.0843973,-.0600683,.295732,.0272829,.0913598,-.0670095,.308779,.032484,.0994407,-.0745516,.322886,.0385886,.108189,-.082712,.336408,.0457133,.118574,-.0914927,.351692,.0539832,.129989,-.100854,.366502,.0635162,.142722,-.110837,.381675,.0744386,.156654,-.121353,.3963,.0868483,.172151,-.132414,.411477,.100963,.188712,-.143809,.42508,.116795,.208093,-.155765,.441328,.134715,.227936,-.167608,.454328,.154396,.249495,-.179579,.467235,.176179,.27362,-.191488,.480248,.200193,.296371,-.202618,.487886,.225775,.324234,-.214133,.499632,.25441,.353049,-.225212,.509532,.285077,.381785,-.234875,.514265,.317047,.414038,-.244205,.521282,.351874,.445251,-.252145,.522931,.388279,.476819,-.258433,.520947,.425825,.509209,-.263411,.517669,.465104,.542759,-.266732,.512841,.505741,.574822,-.268263,.503317,.547611,.609324,-.268489,.493035,.590953,.641772,-.266941,.478816,.63488,.674049,-.263297,.462863,.679072,.705071,-.257618,.442931,.723487,.734709,-.250625,.421299,.768708,.763704,-.24179,.397085,.814375,.791818,-.231115,.370577,.859907,.817439,-.21922,.34232,.906715,.843202,-.205658,.312627,.953943,.866639,-.190563,.280933,1.00185,.888129,-.173978,.248393,1.05105,.907239,-.155485,.216007,1.09704,.923893,-.134782,.183233,1.13857,.938882,-.11249,.150376,1.17539,.952464,-.0890706,.117177,1.20924,.968529,-.0646523,.0813095,1.24055,.984763,-.038606,.0439378,1.27018,1.00053,-.01238,.00598668,1.29873,.0437928,-409594e-11,.204012,8.79224e-7,.0440166,-103395e-9,.205049,221946e-10,.0440529,-413633e-9,.205225,887981e-10,.0440493,-930594e-9,.2052,199858e-9,.0439884,-.00165352,.204901,355495e-9,.0440716,-.0025849,.205255,556983e-9,.0440968,-.00372222,.205311,805326e-9,.0441359,-.00506478,.205391,.00110333,.0442231,-.00660384,.205638,.00145768,.0443254,-.00835246,.205877,.00187275,.0444832,-.0102992,.20627,.00235938,.0447001,-.0124449,.206796,.0029299,.0450168,-.0147935,.207593,.0036005,.0454816,-.017336,.208819,.00439246,.0462446,-.0201156,.211036,.00533864,.0473694,-.0231568,.214388,.00646984,.0490191,-.0264941,.219357,.00783856,.0512776,-.030184,.226061,.00950182,.0541279,-.0342661,.234094,.0115156,.0578989,-.0388539,.244297,.0139687,.0620835,-.0438735,.254457,.0169015,.0673497,-.04951,.266706,.0204554,.0731759,-.0556263,.278753,.0246606,.0803937,-.0624585,.29309,.0297126,.0879287,-.0697556,.305856,.0355868,.0970669,-.0778795,.321059,.0425768,.106508,-.0863541,.333873,.05056,.11776,-.0955935,.349008,.0598972,.130081,-.105438,.363776,.0706314,.144454,-.115899,.380112,.0828822,.1596,-.126827,.394843,.0967611,.176097,-.138161,.409033,.112381,.194726,-.149904,.424257,.129952,.213944,-.161675,.436945,.149333,.235516,-.173659,.450176,.170892,.260564,-.185963,.466305,.194984,.285183,-.197582,.477328,.220805,.311095,-.208697,.486566,.248694,.338924,-.219519,.494811,.279015,.369757,-.229766,.504065,.311725,.3996,-.238879,.507909,.345844,.430484,-.246802,.509805,.381749,.46413,-.253924,.511436,.420251,.497077,-.259319,.508787,.459957,.530434,-.263297,.50394,.501356,.565725,-.265619,.49804,.544252,.599254,-.265842,.487346,.587856,.631251,-.263978,.472975,.631969,.663972,-.26043,.457135,.677471,.697724,-.255358,.439844,.723744,.727725,-.248308,.417872,.770653,.756417,-.239181,.39273,.817357,.785419,-.22814,.367839,.864221,.81266,-.215681,.339449,.912701,.839391,-.201623,.309279,.962419,.86366,-.185624,.278029,1.0122,.885028,-.16797,.245294,1.06186,.904639,-.148336,.212689,1.10934,.922048,-.12637,.179616,1.15063,.936952,-.102928,.146749,1.18885,.951895,-.0785268,.112733,1.22352,.967198,-.0530153,.0760056,1.25681,.984405,-.02649,.0383183,1.28762,1.00021,70019e-8,-20039e-8,1.31656,.0325964,-355447e-11,.176706,6.55682e-7,.0329333,-899174e-10,.178527,165869e-10,.0329181,-359637e-9,.178453,663498e-10,.0329085,-808991e-9,.178383,149332e-9,.0329181,-.00143826,.178394,265873e-9,.0329425,-.00224678,.178517,416597e-9,.0329511,-.00323575,.17849,603299e-9,.033011,-.00439875,.178695,829422e-9,.0330733,-.00574059,.178843,.00109908,.0331857,-.00725896,.179176,.00141933,.0333445,-.00895289,.179618,.0017999,.0335674,-.0108219,.180238,.00225316,.033939,-.0128687,.181417,.00279765,.0345239,-.015114,.183395,.0034564,.0354458,-.017596,.186616,.00425864,.0368313,-.0203524,.191547,.00524936,.0386115,-.0234105,.197508,.00647033,.0410303,-.0268509,.205395,.00798121,.0442245,-.0307481,.215365,.0098557,.0478659,-.0350863,.225595,.0121417,.0522416,-.0399506,.236946,.0149385,.0574513,-.045357,.249442,.0183189,.0631208,-.0512863,.261222,.0223644,.0701124,-.0579273,.275418,.0272418,.0777331,-.0650652,.288989,.0329458,.0862709,-.0728813,.302546,.0396819,.096103,-.081363,.317164,.04757,.106976,-.0904463,.331733,.0567012,.119175,-.100105,.34661,.067202,.132919,-.110375,.362249,.0792588,.147727,-.121115,.376978,.0928672,.163618,-.132299,.390681,.108228,.182234,-.143887,.406571,.125502,.201809,-.155827,.42042,.144836,.225041,-.168357,.438411,.166706,.247621,-.18004,.450368,.189909,.27097,-.191536,.460083,.215251,.296658,-.203024,.469765,.243164,.325892,-.214056,.481837,.273388,.35406,-.224104,.487474,.305344,.384372,-.233489,.492773,.339741,.41749,-.241874,.498451,.376287,.45013,-.248834,.499632,.414195,.481285,-.254658,.495233,.454077,.519183,-.259367,.496401,.496352,.551544,-.261818,.487686,.538798,.587349,-.262964,.479453,.583626,.621679,-.262128,.467709,.629451,.654991,-.258998,.452123,.67566,.686873,-.254119,.433495,.723248,.719801,-.246946,.413657,.771156,.750355,-.237709,.390366,.81989,.780033,-.226549,.364947,.868601,.809254,-.214186,.337256,.920034,.836576,-.199639,.307395,.971706,.861774,-.183169,.275431,1.02479,.885707,-.165111,.243431,1.07837,.904742,-.144363,.210921,1.12783,.915604,-.121305,.17647,1.17254,.930959,-.0962119,.143106,1.21012,.948404,-.069969,.108112,1.24474,.967012,-.0427586,.0708478,1.27718,.984183,-.0147043,.032335,1.3083,.999577,.0142165,-.00726867,1.3382,.0229227,-299799e-11,.148623,4.62391e-7,.0232194,-758796e-10,.15054,117033e-10,.0232315,-303636e-9,.15063,468397e-10,.0232354,-683189e-9,.150624,105472e-9,.0232092,-.0012136,.150445,187744e-9,.0232523,-.00189765,.150679,294847e-9,.0232828,-.00273247,.150789,428013e-9,.0233371,-.00371287,.150995,591134e-9,.0234015,-.00484794,.15118,787642e-9,.023514,-.00612877,.151562,.00102547,.023679,-.00756125,.152116,.00131351,.0239559,-.00914651,.153162,.00166594,.0244334,-.010904,.155133,.00210182,.025139,-.0128615,.158035,.00264406,.0262598,-.0150628,.162751,.00332923,.0277875,-.0175532,.168944,.00419773,.0298472,-.0203981,.176835,.00530034,.0325444,-.023655,.186686,.00669777,.0355581,-.0272982,.196248,.00842661,.0392841,-.0314457,.207352,.0105854,.0436815,-.0361157,.219279,.0132458,.0485272,-.0412932,.230728,.0164736,.0541574,-.0470337,.242994,.0203715,.0609479,-.0535002,.257042,.0250953,.0685228,-.0605409,.27102,.0306856,.0768042,-.0680553,.28406,.037193,.0864844,-.0765011,.299186,.0449795,.0969415,-.0852674,.3132,.0538316,.108478,-.0947333,.327138,.0641149,.121705,-.10481,.342345,.0759185,.136743,-.115474,.358472,.0894116,.152986,-.126536,.374067,.104562,.170397,-.138061,.388267,.121632,.191392,-.150203,.406467,.140996,.211566,-.161751,.418641,.161696,.233567,-.173407,.430418,.184557,.257769,-.185397,.44277,.210092,.28531,-.197048,.457191,.237827,.311726,-.20784,.464712,.267253,.340537,-.218345,.472539,.299332,.372921,-.228306,.482331,.333988,.402924,-.236665,.484378,.369722,.434475,-.244097,.484717,.407836,.469736,-.250547,.487093,.448465,.505045,-.25511,.485575,.490263,.540262,-.258444,.481225,.534495,.576347,-.259903,.473481,.579451,.608656,-.259572,.4603,.625604,.646679,-.257908,.450341,.674511,.679902,-.253663,.431561,.723269,.714159,-.247419,.412684,.773263,.745345,-.239122,.389388,.824182,.778248,-.228837,.365361,.876634,.807208,-.216197,.337667,.92945,.835019,-.201772,.307197,.985261,.860261,-.185291,.274205,1.04299,.877601,-.165809,.240178,1.09816,.898211,-.143897,.207571,1.14694,.915789,-.119513,.174904,1.19008,.931831,-.0932919,.141423,1.2297,.949244,-.0656528,.105603,1.26553,.967527,-.0370262,.0679551,1.29986,.984139,-.00730117,.0283133,1.33252,.999713,.0234648,-.0121785,1.36397,.0152135,-245447e-11,.122795,3.04092e-7,.0151652,-615778e-10,.122399,76292e-10,.0151181,-245948e-9,.122023,304802e-10,.0151203,-553394e-9,.12203,686634e-10,.015125,-983841e-9,.122037,122463e-9,.0151427,-.00153774,.12214,192706e-9,.0151708,-.0022103,.122237,281219e-9,.0152115,-.00300741,.12238,390804e-9,.0152877,-.00392494,.1227,526317e-9,.015412,-.00496597,.123244,69443e-8,.0156201,-.00613314,.124228,90547e-8,.0159658,-.00744113,.125945,.0011732,.0165674,-.00892546,.129098,.00151888,.017487,-.010627,.133865,.00197007,.018839,-.0126043,.140682,.0025637,.020554,-.0148814,.148534,.00333637,.0226727,-.0175123,.157381,.00433738,.0251879,-.0205266,.166685,.00561664,.0283635,-.0240319,.177796,.00725563,.0318694,-.0279432,.188251,.00928811,.0361044,-.0324313,.200038,.011835,.0406656,-.0373527,.210685,.0149146,.0463846,-.0430132,.224182,.0187254,.0525696,-.0491013,.23634,.0232283,.0598083,-.0559175,.250013,.0286521,.0679437,-.0633657,.263981,.0350634,.0771181,-.0714602,.278072,.0425882,.0881273,-.0803502,.29511,.0514487,.0996628,-.0896903,.309976,.0615766,.112702,-.099644,.325611,.0732139,.126488,-.109829,.339321,.0862324,.142625,-.120859,.35574,.101275,.15953,-.131956,.369845,.117892,.176991,-.143145,.38146,.136205,.199715,-.155292,.40052,.157252,.220787,-.167066,.412055,.179966,.243697,-.178396,.423133,.204418,.272106,-.190433,.439524,.232141,.297637,-.201265,.447041,.261109,.325273,-.211834,.454488,.292627,.357219,-.221889,.465004,.326669,.387362,-.230729,.468527,.362426,.423131,-.23924,.475836,.401533,.45543,-.246067,.475017,.441902,.493393,-.251557,.478017,.484239,.526253,-.255571,.4709,.528586,.560554,-.257752,.463167,.574346,.599306,-.258076,.456452,.621655,.634541,-.256471,.443725,.670492,.668907,-.253283,.428719,.721943,.705619,-.247562,.411348,.772477,.739034,-.240626,.388939,.8264,.771408,-.231493,.36425,.881702,.803312,-.220125,.337321,.9385,.828457,-.206645,.305364,.997437,.854819,-.190664,.273715,1.05693,.878666,-.171429,.242218,1.11251,.898404,-.149235,.209556,1.16398,.917416,-.12435,.176863,1.21014,.933133,-.0972703,.142775,1.25178,.95066,-.0683607,.106735,1.29028,.968589,-.0378724,.0681609,1.32703,.984776,-.00605712,.0273966,1.36158,.99994,.0263276,-.0138124,1.3943,.00867437,-186005e-11,.0928979,1.73682e-7,.00864003,-466389e-10,.0925237,435505e-11,.00864593,-186594e-9,.0925806,174322e-10,.00864095,-419639e-9,.0924903,392862e-10,.00863851,-746272e-9,.0924589,702598e-10,.00868531,-.00116456,.0929,111188e-9,.00869667,-.00167711,.0928529,163867e-9,.00874332,-.00228051,.0930914,23104e-8,.00882709,-.00297864,.0935679,31741e-8,.00898874,-.00377557,.0946165,430186e-9,.00929346,-.00469247,.0967406,580383e-9,.00978271,-.00575491,.100084,783529e-9,.0105746,-.00701514,.105447,.00106304,.0116949,-.00851797,.112494,.00144685,.0130419,-.0102757,.119876,.00196439,.0148375,-.012381,.129034,.00266433,.0168725,-.01482,.137812,.00358364,.0193689,-.0176563,.147696,.00478132,.0222691,-.0209211,.157795,.00631721,.0256891,-.0246655,.168431,.00826346,.0294686,-.0288597,.178587,.0106714,.0340412,-.0336441,.190251,.0136629,.0393918,-.039033,.202999,.0173272,.0453947,-.0450087,.215655,.0217448,.0521936,-.0515461,.228686,.0269941,.0600279,-.058817,.242838,.033272,.0692398,-.0667228,.258145,.0406457,.0793832,-.0752401,.273565,.0492239,.0902297,-.0841851,.287735,.0590105,.102014,-.0936479,.301161,.0702021,.116054,-.103967,.317438,.0832001,.13191,-.114622,.334166,.0977951,.148239,-.125452,.348192,.113985,.165809,-.136453,.361094,.131928,.184616,-.147648,.373534,.151811,.207491,-.159607,.39101,.174476,.230106,-.171119,.402504,.198798,.257036,-.182906,.418032,.225796,.281172,-.193605,.425468,.254027,.312034,-.204771,.440379,.285713,.340402,-.214988,.445406,.319196,.370231,-.224711,.44968,.35537,.407105,-.233516,.460747,.393838,.439037,-.240801,.460624,.433747,.47781,-.24762,.465957,.477234,.510655,-.251823,.460054,.52044,.550584,-.255552,.459172,.567853,.585872,-.257036,.450311,.615943,.620466,-.257535,.437763,.667693,.660496,-.255248,.426639,.718988,.695578,-.251141,.409185,.772503,.732176,-.244718,.39015,.827023,.760782,-.236782,.362594,.885651,.79422,-.225923,.33711,.943756,.824521,-.213855,.308272,1.00874,.854964,-.197723,.278529,1.06764,.878065,-.179209,.246208,1.12836,.899834,-.157569,.21329,1.18318,.918815,-.133206,.181038,1.23161,.934934,-.106545,.146993,1.27644,.952115,-.0780574,.111175,1.31842,.96906,-.0478279,.0728553,1.35839,.985178,-.0160014,.032579,1.39697,1.00039,.0173126,-.0095256,1.43312,.00384146,-124311e-11,.0613583,7.78271e-8,.00390023,-314043e-10,.0622919,196626e-11,.00389971,-125622e-9,.0622632,787379e-11,.00389491,-282352e-9,.0620659,1778e-8,.00391618,-502512e-9,.0624687,320918e-10,.00392662,-784458e-9,.0625113,515573e-10,.00396053,-.00112907,.0628175,778668e-10,.00401911,-.00153821,.0633286,113811e-9,.00414994,-.0020208,.0646443,16445e-8,.00441223,-.00260007,.0673886,237734e-9,.00484427,-.0033097,.0716528,345929e-9,.00549109,-.00418966,.0774998,505987e-9,.00636293,-.00527331,.0844758,739208e-9,.00746566,-.00660428,.0921325,.00107347,.00876625,-.00818826,.0997067,.00153691,.0103125,-.0100811,.107433,.00217153,.0123309,-.0123643,.117088,.00303427,.0146274,-.0150007,.126438,.00416018,.0172295,-.0180531,.135672,.00561513,.0204248,-.0215962,.146244,.007478,.0241597,-.0256234,.157481,.00981046,.0284693,-.0302209,.169125,.0127148,.033445,-.0353333,.181659,.0162453,.0391251,-.0410845,.1944,.0205417,.0454721,-.0473451,.207082,.0256333,.0530983,-.0542858,.221656,.0317036,.0615356,-.0618384,.236036,.0388319,.0703363,-.0697631,.248398,.046974,.0810391,-.0784757,.263611,.0565246,.0920144,-.0873488,.275857,.0671724,.105584,-.0973652,.292555,.0798105,.119506,-.107271,.306333,.0935945,.134434,-.117608,.318888,.109106,.153399,-.128938,.337552,.127074,.171258,-.139944,.349955,.14643,.191059,-.151288,.361545,.168,.215069,-.163018,.378421,.192082,.237838,-.174226,.38879,.217838,.266965,-.186063,.405857,.246931,.292827,-.196909,.414146,.277505,.324352,-.207473,.426955,.310711,.354427,-.217713,.433429,.346794,.389854,-.227183,.443966,.385237,.420749,-.235131,.44471,.424955,.459597,-.242786,.451729,.468446,.495316,-.248767,.45072,.513422,.534903,-.253351,.450924,.560618,.572369,-.256277,.445266,.609677,.612383,-.2576,.438798,.660995,.644037,-.256931,.421693,.713807,.686749,-.254036,.4109,.767616,.719814,-.249785,.390151,.82533,.754719,-.244283,.367847,.888311,.792022,-.235076,.345013,.948177,.822404,-.225061,.316193,1.01661,.853084,-.211113,.287013,1.08075,.879871,-.19449,.255424,1.14501,.901655,-.174023,.222879,1.20203,.919957,-.1509,.18989,1.25698,.938412,-.124923,.15606,1.30588,.953471,-.0968139,.120512,1.3529,.970451,-.066734,.0828515,1.3986,.985522,-.034734,.0424458,1.44148,1.00099,-.00102222,678929e-9,1.48398,965494e-9,-6.27338e-7,.0306409,1.97672e-8,99168e-8,-158573e-10,.0314638,4.99803e-7,991068e-9,-634012e-10,.031363,200682e-11,974567e-9,-14144e-8,.03036,457312e-11,998079e-9,-252812e-9,.031496,860131e-11,.00102243,-396506e-9,.0319955,148288e-10,.00107877,-577593e-9,.0331376,249141e-10,.00121622,-816816e-9,.0359396,423011e-10,.0014455,-.00113761,.0399652,724613e-10,.00178791,-.00156959,.0450556,123929e-9,.00225668,-.00214064,.0508025,208531e-9,.00285627,-.00287655,.0568443,341969e-9,.0035991,-.00380271,.0630892,544158e-9,.00455524,-.00496264,.0702204,842423e-9,.00569143,-.0063793,.0773426,.00126704,.00716928,-.00813531,.0860839,.00186642,.00885307,-.0101946,.0944079,.00267014,.0109316,-.0126386,.103951,.00374033,.0133704,-.0154876,.113786,.0051304,.0161525,-.0187317,.123477,.00688858,.0194267,-.0224652,.133986,.00910557,.0230967,-.0265976,.143979,.0118074,.0273627,-.0312848,.154645,.0151266,.0323898,-.0365949,.166765,.0191791,.0379225,-.0422914,.177932,.0239236,.0447501,-.0487469,.19167,.0296568,.0519391,-.0556398,.203224,.0362924,.0599464,-.0631646,.215652,.0440585,.0702427,-.0714308,.232089,.0531619,.0806902,-.0800605,.245258,.0634564,.0923194,-.0892815,.258609,.0752481,.106938,-.09931,.276654,.0888914,.121238,-.109575,.289847,.104055,.138817,-.120461,.307566,.121266,.15595,-.131209,.320117,.139944,.178418,-.143049,.339677,.161591,.197875,-.154074,.349886,.184303,.224368,-.166307,.369352,.210669,.252213,-.178051,.386242,.238895,.277321,-.189335,.395294,.269182,.310332,-.200683,.412148,.302508,.338809,-.210856,.418266,.337264,.372678,-.220655,.428723,.374881,.405632,-.230053,.433887,.415656,.442293,-.237993,.439911,.457982,.477256,-.244897,.440175,.502831,.515592,-.250657,.441079,.550277,.550969,-.255459,.435219,.601102,.592883,-.257696,.432882,.651785,.629092,-.259894,.421054,.708961,.672033,-.258592,.41177,.763806,.709147,-.256525,.395267,.824249,.745367,-.254677,.375013,.8951,.784715,-.247892,.353906,.959317,.818107,-.240162,.327801,1.03153,.847895,-.229741,.298821,1.10601,.879603,-.213084,.269115,1.164,.902605,-.195242,.236606,1.22854,.922788,-.174505,.203442,1.29017,.944831,-.150169,.169594,1.34157,.959656,-.124099,.135909,1.3956,.972399,-.0960626,.0990563,1.45128,.986549,-.0657097,.0602348,1.50312,1.00013,-.0333558,.0186694,1.55364,619747e-11,-1e-7,.00778326,796756e-16,2.37499e-8,-9.99999e-8,282592e-10,1.14596e-10,100292e-11,-166369e-11,250354e-9,6.77492e-9,350752e-11,-637769e-11,357289e-9,6.31655e-8,826445e-11,-174689e-10,516179e-9,3.1851e-7,242481e-10,-450868e-10,.0010223,130577e-11,455631e-10,-89044e-9,.00144302,374587e-11,971222e-10,-178311e-9,.00241912,102584e-10,171403e-9,-313976e-9,.00354938,236481e-10,292747e-9,-520026e-9,.00513765,496014e-10,789827e-9,-.00118187,.0238621,139056e-9,.00114093,-.00171827,.0286691,244093e-9,.00176119,-.00249667,.0368565,420623e-9,.0022233,-.00333742,.0400469,65673e-8,.00343382,-.00481976,.0535751,.00109323,.00427602,-.00600755,.057099,.00155268,.00461435,-.00737637,.0551084,.00215031,.00695698,-.00971401,.0715767,.00316529,.00867619,-.0120943,.0793314,.00436995,.0106694,-.0148202,.0869391,.0058959,.0140351,-.0183501,.101572,.00798757,.0168939,-.022006,.11018,.0104233,.020197,-.0261568,.119041,.0134167,.0254702,-.0312778,.135404,.0173009,.0298384,-.0362469,.1437,.0215428,.035159,-.042237,.15512,.0268882,.0427685,-.0488711,.17128,.033235,.0494848,-.0557997,.181813,.0404443,.0592394,-.0635578,.198745,.0490043,.0681463,-.071838,.210497,.0588239,.0804753,-.0809297,.228864,.0702835,.0942205,-.0906488,.247008,.0834012,.106777,-.100216,.258812,.0975952,.124471,-.110827,.278617,.114162,.138389,-.121193,.287049,.131983,.159543,-.13253,.307151,.152541,.176432,-.143611,.31564,.174673,.201723,-.15548,.33538,.199842,.229721,-.167166,.355256,.227097,.250206,-.178238,.360047,.256014,.282118,-.189905,.378761,.28855,.312821,-.201033,.39181,.323348,.341482,-.211584,.397716,.360564,.377368,-.221314,.410141,.400004,.418229,-.230474,.423485,.442371,.444881,-.239443,.418874,.488796,.488899,-.245987,.427545,.535012,.520317,-.253948,.422147,.589678,.568566,-.256616,.42719,.637683,.599607,-.26376,.415114,.703363,.64222,-.268687,.408715,.771363,.685698,-.2694,.399722,.83574,.732327,-.266642,.388651,.897764,.769873,-.267712,.369198,.983312,.806733,-.263479,.346802,1.06222,.843466,-.254575,.321368,1.13477,.873008,-.242749,.29211,1.20712,.908438,-.22725,.262143,1.27465,.936321,-.207621,.228876,1.33203,.950353,-.187932,.19484,1.40439,.96442,-.165154,.163178,1.4732,.979856,-.139302,.127531,1.53574,.982561,-.11134,.0903457,1.59982,.996389,-.0808124,.0489007,1.6577],t=[1,0,0,0,1,791421e-36,0,0,1,104392e-29,0,0,1,349405e-26,0,0,1,109923e-23,0,0,1,947414e-22,0,0,1,359627e-20,0,0,1,772053e-19,0,0,1,108799e-17,0,0,1,110655e-16,0,0,1,865818e-16,0,0,.999998,5.45037e-10,0,0,.999994,2.85095e-9,0,0,.999989,1.26931e-8,0,0,.999973,4.89938e-8,0,0,.999947,1.66347e-7,0,0,.999894,5.02694e-7,0,0,.999798,136532e-11,0,0,.999617,335898e-11,0,0,.999234,752126e-11,0,0,.998258,152586e-10,0,0,.99504,266207e-10,0,0,.980816,236802e-10,0,0,.967553,207684e-11,0,0,.966877,403733e-11,0,0,.965752,741174e-11,0,0,.96382,127746e-10,0,0,.960306,202792e-10,0,0,.953619,280232e-10,0,0,.941103,278816e-10,0,0,.926619,160221e-10,0,0,.920983,235164e-10,0,0,.912293,311924e-10,0,.0158731,.899277,348118e-10,0,.0476191,.880884,26041e-9,0,.0793651,.870399,338726e-10,0,.111111,.856138,392906e-10,0,.142857,.837436,372874e-10,0,.174603,.820973,392558e-10,0,.206349,.803583,434658e-10,0,.238095,.782168,40256e-9,0,.269841,.764107,448159e-10,0,.301587,.743092,457627e-10,0,.333333,.721626,455314e-10,0,.365079,.700375,477335e-10,0,.396825,.677334,461072e-10,0,.428571,.655702,484393e-10,0,.460317,.632059,464583e-10,0,.492064,.610125,483923e-10,0,.52381,.58653,464342e-10,0,.555556,.564508,477033e-10,0,.587302,.541405,459263e-10,0,.619048,.519556,46412e-9,0,.650794,.497292,448913e-10,0,.68254,.475898,445789e-10,0,.714286,.454722,433496e-10,0,.746032,.434042,423054e-10,0,.777778,.414126,413737e-10,0,.809524,.394387,397265e-10,0,.84127,.375841,390709e-10,0,.873016,.357219,369938e-10,0,.904762,.340084,365618e-10,0,.936508,.322714,342533e-10,0,.968254,.306974,339596e-10,0,1,1,101524e-23,0,0,1,10292e-22,0,0,1,130908e-23,0,0,1,473331e-23,0,0,1,625319e-22,0,0,1,107932e-20,0,0,1,163779e-19,0,0,1,203198e-18,0,0,1,204717e-17,0,0,.999999,168995e-16,0,0,.999998,1.15855e-10,0,0,.999996,6.6947e-10,0,0,.999991,3.30863e-9,0,0,.999983,1.41737e-8,0,0,.999968,5.32626e-8,0,0,.99994,1.77431e-7,0,0,.999891,5.28835e-7,0,0,.999797,142169e-11,0,0,.999617,347057e-11,0,0,.999227,77231e-10,0,0,.998239,155753e-10,0,0,.994937,268495e-10,0,0,.980225,213742e-10,0,0,.967549,21631e-10,0,0,.966865,417989e-11,0,0,.965739,763341e-11,0,0,.963794,130892e-10,0,0,.960244,206456e-10,0,0,.953495,282016e-10,0,148105e-9,.940876,271581e-10,0,.002454,.926569,164159e-10,0,.00867491,.920905,239521e-10,0,.01956,.912169,315127e-10,0,.035433,.899095,346626e-10,0,.056294,.882209,290223e-10,0,.0818191,.870272,342992e-10,0,.111259,.855977,394164e-10,0,.142857,.837431,372343e-10,0,.174603,.820826,396691e-10,0,.206349,.803408,435395e-10,0,.238095,.782838,419579e-10,0,.269841,.763941,450953e-10,0,.301587,.742904,455847e-10,0,.333333,.721463,458833e-10,0,.365079,.700197,477159e-10,0,.396825,.677501,470641e-10,0,.428571,.655527,484732e-10,0,.460317,.6324,476834e-10,0,.492064,.609964,484213e-10,0,.52381,.586839,475541e-10,0,.555556,.564353,476951e-10,0,.587302,.541589,467611e-10,0,.619048,.519413,463493e-10,0,.650794,.497337,453994e-10,0,.68254,.475797,445308e-10,0,.714286,.454659,435787e-10,0,.746032,.434065,424839e-10,0,.777778,.414018,41436e-9,0,.809524,.39455,401902e-10,0,.84127,.375742,390813e-10,0,.873016,.357501,377116e-10,0,.904762,.339996,36535e-9,0,.936508,.323069,351265e-10,0,.968254,.306897,339112e-10,0,1,1,10396e-19,0,0,1,104326e-20,0,0,1,110153e-20,0,0,1,144668e-20,0,0,1,34528e-19,0,0,1,175958e-19,0,0,1,12627e-17,0,0,1,936074e-18,0,0,1,645742e-17,0,0,.999998,401228e-16,0,0,.999997,2.22338e-10,0,0,.999995,1.0967e-9,0,0,.999991,4.82132e-9,0,0,.999981,1.89434e-8,0,0,.999967,6.67716e-8,0,0,.999938,2.12066e-7,0,0,.999886,6.0977e-7,0,0,.999792,159504e-11,0,0,.999608,381191e-11,0,0,.999209,833727e-11,0,0,.998179,165288e-10,0,0,.994605,274387e-10,0,0,.979468,167316e-10,0,0,.967529,242877e-11,0,0,.966836,461696e-11,0,0,.96569,830977e-11,0,0,.963706,140427e-10,0,244659e-11,.960063,217353e-10,0,760774e-9,.953113,286606e-10,0,.00367261,.940192,247691e-10,0,.00940263,.927731,195814e-10,0,.018333,.920669,252531e-10,0,.0306825,.911799,324277e-10,0,.0465556,.89857,340982e-10,0,.0659521,.883283,319622e-10,0,.0887677,.86989,35548e-9,0,.114784,.855483,397143e-10,0,.143618,.837987,391665e-10,0,.174606,.820546,411306e-10,0,.206349,.802878,436753e-10,0,.238095,.783402,444e-7,0,.269841,.763439,458726e-10,0,.301587,.742925,467097e-10,0,.333333,.721633,478887e-10,0,.365079,.69985,481251e-10,0,.396825,.67783,491811e-10,0,.428571,.655126,488199e-10,0,.460318,.632697,496025e-10,0,.492064,.609613,48829e-9,0,.52381,.587098,492754e-10,0,.555556,.564119,482625e-10,0,.587302,.541813,482807e-10,0,.619048,.519342,471552e-10,0,.650794,.497514,466765e-10,0,.68254,.475879,455582e-10,0,.714286,.454789,446007e-10,0,.746032,.434217,435382e-10,0,.777778,.414086,421753e-10,0,.809524,.394744,412093e-10,0,.84127,.375782,396634e-10,0,.873016,.357707,386419e-10,0,.904762,.340038,370345e-10,0,.936508,.323284,359725e-10,0,.968254,.306954,3436e-8,0,1,1,599567e-19,0,0,1,600497e-19,0,0,1,614839e-19,0,0,1,686641e-19,0,0,1,972658e-19,0,0,1,221271e-18,0,0,1,833195e-18,0,0,1,403601e-17,0,0,.999999,206001e-16,0,0,.999998,1.01739e-10,0,0,.999997,4.70132e-10,0,0,.999993,2.00436e-9,0,0,.999988,7.83682e-9,0,0,.999979,2.80338e-8,0,0,.999962,9.17033e-8,0,0,.999933,2.74514e-7,0,0,.999881,7.53201e-7,0,0,.999783,189826e-11,0,0,.999594,440279e-11,0,0,.999178,93898e-10,0,0,.998073,181265e-10,0,0,.993993,280487e-10,0,0,.979982,149422e-10,0,0,.968145,378481e-11,0,0,.966786,53771e-10,0,0,.965611,947508e-11,0,388934e-10,.963557,156616e-10,0,9693e-7,.959752,235144e-10,0,.00370329,.952461,291568e-10,0,.00868428,.940193,240102e-10,0,.0161889,.929042,231235e-10,0,.0263948,.920266,273968e-10,0,.0394088,.911178,337915e-10,0,.0552818,.897873,333629e-10,0,.0740138,.884053,351405e-10,0,.0955539,.869455,378034e-10,0,.119795,.854655,399378e-10,0,.14656,.838347,419108e-10,0,.175573,.820693,440831e-10,0,.206388,.802277,445599e-10,0,.238095,.783634,472691e-10,0,.269841,.763159,476984e-10,0,.301587,.742914,491487e-10,0,.333333,.721662,502312e-10,0,.365079,.699668,502817e-10,0,.396825,.677839,51406e-9,0,.428571,.655091,511095e-10,0,.460317,.632665,516067e-10,0,.492064,.609734,512255e-10,0,.52381,.587043,510263e-10,0,.555556,.564298,50565e-9,0,.587302,.541769,497951e-10,0,.619048,.519529,492698e-10,0,.650794,.497574,482066e-10,0,.68254,.476028,473689e-10,0,.714286,.454961,461941e-10,0,.746032,.434341,450618e-10,0,.777778,.414364,438355e-10,0,.809524,.394832,424196e-10,0,.84127,.376109,412563e-10,0,.873016,.35779,396226e-10,0,.904762,.340379,384886e-10,0,.936508,.323385,368214e-10,0,.968254,.307295,356636e-10,0,1,1,106465e-17,0,0,1,106555e-17,0,0,1,107966e-17,0,0,1,114601e-17,0,0,1,137123e-17,0,0,1,21243e-16,0,0,.999999,489653e-17,0,0,.999999,160283e-16,0,0,.999998,62269e-15,0,0,.999997,2.51859e-10,0,0,.999996,9.96192e-10,0,0,.999992,3.74531e-9,0,0,.999986,1.32022e-8,0,0,.999975,4.33315e-8,0,0,.999959,1.31956e-7,0,0,.999927,3.72249e-7,0,0,.999871,9.72461e-7,0,0,.999771,235343e-11,0,0,.999572,52768e-10,0,0,.999133,109237e-10,0,0,.997912,203675e-10,0,0,.993008,279396e-10,0,0,.980645,139604e-10,0,0,.970057,646596e-11,0,0,.966717,65089e-10,0,474145e-10,.965497,111863e-10,0,89544e-8,.96334,179857e-10,0,.0032647,.959294,259045e-10,0,.0075144,.951519,292327e-10,0,.0138734,.940517,249769e-10,0,.0224952,.93014,26803e-9,0,.0334828,.91972,303656e-10,0,.0468973,.910294,353323e-10,0,.0627703,.897701,351002e-10,0,.0811019,.884522,388104e-10,0,.10186,.869489,412932e-10,0,.124985,.853983,415781e-10,0,.150372,.838425,454066e-10,0,.177868,.820656,471624e-10,0,.207245,.801875,475243e-10,0,.238143,.783521,505621e-10,0,.269841,.763131,50721e-9,0,.301587,.74261,523293e-10,0,.333333,.72148,528699e-10,0,.365079,.699696,538677e-10,0,.396825,.677592,539255e-10,0,.428571,.65525,546367e-10,0,.460317,.632452,541348e-10,0,.492064,.609903,544976e-10,0,.52381,.586928,536201e-10,0,.555556,.564464,535185e-10,0,.587302,.541801,524949e-10,0,.619048,.519681,51812e-9,0,.650794,.497685,507687e-10,0,.68254,.47622,496243e-10,0,.714286,.455135,485714e-10,0,.746032,.4346,471847e-10,0,.777778,.414564,459294e-10,0,.809524,.395165,444705e-10,0,.84127,.376333,430772e-10,0,.873016,.358197,416229e-10,0,.904762,.34064,401019e-10,0,.936508,.323816,386623e-10,0,.968254,.307581,370933e-10,0,1,1,991541e-17,0,0,1,992077e-17,0,0,1,100041e-16,0,0,1,10385e-15,0,0,1,115777e-16,0,0,1,150215e-16,0,0,.999999,254738e-16,0,0,.999999,598822e-16,0,0,.999998,1.79597e-10,0,0,.999997,6.02367e-10,0,0,.999994,2.06835e-9,0,0,.99999,6.94952e-9,0,0,.999984,2.23363e-8,0,0,.999972,6.78578e-8,0,0,.999952,1.93571e-7,0,0,.999919,5.16594e-7,0,0,.99986,128739e-11,0,0,.999753,299298e-11,0,0,.999546,648258e-11,0,0,.999074,129985e-10,0,0,.997671,232176e-10,0,0,.991504,256701e-10,0,0,.981148,131141e-10,0,0,.971965,869048e-11,0,280182e-10,.966624,808301e-11,0,695475e-9,.965344,135235e-10,0,.00265522,.963048,210592e-10,0,.00622975,.958673,287473e-10,0,.0116234,.950262,281379e-10,0,.018976,.940836,271089e-10,0,.0283844,.930996,30926e-9,0,.0399151,.919848,348359e-10,0,.0536063,.909136,366092e-10,0,.0694793,.897554,384162e-10,0,.0875342,.884691,430971e-10,0,.107749,.869414,447803e-10,0,.130087,.853462,452858e-10,0,.154481,.838187,495769e-10,0,.180833,.820381,502709e-10,0,.209005,.801844,522713e-10,0,.238791,.783061,541505e-10,0,.269869,.763205,553712e-10,0,.301587,.742362,564909e-10,0,.333333,.721393,572646e-10,0,.365079,.699676,581012e-10,0,.396825,.677395,58096e-9,0,.428571,.655208,585766e-10,0,.460317,.632451,583602e-10,0,.492064,.609839,580234e-10,0,.52381,.587093,577161e-10,0,.555556,.564467,568447e-10,0,.587302,.542043,563166e-10,0,.619048,.519826,55156e-9,0,.650794,.497952,541682e-10,0,.68254,.476477,528971e-10,0,.714286,.455412,514952e-10,0,.746032,.434926,502222e-10,0,.777778,.4149,485779e-10,0,.809524,.395552,472242e-10,0,.84127,.376712,454891e-10,0,.873016,.358622,440924e-10,0,.904762,.341048,422984e-10,0,.936508,.324262,408582e-10,0,.968254,.308013,390839e-10,0,1,1,613913e-16,0,0,1,614145e-16,0,0,1,617708e-16,0,0,1,633717e-16,0,0,1,681648e-16,0,0,1,808291e-16,0,0,1,1.14608e-10,0,0,.999998,2.10507e-10,0,0,.999997,4.99595e-10,0,0,.999995,1.39897e-9,0,0,.999994,4.19818e-9,0,0,.999988,1.27042e-8,0,0,.999979,3.75153e-8,0,0,.999965,1.06206e-7,0,0,.999945,2.85381e-7,0,0,.999908,7.23611e-7,0,0,.999846,17255e-10,0,0,.999733,386104e-11,0,0,.999511,808493e-11,0,0,.998993,156884e-10,0,0,.997326,265538e-10,0,0,.989706,206466e-10,0,0,.981713,130756e-10,0,70005e-10,.973636,106473e-10,0,464797e-9,.966509,10194e-9,0,.00201743,.965149,165881e-10,0,.00497549,.962669,249147e-10,0,.00953262,.95786,317449e-10,0,.0158211,.949334,281045e-10,0,.0239343,.941041,303263e-10,0,.0339372,.931575,356754e-10,0,.0458738,.920102,397075e-10,0,.059772,.908002,384886e-10,0,.075645,.897269,43027e-9,0,.0934929,.884559,479925e-10,0,.113302,.869161,48246e-9,0,.135045,.853342,509505e-10,0,.158678,.837633,542846e-10,0,.184136,.820252,554139e-10,0,.211325,.801872,581412e-10,0,.240113,.782418,585535e-10,0,.270306,.7631,610923e-10,0,.301594,.742183,613678e-10,0,.333333,.721098,627275e-10,0,.365079,.699512,629413e-10,0,.396825,.677372,636351e-10,0,.428571,.655059,633555e-10,0,.460317,.632567,636513e-10,0,.492064,.609784,628965e-10,0,.52381,.587237,625546e-10,0,.555556,.564525,615825e-10,0,.587302,.542181,605048e-10,0,.619048,.520017,596329e-10,0,.650794,.498204,581516e-10,0,.68254,.476742,569186e-10,0,.714286,.455803,553833e-10,0,.746032,.435251,537807e-10,0,.777778,.415374,522025e-10,0,.809524,.395921,503421e-10,0,.84127,.377253,488211e-10,0,.873016,.359021,468234e-10,0,.904762,.341637,453269e-10,0,.936508,.3247,433014e-10,0,.968254,.308625,418007e-10,0,1,1,2.86798e-10,0,0,1,2.86877e-10,0,0,1,2.88094e-10,0,0,1,2.93506e-10,0,0,1,3.09262e-10,0,0,.999999,3.48593e-10,0,0,.999999,4.44582e-10,0,0,.999998,6.88591e-10,0,0,.999996,1.34391e-9,0,0,.999993,3.17438e-9,0,0,.999989,8.35609e-9,0,0,.999983,2.28677e-8,0,0,.999974,6.23361e-8,0,0,.999959,1.65225e-7,0,0,.999936,4.19983e-7,0,0,.999896,101546e-11,0,0,.99983,232376e-11,0,0,.999709,50156e-10,0,0,.999469,10167e-9,0,0,.998886,190775e-10,0,0,.996819,300511e-10,0,0,.988837,185092e-10,0,1.68222e-7,.982178,134622e-10,0,259622e-9,.975017,125961e-10,0,.00142595,.967101,13507e-9,0,.00382273,.964905,205003e-10,0,.00764164,.96218,29546e-9,0,.0130121,.956821,343738e-10,0,.0200253,.948829,305063e-10,0,.0287452,.941092,346487e-10,0,.039218,.931883,412061e-10,0,.0514748,.920211,444651e-10,0,.0655351,.907307,431252e-10,0,.0814082,.89684,490382e-10,0,.0990939,.884119,53334e-9,0,.118583,.869148,54114e-9,0,.139856,.853377,578536e-10,0,.162882,.836753,592285e-10,0,.187615,.820063,622787e-10,0,.213991,.801694,645492e-10,0,.241918,.782116,65353e-9,0,.271267,.762673,674344e-10,0,.301847,.742133,682788e-10,0,.333333,.720779,691959e-10,0,.365079,.699386,696817e-10,0,.396826,.67732,699583e-10,0,.428572,.654888,698447e-10,0,.460318,.632499,694063e-10,0,.492064,.609825,691612e-10,0,.52381,.587287,681576e-10,0,.555556,.564743,674138e-10,0,.587302,.542409,661617e-10,0,.619048,.520282,647785e-10,0,.650794,.498506,633836e-10,0,.68254,.477102,615905e-10,0,.714286,.456167,601013e-10,0,.746032,.435728,581457e-10,0,.777778,.415809,564215e-10,0,.809524,.396517,544997e-10,0,.84127,.377737,525061e-10,0,.873016,.359698,506831e-10,0,.904762,.342164,48568e-9,0,.936508,.325417,467826e-10,0,.968254,.309186,446736e-10,0,1,1,1.09018e-9,0,0,1,1.0904e-9,0,0,1,1.09393e-9,0,0,1,1.1095e-9,0,0,1,1.154e-9,0,0,1,1.26089e-9,0,0,.999999,1.5059e-9,0,0,.999997,2.07899e-9,0,0,.999994,3.48164e-9,0,0,.999993,7.05728e-9,0,0,.999987,1.63692e-8,0,0,.999981,4.06033e-8,0,0,.999969,1.0245e-7,0,0,.999953,2.55023e-7,0,0,.999925,6.1511e-7,0,0,.999881,142218e-11,0,0,.99981,313086e-11,0,0,.99968,653119e-11,0,0,.999418,12832e-9,0,0,.998748,232497e-10,0,0,.996066,329522e-10,0,0,.988379,179613e-10,0,108799e-9,.982567,143715e-10,0,921302e-9,.976097,148096e-10,0,.00280738,.968475,178905e-10,0,.00596622,.964606,253921e-10,0,.0105284,.961564,348623e-10,0,.0165848,.955517,357612e-10,0,.0242,.948381,343493e-10,0,.03342,.941095,405849e-10,0,.0442777,.931923,475394e-10,0,.0567958,.91996,484328e-10,0,.0709879,.907419,502146e-10,0,.086861,.89618,561654e-10,0,.104415,.88337,587612e-10,0,.123643,.869046,618057e-10,0,.144531,.853278,657392e-10,0,.167057,.836091,66303e-9,0,.191188,.819644,704445e-10,0,.216878,.801246,714071e-10,0,.244062,.782031,740093e-10,0,.272649,.762066,74685e-9,0,.302509,.741964,766647e-10,0,.333442,.720554,766328e-10,0,.365079,.699098,777857e-10,0,.396826,.677189,774633e-10,0,.428572,.65484,776235e-10,0,.460318,.632496,770316e-10,0,.492064,.609908,762669e-10,0,.52381,.587312,753972e-10,0,.555556,.564938,739994e-10,0,.587302,.542577,728382e-10,0,.619048,.52062,71112e-9,0,.650794,.498819,694004e-10,0,.68254,.477555,675575e-10,0,.714286,.456568,653449e-10,0,.746032,.436278,636068e-10,0,.777778,.41637,613466e-10,0,.809524,.397144,594177e-10,0,.84127,.378412,570987e-10,0,.873016,.360376,550419e-10,0,.904762,.342906,527422e-10,0,.936508,.326136,506544e-10,0,.968254,.30997,484307e-10,0,1,1,3.54014e-9,0,0,1,3.54073e-9,0,0,1,3.54972e-9,0,0,1,3.58929e-9,0,0,1,3.70093e-9,0,0,.999999,3.96194e-9,0,0,.999998,4.53352e-9,0,0,.999997,5.78828e-9,0,0,.999994,8.63812e-9,0,0,.999991,1.53622e-8,0,0,.999985,3.16356e-8,0,0,.999977,7.12781e-8,0,0,.999964,1.66725e-7,0,0,.999945,3.90501e-7,0,0,.999912,8.95622e-7,0,0,.999866,198428e-11,0,0,.999786,421038e-11,0,0,.999647,850239e-11,0,0,.999356,162059e-10,0,0,.998563,282652e-10,0,0,.994928,336309e-10,0,244244e-10,.987999,178458e-10,0,523891e-9,.982893,159162e-10,0,.00194729,.977044,178056e-10,0,.00451099,.969972,230624e-10,0,.00835132,.964237,313922e-10,0,.013561,.960791,406145e-10,0,.0202056,.954292,372796e-10,0,.0283321,.948052,403199e-10,0,.0379739,.940938,479537e-10,0,.0491551,.931689,545292e-10,0,.0618918,.91987,54038e-9,0,.0761941,.907665,589909e-10,0,.0920672,.895281,642651e-10,0,.109511,.882621,659707e-10,0,.12852,.86873,709973e-10,0,.149085,.853008,742221e-10,0,.171189,.835944,761754e-10,0,.194809,.818949,797052e-10,0,.21991,.800951,812434e-10,0,.246447,.781847,838075e-10,0,.274352,.761649,84501e-9,0,.303535,.74152,860258e-10,0,.333857,.720495,866233e-10,0,.365104,.698742,868326e-10,0,.396826,.677096,87133e-9,0,.428572,.654782,863497e-10,0,.460318,.632335,860206e-10,0,.492064,.610031,849337e-10,0,.52381,.587457,838279e-10,0,.555556,.56513,82309e-9,0,.587302,.542877,803542e-10,0,.619048,.5209,786928e-10,0,.650794,.499291,765171e-10,0,.68254,.477971,744753e-10,0,.714286,.457221,72209e-9,0,.746032,.436803,697448e-10,0,.777778,.417083,675333e-10,0,.809524,.397749,648058e-10,0,.84127,.379177,625759e-10,0,.873016,.361061,598584e-10,0,.904762,.343713,575797e-10,0,.936508,.326894,549999e-10,0,.968254,.310816,527482e-10,0,1,1,1.0153e-8,0,0,1,1.01544e-8,0,0,1,1.01751e-8,0,0,1,1.02662e-8,0,0,1,1.0521e-8,0,0,.999999,1.11049e-8,0,0,.999999,1.23408e-8,0,0,.999996,1.4924e-8,0,0,.999992,2.04471e-8,0,0,.999989,3.26539e-8,0,0,.99998,6.03559e-8,0,0,.999971,1.23936e-7,0,0,.999955,2.69058e-7,0,0,.999933,5.93604e-7,0,0,.999901,129633e-11,0,0,.999847,275621e-11,0,0,.999761,564494e-11,0,0,.999607,110485e-10,0,0,.999282,204388e-10,0,0,.99831,341084e-10,0,2.2038e-7,.993288,294949e-10,0,242388e-9,.987855,192736e-10,0,.0012503,.983167,182383e-10,0,.0032745,.977908,218633e-10,0,.00646321,.971194,290662e-10,0,.0109133,.963867,386401e-10,0,.0166927,.95982,462827e-10,0,.0238494,.953497,420705e-10,0,.0324178,.947621,477743e-10,0,.0424225,.940611,568258e-10,0,.0538808,.931174,618061e-10,0,.0668047,.919919,627098e-10,0,.0812014,.907856,694714e-10,0,.0970745,.894509,735008e-10,0,.114424,.881954,763369e-10,0,.133246,.868309,821896e-10,0,.153534,.852511,83769e-9,0,.175275,.835821,881615e-10,0,.198453,.817981,896368e-10,0,.223042,.800504,930906e-10,0,.249009,.78141,945056e-10,0,.276304,.761427,963605e-10,0,.304862,.74094,968088e-10,0,.334584,.720233,981481e-10,0,.365322,.698592,979122e-10,0,.396826,.676763,981057e-10,0,.428571,.654808,973956e-10,0,.460318,.632326,962619e-10,0,.492064,.610049,952996e-10,0,.52381,.58763,933334e-10,0,.555556,.565261,917573e-10,0,.587302,.543244,896636e-10,0,.619048,.521273,873304e-10,0,.650794,.499818,852648e-10,0,.68254,.478536,823961e-10,0,.714286,.457826,79939e-9,0,.746032,.437549,77126e-9,0,.777778,.41776,743043e-10,0,.809524,.39863,716426e-10,0,.84127,.379954,686456e-10,0,.873016,.362025,660514e-10,0,.904762,.344581,630755e-10,0,.936508,.327909,605439e-10,0,.968254,.311736,576345e-10,0,1,1,2.63344e-8,0,0,1,2.63373e-8,0,0,1,2.63815e-8,0,0,1,2.65753e-8,0,0,1,2.71132e-8,0,0,.999999,2.83279e-8,0,0,.999997,3.0833e-8,0,0,.999995,3.58711e-8,0,0,.999992,4.61266e-8,0,0,.999985,6.7574e-8,0,0,.999977,1.1358e-7,0,0,.999966,2.13657e-7,0,0,.999948,4.31151e-7,0,0,.999923,8.96656e-7,0,0,.999884,186603e-11,0,0,.999826,381115e-11,0,0,.999732,754184e-11,0,0,.999561,143192e-10,0,0,.999191,257061e-10,0,0,.997955,405724e-10,0,744132e-10,.992228,276537e-10,0,716477e-9,.987638,208885e-10,0,.0022524,.983395,215226e-10,0,.00484816,.978614,270795e-10,0,.00860962,.972389,365282e-10,0,.0136083,.964392,474747e-10,0,.0198941,.95861,509141e-10,0,.0275023,.952806,48963e-9,0,.0364584,.94712,571119e-10,0,.04678,.940104,671704e-10,0,.0584799,.930398,687586e-10,0,.0715665,.919866,738161e-10,0,.086045,.907853,813235e-10,0,.101918,.894078,834582e-10,0,.119186,.881177,892093e-10,0,.137845,.867575,944548e-10,0,.157891,.852107,969607e-10,0,.179316,.835502,101456e-9,0,.202106,.81756,103256e-9,0,.226243,.79984,106954e-9,0,.251704,.780998,108066e-9,0,.278451,.761132,110111e-9,0,.306436,.740429,110459e-9,0,.335586,.719836,111219e-9,0,.365796,.698467,11145e-8,0,.3969,.676446,110393e-9,0,.428571,.654635,110035e-9,0,.460318,.632411,108548e-9,0,.492064,.609986,106963e-9,0,.52381,.587872,105238e-9,0,.555556,.565528,102665e-9,0,.587302,.543563,100543e-9,0,.619048,.52176,976182e-10,0,.650794,.500188,947099e-10,0,.68254,.479204,919929e-10,0,.714286,.458413,886139e-10,0,.746032,.438314,857839e-10,0,.777778,.418573,82411e-9,0,.809524,.39947,792211e-10,0,.84127,.380892,759546e-10,0,.873016,.362953,727571e-10,0,.904762,.345601,695738e-10,0,.936508,.328895,664907e-10,0,.968254,.312808,634277e-10,0,1,1,6.28647e-8,0,0,1,6.28705e-8,0,0,1,6.29587e-8,0,0,1,6.33441e-8,0,0,.999999,6.44087e-8,0,0,.999998,6.67856e-8,0,0,.999997,7.15889e-8,0,0,.999995,8.09577e-8,0,0,.999989,9.92764e-8,0,0,.999983,1.35834e-7,0,0,.999974,2.10482e-7,0,0,.999959,3.65215e-7,0,0,.999939,6.86693e-7,0,0,.999911,13472e-10,0,0,.999868,26731e-10,0,0,.999804,524756e-11,0,0,.9997,100403e-10,0,0,.99951,185019e-10,0,0,.999078,322036e-10,0,620676e-11,.997428,470002e-10,0,341552e-9,.99162,287123e-10,0,.00143727,.987479,234706e-10,0,.00349201,.983582,260083e-10,0,.0066242,.979186,337927e-10,0,.0109113,.97325,454689e-10,0,.0164064,.965221,573759e-10,0,.0231463,.957262,544114e-10,0,.0311571,.952211,587006e-10,0,.0404572,.946631,692256e-10,0,.0510592,.939391,787819e-10,0,.0629723,.929795,792368e-10,0,.0762025,.91965,875075e-10,0,.090753,.907737,950903e-10,0,.106626,.893899,972963e-10,0,.123822,.880239,10459e-8,0,.142337,.866562,107689e-9,0,.16217,.85164,113081e-9,0,.183314,.835021,116636e-9,0,.20576,.817311,120074e-9,0,.229496,.798845,121921e-9,0,.254502,.780479,12475e-8,0,.280753,.760694,125255e-9,0,.308212,.740142,126719e-9,0,.336825,.719248,12636e-8,0,.366517,.698209,126712e-9,0,.397167,.676398,125769e-9,0,.428578,.654378,124432e-9,0,.460318,.632484,123272e-9,0,.492064,.610113,12085e-8,0,.52381,.587931,118411e-9,0,.555556,.565872,11569e-8,0,.587302,.543814,112521e-9,0,.619048,.522265,109737e-9,0,.650794,.500835,106228e-9,0,.68254,.479818,102591e-9,0,.714286,.459258,991288e-10,0,.746032,.439061,952325e-10,0,.777778,.419552,91895e-9,0,.809524,.400399,879051e-10,0,.84127,.381976,844775e-10,0,.873016,.364009,806316e-10,0,.904762,.346761,771848e-10,0,.936508,.330049,735429e-10,0,.968254,.314018,702103e-10,0,1,1,1.39968e-7,0,0,1,1.39979e-7,0,0,1,1.40145e-7,0,0,1,1.4087e-7,0,0,.999999,1.42865e-7,0,0,.999998,1.47279e-7,0,0,.999997,1.56057e-7,0,0,.999992,1.7276e-7,0,0,.999989,2.04352e-7,0,0,.99998,2.6494e-7,0,0,.999969,3.83435e-7,0,0,.999953,6.18641e-7,0,0,.999929,108755e-11,0,0,.999898,201497e-11,0,0,.999849,381346e-11,0,0,.999778,719815e-11,0,0,.999661,133215e-10,0,0,.999451,238313e-10,0,0,.998936,401343e-10,0,113724e-9,.99662,517346e-10,0,820171e-9,.991094,304323e-10,0,.00238143,.987487,281757e-10,0,.00493527,.983731,320048e-10,0,.00856859,.979647,423905e-10,0,.0133393,.973837,562935e-10,0,.0192863,.96584,677442e-10,0,.0264369,.956309,623073e-10,0,.03481,.951523,704131e-10,0,.0444184,.946003,836594e-10,0,.0552713,.938454,911736e-10,0,.0673749,.929279,938264e-10,0,.0807329,.919239,103754e-9,0,.0953479,.907293,109928e-9,0,.111221,.893936,115257e-9,0,.128352,.879674,122265e-9,0,.14674,.865668,125733e-9,0,.166382,.850998,132305e-9,0,.187276,.834498,134844e-9,0,.209413,.816903,139276e-9,0,.232786,.798235,140984e-9,0,.257382,.779724,14378e-8,0,.283181,.760251,144623e-9,0,.310156,.739808,145228e-9,0,.338269,.718762,14539e-8,0,.367461,.697815,144432e-9,0,.397646,.67631,143893e-9,0,.428685,.654278,141846e-9,0,.460318,.632347,13935e-8,0,.492064,.610296,137138e-9,0,.52381,.588039,133806e-9,0,.555556,.566218,130755e-9,0,.587302,.544346,127128e-9,0,.619048,.522701,123002e-9,0,.650794,.501542,119443e-9,0,.68254,.480508,115055e-9,0,.714286,.460092,111032e-9,0,.746032,.440021,106635e-9,0,.777778,.420446,102162e-9,0,.809524,.401512,98184e-9,0,.84127,.38299,936497e-10,0,.873016,.365232,89813e-9,0,.904762,.347865,853073e-10,0,.936508,.331342,817068e-10,0,.968254,.315202,773818e-10,0,1,1,2.9368e-7,0,0,1,2.937e-7,0,0,1,2.93998e-7,0,0,1,2.95298e-7,0,0,.999999,2.98865e-7,0,0,.999998,3.067e-7,0,0,.999995,3.22082e-7,0,0,.999992,3.50767e-7,0,0,.999986,4.03538e-7,0,0,.999976,5.01372e-7,0,0,.999964,6.8562e-7,0,0,.999945,10374e-10,0,0,.999919,171269e-11,0,0,.999882,300175e-11,0,0,.999829,542144e-11,0,0,.999749,984182e-11,0,0,.99962,176213e-10,0,0,.999382,305995e-10,0,138418e-10,.998751,496686e-10,0,389844e-9,.995344,510733e-10,0,.00150343,.990768,345829e-10,0,.00352451,.987464,342841e-10,0,.00655379,.983846,399072e-10,0,.0106554,.980007,533219e-10,0,.0158723,.974494,696992e-10,0,.0222333,.96622,776754e-10,0,.029758,.956273,747718e-10,0,.0384596,.950952,864611e-10,0,.0483473,.945215,100464e-9,0,.0594266,.937287,103729e-9,0,.0717019,.928649,111665e-9,0,.0851752,.918791,12353e-8,0,.0998479,.906685,127115e-9,0,.115721,.893706,13628e-8,0,.132794,.879248,142427e-9,0,.151067,.864685,148091e-9,0,.170538,.850032,153517e-9,0,.191204,.833853,157322e-9,0,.213063,.816353,161086e-9,0,.236107,.797834,164111e-9,0,.260329,.778831,165446e-9,0,.285714,.759756,167492e-9,0,.312243,.739419,166928e-9,0,.339887,.718491,167e-6,0,.368604,.697392,165674e-9,0,.398329,.676102,163815e-9,0,.428961,.654243,162003e-9,0,.460331,.632176,158831e-9,0,.492064,.610407,155463e-9,0,.52381,.588394,152062e-9,0,.555556,.56645,147665e-9,0,.587302,.5449,14375e-8,0,.619048,.523276,138905e-9,0,.650794,.502179,134189e-9,0,.68254,.481359,129392e-9,0,.714286,.46092,124556e-9,0,.746032,.441084,11957e-8,0,.777778,.421517,114652e-9,0,.809524,.402721,109688e-9,0,.84127,.384222,104667e-9,0,.873016,.366534,999633e-10,0,.904762,.349205,950177e-10,0,.936508,.332702,907301e-10,0,.968254,.316599,859769e-10,0,1,1,5.85473e-7,0,0,1,5.85507e-7,0,0,1,5.8602e-7,0,0,.999999,5.88259e-7,0,0,.999999,5.94381e-7,0,0,.999998,6.07754e-7,0,0,.999995,6.33729e-7,0,0,.99999,6.8137e-7,0,0,.999984,7.67003e-7,0,0,.999973,9.21212e-7,0,0,.999959,120218e-11,0,0,.999936,172024e-11,0,0,.999907,268088e-11,0,0,.999866,445512e-11,0,0,.999806,768481e-11,0,0,.999716,1342e-8,0,0,.999576,232473e-10,0,0,.9993,391694e-10,0,129917e-9,.998498,608429e-10,0,845035e-9,.994132,489743e-10,0,.00237616,.99031,384644e-10,0,.00484456,.987409,421768e-10,0,.00832472,.983981,504854e-10,0,.0128643,.980268,671028e-10,0,.0184947,.974875,852749e-10,0,.025237,.966063,85531e-9,0,.0331046,.956779,900588e-10,0,.0421067,.950259,10577e-8,0,.0522487,.944239,119458e-9,0,.0635343,.936341,122164e-9,0,.0759654,.928047,134929e-9,0,.0895434,.918065,145544e-9,0,.104269,.906267,150531e-9,0,.120142,.893419,161652e-9,0,.137163,.878758,16593e-8,0,.15533,.863699,174014e-9,0,.174645,.848876,177877e-9,0,.195106,.833032,184049e-9,0,.21671,.815557,186088e-9,0,.239454,.797323,19054e-8,0,.263332,.778124,191765e-9,0,.288336,.758929,192535e-9,0,.314451,.738979,192688e-9,0,.341658,.718213,191522e-9,0,.369924,.696947,190491e-9,0,.399202,.675807,187913e-9,0,.429416,.654147,184451e-9,0,.460447,.63229,181442e-9,0,.492064,.610499,177139e-9,0,.523809,.588747,172596e-9,0,.555555,.566783,167457e-9,0,.587301,.545359,162518e-9,0,.619048,.523984,156818e-9,0,.650794,.502917,151884e-9,0,.68254,.482294,145514e-9,0,.714286,.461945,140199e-9,0,.746032,.442133,134101e-9,0,.777778,.422705,128374e-9,0,.809524,.403916,122996e-9,0,.84127,.38554,116808e-9,0,.873016,.367909,111973e-9,0,.904762,.350651,105938e-9,0,.936508,.334208,101355e-9,0,.968254,.318123,957629e-10,0,1,1,111633e-11,0,0,1,111639e-11,0,0,1,111725e-11,0,0,1,112096e-11,0,0,.999999,11311e-10,0,0,.999997,115315e-11,0,0,.999995,11956e-10,0,0,.999989,127239e-11,0,0,.999981,140772e-11,0,0,.999969,164541e-11,0,0,.999952,206607e-11,0,0,.999928,281783e-11,0,0,.999895,416835e-11,0,0,.999848,658728e-11,0,0,.999781,108648e-10,0,0,.999682,182579e-10,0,0,.999523,306003e-10,0,159122e-10,.999205,499862e-10,0,391184e-9,.998131,73306e-9,0,.00147534,.993334,513229e-10,0,.0034227,.99016,467783e-10,0,.00632232,.987321,523413e-10,0,.0102295,.984099,64267e-9,0,.0151794,.980432,843042e-10,0,.0211947,.974976,102819e-9,0,.0282899,.966429,996234e-10,0,.0364739,.957633,111074e-9,0,.0457522,.949422,128644e-9,0,.0561278,.943045,140076e-9,0,.0676023,.935448,146349e-9,0,.0801762,.927225,161854e-9,0,.0938499,.917033,169135e-9,0,.108623,.905762,179987e-9,0,.124496,.892879,189832e-9,0,.141469,.878435,195881e-9,0,.159541,.863114,20466e-8,0,.178713,.84776,209473e-9,0,.198985,.832084,214861e-9,0,.220355,.814915,217695e-9,0,.242823,.796711,220313e-9,0,.266385,.777603,22313e-8,0,.291036,.757991,222471e-9,0,.316767,.738371,222869e-9,0,.343563,.717872,221243e-9,0,.371402,.696619,218089e-9,0,.400248,.675379,21562e-8,0,.430047,.65411,21169e-8,0,.460709,.63241,206947e-9,0,.492079,.61046,201709e-9,0,.52381,.58903,196753e-9,0,.555556,.567267,189637e-9,0,.587302,.545886,184735e-9,0,.619048,.524714,177257e-9,0,.650794,.503789,171424e-9,0,.68254,.483204,164688e-9,0,.714286,.462976,157172e-9,0,.746032,.443294,151341e-9,0,.777778,.423988,143737e-9,0,.809524,.405325,138098e-9,0,.84127,.386981,130698e-9,0,.873016,.369436,125276e-9,0,.904762,.35219,118349e-9,0,.936508,.335804,11312e-8,0,.968254,.319749,106687e-9,0,1,1,204685e-11,0,0,1,204694e-11,0,0,1,204831e-11,0,0,.999999,205428e-11,0,0,.999999,207056e-11,0,0,.999997,210581e-11,0,0,.999993,21732e-10,0,0,.999987,229365e-11,0,0,.999979,250243e-11,0,0,.999965,286127e-11,0,0,.999947,348028e-11,0,0,.999918,455588e-11,0,0,.999881,643303e-11,0,0,.999828,970064e-11,0,0,.999753,153233e-10,0,0,.999642,24793e-9,0,0,.999464,402032e-10,0,122947e-9,.999089,635852e-10,0,807414e-9,.997567,857026e-10,0,.00227206,.992903,594912e-10,0,.00462812,.990011,578515e-10,0,.00794162,.987192,65399e-9,0,.0122534,.98418,819675e-10,0,.0175888,.980491,105514e-9,0,.0239635,.974779,121532e-9,0,.031387,.96675,119144e-9,0,.0398644,.958248,136125e-9,0,.0493982,.948884,155408e-9,0,.0599896,.941673,162281e-9,0,.0716382,.934521,176754e-9,0,.0843437,.926205,192873e-9,0,.0981056,.916089,200038e-9,0,.112923,.904963,213624e-9,0,.128796,.892089,221834e-9,0,.145725,.878028,232619e-9,0,.163709,.86249,238632e-9,0,.182749,.846587,247002e-9,0,.202847,.830988,250702e-9,0,.224001,.814165,255562e-9,0,.246214,.796135,257505e-9,0,.269482,.777052,258625e-9,0,.293805,.757201,258398e-9,0,.319176,.737655,256714e-9,0,.345587,.717477,255187e-9,0,.373021,.696433,251792e-9,0,.401454,.675084,247223e-9,0,.430844,.653907,242213e-9,0,.461125,.632561,237397e-9,0,.492187,.610658,229313e-9,0,.52381,.589322,224402e-9,0,.555556,.567857,216116e-9,0,.587302,.54652,209124e-9,0,.619048,.525433,201601e-9,0,.650794,.504679,192957e-9,0,.68254,.484203,186052e-9,0,.714286,.464203,177672e-9,0,.746032,.444549,170005e-9,0,.777778,.425346,162401e-9,0,.809524,.406706,1544e-7,0,.84127,.388576,147437e-9,0,.873016,.37094,139493e-9,0,.904762,.353996,133219e-9,0,.936508,.337391,125573e-9,0,.968254,.321648,119867e-9,0,1,1,362511e-11,0,0,1,362525e-11,0,0,1,362739e-11,0,0,.999999,363673e-11,0,0,.999998,366214e-11,0,0,.999996,371698e-11,0,0,.999992,382116e-11,0,0,.999986,400554e-11,0,0,.999976,432058e-11,0,0,.999961,485194e-11,0,0,.999938,574808e-11,0,0,.999908,726643e-11,0,0,.999865,984707e-11,0,0,.999807,142217e-10,0,0,.999723,215581e-10,0,0,.999602,336114e-10,0,119113e-10,.999398,527353e-10,0,355813e-9,.998946,805809e-10,0,.00137768,.996647,942908e-10,0,.00322469,.992298,668733e-10,0,.00597897,.989802,716564e-10,0,.00968903,.987019,821355e-10,0,.0143845,.984219,104555e-9,0,.0200831,.980425,131245e-9,0,.0267948,.974241,139613e-9,0,.034525,.967006,145931e-9,0,.0432757,.95893,167153e-9,0,.0530471,.949157,188146e-9,0,.0638386,.94062,194625e-9,0,.0756487,.933509,213721e-9,0,.0884762,.925088,229616e-9,0,.10232,.915178,239638e-9,0,.117178,.904093,254814e-9,0,.133051,.891337,263685e-9,0,.149939,.877326,274789e-9,0,.167841,.861794,280534e-9,0,.18676,.845758,289534e-9,0,.206696,.829792,294446e-9,0,.22765,.813037,296877e-9,0,.249625,.795285,300217e-9,0,.27262,.776323,299826e-9,0,.296636,.756673,299787e-9,0,.321671,.736856,297867e-9,0,.347718,.716883,294052e-9,0,.374768,.696089,289462e-9,0,.402804,.67505,285212e-9,0,.431796,.653509,27653e-8,0,.461695,.63258,271759e-9,0,.49242,.61104,262811e-9,0,.523822,.589567,255151e-9,0,.555556,.568322,246434e-9,0,.587302,.547235,237061e-9,0,.619048,.52616,228343e-9,0,.650794,.505716,219236e-9,0,.68254,.485274,209595e-9,0,.714286,.465411,201011e-9,0,.746032,.445854,19109e-8,0,.777778,.426911,182897e-9,0,.809524,.408222,173569e-9,0,.84127,.390307,165496e-9,0,.873016,.372624,156799e-9,0,.904762,.355804,14917e-8,0,.936508,.33924,140907e-9,0,.968254,.323534,134062e-9,0,1,1,622487e-11,0,0,1,62251e-10,0,0,1,622837e-11,0,0,.999999,624259e-11,0,0,.999998,628127e-11,0,0,.999996,636451e-11,0,0,.999991,65218e-10,0,0,.999984,679782e-11,0,0,.999973,726361e-11,0,0,.999955,803644e-11,0,0,.999931,931397e-11,0,0,.999896,114299e-10,0,0,.999847,149402e-10,0,0,.999784,207461e-10,0,0,.999692,302493e-10,0,0,.999554,454957e-10,0,997275e-10,.999326,690762e-10,0,724813e-9,.998757,101605e-9,0,.0020972,.995367,958745e-10,0,.00432324,.99209,832808e-10,0,.00746347,.989517,887601e-10,0,.0115534,.987008,10564e-8,0,.0166134,.98421,133179e-9,0,.0226552,.98021,161746e-9,0,.0296838,.973676,161821e-9,0,.0377016,.967052,178635e-9,0,.0467079,.959385,206765e-9,0,.0567013,.949461,22476e-8,0,.0676796,.939578,23574e-8,0,.0796403,.932416,25893e-8,0,.0925812,.923759,271228e-9,0,.106501,.914223,289165e-9,0,.121397,.902942,301156e-9,0,.13727,.890419,313852e-9,0,.15412,.876639,324408e-9,0,.171946,.861316,33249e-8,0,.190751,.84496,338497e-9,0,.210537,.828427,345861e-9,0,.231305,.811871,347863e-9,0,.253057,.794397,350225e-9,0,.275797,.775726,349915e-9,0,.299525,.75617,347297e-9,0,.324242,.736091,344232e-9,0,.349947,.716213,340835e-9,0,.376633,.695736,332369e-9,0,.404289,.674961,327943e-9,0,.432895,.653518,318533e-9,0,.462415,.632574,310391e-9,0,.492788,.61134,300755e-9,0,.523909,.590017,290506e-9,0,.555556,.568752,280446e-9,0,.587302,.548061,269902e-9,0,.619048,.52711,258815e-9,0,.650794,.506682,248481e-9,0,.68254,.486524,237141e-9,0,.714286,.466812,226872e-9,0,.746032,.44732,216037e-9,0,.777778,.428473,205629e-9,0,.809524,.409921,195691e-9,0,.84127,.392028,185457e-9,0,.873016,.374606,176436e-9,0,.904762,.357601,166508e-9,0,.936508,.341348,158385e-9,0,.968254,.32542,149203e-9,0,1,1,103967e-10,0,0,1,10397e-9,0,0,1,104019e-10,0,0,.999999,104231e-10,0,0,.999998,104806e-10,0,0,.999995,106042e-10,0,0,.999991,108366e-10,0,0,.999982,112415e-10,0,0,.999968,119174e-10,0,0,.99995,130227e-10,0,0,.999922,148176e-10,0,0,.999884,177303e-10,0,0,.99983,224564e-10,0,0,.999758,300966e-10,0,0,.999654,423193e-10,0,549083e-11,.999503,614848e-10,0,296087e-9,.999237,903576e-10,0,.00123144,.998491,1271e-7,0,.00295954,.994594,107754e-9,0,.00555829,.99178,103025e-9,0,.00907209,.989265,11154e-8,0,.0135257,.986998,136296e-9,0,.0189327,.984137,169154e-9,0,.0252993,.979798,196671e-9,0,.0326272,.97337,196678e-9,0,.0409157,.967239,223121e-9,0,.0501623,.959543,253809e-9,0,.0603638,.949466,265972e-9,0,.0715171,.939074,288372e-9,0,.0836187,.931118,310983e-9,0,.0966657,.922525,325561e-9,0,.110656,.912983,345725e-9,0,.125588,.901617,3556e-7,0,.141461,.889487,374012e-9,0,.158275,.875787,383445e-9,0,.176031,.860654,393972e-9,0,.19473,.844417,400311e-9,0,.214374,.82741,405004e-9,0,.234967,.810545,407378e-9,0,.256512,.793312,407351e-9,0,.279011,.774847,406563e-9,0,.302468,.755621,404903e-9,0,.326887,.735511,397486e-9,0,.352266,.715435,39357e-8,0,.378605,.695403,384739e-9,0,.405897,.674681,376108e-9,0,.43413,.65359,365997e-9,0,.463277,.632471,354957e-9,0,.493295,.61151,343593e-9,0,.524106,.59064,331841e-9,0,.555561,.569386,318891e-9,0,.587302,.548785,3072e-7,0,.619048,.528146,29361e-8,0,.650794,.507872,281709e-9,0,.68254,.487805,268627e-9,0,.714286,.468196,255887e-9,0,.746032,.448922,243997e-9,0,.777778,.430093,231662e-9,0,.809524,.411845,220339e-9,0,.84127,.393808,208694e-9,0,.873016,.376615,198045e-9,0,.904762,.359655,187375e-9,0,.936508,.343452,177371e-9,0,.968254,.32765,167525e-9,0,1,1,169351e-10,0,0,1,169356e-10,0,0,1,169427e-10,0,0,.999999,169736e-10,0,0,.999998,170575e-10,0,0,.999995,172372e-10,0,0,.99999,175739e-10,0,0,.999979,181568e-10,0,0,.999966,191206e-10,0,0,.999944,20677e-9,0,0,.999912,231644e-10,0,0,.999869,271268e-10,0,0,.999811,334272e-10,0,0,.99973,433979e-10,0,0,.999617,590083e-10,0,680315e-10,.999445,829497e-10,0,612796e-9,.999138,118019e-9,0,.00187408,.998095,156712e-9,0,.00395791,.993919,125054e-9,0,.00692144,.991333,126091e-9,0,.0107962,.989226,144912e-9,0,.0155986,.986954,175737e-9,0,.0213364,.983982,213883e-9,0,.0280114,.979128,234526e-9,0,.0356226,.973327,243725e-9,0,.0441668,.967416,2773e-7,0,.0536399,.959729,308799e-9,0,.0640376,.949758,322447e-9,0,.0753554,.939173,350021e-9,0,.0875893,.9296,370089e-9,0,.100736,.921181,391365e-9,0,.114793,.91164,413636e-9,0,.129759,.900435,427068e-9,0,.145632,.888183,441046e-9,0,.162412,.874772,454968e-9,0,.180101,.859566,461882e-9,0,.1987,.843579,471556e-9,0,.218213,.826453,474335e-9,0,.238641,.809164,477078e-9,0,.259989,.792179,47755e-8,0,.282262,.773866,472573e-9,0,.305464,.754944,469765e-9,0,.329599,.735133,462371e-9,0,.35467,.714858,453674e-9,0,.380678,.694829,443888e-9,0,.407622,.674453,432052e-9,0,.435493,.653685,420315e-9,0,.464275,.632666,406829e-9,0,.493938,.611676,392234e-9,0,.524422,.591193,379208e-9,0,.555624,.570145,36319e-8,0,.587302,.549566,349111e-9,0,.619048,.529278,334166e-9,0,.650794,.509026,318456e-9,0,.68254,.489186,30449e-8,0,.714286,.469662,289051e-9,0,.746032,.450691,275494e-9,0,.777778,.431841,261437e-9,0,.809524,.413752,247846e-9,0,.84127,.395951,235085e-9,0,.873016,.378633,222245e-9,0,.904762,.36194,210533e-9,0,.936508,.345599,198494e-9,0,.968254,.329999,188133e-9,0,1,1,269663e-10,0,0,1,26967e-9,0,0,1,269772e-10,0,0,.999999,270214e-10,0,0,.999998,271415e-10,0,0,.999994,27398e-9,0,0,.999988,278771e-10,0,0,.999977,287019e-10,0,0,.999961,300544e-10,0,0,.999937,322138e-10,0,0,.999904,356163e-10,0,0,.999854,409465e-10,0,0,.99979,492651e-10,0,0,.999699,621722e-10,0,8.8288e-7,.999572,819715e-10,0,223369e-9,.999381,111689e-9,0,.00105414,.999016,153862e-9,0,.0026493,.997437,187667e-9,0,.00508608,.993545,155672e-9,0,.00840554,.991135,161455e-9,0,.012629,.989157,188241e-9,0,.0177661,.986874,226229e-9,0,.0238198,.983714,268668e-9,0,.0307887,.978301,277109e-9,0,.0386688,.973227,303446e-9,0,.0474554,.967317,341851e-9,0,.0571428,.959477,370885e-9,0,.0677256,.950012,392753e-9,0,.0791988,.939484,42781e-8,0,.0915576,.928135,443866e-9,0,.104798,.919819,472959e-9,0,.118918,.910049,491551e-9,0,.133915,.899181,512616e-9,0,.149788,.886881,523563e-9,0,.166537,.87359,540183e-9,0,.184164,.858613,547386e-9,0,.202669,.842809,554809e-9,0,.222056,.825727,558316e-9,0,.242329,.808086,557824e-9,0,.263492,.790728,556346e-9,0,.285551,.772987,552672e-9,0,.30851,.7541,543738e-9,0,.332376,.734669,536107e-9,0,.357153,.714411,523342e-9,0,.382845,.694196,512238e-9,0,.409454,.674252,497465e-9,0,.436977,.65357,481096e-9,0,.465404,.632999,467054e-9,0,.494713,.611994,448771e-9,0,.524864,.591604,431889e-9,0,.555779,.571134,415238e-9,0,.587302,.550528,396369e-9,0,.619048,.530292,379477e-9,0,.650794,.510364,361488e-9,0,.68254,.490749,343787e-9,0,.714286,.471266,327822e-9,0,.746032,.452462,310626e-9,0,.777778,.433907,295352e-9,0,.809524,.415659,279179e-9,0,.84127,.398138,264685e-9,0,.873016,.380833,249905e-9,0,.904762,.364247,236282e-9,0,.936508,.348041,222905e-9,0,.968254,.332389,210522e-9,0,1,1,420604e-10,0,0,1,420614e-10,0,0,1,420757e-10,0,0,.999999,42138e-9,0,0,.999997,423067e-10,0,0,.999993,426668e-10,0,0,.999986,433372e-10,0,0,.999974,444857e-10,0,0,.999956,463554e-10,0,0,.99993,493105e-10,0,0,.999892,539077e-10,0,0,.999838,610005e-10,0,0,.999767,718822e-10,0,0,.999666,884581e-10,0,365471e-10,.999525,113398e-9,0,485623e-9,.999311,150043e-9,0,.00162096,.998865,200063e-9,0,.00355319,.996278,211014e-9,0,.00633818,.992956,189672e-9,0,.0100043,.991017,210262e-9,0,.0145648,.989055,244292e-9,0,.0200237,.986741,290481e-9,0,.0263798,.983288,334303e-9,0,.033629,.977784,340307e-9,0,.0417652,.973037,377864e-9,0,.0507821,.967181,4239e-7,0,.060673,.958971,443854e-9,0,.0714314,.950093,483039e-9,0,.0830518,.939552,517934e-9,0,.0955288,.927678,539449e-9,0,.108859,.918278,568604e-9,0,.123038,.908449,588505e-9,0,.138065,.897713,612473e-9,0,.153938,.885533,625575e-9,0,.170657,.872131,63854e-8,0,.188224,.857517,647034e-9,0,.20664,.841796,65209e-8,0,.225909,.824726,6544e-7,0,.246035,.807297,655744e-9,0,.267022,.789058,646716e-9,0,.288878,.77189,643898e-9,0,.311607,.753082,629973e-9,0,.335216,.7341,621564e-9,0,.359713,.714094,605171e-9,0,.385103,.693839,588752e-9,0,.41139,.673891,573294e-9,0,.438576,.653565,552682e-9,0,.466656,.633326,533446e-9,0,.495617,.612582,514635e-9,0,.525431,.59205,49303e-8,0,.556041,.571918,471842e-9,0,.587338,.551572,451713e-9,0,.619048,.531553,430049e-9,0,.650794,.51175,410445e-9,0,.68254,.49238,390098e-9,0,.714286,.473143,370033e-9,0,.746032,.45423,351205e-9,0,.777778,.435963,332049e-9,0,.809524,.41787,315021e-9,0,.84127,.400387,297315e-9,0,.873016,.383332,281385e-9,0,.904762,.366665,265397e-9,0,.936508,.350633,250601e-9,0,.968254,.334964,23589e-8,0,1,1,643736e-10,0,0,1,64375e-9,0,0,1,643947e-10,0,0,.999999,64481e-9,0,0,.999997,647143e-10,0,0,.999994,652119e-10,0,0,.999985,661359e-10,0,0,.999972,677116e-10,0,0,.999952,702599e-10,0,0,.999922,742517e-10,0,0,.99988,803906e-10,0,0,.99982,897315e-10,0,0,.999741,103838e-9,0,0,.999629,12496e-8,0,149024e-9,.999474,156161e-9,0,861027e-9,.999229,201034e-9,0,.00231198,.998662,259069e-9,0,.00458147,.995299,245439e-9,0,.00770895,.992732,24498e-8,0,.0117126,.990847,273211e-9,0,.0165989,.988911,316492e-9,0,.0223674,.98654,37161e-8,0,.0290135,.982636,410352e-9,0,.0365309,.977346,421756e-9,0,.0449117,.972909,475578e-9,0,.0541481,.966821,522482e-9,0,.0642326,.958686,545008e-9,0,.075158,.949754,589286e-9,0,.0869181,.939184,619995e-9,0,.0995074,.927505,654266e-9,0,.112922,.916606,682362e-9,0,.127157,.906707,704286e-9,0,.142212,.895937,725909e-9,0,.158085,.883913,743939e-9,0,.174776,.870642,755157e-9,0,.192287,.856241,764387e-9,0,.210619,.84069,771032e-9,0,.229775,.823728,765906e-9,0,.249761,.806481,767604e-9,0,.270582,.787924,754385e-9,0,.292243,.770588,749668e-9,0,.314753,.751991,731613e-9,0,.338118,.733407,717655e-9,0,.362347,.713688,700604e-9,0,.387447,.693595,678765e-9,0,.413424,.673426,657042e-9,0,.440284,.65359,635892e-9,0,.468027,.633576,611569e-9,0,.496645,.613144,586011e-9,0,.526122,.592711,563111e-9,0,.556417,.572722,537699e-9,0,.587451,.552762,512556e-9,0,.619048,.532985,489757e-9,0,.650794,.513219,464139e-9,0,.68254,.493992,442193e-9,0,.714286,.47509,418629e-9,0,.746032,.456287,397045e-9,0,.777778,.438152,375504e-9,0,.809524,.420294,35492e-8,0,.84127,.402749,335327e-9,0,.873016,.385879,316422e-9,0,.904762,.369352,298333e-9,0,.936508,.353301,281417e-9,0,.968254,.337781,265203e-9,0,1,1,968267e-10,0,0,1,968284e-10,0,0,1,968556e-10,0,0,.999999,969733e-10,0,0,.999997,972913e-10,0,0,.999993,979688e-10,0,0,.999984,992239e-10,0,0,.999969,101356e-9,0,0,.999946,104784e-9,0,0,.999913,110111e-9,0,0,.999868,118217e-9,0,0,.999801,130396e-9,0,0,.999712,148523e-9,0,124907e-10,.999589,175233e-9,0,355405e-9,.999416,213999e-9,0,.0013528,.999136,268529e-9,0,.00312557,.998367,333088e-9,0,.00573045,.994701,304757e-9,0,.00919397,.992497,318031e-9,0,.0135261,.990608,353863e-9,0,.0187278,.988715,409044e-9,0,.0247947,.986241,472967e-9,0,.0317196,.981696,495104e-9,0,.039494,.977097,532873e-9,0,.0481087,.972583,594447e-9,0,.0575549,.966142,636867e-9,0,.0678242,.95823,669899e-9,0,.0789089,.949677,719499e-9,0,.0908023,.939226,750584e-9,0,.103499,.927501,793183e-9,0,.116993,.915199,81995e-8,0,.131282,.90498,847654e-9,0,.146364,.894243,868929e-9,0,.162237,.882154,884278e-9,0,.178902,.869161,898108e-9,0,.196358,.854751,901254e-9,0,.21461,.839368,90679e-8,0,.23366,.822874,901541e-9,0,.253512,.805514,897297e-9,0,.274174,.78716,881856e-9,0,.29565,.769061,870032e-9,0,.31795,.751,851719e-9,0,.341081,.732614,830671e-9,0,.365053,.713171,806569e-9,0,.389874,.693472,78338e-8,0,.415553,.673528,756404e-9,0,.442098,.653397,726872e-9,0,.469512,.633781,700494e-9,0,.497794,.613877,67105e-8,0,.526935,.593506,640361e-9,0,.556908,.573667,613502e-9,0,.587657,.553932,583177e-9,0,.61906,.534345,554375e-9,0,.650794,.515042,527811e-9,0,.68254,.495674,499367e-9,0,.714286,.477132,47429e-8,0,.746032,.458609,447726e-9,0,.777778,.440354,424205e-9,0,.809524,.422765,399549e-9,0,.84127,.405472,378315e-9,0,.873016,.388482,355327e-9,0,.904762,.372191,336122e-9,0,.936508,.356099,315247e-9,0,.968254,.340737,29794e-8,0,1,1,143327e-9,0,0,1,14333e-8,0,0,1,143366e-9,0,0,.999999,143524e-9,0,0,.999996,143952e-9,0,0,.999991,144862e-9,0,0,.999981,146544e-9,0,0,.999966,149391e-9,0,0,.999941,153946e-9,0,0,.999905,160971e-9,0,0,.999852,171562e-9,0,0,.99978,18729e-8,0,0,.999681,210386e-9,0,826239e-10,.999546,243906e-9,0,664807e-9,.999352,291739e-9,0,.00196192,.999027,357419e-9,0,.00405941,.997886,422349e-9,0,.00699664,.99419,385008e-9,0,.0107896,.99214,409775e-9,0,.0154415,.990274,456418e-9,0,.0209488,.988455,527008e-9,0,.0273037,.985804,597685e-9,0,.0344969,.98103,613124e-9,0,.0425183,.976674,668321e-9,0,.0513575,.972021,736985e-9,0,.0610046,.965274,773789e-9,0,.0714508,.958046,830852e-9,0,.0826877,.949333,875766e-9,0,.0947085,.939135,917088e-9,0,.107507,.927119,952244e-9,0,.121078,.91469,990626e-9,0,.135419,.903006,.00101304,0,.150526,.892368,.00103834,0,.166399,.880231,.00105002,0,.183038,.867432,.00106331,0,.200443,.853208,.00106783,0,.218618,.837956,.00106458,0,.237566,.821772,.00105945,0,.257291,.804328,.00104685,0,.2778,.786465,.00103178,0,.2991,.768004,.00101077,0,.321199,.74972,985504e-9,0,.344106,.731682,962893e-9,0,.36783,.712813,932146e-9,0,.392383,.693139,89871e-8,0,.417774,.673566,869678e-9,0,.444013,.653483,835525e-9,0,.471107,.633891,799853e-9,0,.49906,.614433,766838e-9,0,.527869,.594586,732227e-9,0,.557517,.574769,696442e-9,0,.587966,.555149,663935e-9,0,.61913,.535898,629826e-9,0,.650794,.516753,596486e-9,0,.68254,.497816,567078e-9,0,.714286,.479034,534399e-9,0,.746032,.460975,507013e-9,0,.777778,.442935,477421e-9,0,.809524,.425263,451101e-9,0,.84127,.408248,424964e-9,0,.873016,.391339,39993e-8,0,.904762,.37513,377619e-9,0,.936508,.359172,354418e-9,0,.968254,.343876,334823e-9,0,1,1,209042e-9,0,0,1,209045e-9,0,0,1,209093e-9,0,0,.999999,209304e-9,0,0,.999996,209871e-9,0,0,.999991,211078e-9,0,0,.999979,213304e-9,0,0,.999963,217061e-9,0,0,.999933,223042e-9,0,0,.999894,232206e-9,0,0,.999837,245901e-9,0,0,.999756,266023e-9,0,102927e-11,.999648,295204e-9,0,233468e-9,.999499,336958e-9,0,.00108237,.999283,395563e-9,0,.00268832,.998896,473785e-9,0,.00511138,.997006,520008e-9,0,.00837705,.993819,497261e-9,0,.0124928,.991632,523722e-9,0,.0174561,.989875,587258e-9,0,.0232596,.988109,676329e-9,0,.0298932,.985155,747701e-9,0,.0373453,.980479,768803e-9,0,.0456045,.976271,841054e-9,0,.0546593,.971347,911469e-9,0,.0644994,.964528,953057e-9,0,.0751152,.957632,.00102221,0,.0864981,.948681,.00106122,0,.0986407,.938716,.00111857,0,.111537,.926629,.00114762,0,.125182,.914025,.00118995,0,.139571,.901026,.00121228,0,.154703,.890358,.00123946,0,.170576,.878283,.0012527,0,.18719,.865459,.00125536,0,.204547,.851407,.00126134,0,.222648,.836276,.00124759,0,.241498,.820436,.00124443,0,.261101,.803253,.00122071,0,.281465,.785562,.00120107,0,.302595,.76718,.00117762,0,.324501,.748551,.00114289,0,.347192,.730564,.00110872,0,.370679,.712253,.00107636,0,.394973,.692867,.00103646,0,.420085,.673695,996793e-9,0,.446027,.653912,95675e-8,0,.47281,.634129,916739e-9,0,.500441,.615004,874401e-9,0,.528921,.595587,833411e-9,0,.558244,.575965,794556e-9,0,.588384,.5566,75196e-8,0,.619281,.537428,716381e-9,0,.650795,.518623,676558e-9,0,.68254,.499964,64074e-8,0,.714286,.481356,605984e-9,0,.746032,.463279,570256e-9,0,.777778,.445673,540138e-9,0,.809524,.428032,507299e-9,0,.84127,.411112,479553e-9,0,.873016,.394444,450737e-9,0,.904762,.378247,424269e-9,0,.936508,.362415,399111e-9,0,.968254,.347103,375274e-9,0,1,1,300729e-9,0,0,1,300733e-9,0,0,1,300797e-9,0,0,.999998,301072e-9,0,0,.999996,301817e-9,0,0,.999989,303398e-9,0,0,.999977,306309e-9,0,0,.999958,311209e-9,0,0,.999927,318975e-9,0,0,.999884,330804e-9,0,0,.99982,34834e-8,0,0,.999733,373854e-9,0,326995e-10,.999613,410424e-9,0,477174e-9,.999447,462047e-9,0,.00161099,.999204,533322e-9,0,.00353153,.998725,624964e-9,0,.00627965,.995871,631786e-9,0,.0098693,.993194,632017e-9,0,.0143011,.991541,68923e-8,0,.019568,.989773,766892e-9,0,.0256593,.987647,863668e-9,0,.0325625,.984193,922089e-9,0,.0402647,.980016,970749e-9,0,.0487532,.975859,.00106027,0,.058016,.970514,.00112239,0,.0680419,.963625,.00117212,0,.0788208,.956959,.00125211,0,.0903439,.947956,.00129411,0,.102604,.93809,.00135879,0,.115594,.92659,.00139309,0,.129309,.913829,.00143253,0,.143745,.90005,.00145809,0,.158901,.888129,.0014748,0,.174774,.87607,.00148756,0,.191365,.863461,.00148714,0,.208674,.849594,.00148892,0,.226705,.834531,.00146496,0,.245461,.81903,.0014579,0,.264947,.802122,.00143039,0,.28517,.78445,.00139717,0,.306137,.766434,.00136312,0,.327857,.747816,.00132597,0,.350341,.729519,.00128323,0,.373598,.711454,.00123803,0,.397642,.692699,.00119097,0,.422485,.673723,.00114565,0,.448139,.654386,.00109552,0,.474619,.634673,.00104553,0,.501933,.615554,99985e-8,0,.530089,.596462,948207e-9,0,.559087,.577385,902299e-9,0,.588913,.558257,856448e-9,0,.619525,.5392,810395e-9,0,.650826,.520543,768558e-9,0,.68254,.502206,7239e-7,0,.714286,.48402,685794e-9,0,.746032,.465779,64471e-8,0,.777778,.448455,609583e-9,0,.809524,.431091,57227e-8,0,.84127,.414147,54042e-8,0,.873016,.39765,506545e-9,0,.904762,.381576,477635e-9,0,.936508,.365881,448446e-9,0,.968254,.350582,421424e-9,0,1,1,427144e-9,0,0,1,427151e-9,0,0,1,427232e-9,0,0,.999998,42759e-8,0,0,.999995,428555e-9,0,0,.999988,430603e-9,0,0,.999976,434368e-9,0,0,.999952,440688e-9,0,0,.999919,450667e-9,0,0,.999871,46578e-8,0,0,.999801,488024e-9,0,0,.999704,520092e-9,0,129791e-9,.999572,565553e-9,0,821056e-9,.999389,628906e-9,0,.00225241,.999114,714911e-9,0,.00449109,.998488,819218e-9,0,.00756249,.995234,80415e-8,0,.0114716,.993021,830181e-9,0,.0162131,.991407,902645e-9,0,.021776,.989625,996934e-9,0,.0281471,.987064,.00109707,0,.0353118,.983265,.00114353,0,.0432562,.979535,.0012272,0,.0519665,.975224,.00132642,0,.0614298,.969574,.00138092,0,.0716348,.963021,.00145896,0,.0825709,.956046,.00152834,0,.094229,.947136,.00158217,0,.106602,.937313,.0016347,0,.119682,.926073,.00168383,0,.133465,.913121,.00171627,0,.147947,.899165,.00174229,0,.163125,.885891,.00176137,0,.178998,.873783,.00176406,0,.195566,.861331,.00176156,0,.21283,.847569,.00175346,0,.230793,.832785,.00172753,0,.249459,.817442,.00170204,0,.268832,.800613,.00166576,0,.28892,.783597,.00162909,0,.30973,.76571,.0015826,0,.331271,.747021,.00153106,0,.353554,.728593,.00148036,0,.37659,.710661,.00142808,0,.400391,.692426,.00136906,0,.424973,.673623,.00131066,0,.450347,.65494,.00125569,0,.476531,.635448,.00119517,0,.503535,.616221,.00113828,0,.531372,.597531,.0010816,0,.560047,.578795,.00102673,0,.589554,.559892,970985e-9,0,.619869,.541307,919773e-9,0,.650923,.522608,868479e-9,0,.68254,.504484,82137e-8,0,.714286,.486603,772916e-9,0,.746032,.468802,730353e-9,0,.777778,.451172,684955e-9,0,.809524,.434348,647565e-9,0,.84127,.417445,605863e-9,0,.873016,.401077,571885e-9,0,.904762,.385039,536034e-9,0,.936508,.369483,504227e-9,0,.968254,.354272,473165e-9,0,1,1,599525e-9,0,0,1,599533e-9,0,0,1,599639e-9,0,0,.999998,600097e-9,0,0,.999994,601336e-9,0,0,.999987,603958e-9,0,0,.999972,608775e-9,0,0,.999949,616842e-9,0,0,.999912,629534e-9,0,0,.999857,648658e-9,0,0,.999781,676615e-9,0,538873e-11,.999674,716574e-9,0,308602e-9,.999528,772641e-9,0,.00127003,.999326,849806e-9,0,.00300783,.999009,952682e-9,0,.00556637,.998112,.00106394,0,.00895889,.994496,.00102228,0,.0131827,.992806,.00108586,0,.0182277,.991211,.0011759,0,.0240795,.989415,.00128955,0,.030723,.986499,.00139038,0,.0381418,.982679,.00144539,0,.046321,.978839,.00153954,0,.0552459,.974295,.00164417,0,.0649034,.968784,.00171517,0,.0752814,.962324,.00180282,0,.0863693,.954956,.00186387,0,.0981578,.94624,.00193817,0,.110639,.936517,.00198156,0,.123806,.925186,.00203042,0,.137655,.91252,.0020664,0,.15218,.898441,.00207822,0,.16738,.884394,.0020992,0,.183253,.871273,.00208748,0,.199799,.859057,.00208686,0,.21702,.845243,.00205519,0,.234918,.830723,.00202868,0,.253496,.815801,.00199501,0,.272761,.79914,.00194193,0,.292719,.782372,.00188824,0,.313377,.76482,.00183695,0,.334745,.746586,.00177418,0,.356833,.7281,.00170628,0,.379654,.709842,.00164063,0,.403221,.692019,.00157355,0,.427548,.67364,.00150262,0,.452651,.655277,.00143473,0,.478545,.636438,.00136371,0,.505246,.617364,.00129911,0,.532768,.598603,.00123014,0,.561122,.580195,.00116587,0,.590309,.561786,.00110398,0,.620318,.543377,.00104148,0,.651102,.525093,983984e-9,0,.682545,.506791,92667e-8,0,.714286,.489291,874326e-9,0,.746032,.471811,821734e-9,0,.777778,.454435,774698e-9,0,.809524,.437493,727302e-9,0,.84127,.420977,684039e-9,0,.873016,.404729,64373e-8,0,.904762,.388756,60285e-8,0,.936508,.373344,56765e-8,0,.968254,.358191,531929e-9,0,1,1,832169e-9,0,0,1,832178e-9,0,0,1,83231e-8,0,0,.999998,832893e-9,0,0,.999995,834465e-9,0,0,.999985,837791e-9,0,0,.999969,843893e-9,0,0,.999944,854086e-9,0,0,.999903,870071e-9,0,0,.999843,894042e-9,0,0,.999759,928865e-9,0,531805e-10,.999643,978242e-9,0,579365e-9,.99948,.00104684,0,.00182774,.999255,.00114012,0,.00387804,.998885,.00126188,0,.00675709,.997405,.00135888,0,.010468,.99424,.00133626,0,.0150018,.992458,.00140905,0,.0203443,.990929,.00152305,0,.0264786,.989116,.00165882,0,.0333875,.985624,.00174128,0,.0410536,.982003,.00182108,0,.0494609,.978336,.00194498,0,.0585941,.973184,.00202708,0,.0684396,.9678,.00212166,0,.0789851,.961348,.00221366,0,.0902199,.953841,.00228219,0,.102134,.94534,.00235662,0,.114721,.935552,.00240572,0,.127972,.924064,.00244405,0,.141884,.911827,.00247557,0,.156451,.897731,.00248374,0,.171672,.883409,.00249863,0,.187545,.868625,.00246688,0,.20407,.856529,.00246523,0,.221249,.842999,.00242368,0,.239083,.828505,.00237354,0,.257578,.813825,.00232588,0,.276738,.797813,.00226731,0,.296569,.781097,.00219704,0,.31708,.764038,.00212394,0,.338281,.746067,.00204786,0,.360181,.727687,.00196728,0,.382794,.709571,.00188779,0,.406133,.691503,.00180532,0,.430213,.673673,.00171849,0,.45505,.655732,.00164147,0,.480662,.637399,.00155858,0,.507065,.618616,.00147641,0,.534278,.60005,.00140125,0,.562313,.581713,.00132441,0,.59118,.563546,.00125014,0,.620875,.545605,.00118249,0,.651373,.527559,.0011116,0,.682593,.509764,.00104979,0,.714286,.49193,985977e-9,0,.746032,.475011,928592e-9,0,.777778,.457878,873466e-9,0,.809524,.440979,819585e-9,0,.84127,.424613,772365e-9,0,.873016,.408549,722195e-9,0,.904762,.392771,680014e-9,0,.936508,.377317,636797e-9,0,.968254,.362352,598318e-9,0,1,1,.00114313,0,0,1,.00114314,0,0,.999999,.00114331,0,0,.999998,.00114404,0,0,.999994,.00114601,0,0,.999984,.00115019,0,0,.999967,.00115784,0,0,.999937,.0011706,0,0,.999894,.00119054,0,0,.999828,.00122031,0,0,.999735,.00126331,0,169263e-9,.999606,.00132382,0,949167e-9,.999426,.0014071,0,.00249668,.999173,.00151895,0,.00486392,.99873,.00166102,0,.00806323,.996243,.0017023,0,.0120895,.993779,.00172782,0,.0169288,.9919,.0018108,0,.0225633,.990524,.00196028,0,.028974,.98868,.00212014,0,.036142,.984663,.00217598,0,.044049,.981457,.00230563,0,.0526781,.977608,.00243966,0,.0620137,.972215,.00251336,0,.0720418,.966798,.0026285,0,.0827499,.960241,.00271409,0,.0941271,.952489,.00278381,0,.106164,.944127,.00285399,0,.118852,.934282,.00290994,0,.132185,.923271,.00294558,0,.146157,.910803,.00296269,0,.160766,.896705,.00296803,0,.176007,.88238,.00296637,0,.19188,.867116,.00293163,0,.208385,.853636,.00289418,0,.225523,.840469,.00284663,0,.243296,.82639,.00278594,0,.261709,.811759,.00271618,0,.280767,.796113,.00263187,0,.300476,.779518,.00254589,0,.320845,.763142,.00246003,0,.341883,.745464,.00236529,0,.363601,.727491,.00226536,0,.386011,.709414,.00216375,0,.409128,.691396,.00207127,0,.432967,.67368,.00197106,0,.457545,.656049,.00187022,0,.482881,.638188,.00177605,0,.508992,.620177,.00168482,0,.535899,.601506,.00158909,0,.563619,.58362,.00150583,0,.592165,.565496,.00141791,0,.621544,.54789,.00133693,0,.651743,.530323,.00126038,0,.682709,.512795,.00118556,0,.714286,.495199,.00111527,0,.746032,.478101,.0010489,0,.777778,.461511,984264e-9,0,.809524,.444879,92591e-8,0,.84127,.428424,866582e-9,0,.873016,.412495,814463e-9,0,.904762,.396975,764498e-9,0,.936508,.381614,715967e-9,0,.968254,.366732,672483e-9,0,1,1,.00155501,0,0,1,.00155503,0,0,1,.00155524,0,0,.999998,.00155615,0,0,.999994,.0015586,0,0,.999983,.00156379,0,0,.999963,.0015733,0,0,.999932,.00158911,0,0,.999882,.00161376,0,0,.99981,.00165041,0,100875e-10,.999708,.00170304,0,367658e-9,.999565,.00177658,0,.0014234,.999368,.00187688,0,.00327939,.999081,.00200989,0,.00596629,.99852,.00217177,0,.0094852,.99549,.0021745,0,.013824,.993252,.00222357,0,.0189642,.991727,.00235022,0,.0248856,.989951,.00250561,0,.0315669,.988029,.00268829,0,.0389882,.984029,.0027496,0,.0471302,.980683,.00289793,0,.0559754,.976554,.00303315,0,.0655081,.97139,.00313257,0,.0757138,.965544,.00323656,0,.08658,.95912,.00333432,0,.0980954,.951183,.0034039,0,.110251,.942974,.00347515,0,.123038,.932642,.00350381,0,.13645,.922158,.00354519,0,.150482,.909404,.00353851,0,.165129,.896071,.0035435,0,.18039,.881206,.00349936,0,.196263,.866077,.00347256,0,.212748,.85093,.003415,0,.229847,.837703,.00333367,0,.247561,.823878,.003249,0,.265895,.809449,.00316347,0,.284854,.794379,.00306351,0,.304445,.778138,.0029499,0,.324675,.761997,.00284099,0,.345555,.744938,.00272104,0,.367095,.727212,.00260715,0,.389309,.709549,.00248855,0,.41221,.691704,.00236783,0,.435814,.673689,.00225178,0,.460138,.656453,.00213765,0,.485203,.639128,.00202178,0,.511028,.621512,.00191443,0,.537634,.603598,.00180977,0,.565041,.58559,.00170456,0,.593268,.567852,.00160927,0,.622327,.5503,.00151395,0,.652217,.533033,.00142499,0,.682907,.515942,.00133955,0,.714296,.498814,.0012602,0,.746032,.481595,.00118188,0,.777778,.465117,.00111171,0,.809524,.448865,.00104091,0,.84127,.432711,976618e-9,0,.873016,.416822,91859e-8,0,.904762,.401272,857704e-9,0,.936508,.386226,807172e-9,0,.968254,.371321,75464e-8,0,1,1,.00209596,0,0,1,.00209598,0,0,1,.00209624,0,0,.999997,.00209736,0,0,.999991,.00210039,0,0,.999979,.00210678,0,0,.999959,.00211847,0,0,.999925,.0021379,0,0,.99987,.00216809,0,0,.999791,.00221281,0,681487e-10,.999677,.00227669,0,658161e-9,.999521,.00236533,0,.00200635,.999301,.00248514,0,.0041779,.998977,.00264185,0,.00718648,.998191,.00281695,0,.0110239,.994801,.00278518,0,.015672,.993091,.00288774,0,.0211091,.991571,.00303931,0,.0273123,.9897,.00321643,0,.034259,.987023,.00337332,0,.0419282,.983289,.00346146,0,.0502998,.979892,.00363704,0,.0593562,.975111,.00373601,0,.069081,.970351,.0038842,0,.0794598,.964131,.00397053,0,.0904798,.957747,.00408078,0,.10213,.949536,.00413533,0,.1144,.941372,.00420305,0,.127284,.931049,.00422815,0,.140772,.920647,.00425048,0,.154862,.908033,.0042281,0,.169548,.895028,.00422026,0,.184828,.879968,.00415042,0,.200701,.864875,.00408821,0,.217167,.84918,.00400909,0,.234227,.834934,.00391178,0,.251884,.821397,.00380066,0,.270141,.807135,.00367974,0,.289004,.792363,.00355172,0,.308479,.776661,.003411,0,.328575,.760705,.00328123,0,.349301,.744408,.00314003,0,.370668,.726994,.0029906,0,.392689,.709598,.00285034,0,.415379,.692112,.00271179,0,.438754,.674435,.00257185,0,.46283,.65676,.00243425,0,.48763,.639982,.00230351,0,.513173,.622983,.0021777,0,.539482,.605471,.00204991,0,.566579,.58796,.00193759,0,.594488,.570463,.00181976,0,.623226,.553058,.00171497,0,.6528,.535894,.00161109,0,.683198,.519089,.00151394,0,.714354,.502454,.00142122,0,.746032,.485681,.00133488,0,.777778,.468935,.00124975,0,.809524,.452951,.00117309,0,.84127,.437139,.00110155,0,.873016,.421446,.00103124,0,.904762,.405951,966387e-9,0,.936508,.391003,908119e-9,0,.968254,.376198,848057e-9,0,1,1,.00280076,0,0,1,.00280078,0,0,.999999,.00280109,0,0,.999997,.00280246,0,0,.999992,.00280616,0,0,.999979,.00281396,0,0,.999956,.00282822,0,0,.999916,.00285186,0,0,.999857,.0028885,0,0,.999768,.00294259,0,196026e-9,.999645,.00301946,0,.00104842,.99947,.00312541,0,.00270199,.999229,.00326733,0,.00519449,.998852,.00344992,0,.00852602,.997558,.00361052,0,.0126804,.994417,.0035898,0,.017635,.992824,.00372393,0,.023365,.991344,.00390695,0,.0298456,.989337,.00410392,0,.0370529,.985811,.00420987,0,.0449651,.982772,.00437488,0,.0535615,.979001,.00455069,0,.0628243,.974102,.00464462,0,.0727368,.969197,.00480577,0,.0832844,.962759,.00487818,0,.0944545,.956207,.00498176,0,.106236,.947909,.00503392,0,.118619,.939596,.00507474,0,.131595,.929642,.00509798,0,.145159,.918807,.00508476,0,.159305,.906921,.00505634,0,.174028,.893312,.00498845,0,.189327,.878933,.0049133,0,.2052,.863986,.0048259,0,.221647,.847936,.00470848,0,.23867,.832253,.00456889,0,.25627,.818619,.00442726,0,.274453,.804788,.00427677,0,.293222,.790241,.00411906,0,.312585,.775162,.00394833,0,.33255,.759463,.00377366,0,.353126,.743598,.00361026,0,.374324,.72697,.00343627,0,.396158,.709646,.00326422,0,.418641,.69277,.00309717,0,.44179,.675371,.0029356,0,.465624,.657863,.00277712,0,.490163,.640772,.00261738,0,.515429,.624441,.0024737,0,.541445,.607497,.00233125,0,.568236,.590438,.00218994,0,.595828,.573224,.0020664,0,.624242,.556168,.00193526,0,.653496,.539232,.00182463,0,.683588,.522352,.00170735,0,.714482,.506172,.00160555,0,.746032,.489842,.00150451,0,.777778,.473463,.00140938,0,.809524,.457266,.00132568,0,.84127,.441609,.0012376,0,.873016,.426348,.00116265,0,.904762,.411002,.00108935,0,.936508,.396045,.00101946,0,.968254,.381448,955665e-9,0,1,1,.0037121,0,0,1,.00371213,0,0,1,.00371251,0,0,.999997,.00371417,0,0,.99999,.00371863,0,0,.999977,.00372807,0,0,.99995,.00374529,0,0,.999908,.0037738,0,0,.999843,.00381789,0,123596e-10,.999745,.00388273,0,407442e-9,.999608,.00397443,0,.0015447,.999415,.00409998,0,.00351385,.999143,.00426662,0,.0063316,.9987,.00447625,0,.00998679,.996363,.00455323,0,.0144569,.994021,.00461052,0,.0197151,.992372,.00476359,0,.0257344,.991007,.00499101,0,.0324882,.988767,.0051972,0,.0399517,.984872,.00528407,0,.0481022,.982004,.00548926,0,.0569191,.977714,.00564385,0,.0663839,.973076,.0057693,0,.0764801,.967565,.0058924,0,.0871928,.961384,.00599629,0,.0985095,.954435,.00605998,0,.110419,.946303,.0061133,0,.122912,.937662,.00612028,0,.13598,.927867,.00612209,0,.149617,.916475,.00604813,0,.163817,.90541,.00603088,0,.178577,.891591,.00592218,0,.193894,.877573,.00578854,0,.209767,.862511,.00566648,0,.226196,.846861,.00551481,0,.243182,.83068,.00533754,0,.260728,.815725,.00515487,0,.278837,.802321,.0049655,0,.297515,.787826,.00475421,0,.316768,.773454,.00456002,0,.336605,.758224,.00434727,0,.357034,.74265,.00414444,0,.378067,.726729,.00393738,0,.399717,.710155,.00373575,0,.421998,.693312,.00353736,0,.444928,.67653,.00334368,0,.468523,.659444,.00315981,0,.492806,.642051,.00297809,0,.517798,.625758,.00280592,0,.543525,.609615,.00264254,0,.570012,.592919,.00248459,0,.597288,.576298,.00233327,0,.625379,.559489,.00219519,0,.654307,.542891,.00205441,0,.684084,.526255,.00193385,0,.714693,.509853,.00180745,0,.746044,.494131,.00169817,0,.777778,.478114,.0015913,0,.809524,.462274,.00148981,0,.84127,.446412,.00139537,0,.873016,.431274,.00130984,0,.904762,.41635,.00122403,0,.936508,.401476,.00114809,0,.968254,.386993,.00107563,0,1,1,.00488216,0,0,1,.0048822,0,0,1,.00488265,0,0,.999997,.00488463,0,0,.999988,.00488999,0,0,.999974,.00490129,0,0,.999946,.00492191,0,0,.999897,.00495598,0,0,.999825,.00500855,0,744791e-10,.999718,.00508559,0,712744e-9,.999565,.005194,0,.00215249,.999352,.00534147,0,.00444576,.999046,.00553523,0,.00759218,.998492,.00577016,0,.0115714,.995564,.00578487,0,.0163557,.993339,.00586414,0,.021915,.991834,.00606002,0,.0282201,.990496,.00633312,0,.0352433,.987826,.00651941,0,.042959,.98383,.00660842,0,.0513439,.98109,.00685523,0,.0603772,.976131,.00695778,0,.0700402,.971922,.00714236,0,.0803163,.965901,.00721437,0,.0911908,.959606,.00732017,0,.102651,.952504,.00735788,0,.114686,.944365,.00738493,0,.127286,.935652,.00737969,0,.140443,.925813,.00733612,0,.154151,.914397,.00723094,0,.168405,.903257,.00714002,0,.183201,.890015,.00700149,0,.198536,.876014,.00682813,0,.214409,.861436,.00665567,0,.23082,.845752,.00644526,0,.24777,.829169,.00621635,0,.265263,.813435,.00597789,0,.283301,.799701,.00575694,0,.301889,.785726,.00549866,0,.321035,.77152,.0052503,0,.340746,.75683,.00499619,0,.361032,.741951,.0047543,0,.381904,.726367,.0045084,0,.403374,.710537,.00426784,0,.425457,.693965,.00403487,0,.448169,.677724,.0038075,0,.47153,.66117,.00359431,0,.495561,.644274,.00338354,0,.520284,.627449,.00318163,0,.545725,.611645,.00299672,0,.571911,.595614,.00281016,0,.598873,.579426,.00264252,0,.62664,.563016,.00247509,0,.655239,.546728,.00232647,0,.684692,.530539,.00217803,0,.714999,.514164,.00204216,0,.746106,.498344,.00191403,0,.777778,.482957,.00179203,0,.809524,.467336,.00167695,0,.84127,.451994,.00157567,0,.873016,.436514,.00147113,0,.904762,.42178,.00138034,0,.936508,.407271,.00129219,0,.968254,.392822,.0012098,0,1,1,.00637427,0,0,1,.00637431,0,0,.999999,.00637485,0,0,.999996,.00637721,0,0,.999987,.00638357,0,0,.999971,.006397,0,0,.999939,.00642142,0,0,.999888,.00646177,0,0,.999807,.00652387,0,207916e-9,.999689,.00661454,0,.00112051,.99952,.00674155,0,.00287719,.999283,.00691313,0,.00550145,.998936,.00713598,0,.00897928,.998165,.00738501,0,.0132829,.994847,.00734388,0,.01838,.993182,.00749991,0,.0242381,.991665,.0077246,0,.030826,.989708,.00797579,0,.0381152,.986663,.00813011,0,.0460794,.983288,.00830365,0,.0546951,.980104,.00853496,0,.0639411,.974855,.00861045,0,.0737988,.97045,.00879133,0,.0842516,.964509,.00886377,0,.0952848,.957594,.00890346,0,.106886,.950546,.00893289,0,.119044,.942225,.00890074,0,.131749,.933365,.00886826,0,.144994,.923202,.0087316,0,.158772,.912605,.00863082,0,.173078,.901099,.00847403,0,.187908,.888177,.00825838,0,.203261,.873955,.00801834,0,.219134,.860091,.00779026,0,.235527,.84434,.00752478,0,.252443,.828517,.00724074,0,.269883,.81239,.00693769,0,.287851,.79721,.00664817,0,.306352,.783489,.00634763,0,.325393,.769514,.00604221,0,.344981,.755419,.00573568,0,.365126,.741083,.00544359,0,.385839,.726059,.00515515,0,.407132,.710809,.00487139,0,.42902,.695052,.00459846,0,.45152,.678886,.00433412,0,.474651,.663042,.00407981,0,.498433,.646634,.00384264,0,.52289,.630117,.00360897,0,.548048,.613804,.00338863,0,.573936,.598338,.00318486,0,.600584,.582687,.00298377,0,.628027,.566809,.00280082,0,.656295,.550817,.00262255,0,.685417,.534937,.00245835,0,.715406,.519151,.00230574,0,.74624,.503118,.0021549,0,.777778,.487723,.00202008,0,.809524,.472725,.00189355,0,.84127,.457599,.00177108,0,.873016,.442558,.00165843,0,.904762,.427624,.00155494,0,.936508,.413171,.00145273,0,.968254,.399122,.00136454,0,1,1,.00826496,0,0,1,.00826499,0,0,1,.00826564,0,0,.999996,.00826842,0,0,.999987,.00827589,0,0,.999967,.00829167,0,0,.999933,.00832037,0,0,.999876,.00836768,0,109338e-10,.999786,.00844031,0,427145e-9,.999655,.00854603,0,.0016384,.999468,.00869337,0,.00372392,.999203,.008891,0,.00668513,.998803,.00914387,0,.0104968,.99748,.00935838,0,.015125,.994446,.00933309,0,.0205338,.99292,.00953084,0,.0266884,.991414,.0097893,0,.0335565,.989049,.0100228,0,.0411086,.98582,.0101664,0,.0493181,.982441,.0103582,0,.0581613,.978595,.0105292,0,.0676169,.973495,.0106274,0,.0776661,.968405,.0107261,0,.0882926,.962717,.0108234,0,.0994817,.955478,.0108102,0,.111221,.948275,.0107914,0,.123499,.940006,.0107161,0,.136308,.930831,.0106309,0,.149639,.920648,.0104083,0,.163485,.910205,.0102312,0,.177843,.898445,.0100051,0,.192707,.885986,.00971928,0,.208077,.872204,.00940747,0,.22395,.858436,.0091085,0,.240326,.843454,.00876595,0,.257208,.827437,.00839794,0,.274596,.811488,.00803692,0,.292496,.796039,.00767352,0,.310911,.781083,.0073097,0,.329849,.767642,.00694032,0,.349316,.753901,.00657476,0,.369323,.740131,.00622699,0,.38988,.725845,.0058838,0,.410999,.710991,.00555586,0,.432696,.696002,.00523089,0,.454987,.680461,.00492494,0,.47789,.664875,.00463464,0,.501426,.649273,.00435422,0,.52562,.63302,.0040875,0,.550498,.61705,.00384075,0,.576089,.601154,.00359557,0,.602427,.586008,.00337636,0,.629544,.570699,.00316019,0,.657479,.555166,.00296033,0,.686264,.539645,.00277552,0,.715924,.524159,.00259499,0,.746459,.508682,.00243257,0,.777789,.493163,.00227851,0,.809524,.478004,.00213083,0,.84127,.46347,.00199502,0,.873016,.448778,.00186967,0,.904762,.434105,.00174732,0,.936508,.419576,.00163861,0,.968254,.405541,.00153341,0,1,1,.0106462,0,0,1,.0106462,0,0,.999999,.010647,0,0,.999995,.0106502,0,0,.999985,.0106589,0,0,.999964,.0106773,0,0,.999925,.0107106,0,0,.999861,.0107655,0,712986e-10,.999763,.0108497,0,743959e-9,.999616,.0109716,0,.00227361,.999408,.0111408,0,.0046983,.999112,.0113659,0,.00800158,.998637,.0116475,0,.0121493,.996223,.0117231,0,.0171023,.994006,.0118064,0,.0228218,.992444,.0120254,0,.0292711,.991028,.0123314,0,.036417,.98803,.0124954,0,.0442295,.984816,.0126538,0,.0526815,.981399,.0128537,0,.0617492,.977085,.0129694,0,.0714114,.972154,.013091,0,.0816495,.966617,.0131166,0,.0924472,.960628,.0131583,0,.10379,.953295,.0131094,0,.115665,.94575,.0129966,0,.128062,.937654,.0128796,0,.140972,.927716,.0126477,0,.154387,.917932,.0123889,0,.168301,.907719,.012131,0,.182709,.89584,.0118013,0,.197608,.883526,.0114145,0,.212994,.870301,.0110075,0,.228867,.856272,.0106019,0,.245227,.842251,.0101938,0,.262074,.826466,.00973254,0,.279412,.810859,.0092846,0,.297244,.795051,.00883304,0,.315575,.780053,.00840272,0,.334412,.76575,.00796438,0,.35376,.752298,.00752526,0,.373631,.739153,.00711486,0,.394034,.725514,.00670361,0,.414983,.711473,.00632656,0,.436491,.696936,.00595206,0,.458575,.682126,.00559191,0,.481253,.667027,.00525362,0,.504547,.651875,.00493805,0,.528481,.636463,.00462848,0,.553081,.620641,.00433936,0,.578377,.604931,.00407,0,.604404,.589549,.00380864,0,.631197,.574712,.00357049,0,.658795,.559775,.00334466,0,.687238,.544514,.00312505,0,.716559,.529555,.00293199,0,.746776,.514402,.00274204,0,.777849,.499302,.00256647,0,.809524,.484114,.00239901,0,.84127,.469308,.00225148,0,.873016,.455133,.00210178,0,.904762,.440939,.0019727,0,.936508,.426627,.00184382,0,.968254,.412509,.00172548,0,1,1,.013628,0,0,1,.0136281,0,0,.999999,.0136289,0,0,.999995,.0136327,0,0,.999983,.0136427,0,0,.99996,.0136638,0,0,.999917,.0137022,0,0,.999846,.0137652,0,204597e-9,.999736,.0138615,0,.00116837,.999573,.0140007,0,.00303325,.99934,.0141927,0,.00580613,.999004,.0144457,0,.00945626,.998407,.0147489,0,.0139421,.995464,.014731,0,.0192202,.993328,.0148283,0,.0252495,.991799,.0150797,0,.0319921,.990397,.0154316,0,.0394138,.986835,.0155005,0,.0474843,.983938,.0157308,0,.0561763,.980154,.0158753,0,.0654661,.975659,.0159581,0,.0753326,.970171,.0159832,0,.0857571,.964803,.0160084,0,.0967236,.958366,.0159484,0,.108218,.950613,.0158001,0,.120227,.942874,.0155845,0,.132741,.935005,.0154292,0,.145751,.924991,.0150742,0,.159249,.914814,.0146757,0,.17323,.904743,.0143097,0,.187687,.893216,.0138695,0,.202619,.880769,.0133706,0,.218021,.868136,.0128606,0,.233894,.85469,.0123403,0,.250238,.840593,.0118091,0,.267052,.825808,.011253,0,.284341,.81009,.0107099,0,.302106,.79504,.0101636,0,.320354,.779757,.00964041,0,.33909,.764697,.00911896,0,.358322,.750913,.00859533,0,.378059,.738175,.00811592,0,.398311,.725242,.00764504,0,.41909,.711864,.00718885,0,.440412,.698009,.00675843,0,.462292,.683841,.00634984,0,.484748,.669391,.00595502,0,.507802,.654731,.00558671,0,.531477,.639805,.00523578,0,.555802,.624789,.00490834,0,.580805,.609325,.00459448,0,.606522,.593975,.00430342,0,.63299,.578983,.00403019,0,.66025,.564442,.0037707,0,.688346,.549835,.0035316,0,.717319,.535039,.00330255,0,.7472,.520403,.00308932,0,.777982,.505687,.00289335,0,.809524,.490939,.00270818,0,.84127,.476233,.0025343,0,.873016,.461624,.00237097,0,.904762,.447833,.00222065,0,.936508,.433992,.00207561,0,.968254,.420147,.00194955,0,1,1,.0173415,0,0,1,.0173416,0,0,.999999,.0173426,0,0,.999995,.0173468,0,0,.999983,.0173582,0,0,.999954,.0173822,0,0,.999908,.0174258,0,669501e-11,.999828,.0174973,0,427399e-9,.999705,.0176063,0,.00171019,.999524,.0177631,0,.0039248,.999263,.0179781,0,.00705382,.998878,.018258,0,.0110552,.998012,.0185551,0,.0158812,.994614,.0184264,0,.0214852,.993132,.0186385,0,.0278239,.991563,.0189067,0,.0348585,.989298,.0191577,0,.0425544,.986036,.0192522,0,.050881,.982558,.0194063,0,.059811,.978531,.019486,0,.0693209,.974198,.0195847,0,.0793895,.968148,.0194749,0,.0899984,.962565,.0194277,0,.101132,.956041,.0192991,0,.112775,.947749,.0189893,0,.124917,.94018,.018704,0,.137547,.93165,.0183458,0,.150655,.921798,.0178775,0,.164236,.911573,.0173618,0,.178281,.901569,.0168482,0,.192788,.890341,.016265,0,.207752,.877835,.0156199,0,.223171,.865472,.0149516,0,.239044,.852905,.0143274,0,.255371,.838906,.0136643,0,.272153,.824888,.0129903,0,.289393,.809977,.0123218,0,.307093,.794697,.0116572,0,.325259,.780028,.0110307,0,.343896,.765124,.0104236,0,.363012,.750411,.0098219,0,.382617,.737264,.00924397,0,.402719,.724799,.00868719,0,.423332,.712253,.00816476,0,.444469,.699267,.00767262,0,.466146,.685618,.00719746,0,.488383,.671736,.00673916,0,.511199,.657777,.00631937,0,.534618,.643497,.00592411,0,.558668,.62889,.00553928,0,.58338,.614299,.0051934,0,.608787,.599197,.00485985,0,.634929,.584175,.00454357,0,.661849,.569541,.00425787,0,.689594,.555193,.00397905,0,.718211,.540947,.00372364,0,.747742,.526593,.00348599,0,.778205,.512335,.00326103,0,.80953,.498017,.00305137,0,.84127,.483609,.00285485,0,.873016,.469368,.00267472,0,.904762,.455037,.00249945,0,.936508,.441493,.00234792,0,.968254,.428147,.00219936,0,1,1,.0219422,0,0,1,.0219423,0,0,.999998,.0219434,0,0,.999993,.0219481,0,0,.999981,.021961,0,0,.999949,.0219879,0,0,.999896,.0220367,0,593194e-10,.999808,.0221167,0,75364e-8,.99967,.0222383,0,.00237884,.999466,.0224125,0,.00495612,.999174,.0226495,0,.00844887,.998725,.0229525,0,.0128058,.996979,.0231123,0,.0179742,.994317,.0230742,0,.0239047,.992781,.0232895,0,.0305526,.991191,.0235734,0,.0378786,.987787,.0236152,0,.0458475,.985092,.0237994,0,.0544287,.981121,.0238553,0,.0635952,.976924,.0238706,0,.0733233,.97218,.0238704,0,.0835922,.965956,.0236598,0,.0943839,.959998,.0234735,0,.105682,.953245,.0232277,0,.117474,.944445,.0226973,0,.129747,.937087,.0223527,0,.142491,.928341,.0218144,0,.155697,.9184,.0211516,0,.169358,.907959,.0204553,0,.183469,.89808,.0197673,0,.198024,.887047,.0189915,0,.21302,.875221,.0182082,0,.228455,.86269,.0173584,0,.244329,.850735,.0165718,0,.260639,.837545,.0157524,0,.277389,.823639,.0149482,0,.29458,.809699,.0141431,0,.312216,.794797,.0133527,0,.3303,.780578,.0126193,0,.34884,.766019,.0118914,0,.367842,.751447,.0111839,0,.387315,.737275,.010514,0,.40727,.724545,.00987277,0,.427717,.712644,.00926569,0,.448671,.700432,.00869029,0,.470149,.687664,.00814691,0,.492167,.674288,.00763012,0,.514746,.660966,.00714437,0,.537911,.647264,.00668457,0,.561688,.633431,.00626581,0,.586108,.619133,.00585593,0,.611206,.604935,.00548188,0,.637022,.590236,.00513288,0,.663599,.575473,.0047906,0,.690989,.561228,.00448895,0,.719242,.547054,.00420233,0,.748411,.533175,.00392869,0,.778531,.519163,.00367445,0,.809583,.505328,.00344097,0,.84127,.491446,.00322003,0,.873016,.477356,.00301283,0,.904762,.46356,.00282592,0,.936508,.449623,.00264956,0,.968254,.436068,.00246956,0,1,1,.0276135,0,0,1,.0276136,0,0,.999998,.0276148,0,0,.999993,.0276201,0,0,.999976,.0276342,0,0,.999945,.027664,0,0,.999884,.0277179,0,18679e-8,.999784,.027806,0,.00119607,.99963,.0279394,0,.00318407,.999401,.0281295,0,.00613601,.999066,.0283858,0,.00999963,.998524,.0287027,0,.0147164,.995702,.0286256,0,.0202295,.993593,.0286733,0,.0264876,.992067,.0288989,0,.0334452,.990548,.0292135,0,.0410621,.986775,.0291296,0,.0493032,.984054,.0293099,0,.0581381,.979481,.0291881,0,.0675397,.975297,.0291598,0,.0774848,.96981,.028954,0,.0879528,.963524,.028628,0,.0989258,.957398,.0283135,0,.110388,.950088,.0278469,0,.122327,.941538,.0271798,0,.134729,.933332,.0265388,0,.147587,.924392,.0257776,0,.160889,.914581,.024916,0,.174631,.904347,.0240242,0,.188806,.894324,.0231229,0,.203409,.883724,.022153,0,.218437,.872207,.0211355,0,.233888,.859927,.0201048,0,.249761,.848373,.0191263,0,.266056,.836023,.0181306,0,.282774,.82289,.0171718,0,.299917,.809324,.0162196,0,.317488,.795361,.0152622,0,.335493,.781253,.01439,0,.353936,.767338,.013533,0,.372825,.753156,.0127244,0,.392168,.739122,.0119454,0,.411976,.725358,.0112054,0,.432259,.712949,.010487,0,.453032,.701621,.00984032,0,.47431,.689703,.00921495,0,.496111,.677216,.00862492,0,.518456,.664217,.00806882,0,.541367,.65137,.00755922,0,.564872,.638,.00705705,0,.589001,.62453,.00661266,0,.613789,.610601,.00618432,0,.639277,.59676,.00578033,0,.66551,.582433,.00540927,0,.692539,.568026,.00506104,0,.720422,.55414,.0047353,0,.749216,.540178,.00442889,0,.778974,.526513,.00414363,0,.809711,.512954,.00388237,0,.84127,.499403,.00362875,0,.873016,.486026,.00340827,0,.904762,.472345,.00318598,0,.936508,.458828,.00297635,0,.968254,.445379,.00279447,0,1,1,.0345716,0,0,1,.0345717,0,0,.999999,.034573,0,0,.999991,.0345787,0,0,.999974,.0345941,0,0,.999937,.0346263,0,188589e-11,.999869,.0346847,0,409238e-9,.999757,.0347798,0,.0017674,.999582,.0349233,0,.00413658,.999322,.0351265,0,.00747408,.998939,.0353967,0,.0117157,.998219,.0357018,0,.0167966,.994974,.0354726,0,.0226572,.993201,.0355621,0,.0292445,.991573,.0357641,0,.0365123,.989301,.0359252,0,.0444203,.985712,.0358017,0,.0529334,.982411,.0358353,0,.0620214,.977827,.035617,0,.0716574,.973278,.0354398,0,.0818186,.967397,.0350483,0,.0924846,.960696,.0344795,0,.103638,.954349,.0339861,0,.115263,.946066,.0331323,0,.127348,.938012,.032359,0,.13988,.929413,.0314413,0,.152849,.920355,.0304103,0,.166248,.910586,.0292785,0,.18007,.900609,.0281391,0,.194308,.890093,.0269103,0,.208958,.880013,.0257269,0,.224018,.869001,.0244671,0,.239485,.85751,.0232252,0,.255359,.84582,.0220117,0,.271638,.834383,.0208274,0,.288324,.822158,.0196628,0,.305419,.809056,.0185306,0,.322927,.795832,.0174174,0,.340851,.782547,.0163758,0,.359199,.7689,.015391,0,.377975,.755526,.0144488,0,.397189,.741681,.0135372,0,.416851,.728178,.0126957,0,.436971,.714642,.0118812,0,.457564,.702756,.0111165,0,.478644,.69175,.0104145,0,.500229,.680159,.00974439,0,.522339,.668073,.00911926,0,.544997,.655405,.00851393,0,.56823,.642921,.00797637,0,.592068,.629993,.00745119,0,.616546,.616828,.00696972,0,.641705,.603305,.00652425,0,.66759,.589833,.00610188,0,.694255,.575945,.00570834,0,.72176,.561745,.00533384,0,.750168,.548277,.00500001,0,.779545,.534467,.00467582,0,.809933,.521032,.00438092,0,.841272,.507877,.00410348,0,.873016,.494654,.00383618,0,.904762,.481592,.00358699,0,.936508,.468509,.00337281,0,.968254,.455293,.00316196,0,1,1,.0430698,0,0,1,.0430699,0,0,.999998,.0430713,0,0,.999991,.0430773,0,0,.99997,.0430936,0,0,.999928,.0431277,0,406396e-10,.999852,.0431893,0,744376e-9,.999724,.0432895,0,.0024806,.999527,.0434397,0,.00524779,.99923,.0436507,0,.00898164,.998783,.0439255,0,.0136083,.997507,.0441104,0,.0190582,.994418,.0438225,0,.0252694,.992864,.0439396,0,.0321879,.991127,.0440962,0,.039767,.987331,.0438408,0,.0479667,.984819,.0438991,0,.056752,.980384,.0435906,0,.0660929,.975846,.0432543,0,.075963,.970748,.0428293,0,.0863398,.964303,.042153,0,.0972035,.95772,.0414111,0,.108537,.950747,.0405893,0,.120325,.942533,.0394887,0,.132554,.934045,.0383544,0,.145215,.924942,.037057,0,.158296,.915811,.0356993,0,.17179,.90612,.0342401,0,.185691,.896434,.0328078,0,.199993,.886021,.031288,0,.214691,.876081,.0297776,0,.229782,.865608,.0282334,0,.245265,.854924,.026749,0,.261138,.843607,.02526,0,.277401,.832456,.0238214,0,.294056,.821342,.0224682,0,.311104,.809303,.0211297,0,.328548,.796468,.0198387,0,.346394,.784046,.0186227,0,.364645,.771262,.0174561,0,.38331,.758118,.0163806,0,.402396,.745075,.0153287,0,.421912,.731926,.0143647,0,.44187,.71863,.0134363,0,.462283,.705414,.0125603,0,.483165,.693792,.0117508,0,.504535,.683108,.0110016,0,.52641,.67183,.0102757,0,.548816,.66015,.00962044,0,.571776,.647907,.00898031,0,.595323,.635734,.00840811,0,.619489,.623208,.00786211,0,.644317,.610438,.00734953,0,.669852,.597345,.00687688,0,.696148,.584138,.00643469,0,.723267,.5707,.00602236,0,.75128,.556966,.0056324,0,.780258,.543607,.00528277,0,.810268,.530213,.00493999,0,.841311,.516912,.00462265,0,.873016,.503916,.0043307,0,.904762,.491146,.00406858,0,.936508,.478439,.00381436,0,.968254,.465834,.00358003,0,1,1,.0534039,0,0,1,.053404,0,0,.999998,.0534055,0,0,.999989,.0534116,0,0,.999968,.0534283,0,0,.999918,.0534633,0,155895e-9,.99983,.0535262,0,.00120914,.999685,.0536281,0,.00334944,.999461,.0537799,0,.00653077,.999119,.0539902,0,.0106718,.998582,.0542524,0,.0156907,.995919,.0540318,0,.0215147,.993735,.0538914,0,.0280801,.992126,.0539557,0,.0353323,.990266,.0540401,0,.0432247,.986317,.0536064,0,.0517172,.983213,.0534425,0,.0607754,.978303,.0528622,0,.0703698,.973665,.0523363,0,.0804742,.968091,.0516165,0,.0910667,.961026,.0505434,0,.102128,.954333,.049523,0,.113641,.946372,.0481698,0,.125591,.938254,.0467674,0,.137965,.929516,.0452341,0,.150754,.920106,.0435083,0,.163947,.910899,.0417399,0,.177537,.901532,.0399389,0,.191516,.891919,.0380901,0,.205881,.882006,.0362341,0,.220626,.871965,.0343444,0,.235749,.862145,.0324832,0,.251248,.852058,.0306681,0,.267121,.84161,.0289097,0,.283368,.830806,.0272079,0,.299992,.820476,.0256089,0,.316992,.809514,.0240394,0,.334374,.797865,.0225379,0,.35214,.785621,.0211235,0,.370296,.773765,.0197908,0,.388849,.761629,.0185235,0,.407807,.748891,.0173358,0,.427178,.736437,.0162305,0,.446974,.723707,.0151778,0,.467207,.710606,.0141791,0,.487892,.698019,.0132592,0,.509046,.686203,.0123887,0,.530687,.675692,.0115976,0,.552839,.664826,.0108325,0,.575527,.65349,.0101348,0,.59878,.641774,.00947756,0,.622634,.629794,.00886058,0,.647128,.617647,.00828526,0,.672308,.60534,.00775312,0,.698231,.592718,.00726033,0,.724958,.579746,.00679731,0,.752563,.566763,.00636111,0,.781127,.553515,.00595228,0,.810733,.540118,.00556876,0,.841426,.527325,.00523051,0,.873016,.514265,.00490712,0,.904762,.501406,.00460297,0,.936508,.488922,.00431247,0,.968254,.476541,.0040472,0,1,1,.0659184,0,0,1,.0659185,0,0,.999998,.06592,0,0,.999988,.0659259,0,0,.999963,.0659423,0,0,.999907,.0659764,0,374198e-9,.999806,.0660376,0,.00182071,.999639,.0661361,0,.0043894,.999378,.0662814,0,.00800055,.998985,.0664779,0,.0125594,.998285,.0666914,0,.0179786,.995071,.0661989,0,.0241822,.993172,.0660454,0,.031106,.991438,.0660105,0,.0386952,.988428,.0656875,0,.0469032,.985218,.0652913,0,.0556905,.981128,.0647107,0,.065023,.976015,.0638491,0,.0748717,.97097,.062993,0,.0852112,.964582,.0617927,0,.0960199,.957383,.0603626,0,.107279,.949969,.0588128,0,.118971,.941843,.0570274,0,.131084,.933624,.0551885,0,.143604,.924543,.053122,0,.156521,.914919,.0508897,0,.169825,.905773,.0486418,0,.18351,.896434,.0463364,0,.197569,.887195,.0440623,0,.211997,.877706,.0417799,0,.226789,.867719,.03945,0,.241944,.858587,.037243,0,.257458,.849317,.0350956,0,.273331,.839585,.0329852,0,.289563,.829856,.0310028,0,.306154,.819589,.0290953,0,.323108,.809714,.0272738,0,.340426,.79934,.0255631,0,.358113,.788224,.0239175,0,.376175,.776619,.0223831,0,.394616,.76521,.0209298,0,.413445,.753716,.0195786,0,.432671,.741564,.0183001,0,.452305,.729413,.0171259,0,.472358,.717146,.0159933,0,.492845,.70436,.0149495,0,.513783,.69219,.0139681,0,.535189,.680289,.0130577,0,.557087,.669611,.0122198,0,.5795,.659113,.0114174,0,.602459,.648148,.0106729,0,.625997,.636905,.00998997,0,.650154,.625154,.00934313,0,.674976,.613481,.00874839,0,.700518,.60154,.00818265,0,.726845,.58943,.00766889,0,.754032,.576828,.00717153,0,.782167,.564194,.00672696,0,.811344,.551501,.00630863,0,.841644,.538635,.00592177,0,.873016,.525724,.00554888,0,.904762,.513209,.00520225,0,.936508,.500457,.00488231,0,.968254,.48799,.00457153,0,1,1,.0810131,0,0,1,.0810133,0,0,.999997,.0810145,0,0,.999985,.08102,0,0,.999956,.0810347,0,195026e-10,.999893,.0810656,0,719316e-9,.999777,.0811205,0,.00259774,.999583,.081208,0,.00561807,.999281,.0813343,0,.00967472,.998813,.0814969,0,.0146627,.997597,.0815217,0,.0204902,.994379,.0808502,0,.0270802,.992744,.0806792,0,.0343674,.990745,.0804589,0,.0422974,.986646,.0796107,0,.0508242,.983611,.0790913,0,.0599087,.978869,.0780746,0,.0695175,.973475,.0768218,0,.0796223,.967845,.0754926,0,.0901983,.960778,.0737063,0,.101224,.953333,.0718052,0,.112682,.945274,.0695946,0,.124555,.936955,.0672492,0,.136831,.928319,.0647732,0,.149496,.919075,.0620947,0,.162542,.909114,.0591816,0,.175958,.900137,.0563917,0,.189739,.891069,.0535392,0,.203877,.882262,.0507642,0,.218368,.873232,.0479793,0,.233208,.864042,.045226,0,.248393,.855002,.0425413,0,.263923,.846569,.0400126,0,.279796,.837714,.0375269,0,.296012,.828918,.0352027,0,.312573,.819783,.0330011,0,.329479,.810129,.0308908,0,.346734,.800866,.0289112,0,.364342,.79093,.0270255,0,.382307,.780593,.0252758,0,.400637,.769511,.0236178,0,.419337,.758558,.0220652,0,.438418,.747632,.0206289,0,.457889,.736146,.0192873,0,.477761,.724093,.0180333,0,.49805,.71234,.0168264,0,.51877,.700201,.015746,0,.53994,.687949,.0147027,0,.561581,.676163,.0137512,0,.583718,.665001,.0128655,0,.60638,.65472,.0120366,0,.629599,.644213,.0112604,0,.653415,.633382,.0105413,0,.677874,.62212,.00986498,0,.70303,.610631,.00923308,0,.728948,.599078,.00864206,0,.755706,.587519,.00811784,0,.783396,.575505,.00761237,0,.812121,.563148,.00713949,0,.841989,.550828,.00668379,0,.873035,.538458,.00627715,0,.904762,.525905,.00588336,0,.936508,.513517,.00552687,0,.968254,.501395,.00519681,0,1,1,.0991506,0,0,1,.0991504,0,0,.999996,.0991515,0,0,.999984,.0991558,0,0,.999947,.0991672,0,114389e-9,.999874,.0991912,0,.00121503,.999739,.0992331,0,.00356108,.999514,.0992983,0,.00705578,.999159,.0993877,0,.011574,.998586,.0994837,0,.017003,.995731,.0988425,0,.0232484,.993384,.098276,0,.0302318,.991615,.0979269,0,.0378884,.989029,.0973432,0,.0461641,.985373,.0963539,0,.0550136,.981278,.0952306,0,.0643988,.975777,.0936233,0,.0742868,.970526,.0920219,0,.0846501,.963755,.0898912,0,.0954644,.956676,.0876064,0,.106709,.948099,.0847751,0,.118367,.939718,.0818638,0,.130423,.931305,.078857,0,.142862,.922342,.0756127,0,.155674,.912842,.0721473,0,.168849,.903304,.0686195,0,.182378,.89411,.0650589,0,.196255,.885512,.0616022,0,.210473,.877193,.0582434,0,.225027,.86877,.0548979,0,.239915,.860267,.0516095,0,.255132,.851915,.048468,0,.270678,.843912,.0454447,0,.286551,.83604,.0425612,0,.302751,.828245,.0398752,0,.31928,.820159,.0373198,0,.336138,.81167,.034916,0,.35333,.802659,.0326402,0,.370858,.793921,.0304901,0,.388728,.784713,.0284857,0,.406944,.774946,.0266186,0,.425515,.76448,.0248593,0,.444449,.753793,.0232114,0,.463756,.743506,.0217039,0,.483447,.732555,.0202841,0,.503535,.720965,.0189648,0,.524036,.709422,.0177189,0,.544968,.697756,.0165626,0,.56635,.685565,.015483,0,.588208,.673987,.0144892,0,.610569,.66244,.0135607,0,.633466,.651675,.0126956,0,.656936,.641598,.0118788,0,.681025,.63121,.0111261,0,.705788,.620514,.010437,0,.731289,.609366,.00978747,0,.757606,.598137,.00917257,0,.784834,.586966,.00859778,0,.813085,.575549,.00806803,0,.842485,.563797,.00757294,0,.87313,.551758,.00710592,0,.904762,.539894,.0066841,0,.936508,.527901,.00627901,0,.968254,.515819,.00590506,0,1,1,.120864,0,0,1,.120864,0,0,.999996,.120864,0,0,.99998,.120867,0,0,.99994,.120872,0,323781e-9,.999852,.120884,0,.00188693,.999693,.120903,0,.00473489,.999426,.120929,0,.00872704,.999002,.120955,0,.0137237,.998235,.120918,0,.0196068,.994608,.119764,0,.0262803,.992997,.119265,0,.0336657,.990968,.11863,0,.0416987,.987002,.117261,0,.0503261,.983524,.116009,0,.0595035,.97875,.114252,0,.0691935,.972652,.11193,0,.0793645,.966613,.109555,0,.0899894,.959275,.106612,0,.101045,.951272,.103375,0,.112512,.942323,.0996594,0,.124372,.933679,.0958841,0,.136611,.924822,.0919265,0,.149216,.915742,.0878061,0,.162176,.906348,.0834894,0,.175482,.896883,.079085,0,.189125,.88774,.0746745,0,.203098,.87986,.0705773,0,.217396,.871998,.0665005,0,.232015,.864325,.0625413,0,.24695,.856685,.0586781,0,.2622,.84925,.0550063,0,.277761,.841719,.0514727,0,.293634,.834755,.0481398,0,.309819,.827853,.0450172,0,.326315,.820888,.0420969,0,.343126,.813616,.0393702,0,.360254,.805767,.0367771,0,.377701,.797338,.0343274,0,.395474,.789122,.0320529,0,.413577,.780601,.0299485,0,.432018,.771424,.0279812,0,.450804,.761502,.0261054,0,.469944,.751166,.0243942,0,.489451,.741276,.0228087,0,.509337,.730898,.0213265,0,.529617,.719878,.0199307,0,.550307,.708379,.0186574,0,.571428,.697165,.0174446,0,.593003,.685554,.0163144,0,.615059,.673631,.015276,0,.637628,.662385,.0143003,0,.660746,.651059,.0134112,0,.68446,.640451,.0125794,0,.70882,.630536,.011793,0,.733893,.620316,.0110547,0,.759756,.609722,.0103668,0,.786505,.598804,.00973009,0,.814259,.587871,.00912812,0,.843157,.577121,.00858916,0,.87334,.566019,.00807333,0,.904762,.554664,.00759687,0,.936508,.543101,.00714759,0,.968254,.531558,.00673418,0,1,1,.146767,0,0,1,.146767,0,0,.999997,.146767,0,0,.999977,.146765,0,320658e-11,.999929,.146762,0,682576e-9,.999823,.146753,0,.00276402,.999633,.146735,0,.00614771,.999314,.146699,0,.0106613,.998796,.14662,0,.0161546,.997124,.146107,0,.0225063,.994062,.144857,0,.0296198,.992154,.144011,0,.037417,.989186,.142712,0,.0458348,.985279,.140926,0,.0548211,.980826,.13885,0,.0643326,.975056,.136168,0,.074333,.969005,.133217,0,.0847917,.961554,.12959,0,.0956828,.954206,.125886,0,.106984,.945046,.121335,0,.118675,.935678,.116492,0,.130741,.926748,.111635,0,.143166,.917764,.106625,0,.155939,.908358,.101325,0,.169049,.899219,.0960249,0,.182487,.890089,.0906527,0,.196245,.881488,.0853905,0,.210317,.874031,.0804177,0,.224697,.866932,.0756005,0,.23938,.859976,.0709019,0,.254364,.853375,.0664391,0,.269646,.846971,.0622012,0,.285223,.840483,.058129,0,.301096,.833969,.0542762,0,.317265,.82806,.0507042,0,.333729,.822128,.047368,0,.350491,.815989,.044272,0,.367554,.809336,.0413444,0,.38492,.802177,.038601,0,.402594,.79441,.0360227,0,.420582,.786573,.0336383,0,.438891,.778619,.0314321,0,.457527,.77,.029362,0,.476499,.760698,.0274102,0,.49582,.750932,.0256146,0,.5155,.740993,.023974,0,.535555,.731159,.0224182,0,.556,.720836,.0209889,0,.576855,.709913,.0196411,0,.598143,.698415,.0183824,0,.619888,.68745,.0172222,0,.642123,.676154,.0161509,0,.664883,.664383,.0151397,0,.688211,.6533,.0141873,0,.71216,.642072,.0133105,0,.736792,.631412,.0124932,0,.762186,.621622,.0117408,0,.788439,.611681,.0110358,0,.815672,.60142,.0103775,0,.844034,.59083,.00975623,0,.873699,.580254,.00918084,0,.904765,.569841,.00864721,0,.936508,.559224,.00815731,0,.968254,.548315,.00767924,0,1,1,.177563,0,0,1,.177563,0,0,.999994,.177562,0,0,.999972,.177555,0,664171e-10,.999914,.177536,0,.0012276,.999787,.177496,0,.00388025,.999556,.17742,0,.00783463,.999165,.177285,0,.0128953,.9985,.177037,0,.0189053,.995388,.175634,0,.025742,.993102,.174375,0,.033309,.990992,.173121,0,.0415298,.986932,.170896,0,.0503425,.982786,.16847,0,.0596964,.977592,.165455,0,.0695498,.971075,.161676,0,.0798676,.963967,.157458,0,.0906201,.956397,.152836,0,.101783,.947489,.147467,0,.113333,.937564,.14145,0,.125254,.928182,.135383,0,.137529,.919027,.129212,0,.150144,.909618,.12276,0,.163088,.900492,.116273,0,.176351,.891671,.1098,0,.189924,.883146,.103362,0,.203799,.875151,.0970799,0,.21797,.868338,.0911732,0,.232433,.862033,.0854966,0,.247182,.856107,.0800691,0,.262216,.850644,.0749618,0,.27753,.845261,.070079,0,.293124,.839885,.0654321,0,.308997,.834609,.0610975,0,.325149,.829083,.0569741,0,.341581,.82404,.0531736,0,.358294,.818968,.049665,0,.37529,.813496,.0463856,0,.392573,.807533,.0433217,0,.410148,.80099,.0404402,0,.428019,.793891,.0377578,0,.446192,.786281,.0352616,0,.464676,.778773,.0329577,0,.483478,.770737,.030808,0,.502608,.762094,.0287964,0,.522079,.752898,.0269254,0,.541905,.743306,.0251926,0,.5621,.733416,.023595,0,.582684,.723742,.0221155,0,.603677,.713542,.0207435,0,.625106,.702755,.019434,0,.646998,.691484,.0182046,0,.66939,.680531,.0170771,0,.692324,.66953,.0160339,0,.715849,.658126,.0150677,0,.740028,.646933,.0141551,0,.764937,.636107,.0133179,0,.790673,.625271,.0125284,0,.817358,.615225,.0117937,0,.84515,.605678,.0111181,0,.874244,.59583,.0104759,0,.904828,.585704,.00986672,0,.936508,.575413,.00929712,0,.968254,.565373,.00876713,0,1,1,.214058,0,0,.999999,.214058,0,0,.999994,.214055,0,0,.999966,.214039,0,259642e-9,.999893,.213998,0,.00200075,.999737,.21391,0,.00527775,.999449,.213745,0,.00983959,.99896,.213458,0,.0154755,.9979,.212855,0,.0220249,.994278,.210779,0,.0293654,.992254,.20926,0,.0374021,.98881,.206908,0,.0460604,.984715,.204009,0,.0552802,.979738,.200471,0,.0650127,.972884,.195813,0,.0752175,.965996,.190856,0,.0858612,.957974,.185077,0,.0969155,.949155,.17868,0,.108356,.939288,.171513,0,.120163,.928996,.163838,0,.132319,.919563,.156246,0,.144808,.910004,.148359,0,.157618,.900791,.140417,0,.170737,.892135,.132569,0,.184155,.883803,.124741,0,.197866,.876034,.117091,0,.211861,.869219,.109835,0,.226134,.863062,.102859,0,.240682,.857795,.0962928,0,.255499,.853009,.0900725,0,.270583,.848603,.0842101,0,.285931,.844335,.0786527,0,.301542,.840208,.0734397,0,.317415,.836035,.0685334,0,.33355,.83172,.0639275,0,.349948,.827135,.0595909,0,.36661,.822797,.0556204,0,.383539,.818387,.0519394,0,.400738,.813565,.0485317,0,.41821,.808142,.0453138,0,.435961,.802212,.0423354,0,.453997,.79573,.0395553,0,.472324,.788741,.036988,0,.490951,.781093,.0345688,0,.509887,.773597,.0323297,0,.529144,.765622,.0302719,0,.548735,.757083,.0283477,0,.568674,.747992,.0265562,0,.588979,.738591,.0248844,0,.609671,.728719,.0233342,0,.630773,.719146,.0219081,0,.652314,.709165,.0205711,0,.674328,.69875,.0193248,0,.696854,.687884,.0181582,0,.719942,.676818,.0170746,0,.743651,.666247,.0160718,0,.768057,.655284,.0151262,0,.793253,.64401,.0142561,0,.819363,.633353,.0134327,0,.846547,.622674,.012653,0,.875017,.612265,.0119354,0,.905021,.602455,.0112533,0,.936508,.593147,.0106234,0,.968254,.583592,.0100213,0,1,1,.25717,0,0,1,.25717,0,0,.999992,.257164,0,0,.999958,.257135,0,641715e-9,.999864,.25706,0,.00305314,.999666,.256897,0,.00700975,.999302,.256596,0,.0122194,.998663,.25607,0,.0184622,.995607,.254123,0,.0255773,.993094,.252081,0,.0334439,.9907,.249867,0,.0419696,.98594,.246118,0,.0510823,.981214,.242049,0,.0607242,.974966,.236869,0,.0708486,.967589,.230724,0,.081417,.95915,.223635,0,.0923974,.950257,.21596,0,.103763,.940165,.207296,0,.115491,.929396,.197901,0,.127562,.919288,.188437,0,.13996,.909428,.178762,0,.15267,.900105,.169072,0,.165679,.891418,.159478,0,.178979,.883347,.15002,0,.192558,.875992,.140813,0,.20641,.869466,.13196,0,.220529,.863699,.123501,0,.234907,.858553,.115436,0,.249542,.854379,.107901,0,.264428,.850894,.10088,0,.279564,.847632,.0942296,0,.294947,.844571,.0879861,0,.310575,.84163,.0821534,0,.326448,.838542,.0766409,0,.342566,.835412,.0715322,0,.358929,.831899,.0666883,0,.37554,.828177,.0622175,0,.392399,.82416,.0580452,0,.409511,.820393,.054267,0,.426878,.816068,.0507172,0,.444506,.811201,.0474041,0,.4624,.805785,.0443174,0,.480566,.799878,.0414562,0,.499013,.793469,.0388147,0,.517749,.786473,.0363453,0,.536785,.778874,.0340225,0,.556134,.771277,.0318599,0,.575809,.763426,.0298859,0,.595827,.755044,.0280357,0,.616207,.746161,.0262979,0,.636973,.737124,.0247295,0,.65815,.72761,.0232514,0,.679772,.717822,.0218755,0,.701876,.708279,.0205942,0,.724509,.698333,.0193947,0,.74773,.68802,.0182717,0,.771609,.677321,.0172044,0,.79624,.666504,.0162122,0,.821743,.656184,.0152924,0,.84828,.64556,.0144326,0,.876069,.634636,.0136157,0,.905404,.624124,.0128612,0,.936508,.613914,.0121435,0,.968254,.603589,.0114887,0,1,1,.307946,0,0,.999999,.307945,0,0,.999988,.307934,0,204479e-10,.999944,.307886,0,.00127833,.999824,.307756,0,.00445047,.999565,.30748,0,.00914673,.999085,.306966,0,.0150498,.998103,.306004,0,.0219367,.994249,.303028,0,.0296485,.991807,.300435,0,.038068,.987773,.296554,0,.0471062,.982673,.2916,0,.0566942,.976623,.285641,0,.0667768,.968757,.27815,0,.0773099,.959849,.269529,0,.088257,.950663,.260248,0,.0995879,.940129,.249704,0,.111277,.92895,.238291,0,.123304,.917996,.226501,0,.13565,.907813,.214669,0,.148299,.898305,.202835,0,.161237,.889626,.191158,0,.174455,.88175,.179695,0,.187941,.874715,.168548,0,.201687,.868746,.15792,0,.215687,.863703,.147807,0,.229933,.859315,.138149,0,.24442,.855538,.128993,0,.259145,.852428,.120414,0,.274103,.850168,.112498,0,.289293,.848132,.105054,0,.304711,.846291,.0981087,0,.320357,.844431,.0915942,0,.33623,.842493,.0855056,0,.35233,.840368,.0798204,0,.368658,.83798,.0745097,0,.385214,.83523,.0695424,0,.402002,.832091,.0649092,0,.419023,.828667,.0606291,0,.436282,.824805,.0566523,0,.453782,.820988,.0530229,0,.471529,.816635,.0496364,0,.489528,.811725,.0464658,0,.507788,.806316,.0435082,0,.526317,.800469,.0407873,0,.545124,.794107,.038255,0,.564221,.787218,.0358825,0,.583621,.779872,.0336785,0,.603341,.772097,.0316379,0,.623397,.764484,.0297379,0,.643812,.756428,.0279581,0,.664611,.748022,.0263153,0,.685824,.739268,.0247799,0,.707488,.73024,.0233385,0,.729646,.720893,.0220035,0,.752354,.71119,.0207555,0,.77568,.701791,.0195843,0,.799715,.692184,.0184891,0,.824574,.682258,.0174541,0,.850417,.67206,.0164873,0,.877466,.661717,.0155959,0,.90604,.651462,.0147519,0,.936528,.641467,.0139727,0,.968254,.631229,.0132363,0,1,1,.367573,0,0,.999999,.367571,0,0,.999984,.367553,0,183382e-9,.999925,.367473,0,.00225254,.999759,.367259,0,.00628165,.99941,.366801,0,.0117858,.998739,.365946,0,.0184359,.995529,.363191,0,.0260114,.992875,.360171,0,.0343581,.989135,.355981,0,.0433637,.984166,.350401,0,.0529438,.977871,.343348,0,.0630334,.96951,.334341,0,.0735805,.959964,.323862,0,.0845437,.950162,.312521,0,.095889,.938882,.299577,0,.107588,.926992,.285573,0,.119617,.915589,.271212,0,.131957,.904791,.256611,0,.144591,.895177,.242224,0,.157503,.886403,.227952,0,.170682,.878957,.214192,0,.184117,.872418,.200795,0,.197799,.867029,.188015,0,.21172,.862835,.175975,0,.225873,.859411,.164526,0,.240253,.856655,.153693,0,.254854,.854519,.14352,0,.269673,.852828,.13397,0,.284707,.851412,.124984,0,.299953,.850609,.116748,0,.315408,.849855,.10905,0,.331073,.849017,.101839,0,.346946,.848079,.0951359,0,.363028,.846911,.0888774,0,.379318,.845445,.0830375,0,.395818,.84362,.0775844,0,.41253,.841411,.0725054,0,.429457,.838768,.0677691,0,.446602,.835801,.0634016,0,.463968,.832341,.0593095,0,.481561,.828424,.0555121,0,.499386,.824312,.052024,0,.51745,.819918,.0487865,0,.535761,.815072,.0457801,0,.554328,.809863,.0430184,0,.573162,.804164,.0404245,0,.592275,.798034,.0380146,0,.611681,.791436,.0357436,0,.631398,.784498,.0336475,0,.651445,.777125,.0316666,0,.671845,.769365,.0298122,0,.692628,.761579,.0281001,0,.713827,.753746,.0265049,0,.735484,.745573,.0250067,0,.75765,.737083,.0236026,0,.78039,.728545,.0223302,0,.803789,.719691,.0211243,0,.82796,.710569,.0199983,0,.853056,.701216,.0189569,0,.879298,.692094,.0179702,0,.907014,.682909,.0170418,0,.936691,.673509,.0161732,0,.968254,.663863,.0153406,0,1,1,.437395,0,0,.999998,.437394,0,0,.99998,.437363,0,616704e-9,.999891,.437232,0,.00367925,.999656,.436877,0,.00867446,.999148,.436121,0,.0150679,.997959,.434564,0,.022531,.993464,.430134,0,.0308507,.990606,.426077,0,.0398805,.985027,.419397,0,.0495148,.978491,.41118,0,.0596749,.969643,.40048,0,.0703001,.959189,.38769,0,.0813427,.948223,.373575,0,.0927641,.935955,.357622,0,.104533,.923237,.34043,0,.116624,.911074,.322735,0,.129015,.899724,.30479,0,.141687,.890189,.287392,0,.154626,.881796,.270248,0,.167818,.874781,.253659,0,.181252,.869166,.237786,0,.194918,.864725,.222618,0,.208807,.861565,.208356,0,.222913,.859284,.194867,0,.237229,.857677,.18212,0,.25175,.856714,.17018,0,.266473,.856155,.158969,0,.281392,.8558,.148413,0,.296505,.855672,.138578,0,.311811,.855538,.129345,0,.327306,.855689,.120861,0,.342991,.855767,.112969,0,.358864,.855618,.105593,0,.374925,.85525,.0987451,0,.391176,.854583,.0923727,0,.407616,.853534,.0864143,0,.424249,.852061,.0808338,0,.441076,.850253,.0756771,0,.4581,.848004,.0708612,0,.475324,.845333,.0663784,0,.492754,.842376,.0622631,0,.510394,.838956,.0584112,0,.528251,.835121,.0548328,0,.546331,.830842,.0514838,0,.564644,.826212,.048355,0,.583198,.821522,.0454714,0,.602005,.816551,.0428263,0,.621078,.811211,.0403612,0,.640434,.805479,.038039,0,.660089,.799409,.0358739,0,.680066,.79306,.0338727,0,.70039,.786395,.0319985,0,.721094,.779416,.030241,0,.742215,.77214,.0285951,0,.7638,.764636,.0270747,0,.785912,.756836,.0256354,0,.808628,.749315,.0243027,0,.832055,.741561,.0230497,0,.856338,.733589,.0218801,0,.88169,.725479,.020784,0,.908441,.717255,.0197702,0,.937125,.708829,.0188168,0,.968254,.700191,.0179113,0,1,1,.518937,0,0,.999998,.518933,0,0,.999967,.518883,0,.00147741,.999832,.51866,0,.00573221,.999466,.518057,0,.011826,.998644,.516752,0,.0192116,.994458,.512347,0,.027573,.991223,.507675,0,.0367099,.985515,.500188,0,.046487,.978308,.490408,0,.0568071,.968359,.477357,0,.0675984,.95682,.461752,0,.0788059,.943929,.443796,0,.090386,.930224,.423893,0,.102304,.916514,.402682,0,.114532,.903653,.380914,0,.127047,.892315,.359212,0,.139828,.882942,.338102,0,.152861,.875438,.31773,0,.16613,.869642,.298186,0,.179624,.865304,.279491,0,.193332,.862382,.261804,0,.207247,.860666,.245146,0,.22136,.859788,.229406,0,.235666,.859608,.214605,0,.250158,.859912,.200691,0,.264832,.86053,.187623,0,.279684,.861368,.17539,0,.294711,.862237,.163901,0,.309911,.863127,.153175,0,.32528,.863923,.143147,0,.340819,.864567,.133781,0,.356524,.865013,.125042,0,.372397,.86539,.116952,0,.388438,.865591,.109476,0,.404645,.865517,.102542,0,.421022,.865084,.0960688,0,.437569,.864309,.0900499,0,.454287,.863151,.0844328,0,.471181,.861649,.0792218,0,.488253,.859742,.0743482,0,.505507,.857446,.0697963,0,.522947,.854757,.0655364,0,.54058,.851783,.061608,0,.558412,.848516,.0579701,0,.576449,.844897,.0545742,0,.594701,.840956,.0514167,0,.613178,.836676,.0484598,0,.631892,.832075,.0456934,0,.650856,.827191,.0431178,0,.670088,.822295,.0407718,0,.689606,.817294,.0386032,0,.709434,.812013,.0365675,0,.7296,.806465,.0346547,0,.750138,.800691,.0328717,0,.771093,.794709,.031211,0,.792519,.788493,.0296504,0,.814488,.782049,.0281782,0,.837097,.775403,.0267965,0,.860481,.76857,.0255002,0,.884842,.761536,.0242759,0,.910494,.754303,.0231142,0,.937985,.74692,.0220305,0,.968254,.739745,.0210192,0,1,1,.613914,0,0,.999996,.613907,0,963597e-10,.999942,.613814,0,.00301247,.999704,.613407,0,.00870385,.999046,.612302,0,.0160714,.995516,.608266,0,.0245899,.991726,.602863,0,.0339681,.985157,.593956,0,.0440254,.97642,.581748,0,.0546409,.964404,.565183,0,.0657284,.950601,.545273,0,.0772246,.935158,.522129,0,.0890812,.919364,.496782,0,.10126,.904754,.470571,0,.113731,.89176,.444037,0,.126469,.881492,.418322,0,.139454,.873656,.393522,0,.15267,.868053,.369795,0,.166101,.864336,.347171,0,.179736,.862259,.325737,0,.193565,.861556,.305532,0,.207578,.861776,.286416,0,.221769,.862661,.268355,0,.23613,.864015,.251334,0,.250656,.865711,.235352,0,.265343,.867519,.220302,0,.280187,.869351,.206161,0,.295183,.871144,.192908,0,.31033,.872839,.180505,0,.325624,.874307,.168848,0,.341065,.875667,.158021,0,.35665,.876758,.147877,0,.37238,.87764,.138441,0,.388253,.878237,.129627,0,.404269,.878563,.121415,0,.42043,.878572,.113741,0,.436735,.87842,.106652,0,.453187,.878057,.100097,0,.469786,.877413,.0940128,0,.486536,.87646,.0883462,0,.503439,.875233,.0830924,0,.520498,.8737,.0781975,0,.537717,.871873,.07364,0,.555102,.86978,.0694103,0,.572657,.867405,.0654696,0,.59039,.864751,.0617914,0,.608307,.861818,.0583491,0,.626419,.858645,.0551443,0,.644733,.855307,.0521894,0,.663264,.851736,.0494334,0,.682025,.847927,.0468504,0,.701032,.843888,.0444261,0,.720308,.839629,.0421497,0,.739875,.835158,.0400082,0,.759764,.830509,.0380076,0,.780014,.825714,.0361488,0,.800673,.820729,.0343956,0,.821803,.815751,.0327781,0,.843492,.810752,.031275,0,.86586,.805587,.0298542,0,.889087,.800317,.0285397,0,.913466,.79489,.0272948,0,.93952,.789314,.0261139,0,.96835,.783593,.0249938,0,1,1,.724258,0,0,.999992,.724243,0,726889e-9,.99987,.724044,0,.00569574,.999336,.72317,0,.0131702,.996271,.719432,0,.0220738,.991159,.712576,0,.0319405,.982465,.700927,0,.0425202,.97049,.684297,0,.0536599,.953973,.661244,0,.065258,.935546,.633804,0,.0772427,.916596,.603071,0,.0895616,.899353,.57105,0,.102175,.885216,.539206,0,.11505,.875076,.508714,0,.128164,.868334,.479571,0,.141495,.864414,.451796,0,.155026,.862678,.425328,0,.168745,.862835,.400352,0,.182639,.864067,.376532,0,.196699,.866086,.35391,0,.210915,.868557,.332424,0,.225282,.871271,.312053,0,.239792,.874058,.292764,0,.25444,.8768,.27453,0,.269223,.87939,.257297,0,.284135,.8819,.24114,0,.299174,.884187,.225934,0,.314337,.886262,.211669,0,.329622,.888119,.198311,0,.345026,.889709,.185783,0,.360549,.891054,.174063,0,.376189,.892196,.163143,0,.391946,.893101,.152952,0,.407819,.893803,.143475,0,.423808,.894277,.134647,0,.439914,.894532,.126434,0,.456137,.894576,.1188,0,.472479,.894393,.111694,0,.48894,.893976,.105069,0,.505523,.893346,.0989077,0,.52223,.892502,.0931724,0,.539064,.891441,.0878276,0,.556028,.890276,.082903,0,.573125,.888972,.0783505,0,.590361,.887469,.0741083,0,.607741,.885785,.0701633,0,.62527,.883914,.0664835,0,.642957,.881872,.0630567,0,.660809,.879651,.0598527,0,.678836,.877267,.0568615,0,.69705,.874717,.05406,0,.715465,.872012,.0514378,0,.734098,.869157,.0489805,0,.752968,.866155,.0466727,0,.772101,.863014,.0445056,0,.791529,.859748,.0424733,0,.81129,.856416,.0405957,0,.831438,.852958,.0388273,0,.852044,.849382,.0371619,0,.87321,.845694,.0355959,0,.89509,.841893,.0341155,0,.917932,.837981,.0327141,0,.942204,.833963,.0313856,0,.968981,.829847,.0301275,0,1,1,.85214,0,0,.999969,.852095,0,.00279627,.999483,.851408,0,.0107635,.994545,.84579,0,.0206454,.986188,.835231,0,.0315756,.969847,.814687,0,.0432021,.945951,.783735,0,.0553396,.91917,.746074,0,.0678766,.895488,.706938,0,.0807395,.878232,.669534,0,.0938767,.868252,.635168,0,.10725,.863873,.603069,0,.120832,.863369,.572514,0,.134598,.86545,.543169,0,.148533,.868803,.514578,0,.16262,.872794,.486762,0,.176849,.87702,.459811,0,.19121,.881054,.433654,0,.205694,.884974,.408574,0,.220294,.888587,.384525,0,.235005,.891877,.36156,0,.24982,.894793,.339661,0,.264737,.89743,.318913,0,.279751,.899796,.299302,0,.294859,.901943,.280843,0,.310058,.903858,.263481,0,.325346,.905574,.247197,0,.340721,.907069,.231915,0,.356181,.908379,.217614,0,.371725,.90952,.20425,0,.387353,.910483,.191758,0,.403063,.91128,.180092,0,.418854,.911936,.169222,0,.434727,.912454,.159098,0,.450682,.912835,.149668,0,.466718,.913078,.140884,0,.482837,.913192,.132709,0,.499038,.913175,.125095,0,.515324,.91304,.118012,0,.531695,.912781,.111417,0,.548153,.91241,.105281,0,.5647,.911924,.0995691,0,.581338,.911331,.0942531,0,.59807,.910637,.0893076,0,.6149,.90984,.0846998,0,.63183,.908941,.0804044,0,.648865,.907944,.0763984,0,.666011,.906857,.0726638,0,.683273,.90568,.0691783,0,.700659,.904416,.0659222,0,.718176,.903067,.0628782,0,.735834,.901637,.0600307,0,.753646,.900128,.0573647,0,.771625,.898544,.0548668,0,.78979,.89689,.052527,0,.808162,.895165,.0503306,0,.826771,.893371,.0482668,0,.845654,.891572,.0463605,0,.864863,.889763,.0445998,0,.884472,.887894,.0429451,0,.904592,.885967,.0413884,0,.925407,.883984,.0399225,0,.947271,.881945,.0385405,0,.97105,.879854,.0372362,0,1,.999804,.995833,0,0,.938155,.933611,0,.0158731,.864755,.854311,0,.0317461,.888594,.865264,0,.0476191,.905575,.863922,0,.0634921,.915125,.850558,0,.0793651,.920665,.829254,0,.0952381,.924073,.802578,0,.111111,.926304,.772211,0,.126984,.927829,.739366,0,.142857,.928924,.705033,0,.15873,.92973,.670019,0,.174603,.930339,.634993,0,.190476,.930811,.600485,0,.206349,.931191,.566897,0,.222222,.93149,.534485,0,.238095,.931737,.503429,0,.253968,.931939,.473811,0,.269841,.932108,.445668,0,.285714,.93225,.418993,0,.301587,.932371,.393762,0,.31746,.932474,.369939,0,.333333,.932562,.347479,0,.349206,.932638,.326336,0,.365079,.932703,.306462,0,.380952,.93276,.287805,0,.396825,.932809,.270313,0,.412698,.932851,.253933,0,.428571,.932887,.23861,0,.444444,.932917,.224289,0,.460317,.932943,.210917,0,.47619,.932965,.19844,0,.492063,.932982,.186807,0,.507937,.932995,.175966,0,.52381,.933005,.165869,0,.539683,.933011,.156468,0,.555556,.933013,.147719,0,.571429,.933013,.139579,0,.587302,.93301,.132007,0,.603175,.933004,.124965,0,.619048,.932994,.118416,0,.634921,.932982,.112326,0,.650794,.932968,.106663,0,.666667,.93295,.101397,0,.68254,.932931,.0964993,0,.698413,.932908,.0919438,0,.714286,.932883,.0877057,0,.730159,.932856,.0837623,0,.746032,.932827,.0800921,0,.761905,.932796,.0766754,0,.777778,.932762,.0734936,0,.793651,.932727,.0705296,0,.809524,.932689,.0677676,0,.825397,.93265,.0651929,0,.84127,.932609,.0627917,0,.857143,.932565,.0605515,0,.873016,.932521,.0584606,0,.888889,.932474,.0565082,0,.904762,.932427,.0546841,0,.920635,.932377,.0529793,0,.936508,.932326,.0513851,0,.952381,.932274,.0498936,0,.968254,.93222,.0484975,0,.984127,.932164,.0471899,0,1],n=new Float32Array(e),i=new Float32Array(t);r.UniformsLib.LTC_FLOAT_1=new r.DataTexture(n,64,64,r.RGBAFormat,r.FloatType,r.UVMapping,r.ClampToEdgeWrapping,r.ClampToEdgeWrapping,r.LinearFilter,r.NearestFilter,1),r.UniformsLib.LTC_FLOAT_2=new r.DataTexture(i,64,64,r.RGBAFormat,r.FloatType,r.UVMapping,r.ClampToEdgeWrapping,r.ClampToEdgeWrapping,r.LinearFilter,r.NearestFilter,1),r.UniformsLib.LTC_FLOAT_1.needsUpdate=!0,r.UniformsLib.LTC_FLOAT_2.needsUpdate=!0;const s=new Uint16Array(e.length);e.forEach((function(e,t){s[t]=r.DataUtils.toHalfFloat(e)}));const o=new Uint16Array(t.length);t.forEach((function(e,t){o[t]=r.DataUtils.toHalfFloat(e)})),r.UniformsLib.LTC_HALF_1=new r.DataTexture(s,64,64,r.RGBAFormat,r.HalfFloatType,r.UVMapping,r.ClampToEdgeWrapping,r.ClampToEdgeWrapping,r.LinearFilter,r.NearestFilter,1),r.UniformsLib.LTC_HALF_2=new r.DataTexture(o,64,64,r.RGBAFormat,r.HalfFloatType,r.UVMapping,r.ClampToEdgeWrapping,r.ClampToEdgeWrapping,r.LinearFilter,r.NearestFilter,1),r.UniformsLib.LTC_HALF_1.needsUpdate=!0,r.UniformsLib.LTC_HALF_2.needsUpdate=!0}}},122:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Line2:()=>E});var r=n(9437),i=n(1643),s=n(5088);const o=new r.Vector4,a=new r.Vector3,c=new r.Vector3,l=new r.Vector4,u=new r.Vector4,h=new r.Vector4,d=new r.Vector3,p=new r.Matrix4,f=new r.Line3,m=new r.Vector3,g=new r.Box3,A=new r.Sphere,y=new r.Vector4;let _,v;function b(e,t,n){return y.set(0,0,-t,1).applyMatrix4(e.projectionMatrix),y.multiplyScalar(1/y.w),y.x=v/n.width,y.y=v/n.height,y.applyMatrix4(e.projectionMatrixInverse),y.multiplyScalar(1/y.w),Math.abs(Math.max(y.x,y.y))}class x extends r.Mesh{constructor(e=new i.n,t=new s.LineMaterial({color:16777215*Math.random()})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,i=new Float32Array(2*t.count);for(let e=0,r=0,s=t.count;e<s;e++,r+=2)a.fromBufferAttribute(t,e),c.fromBufferAttribute(n,e),i[r]=0===r?0:i[r-1],i[r+1]=i[r]+a.distanceTo(c);const s=new r.InstancedInterleavedBuffer(i,2,1);return e.setAttribute("instanceDistanceStart",new r.InterleavedBufferAttribute(s,1,0)),e.setAttribute("instanceDistanceEnd",new r.InterleavedBufferAttribute(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,i=e.camera;null!==i||n||console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=void 0!==e.params.Line2&&e.params.Line2.threshold||0;_=e.ray;const o=this.matrixWorld,a=this.geometry,c=this.material;let y,x;if(v=c.linewidth+s,null===a.boundingSphere&&a.computeBoundingSphere(),A.copy(a.boundingSphere).applyMatrix4(o),n)y=.5*v;else{y=b(i,Math.max(i.near,A.distanceToPoint(_.origin)),c.resolution)}if(A.radius+=y,!1!==_.intersectsSphere(A)){if(null===a.boundingBox&&a.computeBoundingBox(),g.copy(a.boundingBox).applyMatrix4(o),n)x=.5*v;else{x=b(i,Math.max(i.near,g.distanceToPoint(_.origin)),c.resolution)}g.expandByScalar(x),!1!==_.intersectsBox(g)&&(n?function(e,t){const n=e.matrixWorld,i=e.geometry,s=i.attributes.instanceStart,o=i.attributes.instanceEnd;for(let a=0,c=Math.min(i.instanceCount,s.count);a<c;a++){f.start.fromBufferAttribute(s,a),f.end.fromBufferAttribute(o,a),f.applyMatrix4(n);const i=new r.Vector3,c=new r.Vector3;_.distanceSqToSegment(f.start,f.end,c,i),c.distanceTo(i)<.5*v&&t.push({point:c,pointOnLine:i,distance:_.origin.distanceTo(c),object:e,face:null,faceIndex:a,uv:null,uv1:null})}}(this,t):function(e,t,n){const i=t.projectionMatrix,s=e.material.resolution,o=e.matrixWorld,a=e.geometry,c=a.attributes.instanceStart,g=a.attributes.instanceEnd,A=Math.min(a.instanceCount,c.count),y=-t.near;_.at(1,h),h.w=1,h.applyMatrix4(t.matrixWorldInverse),h.applyMatrix4(i),h.multiplyScalar(1/h.w),h.x*=s.x/2,h.y*=s.y/2,h.z=0,d.copy(h),p.multiplyMatrices(t.matrixWorldInverse,o);for(let t=0,a=A;t<a;t++){if(l.fromBufferAttribute(c,t),u.fromBufferAttribute(g,t),l.w=1,u.w=1,l.applyMatrix4(p),u.applyMatrix4(p),l.z>y&&u.z>y)continue;if(l.z>y){const e=l.z-u.z,t=(l.z-y)/e;l.lerp(u,t)}else if(u.z>y){const e=u.z-l.z,t=(u.z-y)/e;u.lerp(l,t)}l.applyMatrix4(i),u.applyMatrix4(i),l.multiplyScalar(1/l.w),u.multiplyScalar(1/u.w),l.x*=s.x/2,l.y*=s.y/2,u.x*=s.x/2,u.y*=s.y/2,f.start.copy(l),f.start.z=0,f.end.copy(u),f.end.z=0;const a=f.closestPointToPointParameter(d,!0);f.at(a,m);const h=r.MathUtils.lerp(l.z,u.z,a),A=h>=-1&&h<=1,b=d.distanceTo(m)<.5*v;if(A&&b){f.start.fromBufferAttribute(c,t),f.end.fromBufferAttribute(g,t),f.start.applyMatrix4(o),f.end.applyMatrix4(o);const i=new r.Vector3,s=new r.Vector3;_.distanceSqToSegment(f.start,f.end,s,i),n.push({point:s,pointOnLine:i,distance:_.origin.distanceTo(s),object:e,face:null,faceIndex:t,uv:null,uv1:null})}}}(this,i,t))}}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(o),this.material.uniforms.resolution.value.set(o.z,o.w))}}var w=n(1949);class E extends x{constructor(e=new w.LineGeometry,t=new s.LineMaterial({color:16777215*Math.random()})){super(e,t),this.isLine2=!0,this.type="Line2"}}},1949:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LineGeometry:()=>i});var r=n(1643);class i extends r.n{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}},5088:(e,t,n)=>{"use strict";n.r(t),n.d(t,{LineMaterial:()=>i});var r=n(9437);r.UniformsLib.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new r.Vector2(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}},r.ShaderLib.line={uniforms:r.UniformsUtils.merge([r.UniformsLib.common,r.UniformsLib.fog,r.UniformsLib.line]),vertexShader:"\n\t\t#include <common>\n\t\t#include <color_pars_vertex>\n\t\t#include <fog_pars_vertex>\n\t\t#include <logdepthbuf_pars_vertex>\n\t\t#include <clipping_planes_pars_vertex>\n\n\t\tuniform float linewidth;\n\t\tuniform vec2 resolution;\n\n\t\tattribute vec3 instanceStart;\n\t\tattribute vec3 instanceEnd;\n\n\t\tattribute vec3 instanceColorStart;\n\t\tattribute vec3 instanceColorEnd;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashScale;\n\t\t\tattribute float instanceDistanceStart;\n\t\t\tattribute float instanceDistanceEnd;\n\t\t\tvarying float vLineDistance;\n\n\t\t#endif\n\n\t\tvoid trimSegment( const in vec4 start, inout vec4 end ) {\n\n\t\t\t// trim end segment so it terminates between the camera plane and the near plane\n\n\t\t\t// conservative estimate of the near plane\n\t\t\tfloat a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column\n\t\t\tfloat b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column\n\t\t\tfloat nearEstimate = - 0.5 * b / a;\n\n\t\t\tfloat alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n\n\t\t\tend.xyz = mix( start.xyz, end.xyz, alpha );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#ifdef USE_COLOR\n\n\t\t\t\tvColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n\n\t\t\t#endif\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\tfloat aspect = resolution.x / resolution.y;\n\n\t\t\t// camera space\n\t\t\tvec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n\t\t\tvec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tworldStart = start.xyz;\n\t\t\t\tworldEnd = end.xyz;\n\n\t\t\t#else\n\n\t\t\t\tvUv = uv;\n\n\t\t\t#endif\n\n\t\t\t// special case for perspective projection, and segments that terminate either in, or behind, the camera plane\n\t\t\t// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space\n\t\t\t// but we need to perform ndc-space calculations in the shader, so we must address this issue directly\n\t\t\t// perhaps there is a more elegant solution -- WestLangley\n\n\t\t\tbool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column\n\n\t\t\tif ( perspective ) {\n\n\t\t\t\tif ( start.z < 0.0 && end.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( start, end );\n\n\t\t\t\t} else if ( end.z < 0.0 && start.z >= 0.0 ) {\n\n\t\t\t\t\ttrimSegment( end, start );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// clip space\n\t\t\tvec4 clipStart = projectionMatrix * start;\n\t\t\tvec4 clipEnd = projectionMatrix * end;\n\n\t\t\t// ndc space\n\t\t\tvec3 ndcStart = clipStart.xyz / clipStart.w;\n\t\t\tvec3 ndcEnd = clipEnd.xyz / clipEnd.w;\n\n\t\t\t// direction\n\t\t\tvec2 dir = ndcEnd.xy - ndcStart.xy;\n\n\t\t\t// account for clip-space aspect ratio\n\t\t\tdir.x *= aspect;\n\t\t\tdir = normalize( dir );\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\tvec3 worldDir = normalize( end.xyz - start.xyz );\n\t\t\t\tvec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );\n\t\t\t\tvec3 worldUp = normalize( cross( worldDir, tmpFwd ) );\n\t\t\t\tvec3 worldFwd = cross( worldDir, worldUp );\n\t\t\t\tworldPos = position.y < 0.5 ? start: end;\n\n\t\t\t\t// height offset\n\t\t\t\tfloat hw = linewidth * 0.5;\n\t\t\t\tworldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;\n\n\t\t\t\t// don't extend the line if we're rendering dashes because we\n\t\t\t\t// won't be rendering the endcaps\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t// cap extension\n\t\t\t\t\tworldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;\n\n\t\t\t\t\t// add width to the box\n\t\t\t\t\tworldPos.xyz += worldFwd * hw;\n\n\t\t\t\t\t// endcaps\n\t\t\t\t\tif ( position.y > 1.0 || position.y < 0.0 ) {\n\n\t\t\t\t\t\tworldPos.xyz -= worldFwd * 2.0 * hw;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t\t// project the worldpos\n\t\t\t\tvec4 clip = projectionMatrix * worldPos;\n\n\t\t\t\t// shift the depth of the projected points so the line\n\t\t\t\t// segments overlap neatly\n\t\t\t\tvec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;\n\t\t\t\tclip.z = clipPose.z * clip.w;\n\n\t\t\t#else\n\n\t\t\t\tvec2 offset = vec2( dir.y, - dir.x );\n\t\t\t\t// undo aspect ratio adjustment\n\t\t\t\tdir.x /= aspect;\n\t\t\t\toffset.x /= aspect;\n\n\t\t\t\t// sign flip\n\t\t\t\tif ( position.x < 0.0 ) offset *= - 1.0;\n\n\t\t\t\t// endcaps\n\t\t\t\tif ( position.y < 0.0 ) {\n\n\t\t\t\t\toffset += - dir;\n\n\t\t\t\t} else if ( position.y > 1.0 ) {\n\n\t\t\t\t\toffset += dir;\n\n\t\t\t\t}\n\n\t\t\t\t// adjust for linewidth\n\t\t\t\toffset *= linewidth;\n\n\t\t\t\t// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...\n\t\t\t\toffset /= resolution.y;\n\n\t\t\t\t// select end\n\t\t\t\tvec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n\n\t\t\t\t// back to clip space\n\t\t\t\toffset *= clip.w;\n\n\t\t\t\tclip.xy += offset;\n\n\t\t\t#endif\n\n\t\t\tgl_Position = clip;\n\n\t\t\tvec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation\n\n\t\t\t#include <logdepthbuf_vertex>\n\t\t\t#include <clipping_planes_vertex>\n\t\t\t#include <fog_vertex>\n\n\t\t}\n\t\t",fragmentShader:"\n\t\tuniform vec3 diffuse;\n\t\tuniform float opacity;\n\t\tuniform float linewidth;\n\n\t\t#ifdef USE_DASH\n\n\t\t\tuniform float dashOffset;\n\t\t\tuniform float dashSize;\n\t\t\tuniform float gapSize;\n\n\t\t#endif\n\n\t\tvarying float vLineDistance;\n\n\t\t#ifdef WORLD_UNITS\n\n\t\t\tvarying vec4 worldPos;\n\t\t\tvarying vec3 worldStart;\n\t\t\tvarying vec3 worldEnd;\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tvarying vec2 vUv;\n\n\t\t\t#endif\n\n\t\t#else\n\n\t\t\tvarying vec2 vUv;\n\n\t\t#endif\n\n\t\t#include <common>\n\t\t#include <color_pars_fragment>\n\t\t#include <fog_pars_fragment>\n\t\t#include <logdepthbuf_pars_fragment>\n\t\t#include <clipping_planes_pars_fragment>\n\n\t\tvec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {\n\n\t\t\tfloat mua;\n\t\t\tfloat mub;\n\n\t\t\tvec3 p13 = p1 - p3;\n\t\t\tvec3 p43 = p4 - p3;\n\n\t\t\tvec3 p21 = p2 - p1;\n\n\t\t\tfloat d1343 = dot( p13, p43 );\n\t\t\tfloat d4321 = dot( p43, p21 );\n\t\t\tfloat d1321 = dot( p13, p21 );\n\t\t\tfloat d4343 = dot( p43, p43 );\n\t\t\tfloat d2121 = dot( p21, p21 );\n\n\t\t\tfloat denom = d2121 * d4343 - d4321 * d4321;\n\n\t\t\tfloat numer = d1343 * d4321 - d1321 * d4343;\n\n\t\t\tmua = numer / denom;\n\t\t\tmua = clamp( mua, 0.0, 1.0 );\n\t\t\tmub = ( d1343 + d4321 * ( mua ) ) / d4343;\n\t\t\tmub = clamp( mub, 0.0, 1.0 );\n\n\t\t\treturn vec2( mua, mub );\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\t#include <clipping_planes_fragment>\n\n\t\t\t#ifdef USE_DASH\n\n\t\t\t\tif ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps\n\n\t\t\t\tif ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX\n\n\t\t\t#endif\n\n\t\t\tfloat alpha = opacity;\n\n\t\t\t#ifdef WORLD_UNITS\n\n\t\t\t\t// Find the closest points on the view ray and the line segment\n\t\t\t\tvec3 rayEnd = normalize( worldPos.xyz ) * 1e5;\n\t\t\t\tvec3 lineDir = worldEnd - worldStart;\n\t\t\t\tvec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );\n\n\t\t\t\tvec3 p1 = worldStart + lineDir * params.x;\n\t\t\t\tvec3 p2 = rayEnd * params.y;\n\t\t\t\tvec3 delta = p1 - p2;\n\t\t\t\tfloat len = length( delta );\n\t\t\t\tfloat norm = len / linewidth;\n\n\t\t\t\t#ifndef USE_DASH\n\n\t\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t\tfloat dnorm = fwidth( norm );\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );\n\n\t\t\t\t\t#else\n\n\t\t\t\t\t\tif ( norm > 0.5 ) {\n\n\t\t\t\t\t\t\tdiscard;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t#endif\n\n\t\t\t\t#endif\n\n\t\t\t#else\n\n\t\t\t\t#ifdef USE_ALPHA_TO_COVERAGE\n\n\t\t\t\t\t// artifacts appear on some hardware if a derivative is taken within a conditional\n\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\tfloat len2 = a * a + b * b;\n\t\t\t\t\tfloat dlen = fwidth( len2 );\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\talpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );\n\n\t\t\t\t\t}\n\n\t\t\t\t#else\n\n\t\t\t\t\tif ( abs( vUv.y ) > 1.0 ) {\n\n\t\t\t\t\t\tfloat a = vUv.x;\n\t\t\t\t\t\tfloat b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;\n\t\t\t\t\t\tfloat len2 = a * a + b * b;\n\n\t\t\t\t\t\tif ( len2 > 1.0 ) discard;\n\n\t\t\t\t\t}\n\n\t\t\t\t#endif\n\n\t\t\t#endif\n\n\t\t\tvec4 diffuseColor = vec4( diffuse, alpha );\n\n\t\t\t#include <logdepthbuf_fragment>\n\t\t\t#include <color_fragment>\n\n\t\t\tgl_FragColor = vec4( diffuseColor.rgb, alpha );\n\n\t\t\t#include <tonemapping_fragment>\n\t\t\t#include <colorspace_fragment>\n\t\t\t#include <fog_fragment>\n\t\t\t#include <premultiplied_alpha_fragment>\n\n\t\t}\n\t\t"};class i extends r.ShaderMaterial{constructor(e){super({type:"LineMaterial",uniforms:r.UniformsUtils.clone(r.ShaderLib.line.uniforms),vertexShader:r.ShaderLib.line.vertexShader,fragmentShader:r.ShaderLib.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){!0===e?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){!0===e!==this.dashed&&(this.needsUpdate=!0),!0===e?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(!0===e!==this.alphaToCoverage&&(this.needsUpdate=!0),!0===e?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}},1643:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(9437);const i=new r.Box3,s=new r.Vector3;class o extends r.InstancedBufferGeometry{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";this.setIndex([0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5]),this.setAttribute("position",new r.Float32BufferAttribute([-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],3)),this.setAttribute("uv",new r.Float32BufferAttribute([-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return void 0!==t&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new r.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceStart",new r.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceEnd",new r.InterleavedBufferAttribute(n,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new r.InstancedInterleavedBuffer(t,6,1);return this.setAttribute("instanceColorStart",new r.InterleavedBufferAttribute(n,3,0)),this.setAttribute("instanceColorEnd",new r.InterleavedBufferAttribute(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new r.WireframeGeometry(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new r.Box3);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;void 0!==e&&void 0!==t&&(this.boundingBox.setFromBufferAttribute(e),i.setFromBufferAttribute(t),this.boundingBox.union(i))}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new r.Sphere),null===this.boundingBox&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(void 0!==e&&void 0!==t){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let i=0,o=e.count;i<o;i++)s.fromBufferAttribute(e,i),r=Math.max(r,n.distanceToSquared(s)),s.fromBufferAttribute(t,i),r=Math.max(r,n.distanceToSquared(s));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}},1728:(e,t,n)=>{"use strict";n.r(t),n.d(t,{DRACOLoader:()=>s});var r=n(9437);const i=new WeakMap;class s extends r.Loader{constructor(e){super(e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}}setDecoderPath(e){return this.decoderPath=e,this}setDecoderConfig(e){return this.decoderConfig=e,this}setWorkerLimit(e){return this.workerLimit=e,this}load(e,t,n,i){const s=new r.FileLoader(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,(e=>{this.parse(e,t,i)}),n,i)}parse(e,t,n=()=>{}){this.decodeDracoFile(e,t,null,null,r.SRGBColorSpace,n).catch(n)}decodeDracoFile(e,t,n,i,s=r.LinearSRGBColorSpace,o=()=>{}){const a={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:i||this.defaultAttributeTypes,useUniqueIDs:!!n,vertexColorSpace:s};return this.decodeGeometry(e,a).then(t).catch(o)}decodeGeometry(e,t){const n=JSON.stringify(t);if(i.has(e)){const t=i.get(e);if(t.key===n)return t.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}let r;const s=this.workerNextTaskID++,o=e.byteLength,a=this._getWorker(s,o).then((n=>(r=n,new Promise(((n,i)=>{r._callbacks[s]={resolve:n,reject:i},r.postMessage({type:"decode",id:s,taskConfig:t,buffer:e},[e])}))))).then((e=>this._createGeometry(e.geometry)));return a.catch((()=>!0)).then((()=>{r&&s&&this._releaseTask(r,s)})),i.set(e,{key:n,promise:a}),a}_createGeometry(e){const t=new r.BufferGeometry;e.index&&t.setIndex(new r.BufferAttribute(e.index.array,1));for(let n=0;n<e.attributes.length;n++){const i=e.attributes[n],s=i.name,o=i.array,a=i.itemSize,c=new r.BufferAttribute(o,a);"color"===s&&(this._assignVertexColorSpace(c,i.vertexColorSpace),c.normalized=o instanceof Float32Array==!1),t.setAttribute(s,c)}return t}_assignVertexColorSpace(e,t){if(t!==r.SRGBColorSpace)return;const n=new r.Color;for(let t=0,r=e.count;t<r;t++)n.fromBufferAttribute(e,t).convertSRGBToLinear(),e.setXYZ(t,n.r,n.g,n.b)}_loadLibrary(e,t){const n=new r.FileLoader(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),n.setWithCredentials(this.withCredentials),new Promise(((t,r)=>{n.load(e,t,void 0,r)}))}preload(){return this._initDecoder(),this}_initDecoder(){if(this.decoderPending)return this.decoderPending;const e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then((t=>{const n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);const r=o.toString(),i=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([i]))})),this.decoderPending}_getWorker(e,t){return this._initDecoder().then((()=>{if(this.workerPool.length<this.workerLimit){const e=new Worker(this.workerSourceURL);e._callbacks={},e._taskCosts={},e._taskLoad=0,e.postMessage({type:"init",decoderConfig:this.decoderConfig}),e.onmessage=function(t){const n=t.data;switch(n.type){case"decode":e._callbacks[n.id].resolve(n);break;case"error":e._callbacks[n.id].reject(n);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(e)}else this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));const n=this.workerPool[this.workerPool.length-1];return n._taskCosts[e]=t,n._taskLoad+=t,n}))}_releaseTask(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]}debug(){console.log("Task load: ",this.workerPool.map((e=>e._taskLoad)))}dispose(){for(let e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,""!==this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),this}}function o(){let e,t;function n(e,t,n,r,i,s){const o=s.num_components(),a=n.num_points()*o,c=a*i.BYTES_PER_ELEMENT,l=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),u=e._malloc(c);t.GetAttributeDataArrayForAllPoints(n,s,l,c,u);const h=new i(e.HEAPF32.buffer,u,a).slice();return e._free(u),{name:r,array:h,itemSize:o}}onmessage=function(r){const i=r.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":const r=i.buffer,s=i.taskConfig;t.then((e=>{const t=e.draco,o=new t.Decoder;try{const e=function(e,t,r,i){const s=i.attributeIDs,o=i.attributeTypes;let a,c;const l=t.GetEncodedGeometryType(r);if(l===e.TRIANGULAR_MESH)a=new e.Mesh,c=t.DecodeArrayToMesh(r,r.byteLength,a);else{if(l!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");a=new e.PointCloud,c=t.DecodeArrayToPointCloud(r,r.byteLength,a)}if(!c.ok()||0===a.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+c.error_msg());const u={index:null,attributes:[]};for(const r in s){const c=self[o[r]];let l,h;if(i.useUniqueIDs)h=s[r],l=t.GetAttributeByUniqueId(a,h);else{if(h=t.GetAttributeId(a,e[s[r]]),-1===h)continue;l=t.GetAttribute(a,h)}const d=n(e,t,a,r,c,l);"color"===r&&(d.vertexColorSpace=i.vertexColorSpace),u.attributes.push(d)}l===e.TRIANGULAR_MESH&&(u.index=function(e,t,n){const r=n.num_faces(),i=3*r,s=4*i,o=e._malloc(s);t.GetTrianglesUInt32Array(n,s,o);const a=new Uint32Array(e.HEAPF32.buffer,o,i).slice();return e._free(o),{array:a,itemSize:1}}(e,t,a));return e.destroy(a),u}(t,o,new Int8Array(r),s),a=e.attributes.map((e=>e.array.buffer));e.index&&a.push(e.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:e},a)}catch(e){console.error(e),self.postMessage({type:"error",id:i.id,error:e.message})}finally{t.destroy(o)}}))}}}},2933:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FBXLoader:()=>Q});var r=n(9437),i=Uint8Array,s=Uint16Array,o=Int32Array,a=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),c=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),u=function(e,t){for(var n=new s(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];var i=new o(n[30]);for(r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)i[a]=a-n[r]<<5|r;return{b:n,r:i}},h=u(a,2),d=h.b,p=h.r;d[28]=258,p[258]=28;for(var f=u(c,0),m=f.b,g=(f.r,new s(32768)),A=0;A<32768;++A){var y=(43690&A)>>1|(21845&A)<<1;y=(61680&(y=(52428&y)>>2|(13107&y)<<2))>>4|(3855&y)<<4,g[A]=((65280&y)>>8|(255&y)<<8)>>1}var _=function(e,t,n){for(var r=e.length,i=0,o=new s(t);i<r;++i)e[i]&&++o[e[i]-1];var a,c=new s(t);for(i=1;i<t;++i)c[i]=c[i-1]+o[i-1]<<1;if(n){a=new s(1<<t);var l=15-t;for(i=0;i<r;++i)if(e[i])for(var u=i<<4|e[i],h=t-e[i],d=c[e[i]-1]++<<h,p=d|(1<<h)-1;d<=p;++d)a[g[d]>>l]=u}else for(a=new s(r),i=0;i<r;++i)e[i]&&(a[i]=g[c[e[i]-1]++]>>15-e[i]);return a},v=new i(288);for(A=0;A<144;++A)v[A]=8;for(A=144;A<256;++A)v[A]=9;for(A=256;A<280;++A)v[A]=7;for(A=280;A<288;++A)v[A]=8;var b=new i(32);for(A=0;A<32;++A)b[A]=5;var x=_(v,9,1),w=_(b,5,1),E=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},T=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(7&t)&n},S=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(7&t)},M=function(e){return(e+7)/8|0},C=function(e,t,n){return(null==t||t<0)&&(t=0),(null==n||n>e.length)&&(n=e.length),new i(e.subarray(t,n))},I=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],R=function(e,t,n){var r=new Error(t||I[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,R),!n)throw r;return r},B=function(e,t,n,r){var s=e.length,o=r?r.length:0;if(!s||t.f&&!t.l)return n||new i(0);var u=!n,h=u||2!=t.i,p=t.i;u&&(n=new i(3*s));var f=function(e){var t=n.length;if(e>t){var r=new i(Math.max(2*t,e));r.set(n),n=r}},g=t.f||0,A=t.p||0,y=t.b||0,v=t.l,b=t.d,I=t.m,B=t.n,P=8*s;do{if(!v){g=T(e,A,1);var D=T(e,A+1,3);if(A+=3,!D){var O=e[(H=M(A)+4)-4]|e[H-3]<<8,L=H+O;if(L>s){p&&R(0);break}h&&f(y+O),n.set(e.subarray(H,L),y),t.b=y+=O,t.p=A=8*L,t.f=g;continue}if(1==D)v=x,b=w,I=9,B=5;else if(2==D){var N=T(e,A,31)+257,F=T(e,A+10,15)+4,U=N+T(e,A+5,31)+1;A+=14;for(var k=new i(U),z=new i(19),G=0;G<F;++G)z[l[G]]=T(e,A+3*G,7);A+=3*F;var j=E(z),V=(1<<j)-1,Q=_(z,j,1);for(G=0;G<U;){var H,W=Q[T(e,A,V)];if(A+=15&W,(H=W>>4)<16)k[G++]=H;else{var q=0,X=0;for(16==H?(X=3+T(e,A,3),A+=2,q=k[G-1]):17==H?(X=3+T(e,A,7),A+=3):18==H&&(X=11+T(e,A,127),A+=7);X--;)k[G++]=q}}var K=k.subarray(0,N),Y=k.subarray(N);I=E(K),B=E(Y),v=_(K,I,1),b=_(Y,B,1)}else R(1);if(A>P){p&&R(0);break}}h&&f(y+131072);for(var J=(1<<I)-1,$=(1<<B)-1,Z=A;;Z=A){var ee=(q=v[S(e,A)&J])>>4;if((A+=15&q)>P){p&&R(0);break}if(q||R(2),ee<256)n[y++]=ee;else{if(256==ee){Z=A,v=null;break}var te=ee-254;if(ee>264){var ne=a[G=ee-257];te=T(e,A,(1<<ne)-1)+d[G],A+=ne}var re=b[S(e,A)&$],ie=re>>4;re||R(3),A+=15&re;Y=m[ie];if(ie>3){ne=c[ie];Y+=S(e,A)&(1<<ne)-1,A+=ne}if(A>P){p&&R(0);break}h&&f(y+131072);var se=y+te;if(y<Y){var oe=o-Y,ae=Math.min(Y,se);for(oe+y<0&&R(3);y<ae;++y)n[y]=r[oe+y]}for(;y<se;++y)n[y]=n[y-Y]}}t.l=v,t.p=Z,t.b=y,t.f=g,v&&(g=1,t.m=I,t.d=b,t.n=B)}while(!g);return y!=n.length&&u?C(n,0,y):n.subarray(0,y)},P=new i(0),D=function(e,t){return(8!=(15&e[0])||e[0]>>4>7||(e[0]<<8|e[1])%31)&&R(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&R(6,"invalid zlib data: "+(32&e[1]?"need":"unexpected")+" dictionary"),2+(e[1]>>3&4)};function O(e,t){return B(e.subarray(D(e,t&&t.dictionary),-4),{i:2},t&&t.out,t&&t.dictionary)}var L="undefined"!=typeof TextDecoder&&new TextDecoder;try{L.decode(P,{stream:!0})}catch(e){}"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function N(e,t,n){const r=n.length-e-1;if(t>=n[r])return r-1;if(t<=n[e])return e;let i=e,s=r,o=Math.floor((i+s)/2);for(;t<n[o]||t>=n[o+1];)t<n[o]?s=o:i=o,o=Math.floor((i+s)/2);return o}function F(e,t,n,r){const i=[],s=[],o=[];i[0]=1;for(let a=1;a<=n;++a){s[a]=t-r[e+1-a],o[a]=r[e+a]-t;let n=0;for(let e=0;e<a;++e){const t=o[e+1],r=s[a-e],c=i[e]/(t+r);i[e]=n+t*c,n=r*c}i[a]=n}return i}function U(e,t){let n=1;for(let t=2;t<=e;++t)n*=t;let r=1;for(let e=2;e<=t;++e)r*=e;for(let n=2;n<=e-t;++n)r*=n;return n/r}function k(e,t,n,i,s){const o=function(e,t,n,i,s){const o=s<e?s:e,a=[],c=N(e,i,t),l=function(e,t,n,r,i){const s=[];for(let e=0;e<=n;++e)s[e]=0;const o=[];for(let e=0;e<=r;++e)o[e]=s.slice(0);const a=[];for(let e=0;e<=n;++e)a[e]=s.slice(0);a[0][0]=1;const c=s.slice(0),l=s.slice(0);for(let r=1;r<=n;++r){c[r]=t-i[e+1-r],l[r]=i[e+r]-t;let n=0;for(let e=0;e<r;++e){const t=l[e+1],i=c[r-e];a[r][e]=t+i;const s=a[e][r-1]/a[r][e];a[e][r]=n+t*s,n=i*s}a[r][r]=n}for(let e=0;e<=n;++e)o[0][e]=a[e][n];for(let e=0;e<=n;++e){let t=0,i=1;const c=[];for(let e=0;e<=n;++e)c[e]=s.slice(0);c[0][0]=1;for(let s=1;s<=r;++s){let r=0;const l=e-s,u=n-s;e>=s&&(c[i][0]=c[t][0]/a[u+1][l],r=c[i][0]*a[l][u]);const h=e-1<=u?s-1:n-e;for(let e=l>=-1?1:-l;e<=h;++e)c[i][e]=(c[t][e]-c[t][e-1])/a[u+1][l+e],r+=c[i][e]*a[l+e][u];e<=u&&(c[i][s]=-c[t][s-1]/a[u+1][e],r+=c[i][s]*a[e][u]),o[s][e]=r;const d=t;t=i,i=d}}let u=n;for(let e=1;e<=r;++e){for(let t=0;t<=n;++t)o[e][t]*=u;u*=n-e}return o}(c,i,e,o,t),u=[];for(let e=0;e<n.length;++e){const t=n[e].clone(),r=t.w;t.x*=r,t.y*=r,t.z*=r,u[e]=t}for(let t=0;t<=o;++t){const n=u[c-e].clone().multiplyScalar(l[t][0]);for(let r=1;r<=e;++r)n.add(u[c-e+r].clone().multiplyScalar(l[t][r]));a[t]=n}for(let e=o+1;e<=s+1;++e)a[e]=new r.Vector4(0,0,0);return a}(e,t,n,i,s);return function(e){const t=e.length,n=[],i=[];for(let s=0;s<t;++s){const t=e[s];n[s]=new r.Vector3(t.x,t.y,t.z),i[s]=t.w}const s=[];for(let e=0;e<t;++e){const t=n[e].clone();for(let n=1;n<=e;++n)t.sub(s[e-n].clone().multiplyScalar(U(e,n)*i[n]));s[e]=t.divideScalar(i[0])}return s}(o)}class z extends r.Curve{constructor(e,t,n,i,s){super(),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=s||this.knots.length-1;for(let e=0;e<n.length;++e){const t=n[e];this.controlPoints[e]=new r.Vector4(t.x,t.y,t.z,t.w)}}getPoint(e,t=new r.Vector3){const n=t,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),s=function(e,t,n,i){const s=N(e,i,t),o=F(s,i,e,t),a=new r.Vector4(0,0,0,0);for(let t=0;t<=e;++t){const r=n[s-e+t],i=o[t],c=r.w*i;a.x+=r.x*c,a.y+=r.y*c,a.z+=r.z*c,a.w+=r.w*i}return a}(this.degree,this.knots,this.controlPoints,i);return 1!==s.w&&s.divideScalar(s.w),n.set(s.x,s.y,s.z)}getTangent(e,t=new r.Vector3){const n=t,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),s=k(this.degree,this.knots,this.controlPoints,i,1);return n.copy(s[1]).normalize(),n}}let G,j,V;class Q extends r.Loader{constructor(e){super(e)}load(e,t,n,i){const s=this,o=""===s.path?r.LoaderUtils.extractUrlBase(e):s.path,a=new r.FileLoader(this.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,(function(n){try{t(s.parse(n,o))}catch(t){i?i(t):console.error(t),s.manager.itemError(e)}}),n,i)}parse(e,t){if(function(e){const t="Kaydara FBX Binary  \0";return e.byteLength>=t.length&&t===ae(e,0,t.length)}(e))G=(new K).parse(e);else{const t=ae(e);if(!function(e){const t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"];let n=0;function r(t){const r=e[t-1];return e=e.slice(n+t),n++,r}for(let e=0;e<t.length;++e){if(r(1)===t[e])return!1}return!0}(t))throw new Error("THREE.FBXLoader: Unknown format.");if($(t)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+$(t));G=(new X).parse(t)}const n=new r.TextureLoader(this.manager).setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);return new H(n,this.manager).parse(G)}}class H{constructor(e,t){this.textureLoader=e,this.manager=t}parse(){j=this.parseConnections();const e=this.parseImages(),t=this.parseTextures(e),n=this.parseMaterials(t),r=this.parseDeformers(),i=(new W).parse(r);return this.parseScene(r,i,n),V}parseConnections(){const e=new Map;if("Connections"in G){G.Connections.connections.forEach((function(t){const n=t[0],r=t[1],i=t[2];e.has(n)||e.set(n,{parents:[],children:[]});const s={ID:r,relationship:i};e.get(n).parents.push(s),e.has(r)||e.set(r,{parents:[],children:[]});const o={ID:n,relationship:i};e.get(r).children.push(o)}))}return e}parseImages(){const e={},t={};if("Video"in G.Objects){const n=G.Objects.Video;for(const r in n){const i=n[r];if(e[parseInt(r)]=i.RelativeFilename||i.Filename,"Content"in i){const e=i.Content instanceof ArrayBuffer&&i.Content.byteLength>0,s="string"==typeof i.Content&&""!==i.Content;if(e||s){const e=this.parseImage(n[r]);t[i.RelativeFilename||i.Filename]=e}}}}for(const n in e){const r=e[n];void 0!==t[r]?e[n]=t[r]:e[n]=e[n].split("\\").pop()}return e}parseImage(e){const t=e.Content,n=e.RelativeFilename||e.Filename,r=n.slice(n.lastIndexOf(".")+1).toLowerCase();let i;switch(r){case"bmp":i="image/bmp";break;case"jpg":case"jpeg":i="image/jpeg";break;case"png":i="image/png";break;case"tif":i="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),i="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+r+'" is not supported.')}if("string"==typeof t)return"data:"+i+";base64,"+t;{const e=new Uint8Array(t);return window.URL.createObjectURL(new Blob([e],{type:i}))}}parseTextures(e){const t=new Map;if("Texture"in G.Objects){const n=G.Objects.Texture;for(const r in n){const i=this.parseTexture(n[r],e);t.set(parseInt(r),i)}}return t}parseTexture(e,t){const n=this.loadTexture(e,t);n.ID=e.id,n.name=e.attrName;const i=e.WrapModeU,s=e.WrapModeV,o=void 0!==i?i.value:0,a=void 0!==s?s.value:0;if(n.wrapS=0===o?r.RepeatWrapping:r.ClampToEdgeWrapping,n.wrapT=0===a?r.RepeatWrapping:r.ClampToEdgeWrapping,"Scaling"in e){const t=e.Scaling.value;n.repeat.x=t[0],n.repeat.y=t[1]}if("Translation"in e){const t=e.Translation.value;n.offset.x=t[0],n.offset.y=t[1]}return n}loadTexture(e,t){let n;const i=this.textureLoader.path,s=j.get(e.id).children;let o;void 0!==s&&s.length>0&&void 0!==t[s[0].ID]&&(n=t[s[0].ID],0!==n.indexOf("blob:")&&0!==n.indexOf("data:")||this.textureLoader.setPath(void 0));const a=e.FileName.slice(-3).toLowerCase();if("tga"===a){const t=this.manager.getHandler(".tga");null===t?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new r.Texture):(t.setPath(this.textureLoader.path),o=t.load(n))}else if("dds"===a){const t=this.manager.getHandler(".dds");null===t?(console.warn("FBXLoader: DDS loader not found, creating placeholder texture for",e.RelativeFilename),o=new r.Texture):(t.setPath(this.textureLoader.path),o=t.load(n))}else"psd"===a?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new r.Texture):o=this.textureLoader.load(n);return this.textureLoader.setPath(i),o}parseMaterials(e){const t=new Map;if("Material"in G.Objects){const n=G.Objects.Material;for(const r in n){const i=this.parseMaterial(n[r],e);null!==i&&t.set(parseInt(r),i)}}return t}parseMaterial(e,t){const n=e.id,i=e.attrName;let s=e.ShadingModel;if("object"==typeof s&&(s=s.value),!j.has(n))return null;const o=this.parseParameters(e,t,n);let a;switch(s.toLowerCase()){case"phong":a=new r.MeshPhongMaterial;break;case"lambert":a=new r.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',s),a=new r.MeshPhongMaterial}return a.setValues(o),a.name=i,a}parseParameters(e,t,n){const i={};e.BumpFactor&&(i.bumpScale=e.BumpFactor.value),e.Diffuse?i.color=(new r.Color).fromArray(e.Diffuse.value).convertSRGBToLinear():!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(i.color=(new r.Color).fromArray(e.DiffuseColor.value).convertSRGBToLinear()),e.DisplacementFactor&&(i.displacementScale=e.DisplacementFactor.value),e.Emissive?i.emissive=(new r.Color).fromArray(e.Emissive.value).convertSRGBToLinear():!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(i.emissive=(new r.Color).fromArray(e.EmissiveColor.value).convertSRGBToLinear()),e.EmissiveFactor&&(i.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(i.opacity=parseFloat(e.Opacity.value)),i.opacity<1&&(i.transparent=!0),e.ReflectionFactor&&(i.reflectivity=e.ReflectionFactor.value),e.Shininess&&(i.shininess=e.Shininess.value),e.Specular?i.specular=(new r.Color).fromArray(e.Specular.value).convertSRGBToLinear():e.SpecularColor&&"Color"===e.SpecularColor.type&&(i.specular=(new r.Color).fromArray(e.SpecularColor.value).convertSRGBToLinear());const s=this;return j.get(n).children.forEach((function(e){const n=e.relationship;switch(n){case"Bump":i.bumpMap=s.getTexture(t,e.ID);break;case"Maya|TEX_ao_map":i.aoMap=s.getTexture(t,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":i.map=s.getTexture(t,e.ID),void 0!==i.map&&(i.map.colorSpace=r.SRGBColorSpace);break;case"DisplacementColor":i.displacementMap=s.getTexture(t,e.ID);break;case"EmissiveColor":i.emissiveMap=s.getTexture(t,e.ID),void 0!==i.emissiveMap&&(i.emissiveMap.colorSpace=r.SRGBColorSpace);break;case"NormalMap":case"Maya|TEX_normal_map":i.normalMap=s.getTexture(t,e.ID);break;case"ReflectionColor":i.envMap=s.getTexture(t,e.ID),void 0!==i.envMap&&(i.envMap.mapping=r.EquirectangularReflectionMapping,i.envMap.colorSpace=r.SRGBColorSpace);break;case"SpecularColor":i.specularMap=s.getTexture(t,e.ID),void 0!==i.specularMap&&(i.specularMap.colorSpace=r.SRGBColorSpace);break;case"TransparentColor":case"TransparencyFactor":i.alphaMap=s.getTexture(t,e.ID),i.transparent=!0;break;default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",n)}})),i}getTexture(e,t){return"LayeredTexture"in G.Objects&&t in G.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),t=j.get(t).children[0].ID),e.get(t)}parseDeformers(){const e={},t={};if("Deformer"in G.Objects){const n=G.Objects.Deformer;for(const r in n){const i=n[r],s=j.get(parseInt(r));if("Skin"===i.attrType){const t=this.parseSkeleton(s,n);t.ID=r,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),t.geometryID=s.parents[0].ID,e[r]=t}else if("BlendShape"===i.attrType){const e={id:r};e.rawTargets=this.parseMorphTargets(s,n),e.id=r,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),t[r]=e}}}return{skeletons:e,morphTargets:t}}parseSkeleton(e,t){const n=[];return e.children.forEach((function(e){const i=t[e.ID];if("Cluster"!==i.attrType)return;const s={ID:e.ID,indices:[],weights:[],transformLink:(new r.Matrix4).fromArray(i.TransformLink.a)};"Indexes"in i&&(s.indices=i.Indexes.a,s.weights=i.Weights.a),n.push(s)})),{rawBones:n,bones:[]}}parseMorphTargets(e,t){const n=[];for(let r=0;r<e.children.length;r++){const i=e.children[r],s=t[i.ID],o={name:s.attrName,initialWeight:s.DeformPercent,id:s.id,fullWeights:s.FullWeights.a};if("BlendShapeChannel"!==s.attrType)return;o.geoID=j.get(parseInt(i.ID)).children.filter((function(e){return void 0===e.relationship}))[0].ID,n.push(o)}return n}parseScene(e,t,n){V=new r.Group;const i=this.parseModels(e.skeletons,t,n),s=G.Objects.Model,o=this;i.forEach((function(e){const t=s[e.ID];o.setLookAtProperties(e,t);j.get(e.ID).parents.forEach((function(t){const n=i.get(t.ID);void 0!==n&&n.add(e)})),null===e.parent&&V.add(e)})),this.bindSkeleton(e.skeletons,t,i),this.addGlobalSceneSettings(),V.traverse((function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrix=e.parent.matrix,e.userData.transformData.parentMatrixWorld=e.parent.matrixWorld);const t=ie(e.userData.transformData);e.applyMatrix4(t),e.updateWorldMatrix()}}));const a=(new q).parse();1===V.children.length&&V.children[0].isGroup&&(V.children[0].animations=a,V=V.children[0]),V.animations=a}parseModels(e,t,n){const i=new Map,s=G.Objects.Model;for(const o in s){const a=parseInt(o),c=s[o],l=j.get(a);let u=this.buildSkeleton(l,e,a,c.attrName);if(!u){switch(c.attrType){case"Camera":u=this.createCamera(l);break;case"Light":u=this.createLight(l);break;case"Mesh":u=this.createMesh(l,t,n);break;case"NurbsCurve":u=this.createCurve(l,t);break;case"LimbNode":case"Root":u=new r.Bone;break;default:u=new r.Group}u.name=c.attrName?r.PropertyBinding.sanitizeNodeName(c.attrName):"",u.userData.originalName=c.attrName,u.ID=a}this.getTransformData(u,c),i.set(a,u)}return i}buildSkeleton(e,t,n,i){let s=null;return e.parents.forEach((function(e){for(const o in t){const a=t[o];a.rawBones.forEach((function(t,o){if(t.ID===e.ID){const e=s;s=new r.Bone,s.matrixWorld.copy(t.transformLink),s.name=i?r.PropertyBinding.sanitizeNodeName(i):"",s.userData.originalName=i,s.ID=n,a.bones[o]=s,null!==e&&s.add(e)}}))}})),s}createCamera(e){let t,n;if(e.children.forEach((function(e){const t=G.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new r.Object3D;else{let e=0;void 0!==n.CameraProjectionType&&1===n.CameraProjectionType.value&&(e=1);let i=1;void 0!==n.NearPlane&&(i=n.NearPlane.value/1e3);let s=1e3;void 0!==n.FarPlane&&(s=n.FarPlane.value/1e3);let o=window.innerWidth,a=window.innerHeight;void 0!==n.AspectWidth&&void 0!==n.AspectHeight&&(o=n.AspectWidth.value,a=n.AspectHeight.value);const c=o/a;let l=45;void 0!==n.FieldOfView&&(l=n.FieldOfView.value);const u=n.FocalLength?n.FocalLength.value:null;switch(e){case 0:t=new r.PerspectiveCamera(l,c,i,s),null!==u&&t.setFocalLength(u);break;case 1:t=new r.OrthographicCamera(-o/2,o/2,a/2,-a/2,i,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+e+"."),t=new r.Object3D}}return t}createLight(e){let t,n;if(e.children.forEach((function(e){const t=G.Objects.NodeAttribute[e.ID];void 0!==t&&(n=t)})),void 0===n)t=new r.Object3D;else{let e;e=void 0===n.LightType?0:n.LightType.value;let i=16777215;void 0!==n.Color&&(i=(new r.Color).fromArray(n.Color.value).convertSRGBToLinear());let s=void 0===n.Intensity?1:n.Intensity.value/100;void 0!==n.CastLightOnObject&&0===n.CastLightOnObject.value&&(s=0);let o=0;void 0!==n.FarAttenuationEnd&&(o=void 0!==n.EnableFarAttenuation&&0===n.EnableFarAttenuation.value?0:n.FarAttenuationEnd.value);const a=1;switch(e){case 0:t=new r.PointLight(i,s,o,a);break;case 1:t=new r.DirectionalLight(i,s);break;case 2:let e=Math.PI/3;void 0!==n.InnerAngle&&(e=r.MathUtils.degToRad(n.InnerAngle.value));let c=0;void 0!==n.OuterAngle&&(c=r.MathUtils.degToRad(n.OuterAngle.value),c=Math.max(c,1)),t=new r.SpotLight(i,s,o,e,c,a);break;default:console.warn("THREE.FBXLoader: Unknown light type "+n.LightType.value+", defaulting to a PointLight."),t=new r.PointLight(i,s)}void 0!==n.CastShadows&&1===n.CastShadows.value&&(t.castShadow=!0)}return t}createMesh(e,t,n){let i,s=null,o=null;const a=[];return e.children.forEach((function(e){t.has(e.ID)&&(s=t.get(e.ID)),n.has(e.ID)&&a.push(n.get(e.ID))})),a.length>1?o=a:a.length>0?o=a[0]:(o=new r.MeshPhongMaterial({name:r.Loader.DEFAULT_MATERIAL_NAME,color:13421772}),a.push(o)),"color"in s.attributes&&a.forEach((function(e){e.vertexColors=!0})),s.FBX_Deformer?(i=new r.SkinnedMesh(s,o),i.normalizeSkinWeights()):i=new r.Mesh(s,o),i}createCurve(e,t){const n=e.children.reduce((function(e,n){return t.has(n.ID)&&(e=t.get(n.ID)),e}),null),i=new r.LineBasicMaterial({name:r.Loader.DEFAULT_MATERIAL_NAME,color:3342591,linewidth:1});return new r.Line(n,i)}getTransformData(e,t){const n={};"InheritType"in t&&(n.inheritType=parseInt(t.InheritType.value)),n.eulerOrder="RotationOrder"in t?se(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(n.translation=t.Lcl_Translation.value),"PreRotation"in t&&(n.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(n.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(n.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(n.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(n.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(n.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(n.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(n.rotationPivot=t.RotationPivot.value),e.userData.transformData=n}setLookAtProperties(e,t){if("LookAtProperty"in t){j.get(e.ID).children.forEach((function(t){if("LookAtProperty"===t.relationship){const n=G.Objects.Model[t.ID];if("Lcl_Translation"in n){const t=n.Lcl_Translation.value;void 0!==e.target?(e.target.position.fromArray(t),V.add(e.target)):e.lookAt((new r.Vector3).fromArray(t))}}}))}}bindSkeleton(e,t,n){const i=this.parsePoseNodes();for(const s in e){const o=e[s];j.get(parseInt(o.ID)).parents.forEach((function(e){if(t.has(e.ID)){const t=e.ID;j.get(t).parents.forEach((function(e){if(n.has(e.ID)){n.get(e.ID).bind(new r.Skeleton(o.bones),i[e.ID])}}))}}))}}parsePoseNodes(){const e={};if("Pose"in G.Objects){const t=G.Objects.Pose;for(const n in t)if("BindPose"===t[n].attrType&&t[n].NbPoseNodes>0){const i=t[n].PoseNode;Array.isArray(i)?i.forEach((function(t){e[t.Node]=(new r.Matrix4).fromArray(t.Matrix.a)})):e[i.Node]=(new r.Matrix4).fromArray(i.Matrix.a)}}return e}addGlobalSceneSettings(){if("GlobalSettings"in G){if("AmbientColor"in G.GlobalSettings){const e=G.GlobalSettings.AmbientColor.value,t=e[0],n=e[1],i=e[2];if(0!==t||0!==n||0!==i){const e=new r.Color(t,n,i).convertSRGBToLinear();V.add(new r.AmbientLight(e,1))}}"UnitScaleFactor"in G.GlobalSettings&&(V.userData.unitScaleFactor=G.GlobalSettings.UnitScaleFactor.value)}}}class W{constructor(){this.negativeMaterialIndices=!1}parse(e){const t=new Map;if("Geometry"in G.Objects){const n=G.Objects.Geometry;for(const r in n){const i=j.get(parseInt(r)),s=this.parseGeometry(i,n[r],e);t.set(parseInt(r),s)}}return!0===this.negativeMaterialIndices&&console.warn("THREE.FBXLoader: The FBX file contains invalid (negative) material indices. The asset might not render as expected."),t}parseGeometry(e,t,n){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,n);case"NurbsCurve":return this.parseNurbsGeometry(t)}}parseMeshGeometry(e,t,n){const r=n.skeletons,i=[],s=e.parents.map((function(e){return G.Objects.Model[e.ID]}));if(0===s.length)return;const o=e.children.reduce((function(e,t){return void 0!==r[t.ID]&&(e=r[t.ID]),e}),null);e.children.forEach((function(e){void 0!==n.morphTargets[e.ID]&&i.push(n.morphTargets[e.ID])}));const a=s[0],c={};"RotationOrder"in a&&(c.eulerOrder=se(a.RotationOrder.value)),"InheritType"in a&&(c.inheritType=parseInt(a.InheritType.value)),"GeometricTranslation"in a&&(c.translation=a.GeometricTranslation.value),"GeometricRotation"in a&&(c.rotation=a.GeometricRotation.value),"GeometricScaling"in a&&(c.scale=a.GeometricScaling.value);const l=ie(c);return this.genGeometry(t,o,i,l)}genGeometry(e,t,n,i){const s=new r.BufferGeometry;e.attrName&&(s.name=e.attrName);const o=this.parseGeoNode(e,t),a=this.genBuffers(o),c=new r.Float32BufferAttribute(a.vertex,3);if(c.applyMatrix4(i),s.setAttribute("position",c),a.colors.length>0&&s.setAttribute("color",new r.Float32BufferAttribute(a.colors,3)),t&&(s.setAttribute("skinIndex",new r.Uint16BufferAttribute(a.weightsIndices,4)),s.setAttribute("skinWeight",new r.Float32BufferAttribute(a.vertexWeights,4)),s.FBX_Deformer=t),a.normal.length>0){const e=(new r.Matrix3).getNormalMatrix(i),t=new r.Float32BufferAttribute(a.normal,3);t.applyNormalMatrix(e),s.setAttribute("normal",t)}if(a.uvs.forEach((function(e,t){const n=0===t?"uv":`uv${t}`;s.setAttribute(n,new r.Float32BufferAttribute(a.uvs[t],2))})),o.material&&"AllSame"!==o.material.mappingType){let e=a.materialIndex[0],t=0;if(a.materialIndex.forEach((function(n,r){n!==e&&(s.addGroup(t,r-t,e),e=n,t=r)})),s.groups.length>0){const t=s.groups[s.groups.length-1],n=t.start+t.count;n!==a.materialIndex.length&&s.addGroup(n,a.materialIndex.length-n,e)}0===s.groups.length&&s.addGroup(0,a.materialIndex.length,a.materialIndex[0])}return this.addMorphTargets(s,e,n,i),s}parseGeoNode(e,t){const n={};if(n.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],n.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(n.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(n.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(n.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){n.uv=[];let t=0;for(;e.LayerElementUV[t];)e.LayerElementUV[t].UV&&n.uv.push(this.parseUVs(e.LayerElementUV[t])),t++}return n.weightTable={},null!==t&&(n.skeleton=t,t.rawBones.forEach((function(e,t){e.indices.forEach((function(r,i){void 0===n.weightTable[r]&&(n.weightTable[r]=[]),n.weightTable[r].push({id:t,weight:e.weights[i]})}))}))),n}genBuffers(e){const t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]};let n=0,r=0,i=!1,s=[],o=[],a=[],c=[],l=[],u=[];const h=this;return e.vertexIndices.forEach((function(d,p){let f,m=!1;d<0&&(d^=-1,m=!0);let g=[],A=[];if(s.push(3*d,3*d+1,3*d+2),e.color){const t=te(p,n,d,e.color);a.push(t[0],t[1],t[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach((function(e){A.push(e.weight),g.push(e.id)})),A.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);const e=[0,0,0,0],t=[0,0,0,0];A.forEach((function(n,r){let i=n,s=g[r];t.forEach((function(t,n,r){if(i>t){r[n]=i,i=t;const o=e[n];e[n]=s,s=o}}))})),g=e,A=t}for(;A.length<4;)A.push(0),g.push(0);for(let e=0;e<4;++e)l.push(A[e]),u.push(g[e])}if(e.normal){const t=te(p,n,d,e.normal);o.push(t[0],t[1],t[2])}e.material&&"AllSame"!==e.material.mappingType&&(f=te(p,n,d,e.material)[0],f<0&&(h.negativeMaterialIndices=!0,f=0)),e.uv&&e.uv.forEach((function(e,t){const r=te(p,n,d,e);void 0===c[t]&&(c[t]=[]),c[t].push(r[0]),c[t].push(r[1])})),r++,m&&(h.genFace(t,e,s,f,o,a,c,l,u,r),n++,r=0,s=[],o=[],a=[],c=[],l=[],u=[])})),t}getNormalNewell(e){const t=new r.Vector3(0,0,0);for(let n=0;n<e.length;n++){const r=e[n],i=e[(n+1)%e.length];t.x+=(r.y-i.y)*(r.z+i.z),t.y+=(r.z-i.z)*(r.x+i.x),t.z+=(r.x-i.x)*(r.y+i.y)}return t.normalize(),t}getNormalTangentAndBitangent(e){const t=this.getNormalNewell(e),n=(Math.abs(t.z)>.5?new r.Vector3(0,1,0):new r.Vector3(0,0,1)).cross(t).normalize(),i=t.clone().cross(n).normalize();return{normal:t,tangent:n,bitangent:i}}flattenVertex(e,t,n){return new r.Vector2(e.dot(t),e.dot(n))}genFace(e,t,n,i,s,o,a,c,l,u){let h;if(u>3){const e=[],i=t.baseVertexPositions||t.vertexPositions;for(let t=0;t<n.length;t+=3)e.push(new r.Vector3(i[n[t]],i[n[t+1]],i[n[t+2]]));const{tangent:s,bitangent:o}=this.getNormalTangentAndBitangent(e),a=[];for(const t of e)a.push(this.flattenVertex(t,s,o));h=r.ShapeUtils.triangulateShape(a,[])}else h=[[0,1,2]];for(const[r,u,d]of h)e.vertex.push(t.vertexPositions[n[3*r]]),e.vertex.push(t.vertexPositions[n[3*r+1]]),e.vertex.push(t.vertexPositions[n[3*r+2]]),e.vertex.push(t.vertexPositions[n[3*u]]),e.vertex.push(t.vertexPositions[n[3*u+1]]),e.vertex.push(t.vertexPositions[n[3*u+2]]),e.vertex.push(t.vertexPositions[n[3*d]]),e.vertex.push(t.vertexPositions[n[3*d+1]]),e.vertex.push(t.vertexPositions[n[3*d+2]]),t.skeleton&&(e.vertexWeights.push(c[4*r]),e.vertexWeights.push(c[4*r+1]),e.vertexWeights.push(c[4*r+2]),e.vertexWeights.push(c[4*r+3]),e.vertexWeights.push(c[4*u]),e.vertexWeights.push(c[4*u+1]),e.vertexWeights.push(c[4*u+2]),e.vertexWeights.push(c[4*u+3]),e.vertexWeights.push(c[4*d]),e.vertexWeights.push(c[4*d+1]),e.vertexWeights.push(c[4*d+2]),e.vertexWeights.push(c[4*d+3]),e.weightsIndices.push(l[4*r]),e.weightsIndices.push(l[4*r+1]),e.weightsIndices.push(l[4*r+2]),e.weightsIndices.push(l[4*r+3]),e.weightsIndices.push(l[4*u]),e.weightsIndices.push(l[4*u+1]),e.weightsIndices.push(l[4*u+2]),e.weightsIndices.push(l[4*u+3]),e.weightsIndices.push(l[4*d]),e.weightsIndices.push(l[4*d+1]),e.weightsIndices.push(l[4*d+2]),e.weightsIndices.push(l[4*d+3])),t.color&&(e.colors.push(o[3*r]),e.colors.push(o[3*r+1]),e.colors.push(o[3*r+2]),e.colors.push(o[3*u]),e.colors.push(o[3*u+1]),e.colors.push(o[3*u+2]),e.colors.push(o[3*d]),e.colors.push(o[3*d+1]),e.colors.push(o[3*d+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(i),e.materialIndex.push(i),e.materialIndex.push(i)),t.normal&&(e.normal.push(s[3*r]),e.normal.push(s[3*r+1]),e.normal.push(s[3*r+2]),e.normal.push(s[3*u]),e.normal.push(s[3*u+1]),e.normal.push(s[3*u+2]),e.normal.push(s[3*d]),e.normal.push(s[3*d+1]),e.normal.push(s[3*d+2])),t.uv&&t.uv.forEach((function(t,n){void 0===e.uvs[n]&&(e.uvs[n]=[]),e.uvs[n].push(a[n][2*r]),e.uvs[n].push(a[n][2*r+1]),e.uvs[n].push(a[n][2*u]),e.uvs[n].push(a[n][2*u+1]),e.uvs[n].push(a[n][2*d]),e.uvs[n].push(a[n][2*d+1])}))}addMorphTargets(e,t,n,r){if(0===n.length)return;e.morphTargetsRelative=!0,e.morphAttributes.position=[];const i=this;n.forEach((function(n){n.rawTargets.forEach((function(n){const s=G.Objects.Geometry[n.geoID];void 0!==s&&i.genMorphGeometry(e,t,s,r,n.name)}))}))}genMorphGeometry(e,t,n,i,s){const o=void 0!==t.Vertices?t.Vertices.a:[],a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],c=void 0!==n.Vertices?n.Vertices.a:[],l=void 0!==n.Indexes?n.Indexes.a:[],u=3*e.attributes.position.count,h=new Float32Array(u);for(let e=0;e<l.length;e++){const t=3*l[e];h[t]=c[3*e],h[t+1]=c[3*e+1],h[t+2]=c[3*e+2]}const d={vertexIndices:a,vertexPositions:h,baseVertexPositions:o},p=this.genBuffers(d),f=new r.Float32BufferAttribute(p.vertex,3);f.name=s||n.attrName,f.applyMatrix4(i),e.morphAttributes.position.push(f)}parseNormals(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.Normals.a;let i=[];return"IndexToDirect"===n&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:r,indices:i,mappingType:t,referenceType:n}}parseUVs(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,r=e.UV.a;let i=[];return"IndexToDirect"===n&&(i=e.UVIndex.a),{dataSize:2,buffer:r,indices:i,mappingType:t,referenceType:n}}parseVertexColors(e){const t=e.MappingInformationType,n=e.ReferenceInformationType,i=e.Colors.a;let s=[];"IndexToDirect"===n&&(s=e.ColorIndex.a);for(let e=0,t=new r.Color;e<i.length;e+=4)t.fromArray(i,e).convertSRGBToLinear().toArray(i,e);return{dataSize:4,buffer:i,indices:s,mappingType:t,referenceType:n}}parseMaterialIndices(e){const t=e.MappingInformationType,n=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:n};const r=e.Materials.a,i=[];for(let e=0;e<r.length;++e)i.push(e);return{dataSize:1,buffer:r,indices:i,mappingType:t,referenceType:n}}parseNurbsGeometry(e){const t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new r.BufferGeometry;const n=t-1,i=e.KnotVector.a,s=[],o=e.Points.a;for(let e=0,t=o.length;e<t;e+=4)s.push((new r.Vector4).fromArray(o,e));let a,c;if("Closed"===e.Form)s.push(s[0]);else if("Periodic"===e.Form){a=n,c=i.length-1-a;for(let e=0;e<n;++e)s.push(s[e])}const l=new z(n,i,s,a,c).getPoints(12*s.length);return(new r.BufferGeometry).setFromPoints(l)}}class q{parse(){const e=[],t=this.parseClips();if(void 0!==t)for(const n in t){const r=t[n],i=this.addClip(r);e.push(i)}return e}parseClips(){if(void 0===G.Objects.AnimationCurve)return;const e=this.parseAnimationCurveNodes();this.parseAnimationCurves(e);const t=this.parseAnimationLayers(e);return this.parseAnimStacks(t)}parseAnimationCurveNodes(){const e=G.Objects.AnimationCurveNode,t=new Map;for(const n in e){const r=e[n];if(null!==r.attrName.match(/S|R|T|DeformPercent/)){const e={id:r.id,attr:r.attrName,curves:{}};t.set(e.id,e)}}return t}parseAnimationCurves(e){const t=G.Objects.AnimationCurve;for(const n in t){const r={id:t[n].id,times:t[n].KeyTime.a.map(Z),values:t[n].KeyValueFloat.a},i=j.get(r.id);if(void 0!==i){const t=i.parents[0].ID,n=i.parents[0].relationship;n.match(/X/)?e.get(t).curves.x=r:n.match(/Y/)?e.get(t).curves.y=r:n.match(/Z/)?e.get(t).curves.z=r:n.match(/DeformPercent/)&&e.has(t)&&(e.get(t).curves.morph=r)}}}parseAnimationLayers(e){const t=G.Objects.AnimationLayer,n=new Map;for(const i in t){const t=[],s=j.get(parseInt(i));if(void 0!==s){s.children.forEach((function(n,i){if(e.has(n.ID)){const s=e.get(n.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===t[i]){const e=j.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID;if(void 0!==e){const s=G.Objects.Model[e.toString()];if(void 0===s)return void console.warn("THREE.FBXLoader: Encountered a unused curve.",n);const o={modelName:s.attrName?r.PropertyBinding.sanitizeNodeName(s.attrName):"",ID:s.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};V.traverse((function(e){e.ID===s.id&&(o.transform=e.matrix,e.userData.transformData&&(o.eulerOrder=e.userData.transformData.eulerOrder))})),o.transform||(o.transform=new r.Matrix4),"PreRotation"in s&&(o.preRotation=s.PreRotation.value),"PostRotation"in s&&(o.postRotation=s.PostRotation.value),t[i]=o}}t[i]&&(t[i][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===t[i]){const e=j.get(n.ID).parents.filter((function(e){return void 0!==e.relationship}))[0].ID,s=j.get(e).parents[0].ID,o=j.get(s).parents[0].ID,a=j.get(o).parents[0].ID,c=G.Objects.Model[a],l={modelName:c.attrName?r.PropertyBinding.sanitizeNodeName(c.attrName):"",morphName:G.Objects.Deformer[e].attrName};t[i]=l}t[i][s.attr]=s}}})),n.set(parseInt(i),t)}}return n}parseAnimStacks(e){const t=G.Objects.AnimationStack,n={};for(const r in t){const i=j.get(parseInt(r)).children;i.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");const s=e.get(i[0].ID);n[r]={name:t[r].attrName,layer:s}}return n}addClip(e){let t=[];const n=this;return e.layer.forEach((function(e){t=t.concat(n.generateTracks(e))})),new r.AnimationClip(e.name,-1,t)}generateTracks(e){const t=[];let n=new r.Vector3,i=new r.Vector3;if(e.transform&&e.transform.decompose(n,new r.Quaternion,i),n=n.toArray(),i=i.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){const r=this.generateVectorTrack(e.modelName,e.T.curves,n,"position");void 0!==r&&t.push(r)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){const n=this.generateRotationTrack(e.modelName,e.R.curves,e.preRotation,e.postRotation,e.eulerOrder);void 0!==n&&t.push(n)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){const n=this.generateVectorTrack(e.modelName,e.S.curves,i,"scale");void 0!==n&&t.push(n)}if(void 0!==e.DeformPercent){const n=this.generateMorphTrack(e);void 0!==n&&t.push(n)}return t}generateVectorTrack(e,t,n,i){const s=this.getTimesForAllAxes(t),o=this.getKeyframeTrackValues(s,t,n);return new r.VectorKeyframeTrack(e+"."+i,s,o)}generateRotationTrack(e,t,n,i,s){let o,a;if(void 0!==t.x&&void 0!==t.y&&void 0!==t.z){const e=this.interpolateRotations(t.x,t.y,t.z,s);o=e[0],a=e[1]}void 0!==n&&((n=n.map(r.MathUtils.degToRad)).push(s),n=(new r.Euler).fromArray(n),n=(new r.Quaternion).setFromEuler(n)),void 0!==i&&((i=i.map(r.MathUtils.degToRad)).push(s),i=(new r.Euler).fromArray(i),i=(new r.Quaternion).setFromEuler(i).invert());const c=new r.Quaternion,l=new r.Euler,u=[];if(!a||!o)return new r.QuaternionKeyframeTrack(e+".quaternion",[0],[0]);for(let e=0;e<a.length;e+=3){if(l.set(a[e],a[e+1],a[e+2],s),c.setFromEuler(l),void 0!==n&&c.premultiply(n),void 0!==i&&c.multiply(i),e>2){(new r.Quaternion).fromArray(u,(e-3)/3*4).dot(c)<0&&c.set(-c.x,-c.y,-c.z,-c.w)}c.toArray(u,e/3*4)}return new r.QuaternionKeyframeTrack(e+".quaternion",o,u)}generateMorphTrack(e){const t=e.DeformPercent.curves.morph,n=t.values.map((function(e){return e/100})),i=V.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new r.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+i+"]",t.times,n)}getTimesForAllAxes(e){let t=[];if(void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort((function(e,t){return e-t})),t.length>1){let e=1,n=t[0];for(let r=1;r<t.length;r++){const i=t[r];i!==n&&(t[e]=i,n=i,e++)}t=t.slice(0,e)}return t}getKeyframeTrackValues(e,t,n){const r=n,i=[];let s=-1,o=-1,a=-1;return e.forEach((function(e){if(t.x&&(s=t.x.times.indexOf(e)),t.y&&(o=t.y.times.indexOf(e)),t.z&&(a=t.z.times.indexOf(e)),-1!==s){const e=t.x.values[s];i.push(e),r[0]=e}else i.push(r[0]);if(-1!==o){const e=t.y.values[o];i.push(e),r[1]=e}else i.push(r[1]);if(-1!==a){const e=t.z.values[a];i.push(e),r[2]=e}else i.push(r[2])})),i}interpolateRotations(e,t,n,i){const s=[],o=[];s.push(e.times[0]),o.push(r.MathUtils.degToRad(e.values[0])),o.push(r.MathUtils.degToRad(t.values[0])),o.push(r.MathUtils.degToRad(n.values[0]));for(let a=1;a<e.values.length;a++){const c=[e.values[a-1],t.values[a-1],n.values[a-1]];if(isNaN(c[0])||isNaN(c[1])||isNaN(c[2]))continue;const l=c.map(r.MathUtils.degToRad),u=[e.values[a],t.values[a],n.values[a]];if(isNaN(u[0])||isNaN(u[1])||isNaN(u[2]))continue;const h=u.map(r.MathUtils.degToRad),d=[u[0]-c[0],u[1]-c[1],u[2]-c[2]],p=[Math.abs(d[0]),Math.abs(d[1]),Math.abs(d[2])];if(p[0]>=180||p[1]>=180||p[2]>=180){const t=Math.max(...p)/180,n=new r.Euler(...l,i),c=new r.Euler(...h,i),u=(new r.Quaternion).setFromEuler(n),d=(new r.Quaternion).setFromEuler(c);u.dot(d)&&d.set(-d.x,-d.y,-d.z,-d.w);const f=e.times[a-1],m=e.times[a]-f,g=new r.Quaternion,A=new r.Euler;for(let e=0;e<1;e+=1/t)g.copy(u.clone().slerp(d.clone(),e)),s.push(f+e*m),A.setFromQuaternion(g,i),o.push(A.x),o.push(A.y),o.push(A.z)}else s.push(e.times[a]),o.push(r.MathUtils.degToRad(e.values[a])),o.push(r.MathUtils.degToRad(t.values[a])),o.push(r.MathUtils.degToRad(n.values[a]))}return[s,o]}}class X{getPrevNode(){return this.nodeStack[this.currentIndent-2]}getCurrentNode(){return this.nodeStack[this.currentIndent-1]}getCurrentProp(){return this.currentProp}pushStack(e){this.nodeStack.push(e),this.currentIndent+=1}popStack(){this.nodeStack.pop(),this.currentIndent-=1}setCurrentProp(e,t){this.currentProp=e,this.currentPropName=t}parse(e){this.currentIndent=0,this.allNodes=new J,this.nodeStack=[],this.currentProp=[],this.currentPropName="";const t=this,n=e.split(/[\r\n]+/);return n.forEach((function(e,r){const i=e.match(/^[\s\t]*;/),s=e.match(/^[\s\t]*$/);if(i||s)return;const o=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),a=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),c=e.match("^\\t{"+(t.currentIndent-1)+"}}");o?t.parseNodeBegin(e,o):a?t.parseNodeProperty(e,a,n[++r]):c?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)})),this.allNodes}parseNodeBegin(e,t){const n=t[1].trim().replace(/^"/,"").replace(/"$/,""),r=t[2].split(",").map((function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")})),i={name:n},s=this.parseNodeAttr(r),o=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(n,i):n in o?("PoseNode"===n?o.PoseNode.push(i):void 0!==o[n].id&&(o[n]={},o[n][o[n].id]=o[n]),""!==s.id&&(o[n][s.id]=i)):"number"==typeof s.id?(o[n]={},o[n][s.id]=i):"Properties70"!==n&&(o[n]="PoseNode"===n?[i]:i),"number"==typeof s.id&&(i.id=s.id),""!==s.name&&(i.attrName=s.name),""!==s.type&&(i.attrType=s.type),this.pushStack(i)}parseNodeAttr(e){let t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));let n="",r="";return e.length>1&&(n=e[1].replace(/^(\w+)::/,""),r=e[2]),{id:t,name:n,type:r}}parseNodeProperty(e,t,n){let r=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===r&&","===i&&(i=n.replace(/"/g,"").replace(/,$/,"").trim());const s=this.getCurrentNode();if("Properties70"!==s.name){if("C"===r){const e=i.split(",").slice(1),t=parseInt(e[0]),n=parseInt(e[1]);let o=i.split(",").slice(3);o=o.map((function(e){return e.trim().replace(/^"/,"")})),r="connections",i=[t,n],function(e,t){for(let n=0,r=e.length,i=t.length;n<i;n++,r++)e[r]=t[n]}(i,o),void 0===s[r]&&(s[r]=[])}"Node"===r&&(s.id=i),r in s&&Array.isArray(s[r])?s[r].push(i):"a"!==r?s[r]=i:s.a=i,this.setCurrentProp(s,r),"a"===r&&","!==i.slice(-1)&&(s.a=oe(i))}else this.parseNodeSpecialProperty(e,r,i)}parseNodePropertyContinued(e){const t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=oe(t.a))}parseNodeSpecialProperty(e,t,n){const r=n.split('",').map((function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")})),i=r[0],s=r[1],o=r[2],a=r[3];let c=r[4];switch(s){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":c=parseFloat(c);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":c=oe(c)}this.getPrevNode()[i]={type:s,type2:o,flag:a,value:c},this.setCurrentProp(this.getPrevNode(),i)}}class K{parse(e){const t=new Y(e);t.skip(23);const n=t.getUint32();if(n<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+n);const r=new J;for(;!this.endOfContent(t);){const e=this.parseNode(t,n);null!==e&&r.add(e.name,e)}return r}endOfContent(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()}parseNode(e,t){const n={},r=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();const s=e.getUint8(),o=e.getString(s);if(0===r)return null;const a=[];for(let t=0;t<i;t++)a.push(this.parseProperty(e));const c=a.length>0?a[0]:"",l=a.length>1?a[1]:"",u=a.length>2?a[2]:"";for(n.singleProperty=1===i&&e.getOffset()===r;r>e.getOffset();){const r=this.parseNode(e,t);null!==r&&this.parseSubNode(o,n,r)}return n.propertyList=a,"number"==typeof c&&(n.id=c),""!==l&&(n.attrName=l),""!==u&&(n.attrType=u),""!==o&&(n.name=o),n}parseSubNode(e,t,n){if(!0===n.singleProperty){const e=n.propertyList[0];Array.isArray(e)?(t[n.name]=n,n.a=e):t[n.name]=e}else if("Connections"===e&&"C"===n.name){const e=[];n.propertyList.forEach((function(t,n){0!==n&&e.push(t)})),void 0===t.connections&&(t.connections=[]),t.connections.push(e)}else if("Properties70"===n.name){Object.keys(n).forEach((function(e){t[e]=n[e]}))}else if("Properties70"===e&&"P"===n.name){let e=n.propertyList[0],r=n.propertyList[1];const i=n.propertyList[2],s=n.propertyList[3];let o;0===e.indexOf("Lcl ")&&(e=e.replace("Lcl ","Lcl_")),0===r.indexOf("Lcl ")&&(r=r.replace("Lcl ","Lcl_")),o="Color"===r||"ColorRGB"===r||"Vector"===r||"Vector3D"===r||0===r.indexOf("Lcl_")?[n.propertyList[4],n.propertyList[5],n.propertyList[6]]:n.propertyList[4],t[e]={type:r,type2:i,flag:s,value:o}}else void 0===t[n.name]?"number"==typeof n.id?(t[n.name]={},t[n.name][n.id]=n):t[n.name]=n:"PoseNode"===n.name?(Array.isArray(t[n.name])||(t[n.name]=[t[n.name]]),t[n.name].push(n)):void 0===t[n.name][n.id]&&(t[n.name][n.id]=n)}parseProperty(e){const t=e.getString(1);let n;switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":return n=e.getUint32(),e.getArrayBuffer(n);case"S":return n=e.getUint32(),e.getString(n);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":const r=e.getUint32(),i=e.getUint32(),s=e.getUint32();if(0===i)switch(t){case"b":case"c":return e.getBooleanArray(r);case"d":return e.getFloat64Array(r);case"f":return e.getFloat32Array(r);case"i":return e.getInt32Array(r);case"l":return e.getInt64Array(r)}const o=O(new Uint8Array(e.getArrayBuffer(s))),a=new Y(o.buffer);switch(t){case"b":case"c":return a.getBooleanArray(r);case"d":return a.getFloat64Array(r);case"f":return a.getFloat32Array(r);case"i":return a.getInt32Array(r);case"l":return a.getInt64Array(r)}break;default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}}class Y{constructor(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this._textDecoder=new TextDecoder}getOffset(){return this.offset}size(){return this.dv.buffer.byteLength}skip(e){this.offset+=e}getBoolean(){return!(1&~this.getUint8())}getBooleanArray(e){const t=[];for(let n=0;n<e;n++)t.push(this.getBoolean());return t}getUint8(){const e=this.dv.getUint8(this.offset);return this.offset+=1,e}getInt16(){const e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}getInt32(){const e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}getInt32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt32());return t}getUint32(){const e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}getInt64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,e=4294967295&~e,4294967295===e&&(t=t+1&4294967295),e=e+1&4294967295,-(4294967296*t+e)):4294967296*t+e}getInt64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getInt64());return t}getUint64(){let e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e}getFloat32(){const e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}getFloat32Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat32());return t}getFloat64(){const e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}getFloat64Array(e){const t=[];for(let n=0;n<e;n++)t.push(this.getFloat64());return t}getArrayBuffer(e){const t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t}getString(e){const t=this.offset;let n=new Uint8Array(this.dv.buffer,t,e);this.skip(e);const r=n.indexOf(0);return r>=0&&(n=new Uint8Array(this.dv.buffer,t,r)),this._textDecoder.decode(n)}}class J{add(e,t){this[e]=t}}function $(e){const t=e.match(/FBXVersion: (\d+)/);if(t){return parseInt(t[1])}throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function Z(e){return e/46186158e3}const ee=[];function te(e,t,n,r){let i;switch(r.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=n;break;case"AllSame":i=r.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+r.mappingType)}"IndexToDirect"===r.referenceType&&(i=r.indices[i]);const s=i*r.dataSize,o=s+r.dataSize;return function(e,t,n,r){for(let i=n,s=0;i<r;i++,s++)e[s]=t[i];return e}(ee,r.buffer,s,o)}const ne=new r.Euler,re=new r.Vector3;function ie(e){const t=new r.Matrix4,n=new r.Matrix4,i=new r.Matrix4,s=new r.Matrix4,o=new r.Matrix4,a=new r.Matrix4,c=new r.Matrix4,l=new r.Matrix4,u=new r.Matrix4,h=new r.Matrix4,d=new r.Matrix4,p=new r.Matrix4,f=e.inheritType?e.inheritType:0;if(e.translation&&t.setPosition(re.fromArray(e.translation)),e.preRotation){const t=e.preRotation.map(r.MathUtils.degToRad);t.push(e.eulerOrder||r.Euler.DEFAULT_ORDER),n.makeRotationFromEuler(ne.fromArray(t))}if(e.rotation){const t=e.rotation.map(r.MathUtils.degToRad);t.push(e.eulerOrder||r.Euler.DEFAULT_ORDER),i.makeRotationFromEuler(ne.fromArray(t))}if(e.postRotation){const t=e.postRotation.map(r.MathUtils.degToRad);t.push(e.eulerOrder||r.Euler.DEFAULT_ORDER),s.makeRotationFromEuler(ne.fromArray(t)),s.invert()}e.scale&&o.scale(re.fromArray(e.scale)),e.scalingOffset&&c.setPosition(re.fromArray(e.scalingOffset)),e.scalingPivot&&a.setPosition(re.fromArray(e.scalingPivot)),e.rotationOffset&&l.setPosition(re.fromArray(e.rotationOffset)),e.rotationPivot&&u.setPosition(re.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(d.copy(e.parentMatrix),h.copy(e.parentMatrixWorld));const m=n.clone().multiply(i).multiply(s),g=new r.Matrix4;g.extractRotation(h);const A=new r.Matrix4;A.copyPosition(h);const y=A.clone().invert().multiply(h),_=g.clone().invert().multiply(y),v=o,b=new r.Matrix4;if(0===f)b.copy(g).multiply(m).multiply(_).multiply(v);else if(1===f)b.copy(g).multiply(_).multiply(m).multiply(v);else{const e=(new r.Matrix4).scale((new r.Vector3).setFromMatrixScale(d)).clone().invert(),t=_.clone().multiply(e);b.copy(g).multiply(m).multiply(t).multiply(v)}const x=u.clone().invert(),w=a.clone().invert();let E=t.clone().multiply(l).multiply(u).multiply(n).multiply(i).multiply(s).multiply(x).multiply(c).multiply(a).multiply(o).multiply(w);const T=(new r.Matrix4).copyPosition(E),S=h.clone().multiply(T);return p.copyPosition(S),E=p.clone().multiply(b),E.premultiply(h.invert()),E}function se(e){const t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function oe(e){return e.split(",").map((function(e){return parseFloat(e)}))}function ae(e,t,n){return void 0===t&&(t=0),void 0===n&&(n=e.byteLength),(new TextDecoder).decode(new Uint8Array(e,t,n))}},4264:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Font:()=>s,FontLoader:()=>i});var r=n(9437);class i extends r.Loader{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new r.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(e){const n=s.parse(JSON.parse(e));t&&t(n)}),n,i)}parse(e){return new s(e)}}class s{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=function(e,t,n){const r=Array.from(e),i=t/n.resolution,s=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*i,a=[];let c=0,l=0;for(let e=0;e<r.length;e++){const t=r[e];if("\n"===t)c=0,l-=s;else{const e=o(t,i,c,l,n);c+=e.offsetX,a.push(e.path)}}return a}(e,t,this.data);for(let e=0,t=r.length;e<t;e++)n.push(...r[e].toShapes());return n}}function o(e,t,n,i,s){const o=s.glyphs[e]||s.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+e+'" does not exists in font family '+s.familyName+".");const a=new r.ShapePath;let c,l,u,h,d,p,f,m;if(o.o){const e=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let r=0,s=e.length;r<s;){switch(e[r++]){case"m":c=e[r++]*t+n,l=e[r++]*t+i,a.moveTo(c,l);break;case"l":c=e[r++]*t+n,l=e[r++]*t+i,a.lineTo(c,l);break;case"q":u=e[r++]*t+n,h=e[r++]*t+i,d=e[r++]*t+n,p=e[r++]*t+i,a.quadraticCurveTo(d,p,u,h);break;case"b":u=e[r++]*t+n,h=e[r++]*t+i,d=e[r++]*t+n,p=e[r++]*t+i,f=e[r++]*t+n,m=e[r++]*t+i,a.bezierCurveTo(d,p,f,m,u,h)}}}return{offsetX:o.ha*t,path:a}}},4092:(e,t,n)=>{"use strict";n.r(t),n.d(t,{GLTFLoader:()=>s});var r=n(9437);function i(e,t){if(t===r.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===r.TriangleFanDrawMode||t===r.TriangleStripDrawMode){let n=e.getIndex();if(null===n){const t=[],r=e.getAttribute("position");if(void 0===r)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(let e=0;e<r.count;e++)t.push(e);e.setIndex(t),n=e.getIndex()}const i=n.count-2,s=[];if(t===r.TriangleFanDrawMode)for(let e=1;e<=i;e++)s.push(n.getX(0)),s.push(n.getX(e)),s.push(n.getX(e+1));else for(let e=0;e<i;e++)e%2==0?(s.push(n.getX(e)),s.push(n.getX(e+1)),s.push(n.getX(e+2))):(s.push(n.getX(e+2)),s.push(n.getX(e+1)),s.push(n.getX(e)));s.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const o=e.clone();return o.setIndex(s),o.clearGroups(),o}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}class s extends r.Loader{constructor(e){super(e),this.dracoLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register((function(e){return new h(e)})),this.register((function(e){return new d(e)})),this.register((function(e){return new b(e)})),this.register((function(e){return new x(e)})),this.register((function(e){return new w(e)})),this.register((function(e){return new f(e)})),this.register((function(e){return new m(e)})),this.register((function(e){return new g(e)})),this.register((function(e){return new A(e)})),this.register((function(e){return new u(e)})),this.register((function(e){return new y(e)})),this.register((function(e){return new p(e)})),this.register((function(e){return new v(e)})),this.register((function(e){return new _(e)})),this.register((function(e){return new c(e)})),this.register((function(e){return new E(e)})),this.register((function(e){return new T(e)}))}load(e,t,n,i){const s=this;let o;if(""!==this.resourcePath)o=this.resourcePath;else if(""!==this.path){const t=r.LoaderUtils.extractUrlBase(e);o=r.LoaderUtils.resolveURL(t,this.path)}else o=r.LoaderUtils.extractUrlBase(e);this.manager.itemStart(e);const a=function(t){i?i(t):console.error(t),s.manager.itemError(e),s.manager.itemEnd(e)},c=new r.FileLoader(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(this.withCredentials),c.load(e,(function(n){try{s.parse(n,o,(function(n){t(n),s.manager.itemEnd(e)}),a)}catch(e){a(e)}}),n,a)}setDRACOLoader(e){return this.dracoLoader=e,this}setDDSLoader(){throw new Error('THREE.GLTFLoader: "MSFT_texture_dds" no longer supported. Please update to "KHR_texture_basisu".')}setKTX2Loader(e){return this.ktx2Loader=e,this}setMeshoptDecoder(e){return this.meshoptDecoder=e,this}register(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this}unregister(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this}parse(e,t,n,r){let i;const s={},o={},c=new TextDecoder;if("string"==typeof e)i=JSON.parse(e);else if(e instanceof ArrayBuffer){if(c.decode(new Uint8Array(e,0,4))===S){try{s[a.KHR_BINARY_GLTF]=new I(e)}catch(e){return void(r&&r(e))}i=JSON.parse(s[a.KHR_BINARY_GLTF].content)}else i=JSON.parse(c.decode(e))}else i=e;if(void 0===i.asset||i.asset.version[0]<2)return void(r&&r(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported.")));const u=new ee(i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,requestHeader:this.requestHeader,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});u.fileLoader.setRequestHeader(this.requestHeader);for(let e=0;e<this.pluginCallbacks.length;e++){const t=this.pluginCallbacks[e](u);t.name||console.error("THREE.GLTFLoader: Invalid plugin found: missing name"),o[t.name]=t,s[t.name]=!0}if(i.extensionsUsed)for(let e=0;e<i.extensionsUsed.length;++e){const t=i.extensionsUsed[e],n=i.extensionsRequired||[];switch(t){case a.KHR_MATERIALS_UNLIT:s[t]=new l;break;case a.KHR_DRACO_MESH_COMPRESSION:s[t]=new R(i,this.dracoLoader);break;case a.KHR_TEXTURE_TRANSFORM:s[t]=new B;break;case a.KHR_MESH_QUANTIZATION:s[t]=new P;break;default:n.indexOf(t)>=0&&void 0===o[t]&&console.warn('THREE.GLTFLoader: Unknown extension "'+t+'".')}}u.setExtensions(s),u.setPlugins(o),u.parse(n,r)}parseAsync(e,t){const n=this;return new Promise((function(r,i){n.parse(e,t,r,i)}))}}function o(){let e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}const a={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_DISPERSION:"KHR_materials_dispersion",KHR_MATERIALS_IOR:"KHR_materials_ior",KHR_MATERIALS_SHEEN:"KHR_materials_sheen",KHR_MATERIALS_SPECULAR:"KHR_materials_specular",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_IRIDESCENCE:"KHR_materials_iridescence",KHR_MATERIALS_ANISOTROPY:"KHR_materials_anisotropy",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_MATERIALS_VOLUME:"KHR_materials_volume",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",KHR_MATERIALS_EMISSIVE_STRENGTH:"KHR_materials_emissive_strength",EXT_MATERIALS_BUMP:"EXT_materials_bump",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_TEXTURE_AVIF:"EXT_texture_avif",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",EXT_MESH_GPU_INSTANCING:"EXT_mesh_gpu_instancing"};class c{constructor(e){this.parser=e,this.name=a.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}_markDefs(){const e=this.parser,t=this.parser.json.nodes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n];r.extensions&&r.extensions[this.name]&&void 0!==r.extensions[this.name].light&&e._addNodeRef(this.cache,r.extensions[this.name].light)}}_loadLight(e){const t=this.parser,n="light:"+e;let i=t.cache.get(n);if(i)return i;const s=t.json,o=((s.extensions&&s.extensions[this.name]||{}).lights||[])[e];let a;const c=new r.Color(16777215);void 0!==o.color&&c.setRGB(o.color[0],o.color[1],o.color[2],r.LinearSRGBColorSpace);const l=void 0!==o.range?o.range:0;switch(o.type){case"directional":a=new r.DirectionalLight(c),a.target.position.set(0,0,-1),a.add(a.target);break;case"point":a=new r.PointLight(c),a.distance=l;break;case"spot":a=new r.SpotLight(c),a.distance=l,o.spot=o.spot||{},o.spot.innerConeAngle=void 0!==o.spot.innerConeAngle?o.spot.innerConeAngle:0,o.spot.outerConeAngle=void 0!==o.spot.outerConeAngle?o.spot.outerConeAngle:Math.PI/4,a.angle=o.spot.outerConeAngle,a.penumbra=1-o.spot.innerConeAngle/o.spot.outerConeAngle,a.target.position.set(0,0,-1),a.add(a.target);break;default:throw new Error("THREE.GLTFLoader: Unexpected light type: "+o.type)}return a.position.set(0,0,0),a.decay=2,X(a,o),void 0!==o.intensity&&(a.intensity=o.intensity),a.name=t.createUniqueName(o.name||"light_"+e),i=Promise.resolve(a),t.cache.add(n,i),i}getDependency(e,t){if("light"===e)return this._loadLight(t)}createNodeAttachment(e){const t=this,n=this.parser,r=n.json.nodes[e],i=(r.extensions&&r.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then((function(e){return n._getNodeRef(t.cache,i,e)}))}}class l{constructor(){this.name=a.KHR_MATERIALS_UNLIT}getMaterialType(){return r.MeshBasicMaterial}extendParams(e,t,n){const i=[];e.color=new r.Color(1,1,1),e.opacity=1;const s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){const t=s.baseColorFactor;e.color.setRGB(t[0],t[1],t[2],r.LinearSRGBColorSpace),e.opacity=t[3]}void 0!==s.baseColorTexture&&i.push(n.assignTexture(e,"map",s.baseColorTexture,r.SRGBColorSpace))}return Promise.all(i)}}class u{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_EMISSIVE_STRENGTH}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name].emissiveStrength;return void 0!==r&&(t.emissiveIntensity=r),Promise.resolve()}}class h{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_CLEARCOAT}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];if(void 0!==o.clearcoatFactor&&(t.clearcoat=o.clearcoatFactor),void 0!==o.clearcoatTexture&&s.push(n.assignTexture(t,"clearcoatMap",o.clearcoatTexture)),void 0!==o.clearcoatRoughnessFactor&&(t.clearcoatRoughness=o.clearcoatRoughnessFactor),void 0!==o.clearcoatRoughnessTexture&&s.push(n.assignTexture(t,"clearcoatRoughnessMap",o.clearcoatRoughnessTexture)),void 0!==o.clearcoatNormalTexture&&(s.push(n.assignTexture(t,"clearcoatNormalMap",o.clearcoatNormalTexture)),void 0!==o.clearcoatNormalTexture.scale)){const e=o.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new r.Vector2(e,e)}return Promise.all(s)}}class d{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_DISPERSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.dispersion=void 0!==r.dispersion?r.dispersion:0,Promise.resolve()}}class p{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_IRIDESCENCE}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.iridescenceFactor&&(t.iridescence=s.iridescenceFactor),void 0!==s.iridescenceTexture&&i.push(n.assignTexture(t,"iridescenceMap",s.iridescenceTexture)),void 0!==s.iridescenceIor&&(t.iridescenceIOR=s.iridescenceIor),void 0===t.iridescenceThicknessRange&&(t.iridescenceThicknessRange=[100,400]),void 0!==s.iridescenceThicknessMinimum&&(t.iridescenceThicknessRange[0]=s.iridescenceThicknessMinimum),void 0!==s.iridescenceThicknessMaximum&&(t.iridescenceThicknessRange[1]=s.iridescenceThicknessMaximum),void 0!==s.iridescenceThicknessTexture&&i.push(n.assignTexture(t,"iridescenceThicknessMap",s.iridescenceThicknessTexture)),Promise.all(i)}}class f{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_SHEEN}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[];t.sheenColor=new r.Color(0,0,0),t.sheenRoughness=0,t.sheen=1;const o=i.extensions[this.name];if(void 0!==o.sheenColorFactor){const e=o.sheenColorFactor;t.sheenColor.setRGB(e[0],e[1],e[2],r.LinearSRGBColorSpace)}return void 0!==o.sheenRoughnessFactor&&(t.sheenRoughness=o.sheenRoughnessFactor),void 0!==o.sheenColorTexture&&s.push(n.assignTexture(t,"sheenColorMap",o.sheenColorTexture,r.SRGBColorSpace)),void 0!==o.sheenRoughnessTexture&&s.push(n.assignTexture(t,"sheenRoughnessMap",o.sheenRoughnessTexture)),Promise.all(s)}}class m{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_TRANSMISSION}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.transmissionFactor&&(t.transmission=s.transmissionFactor),void 0!==s.transmissionTexture&&i.push(n.assignTexture(t,"transmissionMap",s.transmissionTexture)),Promise.all(i)}}class g{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_VOLUME}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.thickness=void 0!==o.thicknessFactor?o.thicknessFactor:0,void 0!==o.thicknessTexture&&s.push(n.assignTexture(t,"thicknessMap",o.thicknessTexture)),t.attenuationDistance=o.attenuationDistance||1/0;const a=o.attenuationColor||[1,1,1];return t.attenuationColor=(new r.Color).setRGB(a[0],a[1],a[2],r.LinearSRGBColorSpace),Promise.all(s)}}class A{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_IOR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();const r=n.extensions[this.name];return t.ior=void 0!==r.ior?r.ior:1.5,Promise.resolve()}}class y{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_SPECULAR}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,i=n.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();const s=[],o=i.extensions[this.name];t.specularIntensity=void 0!==o.specularFactor?o.specularFactor:1,void 0!==o.specularTexture&&s.push(n.assignTexture(t,"specularIntensityMap",o.specularTexture));const a=o.specularColorFactor||[1,1,1];return t.specularColor=(new r.Color).setRGB(a[0],a[1],a[2],r.LinearSRGBColorSpace),void 0!==o.specularColorTexture&&s.push(n.assignTexture(t,"specularColorMap",o.specularColorTexture,r.SRGBColorSpace)),Promise.all(s)}}class _{constructor(e){this.parser=e,this.name=a.EXT_MATERIALS_BUMP}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return t.bumpScale=void 0!==s.bumpFactor?s.bumpFactor:1,void 0!==s.bumpTexture&&i.push(n.assignTexture(t,"bumpMap",s.bumpTexture)),Promise.all(i)}}class v{constructor(e){this.parser=e,this.name=a.KHR_MATERIALS_ANISOTROPY}getMaterialType(e){const t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?r.MeshPhysicalMaterial:null}extendMaterialParams(e,t){const n=this.parser,r=n.json.materials[e];if(!r.extensions||!r.extensions[this.name])return Promise.resolve();const i=[],s=r.extensions[this.name];return void 0!==s.anisotropyStrength&&(t.anisotropy=s.anisotropyStrength),void 0!==s.anisotropyRotation&&(t.anisotropyRotation=s.anisotropyRotation),void 0!==s.anisotropyTexture&&i.push(n.assignTexture(t,"anisotropyMap",s.anisotropyTexture)),Promise.all(i)}}class b{constructor(e){this.parser=e,this.name=a.KHR_TEXTURE_BASISU}loadTexture(e){const t=this.parser,n=t.json,r=n.textures[e];if(!r.extensions||!r.extensions[this.name])return null;const i=r.extensions[this.name],s=t.options.ktx2Loader;if(!s){if(n.extensionsRequired&&n.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,i.source,s)}}class x{constructor(e){this.parser=e,this.name=a.EXT_TEXTURE_WEBP,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],o=r.images[s.source];let a=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class w{constructor(e){this.parser=e,this.name=a.EXT_TEXTURE_AVIF,this.isSupported=null}loadTexture(e){const t=this.name,n=this.parser,r=n.json,i=r.textures[e];if(!i.extensions||!i.extensions[t])return null;const s=i.extensions[t],o=r.images[s.source];let a=n.textureLoader;if(o.uri){const e=n.options.manager.getHandler(o.uri);null!==e&&(a=e)}return this.detectSupport().then((function(i){if(i)return n.loadTextureImage(e,s.source,a);if(r.extensionsRequired&&r.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: AVIF required by asset but unsupported.");return n.loadTexture(e)}))}detectSupport(){return this.isSupported||(this.isSupported=new Promise((function(e){const t=new Image;t.src="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAABcAAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAEAAAABAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQAMAAAAABNjb2xybmNseAACAAIABoAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAAB9tZGF0EgAKCBgABogQEDQgMgkQAAAAB8dSLfI=",t.onload=t.onerror=function(){e(1===t.height)}}))),this.isSupported}}class E{constructor(e){this.name=a.EXT_MESHOPT_COMPRESSION,this.parser=e}loadBufferView(e){const t=this.parser.json,n=t.bufferViews[e];if(n.extensions&&n.extensions[this.name]){const e=n.extensions[this.name],r=this.parser.getDependency("buffer",e.buffer),i=this.parser.options.meshoptDecoder;if(!i||!i.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return r.then((function(t){const n=e.byteOffset||0,r=e.byteLength||0,s=e.count,o=e.byteStride,a=new Uint8Array(t,n,r);return i.decodeGltfBufferAsync?i.decodeGltfBufferAsync(s,o,a,e.mode,e.filter).then((function(e){return e.buffer})):i.ready.then((function(){const t=new ArrayBuffer(s*o);return i.decodeGltfBuffer(new Uint8Array(t),s,o,a,e.mode,e.filter),t}))}))}return null}}class T{constructor(e){this.name=a.EXT_MESH_GPU_INSTANCING,this.parser=e}createNodeMesh(e){const t=this.parser.json,n=t.nodes[e];if(!n.extensions||!n.extensions[this.name]||void 0===n.mesh)return null;const i=t.meshes[n.mesh];for(const e of i.primitives)if(e.mode!==N.TRIANGLES&&e.mode!==N.TRIANGLE_STRIP&&e.mode!==N.TRIANGLE_FAN&&void 0!==e.mode)return null;const s=n.extensions[this.name].attributes,o=[],a={};for(const e in s)o.push(this.parser.getDependency("accessor",s[e]).then((t=>(a[e]=t,a[e]))));return o.length<1?null:(o.push(this.parser.createNodeMesh(e)),Promise.all(o).then((e=>{const t=e.pop(),n=t.isGroup?t.children:[t],i=e[0].count,s=[];for(const e of n){const t=new r.Matrix4,n=new r.Vector3,o=new r.Quaternion,c=new r.Vector3(1,1,1),l=new r.InstancedMesh(e.geometry,e.material,i);for(let e=0;e<i;e++)a.TRANSLATION&&n.fromBufferAttribute(a.TRANSLATION,e),a.ROTATION&&o.fromBufferAttribute(a.ROTATION,e),a.SCALE&&c.fromBufferAttribute(a.SCALE,e),l.setMatrixAt(e,t.compose(n,o,c));for(const t in a)if("_COLOR_0"===t){const e=a[t];l.instanceColor=new r.InstancedBufferAttribute(e.array,e.itemSize,e.normalized)}else"TRANSLATION"!==t&&"ROTATION"!==t&&"SCALE"!==t&&e.geometry.setAttribute(t,a[t]);r.Object3D.prototype.copy.call(l,e),this.parser.assignFinalMaterial(l),s.push(l)}return t.isGroup?(t.clear(),t.add(...s),t):s[0]})))}}const S="glTF",M=1313821514,C=5130562;class I{constructor(e){this.name=a.KHR_BINARY_GLTF,this.content=null,this.body=null;const t=new DataView(e,0,12),n=new TextDecoder;if(this.header={magic:n.decode(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==S)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");const r=this.header.length-12,i=new DataView(e,12);let s=0;for(;s<r;){const t=i.getUint32(s,!0);s+=4;const r=i.getUint32(s,!0);if(s+=4,r===M){const r=new Uint8Array(e,12+s,t);this.content=n.decode(r)}else if(r===C){const n=12+s;this.body=e.slice(n,n+t)}s+=t}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}}class R{constructor(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=a.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}decodePrimitive(e,t){const n=this.json,i=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},c={},l={};for(const e in o){const t=G[e]||e.toLowerCase();a[t]=o[e]}for(const t in e.attributes){const r=G[t]||t.toLowerCase();if(void 0!==o[t]){const i=n.accessors[e.attributes[t]],s=F[i.componentType];l[r]=s.name,c[r]=!0===i.normalized}}return t.getDependency("bufferView",s).then((function(e){return new Promise((function(t,n){i.decodeDracoFile(e,(function(e){for(const t in e.attributes){const n=e.attributes[t],r=c[t];void 0!==r&&(n.normalized=r)}t(e)}),a,l,r.LinearSRGBColorSpace,n)}))}))}}class B{constructor(){this.name=a.KHR_TEXTURE_TRANSFORM}extendTexture(e,t){return void 0!==t.texCoord&&t.texCoord!==e.channel||void 0!==t.offset||void 0!==t.rotation||void 0!==t.scale?(e=e.clone(),void 0!==t.texCoord&&(e.channel=t.texCoord),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),e.needsUpdate=!0,e):e}}class P{constructor(){this.name=a.KHR_MESH_QUANTIZATION}}class D extends r.Interpolant{constructor(e,t,n,r){super(e,t,n,r)}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,i=e*r*3+r;for(let e=0;e!==r;e++)t[e]=n[i+e];return t}interpolate_(e,t,n,r){const i=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=2*o,c=3*o,l=r-t,u=(n-t)/l,h=u*u,d=h*u,p=e*c,f=p-c,m=-2*d+3*h,g=d-h,A=1-m,y=g-h+u;for(let e=0;e!==o;e++){const t=s[f+e+o],n=s[f+e+a]*l,r=s[p+e+o],c=s[p+e]*l;i[e]=A*t+y*n+m*r+g*c}return i}}const O=new r.Quaternion;class L extends D{interpolate_(e,t,n,r){const i=super.interpolate_(e,t,n,r);return O.fromArray(i).normalize().toArray(i),i}}const N={FLOAT:5126,FLOAT_MAT3:35675,FLOAT_MAT4:35676,FLOAT_VEC2:35664,FLOAT_VEC3:35665,FLOAT_VEC4:35666,LINEAR:9729,REPEAT:10497,SAMPLER_2D:35678,POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6,UNSIGNED_BYTE:5121,UNSIGNED_SHORT:5123},F={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},U={9728:r.NearestFilter,9729:r.LinearFilter,9984:r.NearestMipmapNearestFilter,9985:r.LinearMipmapNearestFilter,9986:r.NearestMipmapLinearFilter,9987:r.LinearMipmapLinearFilter},k={33071:r.ClampToEdgeWrapping,33648:r.MirroredRepeatWrapping,10497:r.RepeatWrapping},z={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},G={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv1",TEXCOORD_2:"uv2",TEXCOORD_3:"uv3",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},j={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},V={CUBICSPLINE:void 0,LINEAR:r.InterpolateLinear,STEP:r.InterpolateDiscrete},Q="OPAQUE",H="MASK",W="BLEND";function q(e,t,n){for(const r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function X(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function K(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(let n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){const n=t.extras.targetNames;if(e.morphTargetInfluences.length===n.length){e.morphTargetDictionary={};for(let t=0,r=n.length;t<r;t++)e.morphTargetDictionary[n[t]]=t}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Y(e){let t;const n=e.extensions&&e.extensions[a.KHR_DRACO_MESH_COMPRESSION];if(t=n?"draco:"+n.bufferView+":"+n.indices+":"+J(n.attributes):e.indices+":"+J(e.attributes)+":"+e.mode,void 0!==e.targets)for(let n=0,r=e.targets.length;n<r;n++)t+=":"+J(e.targets[n]);return t}function J(e){let t="";const n=Object.keys(e).sort();for(let r=0,i=n.length;r<i;r++)t+=n[r]+":"+e[n[r]]+";";return t}function $(e){switch(e){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:throw new Error("THREE.GLTFLoader: Unsupported normalized accessor component type.")}}const Z=new r.Matrix4;class ee{constructor(e={},t={}){this.json=e,this.extensions={},this.plugins={},this.options=t,this.cache=new o,this.associations=new Map,this.primitiveCache={},this.nodeCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.sourceCache={},this.textureCache={},this.nodeNamesUsed={};let n=!1,i=!1,s=-1;"undefined"!=typeof navigator&&(n=!0===/^((?!chrome|android).)*safari/i.test(navigator.userAgent),i=navigator.userAgent.indexOf("Firefox")>-1,s=i?navigator.userAgent.match(/Firefox\/([0-9]+)\./)[1]:-1),"undefined"==typeof createImageBitmap||n||i&&s<98?this.textureLoader=new r.TextureLoader(this.options.manager):this.textureLoader=new r.ImageBitmapLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.textureLoader.setRequestHeader(this.options.requestHeader),this.fileLoader=new r.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}setExtensions(e){this.extensions=e}setPlugins(e){this.plugins=e}parse(e,t){const n=this,r=this.json,i=this.extensions;this.cache.removeAll(),this.nodeCache={},this._invokeAll((function(e){return e._markDefs&&e._markDefs()})),Promise.all(this._invokeAll((function(e){return e.beforeRoot&&e.beforeRoot()}))).then((function(){return Promise.all([n.getDependencies("scene"),n.getDependencies("animation"),n.getDependencies("camera")])})).then((function(t){const s={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};return q(i,s,r),X(s,r),Promise.all(n._invokeAll((function(e){return e.afterRoot&&e.afterRoot(s)}))).then((function(){for(const e of s.scenes)e.updateMatrixWorld();e(s)}))})).catch(t)}_markDefs(){const e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[];for(let n=0,r=t.length;n<r;n++){const r=t[n].joints;for(let t=0,n=r.length;t<n;t++)e[r[t]].isBone=!0}for(let t=0,r=e.length;t<r;t++){const r=e[t];void 0!==r.mesh&&(this._addNodeRef(this.meshCache,r.mesh),void 0!==r.skin&&(n[r.mesh].isSkinnedMesh=!0)),void 0!==r.camera&&this._addNodeRef(this.cameraCache,r.camera)}}_addNodeRef(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)}_getNodeRef(e,t,n){if(e.refs[t]<=1)return n;const r=n.clone(),i=(e,t)=>{const n=this.associations.get(e);null!=n&&this.associations.set(t,n);for(const[n,r]of e.children.entries())i(r,t.children[n])};return i(n,r),r.name+="_instance_"+e.uses[t]++,r}_invokeOne(e){const t=Object.values(this.plugins);t.push(this);for(let n=0;n<t.length;n++){const r=e(t[n]);if(r)return r}return null}_invokeAll(e){const t=Object.values(this.plugins);t.unshift(this);const n=[];for(let r=0;r<t.length;r++){const i=e(t[r]);i&&n.push(i)}return n}getDependency(e,t){const n=e+":"+t;let r=this.cache.get(n);if(!r){switch(e){case"scene":r=this.loadScene(t);break;case"node":r=this._invokeOne((function(e){return e.loadNode&&e.loadNode(t)}));break;case"mesh":r=this._invokeOne((function(e){return e.loadMesh&&e.loadMesh(t)}));break;case"accessor":r=this.loadAccessor(t);break;case"bufferView":r=this._invokeOne((function(e){return e.loadBufferView&&e.loadBufferView(t)}));break;case"buffer":r=this.loadBuffer(t);break;case"material":r=this._invokeOne((function(e){return e.loadMaterial&&e.loadMaterial(t)}));break;case"texture":r=this._invokeOne((function(e){return e.loadTexture&&e.loadTexture(t)}));break;case"skin":r=this.loadSkin(t);break;case"animation":r=this._invokeOne((function(e){return e.loadAnimation&&e.loadAnimation(t)}));break;case"camera":r=this.loadCamera(t);break;default:if(r=this._invokeOne((function(n){return n!=this&&n.getDependency&&n.getDependency(e,t)})),!r)throw new Error("Unknown type: "+e)}this.cache.add(n,r)}return r}getDependencies(e){let t=this.cache.get(e);if(!t){const n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t}loadBuffer(e){const t=this.json.buffers[e],n=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[a.KHR_BINARY_GLTF].body);const i=this.options;return new Promise((function(e,s){n.load(r.LoaderUtils.resolveURL(t.uri,i.path),e,void 0,(function(){s(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))}loadBufferView(e){const t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){const n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))}loadAccessor(e){const t=this,n=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse){const e=z[i.type],t=F[i.componentType],n=!0===i.normalized,s=new t(i.count*e);return Promise.resolve(new r.BufferAttribute(s,e,n))}const s=[];return void 0!==i.bufferView?s.push(this.getDependency("bufferView",i.bufferView)):s.push(null),void 0!==i.sparse&&(s.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(s).then((function(e){const s=e[0],o=z[i.type],a=F[i.componentType],c=a.BYTES_PER_ELEMENT,l=c*o,u=i.byteOffset||0,h=void 0!==i.bufferView?n.bufferViews[i.bufferView].byteStride:void 0,d=!0===i.normalized;let p,f;if(h&&h!==l){const e=Math.floor(u/h),n="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+e+":"+i.count;let l=t.cache.get(n);l||(p=new a(s,e*h,i.count*h/c),l=new r.InterleavedBuffer(p,h/c),t.cache.add(n,l)),f=new r.InterleavedBufferAttribute(l,o,u%h/c,d)}else p=null===s?new a(i.count*o):new a(s,u,i.count*o),f=new r.BufferAttribute(p,o,d);if(void 0!==i.sparse){const t=z.SCALAR,n=F[i.sparse.indices.componentType],c=i.sparse.indices.byteOffset||0,l=i.sparse.values.byteOffset||0,u=new n(e[1],c,i.sparse.count*t),h=new a(e[2],l,i.sparse.count*o);null!==s&&(f=new r.BufferAttribute(f.array.slice(),f.itemSize,f.normalized));for(let e=0,t=u.length;e<t;e++){const t=u[e];if(f.setX(t,h[e*o]),o>=2&&f.setY(t,h[e*o+1]),o>=3&&f.setZ(t,h[e*o+2]),o>=4&&f.setW(t,h[e*o+3]),o>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return f}))}loadTexture(e){const t=this.json,n=this.options,r=t.textures[e].source,i=t.images[r];let s=this.textureLoader;if(i.uri){const e=n.manager.getHandler(i.uri);null!==e&&(s=e)}return this.loadTextureImage(e,r,s)}loadTextureImage(e,t,n){const i=this,s=this.json,o=s.textures[e],a=s.images[t],c=(a.uri||a.bufferView)+":"+o.sampler;if(this.textureCache[c])return this.textureCache[c];const l=this.loadImageSource(t,n).then((function(t){t.flipY=!1,t.name=o.name||a.name||"",""===t.name&&"string"==typeof a.uri&&!1===a.uri.startsWith("data:image/")&&(t.name=a.uri);const n=(s.samplers||{})[o.sampler]||{};return t.magFilter=U[n.magFilter]||r.LinearFilter,t.minFilter=U[n.minFilter]||r.LinearMipmapLinearFilter,t.wrapS=k[n.wrapS]||r.RepeatWrapping,t.wrapT=k[n.wrapT]||r.RepeatWrapping,i.associations.set(t,{textures:e}),t})).catch((function(){return null}));return this.textureCache[c]=l,l}loadImageSource(e,t){const n=this,i=this.json,s=this.options;if(void 0!==this.sourceCache[e])return this.sourceCache[e].then((e=>e.clone()));const o=i.images[e],a=self.URL||self.webkitURL;let c=o.uri||"",l=!1;if(void 0!==o.bufferView)c=n.getDependency("bufferView",o.bufferView).then((function(e){l=!0;const t=new Blob([e],{type:o.mimeType});return c=a.createObjectURL(t),c}));else if(void 0===o.uri)throw new Error("THREE.GLTFLoader: Image "+e+" is missing URI and bufferView");const u=Promise.resolve(c).then((function(e){return new Promise((function(n,i){let o=n;!0===t.isImageBitmapLoader&&(o=function(e){const t=new r.Texture(e);t.needsUpdate=!0,n(t)}),t.load(r.LoaderUtils.resolveURL(e,s.path),o,void 0,i)}))})).then((function(e){var t;return!0===l&&a.revokeObjectURL(c),X(e,o),e.userData.mimeType=o.mimeType||((t=o.uri).search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/)?"image/jpeg":t.search(/\.webp($|\?)/i)>0||0===t.search(/^data\:image\/webp/)?"image/webp":"image/png"),e})).catch((function(e){throw console.error("THREE.GLTFLoader: Couldn't load texture",c),e}));return this.sourceCache[e]=u,u}assignTexture(e,t,n,r){const i=this;return this.getDependency("texture",n.index).then((function(s){if(!s)return null;if(void 0!==n.texCoord&&n.texCoord>0&&((s=s.clone()).channel=n.texCoord),i.extensions[a.KHR_TEXTURE_TRANSFORM]){const e=void 0!==n.extensions?n.extensions[a.KHR_TEXTURE_TRANSFORM]:void 0;if(e){const t=i.associations.get(s);s=i.extensions[a.KHR_TEXTURE_TRANSFORM].extendTexture(s,e),i.associations.set(s,t)}}return void 0!==r&&(s.colorSpace=r),e[t]=s,s}))}assignFinalMaterial(e){const t=e.geometry;let n=e.material;const i=void 0===t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal;if(e.isPoints){const e="PointsMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r.PointsMaterial,r.Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,t.sizeAttenuation=!1,this.cache.add(e,t)),n=t}else if(e.isLine){const e="LineBasicMaterial:"+n.uuid;let t=this.cache.get(e);t||(t=new r.LineBasicMaterial,r.Material.prototype.copy.call(t,n),t.color.copy(n.color),t.map=n.map,this.cache.add(e,t)),n=t}if(i||s||o){let e="ClonedMaterial:"+n.uuid+":";i&&(e+="derivative-tangents:"),s&&(e+="vertex-colors:"),o&&(e+="flat-shading:");let t=this.cache.get(e);t||(t=n.clone(),s&&(t.vertexColors=!0),o&&(t.flatShading=!0),i&&(t.normalScale&&(t.normalScale.y*=-1),t.clearcoatNormalScale&&(t.clearcoatNormalScale.y*=-1)),this.cache.add(e,t),this.associations.set(t,this.associations.get(n))),n=t}e.material=n}getMaterialType(){return r.MeshStandardMaterial}loadMaterial(e){const t=this,n=this.json,i=this.extensions,s=n.materials[e];let o;const c={},l=[];if((s.extensions||{})[a.KHR_MATERIALS_UNLIT]){const e=i[a.KHR_MATERIALS_UNLIT];o=e.getMaterialType(),l.push(e.extendParams(c,s,t))}else{const n=s.pbrMetallicRoughness||{};if(c.color=new r.Color(1,1,1),c.opacity=1,Array.isArray(n.baseColorFactor)){const e=n.baseColorFactor;c.color.setRGB(e[0],e[1],e[2],r.LinearSRGBColorSpace),c.opacity=e[3]}void 0!==n.baseColorTexture&&l.push(t.assignTexture(c,"map",n.baseColorTexture,r.SRGBColorSpace)),c.metalness=void 0!==n.metallicFactor?n.metallicFactor:1,c.roughness=void 0!==n.roughnessFactor?n.roughnessFactor:1,void 0!==n.metallicRoughnessTexture&&(l.push(t.assignTexture(c,"metalnessMap",n.metallicRoughnessTexture)),l.push(t.assignTexture(c,"roughnessMap",n.metallicRoughnessTexture))),o=this._invokeOne((function(t){return t.getMaterialType&&t.getMaterialType(e)})),l.push(Promise.all(this._invokeAll((function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,c)}))))}!0===s.doubleSided&&(c.side=r.DoubleSide);const u=s.alphaMode||Q;if(u===W?(c.transparent=!0,c.depthWrite=!1):(c.transparent=!1,u===H&&(c.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&o!==r.MeshBasicMaterial&&(l.push(t.assignTexture(c,"normalMap",s.normalTexture)),c.normalScale=new r.Vector2(1,1),void 0!==s.normalTexture.scale)){const e=s.normalTexture.scale;c.normalScale.set(e,e)}if(void 0!==s.occlusionTexture&&o!==r.MeshBasicMaterial&&(l.push(t.assignTexture(c,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(c.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&o!==r.MeshBasicMaterial){const e=s.emissiveFactor;c.emissive=(new r.Color).setRGB(e[0],e[1],e[2],r.LinearSRGBColorSpace)}return void 0!==s.emissiveTexture&&o!==r.MeshBasicMaterial&&l.push(t.assignTexture(c,"emissiveMap",s.emissiveTexture,r.SRGBColorSpace)),Promise.all(l).then((function(){const n=new o(c);return s.name&&(n.name=s.name),X(n,s),t.associations.set(n,{materials:e}),s.extensions&&q(i,n,s),n}))}createUniqueName(e){const t=r.PropertyBinding.sanitizeNodeName(e||"");return t in this.nodeNamesUsed?t+"_"+ ++this.nodeNamesUsed[t]:(this.nodeNamesUsed[t]=0,t)}loadGeometries(e){const t=this,n=this.extensions,i=this.primitiveCache;function s(e){return n[a.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return te(n,e,t)}))}const o=[];for(let n=0,c=e.length;n<c;n++){const c=e[n],l=Y(c),u=i[l];if(u)o.push(u.promise);else{let e;e=c.extensions&&c.extensions[a.KHR_DRACO_MESH_COMPRESSION]?s(c):te(new r.BufferGeometry,c,t),i[l]={primitive:c,promise:e},o.push(e)}}return Promise.all(o)}loadMesh(e){const t=this,n=this.json,s=this.extensions,o=n.meshes[e],a=o.primitives,c=[];for(let e=0,t=a.length;e<t;e++){const t=void 0===a[e].material?(void 0===(l=this.cache).DefaultMaterial&&(l.DefaultMaterial=new r.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:r.FrontSide})),l.DefaultMaterial):this.getDependency("material",a[e].material);c.push(t)}var l;return c.push(t.loadGeometries(a)),Promise.all(c).then((function(n){const c=n.slice(0,n.length-1),l=n[n.length-1],u=[];for(let n=0,h=l.length;n<h;n++){const h=l[n],d=a[n];let p;const f=c[n];if(d.mode===N.TRIANGLES||d.mode===N.TRIANGLE_STRIP||d.mode===N.TRIANGLE_FAN||void 0===d.mode)p=!0===o.isSkinnedMesh?new r.SkinnedMesh(h,f):new r.Mesh(h,f),!0===p.isSkinnedMesh&&p.normalizeSkinWeights(),d.mode===N.TRIANGLE_STRIP?p.geometry=i(p.geometry,r.TriangleStripDrawMode):d.mode===N.TRIANGLE_FAN&&(p.geometry=i(p.geometry,r.TriangleFanDrawMode));else if(d.mode===N.LINES)p=new r.LineSegments(h,f);else if(d.mode===N.LINE_STRIP)p=new r.Line(h,f);else if(d.mode===N.LINE_LOOP)p=new r.LineLoop(h,f);else{if(d.mode!==N.POINTS)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+d.mode);p=new r.Points(h,f)}Object.keys(p.geometry.morphAttributes).length>0&&K(p,o),p.name=t.createUniqueName(o.name||"mesh_"+e),X(p,o),d.extensions&&q(s,p,d),t.assignFinalMaterial(p),u.push(p)}for(let n=0,r=u.length;n<r;n++)t.associations.set(u[n],{meshes:e,primitives:n});if(1===u.length)return o.extensions&&q(s,u[0],o),u[0];const h=new r.Group;o.extensions&&q(s,h,o),t.associations.set(h,{meshes:e});for(let e=0,t=u.length;e<t;e++)h.add(u[e]);return h}))}loadCamera(e){let t;const n=this.json.cameras[e],i=n[n.type];if(i)return"perspective"===n.type?t=new r.PerspectiveCamera(r.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===n.type&&(t=new r.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),n.name&&(t.name=this.createUniqueName(n.name)),X(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")}loadSkin(e){const t=this.json.skins[e],n=[];for(let e=0,r=t.joints.length;e<r;e++)n.push(this._loadNodeShallow(t.joints[e]));return void 0!==t.inverseBindMatrices?n.push(this.getDependency("accessor",t.inverseBindMatrices)):n.push(null),Promise.all(n).then((function(e){const n=e.pop(),i=e,s=[],o=[];for(let e=0,a=i.length;e<a;e++){const a=i[e];if(a){s.push(a);const t=new r.Matrix4;null!==n&&t.fromArray(n.array,16*e),o.push(t)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[e])}return new r.Skeleton(s,o)}))}loadAnimation(e){const t=this.json,n=this,i=t.animations[e],s=i.name?i.name:"animation_"+e,o=[],a=[],c=[],l=[],u=[];for(let e=0,t=i.channels.length;e<t;e++){const t=i.channels[e],n=i.samplers[t.sampler],r=t.target,s=r.node,h=void 0!==i.parameters?i.parameters[n.input]:n.input,d=void 0!==i.parameters?i.parameters[n.output]:n.output;void 0!==r.node&&(o.push(this.getDependency("node",s)),a.push(this.getDependency("accessor",h)),c.push(this.getDependency("accessor",d)),l.push(n),u.push(r))}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c),Promise.all(l),Promise.all(u)]).then((function(e){const t=e[0],i=e[1],o=e[2],a=e[3],c=e[4],l=[];for(let e=0,r=t.length;e<r;e++){const r=t[e],s=i[e],u=o[e],h=a[e],d=c[e];if(void 0===r)continue;r.updateMatrix&&r.updateMatrix();const p=n._createAnimationTracks(r,s,u,h,d);if(p)for(let e=0;e<p.length;e++)l.push(p[e])}return new r.AnimationClip(s,void 0,l)}))}createNodeMesh(e){const t=this.json,n=this,r=t.nodes[e];return void 0===r.mesh?null:n.getDependency("mesh",r.mesh).then((function(e){const t=n._getNodeRef(n.meshCache,r.mesh,e);return void 0!==r.weights&&t.traverse((function(e){if(e.isMesh)for(let t=0,n=r.weights.length;t<n;t++)e.morphTargetInfluences[t]=r.weights[t]})),t}))}loadNode(e){const t=this,n=this.json.nodes[e],r=t._loadNodeShallow(e),i=[],s=n.children||[];for(let e=0,n=s.length;e<n;e++)i.push(t.getDependency("node",s[e]));const o=void 0===n.skin?Promise.resolve(null):t.getDependency("skin",n.skin);return Promise.all([r,Promise.all(i),o]).then((function(e){const t=e[0],n=e[1],r=e[2];null!==r&&t.traverse((function(e){e.isSkinnedMesh&&e.bind(r,Z)}));for(let e=0,r=n.length;e<r;e++)t.add(n[e]);return t}))}_loadNodeShallow(e){const t=this.json,n=this.extensions,i=this;if(void 0!==this.nodeCache[e])return this.nodeCache[e];const s=t.nodes[e],o=s.name?i.createUniqueName(s.name):"",a=[],c=i._invokeOne((function(t){return t.createNodeMesh&&t.createNodeMesh(e)}));return c&&a.push(c),void 0!==s.camera&&a.push(i.getDependency("camera",s.camera).then((function(e){return i._getNodeRef(i.cameraCache,s.camera,e)}))),i._invokeAll((function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)})).forEach((function(e){a.push(e)})),this.nodeCache[e]=Promise.all(a).then((function(t){let a;if(a=!0===s.isBone?new r.Bone:t.length>1?new r.Group:1===t.length?t[0]:new r.Object3D,a!==t[0])for(let e=0,n=t.length;e<n;e++)a.add(t[e]);if(s.name&&(a.userData.name=s.name,a.name=o),X(a,s),s.extensions&&q(n,a,s),void 0!==s.matrix){const e=new r.Matrix4;e.fromArray(s.matrix),a.applyMatrix4(e)}else void 0!==s.translation&&a.position.fromArray(s.translation),void 0!==s.rotation&&a.quaternion.fromArray(s.rotation),void 0!==s.scale&&a.scale.fromArray(s.scale);return i.associations.has(a)||i.associations.set(a,{}),i.associations.get(a).nodes=e,a})),this.nodeCache[e]}loadScene(e){const t=this.extensions,n=this.json.scenes[e],i=this,s=new r.Group;n.name&&(s.name=i.createUniqueName(n.name)),X(s,n),n.extensions&&q(t,s,n);const o=n.nodes||[],a=[];for(let e=0,t=o.length;e<t;e++)a.push(i.getDependency("node",o[e]));return Promise.all(a).then((function(e){for(let t=0,n=e.length;t<n;t++)s.add(e[t]);return i.associations=(e=>{const t=new Map;for(const[e,n]of i.associations)(e instanceof r.Material||e instanceof r.Texture)&&t.set(e,n);return e.traverse((e=>{const n=i.associations.get(e);null!=n&&t.set(e,n)})),t})(s),s}))}_createAnimationTracks(e,t,n,i,s){const o=[],a=e.name?e.name:e.uuid,c=[];let l;switch(j[s.path]===j.weights?e.traverse((function(e){e.morphTargetInfluences&&c.push(e.name?e.name:e.uuid)})):c.push(a),j[s.path]){case j.weights:l=r.NumberKeyframeTrack;break;case j.rotation:l=r.QuaternionKeyframeTrack;break;case j.position:case j.scale:l=r.VectorKeyframeTrack;break;default:if(1===n.itemSize)l=r.NumberKeyframeTrack;else l=r.VectorKeyframeTrack}const u=void 0!==i.interpolation?V[i.interpolation]:r.InterpolateLinear,h=this._getArrayFromAccessor(n);for(let e=0,n=c.length;e<n;e++){const n=new l(c[e]+"."+j[s.path],t.array,h,u);"CUBICSPLINE"===i.interpolation&&this._createCubicSplineTrackInterpolant(n),o.push(n)}return o}_getArrayFromAccessor(e){let t=e.array;if(e.normalized){const e=$(t.constructor),n=new Float32Array(t.length);for(let r=0,i=t.length;r<i;r++)n[r]=t[r]*e;t=n}return t}_createCubicSplineTrackInterpolant(e){e.createInterpolant=function(e){return new(this instanceof r.QuaternionKeyframeTrack?L:D)(this.times,this.values,this.getValueSize()/3,e)},e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0}}function te(e,t,n){const i=t.attributes,s=[];function o(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(const t in i){const n=G[t]||t.toLowerCase();n in e.attributes||s.push(o(i[t],n))}if(void 0!==t.indices&&!e.index){const r=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));s.push(r)}return r.ColorManagement.workingColorSpace!==r.LinearSRGBColorSpace&&"COLOR_0"in i&&console.warn(`THREE.GLTFLoader: Converting vertex colors from "srgb-linear" to "${r.ColorManagement.workingColorSpace}" not supported.`),X(e,t),function(e,t,n){const i=t.attributes,s=new r.Box3;if(void 0===i.POSITION)return;{const e=n.json.accessors[i.POSITION],t=e.min,o=e.max;if(void 0===t||void 0===o)return void console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.");if(s.set(new r.Vector3(t[0],t[1],t[2]),new r.Vector3(o[0],o[1],o[2])),e.normalized){const t=$(F[e.componentType]);s.min.multiplyScalar(t),s.max.multiplyScalar(t)}}const o=t.targets;if(void 0!==o){const e=new r.Vector3,t=new r.Vector3;for(let r=0,i=o.length;r<i;r++){const i=o[r];if(void 0!==i.POSITION){const r=n.json.accessors[i.POSITION],s=r.min,o=r.max;if(void 0!==s&&void 0!==o){if(t.setX(Math.max(Math.abs(s[0]),Math.abs(o[0]))),t.setY(Math.max(Math.abs(s[1]),Math.abs(o[1]))),t.setZ(Math.max(Math.abs(s[2]),Math.abs(o[2]))),r.normalized){const e=$(F[r.componentType]);t.multiplyScalar(e)}e.max(t)}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(e)}e.boundingBox=s;const a=new r.Sphere;s.getCenter(a.center),a.radius=s.min.distanceTo(s.max)/2,e.boundingSphere=a}(e,t,n),Promise.all(s).then((function(){return void 0!==t.targets?function(e,t,n){let r=!1,i=!1,s=!1;for(let e=0,n=t.length;e<n;e++){const n=t[e];if(void 0!==n.POSITION&&(r=!0),void 0!==n.NORMAL&&(i=!0),void 0!==n.COLOR_0&&(s=!0),r&&i&&s)break}if(!r&&!i&&!s)return Promise.resolve(e);const o=[],a=[],c=[];for(let l=0,u=t.length;l<u;l++){const u=t[l];if(r){const t=void 0!==u.POSITION?n.getDependency("accessor",u.POSITION):e.attributes.position;o.push(t)}if(i){const t=void 0!==u.NORMAL?n.getDependency("accessor",u.NORMAL):e.attributes.normal;a.push(t)}if(s){const t=void 0!==u.COLOR_0?n.getDependency("accessor",u.COLOR_0):e.attributes.color;c.push(t)}}return Promise.all([Promise.all(o),Promise.all(a),Promise.all(c)]).then((function(t){const n=t[0],o=t[1],a=t[2];return r&&(e.morphAttributes.position=n),i&&(e.morphAttributes.normal=o),s&&(e.morphAttributes.color=a),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}},8263:(e,t,n)=>{"use strict";n.r(t),n.d(t,{KTX2Loader:()=>P});var r=n(9437);class i{constructor(e=4){this.pool=e,this.queue=[],this.workers=[],this.workersResolve=[],this.workerStatus=0}_initWorker(e){if(!this.workers[e]){const t=this.workerCreator();t.addEventListener("message",this._onMessage.bind(this,e)),this.workers[e]=t}}_getIdleWorker(){for(let e=0;e<this.pool;e++)if(!(this.workerStatus&1<<e))return e;return-1}_onMessage(e,t){const n=this.workersResolve[e];if(n&&n(t),this.queue.length){const{resolve:t,msg:n,transfer:r}=this.queue.shift();this.workersResolve[e]=t,this.workers[e].postMessage(n,r)}else this.workerStatus^=1<<e}setWorkerCreator(e){this.workerCreator=e}setWorkerLimit(e){this.pool=e}postMessage(e,t){return new Promise((n=>{const r=this._getIdleWorker();-1!==r?(this._initWorker(r),this.workerStatus|=1<<r,this.workersResolve[r]=n,this.workers[r].postMessage(e,t)):this.queue.push({resolve:n,msg:e,transfer:t})}))}dispose(){this.workers.forEach((e=>e.terminate())),this.workersResolve.length=0,this.workers.length=0,this.queue.length=0,this.workerStatus=0}}const s=9,o=15,a=16,c=22,l=37,u=43,h=76,d=83,p=97,f=100,m=103,g=109,A=165,y=166;class _{constructor(){this.vkFormat=0,this.typeSize=1,this.pixelWidth=0,this.pixelHeight=0,this.pixelDepth=0,this.layerCount=0,this.faceCount=1,this.supercompressionScheme=0,this.levels=[],this.dataFormatDescriptor=[{vendorId:0,descriptorType:0,descriptorBlockSize:0,versionNumber:2,colorModel:0,colorPrimaries:1,transferFunction:2,flags:0,texelBlockDimension:[0,0,0,0],bytesPlane:[0,0,0,0,0,0,0,0],samples:[]}],this.keyValue={},this.globalData=null}}class v{constructor(e,t,n,r){this._dataView=new DataView(e.buffer,e.byteOffset+t,n),this._littleEndian=r,this._offset=0}_nextUint8(){const e=this._dataView.getUint8(this._offset);return this._offset+=1,e}_nextUint16(){const e=this._dataView.getUint16(this._offset,this._littleEndian);return this._offset+=2,e}_nextUint32(){const e=this._dataView.getUint32(this._offset,this._littleEndian);return this._offset+=4,e}_nextUint64(){const e=this._dataView.getUint32(this._offset,this._littleEndian)+2**32*this._dataView.getUint32(this._offset+4,this._littleEndian);return this._offset+=8,e}_nextInt32(){const e=this._dataView.getInt32(this._offset,this._littleEndian);return this._offset+=4,e}_skip(e){return this._offset+=e,this}_scan(e,t=0){const n=this._offset;let r=0;for(;this._dataView.getUint8(this._offset)!==t&&r<e;)r++,this._offset++;return r<e&&this._offset++,new Uint8Array(this._dataView.buffer,this._dataView.byteOffset+n,r)}}new Uint8Array([0]);const b=[171,75,84,88,32,50,48,187,13,10,26,10];function x(e){return"undefined"!=typeof TextDecoder?(new TextDecoder).decode(e):Buffer.from(e).toString("utf8")}let w,E,T;const S={env:{emscripten_notify_memory_growth:function(e){T=new Uint8Array(E.exports.memory.buffer)}}};class M{init(){return w||(w="undefined"!=typeof fetch?fetch("data:application/wasm;base64,"+C).then((e=>e.arrayBuffer())).then((e=>WebAssembly.instantiate(e,S))).then(this._init):WebAssembly.instantiate(Buffer.from(C,"base64"),S).then(this._init),w)}_init(e){E=e.instance,S.env.emscripten_notify_memory_growth(0)}decode(e,t=0){if(!E)throw new Error("ZSTDDecoder: Await .init() before decoding.");const n=e.byteLength,r=E.exports.malloc(n);T.set(e,r),t=t||Number(E.exports.ZSTD_findDecompressedSize(r,n));const i=E.exports.malloc(t),s=E.exports.ZSTD_decompress(i,t,r,n),o=T.slice(i,i+s);return E.exports.free(r),E.exports.free(i),o}}const C="AGFzbQEAAAABpQEVYAF/AX9gAn9/AGADf39/AX9gBX9/f39/AX9gAX8AYAJ/fwF/YAR/f39/AX9gA39/fwBgBn9/f39/fwF/YAd/f39/f39/AX9gAn9/AX5gAn5+AX5gAABgBX9/f39/AGAGf39/f39/AGAIf39/f39/f38AYAl/f39/f39/f38AYAABf2AIf39/f39/f38Bf2ANf39/f39/f39/f39/fwF/YAF/AX4CJwEDZW52H2Vtc2NyaXB0ZW5fbm90aWZ5X21lbW9yeV9ncm93dGgABANpaAEFAAAFAgEFCwACAQABAgIFBQcAAwABDgsBAQcAEhMHAAUBDAQEAAANBwQCAgYCBAgDAwMDBgEACQkHBgICAAYGAgQUBwYGAwIGAAMCAQgBBwUGCgoEEQAEBAEIAwgDBQgDEA8IAAcABAUBcAECAgUEAQCAAgYJAX8BQaCgwAILB2AHBm1lbW9yeQIABm1hbGxvYwAoBGZyZWUAJgxaU1REX2lzRXJyb3IAaBlaU1REX2ZpbmREZWNvbXByZXNzZWRTaXplAFQPWlNURF9kZWNvbXByZXNzAEoGX3N0YXJ0ACQJBwEAQQELASQKussBaA8AIAAgACgCBCABajYCBAsZACAAKAIAIAAoAgRBH3F0QQAgAWtBH3F2CwgAIABBiH9LC34BBH9BAyEBIAAoAgQiA0EgTQRAIAAoAggiASAAKAIQTwRAIAAQDQ8LIAAoAgwiAiABRgRAQQFBAiADQSBJGw8LIAAgASABIAJrIANBA3YiBCABIARrIAJJIgEbIgJrIgQ2AgggACADIAJBA3RrNgIEIAAgBCgAADYCAAsgAQsUAQF/IAAgARACIQIgACABEAEgAgv3AQECfyACRQRAIABCADcCACAAQQA2AhAgAEIANwIIQbh/DwsgACABNgIMIAAgAUEEajYCECACQQRPBEAgACABIAJqIgFBfGoiAzYCCCAAIAMoAAA2AgAgAUF/ai0AACIBBEAgAEEIIAEQFGs2AgQgAg8LIABBADYCBEF/DwsgACABNgIIIAAgAS0AACIDNgIAIAJBfmoiBEEBTQRAIARBAWtFBEAgACABLQACQRB0IANyIgM2AgALIAAgAS0AAUEIdCADajYCAAsgASACakF/ai0AACIBRQRAIABBADYCBEFsDwsgAEEoIAEQFCACQQN0ams2AgQgAgsWACAAIAEpAAA3AAAgACABKQAINwAICy8BAX8gAUECdEGgHWooAgAgACgCAEEgIAEgACgCBGprQR9xdnEhAiAAIAEQASACCyEAIAFCz9bTvtLHq9lCfiAAfEIfiUKHla+vmLbem55/fgsdAQF/IAAoAgggACgCDEYEfyAAKAIEQSBGBUEACwuCBAEDfyACQYDAAE8EQCAAIAEgAhBnIAAPCyAAIAJqIQMCQCAAIAFzQQNxRQRAAkAgAkEBSARAIAAhAgwBCyAAQQNxRQRAIAAhAgwBCyAAIQIDQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADTw0BIAJBA3ENAAsLAkAgA0F8cSIEQcAASQ0AIAIgBEFAaiIFSw0AA0AgAiABKAIANgIAIAIgASgCBDYCBCACIAEoAgg2AgggAiABKAIMNgIMIAIgASgCEDYCECACIAEoAhQ2AhQgAiABKAIYNgIYIAIgASgCHDYCHCACIAEoAiA2AiAgAiABKAIkNgIkIAIgASgCKDYCKCACIAEoAiw2AiwgAiABKAIwNgIwIAIgASgCNDYCNCACIAEoAjg2AjggAiABKAI8NgI8IAFBQGshASACQUBrIgIgBU0NAAsLIAIgBE8NAQNAIAIgASgCADYCACABQQRqIQEgAkEEaiICIARJDQALDAELIANBBEkEQCAAIQIMAQsgA0F8aiIEIABJBEAgACECDAELIAAhAgNAIAIgAS0AADoAACACIAEtAAE6AAEgAiABLQACOgACIAIgAS0AAzoAAyABQQRqIQEgAkEEaiICIARNDQALCyACIANJBEADQCACIAEtAAA6AAAgAUEBaiEBIAJBAWoiAiADRw0ACwsgAAsMACAAIAEpAAA3AAALQQECfyAAKAIIIgEgACgCEEkEQEEDDwsgACAAKAIEIgJBB3E2AgQgACABIAJBA3ZrIgE2AgggACABKAAANgIAQQALDAAgACABKAIANgAAC/cCAQJ/AkAgACABRg0AAkAgASACaiAASwRAIAAgAmoiBCABSw0BCyAAIAEgAhALDwsgACABc0EDcSEDAkACQCAAIAFJBEAgAwRAIAAhAwwDCyAAQQNxRQRAIAAhAwwCCyAAIQMDQCACRQ0EIAMgAS0AADoAACABQQFqIQEgAkF/aiECIANBAWoiA0EDcQ0ACwwBCwJAIAMNACAEQQNxBEADQCACRQ0FIAAgAkF/aiICaiIDIAEgAmotAAA6AAAgA0EDcQ0ACwsgAkEDTQ0AA0AgACACQXxqIgJqIAEgAmooAgA2AgAgAkEDSw0ACwsgAkUNAgNAIAAgAkF/aiICaiABIAJqLQAAOgAAIAINAAsMAgsgAkEDTQ0AIAIhBANAIAMgASgCADYCACABQQRqIQEgA0EEaiEDIARBfGoiBEEDSw0ACyACQQNxIQILIAJFDQADQCADIAEtAAA6AAAgA0EBaiEDIAFBAWohASACQX9qIgINAAsLIAAL8wICAn8BfgJAIAJFDQAgACACaiIDQX9qIAE6AAAgACABOgAAIAJBA0kNACADQX5qIAE6AAAgACABOgABIANBfWogAToAACAAIAE6AAIgAkEHSQ0AIANBfGogAToAACAAIAE6AAMgAkEJSQ0AIABBACAAa0EDcSIEaiIDIAFB/wFxQYGChAhsIgE2AgAgAyACIARrQXxxIgRqIgJBfGogATYCACAEQQlJDQAgAyABNgIIIAMgATYCBCACQXhqIAE2AgAgAkF0aiABNgIAIARBGUkNACADIAE2AhggAyABNgIUIAMgATYCECADIAE2AgwgAkFwaiABNgIAIAJBbGogATYCACACQWhqIAE2AgAgAkFkaiABNgIAIAQgA0EEcUEYciIEayICQSBJDQAgAa0iBUIghiAFhCEFIAMgBGohAQNAIAEgBTcDGCABIAU3AxAgASAFNwMIIAEgBTcDACABQSBqIQEgAkFgaiICQR9LDQALCyAACy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAIajYCACADCy8BAn8gACgCBCAAKAIAQQJ0aiICLQACIQMgACACLwEAIAEgAi0AAxAFajYCACADCx8AIAAgASACKAIEEAg2AgAgARAEGiAAIAJBCGo2AgQLCAAgAGdBH3MLugUBDX8jAEEQayIKJAACfyAEQQNNBEAgCkEANgIMIApBDGogAyAEEAsaIAAgASACIApBDGpBBBAVIgBBbCAAEAMbIAAgACAESxsMAQsgAEEAIAEoAgBBAXRBAmoQECENQVQgAygAACIGQQ9xIgBBCksNABogAiAAQQVqNgIAIAMgBGoiAkF8aiEMIAJBeWohDiACQXtqIRAgAEEGaiELQQQhBSAGQQR2IQRBICAAdCIAQQFyIQkgASgCACEPQQAhAiADIQYCQANAIAlBAkggAiAPS3JFBEAgAiEHAkAgCARAA0AgBEH//wNxQf//A0YEQCAHQRhqIQcgBiAQSQR/IAZBAmoiBigAACAFdgUgBUEQaiEFIARBEHYLIQQMAQsLA0AgBEEDcSIIQQNGBEAgBUECaiEFIARBAnYhBCAHQQNqIQcMAQsLIAcgCGoiByAPSw0EIAVBAmohBQNAIAIgB0kEQCANIAJBAXRqQQA7AQAgAkEBaiECDAELCyAGIA5LQQAgBiAFQQN1aiIHIAxLG0UEQCAHKAAAIAVBB3EiBXYhBAwCCyAEQQJ2IQQLIAYhBwsCfyALQX9qIAQgAEF/anEiBiAAQQF0QX9qIgggCWsiEUkNABogBCAIcSIEQQAgESAEIABIG2shBiALCyEIIA0gAkEBdGogBkF/aiIEOwEAIAlBASAGayAEIAZBAUgbayEJA0AgCSAASARAIABBAXUhACALQX9qIQsMAQsLAn8gByAOS0EAIAcgBSAIaiIFQQN1aiIGIAxLG0UEQCAFQQdxDAELIAUgDCIGIAdrQQN0awshBSACQQFqIQIgBEUhCCAGKAAAIAVBH3F2IQQMAQsLQWwgCUEBRyAFQSBKcg0BGiABIAJBf2o2AgAgBiAFQQdqQQN1aiADawwBC0FQCyEAIApBEGokACAACwkAQQFBBSAAGwsMACAAIAEoAAA2AAALqgMBCn8jAEHwAGsiCiQAIAJBAWohDiAAQQhqIQtBgIAEIAVBf2p0QRB1IQxBACECQQEhBkEBIAV0IglBf2oiDyEIA0AgAiAORkUEQAJAIAEgAkEBdCINai8BACIHQf//A0YEQCALIAhBA3RqIAI2AgQgCEF/aiEIQQEhBwwBCyAGQQAgDCAHQRB0QRB1ShshBgsgCiANaiAHOwEAIAJBAWohAgwBCwsgACAFNgIEIAAgBjYCACAJQQN2IAlBAXZqQQNqIQxBACEAQQAhBkEAIQIDQCAGIA5GBEADQAJAIAAgCUYNACAKIAsgAEEDdGoiASgCBCIGQQF0aiICIAIvAQAiAkEBajsBACABIAUgAhAUayIIOgADIAEgAiAIQf8BcXQgCWs7AQAgASAEIAZBAnQiAmooAgA6AAIgASACIANqKAIANgIEIABBAWohAAwBCwsFIAEgBkEBdGouAQAhDUEAIQcDQCAHIA1ORQRAIAsgAkEDdGogBjYCBANAIAIgDGogD3EiAiAISw0ACyAHQQFqIQcMAQsLIAZBAWohBgwBCwsgCkHwAGokAAsjAEIAIAEQCSAAhUKHla+vmLbem55/fkLj3MqV/M7y9YV/fAsQACAAQn43AwggACABNgIACyQBAX8gAARAIAEoAgQiAgRAIAEoAgggACACEQEADwsgABAmCwsfACAAIAEgAi8BABAINgIAIAEQBBogACACQQRqNgIEC0oBAX9BoCAoAgAiASAAaiIAQX9MBEBBiCBBMDYCAEF/DwsCQCAAPwBBEHRNDQAgABBmDQBBiCBBMDYCAEF/DwtBoCAgADYCACABC9cBAQh/Qbp/IQoCQCACKAIEIgggAigCACIJaiIOIAEgAGtLDQBBbCEKIAkgBCADKAIAIgtrSw0AIAAgCWoiBCACKAIIIgxrIQ0gACABQWBqIg8gCyAJQQAQKSADIAkgC2o2AgACQAJAIAwgBCAFa00EQCANIQUMAQsgDCAEIAZrSw0CIAcgDSAFayIAaiIBIAhqIAdNBEAgBCABIAgQDxoMAgsgBCABQQAgAGsQDyEBIAIgACAIaiIINgIEIAEgAGshBAsgBCAPIAUgCEEBECkLIA4hCgsgCgubAgEBfyMAQYABayINJAAgDSADNgJ8AkAgAkEDSwRAQX8hCQwBCwJAAkACQAJAIAJBAWsOAwADAgELIAZFBEBBuH8hCQwEC0FsIQkgBS0AACICIANLDQMgACAHIAJBAnQiAmooAgAgAiAIaigCABA7IAEgADYCAEEBIQkMAwsgASAJNgIAQQAhCQwCCyAKRQRAQWwhCQwCC0EAIQkgC0UgDEEZSHINAUEIIAR0QQhqIQBBACECA0AgAiAATw0CIAJBQGshAgwAAAsAC0FsIQkgDSANQfwAaiANQfgAaiAFIAYQFSICEAMNACANKAJ4IgMgBEsNACAAIA0gDSgCfCAHIAggAxAYIAEgADYCACACIQkLIA1BgAFqJAAgCQsLACAAIAEgAhALGgsQACAALwAAIAAtAAJBEHRyCy8AAn9BuH8gAUEISQ0AGkFyIAAoAAQiAEF3Sw0AGkG4fyAAQQhqIgAgACABSxsLCwkAIAAgATsAAAsDAAELigYBBX8gACAAKAIAIgVBfnE2AgBBACAAIAVBAXZqQYQgKAIAIgQgAEYbIQECQAJAIAAoAgQiAkUNACACKAIAIgNBAXENACACQQhqIgUgA0EBdkF4aiIDQQggA0EISxtnQR9zQQJ0QYAfaiIDKAIARgRAIAMgAigCDDYCAAsgAigCCCIDBEAgAyACKAIMNgIECyACKAIMIgMEQCADIAIoAgg2AgALIAIgAigCACAAKAIAQX5xajYCAEGEICEAAkACQCABRQ0AIAEgAjYCBCABKAIAIgNBAXENASADQQF2QXhqIgNBCCADQQhLG2dBH3NBAnRBgB9qIgMoAgAgAUEIakYEQCADIAEoAgw2AgALIAEoAggiAwRAIAMgASgCDDYCBAsgASgCDCIDBEAgAyABKAIINgIAQYQgKAIAIQQLIAIgAigCACABKAIAQX5xajYCACABIARGDQAgASABKAIAQQF2akEEaiEACyAAIAI2AgALIAIoAgBBAXZBeGoiAEEIIABBCEsbZ0Efc0ECdEGAH2oiASgCACEAIAEgBTYCACACIAA2AgwgAkEANgIIIABFDQEgACAFNgIADwsCQCABRQ0AIAEoAgAiAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAigCACABQQhqRgRAIAIgASgCDDYCAAsgASgCCCICBEAgAiABKAIMNgIECyABKAIMIgIEQCACIAEoAgg2AgBBhCAoAgAhBAsgACAAKAIAIAEoAgBBfnFqIgI2AgACQCABIARHBEAgASABKAIAQQF2aiAANgIEIAAoAgAhAgwBC0GEICAANgIACyACQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgIoAgAhASACIABBCGoiAjYCACAAIAE2AgwgAEEANgIIIAFFDQEgASACNgIADwsgBUEBdkF4aiIBQQggAUEISxtnQR9zQQJ0QYAfaiICKAIAIQEgAiAAQQhqIgI2AgAgACABNgIMIABBADYCCCABRQ0AIAEgAjYCAAsLDgAgAARAIABBeGoQJQsLgAIBA38CQCAAQQ9qQXhxQYQgKAIAKAIAQQF2ayICEB1Bf0YNAAJAQYQgKAIAIgAoAgAiAUEBcQ0AIAFBAXZBeGoiAUEIIAFBCEsbZ0Efc0ECdEGAH2oiASgCACAAQQhqRgRAIAEgACgCDDYCAAsgACgCCCIBBEAgASAAKAIMNgIECyAAKAIMIgFFDQAgASAAKAIINgIAC0EBIQEgACAAKAIAIAJBAXRqIgI2AgAgAkEBcQ0AIAJBAXZBeGoiAkEIIAJBCEsbZ0Efc0ECdEGAH2oiAygCACECIAMgAEEIaiIDNgIAIAAgAjYCDCAAQQA2AgggAkUNACACIAM2AgALIAELtwIBA38CQAJAIABBASAAGyICEDgiAA0AAkACQEGEICgCACIARQ0AIAAoAgAiA0EBcQ0AIAAgA0EBcjYCACADQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgAgAEEIakYEQCABIAAoAgw2AgALIAAoAggiAQRAIAEgACgCDDYCBAsgACgCDCIBBEAgASAAKAIINgIACyACECchAkEAIQFBhCAoAgAhACACDQEgACAAKAIAQX5xNgIAQQAPCyACQQ9qQXhxIgMQHSICQX9GDQIgAkEHakF4cSIAIAJHBEAgACACaxAdQX9GDQMLAkBBhCAoAgAiAUUEQEGAICAANgIADAELIAAgATYCBAtBhCAgADYCACAAIANBAXRBAXI2AgAMAQsgAEUNAQsgAEEIaiEBCyABC7kDAQJ/IAAgA2ohBQJAIANBB0wEQANAIAAgBU8NAiAAIAItAAA6AAAgAEEBaiEAIAJBAWohAgwAAAsACyAEQQFGBEACQCAAIAJrIgZBB00EQCAAIAItAAA6AAAgACACLQABOgABIAAgAi0AAjoAAiAAIAItAAM6AAMgAEEEaiACIAZBAnQiBkHAHmooAgBqIgIQFyACIAZB4B5qKAIAayECDAELIAAgAhAMCyACQQhqIQIgAEEIaiEACwJAAkACQAJAIAUgAU0EQCAAIANqIQEgBEEBRyAAIAJrQQ9Kcg0BA0AgACACEAwgAkEIaiECIABBCGoiACABSQ0ACwwFCyAAIAFLBEAgACEBDAQLIARBAUcgACACa0EPSnINASAAIQMgAiEEA0AgAyAEEAwgBEEIaiEEIANBCGoiAyABSQ0ACwwCCwNAIAAgAhAHIAJBEGohAiAAQRBqIgAgAUkNAAsMAwsgACEDIAIhBANAIAMgBBAHIARBEGohBCADQRBqIgMgAUkNAAsLIAIgASAAa2ohAgsDQCABIAVPDQEgASACLQAAOgAAIAFBAWohASACQQFqIQIMAAALAAsLQQECfyAAIAAoArjgASIDNgLE4AEgACgCvOABIQQgACABNgK84AEgACABIAJqNgK44AEgACABIAQgA2tqNgLA4AELpgEBAX8gACAAKALs4QEQFjYCyOABIABCADcD+OABIABCADcDuOABIABBwOABakIANwMAIABBqNAAaiIBQYyAgOAANgIAIABBADYCmOIBIABCADcDiOEBIABCAzcDgOEBIABBrNABakHgEikCADcCACAAQbTQAWpB6BIoAgA2AgAgACABNgIMIAAgAEGYIGo2AgggACAAQaAwajYCBCAAIABBEGo2AgALYQEBf0G4fyEDAkAgAUEDSQ0AIAIgABAhIgFBA3YiADYCCCACIAFBAXE2AgQgAiABQQF2QQNxIgM2AgACQCADQX9qIgFBAksNAAJAIAFBAWsOAgEAAgtBbA8LIAAhAwsgAwsMACAAIAEgAkEAEC4LiAQCA38CfiADEBYhBCAAQQBBKBAQIQAgBCACSwRAIAQPCyABRQRAQX8PCwJAAkAgA0EBRg0AIAEoAAAiBkGo6r5pRg0AQXYhAyAGQXBxQdDUtMIBRw0BQQghAyACQQhJDQEgAEEAQSgQECEAIAEoAAQhASAAQQE2AhQgACABrTcDAEEADwsgASACIAMQLyIDIAJLDQAgACADNgIYQXIhAyABIARqIgVBf2otAAAiAkEIcQ0AIAJBIHEiBkUEQEFwIQMgBS0AACIFQacBSw0BIAVBB3GtQgEgBUEDdkEKaq2GIgdCA4h+IAd8IQggBEEBaiEECyACQQZ2IQMgAkECdiEFAkAgAkEDcUF/aiICQQJLBEBBACECDAELAkACQAJAIAJBAWsOAgECAAsgASAEai0AACECIARBAWohBAwCCyABIARqLwAAIQIgBEECaiEEDAELIAEgBGooAAAhAiAEQQRqIQQLIAVBAXEhBQJ+AkACQAJAIANBf2oiA0ECTQRAIANBAWsOAgIDAQtCfyAGRQ0DGiABIARqMQAADAMLIAEgBGovAACtQoACfAwCCyABIARqKAAArQwBCyABIARqKQAACyEHIAAgBTYCICAAIAI2AhwgACAHNwMAQQAhAyAAQQA2AhQgACAHIAggBhsiBzcDCCAAIAdCgIAIIAdCgIAIVBs+AhALIAMLWwEBf0G4fyEDIAIQFiICIAFNBH8gACACakF/ai0AACIAQQNxQQJ0QaAeaigCACACaiAAQQZ2IgFBAnRBsB5qKAIAaiAAQSBxIgBFaiABRSAAQQV2cWoFQbh/CwsdACAAKAKQ4gEQWiAAQQA2AqDiASAAQgA3A5DiAQu1AwEFfyMAQZACayIKJABBuH8hBgJAIAVFDQAgBCwAACIIQf8BcSEHAkAgCEF/TARAIAdBgn9qQQF2IgggBU8NAkFsIQYgB0GBf2oiBUGAAk8NAiAEQQFqIQdBACEGA0AgBiAFTwRAIAUhBiAIIQcMAwUgACAGaiAHIAZBAXZqIgQtAABBBHY6AAAgACAGQQFyaiAELQAAQQ9xOgAAIAZBAmohBgwBCwAACwALIAcgBU8NASAAIARBAWogByAKEFMiBhADDQELIAYhBEEAIQYgAUEAQTQQECEJQQAhBQNAIAQgBkcEQCAAIAZqIggtAAAiAUELSwRAQWwhBgwDBSAJIAFBAnRqIgEgASgCAEEBajYCACAGQQFqIQZBASAILQAAdEEBdSAFaiEFDAILAAsLQWwhBiAFRQ0AIAUQFEEBaiIBQQxLDQAgAyABNgIAQQFBASABdCAFayIDEBQiAXQgA0cNACAAIARqIAFBAWoiADoAACAJIABBAnRqIgAgACgCAEEBajYCACAJKAIEIgBBAkkgAEEBcXINACACIARBAWo2AgAgB0EBaiEGCyAKQZACaiQAIAYLxhEBDH8jAEHwAGsiBSQAQWwhCwJAIANBCkkNACACLwAAIQogAi8AAiEJIAIvAAQhByAFQQhqIAQQDgJAIAMgByAJIApqakEGaiIMSQ0AIAUtAAohCCAFQdgAaiACQQZqIgIgChAGIgsQAw0BIAVBQGsgAiAKaiICIAkQBiILEAMNASAFQShqIAIgCWoiAiAHEAYiCxADDQEgBUEQaiACIAdqIAMgDGsQBiILEAMNASAAIAFqIg9BfWohECAEQQRqIQZBASELIAAgAUEDakECdiIDaiIMIANqIgIgA2oiDiEDIAIhBCAMIQcDQCALIAMgEElxBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgCS0AAyELIAcgBiAFQUBrIAgQAkECdGoiCS8BADsAACAFQUBrIAktAAIQASAJLQADIQogBCAGIAVBKGogCBACQQJ0aiIJLwEAOwAAIAVBKGogCS0AAhABIAktAAMhCSADIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgDS0AAyENIAAgC2oiCyAGIAVB2ABqIAgQAkECdGoiAC8BADsAACAFQdgAaiAALQACEAEgAC0AAyEAIAcgCmoiCiAGIAVBQGsgCBACQQJ0aiIHLwEAOwAAIAVBQGsgBy0AAhABIActAAMhByAEIAlqIgkgBiAFQShqIAgQAkECdGoiBC8BADsAACAFQShqIAQtAAIQASAELQADIQQgAyANaiIDIAYgBUEQaiAIEAJBAnRqIg0vAQA7AAAgBUEQaiANLQACEAEgACALaiEAIAcgCmohByAEIAlqIQQgAyANLQADaiEDIAVB2ABqEA0gBUFAaxANciAFQShqEA1yIAVBEGoQDXJFIQsMAQsLIAQgDksgByACS3INAEFsIQsgACAMSw0BIAxBfWohCQNAQQAgACAJSSAFQdgAahAEGwRAIAAgBiAFQdgAaiAIEAJBAnRqIgovAQA7AAAgBUHYAGogCi0AAhABIAAgCi0AA2oiACAGIAVB2ABqIAgQAkECdGoiCi8BADsAACAFQdgAaiAKLQACEAEgACAKLQADaiEADAEFIAxBfmohCgNAIAVB2ABqEAQgACAKS3JFBEAgACAGIAVB2ABqIAgQAkECdGoiCS8BADsAACAFQdgAaiAJLQACEAEgACAJLQADaiEADAELCwNAIAAgCk0EQCAAIAYgBUHYAGogCBACQQJ0aiIJLwEAOwAAIAVB2ABqIAktAAIQASAAIAktAANqIQAMAQsLAkAgACAMTw0AIAAgBiAFQdgAaiAIEAIiAEECdGoiDC0AADoAACAMLQADQQFGBEAgBUHYAGogDC0AAhABDAELIAUoAlxBH0sNACAFQdgAaiAGIABBAnRqLQACEAEgBSgCXEEhSQ0AIAVBIDYCXAsgAkF9aiEMA0BBACAHIAxJIAVBQGsQBBsEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiIAIAYgBUFAayAIEAJBAnRqIgcvAQA7AAAgBUFAayAHLQACEAEgACAHLQADaiEHDAEFIAJBfmohDANAIAVBQGsQBCAHIAxLckUEQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwNAIAcgDE0EQCAHIAYgBUFAayAIEAJBAnRqIgAvAQA7AAAgBUFAayAALQACEAEgByAALQADaiEHDAELCwJAIAcgAk8NACAHIAYgBUFAayAIEAIiAEECdGoiAi0AADoAACACLQADQQFGBEAgBUFAayACLQACEAEMAQsgBSgCREEfSw0AIAVBQGsgBiAAQQJ0ai0AAhABIAUoAkRBIUkNACAFQSA2AkQLIA5BfWohAgNAQQAgBCACSSAFQShqEAQbBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2oiACAGIAVBKGogCBACQQJ0aiIELwEAOwAAIAVBKGogBC0AAhABIAAgBC0AA2ohBAwBBSAOQX5qIQIDQCAFQShqEAQgBCACS3JFBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsDQCAEIAJNBEAgBCAGIAVBKGogCBACQQJ0aiIALwEAOwAAIAVBKGogAC0AAhABIAQgAC0AA2ohBAwBCwsCQCAEIA5PDQAgBCAGIAVBKGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBKGogAi0AAhABDAELIAUoAixBH0sNACAFQShqIAYgAEECdGotAAIQASAFKAIsQSFJDQAgBUEgNgIsCwNAQQAgAyAQSSAFQRBqEAQbBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2oiACAGIAVBEGogCBACQQJ0aiICLwEAOwAAIAVBEGogAi0AAhABIAAgAi0AA2ohAwwBBSAPQX5qIQIDQCAFQRBqEAQgAyACS3JFBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsDQCADIAJNBEAgAyAGIAVBEGogCBACQQJ0aiIALwEAOwAAIAVBEGogAC0AAhABIAMgAC0AA2ohAwwBCwsCQCADIA9PDQAgAyAGIAVBEGogCBACIgBBAnRqIgItAAA6AAAgAi0AA0EBRgRAIAVBEGogAi0AAhABDAELIAUoAhRBH0sNACAFQRBqIAYgAEECdGotAAIQASAFKAIUQSFJDQAgBUEgNgIUCyABQWwgBUHYAGoQCiAFQUBrEApxIAVBKGoQCnEgBUEQahAKcRshCwwJCwAACwALAAALAAsAAAsACwAACwALQWwhCwsgBUHwAGokACALC7UEAQ5/IwBBEGsiBiQAIAZBBGogABAOQVQhBQJAIARB3AtJDQAgBi0ABCEHIANB8ARqQQBB7AAQECEIIAdBDEsNACADQdwJaiIJIAggBkEIaiAGQQxqIAEgAhAxIhAQA0UEQCAGKAIMIgQgB0sNASADQdwFaiEPIANBpAVqIREgAEEEaiESIANBqAVqIQEgBCEFA0AgBSICQX9qIQUgCCACQQJ0aigCAEUNAAsgAkEBaiEOQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgASALaiAKNgIAIAVBAWohBSAKIAxqIQoMAQsLIAEgCjYCAEEAIQUgBigCCCELA0AgBSALRkUEQCABIAUgCWotAAAiDEECdGoiDSANKAIAIg1BAWo2AgAgDyANQQF0aiINIAw6AAEgDSAFOgAAIAVBAWohBQwBCwtBACEBIANBADYCqAUgBEF/cyAHaiEJQQEhBQNAIAUgDk9FBEAgCCAFQQJ0IgtqKAIAIQwgAyALaiABNgIAIAwgBSAJanQgAWohASAFQQFqIQUMAQsLIAcgBEEBaiIBIAJrIgRrQQFqIQgDQEEBIQUgBCAIT0UEQANAIAUgDk9FBEAgBUECdCIJIAMgBEE0bGpqIAMgCWooAgAgBHY2AgAgBUEBaiEFDAELCyAEQQFqIQQMAQsLIBIgByAPIAogESADIAIgARBkIAZBAToABSAGIAc6AAYgACAGKAIENgIACyAQIQULIAZBEGokACAFC8ENAQt/IwBB8ABrIgUkAEFsIQkCQCADQQpJDQAgAi8AACEKIAIvAAIhDCACLwAEIQYgBUEIaiAEEA4CQCADIAYgCiAMampBBmoiDUkNACAFLQAKIQcgBUHYAGogAkEGaiICIAoQBiIJEAMNASAFQUBrIAIgCmoiAiAMEAYiCRADDQEgBUEoaiACIAxqIgIgBhAGIgkQAw0BIAVBEGogAiAGaiADIA1rEAYiCRADDQEgACABaiIOQX1qIQ8gBEEEaiEGQQEhCSAAIAFBA2pBAnYiAmoiCiACaiIMIAJqIg0hAyAMIQQgCiECA0AgCSADIA9JcQRAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAACAGIAVBQGsgBxACQQF0aiIILQAAIQsgBUFAayAILQABEAEgAiALOgAAIAYgBUEoaiAHEAJBAXRqIggtAAAhCyAFQShqIAgtAAEQASAEIAs6AAAgBiAFQRBqIAcQAkEBdGoiCC0AACELIAVBEGogCC0AARABIAMgCzoAACAGIAVB2ABqIAcQAkEBdGoiCC0AACELIAVB2ABqIAgtAAEQASAAIAs6AAEgBiAFQUBrIAcQAkEBdGoiCC0AACELIAVBQGsgCC0AARABIAIgCzoAASAGIAVBKGogBxACQQF0aiIILQAAIQsgBUEoaiAILQABEAEgBCALOgABIAYgBUEQaiAHEAJBAXRqIggtAAAhCyAFQRBqIAgtAAEQASADIAs6AAEgA0ECaiEDIARBAmohBCACQQJqIQIgAEECaiEAIAkgBUHYAGoQDUVxIAVBQGsQDUVxIAVBKGoQDUVxIAVBEGoQDUVxIQkMAQsLIAQgDUsgAiAMS3INAEFsIQkgACAKSw0BIApBfWohCQNAIAVB2ABqEAQgACAJT3JFBEAgBiAFQdgAaiAHEAJBAXRqIggtAAAhCyAFQdgAaiAILQABEAEgACALOgAAIAYgBUHYAGogBxACQQF0aiIILQAAIQsgBUHYAGogCC0AARABIAAgCzoAASAAQQJqIQAMAQsLA0AgBUHYAGoQBCAAIApPckUEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCwNAIAAgCkkEQCAGIAVB2ABqIAcQAkEBdGoiCS0AACEIIAVB2ABqIAktAAEQASAAIAg6AAAgAEEBaiEADAELCyAMQX1qIQADQCAFQUBrEAQgAiAAT3JFBEAgBiAFQUBrIAcQAkEBdGoiCi0AACEJIAVBQGsgCi0AARABIAIgCToAACAGIAVBQGsgBxACQQF0aiIKLQAAIQkgBUFAayAKLQABEAEgAiAJOgABIAJBAmohAgwBCwsDQCAFQUBrEAQgAiAMT3JFBEAgBiAFQUBrIAcQAkEBdGoiAC0AACEKIAVBQGsgAC0AARABIAIgCjoAACACQQFqIQIMAQsLA0AgAiAMSQRAIAYgBUFAayAHEAJBAXRqIgAtAAAhCiAFQUBrIAAtAAEQASACIAo6AAAgAkEBaiECDAELCyANQX1qIQADQCAFQShqEAQgBCAAT3JFBEAgBiAFQShqIAcQAkEBdGoiAi0AACEKIAVBKGogAi0AARABIAQgCjoAACAGIAVBKGogBxACQQF0aiICLQAAIQogBUEoaiACLQABEAEgBCAKOgABIARBAmohBAwBCwsDQCAFQShqEAQgBCANT3JFBEAgBiAFQShqIAcQAkEBdGoiAC0AACECIAVBKGogAC0AARABIAQgAjoAACAEQQFqIQQMAQsLA0AgBCANSQRAIAYgBUEoaiAHEAJBAXRqIgAtAAAhAiAFQShqIAAtAAEQASAEIAI6AAAgBEEBaiEEDAELCwNAIAVBEGoQBCADIA9PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIAYgBUEQaiAHEAJBAXRqIgAtAAAhAiAFQRBqIAAtAAEQASADIAI6AAEgA0ECaiEDDAELCwNAIAVBEGoQBCADIA5PckUEQCAGIAVBEGogBxACQQF0aiIALQAAIQIgBUEQaiAALQABEAEgAyACOgAAIANBAWohAwwBCwsDQCADIA5JBEAgBiAFQRBqIAcQAkEBdGoiAC0AACECIAVBEGogAC0AARABIAMgAjoAACADQQFqIQMMAQsLIAFBbCAFQdgAahAKIAVBQGsQCnEgBUEoahAKcSAFQRBqEApxGyEJDAELQWwhCQsgBUHwAGokACAJC8oCAQR/IwBBIGsiBSQAIAUgBBAOIAUtAAIhByAFQQhqIAIgAxAGIgIQA0UEQCAEQQRqIQIgACABaiIDQX1qIQQDQCAFQQhqEAQgACAET3JFBEAgAiAFQQhqIAcQAkEBdGoiBi0AACEIIAVBCGogBi0AARABIAAgCDoAACACIAVBCGogBxACQQF0aiIGLQAAIQggBUEIaiAGLQABEAEgACAIOgABIABBAmohAAwBCwsDQCAFQQhqEAQgACADT3JFBEAgAiAFQQhqIAcQAkEBdGoiBC0AACEGIAVBCGogBC0AARABIAAgBjoAACAAQQFqIQAMAQsLA0AgACADT0UEQCACIAVBCGogBxACQQF0aiIELQAAIQYgBUEIaiAELQABEAEgACAGOgAAIABBAWohAAwBCwsgAUFsIAVBCGoQChshAgsgBUEgaiQAIAILtgMBCX8jAEEQayIGJAAgBkEANgIMIAZBADYCCEFUIQQCQAJAIANBQGsiDCADIAZBCGogBkEMaiABIAIQMSICEAMNACAGQQRqIAAQDiAGKAIMIgcgBi0ABEEBaksNASAAQQRqIQogBkEAOgAFIAYgBzoABiAAIAYoAgQ2AgAgB0EBaiEJQQEhBANAIAQgCUkEQCADIARBAnRqIgEoAgAhACABIAU2AgAgACAEQX9qdCAFaiEFIARBAWohBAwBCwsgB0EBaiEHQQAhBSAGKAIIIQkDQCAFIAlGDQEgAyAFIAxqLQAAIgRBAnRqIgBBASAEdEEBdSILIAAoAgAiAWoiADYCACAHIARrIQhBACEEAkAgC0EDTQRAA0AgBCALRg0CIAogASAEakEBdGoiACAIOgABIAAgBToAACAEQQFqIQQMAAALAAsDQCABIABPDQEgCiABQQF0aiIEIAg6AAEgBCAFOgAAIAQgCDoAAyAEIAU6AAIgBCAIOgAFIAQgBToABCAEIAg6AAcgBCAFOgAGIAFBBGohAQwAAAsACyAFQQFqIQUMAAALAAsgAiEECyAGQRBqJAAgBAutAQECfwJAQYQgKAIAIABHIAAoAgBBAXYiAyABa0F4aiICQXhxQQhHcgR/IAIFIAMQJ0UNASACQQhqC0EQSQ0AIAAgACgCACICQQFxIAAgAWpBD2pBeHEiASAAa0EBdHI2AgAgASAANgIEIAEgASgCAEEBcSAAIAJBAXZqIAFrIgJBAXRyNgIAQYQgIAEgAkH/////B3FqQQRqQYQgKAIAIABGGyABNgIAIAEQJQsLygIBBX8CQAJAAkAgAEEIIABBCEsbZ0EfcyAAaUEBR2oiAUEESSAAIAF2cg0AIAFBAnRB/B5qKAIAIgJFDQADQCACQXhqIgMoAgBBAXZBeGoiBSAATwRAIAIgBUEIIAVBCEsbZ0Efc0ECdEGAH2oiASgCAEYEQCABIAIoAgQ2AgALDAMLIARBHksNASAEQQFqIQQgAigCBCICDQALC0EAIQMgAUEgTw0BA0AgAUECdEGAH2ooAgAiAkUEQCABQR5LIQIgAUEBaiEBIAJFDQEMAwsLIAIgAkF4aiIDKAIAQQF2QXhqIgFBCCABQQhLG2dBH3NBAnRBgB9qIgEoAgBGBEAgASACKAIENgIACwsgAigCACIBBEAgASACKAIENgIECyACKAIEIgEEQCABIAIoAgA2AgALIAMgAygCAEEBcjYCACADIAAQNwsgAwvhCwINfwV+IwBB8ABrIgckACAHIAAoAvDhASIINgJcIAEgAmohDSAIIAAoAoDiAWohDwJAAkAgBUUEQCABIQQMAQsgACgCxOABIRAgACgCwOABIREgACgCvOABIQ4gAEEBNgKM4QFBACEIA0AgCEEDRwRAIAcgCEECdCICaiAAIAJqQazQAWooAgA2AkQgCEEBaiEIDAELC0FsIQwgB0EYaiADIAQQBhADDQEgB0EsaiAHQRhqIAAoAgAQEyAHQTRqIAdBGGogACgCCBATIAdBPGogB0EYaiAAKAIEEBMgDUFgaiESIAEhBEEAIQwDQCAHKAIwIAcoAixBA3RqKQIAIhRCEIinQf8BcSEIIAcoAkAgBygCPEEDdGopAgAiFUIQiKdB/wFxIQsgBygCOCAHKAI0QQN0aikCACIWQiCIpyEJIBVCIIghFyAUQiCIpyECAkAgFkIQiKdB/wFxIgNBAk8EQAJAIAZFIANBGUlyRQRAIAkgB0EYaiADQSAgBygCHGsiCiAKIANLGyIKEAUgAyAKayIDdGohCSAHQRhqEAQaIANFDQEgB0EYaiADEAUgCWohCQwBCyAHQRhqIAMQBSAJaiEJIAdBGGoQBBoLIAcpAkQhGCAHIAk2AkQgByAYNwNIDAELAkAgA0UEQCACBEAgBygCRCEJDAMLIAcoAkghCQwBCwJAAkAgB0EYakEBEAUgCSACRWpqIgNBA0YEQCAHKAJEQX9qIgMgA0VqIQkMAQsgA0ECdCAHaigCRCIJIAlFaiEJIANBAUYNAQsgByAHKAJINgJMCwsgByAHKAJENgJIIAcgCTYCRAsgF6chAyALBEAgB0EYaiALEAUgA2ohAwsgCCALakEUTwRAIAdBGGoQBBoLIAgEQCAHQRhqIAgQBSACaiECCyAHQRhqEAQaIAcgB0EYaiAUQhiIp0H/AXEQCCAUp0H//wNxajYCLCAHIAdBGGogFUIYiKdB/wFxEAggFadB//8DcWo2AjwgB0EYahAEGiAHIAdBGGogFkIYiKdB/wFxEAggFqdB//8DcWo2AjQgByACNgJgIAcoAlwhCiAHIAk2AmggByADNgJkAkACQAJAIAQgAiADaiILaiASSw0AIAIgCmoiEyAPSw0AIA0gBGsgC0Egak8NAQsgByAHKQNoNwMQIAcgBykDYDcDCCAEIA0gB0EIaiAHQdwAaiAPIA4gESAQEB4hCwwBCyACIARqIQggBCAKEAcgAkERTwRAIARBEGohAgNAIAIgCkEQaiIKEAcgAkEQaiICIAhJDQALCyAIIAlrIQIgByATNgJcIAkgCCAOa0sEQCAJIAggEWtLBEBBbCELDAILIBAgAiAOayICaiIKIANqIBBNBEAgCCAKIAMQDxoMAgsgCCAKQQAgAmsQDyEIIAcgAiADaiIDNgJkIAggAmshCCAOIQILIAlBEE8EQCADIAhqIQMDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALDAELAkAgCUEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgCUECdCIDQcAeaigCAGoiAhAXIAIgA0HgHmooAgBrIQIgBygCZCEDDAELIAggAhAMCyADQQlJDQAgAyAIaiEDIAhBCGoiCCACQQhqIgJrQQ9MBEADQCAIIAIQDCACQQhqIQIgCEEIaiIIIANJDQAMAgALAAsDQCAIIAIQByACQRBqIQIgCEEQaiIIIANJDQALCyAHQRhqEAQaIAsgDCALEAMiAhshDCAEIAQgC2ogAhshBCAFQX9qIgUNAAsgDBADDQFBbCEMIAdBGGoQBEECSQ0BQQAhCANAIAhBA0cEQCAAIAhBAnQiAmpBrNABaiACIAdqKAJENgIAIAhBAWohCAwBCwsgBygCXCEIC0G6fyEMIA8gCGsiACANIARrSw0AIAQEfyAEIAggABALIABqBUEACyABayEMCyAHQfAAaiQAIAwLkRcCFn8FfiMAQdABayIHJAAgByAAKALw4QEiCDYCvAEgASACaiESIAggACgCgOIBaiETAkACQCAFRQRAIAEhAwwBCyAAKALE4AEhESAAKALA4AEhFSAAKAK84AEhDyAAQQE2AozhAUEAIQgDQCAIQQNHBEAgByAIQQJ0IgJqIAAgAmpBrNABaigCADYCVCAIQQFqIQgMAQsLIAcgETYCZCAHIA82AmAgByABIA9rNgJoQWwhECAHQShqIAMgBBAGEAMNASAFQQQgBUEESBshFyAHQTxqIAdBKGogACgCABATIAdBxABqIAdBKGogACgCCBATIAdBzABqIAdBKGogACgCBBATQQAhBCAHQeAAaiEMIAdB5ABqIQoDQCAHQShqEARBAksgBCAXTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEJIAcoAkggBygCREEDdGopAgAiH0IgiKchCCAeQiCIISAgHUIgiKchAgJAIB9CEIinQf8BcSIDQQJPBEACQCAGRSADQRlJckUEQCAIIAdBKGogA0EgIAcoAixrIg0gDSADSxsiDRAFIAMgDWsiA3RqIQggB0EoahAEGiADRQ0BIAdBKGogAxAFIAhqIQgMAQsgB0EoaiADEAUgCGohCCAHQShqEAQaCyAHKQJUISEgByAINgJUIAcgITcDWAwBCwJAIANFBEAgAgRAIAcoAlQhCAwDCyAHKAJYIQgMAQsCQAJAIAdBKGpBARAFIAggAkVqaiIDQQNGBEAgBygCVEF/aiIDIANFaiEIDAELIANBAnQgB2ooAlQiCCAIRWohCCADQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAg2AlQLICCnIQMgCQRAIAdBKGogCRAFIANqIQMLIAkgC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgAmohAgsgB0EoahAEGiAHIAcoAmggAmoiCSADajYCaCAKIAwgCCAJSxsoAgAhDSAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogB0EoaiAfQhiIp0H/AXEQCCEOIAdB8ABqIARBBHRqIgsgCSANaiAIazYCDCALIAg2AgggCyADNgIEIAsgAjYCACAHIA4gH6dB//8DcWo2AkQgBEEBaiEEDAELCyAEIBdIDQEgEkFgaiEYIAdB4ABqIRogB0HkAGohGyABIQMDQCAHQShqEARBAksgBCAFTnJFBEAgBygCQCAHKAI8QQN0aikCACIdQhCIp0H/AXEhCyAHKAJQIAcoAkxBA3RqKQIAIh5CEIinQf8BcSEIIAcoAkggBygCREEDdGopAgAiH0IgiKchCSAeQiCIISAgHUIgiKchDAJAIB9CEIinQf8BcSICQQJPBEACQCAGRSACQRlJckUEQCAJIAdBKGogAkEgIAcoAixrIgogCiACSxsiChAFIAIgCmsiAnRqIQkgB0EoahAEGiACRQ0BIAdBKGogAhAFIAlqIQkMAQsgB0EoaiACEAUgCWohCSAHQShqEAQaCyAHKQJUISEgByAJNgJUIAcgITcDWAwBCwJAIAJFBEAgDARAIAcoAlQhCQwDCyAHKAJYIQkMAQsCQAJAIAdBKGpBARAFIAkgDEVqaiICQQNGBEAgBygCVEF/aiICIAJFaiEJDAELIAJBAnQgB2ooAlQiCSAJRWohCSACQQFGDQELIAcgBygCWDYCXAsLIAcgBygCVDYCWCAHIAk2AlQLICCnIRQgCARAIAdBKGogCBAFIBRqIRQLIAggC2pBFE8EQCAHQShqEAQaCyALBEAgB0EoaiALEAUgDGohDAsgB0EoahAEGiAHIAcoAmggDGoiGSAUajYCaCAbIBogCSAZSxsoAgAhHCAHIAdBKGogHUIYiKdB/wFxEAggHadB//8DcWo2AjwgByAHQShqIB5CGIinQf8BcRAIIB6nQf//A3FqNgJMIAdBKGoQBBogByAHQShqIB9CGIinQf8BcRAIIB+nQf//A3FqNgJEIAcgB0HwAGogBEEDcUEEdGoiDSkDCCIdNwPIASAHIA0pAwAiHjcDwAECQAJAAkAgBygCvAEiDiAepyICaiIWIBNLDQAgAyAHKALEASIKIAJqIgtqIBhLDQAgEiADayALQSBqTw0BCyAHIAcpA8gBNwMQIAcgBykDwAE3AwggAyASIAdBCGogB0G8AWogEyAPIBUgERAeIQsMAQsgAiADaiEIIAMgDhAHIAJBEU8EQCADQRBqIQIDQCACIA5BEGoiDhAHIAJBEGoiAiAISQ0ACwsgCCAdpyIOayECIAcgFjYCvAEgDiAIIA9rSwRAIA4gCCAVa0sEQEFsIQsMAgsgESACIA9rIgJqIhYgCmogEU0EQCAIIBYgChAPGgwCCyAIIBZBACACaxAPIQggByACIApqIgo2AsQBIAggAmshCCAPIQILIA5BEE8EQCAIIApqIQoDQCAIIAIQByACQRBqIQIgCEEQaiIIIApJDQALDAELAkAgDkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgDkECdCIKQcAeaigCAGoiAhAXIAIgCkHgHmooAgBrIQIgBygCxAEhCgwBCyAIIAIQDAsgCkEJSQ0AIAggCmohCiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAKSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAKSQ0ACwsgCxADBEAgCyEQDAQFIA0gDDYCACANIBkgHGogCWs2AgwgDSAJNgIIIA0gFDYCBCAEQQFqIQQgAyALaiEDDAILAAsLIAQgBUgNASAEIBdrIQtBACEEA0AgCyAFSARAIAcgB0HwAGogC0EDcUEEdGoiAikDCCIdNwPIASAHIAIpAwAiHjcDwAECQAJAAkAgBygCvAEiDCAepyICaiIKIBNLDQAgAyAHKALEASIJIAJqIhBqIBhLDQAgEiADayAQQSBqTw0BCyAHIAcpA8gBNwMgIAcgBykDwAE3AxggAyASIAdBGGogB0G8AWogEyAPIBUgERAeIRAMAQsgAiADaiEIIAMgDBAHIAJBEU8EQCADQRBqIQIDQCACIAxBEGoiDBAHIAJBEGoiAiAISQ0ACwsgCCAdpyIGayECIAcgCjYCvAEgBiAIIA9rSwRAIAYgCCAVa0sEQEFsIRAMAgsgESACIA9rIgJqIgwgCWogEU0EQCAIIAwgCRAPGgwCCyAIIAxBACACaxAPIQggByACIAlqIgk2AsQBIAggAmshCCAPIQILIAZBEE8EQCAIIAlqIQYDQCAIIAIQByACQRBqIQIgCEEQaiIIIAZJDQALDAELAkAgBkEHTQRAIAggAi0AADoAACAIIAItAAE6AAEgCCACLQACOgACIAggAi0AAzoAAyAIQQRqIAIgBkECdCIGQcAeaigCAGoiAhAXIAIgBkHgHmooAgBrIQIgBygCxAEhCQwBCyAIIAIQDAsgCUEJSQ0AIAggCWohBiAIQQhqIgggAkEIaiICa0EPTARAA0AgCCACEAwgAkEIaiECIAhBCGoiCCAGSQ0ADAIACwALA0AgCCACEAcgAkEQaiECIAhBEGoiCCAGSQ0ACwsgEBADDQMgC0EBaiELIAMgEGohAwwBCwsDQCAEQQNHBEAgACAEQQJ0IgJqQazQAWogAiAHaigCVDYCACAEQQFqIQQMAQsLIAcoArwBIQgLQbp/IRAgEyAIayIAIBIgA2tLDQAgAwR/IAMgCCAAEAsgAGoFQQALIAFrIRALIAdB0AFqJAAgEAslACAAQgA3AgAgAEEAOwEIIABBADoACyAAIAE2AgwgACACOgAKC7QFAQN/IwBBMGsiBCQAIABB/wFqIgVBfWohBgJAIAMvAQIEQCAEQRhqIAEgAhAGIgIQAw0BIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahASOgAAIAMgBEEIaiAEQRhqEBI6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0FIAEgBEEQaiAEQRhqEBI6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBSABIARBCGogBEEYahASOgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEjoAACABIAJqIABrIQIMAwsgAyAEQRBqIARBGGoQEjoAAiADIARBCGogBEEYahASOgADIANBBGohAwwAAAsACyAEQRhqIAEgAhAGIgIQAw0AIARBEGogBEEYaiADEBwgBEEIaiAEQRhqIAMQHCAAIQMDQAJAIARBGGoQBCADIAZPckUEQCADIARBEGogBEEYahAROgAAIAMgBEEIaiAEQRhqEBE6AAEgBEEYahAERQ0BIANBAmohAwsgBUF+aiEFAn8DQEG6fyECIAMiASAFSw0EIAEgBEEQaiAEQRhqEBE6AAAgAUEBaiEDIARBGGoQBEEDRgRAQQIhAiAEQQhqDAILIAMgBUsNBCABIARBCGogBEEYahAROgABIAFBAmohA0EDIQIgBEEYahAEQQNHDQALIARBEGoLIQUgAyAFIARBGGoQEToAACABIAJqIABrIQIMAgsgAyAEQRBqIARBGGoQEToAAiADIARBCGogBEEYahAROgADIANBBGohAwwAAAsACyAEQTBqJAAgAgtpAQF/An8CQAJAIAJBB00NACABKAAAQbfIwuF+Rw0AIAAgASgABDYCmOIBQWIgAEEQaiABIAIQPiIDEAMNAhogAEKBgICAEDcDiOEBIAAgASADaiACIANrECoMAQsgACABIAIQKgtBAAsLrQMBBn8jAEGAAWsiAyQAQWIhCAJAIAJBCUkNACAAQZjQAGogAUEIaiIEIAJBeGogAEGY0AAQMyIFEAMiBg0AIANBHzYCfCADIANB/ABqIANB+ABqIAQgBCAFaiAGGyIEIAEgAmoiAiAEaxAVIgUQAw0AIAMoAnwiBkEfSw0AIAMoAngiB0EJTw0AIABBiCBqIAMgBkGAC0GADCAHEBggA0E0NgJ8IAMgA0H8AGogA0H4AGogBCAFaiIEIAIgBGsQFSIFEAMNACADKAJ8IgZBNEsNACADKAJ4IgdBCk8NACAAQZAwaiADIAZBgA1B4A4gBxAYIANBIzYCfCADIANB/ABqIANB+ABqIAQgBWoiBCACIARrEBUiBRADDQAgAygCfCIGQSNLDQAgAygCeCIHQQpPDQAgACADIAZBwBBB0BEgBxAYIAQgBWoiBEEMaiIFIAJLDQAgAiAFayEFQQAhAgNAIAJBA0cEQCAEKAAAIgZBf2ogBU8NAiAAIAJBAnRqQZzQAWogBjYCACACQQFqIQIgBEEEaiEEDAELCyAEIAFrIQgLIANBgAFqJAAgCAtGAQN/IABBCGohAyAAKAIEIQJBACEAA0AgACACdkUEQCABIAMgAEEDdGotAAJBFktqIQEgAEEBaiEADAELCyABQQggAmt0C4YDAQV/Qbh/IQcCQCADRQ0AIAItAAAiBEUEQCABQQA2AgBBAUG4fyADQQFGGw8LAn8gAkEBaiIFIARBGHRBGHUiBkF/Sg0AGiAGQX9GBEAgA0EDSA0CIAUvAABBgP4BaiEEIAJBA2oMAQsgA0ECSA0BIAItAAEgBEEIdHJBgIB+aiEEIAJBAmoLIQUgASAENgIAIAVBAWoiASACIANqIgNLDQBBbCEHIABBEGogACAFLQAAIgVBBnZBI0EJIAEgAyABa0HAEEHQEUHwEiAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBmCBqIABBCGogBUEEdkEDcUEfQQggASABIAZqIAgbIgEgAyABa0GAC0GADEGAFyAAKAKM4QEgACgCnOIBIAQQHyIGEAMiCA0AIABBoDBqIABBBGogBUECdkEDcUE0QQkgASABIAZqIAgbIgEgAyABa0GADUHgDkGQGSAAKAKM4QEgACgCnOIBIAQQHyIAEAMNACAAIAFqIAJrIQcLIAcLrQMBCn8jAEGABGsiCCQAAn9BUiACQf8BSw0AGkFUIANBDEsNABogAkEBaiELIABBBGohCUGAgAQgA0F/anRBEHUhCkEAIQJBASEEQQEgA3QiB0F/aiIMIQUDQCACIAtGRQRAAkAgASACQQF0Ig1qLwEAIgZB//8DRgRAIAkgBUECdGogAjoAAiAFQX9qIQVBASEGDAELIARBACAKIAZBEHRBEHVKGyEECyAIIA1qIAY7AQAgAkEBaiECDAELCyAAIAQ7AQIgACADOwEAIAdBA3YgB0EBdmpBA2ohBkEAIQRBACECA0AgBCALRkUEQCABIARBAXRqLgEAIQpBACEAA0AgACAKTkUEQCAJIAJBAnRqIAQ6AAIDQCACIAZqIAxxIgIgBUsNAAsgAEEBaiEADAELCyAEQQFqIQQMAQsLQX8gAg0AGkEAIQIDfyACIAdGBH9BAAUgCCAJIAJBAnRqIgAtAAJBAXRqIgEgAS8BACIBQQFqOwEAIAAgAyABEBRrIgU6AAMgACABIAVB/wFxdCAHazsBACACQQFqIQIMAQsLCyEFIAhBgARqJAAgBQvjBgEIf0FsIQcCQCACQQNJDQACQAJAAkACQCABLQAAIgNBA3EiCUEBaw4DAwEAAgsgACgCiOEBDQBBYg8LIAJBBUkNAkEDIQYgASgAACEFAn8CQAJAIANBAnZBA3EiCEF+aiIEQQFNBEAgBEEBaw0BDAILIAVBDnZB/wdxIQQgBUEEdkH/B3EhAyAIRQwCCyAFQRJ2IQRBBCEGIAVBBHZB//8AcSEDQQAMAQsgBUEEdkH//w9xIgNBgIAISw0DIAEtAARBCnQgBUEWdnIhBEEFIQZBAAshBSAEIAZqIgogAksNAgJAIANBgQZJDQAgACgCnOIBRQ0AQQAhAgNAIAJBg4ABSw0BIAJBQGshAgwAAAsACwJ/IAlBA0YEQCABIAZqIQEgAEHw4gFqIQIgACgCDCEGIAUEQCACIAMgASAEIAYQXwwCCyACIAMgASAEIAYQXQwBCyAAQbjQAWohAiABIAZqIQEgAEHw4gFqIQYgAEGo0ABqIQggBQRAIAggBiADIAEgBCACEF4MAQsgCCAGIAMgASAEIAIQXAsQAw0CIAAgAzYCgOIBIABBATYCiOEBIAAgAEHw4gFqNgLw4QEgCUECRgRAIAAgAEGo0ABqNgIMCyAAIANqIgBBiOMBakIANwAAIABBgOMBakIANwAAIABB+OIBakIANwAAIABB8OIBakIANwAAIAoPCwJ/AkACQAJAIANBAnZBA3FBf2oiBEECSw0AIARBAWsOAgACAQtBASEEIANBA3YMAgtBAiEEIAEvAABBBHYMAQtBAyEEIAEQIUEEdgsiAyAEaiIFQSBqIAJLBEAgBSACSw0CIABB8OIBaiABIARqIAMQCyEBIAAgAzYCgOIBIAAgATYC8OEBIAEgA2oiAEIANwAYIABCADcAECAAQgA3AAggAEIANwAAIAUPCyAAIAM2AoDiASAAIAEgBGo2AvDhASAFDwsCfwJAAkACQCADQQJ2QQNxQX9qIgRBAksNACAEQQFrDgIAAgELQQEhByADQQN2DAILQQIhByABLwAAQQR2DAELIAJBBEkgARAhIgJBj4CAAUtyDQFBAyEHIAJBBHYLIQIgAEHw4gFqIAEgB2otAAAgAkEgahAQIQEgACACNgKA4gEgACABNgLw4QEgB0EBaiEHCyAHC0sAIABC+erQ0OfJoeThADcDICAAQgA3AxggAELP1tO+0ser2UI3AxAgAELW64Lu6v2J9eAANwMIIABCADcDACAAQShqQQBBKBAQGgviAgICfwV+IABBKGoiASAAKAJIaiECAn4gACkDACIDQiBaBEAgACkDECIEQgeJIAApAwgiBUIBiXwgACkDGCIGQgyJfCAAKQMgIgdCEol8IAUQGSAEEBkgBhAZIAcQGQwBCyAAKQMYQsXP2bLx5brqJ3wLIAN8IQMDQCABQQhqIgAgAk0EQEIAIAEpAAAQCSADhUIbiUKHla+vmLbem55/fkLj3MqV/M7y9YV/fCEDIAAhAQwBCwsCQCABQQRqIgAgAksEQCABIQAMAQsgASgAAK1Ch5Wvr5i23puef34gA4VCF4lCz9bTvtLHq9lCfkL5893xmfaZqxZ8IQMLA0AgACACSQRAIAAxAABCxc/ZsvHluuonfiADhUILiUKHla+vmLbem55/fiEDIABBAWohAAwBCwsgA0IhiCADhULP1tO+0ser2UJ+IgNCHYggA4VC+fPd8Zn2masWfiIDQiCIIAOFC+8CAgJ/BH4gACAAKQMAIAKtfDcDAAJAAkAgACgCSCIDIAJqIgRBH00EQCABRQ0BIAAgA2pBKGogASACECAgACgCSCACaiEEDAELIAEgAmohAgJ/IAMEQCAAQShqIgQgA2ogAUEgIANrECAgACAAKQMIIAQpAAAQCTcDCCAAIAApAxAgACkAMBAJNwMQIAAgACkDGCAAKQA4EAk3AxggACAAKQMgIABBQGspAAAQCTcDICAAKAJIIQMgAEEANgJIIAEgA2tBIGohAQsgAUEgaiACTQsEQCACQWBqIQMgACkDICEFIAApAxghBiAAKQMQIQcgACkDCCEIA0AgCCABKQAAEAkhCCAHIAEpAAgQCSEHIAYgASkAEBAJIQYgBSABKQAYEAkhBSABQSBqIgEgA00NAAsgACAFNwMgIAAgBjcDGCAAIAc3AxAgACAINwMICyABIAJPDQEgAEEoaiABIAIgAWsiBBAgCyAAIAQ2AkgLCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQEBogAwVBun8LCy8BAX8gAEUEQEG2f0EAIAMbDwtBun8hBCADIAFNBH8gACACIAMQCxogAwVBun8LC6gCAQZ/IwBBEGsiByQAIABB2OABaikDAEKAgIAQViEIQbh/IQUCQCAEQf//B0sNACAAIAMgBBBCIgUQAyIGDQAgACgCnOIBIQkgACAHQQxqIAMgAyAFaiAGGyIKIARBACAFIAYbayIGEEAiAxADBEAgAyEFDAELIAcoAgwhBCABRQRAQbp/IQUgBEEASg0BCyAGIANrIQUgAyAKaiEDAkAgCQRAIABBADYCnOIBDAELAkACQAJAIARBBUgNACAAQdjgAWopAwBCgICACFgNAAwBCyAAQQA2ApziAQwBCyAAKAIIED8hBiAAQQA2ApziASAGQRRPDQELIAAgASACIAMgBSAEIAgQOSEFDAELIAAgASACIAMgBSAEIAgQOiEFCyAHQRBqJAAgBQtnACAAQdDgAWogASACIAAoAuzhARAuIgEQAwRAIAEPC0G4fyECAkAgAQ0AIABB7OABaigCACIBBEBBYCECIAAoApjiASABRw0BC0EAIQIgAEHw4AFqKAIARQ0AIABBkOEBahBDCyACCycBAX8QVyIERQRAQUAPCyAEIAAgASACIAMgBBBLEE8hACAEEFYgAAs/AQF/AkACQAJAIAAoAqDiAUEBaiIBQQJLDQAgAUEBaw4CAAECCyAAEDBBAA8LIABBADYCoOIBCyAAKAKU4gELvAMCB38BfiMAQRBrIgkkAEG4fyEGAkAgBCgCACIIQQVBCSAAKALs4QEiBRtJDQAgAygCACIHQQFBBSAFGyAFEC8iBRADBEAgBSEGDAELIAggBUEDakkNACAAIAcgBRBJIgYQAw0AIAEgAmohCiAAQZDhAWohCyAIIAVrIQIgBSAHaiEHIAEhBQNAIAcgAiAJECwiBhADDQEgAkF9aiICIAZJBEBBuH8hBgwCCyAJKAIAIghBAksEQEFsIQYMAgsgB0EDaiEHAn8CQAJAAkAgCEEBaw4CAgABCyAAIAUgCiAFayAHIAYQSAwCCyAFIAogBWsgByAGEEcMAQsgBSAKIAVrIActAAAgCSgCCBBGCyIIEAMEQCAIIQYMAgsgACgC8OABBEAgCyAFIAgQRQsgAiAGayECIAYgB2ohByAFIAhqIQUgCSgCBEUNAAsgACkD0OABIgxCf1IEQEFsIQYgDCAFIAFrrFINAQsgACgC8OABBEBBaiEGIAJBBEkNASALEEQhDCAHKAAAIAynRw0BIAdBBGohByACQXxqIQILIAMgBzYCACAEIAI2AgAgBSABayEGCyAJQRBqJAAgBgsuACAAECsCf0EAQQAQAw0AGiABRSACRXJFBEBBYiAAIAEgAhA9EAMNARoLQQALCzcAIAEEQCAAIAAoAsTgASABKAIEIAEoAghqRzYCnOIBCyAAECtBABADIAFFckUEQCAAIAEQWwsL0QIBB38jAEEQayIGJAAgBiAENgIIIAYgAzYCDCAFBEAgBSgCBCEKIAUoAgghCQsgASEIAkACQANAIAAoAuzhARAWIQsCQANAIAQgC0kNASADKAAAQXBxQdDUtMIBRgRAIAMgBBAiIgcQAw0EIAQgB2shBCADIAdqIQMMAQsLIAYgAzYCDCAGIAQ2AggCQCAFBEAgACAFEE5BACEHQQAQA0UNAQwFCyAAIAogCRBNIgcQAw0ECyAAIAgQUCAMQQFHQQAgACAIIAIgBkEMaiAGQQhqEEwiByIDa0EAIAMQAxtBCkdyRQRAQbh/IQcMBAsgBxADDQMgAiAHayECIAcgCGohCEEBIQwgBigCDCEDIAYoAgghBAwBCwsgBiADNgIMIAYgBDYCCEG4fyEHIAQNASAIIAFrIQcMAQsgBiADNgIMIAYgBDYCCAsgBkEQaiQAIAcLRgECfyABIAAoArjgASICRwRAIAAgAjYCxOABIAAgATYCuOABIAAoArzgASEDIAAgATYCvOABIAAgASADIAJrajYCwOABCwutAgIEfwF+IwBBQGoiBCQAAkACQCACQQhJDQAgASgAAEFwcUHQ1LTCAUcNACABIAIQIiEBIABCADcDCCAAQQA2AgQgACABNgIADAELIARBGGogASACEC0iAxADBEAgACADEBoMAQsgAwRAIABBuH8QGgwBCyACIAQoAjAiA2shAiABIANqIQMDQAJAIAAgAyACIARBCGoQLCIFEAMEfyAFBSACIAVBA2oiBU8NAUG4fwsQGgwCCyAGQQFqIQYgAiAFayECIAMgBWohAyAEKAIMRQ0ACyAEKAI4BEAgAkEDTQRAIABBuH8QGgwCCyADQQRqIQMLIAQoAighAiAEKQMYIQcgAEEANgIEIAAgAyABazYCACAAIAIgBmytIAcgB0J/URs3AwgLIARBQGskAAslAQF/IwBBEGsiAiQAIAIgACABEFEgAigCACEAIAJBEGokACAAC30BBH8jAEGQBGsiBCQAIARB/wE2AggCQCAEQRBqIARBCGogBEEMaiABIAIQFSIGEAMEQCAGIQUMAQtBVCEFIAQoAgwiB0EGSw0AIAMgBEEQaiAEKAIIIAcQQSIFEAMNACAAIAEgBmogAiAGayADEDwhBQsgBEGQBGokACAFC4cBAgJ/An5BABAWIQMCQANAIAEgA08EQAJAIAAoAABBcHFB0NS0wgFGBEAgACABECIiAhADRQ0BQn4PCyAAIAEQVSIEQn1WDQMgBCAFfCIFIARUIQJCfiEEIAINAyAAIAEQUiICEAMNAwsgASACayEBIAAgAmohAAwBCwtCfiAFIAEbIQQLIAQLPwIBfwF+IwBBMGsiAiQAAn5CfiACQQhqIAAgARAtDQAaQgAgAigCHEEBRg0AGiACKQMICyEDIAJBMGokACADC40BAQJ/IwBBMGsiASQAAkAgAEUNACAAKAKI4gENACABIABB/OEBaigCADYCKCABIAApAvThATcDICAAEDAgACgCqOIBIQIgASABKAIoNgIYIAEgASkDIDcDECACIAFBEGoQGyAAQQA2AqjiASABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALKgECfyMAQRBrIgAkACAAQQA2AgggAEIANwMAIAAQWCEBIABBEGokACABC4cBAQN/IwBBEGsiAiQAAkAgACgCAEUgACgCBEVzDQAgAiAAKAIINgIIIAIgACkCADcDAAJ/IAIoAgAiAQRAIAIoAghBqOMJIAERBQAMAQtBqOMJECgLIgFFDQAgASAAKQIANwL04QEgAUH84QFqIAAoAgg2AgAgARBZIAEhAwsgAkEQaiQAIAMLywEBAn8jAEEgayIBJAAgAEGBgIDAADYCtOIBIABBADYCiOIBIABBADYC7OEBIABCADcDkOIBIABBADYCpOMJIABBADYC3OIBIABCADcCzOIBIABBADYCvOIBIABBADYCxOABIABCADcCnOIBIABBpOIBakIANwIAIABBrOIBakEANgIAIAFCADcCECABQgA3AhggASABKQMYNwMIIAEgASkDEDcDACABKAIIQQh2QQFxIQIgAEEANgLg4gEgACACNgKM4gEgAUEgaiQAC3YBA38jAEEwayIBJAAgAARAIAEgAEHE0AFqIgIoAgA2AiggASAAKQK80AE3AyAgACgCACEDIAEgAigCADYCGCABIAApArzQATcDECADIAFBEGoQGyABIAEoAig2AgggASABKQMgNwMAIAAgARAbCyABQTBqJAALzAEBAX8gACABKAK00AE2ApjiASAAIAEoAgQiAjYCwOABIAAgAjYCvOABIAAgAiABKAIIaiICNgK44AEgACACNgLE4AEgASgCuNABBEAgAEKBgICAEDcDiOEBIAAgAUGk0ABqNgIMIAAgAUGUIGo2AgggACABQZwwajYCBCAAIAFBDGo2AgAgAEGs0AFqIAFBqNABaigCADYCACAAQbDQAWogAUGs0AFqKAIANgIAIABBtNABaiABQbDQAWooAgA2AgAPCyAAQgA3A4jhAQs7ACACRQRAQbp/DwsgBEUEQEFsDwsgAiAEEGAEQCAAIAEgAiADIAQgBRBhDwsgACABIAIgAyAEIAUQZQtGAQF/IwBBEGsiBSQAIAVBCGogBBAOAn8gBS0ACQRAIAAgASACIAMgBBAyDAELIAAgASACIAMgBBA0CyEAIAVBEGokACAACzQAIAAgAyAEIAUQNiIFEAMEQCAFDwsgBSAESQR/IAEgAiADIAVqIAQgBWsgABA1BUG4fwsLRgEBfyMAQRBrIgUkACAFQQhqIAQQDgJ/IAUtAAkEQCAAIAEgAiADIAQQYgwBCyAAIAEgAiADIAQQNQshACAFQRBqJAAgAAtZAQF/QQ8hAiABIABJBEAgAUEEdCAAbiECCyAAQQh2IgEgAkEYbCIAQYwIaigCAGwgAEGICGooAgBqIgJBA3YgAmogAEGACGooAgAgAEGECGooAgAgAWxqSQs3ACAAIAMgBCAFQYAQEDMiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQMgVBuH8LC78DAQN/IwBBIGsiBSQAIAVBCGogAiADEAYiAhADRQRAIAAgAWoiB0F9aiEGIAUgBBAOIARBBGohAiAFLQACIQMDQEEAIAAgBkkgBUEIahAEGwRAIAAgAiAFQQhqIAMQAkECdGoiBC8BADsAACAFQQhqIAQtAAIQASAAIAQtAANqIgQgAiAFQQhqIAMQAkECdGoiAC8BADsAACAFQQhqIAAtAAIQASAEIAAtAANqIQAMAQUgB0F+aiEEA0AgBUEIahAEIAAgBEtyRQRAIAAgAiAFQQhqIAMQAkECdGoiBi8BADsAACAFQQhqIAYtAAIQASAAIAYtAANqIQAMAQsLA0AgACAES0UEQCAAIAIgBUEIaiADEAJBAnRqIgYvAQA7AAAgBUEIaiAGLQACEAEgACAGLQADaiEADAELCwJAIAAgB08NACAAIAIgBUEIaiADEAIiA0ECdGoiAC0AADoAACAALQADQQFGBEAgBUEIaiAALQACEAEMAQsgBSgCDEEfSw0AIAVBCGogAiADQQJ0ai0AAhABIAUoAgxBIUkNACAFQSA2AgwLIAFBbCAFQQhqEAobIQILCwsgBUEgaiQAIAILkgIBBH8jAEFAaiIJJAAgCSADQTQQCyEDAkAgBEECSA0AIAMgBEECdGooAgAhCSADQTxqIAgQIyADQQE6AD8gAyACOgA+QQAhBCADKAI8IQoDQCAEIAlGDQEgACAEQQJ0aiAKNgEAIARBAWohBAwAAAsAC0EAIQkDQCAGIAlGRQRAIAMgBSAJQQF0aiIKLQABIgtBAnRqIgwoAgAhBCADQTxqIAotAABBCHQgCGpB//8DcRAjIANBAjoAPyADIAcgC2siCiACajoAPiAEQQEgASAKa3RqIQogAygCPCELA0AgACAEQQJ0aiALNgEAIARBAWoiBCAKSQ0ACyAMIAo2AgAgCUEBaiEJDAELCyADQUBrJAALowIBCX8jAEHQAGsiCSQAIAlBEGogBUE0EAsaIAcgBmshDyAHIAFrIRADQAJAIAMgCkcEQEEBIAEgByACIApBAXRqIgYtAAEiDGsiCGsiC3QhDSAGLQAAIQ4gCUEQaiAMQQJ0aiIMKAIAIQYgCyAPTwRAIAAgBkECdGogCyAIIAUgCEE0bGogCCAQaiIIQQEgCEEBShsiCCACIAQgCEECdGooAgAiCEEBdGogAyAIayAHIA4QYyAGIA1qIQgMAgsgCUEMaiAOECMgCUEBOgAPIAkgCDoADiAGIA1qIQggCSgCDCELA0AgBiAITw0CIAAgBkECdGogCzYBACAGQQFqIQYMAAALAAsgCUHQAGokAA8LIAwgCDYCACAKQQFqIQoMAAALAAs0ACAAIAMgBCAFEDYiBRADBEAgBQ8LIAUgBEkEfyABIAIgAyAFaiAEIAVrIAAQNAVBuH8LCyMAIAA/AEEQdGtB//8DakEQdkAAQX9GBEBBAA8LQQAQAEEBCzsBAX8gAgRAA0AgACABIAJBgCAgAkGAIEkbIgMQCyEAIAFBgCBqIQEgAEGAIGohACACIANrIgINAAsLCwYAIAAQAwsLqBUJAEGICAsNAQAAAAEAAAACAAAAAgBBoAgLswYBAAAAAQAAAAIAAAACAAAAJgAAAIIAAAAhBQAASgAAAGcIAAAmAAAAwAEAAIAAAABJBQAASgAAAL4IAAApAAAALAIAAIAAAABJBQAASgAAAL4IAAAvAAAAygIAAIAAAACKBQAASgAAAIQJAAA1AAAAcwMAAIAAAACdBQAASgAAAKAJAAA9AAAAgQMAAIAAAADrBQAASwAAAD4KAABEAAAAngMAAIAAAABNBgAASwAAAKoKAABLAAAAswMAAIAAAADBBgAATQAAAB8NAABNAAAAUwQAAIAAAAAjCAAAUQAAAKYPAABUAAAAmQQAAIAAAABLCQAAVwAAALESAABYAAAA2gQAAIAAAABvCQAAXQAAACMUAABUAAAARQUAAIAAAABUCgAAagAAAIwUAABqAAAArwUAAIAAAAB2CQAAfAAAAE4QAAB8AAAA0gIAAIAAAABjBwAAkQAAAJAHAACSAAAAAAAAAAEAAAABAAAABQAAAA0AAAAdAAAAPQAAAH0AAAD9AAAA/QEAAP0DAAD9BwAA/Q8AAP0fAAD9PwAA/X8AAP3/AAD9/wEA/f8DAP3/BwD9/w8A/f8fAP3/PwD9/38A/f//AP3//wH9//8D/f//B/3//w/9//8f/f//P/3//38AAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABEAAAASAAAAEwAAABQAAAAVAAAAFgAAABcAAAAYAAAAGQAAABoAAAAbAAAAHAAAAB0AAAAeAAAAHwAAAAMAAAAEAAAABQAAAAYAAAAHAAAACAAAAAkAAAAKAAAACwAAAAwAAAANAAAADgAAAA8AAAAQAAAAEQAAABIAAAATAAAAFAAAABUAAAAWAAAAFwAAABgAAAAZAAAAGgAAABsAAAAcAAAAHQAAAB4AAAAfAAAAIAAAACEAAAAiAAAAIwAAACUAAAAnAAAAKQAAACsAAAAvAAAAMwAAADsAAABDAAAAUwAAAGMAAACDAAAAAwEAAAMCAAADBAAAAwgAAAMQAAADIAAAA0AAAAOAAAADAAEAQeAPC1EBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAEAAAABQAAAAcAAAAIAAAACQAAAAoAAAALAAAADAAAAA0AAAAOAAAADwAAABAAQcQQC4sBAQAAAAIAAAADAAAABAAAAAUAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAABIAAAAUAAAAFgAAABgAAAAcAAAAIAAAACgAAAAwAAAAQAAAAIAAAAAAAQAAAAIAAAAEAAAACAAAABAAAAAgAAAAQAAAAIAAAAAAAQBBkBIL5gQBAAAAAQAAAAEAAAABAAAAAgAAAAIAAAADAAAAAwAAAAQAAAAGAAAABwAAAAgAAAAJAAAACgAAAAsAAAAMAAAADQAAAA4AAAAPAAAAEAAAAAEAAAAEAAAACAAAAAAAAAABAAEBBgAAAAAAAAQAAAAAEAAABAAAAAAgAAAFAQAAAAAAAAUDAAAAAAAABQQAAAAAAAAFBgAAAAAAAAUHAAAAAAAABQkAAAAAAAAFCgAAAAAAAAUMAAAAAAAABg4AAAAAAAEFEAAAAAAAAQUUAAAAAAABBRYAAAAAAAIFHAAAAAAAAwUgAAAAAAAEBTAAAAAgAAYFQAAAAAAABwWAAAAAAAAIBgABAAAAAAoGAAQAAAAADAYAEAAAIAAABAAAAAAAAAAEAQAAAAAAAAUCAAAAIAAABQQAAAAAAAAFBQAAACAAAAUHAAAAAAAABQgAAAAgAAAFCgAAAAAAAAULAAAAAAAABg0AAAAgAAEFEAAAAAAAAQUSAAAAIAABBRYAAAAAAAIFGAAAACAAAwUgAAAAAAADBSgAAAAAAAYEQAAAABAABgRAAAAAIAAHBYAAAAAAAAkGAAIAAAAACwYACAAAMAAABAAAAAAQAAAEAQAAACAAAAUCAAAAIAAABQMAAAAgAAAFBQAAACAAAAUGAAAAIAAABQgAAAAgAAAFCQAAACAAAAULAAAAIAAABQwAAAAAAAAGDwAAACAAAQUSAAAAIAABBRQAAAAgAAIFGAAAACAAAgUcAAAAIAADBSgAAAAgAAQFMAAAAAAAEAYAAAEAAAAPBgCAAAAAAA4GAEAAAAAADQYAIABBgBcLhwIBAAEBBQAAAAAAAAUAAAAAAAAGBD0AAAAAAAkF/QEAAAAADwX9fwAAAAAVBf3/HwAAAAMFBQAAAAAABwR9AAAAAAAMBf0PAAAAABIF/f8DAAAAFwX9/38AAAAFBR0AAAAAAAgE/QAAAAAADgX9PwAAAAAUBf3/DwAAAAIFAQAAABAABwR9AAAAAAALBf0HAAAAABEF/f8BAAAAFgX9/z8AAAAEBQ0AAAAQAAgE/QAAAAAADQX9HwAAAAATBf3/BwAAAAEFAQAAABAABgQ9AAAAAAAKBf0DAAAAABAF/f8AAAAAHAX9//8PAAAbBf3//wcAABoF/f//AwAAGQX9//8BAAAYBf3//wBBkBkLhgQBAAEBBgAAAAAAAAYDAAAAAAAABAQAAAAgAAAFBQAAAAAAAAUGAAAAAAAABQgAAAAAAAAFCQAAAAAAAAULAAAAAAAABg0AAAAAAAAGEAAAAAAAAAYTAAAAAAAABhYAAAAAAAAGGQAAAAAAAAYcAAAAAAAABh8AAAAAAAAGIgAAAAAAAQYlAAAAAAABBikAAAAAAAIGLwAAAAAAAwY7AAAAAAAEBlMAAAAAAAcGgwAAAAAACQYDAgAAEAAABAQAAAAAAAAEBQAAACAAAAUGAAAAAAAABQcAAAAgAAAFCQAAAAAAAAUKAAAAAAAABgwAAAAAAAAGDwAAAAAAAAYSAAAAAAAABhUAAAAAAAAGGAAAAAAAAAYbAAAAAAAABh4AAAAAAAAGIQAAAAAAAQYjAAAAAAABBicAAAAAAAIGKwAAAAAAAwYzAAAAAAAEBkMAAAAAAAUGYwAAAAAACAYDAQAAIAAABAQAAAAwAAAEBAAAABAAAAQFAAAAIAAABQcAAAAgAAAFCAAAACAAAAUKAAAAIAAABQsAAAAAAAAGDgAAAAAAAAYRAAAAAAAABhQAAAAAAAAGFwAAAAAAAAYaAAAAAAAABh0AAAAAAAAGIAAAAAAAEAYDAAEAAAAPBgOAAAAAAA4GA0AAAAAADQYDIAAAAAAMBgMQAAAAAAsGAwgAAAAACgYDBABBpB0L2QEBAAAAAwAAAAcAAAAPAAAAHwAAAD8AAAB/AAAA/wAAAP8BAAD/AwAA/wcAAP8PAAD/HwAA/z8AAP9/AAD//wAA//8BAP//AwD//wcA//8PAP//HwD//z8A//9/AP///wD///8B////A////wf///8P////H////z////9/AAAAAAEAAAACAAAABAAAAAAAAAACAAAABAAAAAgAAAAAAAAAAQAAAAIAAAABAAAABAAAAAQAAAAEAAAABAAAAAgAAAAIAAAACAAAAAcAAAAIAAAACQAAAAoAAAALAEGgIAsDwBBQ",I=new WeakMap;let R,B=0;class P extends r.Loader{constructor(e){super(e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerPool=new i,this.workerSourceURL="",this.workerConfig=null,"undefined"!=typeof MSC_TRANSCODER&&console.warn('THREE.KTX2Loader: Please update to latest "basis_transcoder". "msc_basis_transcoder" is no longer supported in three.js r125+.')}setTranscoderPath(e){return this.transcoderPath=e,this}setWorkerLimit(e){return this.workerPool.setWorkerLimit(e),this}async detectSupportAsync(e){return this.workerConfig={astcSupported:await e.hasFeatureAsync("texture-compression-astc"),etc1Supported:await e.hasFeatureAsync("texture-compression-etc1"),etc2Supported:await e.hasFeatureAsync("texture-compression-etc2"),dxtSupported:await e.hasFeatureAsync("texture-compression-bc"),bptcSupported:await e.hasFeatureAsync("texture-compression-bptc"),pvrtcSupported:await e.hasFeatureAsync("texture-compression-pvrtc")},this}detectSupport(e){return!0===e.isWebGPURenderer?this.workerConfig={astcSupported:e.hasFeature("texture-compression-astc"),etc1Supported:e.hasFeature("texture-compression-etc1"),etc2Supported:e.hasFeature("texture-compression-etc2"),dxtSupported:e.hasFeature("texture-compression-bc"),bptcSupported:e.hasFeature("texture-compression-bptc"),pvrtcSupported:e.hasFeature("texture-compression-pvrtc")}:this.workerConfig={astcSupported:e.extensions.has("WEBGL_compressed_texture_astc"),etc1Supported:e.extensions.has("WEBGL_compressed_texture_etc1"),etc2Supported:e.extensions.has("WEBGL_compressed_texture_etc"),dxtSupported:e.extensions.has("WEBGL_compressed_texture_s3tc"),bptcSupported:e.extensions.has("EXT_texture_compression_bptc"),pvrtcSupported:e.extensions.has("WEBGL_compressed_texture_pvrtc")||e.extensions.has("WEBKIT_WEBGL_compressed_texture_pvrtc")},this}init(){if(!this.transcoderPending){const e=new r.FileLoader(this.manager);e.setPath(this.transcoderPath),e.setWithCredentials(this.withCredentials);const t=e.loadAsync("basis_transcoder.js"),n=new r.FileLoader(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer"),n.setWithCredentials(this.withCredentials);const i=n.loadAsync("basis_transcoder.wasm");this.transcoderPending=Promise.all([t,i]).then((([e,t])=>{const n=P.BasisWorker.toString(),r=["/* constants */","let _EngineFormat = "+JSON.stringify(P.EngineFormat),"let _TranscoderFormat = "+JSON.stringify(P.TranscoderFormat),"let _BasisFormat = "+JSON.stringify(P.BasisFormat),"/* basis_transcoder.js */",e,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r])),this.transcoderBinary=t,this.workerPool.setWorkerCreator((()=>{const e=new Worker(this.workerSourceURL),t=this.transcoderBinary.slice(0);return e.postMessage({type:"init",config:this.workerConfig,transcoderBinary:t},[t]),e}))})),B>0&&console.warn("THREE.KTX2Loader: Multiple active KTX2 loaders may cause performance issues. Use a single KTX2Loader instance, or call .dispose() on old instances."),B++}return this.transcoderPending}load(e,t,n,i){if(null===this.workerConfig)throw new Error("THREE.KTX2Loader: Missing initialization with `.detectSupport( renderer )`.");const s=new r.FileLoader(this.manager);s.setResponseType("arraybuffer"),s.setWithCredentials(this.withCredentials),s.load(e,(e=>{if(I.has(e)){return I.get(e).promise.then(t).catch(i)}this._createTexture(e).then((e=>t?t(e):null)).catch(i)}),n,i)}_createTextureFrom(e,t){const{faces:n,width:i,height:s,format:o,type:a,error:c,dfdFlags:l}=e;if("error"===a)return Promise.reject(c);let u;if(6===t.faceCount)u=new r.CompressedCubeTexture(n,o,r.UnsignedByteType);else{const e=n[0].mipmaps;u=t.layerCount>1?new r.CompressedArrayTexture(e,i,s,t.layerCount,o,r.UnsignedByteType):new r.CompressedTexture(e,i,s,o,r.UnsignedByteType)}return u.minFilter=1===n[0].mipmaps.length?r.LinearFilter:r.LinearMipmapLinearFilter,u.magFilter=r.LinearFilter,u.generateMipmaps=!1,u.needsUpdate=!0,u.colorSpace=N(t),u.premultiplyAlpha=!!(1&l),u}async _createTexture(e,t={}){const n=function(e){const t=new Uint8Array(e.buffer,e.byteOffset,b.length);if(t[0]!==b[0]||t[1]!==b[1]||t[2]!==b[2]||t[3]!==b[3]||t[4]!==b[4]||t[5]!==b[5]||t[6]!==b[6]||t[7]!==b[7]||t[8]!==b[8]||t[9]!==b[9]||t[10]!==b[10]||t[11]!==b[11])throw new Error("Missing KTX 2.0 identifier.");const n=new _,r=17*Uint32Array.BYTES_PER_ELEMENT,i=new v(e,b.length,r,!0);n.vkFormat=i._nextUint32(),n.typeSize=i._nextUint32(),n.pixelWidth=i._nextUint32(),n.pixelHeight=i._nextUint32(),n.pixelDepth=i._nextUint32(),n.layerCount=i._nextUint32(),n.faceCount=i._nextUint32();const s=i._nextUint32();n.supercompressionScheme=i._nextUint32();const o=i._nextUint32(),a=i._nextUint32(),c=i._nextUint32(),l=i._nextUint32(),u=i._nextUint64(),h=i._nextUint64(),d=new v(e,b.length+r,3*s*8,!0);for(let t=0;t<s;t++)n.levels.push({levelData:new Uint8Array(e.buffer,e.byteOffset+d._nextUint64(),d._nextUint64()),uncompressedByteLength:d._nextUint64()});const p=new v(e,o,a,!0),f={vendorId:p._skip(4)._nextUint16(),descriptorType:p._nextUint16(),versionNumber:p._nextUint16(),descriptorBlockSize:p._nextUint16(),colorModel:p._nextUint8(),colorPrimaries:p._nextUint8(),transferFunction:p._nextUint8(),flags:p._nextUint8(),texelBlockDimension:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],bytesPlane:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],samples:[]},m=(f.descriptorBlockSize/4-6)/4;for(let e=0;e<m;e++){const t={bitOffset:p._nextUint16(),bitLength:p._nextUint8(),channelType:p._nextUint8(),samplePosition:[p._nextUint8(),p._nextUint8(),p._nextUint8(),p._nextUint8()],sampleLower:-1/0,sampleUpper:1/0};64&t.channelType?(t.sampleLower=p._nextInt32(),t.sampleUpper=p._nextInt32()):(t.sampleLower=p._nextUint32(),t.sampleUpper=p._nextUint32()),f.samples[e]=t}n.dataFormatDescriptor.length=0,n.dataFormatDescriptor.push(f);const g=new v(e,c,l,!0);for(;g._offset<l;){const e=g._nextUint32(),t=g._scan(e),r=x(t),i=g._scan(e-t.byteLength);n.keyValue[r]=r.match(/^ktx/i)?x(i):i,g._offset%4&&g._skip(4-g._offset%4)}if(h<=0)return n;const A=new v(e,u,h,!0),y=A._nextUint16(),w=A._nextUint16(),E=A._nextUint32(),T=A._nextUint32(),S=A._nextUint32(),M=A._nextUint32(),C=[];for(let e=0;e<s;e++)C.push({imageFlags:A._nextUint32(),rgbSliceByteOffset:A._nextUint32(),rgbSliceByteLength:A._nextUint32(),alphaSliceByteOffset:A._nextUint32(),alphaSliceByteLength:A._nextUint32()});const I=u+A._offset,R=I+E,B=R+T,P=B+S,D=new Uint8Array(e.buffer,e.byteOffset+I,E),O=new Uint8Array(e.buffer,e.byteOffset+R,T),L=new Uint8Array(e.buffer,e.byteOffset+B,S),N=new Uint8Array(e.buffer,e.byteOffset+P,M);return n.globalData={endpointCount:y,selectorCount:w,imageDescs:C,endpointsData:D,selectorsData:O,tablesData:L,extendedData:N},n}(new Uint8Array(e));if(0!==n.vkFormat)return async function(e){const{vkFormat:t}=e;if(void 0===O[t])throw new Error("THREE.KTX2Loader: Unsupported vkFormat.");let n;2===e.supercompressionScheme&&(R||(R=new Promise((async e=>{const t=new M;await t.init(),e(t)}))),n=await R);const i=[];for(let s=0;s<e.levels.length;s++){const o=Math.max(1,e.pixelWidth>>s),a=Math.max(1,e.pixelHeight>>s),c=e.pixelDepth?Math.max(1,e.pixelDepth>>s):0,l=e.levels[s];let u,h;if(0===e.supercompressionScheme)u=l.levelData;else{if(2!==e.supercompressionScheme)throw new Error("THREE.KTX2Loader: Unsupported supercompressionScheme.");u=n.decode(l.levelData,l.uncompressedByteLength)}h=L[t]===r.FloatType?new Float32Array(u.buffer,u.byteOffset,u.byteLength/Float32Array.BYTES_PER_ELEMENT):L[t]===r.HalfFloatType?new Uint16Array(u.buffer,u.byteOffset,u.byteLength/Uint16Array.BYTES_PER_ELEMENT):u,i.push({data:h,width:o,height:a,depth:c})}let s;if(D.has(O[t]))s=0===e.pixelDepth?new r.DataTexture(i[0].data,e.pixelWidth,e.pixelHeight):new r.Data3DTexture(i[0].data,e.pixelWidth,e.pixelHeight,e.pixelDepth);else{if(e.pixelDepth>0)throw new Error("THREE.KTX2Loader: Unsupported pixelDepth.");s=new r.CompressedTexture(i,e.pixelWidth,e.pixelHeight)}return s.mipmaps=i,s.type=L[t],s.format=O[t],s.colorSpace=N(e),s.needsUpdate=!0,Promise.resolve(s)}(n);const i=t,s=this.init().then((()=>this.workerPool.postMessage({type:"transcode",buffer:e,taskConfig:i},[e]))).then((e=>this._createTextureFrom(e.data,n)));return I.set(e,{promise:s}),s}dispose(){return this.workerPool.dispose(),this.workerSourceURL&&URL.revokeObjectURL(this.workerSourceURL),B--,this}}P.BasisFormat={ETC1S:0,UASTC_4x4:1},P.TranscoderFormat={ETC1:0,ETC2:1,BC1:2,BC3:3,BC4:4,BC5:5,BC7_M6_OPAQUE_ONLY:6,BC7_M5:7,PVRTC1_4_RGB:8,PVRTC1_4_RGBA:9,ASTC_4x4:10,ATC_RGB:11,ATC_RGBA_INTERPOLATED_ALPHA:12,RGBA32:13,RGB565:14,BGR565:15,RGBA4444:16},P.EngineFormat={RGBAFormat:r.RGBAFormat,RGBA_ASTC_4x4_Format:r.RGBA_ASTC_4x4_Format,RGBA_BPTC_Format:r.RGBA_BPTC_Format,RGBA_ETC2_EAC_Format:r.RGBA_ETC2_EAC_Format,RGBA_PVRTC_4BPPV1_Format:r.RGBA_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT5_Format:r.RGBA_S3TC_DXT5_Format,RGB_ETC1_Format:r.RGB_ETC1_Format,RGB_ETC2_Format:r.RGB_ETC2_Format,RGB_PVRTC_4BPPV1_Format:r.RGB_PVRTC_4BPPV1_Format,RGBA_S3TC_DXT1_Format:r.RGBA_S3TC_DXT1_Format},P.BasisWorker=function(){let e,t,n;const r=_EngineFormat,i=_TranscoderFormat,s=_BasisFormat;self.addEventListener("message",(function(o){const h=o.data;switch(h.type){case"init":e=h.config,d=h.transcoderBinary,t=new Promise((e=>{n={wasmBinary:d,onRuntimeInitialized:e},BASIS(n)})).then((()=>{n.initializeBasis(),void 0===n.KTX2File&&console.warn("THREE.KTX2Loader: Please update Basis Universal transcoder.")}));break;case"transcode":t.then((()=>{try{const{faces:t,buffers:o,width:d,height:p,hasAlpha:f,format:m,dfdFlags:g}=function(t){const o=new n.KTX2File(new Uint8Array(t));function h(){o.close(),o.delete()}if(!o.isValid())throw h(),new Error("THREE.KTX2Loader:\tInvalid or unsupported .ktx2 file");const d=o.isUASTC()?s.UASTC_4x4:s.ETC1S,p=o.getWidth(),f=o.getHeight(),m=o.getLayers()||1,g=o.getLevels(),A=o.getFaces(),y=o.getHasAlpha(),_=o.getDFDFlags(),{transcoderFormat:v,engineFormat:b}=function(t,n,o,u){let h,d;const p=t===s.ETC1S?a:c;for(let r=0;r<p.length;r++){const i=p[r];if(e[i.if]&&(i.basisFormat.includes(t)&&!(u&&i.transcoderFormat.length<2)&&(!i.needsPowerOfTwo||l(n)&&l(o))))return h=i.transcoderFormat[u?1:0],d=i.engineFormat[u?1:0],{transcoderFormat:h,engineFormat:d}}return console.warn("THREE.KTX2Loader: No suitable compressed texture format found. Decoding to RGBA32."),h=i.RGBA32,d=r.RGBAFormat,{transcoderFormat:h,engineFormat:d}}(d,p,f,y);if(!p||!f||!g)throw h(),new Error("THREE.KTX2Loader:\tInvalid texture");if(!o.startTranscoding())throw h(),new Error("THREE.KTX2Loader: .startTranscoding failed");const x=[],w=[];for(let e=0;e<A;e++){const t=[];for(let n=0;n<g;n++){const r=[];let i,s;for(let t=0;t<m;t++){const a=o.getImageLevelInfo(n,t,e);0!==e||0!==n||0!==t||a.origWidth%4==0&&a.origHeight%4==0||console.warn("THREE.KTX2Loader: ETC1S and UASTC textures should use multiple-of-four dimensions."),g>1?(i=a.origWidth,s=a.origHeight):(i=a.width,s=a.height);const c=new Uint8Array(o.getImageTranscodedSizeInBytes(n,t,0,v));if(!o.transcodeImage(c,n,t,e,v,0,-1,-1))throw h(),new Error("THREE.KTX2Loader: .transcodeImage failed.");r.push(c)}const a=u(r);t.push({data:a,width:i,height:s}),w.push(a.buffer)}x.push({mipmaps:t,width:p,height:f,format:b})}return h(),{faces:x,buffers:w,width:p,height:f,hasAlpha:y,format:b,dfdFlags:_}}(h.buffer);self.postMessage({type:"transcode",id:h.id,faces:t,width:d,height:p,hasAlpha:f,format:m,dfdFlags:g},o)}catch(e){console.error(e),self.postMessage({type:"error",id:h.id,error:e.message})}}))}var d}));const o=[{if:"astcSupported",basisFormat:[s.UASTC_4x4],transcoderFormat:[i.ASTC_4x4,i.ASTC_4x4],engineFormat:[r.RGBA_ASTC_4x4_Format,r.RGBA_ASTC_4x4_Format],priorityETC1S:1/0,priorityUASTC:1,needsPowerOfTwo:!1},{if:"bptcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[i.BC7_M5,i.BC7_M5],engineFormat:[r.RGBA_BPTC_Format,r.RGBA_BPTC_Format],priorityETC1S:3,priorityUASTC:2,needsPowerOfTwo:!1},{if:"dxtSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[i.BC1,i.BC3],engineFormat:[r.RGBA_S3TC_DXT1_Format,r.RGBA_S3TC_DXT5_Format],priorityETC1S:4,priorityUASTC:5,needsPowerOfTwo:!1},{if:"etc2Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[i.ETC1,i.ETC2],engineFormat:[r.RGB_ETC2_Format,r.RGBA_ETC2_EAC_Format],priorityETC1S:1,priorityUASTC:3,needsPowerOfTwo:!1},{if:"etc1Supported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[i.ETC1],engineFormat:[r.RGB_ETC1_Format],priorityETC1S:2,priorityUASTC:4,needsPowerOfTwo:!1},{if:"pvrtcSupported",basisFormat:[s.ETC1S,s.UASTC_4x4],transcoderFormat:[i.PVRTC1_4_RGB,i.PVRTC1_4_RGBA],engineFormat:[r.RGB_PVRTC_4BPPV1_Format,r.RGBA_PVRTC_4BPPV1_Format],priorityETC1S:5,priorityUASTC:6,needsPowerOfTwo:!0}],a=o.sort((function(e,t){return e.priorityETC1S-t.priorityETC1S})),c=o.sort((function(e,t){return e.priorityUASTC-t.priorityUASTC}));function l(e){return e<=2||!(e&e-1)&&0!==e}function u(e){if(1===e.length)return e[0];let t=0;for(let n=0;n<e.length;n++){t+=e[n].byteLength}const n=new Uint8Array(t);let r=0;for(let t=0;t<e.length;t++){const i=e[t];n.set(i,r),r+=i.byteLength}return n}};const D=new Set([r.RGBAFormat,r.RGFormat,r.RedFormat]),O={[g]:r.RGBAFormat,[p]:r.RGBAFormat,[l]:r.RGBAFormat,[u]:r.RGBAFormat,[m]:r.RGFormat,[d]:r.RGFormat,[a]:r.RGFormat,[c]:r.RGFormat,[f]:r.RedFormat,[h]:r.RedFormat,[o]:r.RedFormat,[s]:r.RedFormat,[y]:r.RGBA_ASTC_6x6_Format,[A]:r.RGBA_ASTC_6x6_Format},L={[g]:r.FloatType,[p]:r.HalfFloatType,[l]:r.UnsignedByteType,[u]:r.UnsignedByteType,[m]:r.FloatType,[d]:r.HalfFloatType,[a]:r.UnsignedByteType,[c]:r.UnsignedByteType,[f]:r.FloatType,[h]:r.HalfFloatType,[o]:r.UnsignedByteType,[s]:r.UnsignedByteType,[y]:r.UnsignedByteType,[A]:r.UnsignedByteType};function N(e){const t=e.dataFormatDescriptor[0];return 1===t.colorPrimaries?2===t.transferFunction?r.SRGBColorSpace:r.LinearSRGBColorSpace:10===t.colorPrimaries?2===t.transferFunction?r.DisplayP3ColorSpace:r.LinearDisplayP3ColorSpace:(0===t.colorPrimaries||console.warn(`THREE.KTX2Loader: Unsupported color primaries, "${t.colorPrimaries}"`),r.NoColorSpace)}},7070:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OBJLoader:()=>g});var r=n(9437);const i=/^[og]\s*(.+)?/,s=/^mtllib /,o=/^usemtl /,a=/^usemap /,c=/\s+/,l=new r.Vector3,u=new r.Vector3,h=new r.Vector3,d=new r.Vector3,p=new r.Vector3,f=new r.Color;function m(){const e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);const n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){const n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);const r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){const t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){const t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(let e=this.materials.length-1;e>=0;e--)this.materials[e].groupCount<=0&&this.materials.splice(e,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){const e=n.clone(0);e.inherited=!0,this.object.materials.push(e)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){const n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){const n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){const r=this.vertices,i=this.object.geometry.vertices;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){const t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){const r=this.normals,i=this.object.geometry.normals;i.push(r[e+0],r[e+1],r[e+2]),i.push(r[t+0],r[t+1],r[t+2]),i.push(r[n+0],r[n+1],r[n+2])},addFaceNormal:function(e,t,n){const r=this.vertices,i=this.object.geometry.normals;l.fromArray(r,e),u.fromArray(r,t),h.fromArray(r,n),p.subVectors(h,u),d.subVectors(l,u),p.cross(d),p.normalize(),i.push(p.x,p.y,p.z),i.push(p.x,p.y,p.z),i.push(p.x,p.y,p.z)},addColor:function(e,t,n){const r=this.colors,i=this.object.geometry.colors;void 0!==r[e]&&i.push(r[e+0],r[e+1],r[e+2]),void 0!==r[t]&&i.push(r[t+0],r[t+1],r[t+2]),void 0!==r[n]&&i.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){const r=this.uvs,i=this.object.geometry.uvs;i.push(r[e+0],r[e+1]),i.push(r[t+0],r[t+1]),i.push(r[n+0],r[n+1])},addDefaultUV:function(){const e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){const t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,i,s,o,a,c){const l=this.vertices.length;let u=this.parseVertexIndex(e,l),h=this.parseVertexIndex(t,l),d=this.parseVertexIndex(n,l);if(this.addVertex(u,h,d),this.addColor(u,h,d),void 0!==o&&""!==o){const e=this.normals.length;u=this.parseNormalIndex(o,e),h=this.parseNormalIndex(a,e),d=this.parseNormalIndex(c,e),this.addNormal(u,h,d)}else this.addFaceNormal(u,h,d);if(void 0!==r&&""!==r){const e=this.uvs.length;u=this.parseUVIndex(r,e),h=this.parseUVIndex(i,e),d=this.parseUVIndex(s,e),this.addUV(u,h,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";const t=this.vertices.length;for(let n=0,r=e.length;n<r;n++){const r=this.parseVertexIndex(e[n],t);this.addVertexPoint(r),this.addColor(r)}},addLineGeometry:function(e,t){this.object.geometry.type="Line";const n=this.vertices.length,r=this.uvs.length;for(let t=0,r=e.length;t<r;t++)this.addVertexLine(this.parseVertexIndex(e[t],n));for(let e=0,n=t.length;e<n;e++)this.addUVLine(this.parseUVIndex(t[e],r))}};return e.startObject("",!1),e}class g extends r.Loader{constructor(e){super(e),this.materials=null}load(e,t,n,i){const s=this,o=new r.FileLoader(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(s.parse(n))}catch(t){i?i(t):console.error(t),s.manager.itemError(e)}}),n,i)}setMaterials(e){return this.materials=e,this}parse(e){const t=new m;-1!==e.indexOf("\r\n")&&(e=e.replace(/\r\n/g,"\n")),-1!==e.indexOf("\\\n")&&(e=e.replace(/\\\n/g,""));const n=e.split("\n");let l=[];for(let e=0,r=n.length;e<r;e++){const r=n[e].trimStart();if(0===r.length)continue;const u=r.charAt(0);if("#"!==u)if("v"===u){const e=r.split(c);switch(e[0]){case"v":t.vertices.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])),e.length>=7?(f.setRGB(parseFloat(e[4]),parseFloat(e[5]),parseFloat(e[6])).convertSRGBToLinear(),t.colors.push(f.r,f.g,f.b)):t.colors.push(void 0,void 0,void 0);break;case"vn":t.normals.push(parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3]));break;case"vt":t.uvs.push(parseFloat(e[1]),parseFloat(e[2]))}}else if("f"===u){const e=r.slice(1).trim().split(c),n=[];for(let t=0,r=e.length;t<r;t++){const r=e[t];if(r.length>0){const e=r.split("/");n.push(e)}}const i=n[0];for(let e=1,r=n.length-1;e<r;e++){const r=n[e],s=n[e+1];t.addFace(i[0],r[0],s[0],i[1],r[1],s[1],i[2],r[2],s[2])}}else if("l"===u){const e=r.substring(1).trim().split(" ");let n=[];const i=[];if(-1===r.indexOf("/"))n=e;else for(let t=0,r=e.length;t<r;t++){const r=e[t].split("/");""!==r[0]&&n.push(r[0]),""!==r[1]&&i.push(r[1])}t.addLineGeometry(n,i)}else if("p"===u){const e=r.slice(1).trim().split(" ");t.addPointGeometry(e)}else if(null!==(l=i.exec(r))){const e=(" "+l[0].slice(1).trim()).slice(1);t.startObject(e)}else if(o.test(r))t.object.startMaterial(r.substring(7).trim(),t.materialLibraries);else if(s.test(r))t.materialLibraries.push(r.substring(7).trim());else if(a.test(r))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===u){if(l=r.split(" "),l.length>1){const e=l[1].trim().toLowerCase();t.object.smooth="0"!==e&&"off"!==e}else t.object.smooth=!0;const e=t.object.currentMaterial();e&&(e.smooth=t.object.smooth)}else{if("\0"===r)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+r+'"')}}t.finalize();const u=new r.Group;u.materialLibraries=[].concat(t.materialLibraries);if(!0===!(1===t.objects.length&&0===t.objects[0].geometry.vertices.length))for(let e=0,n=t.objects.length;e<n;e++){const n=t.objects[e],i=n.geometry,s=n.materials,o="Line"===i.type,a="Points"===i.type;let c=!1;if(0===i.vertices.length)continue;const l=new r.BufferGeometry;l.setAttribute("position",new r.Float32BufferAttribute(i.vertices,3)),i.normals.length>0&&l.setAttribute("normal",new r.Float32BufferAttribute(i.normals,3)),i.colors.length>0&&(c=!0,l.setAttribute("color",new r.Float32BufferAttribute(i.colors,3))),!0===i.hasUVIndices&&l.setAttribute("uv",new r.Float32BufferAttribute(i.uvs,2));const h=[];for(let e=0,n=s.length;e<n;e++){const n=s[e],i=n.name+"_"+n.smooth+"_"+c;let l=t.materials[i];if(null!==this.materials)if(l=this.materials.create(n.name),!o||!l||l instanceof r.LineBasicMaterial){if(a&&l&&!(l instanceof r.PointsMaterial)){const e=new r.PointsMaterial({size:10,sizeAttenuation:!1});r.Material.prototype.copy.call(e,l),e.color.copy(l.color),e.map=l.map,l=e}}else{const e=new r.LineBasicMaterial;r.Material.prototype.copy.call(e,l),e.color.copy(l.color),l=e}void 0===l&&(l=o?new r.LineBasicMaterial:a?new r.PointsMaterial({size:1,sizeAttenuation:!1}):new r.MeshPhongMaterial,l.name=n.name,l.flatShading=!n.smooth,l.vertexColors=c,t.materials[i]=l),h.push(l)}let d;if(h.length>1){for(let e=0,t=s.length;e<t;e++){const t=s[e];l.addGroup(t.groupStart,t.groupCount,e)}d=o?new r.LineSegments(l,h):a?new r.Points(l,h):new r.Mesh(l,h)}else d=o?new r.LineSegments(l,h[0]):a?new r.Points(l,h[0]):new r.Mesh(l,h[0]);d.name=n.name,u.add(d)}else if(t.vertices.length>0){const e=new r.PointsMaterial({size:1,sizeAttenuation:!1}),n=new r.BufferGeometry;n.setAttribute("position",new r.Float32BufferAttribute(t.vertices,3)),t.colors.length>0&&void 0!==t.colors[0]&&(n.setAttribute("color",new r.Float32BufferAttribute(t.colors,3)),e.vertexColors=!0);const i=new r.Points(n,e);u.add(i)}return u}}},7231:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RGBELoader:()=>i});var r=n(9437);class i extends r.DataTextureLoader{constructor(e){super(e),this.type=r.HalfFloatType}parse(e){const t=function(e,t){switch(e){case 1:throw new Error("THREE.RGBELoader: Read Error: "+(t||""));case 2:throw new Error("THREE.RGBELoader: Write Error: "+(t||""));case 3:throw new Error("THREE.RGBELoader: Bad File Format: "+(t||""));default:throw new Error("THREE.RGBELoader: Memory Error: "+(t||""))}},n=function(e,t,n){t=t||1024;let r=e.pos,i=-1,s=0,o="",a=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));for(;0>(i=a.indexOf("\n"))&&s<t&&r<e.byteLength;)o+=a,s+=a.length,r+=128,a+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<i&&(!1!==n&&(e.pos+=s+i+1),o+a.slice(0,i))},i=function(e,t,n,r){const i=e[t+3],s=Math.pow(2,i-128)/255;n[r+0]=e[t+0]*s,n[r+1]=e[t+1]*s,n[r+2]=e[t+2]*s,n[r+3]=1},s=function(e,t,n,i){const s=e[t+3],o=Math.pow(2,s-128)/255;n[i+0]=r.DataUtils.toHalfFloat(Math.min(e[t+0]*o,65504)),n[i+1]=r.DataUtils.toHalfFloat(Math.min(e[t+1]*o,65504)),n[i+2]=r.DataUtils.toHalfFloat(Math.min(e[t+2]*o,65504)),n[i+3]=r.DataUtils.toHalfFloat(1)},o=new Uint8Array(e);o.pos=0;const a=function(e){const r=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,o=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,a={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};let c,l;for((e.pos>=e.byteLength||!(c=n(e)))&&t(1,"no header found"),(l=c.match(/^#\?(\S+)/))||t(3,"bad initial token"),a.valid|=1,a.programtype=l[1],a.string+=c+"\n";c=n(e),!1!==c;)if(a.string+=c+"\n","#"!==c.charAt(0)){if((l=c.match(r))&&(a.gamma=parseFloat(l[1])),(l=c.match(i))&&(a.exposure=parseFloat(l[1])),(l=c.match(s))&&(a.valid|=2,a.format=l[1]),(l=c.match(o))&&(a.valid|=4,a.height=parseInt(l[1],10),a.width=parseInt(l[2],10)),2&a.valid&&4&a.valid)break}else a.comments+=c+"\n";return 2&a.valid||t(3,"missing format specifier"),4&a.valid||t(3,"missing image size specifier"),a}(o),c=a.width,l=a.height,u=function(e,n,r){const i=n;if(i<8||i>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);i!==(e[2]<<8|e[3])&&t(3,"wrong scanline width");const s=new Uint8Array(4*n*r);s.length||t(4,"unable to allocate buffer space");let o=0,a=0;const c=4*i,l=new Uint8Array(4),u=new Uint8Array(c);let h=r;for(;h>0&&a<e.byteLength;){a+4>e.byteLength&&t(1),l[0]=e[a++],l[1]=e[a++],l[2]=e[a++],l[3]=e[a++],2==l[0]&&2==l[1]&&(l[2]<<8|l[3])==i||t(3,"bad rgbe scanline format");let n,r=0;for(;r<c&&a<e.byteLength;){n=e[a++];const i=n>128;if(i&&(n-=128),(0===n||r+n>c)&&t(3,"bad scanline data"),i){const t=e[a++];for(let e=0;e<n;e++)u[r++]=t}else u.set(e.subarray(a,a+n),r),r+=n,a+=n}const d=i;for(let e=0;e<d;e++){let t=0;s[o]=u[e+t],t+=i,s[o+1]=u[e+t],t+=i,s[o+2]=u[e+t],t+=i,s[o+3]=u[e+t],o+=4}h--}return s}(o.subarray(o.pos),c,l);let h,d,p;switch(this.type){case r.FloatType:p=u.length/4;const e=new Float32Array(4*p);for(let t=0;t<p;t++)i(u,4*t,e,4*t);h=e,d=r.FloatType;break;case r.HalfFloatType:p=u.length/4;const t=new Uint16Array(4*p);for(let e=0;e<p;e++)s(u,4*e,t,4*e);h=t,d=r.HalfFloatType;break;default:throw new Error("THREE.RGBELoader: Unsupported type: "+this.type)}return{width:c,height:l,data:h,header:a.string,gamma:a.gamma,exposure:a.exposure,type:d}}setDataType(e){return this.type=e,this}load(e,t,n,i){return super.load(e,(function(e,n){switch(e.type){case r.FloatType:case r.HalfFloatType:e.colorSpace=r.LinearSRGBColorSpace,e.minFilter=r.LinearFilter,e.magFilter=r.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,i)}}},9702:(e,t,n)=>{"use strict";n.r(t),n.d(t,{STLLoader:()=>i});var r=n(9437);class i extends r.Loader{constructor(e){super(e)}load(e,t,n,i){const s=this,o=new r.FileLoader(this.manager);o.setPath(this.path),o.setResponseType("arraybuffer"),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,(function(n){try{t(s.parse(n))}catch(t){i?i(t):console.error(t),s.manager.itemError(e)}}),n,i)}parse(e){function t(e,t,n){for(let r=0,i=e.length;r<i;r++)if(e[r]!==t.getUint8(n+r))return!1;return!0}const n=function(e){if("string"==typeof e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=255&e.charCodeAt(n);return t.buffer||t}return e}(e);return function(e){const n=new DataView(e);if(84+50*n.getUint32(80,!0)===n.byteLength)return!0;const r=[115,111,108,105,100];for(let e=0;e<5;e++)if(t(r,n,e))return!1;return!0}(n)?function(e){const t=new DataView(e),n=t.getUint32(80,!0);let i,s,o,a,c,l,u,h,d=!1;for(let e=0;e<70;e++)1129270351==t.getUint32(e,!1)&&82==t.getUint8(e+4)&&61==t.getUint8(e+5)&&(d=!0,a=new Float32Array(3*n*3),c=t.getUint8(e+6)/255,l=t.getUint8(e+7)/255,u=t.getUint8(e+8)/255,h=t.getUint8(e+9)/255);const p=new r.BufferGeometry,f=new Float32Array(3*n*3),m=new Float32Array(3*n*3),g=new r.Color;for(let e=0;e<n;e++){const n=84+50*e,r=t.getFloat32(n,!0),h=t.getFloat32(n+4,!0),p=t.getFloat32(n+8,!0);if(d){const e=t.getUint16(n+48,!0);32768&e?(i=c,s=l,o=u):(i=(31&e)/31,s=(e>>5&31)/31,o=(e>>10&31)/31)}for(let c=1;c<=3;c++){const l=n+12*c,u=3*e*3+3*(c-1);f[u]=t.getFloat32(l,!0),f[u+1]=t.getFloat32(l+4,!0),f[u+2]=t.getFloat32(l+8,!0),m[u]=r,m[u+1]=h,m[u+2]=p,d&&(g.set(i,s,o).convertSRGBToLinear(),a[u]=g.r,a[u+1]=g.g,a[u+2]=g.b)}}return p.setAttribute("position",new r.BufferAttribute(f,3)),p.setAttribute("normal",new r.BufferAttribute(m,3)),d&&(p.setAttribute("color",new r.BufferAttribute(a,3)),p.hasColors=!0,p.alpha=h),p}(n):function(e){const t=new r.BufferGeometry,n=/solid([\s\S]*?)endsolid/g,i=/facet([\s\S]*?)endfacet/g,s=/solid\s(.+)/;let o=0;const a=/[\s]+([+-]?(?:\d*)(?:\.\d*)?(?:[eE][+-]?\d+)?)/.source,c=new RegExp("vertex"+a+a+a,"g"),l=new RegExp("normal"+a+a+a,"g"),u=[],h=[],d=[],p=new r.Vector3;let f,m=0,g=0,A=0;for(;null!==(f=n.exec(e));){g=A;const e=f[0],n=null!==(f=s.exec(e))?f[1]:"";for(d.push(n);null!==(f=i.exec(e));){let e=0,t=0;const n=f[0];for(;null!==(f=l.exec(n));)p.x=parseFloat(f[1]),p.y=parseFloat(f[2]),p.z=parseFloat(f[3]),t++;for(;null!==(f=c.exec(n));)u.push(parseFloat(f[1]),parseFloat(f[2]),parseFloat(f[3])),h.push(p.x,p.y,p.z),e++,A++;1!==t&&console.error("THREE.STLLoader: Something isn't right with the normal of face number "+o),3!==e&&console.error("THREE.STLLoader: Something isn't right with the vertices of face number "+o),o++}const r=g,a=A-g;t.userData.groupNames=d,t.addGroup(r,a,m),m++}return t.setAttribute("position",new r.Float32BufferAttribute(u,3)),t.setAttribute("normal",new r.Float32BufferAttribute(h,3)),t}("string"!=typeof(i=e)?(new TextDecoder).decode(i):i);var i}}},9289:(e,t,n)=>{"use strict";n.r(t),n.d(t,{SVGLoader:()=>s});var r=n(9437);const i=r.SRGBColorSpace;class s extends r.Loader{constructor(e){super(e),this.defaultDPI=90,this.defaultUnit="px"}load(e,t,n,i){const s=this,o=new r.FileLoader(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,(function(n){try{t(s.parse(n))}catch(t){i?i(t):console.error(t),s.manager.itemError(e)}}),n,i)}parse(e){const t=this;function n(e,t,n,r,i,o,a,c){if(0==t||0==n)return void e.lineTo(c.x,c.y);r=r*Math.PI/180,t=Math.abs(t),n=Math.abs(n);const l=(a.x-c.x)/2,u=(a.y-c.y)/2,h=Math.cos(r)*l+Math.sin(r)*u,d=-Math.sin(r)*l+Math.cos(r)*u;let p=t*t,f=n*n;const m=h*h,g=d*d,A=m/p+g/f;if(A>1){const e=Math.sqrt(A);p=(t*=e)*t,f=(n*=e)*n}const y=p*g+f*m,_=(p*f-y)/y;let v=Math.sqrt(Math.max(0,_));i===o&&(v=-v);const b=v*t*d/n,x=-v*n*h/t,w=Math.cos(r)*b-Math.sin(r)*x+(a.x+c.x)/2,E=Math.sin(r)*b+Math.cos(r)*x+(a.y+c.y)/2,T=s(1,0,(h-b)/t,(d-x)/n),S=s((h-b)/t,(d-x)/n,(-h-b)/t,(-d-x)/n)%(2*Math.PI);e.currentPath.absellipse(w,E,t,n,T,T+S,0===o,r)}function s(e,t,n,r){const i=e*n+t*r,s=Math.sqrt(e*e+t*t)*Math.sqrt(n*n+r*r);let o=Math.acos(Math.max(-1,Math.min(1,i/s)));return e*r-t*n<0&&(o=-o),o}function o(e,t){t=Object.assign({},t);let n={};if(e.hasAttribute("class")){const t=e.getAttribute("class").split(/\s/).filter(Boolean).map((e=>e.trim()));for(let e=0;e<t.length;e++)n=Object.assign(n,A["."+t[e]])}function r(r,i,s){void 0===s&&(s=function(e){return e.startsWith("url")&&console.warn("SVGLoader: url access in attributes is not implemented."),e}),e.hasAttribute(r)&&(t[i]=s(e.getAttribute(r))),n[r]&&(t[i]=s(n[r])),e.style&&""!==e.style[r]&&(t[i]=s(e.style[r]))}function i(e){return Math.max(0,Math.min(1,h(e)))}function s(e){return Math.max(0,h(e))}return e.hasAttribute("id")&&(n=Object.assign(n,A["#"+e.getAttribute("id")])),r("fill","fill"),r("fill-opacity","fillOpacity",i),r("fill-rule","fillRule"),r("opacity","opacity",i),r("stroke","stroke"),r("stroke-opacity","strokeOpacity",i),r("stroke-width","strokeWidth",s),r("stroke-linejoin","strokeLineJoin"),r("stroke-linecap","strokeLineCap"),r("stroke-miterlimit","strokeMiterLimit",s),r("visibility","visibility"),t}function a(e,t){return e-(t-e)}function c(e,t,n){if("string"!=typeof e)throw new TypeError("Invalid input: "+typeof e);const r={SEPARATOR:/[ \t\r\n\,.\-+]/,WHITESPACE:/[ \t\r\n]/,DIGIT:/[\d]/,SIGN:/[-+]/,POINT:/\./,COMMA:/,/,EXP:/e/i,FLAGS:/[01]/};let i=0,s=!0,o="",a="";const c=[];function l(e,t,n){const r=new SyntaxError('Unexpected character "'+e+'" at index '+t+".");throw r.partial=n,r}function u(){""!==o&&(""===a?c.push(Number(o)):c.push(Number(o)*Math.pow(10,Number(a)))),o="",a=""}let h;const d=e.length;for(let p=0;p<d;p++)if(h=e[p],Array.isArray(t)&&t.includes(c.length%n)&&r.FLAGS.test(h))i=1,o=h,u();else{if(0===i){if(r.WHITESPACE.test(h))continue;if(r.DIGIT.test(h)||r.SIGN.test(h)){i=1,o=h;continue}if(r.POINT.test(h)){i=2,o=h;continue}r.COMMA.test(h)&&(s&&l(h,p,c),s=!0)}if(1===i){if(r.DIGIT.test(h)){o+=h;continue}if(r.POINT.test(h)){o+=h,i=2;continue}if(r.EXP.test(h)){i=3;continue}r.SIGN.test(h)&&1===o.length&&r.SIGN.test(o[0])&&l(h,p,c)}if(2===i){if(r.DIGIT.test(h)){o+=h;continue}if(r.EXP.test(h)){i=3;continue}r.POINT.test(h)&&"."===o[o.length-1]&&l(h,p,c)}if(3===i){if(r.DIGIT.test(h)){a+=h;continue}if(r.SIGN.test(h)){if(""===a){a+=h;continue}1===a.length&&r.SIGN.test(a)&&l(h,p,c)}}r.WHITESPACE.test(h)?(u(),i=0,s=!1):r.COMMA.test(h)?(u(),i=0,s=!0):r.SIGN.test(h)?(u(),i=1,o=h):r.POINT.test(h)?(u(),i=2,o=h):l(h,p,c)}return u(),c}const l=["mm","cm","in","pt","pc","px"],u={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function h(e){let n,r="px";if("string"==typeof e||e instanceof String)for(let t=0,n=l.length;t<n;t++){const n=l[t];if(e.endsWith(n)){r=n,e=e.substring(0,e.length-n.length);break}}return"px"===r&&"px"!==t.defaultUnit?n=u.in[t.defaultUnit]/t.defaultDPI:(n=u[r][t.defaultUnit],n<0&&(n=u[r].in*t.defaultDPI)),n*parseFloat(e)}function d(e){const t=e.elements;return t[0]*t[4]-t[1]*t[3]<0}function p(e){const t=e.elements,n=t[0]*t[3]+t[1]*t[4];if(0===n)return!1;const r=f(e),i=m(e);return Math.abs(n/(r*i))>Number.EPSILON}function f(e){const t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function m(e){const t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}const g=[],A={},y=[],_=new r.Matrix3,v=new r.Matrix3,b=new r.Matrix3,x=new r.Matrix3,w=new r.Vector2,E=new r.Vector3,T=new r.Matrix3,S=(new DOMParser).parseFromString(e,"image/svg+xml");!function e(t,s){if(1!==t.nodeType)return;const l=function(e){if(!(e.hasAttribute("transform")||"use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))))return null;const t=function(e){const t=new r.Matrix3,n=_;if("use"===e.nodeName&&(e.hasAttribute("x")||e.hasAttribute("y"))){const n=h(e.getAttribute("x")),r=h(e.getAttribute("y"));t.translate(n,r)}if(e.hasAttribute("transform")){const r=e.getAttribute("transform").split(")");for(let e=r.length-1;e>=0;e--){const i=r[e].trim();if(""===i)continue;const s=i.indexOf("("),o=i.length;if(s>0&&s<o){const e=i.slice(0,s),t=c(i.slice(s+1));switch(n.identity(),e){case"translate":if(t.length>=1){const e=t[0];let r=0;t.length>=2&&(r=t[1]),n.translate(e,r)}break;case"rotate":if(t.length>=1){let e=0,r=0,i=0;e=t[0]*Math.PI/180,t.length>=3&&(r=t[1],i=t[2]),v.makeTranslation(-r,-i),b.makeRotation(e),x.multiplyMatrices(b,v),v.makeTranslation(r,i),n.multiplyMatrices(v,x)}break;case"scale":if(t.length>=1){const e=t[0];let r=e;t.length>=2&&(r=t[1]),n.scale(e,r)}break;case"skewX":1===t.length&&n.set(1,Math.tan(t[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===t.length&&n.set(1,0,0,Math.tan(t[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===t.length&&n.set(t[0],t[2],t[4],t[1],t[3],t[5],0,0,1)}}t.premultiply(n)}}return t}(e);y.length>0&&t.premultiply(y[y.length-1]);return T.copy(t),y.push(t),t}(t);let u=!1,S=null;switch(t.nodeName){case"svg":case"g":s=o(t,s);break;case"style":!function(e){if(!e.sheet||!e.sheet.cssRules||!e.sheet.cssRules.length)return;for(let t=0;t<e.sheet.cssRules.length;t++){const n=e.sheet.cssRules[t];if(1!==n.type)continue;const r=n.selectorText.split(/,/gm).filter(Boolean).map((e=>e.trim()));for(let e=0;e<r.length;e++){const t=Object.fromEntries(Object.entries(n.style).filter((([,e])=>""!==e)));A[r[e]]=Object.assign(A[r[e]]||{},t)}}}(t);break;case"path":s=o(t,s),t.hasAttribute("d")&&(S=function(e){const t=new r.ShapePath,i=new r.Vector2,s=new r.Vector2,o=new r.Vector2;let l=!0,u=!1;const h=e.getAttribute("d");if(""===h||"none"===h)return null;const d=h.match(/[a-df-z][^a-df-z]*/gi);for(let e=0,r=d.length;e<r;e++){const r=d[e],h=r.charAt(0),p=r.slice(1).trim();let f;switch(!0===l&&(u=!0,l=!1),h){case"M":f=c(p);for(let e=0,n=f.length;e<n;e+=2)i.x=f[e+0],i.y=f[e+1],s.x=i.x,s.y=i.y,0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y),0===e&&o.copy(i);break;case"H":f=c(p);for(let e=0,n=f.length;e<n;e++)i.x=f[e],s.x=i.x,s.y=i.y,t.lineTo(i.x,i.y),0===e&&!0===u&&o.copy(i);break;case"V":f=c(p);for(let e=0,n=f.length;e<n;e++)i.y=f[e],s.x=i.x,s.y=i.y,t.lineTo(i.x,i.y),0===e&&!0===u&&o.copy(i);break;case"L":f=c(p);for(let e=0,n=f.length;e<n;e+=2)i.x=f[e+0],i.y=f[e+1],s.x=i.x,s.y=i.y,t.lineTo(i.x,i.y),0===e&&!0===u&&o.copy(i);break;case"C":f=c(p);for(let e=0,n=f.length;e<n;e+=6)t.bezierCurveTo(f[e+0],f[e+1],f[e+2],f[e+3],f[e+4],f[e+5]),s.x=f[e+2],s.y=f[e+3],i.x=f[e+4],i.y=f[e+5],0===e&&!0===u&&o.copy(i);break;case"S":f=c(p);for(let e=0,n=f.length;e<n;e+=4)t.bezierCurveTo(a(i.x,s.x),a(i.y,s.y),f[e+0],f[e+1],f[e+2],f[e+3]),s.x=f[e+0],s.y=f[e+1],i.x=f[e+2],i.y=f[e+3],0===e&&!0===u&&o.copy(i);break;case"Q":f=c(p);for(let e=0,n=f.length;e<n;e+=4)t.quadraticCurveTo(f[e+0],f[e+1],f[e+2],f[e+3]),s.x=f[e+0],s.y=f[e+1],i.x=f[e+2],i.y=f[e+3],0===e&&!0===u&&o.copy(i);break;case"T":f=c(p);for(let e=0,n=f.length;e<n;e+=2){const n=a(i.x,s.x),r=a(i.y,s.y);t.quadraticCurveTo(n,r,f[e+0],f[e+1]),s.x=n,s.y=r,i.x=f[e+0],i.y=f[e+1],0===e&&!0===u&&o.copy(i)}break;case"A":f=c(p,[3,4],7);for(let e=0,r=f.length;e<r;e+=7){if(f[e+5]==i.x&&f[e+6]==i.y)continue;const r=i.clone();i.x=f[e+5],i.y=f[e+6],s.x=i.x,s.y=i.y,n(t,f[e],f[e+1],f[e+2],f[e+3],f[e+4],r,i),0===e&&!0===u&&o.copy(i)}break;case"m":f=c(p);for(let e=0,n=f.length;e<n;e+=2)i.x+=f[e+0],i.y+=f[e+1],s.x=i.x,s.y=i.y,0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y),0===e&&o.copy(i);break;case"h":f=c(p);for(let e=0,n=f.length;e<n;e++)i.x+=f[e],s.x=i.x,s.y=i.y,t.lineTo(i.x,i.y),0===e&&!0===u&&o.copy(i);break;case"v":f=c(p);for(let e=0,n=f.length;e<n;e++)i.y+=f[e],s.x=i.x,s.y=i.y,t.lineTo(i.x,i.y),0===e&&!0===u&&o.copy(i);break;case"l":f=c(p);for(let e=0,n=f.length;e<n;e+=2)i.x+=f[e+0],i.y+=f[e+1],s.x=i.x,s.y=i.y,t.lineTo(i.x,i.y),0===e&&!0===u&&o.copy(i);break;case"c":f=c(p);for(let e=0,n=f.length;e<n;e+=6)t.bezierCurveTo(i.x+f[e+0],i.y+f[e+1],i.x+f[e+2],i.y+f[e+3],i.x+f[e+4],i.y+f[e+5]),s.x=i.x+f[e+2],s.y=i.y+f[e+3],i.x+=f[e+4],i.y+=f[e+5],0===e&&!0===u&&o.copy(i);break;case"s":f=c(p);for(let e=0,n=f.length;e<n;e+=4)t.bezierCurveTo(a(i.x,s.x),a(i.y,s.y),i.x+f[e+0],i.y+f[e+1],i.x+f[e+2],i.y+f[e+3]),s.x=i.x+f[e+0],s.y=i.y+f[e+1],i.x+=f[e+2],i.y+=f[e+3],0===e&&!0===u&&o.copy(i);break;case"q":f=c(p);for(let e=0,n=f.length;e<n;e+=4)t.quadraticCurveTo(i.x+f[e+0],i.y+f[e+1],i.x+f[e+2],i.y+f[e+3]),s.x=i.x+f[e+0],s.y=i.y+f[e+1],i.x+=f[e+2],i.y+=f[e+3],0===e&&!0===u&&o.copy(i);break;case"t":f=c(p);for(let e=0,n=f.length;e<n;e+=2){const n=a(i.x,s.x),r=a(i.y,s.y);t.quadraticCurveTo(n,r,i.x+f[e+0],i.y+f[e+1]),s.x=n,s.y=r,i.x=i.x+f[e+0],i.y=i.y+f[e+1],0===e&&!0===u&&o.copy(i)}break;case"a":f=c(p,[3,4],7);for(let e=0,r=f.length;e<r;e+=7){if(0==f[e+5]&&0==f[e+6])continue;const r=i.clone();i.x+=f[e+5],i.y+=f[e+6],s.x=i.x,s.y=i.y,n(t,f[e],f[e+1],f[e+2],f[e+3],f[e+4],r,i),0===e&&!0===u&&o.copy(i)}break;case"Z":case"z":t.currentPath.autoClose=!0,t.currentPath.curves.length>0&&(i.copy(o),t.currentPath.currentPoint.copy(i),l=!0);break;default:console.warn(r)}u=!1}return t}(t));break;case"rect":s=o(t,s),S=function(e){const t=h(e.getAttribute("x")||0),n=h(e.getAttribute("y")||0),i=h(e.getAttribute("rx")||e.getAttribute("ry")||0),s=h(e.getAttribute("ry")||e.getAttribute("rx")||0),o=h(e.getAttribute("width")),a=h(e.getAttribute("height")),c=.448084975506,l=new r.ShapePath;l.moveTo(t+i,n),l.lineTo(t+o-i,n),(0!==i||0!==s)&&l.bezierCurveTo(t+o-i*c,n,t+o,n+s*c,t+o,n+s);l.lineTo(t+o,n+a-s),(0!==i||0!==s)&&l.bezierCurveTo(t+o,n+a-s*c,t+o-i*c,n+a,t+o-i,n+a);l.lineTo(t+i,n+a),(0!==i||0!==s)&&l.bezierCurveTo(t+i*c,n+a,t,n+a-s*c,t,n+a-s);l.lineTo(t,n+s),(0!==i||0!==s)&&l.bezierCurveTo(t,n+s*c,t+i*c,n,t+i,n);return l}(t);break;case"polygon":s=o(t,s),S=function(e){function t(e,t,n){const r=h(t),o=h(n);0===s?i.moveTo(r,o):i.lineTo(r,o),s++}const n=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,i=new r.ShapePath;let s=0;return e.getAttribute("points").replace(n,t),i.currentPath.autoClose=!0,i}(t);break;case"polyline":s=o(t,s),S=function(e){function t(e,t,n){const r=h(t),o=h(n);0===s?i.moveTo(r,o):i.lineTo(r,o),s++}const n=/([+-]?\d*\.?\d+(?:e[+-]?\d+)?)(?:,|\s)([+-]?\d*\.?\d+(?:e[+-]?\d+)?)/g,i=new r.ShapePath;let s=0;return e.getAttribute("points").replace(n,t),i.currentPath.autoClose=!1,i}(t);break;case"circle":s=o(t,s),S=function(e){const t=h(e.getAttribute("cx")||0),n=h(e.getAttribute("cy")||0),i=h(e.getAttribute("r")||0),s=new r.Path;s.absarc(t,n,i,0,2*Math.PI);const o=new r.ShapePath;return o.subPaths.push(s),o}(t);break;case"ellipse":s=o(t,s),S=function(e){const t=h(e.getAttribute("cx")||0),n=h(e.getAttribute("cy")||0),i=h(e.getAttribute("rx")||0),s=h(e.getAttribute("ry")||0),o=new r.Path;o.absellipse(t,n,i,s,0,2*Math.PI);const a=new r.ShapePath;return a.subPaths.push(o),a}(t);break;case"line":s=o(t,s),S=function(e){const t=h(e.getAttribute("x1")||0),n=h(e.getAttribute("y1")||0),i=h(e.getAttribute("x2")||0),s=h(e.getAttribute("y2")||0),o=new r.ShapePath;return o.moveTo(t,n),o.lineTo(i,s),o.currentPath.autoClose=!1,o}(t);break;case"defs":u=!0;break;case"use":s=o(t,s);const i=(t.getAttributeNS("http://www.w3.org/1999/xlink","href")||"").substring(1),l=t.viewportElement.getElementById(i);l?e(l,s):console.warn("SVGLoader: 'use node' references non-existent node id: "+i)}S&&(void 0!==s.fill&&"none"!==s.fill&&S.color.setStyle(s.fill,i),function(e,t){function n(e){E.set(e.x,e.y,1).applyMatrix3(t),e.set(E.x,E.y)}function i(e){const n=e.xRadius,i=e.yRadius,s=Math.cos(e.aRotation),o=Math.sin(e.aRotation),a=new r.Vector3(n*s,n*o,0),c=new r.Vector3(-i*o,i*s,0),l=a.applyMatrix3(t),u=c.applyMatrix3(t),h=_.set(l.x,u.x,0,l.y,u.y,0,0,0,1),p=v.copy(h).invert(),f=b.copy(p).transpose().multiply(p).elements,m=function(e,t,n){let r,i,s,o,a;const c=e+n,l=e-n,u=Math.sqrt(l*l+4*t*t);c>0?(r=.5*(c+u),a=1/r,i=e*a*n-t*a*t):c<0?i=.5*(c-u):(r=.5*u,i=-.5*u);s=l>0?l+u:l-u;Math.abs(s)>2*Math.abs(t)?(a=-2*t/s,o=1/Math.sqrt(1+a*a),s=a*o):0===Math.abs(t)?(s=1,o=0):(a=-.5*s/t,s=1/Math.sqrt(1+a*a),o=a*s);l>0&&(a=s,s=-o,o=a);return{rt1:r,rt2:i,cs:s,sn:o}}(f[0],f[1],f[4]),g=Math.sqrt(m.rt1),A=Math.sqrt(m.rt2);e.xRadius=1/g,e.yRadius=1/A,e.aRotation=Math.atan2(m.sn,m.cs);if(!((e.aEndAngle-e.aStartAngle)%(2*Math.PI)<Number.EPSILON)){const n=v.set(g,0,0,0,A,0,0,0,1),i=b.set(m.cs,m.sn,0,-m.sn,m.cs,0,0,0,1),s=n.multiply(i).multiply(h),o=e=>{const{x:t,y:n}=new r.Vector3(Math.cos(e),Math.sin(e),0).applyMatrix3(s);return Math.atan2(n,t)};e.aStartAngle=o(e.aStartAngle),e.aEndAngle=o(e.aEndAngle),d(t)&&(e.aClockwise=!e.aClockwise)}}function s(e){const n=f(t),r=m(t);e.xRadius*=n,e.yRadius*=r;const i=n>Number.EPSILON?Math.atan2(t.elements[1],t.elements[0]):Math.atan2(-t.elements[3],t.elements[4]);e.aRotation+=i,d(t)&&(e.aStartAngle*=-1,e.aEndAngle*=-1,e.aClockwise=!e.aClockwise)}const o=e.subPaths;for(let e=0,r=o.length;e<r;e++){const r=o[e].curves;for(let e=0;e<r.length;e++){const o=r[e];o.isLineCurve?(n(o.v1),n(o.v2)):o.isCubicBezierCurve?(n(o.v0),n(o.v1),n(o.v2),n(o.v3)):o.isQuadraticBezierCurve?(n(o.v0),n(o.v1),n(o.v2)):o.isEllipseCurve&&(w.set(o.aX,o.aY),n(w),o.aX=w.x,o.aY=w.y,p(t)?i(o):s(o))}}}(S,T),g.push(S),S.userData={node:t,style:s});const M=t.childNodes;for(let t=0;t<M.length;t++){const n=M[t];u&&"style"!==n.nodeName&&"defs"!==n.nodeName||e(n,s)}l&&(y.pop(),y.length>0?T.copy(y[y.length-1]):T.identity())}(S.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4});return{paths:g,xml:S.documentElement}}static createShapes(e){const t=999999999,n=0,i=1,s=2,o=3,a=4,c=5,l=6,u={loc:n,t:0};function h(e,t,r,i){const o=e.x,a=t.x,c=r.x,l=i.x,h=e.y,p=t.y,f=r.y,m=i.y,g=(l-c)*(h-f)-(m-f)*(o-c),A=(m-f)*(a-o)-(l-c)*(p-h),y=g/A,_=((a-o)*(h-f)-(p-h)*(o-c))/A;if(0===A&&0!==g||y<=0||y>=1||_<0||_>1)return null;if(0===g&&0===A){for(let c=0;c<2;c++){if(d(0===c?r:i,e,t),u.loc==n){const e=0===c?r:i;return{x:e.x,y:e.y,t:u.t}}if(u.loc==s){return{x:+(o+u.t*(a-o)).toPrecision(10),y:+(h+u.t*(p-h)).toPrecision(10),t:u.t}}}return null}for(let s=0;s<2;s++)if(d(0===s?r:i,e,t),u.loc==n){const e=0===s?r:i;return{x:e.x,y:e.y,t:u.t}}return{x:+(o+y*(a-o)).toPrecision(10),y:+(h+y*(p-h)).toPrecision(10),t:y}}function d(e,t,r){const h=r.x-t.x,d=r.y-t.y,p=e.x-t.x,f=e.y-t.y,m=h*f-p*d;if(e.x===t.x&&e.y===t.y)return u.loc=n,void(u.t=0);if(e.x===r.x&&e.y===r.y)return u.loc=i,void(u.t=1);if(m<-Number.EPSILON)return void(u.loc=o);if(m>Number.EPSILON)return void(u.loc=a);if(h*p<0||d*f<0)return void(u.loc=c);if(Math.sqrt(h*h+d*d)<Math.sqrt(p*p+f*f))return void(u.loc=l);let g;g=0!==h?p/h:f/d,u.loc=s,u.t=g}function p(e,t,n){const i=new r.Vector2;t.getCenter(i);const s=[];return n.forEach((t=>{if(t.boundingBox.containsPoint(i)){(function(e,t){const n=[],i=[];for(let s=1;s<e.length;s++){const o=e[s-1],a=e[s];for(let e=1;e<t.length;e++){const s=h(o,a,t[e-1],t[e]);null!==s&&void 0===n.find((e=>e.t<=s.t+Number.EPSILON&&e.t>=s.t-Number.EPSILON))&&(n.push(s),i.push(new r.Vector2(s.x,s.y)))}}return i})(e,t.points).forEach((e=>{s.push({identifier:t.identifier,isCW:t.isCW,point:e})}))}})),s.sort(((e,t)=>e.point.x-t.point.x)),s}let f=t,m=-999999999,g=e.subPaths.map((e=>{const n=e.getPoints();let i=-999999999,s=t,o=-999999999,a=t;for(let e=0;e<n.length;e++){const t=n[e];t.y>i&&(i=t.y),t.y<s&&(s=t.y),t.x>o&&(o=t.x),t.x<a&&(a=t.x)}return m<=o&&(m=o+1),f>=a&&(f=a-1),{curves:e.curves,points:n,isCW:r.ShapeUtils.isClockWise(n),identifier:-1,boundingBox:new r.Box2(new r.Vector2(a,s),new r.Vector2(o,i))}}));g=g.filter((e=>e.points.length>1));for(let e=0;e<g.length;e++)g[e].identifier=e;const A=g.map((t=>function(e,t,n,i,s){null!=s&&""!==s||(s="nonzero");const o=new r.Vector2;e.boundingBox.getCenter(o);const a=p([new r.Vector2(n,o.y),new r.Vector2(i,o.y)],e.boundingBox,t);a.sort(((e,t)=>e.point.x-t.point.x));const c=[],l=[];a.forEach((t=>{t.identifier===e.identifier?c.push(t):l.push(t)}));const u=c[0].point.x,h=[];let d=0;for(;d<l.length&&l[d].point.x<u;)h.length>0&&h[h.length-1]===l[d].identifier?h.pop():h.push(l[d].identifier),d++;if(h.push(e.identifier),"evenodd"===s){const t=h.length%2==0,n=h[h.length-2];return{identifier:e.identifier,isHole:t,for:n}}if("nonzero"===s){let n=!0,r=null,i=null;for(let e=0;e<h.length;e++){const s=h[e];n?(i=t[s].isCW,n=!1,r=s):i!==t[s].isCW&&(i=t[s].isCW,n=!0)}return{identifier:e.identifier,isHole:n,for:r}}console.warn('fill-rule: "'+s+'" is currently not implemented.')}(t,g,f,m,e.userData?e.userData.style.fillRule:void 0))),y=[];return g.forEach((e=>{if(!A[e.identifier].isHole){const t=new r.Shape;t.curves=e.curves;A.filter((t=>t.isHole&&t.for===e.identifier)).forEach((e=>{const n=g[e.identifier],i=new r.Path;i.curves=n.curves,t.holes.push(i)})),y.push(t)}})),y}static getStrokeStyle(e,t,n,r,i){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:i=void 0!==i?i:4}}static pointsToStroke(e,t,n,i){const o=[],a=[],c=[];if(0===s.pointsToStrokeWithBuffers(e,t,n,i,o,a,c))return null;const l=new r.BufferGeometry;return l.setAttribute("position",new r.Float32BufferAttribute(o,3)),l.setAttribute("normal",new r.Float32BufferAttribute(a,3)),l.setAttribute("uv",new r.Float32BufferAttribute(c,2)),l}static pointsToStrokeWithBuffers(e,t,n,i,s,o,a,c){const l=new r.Vector2,u=new r.Vector2,h=new r.Vector2,d=new r.Vector2,p=new r.Vector2,f=new r.Vector2,m=new r.Vector2,g=new r.Vector2,A=new r.Vector2,y=new r.Vector2,_=new r.Vector2,v=new r.Vector2,b=new r.Vector2,x=new r.Vector2,w=new r.Vector2,E=new r.Vector2,T=new r.Vector2;n=void 0!==n?n:12,i=void 0!==i?i:.001,c=void 0!==c?c:0;const S=(e=function(e){let t=!1;for(let n=1,r=e.length-1;n<r;n++)if(e[n].distanceTo(e[n+1])<i){t=!0;break}if(!t)return e;const n=[];n.push(e[0]);for(let t=1,r=e.length-1;t<r;t++)e[t].distanceTo(e[t+1])>=i&&n.push(e[t]);return n.push(e[e.length-1]),n}(e)).length;if(S<2)return 0;const M=e[0].equals(e[S-1]);let C,I,R=e[0];const B=t.strokeWidth/2,P=1/(S-1);let D,O,L,N,F=0,U=!1,k=0,z=3*c,G=2*c;j(e[0],e[1],l).multiplyScalar(B),g.copy(e[0]).sub(l),A.copy(e[0]).add(l),y.copy(g),_.copy(A);for(let n=1;n<S;n++){C=e[n],I=n===S-1?M?e[1]:void 0:e[n+1];const r=l;if(j(R,C,r),h.copy(r).multiplyScalar(B),v.copy(C).sub(h),b.copy(C).add(h),D=F+P,O=!1,void 0!==I){j(C,I,u),h.copy(u).multiplyScalar(B),x.copy(C).sub(h),w.copy(C).add(h),L=!0,h.subVectors(I,R),r.dot(h)<0&&(L=!1),1===n&&(U=L),h.subVectors(I,C),h.normalize();const e=Math.abs(r.dot(h));if(e>Number.EPSILON){const n=B/e;h.multiplyScalar(-n),d.subVectors(C,R),p.copy(d).setLength(n).add(h),E.copy(p).negate();const r=p.length(),i=d.length();d.divideScalar(i),f.subVectors(I,C);const s=f.length();switch(f.divideScalar(s),d.dot(E)<i&&f.dot(E)<s&&(O=!0),T.copy(p).add(C),E.add(C),N=!1,O?L?(w.copy(E),b.copy(E)):(x.copy(E),v.copy(E)):H(),t.strokeLineJoin){case"bevel":W(L,O,D);break;case"round":q(L,O),L?Q(C,v,x,D,0):Q(C,w,b,D,1);break;default:const e=B*t.strokeMiterLimit/r;if(e<1){if("miter-clip"!==t.strokeLineJoin){W(L,O,D);break}q(L,O),L?(f.subVectors(T,v).multiplyScalar(e).add(v),m.subVectors(T,x).multiplyScalar(e).add(x),V(v,D,0),V(f,D,0),V(C,D,.5),V(C,D,.5),V(f,D,0),V(m,D,0),V(C,D,.5),V(m,D,0),V(x,D,0)):(f.subVectors(T,b).multiplyScalar(e).add(b),m.subVectors(T,w).multiplyScalar(e).add(w),V(b,D,1),V(f,D,1),V(C,D,.5),V(C,D,.5),V(f,D,1),V(m,D,1),V(C,D,.5),V(m,D,1),V(w,D,1))}else O?(L?(V(A,F,1),V(g,F,0),V(T,D,0),V(A,F,1),V(T,D,0),V(E,D,1)):(V(A,F,1),V(g,F,0),V(T,D,1),V(g,F,0),V(E,D,0),V(T,D,1)),L?x.copy(T):w.copy(T)):L?(V(v,D,0),V(T,D,0),V(C,D,.5),V(C,D,.5),V(T,D,0),V(x,D,0)):(V(b,D,1),V(T,D,1),V(C,D,.5),V(C,D,.5),V(T,D,1),V(w,D,1)),N=!0}}else H()}else H();M||n!==S-1||X(e[0],y,_,L,!0,F),F=D,R=C,g.copy(x),A.copy(w)}if(M){if(O&&s){let e=T,t=E;U!==L&&(e=E,t=T),L?(N||U)&&(t.toArray(s,0),t.toArray(s,9),N&&e.toArray(s,3)):!N&&U||(t.toArray(s,3),t.toArray(s,9),N&&e.toArray(s,0))}}else X(C,v,b,L,!1,D);return k;function j(e,t,n){return n.subVectors(t,e),n.set(-n.y,n.x).normalize()}function V(e,t,n){s&&(s[z]=e.x,s[z+1]=e.y,s[z+2]=0,o&&(o[z]=0,o[z+1]=0,o[z+2]=1),z+=3,a&&(a[G]=t,a[G+1]=n,G+=2)),k+=3}function Q(e,t,r,i,s){l.copy(t).sub(e).normalize(),u.copy(r).sub(e).normalize();let o=Math.PI;const a=l.dot(u);Math.abs(a)<1&&(o=Math.abs(Math.acos(a))),o/=n,h.copy(t);for(let t=0,r=n-1;t<r;t++)d.copy(h).rotateAround(e,o),V(h,i,s),V(d,i,s),V(e,i,.5),h.copy(d);V(d,i,s),V(r,i,s),V(e,i,.5)}function H(){V(A,F,1),V(g,F,0),V(v,D,0),V(A,F,1),V(v,D,0),V(b,D,1)}function W(e,t,n){t?e?(V(A,F,1),V(g,F,0),V(v,D,0),V(A,F,1),V(v,D,0),V(E,D,1),V(v,n,0),V(x,n,0),V(E,n,.5)):(V(A,F,1),V(g,F,0),V(b,D,1),V(g,F,0),V(E,D,0),V(b,D,1),V(b,n,1),V(E,n,0),V(w,n,1)):e?(V(v,n,0),V(x,n,0),V(C,n,.5)):(V(b,n,1),V(w,n,0),V(C,n,.5))}function q(e,t){t&&(e?(V(A,F,1),V(g,F,0),V(v,D,0),V(A,F,1),V(v,D,0),V(E,D,1),V(v,F,0),V(C,D,.5),V(E,D,1),V(C,D,.5),V(x,F,0),V(E,D,1)):(V(A,F,1),V(g,F,0),V(b,D,1),V(g,F,0),V(E,D,0),V(b,D,1),V(b,F,1),V(E,D,0),V(C,D,.5),V(C,D,.5),V(E,D,0),V(w,F,1)))}function X(e,n,r,i,o,c){switch(t.strokeLineCap){case"round":o?Q(e,r,n,c,.5):Q(e,n,r,c,.5);break;case"square":if(o)l.subVectors(n,e),u.set(l.y,-l.x),h.addVectors(l,u).add(e),d.subVectors(u,l).add(e),i?(h.toArray(s,3),d.toArray(s,0),d.toArray(s,9)):(h.toArray(s,3),1===a[7]?d.toArray(s,9):h.toArray(s,9),d.toArray(s,0));else{l.subVectors(r,e),u.set(l.y,-l.x),h.addVectors(l,u).add(e),d.subVectors(u,l).add(e);const t=s.length;i?(h.toArray(s,t-3),d.toArray(s,t-6),d.toArray(s,t-12)):(d.toArray(s,t-6),h.toArray(s,t-3),d.toArray(s,t-12))}}}}}},4667:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Water:()=>i});var r=n(9437);class i extends r.Mesh{constructor(e,t={}){super(e),this.isWater=!0;const n=this,i=void 0!==t.textureWidth?t.textureWidth:512,s=void 0!==t.textureHeight?t.textureHeight:512,o=void 0!==t.clipBias?t.clipBias:0,a=void 0!==t.alpha?t.alpha:1,c=void 0!==t.time?t.time:0,l=void 0!==t.waterNormals?t.waterNormals:null,u=void 0!==t.sunDirection?t.sunDirection:new r.Vector3(.70707,.70707,0),h=new r.Color(void 0!==t.sunColor?t.sunColor:16777215),d=new r.Color(void 0!==t.waterColor?t.waterColor:8355711),p=void 0!==t.eye?t.eye:new r.Vector3(0,0,0),f=void 0!==t.distortionScale?t.distortionScale:20,m=void 0!==t.side?t.side:r.FrontSide,g=void 0!==t.fog&&t.fog,A=new r.Plane,y=new r.Vector3,_=new r.Vector3,v=new r.Vector3,b=new r.Matrix4,x=new r.Vector3(0,0,-1),w=new r.Vector4,E=new r.Vector3,T=new r.Vector3,S=new r.Vector4,M=new r.Matrix4,C=new r.PerspectiveCamera,I=new r.WebGLRenderTarget(i,s),R={name:"MirrorShader",uniforms:r.UniformsUtils.merge([r.UniformsLib.fog,r.UniformsLib.lights,{normalSampler:{value:null},mirrorSampler:{value:null},alpha:{value:1},time:{value:0},size:{value:1},distortionScale:{value:20},textureMatrix:{value:new r.Matrix4},sunColor:{value:new r.Color(8355711)},sunDirection:{value:new r.Vector3(.70707,.70707,0)},eye:{value:new r.Vector3},waterColor:{value:new r.Color(5592405)}}]),vertexShader:"\n\t\t\t\tuniform mat4 textureMatrix;\n\t\t\t\tuniform float time;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <fog_pars_vertex>\n\t\t\t\t#include <shadowmap_pars_vertex>\n\t\t\t\t#include <logdepthbuf_pars_vertex>\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tmirrorCoord = modelMatrix * vec4( position, 1.0 );\n\t\t\t\t\tworldPosition = mirrorCoord.xyzw;\n\t\t\t\t\tmirrorCoord = textureMatrix * mirrorCoord;\n\t\t\t\t\tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n\n\t\t\t\t#include <beginnormal_vertex>\n\t\t\t\t#include <defaultnormal_vertex>\n\t\t\t\t#include <logdepthbuf_vertex>\n\t\t\t\t#include <fog_vertex>\n\t\t\t\t#include <shadowmap_vertex>\n\t\t\t}",fragmentShader:"\n\t\t\t\tuniform sampler2D mirrorSampler;\n\t\t\t\tuniform float alpha;\n\t\t\t\tuniform float time;\n\t\t\t\tuniform float size;\n\t\t\t\tuniform float distortionScale;\n\t\t\t\tuniform sampler2D normalSampler;\n\t\t\t\tuniform vec3 sunColor;\n\t\t\t\tuniform vec3 sunDirection;\n\t\t\t\tuniform vec3 eye;\n\t\t\t\tuniform vec3 waterColor;\n\n\t\t\t\tvarying vec4 mirrorCoord;\n\t\t\t\tvarying vec4 worldPosition;\n\n\t\t\t\tvec4 getNoise( vec2 uv ) {\n\t\t\t\t\tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n\t\t\t\t\tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n\t\t\t\t\tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n\t\t\t\t\tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n\t\t\t\t\tvec4 noise = texture2D( normalSampler, uv0 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv1 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv2 ) +\n\t\t\t\t\t\ttexture2D( normalSampler, uv3 );\n\t\t\t\t\treturn noise * 0.5 - 1.0;\n\t\t\t\t}\n\n\t\t\t\tvoid sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n\t\t\t\t\tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n\t\t\t\t\tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n\t\t\t\t\tspecularColor += pow( direction, shiny ) * sunColor * spec;\n\t\t\t\t\tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n\t\t\t\t}\n\n\t\t\t\t#include <common>\n\t\t\t\t#include <packing>\n\t\t\t\t#include <bsdfs>\n\t\t\t\t#include <fog_pars_fragment>\n\t\t\t\t#include <logdepthbuf_pars_fragment>\n\t\t\t\t#include <lights_pars_begin>\n\t\t\t\t#include <shadowmap_pars_fragment>\n\t\t\t\t#include <shadowmask_pars_fragment>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <logdepthbuf_fragment>\n\t\t\t\t\tvec4 noise = getNoise( worldPosition.xz * size );\n\t\t\t\t\tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n\t\t\t\t\tvec3 diffuseLight = vec3(0.0);\n\t\t\t\t\tvec3 specularLight = vec3(0.0);\n\n\t\t\t\t\tvec3 worldToEye = eye-worldPosition.xyz;\n\t\t\t\t\tvec3 eyeDirection = normalize( worldToEye );\n\t\t\t\t\tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n\t\t\t\t\tfloat distance = length(worldToEye);\n\n\t\t\t\t\tvec2 distortion = surfaceNormal.xz * ( 0.001 + 1.0 / distance ) * distortionScale;\n\t\t\t\t\tvec3 reflectionSample = vec3( texture2D( mirrorSampler, mirrorCoord.xy / mirrorCoord.w + distortion ) );\n\n\t\t\t\t\tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n\t\t\t\t\tfloat rf0 = 0.3;\n\t\t\t\t\tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n\t\t\t\t\tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n\t\t\t\t\tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ) * getShadowMask(), ( vec3( 0.1 ) + reflectionSample * 0.9 + reflectionSample * specularLight ), reflectance);\n\t\t\t\t\tvec3 outgoingLight = albedo;\n\t\t\t\t\tgl_FragColor = vec4( outgoingLight, alpha );\n\n\t\t\t\t\t#include <tonemapping_fragment>\n\t\t\t\t\t#include <colorspace_fragment>\n\t\t\t\t\t#include <fog_fragment>\t\n\t\t\t\t}"},B=new r.ShaderMaterial({name:R.name,uniforms:r.UniformsUtils.clone(R.uniforms),vertexShader:R.vertexShader,fragmentShader:R.fragmentShader,lights:!0,side:m,fog:g});B.uniforms.mirrorSampler.value=I.texture,B.uniforms.textureMatrix.value=M,B.uniforms.alpha.value=a,B.uniforms.time.value=c,B.uniforms.normalSampler.value=l,B.uniforms.sunColor.value=h,B.uniforms.waterColor.value=d,B.uniforms.sunDirection.value=u,B.uniforms.distortionScale.value=f,B.uniforms.eye.value=p,n.material=B,n.onBeforeRender=function(e,t,r){if(_.setFromMatrixPosition(n.matrixWorld),v.setFromMatrixPosition(r.matrixWorld),b.extractRotation(n.matrixWorld),y.set(0,0,1),y.applyMatrix4(b),E.subVectors(_,v),E.dot(y)>0)return;E.reflect(y).negate(),E.add(_),b.extractRotation(r.matrixWorld),x.set(0,0,-1),x.applyMatrix4(b),x.add(v),T.subVectors(_,x),T.reflect(y).negate(),T.add(_),C.position.copy(E),C.up.set(0,1,0),C.up.applyMatrix4(b),C.up.reflect(y),C.lookAt(T),C.far=r.far,C.updateMatrixWorld(),C.projectionMatrix.copy(r.projectionMatrix),M.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),M.multiply(C.projectionMatrix),M.multiply(C.matrixWorldInverse),A.setFromNormalAndCoplanarPoint(y,_),A.applyMatrix4(C.matrixWorldInverse),w.set(A.normal.x,A.normal.y,A.normal.z,A.constant);const i=C.projectionMatrix;S.x=(Math.sign(w.x)+i.elements[8])/i.elements[0],S.y=(Math.sign(w.y)+i.elements[9])/i.elements[5],S.z=-1,S.w=(1+i.elements[10])/i.elements[14],w.multiplyScalar(2/w.dot(S)),i.elements[2]=w.x,i.elements[6]=w.y,i.elements[10]=w.z+1-o,i.elements[14]=w.w,p.setFromMatrixPosition(r.matrixWorld);const s=e.getRenderTarget(),a=e.xr.enabled,c=e.shadowMap.autoUpdate;n.visible=!1,e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(I),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,C),n.visible=!0,e.xr.enabled=a,e.shadowMap.autoUpdate=c,e.setRenderTarget(s);const l=r.viewport;void 0!==l&&e.state.viewport(l)}}}},7439:(e,t,n)=>{"use strict";n.r(t),n.d(t,{EffectComposer:()=>l});var r=n(9437),i=n(8960),s=n(1185),o=n(6464);class a extends o.o{constructor(e,t){super(),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1}render(e,t,n){const r=e.getContext(),i=e.state;let s,o;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(s=0,o=1):(s=1,o=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(r.REPLACE,r.REPLACE,r.REPLACE),i.buffers.stencil.setFunc(r.ALWAYS,s,4294967295),i.buffers.stencil.setClear(o),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.color.setMask(!0),i.buffers.depth.setMask(!0),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(r.EQUAL,1,4294967295),i.buffers.stencil.setOp(r.KEEP,r.KEEP,r.KEEP),i.buffers.stencil.setLocked(!0)}}class c extends o.o{constructor(){super(),this.needsSwap=!1}render(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}}class l{constructor(e,t){if(this.renderer=e,this._pixelRatio=e.getPixelRatio(),void 0===t){const n=e.getSize(new r.Vector2);this._width=n.width,this._height=n.height,(t=new r.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:r.HalfFloatType})).texture.name="EffectComposer.rt1"}else this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],this.copyPass=new s.ShaderPass(i.Z),this.copyPass.material.blending=r.NoBlending,this.clock=new r.Clock}swapBuffers(){const e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e}addPass(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}insertPass(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}removePass(e){const t=this.passes.indexOf(e);-1!==t&&this.passes.splice(t,1)}isLastEnabledPass(e){for(let t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0}render(e){void 0===e&&(e=this.clock.getDelta());const t=this.renderer.getRenderTarget();let n=!1;for(let t=0,r=this.passes.length;t<r;t++){const r=this.passes[t];if(!1!==r.enabled){if(r.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(t),r.render(this.renderer,this.writeBuffer,this.readBuffer,e,n),r.needsSwap){if(n){const t=this.renderer.getContext(),n=this.renderer.state.buffers.stencil;n.setFunc(t.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),n.setFunc(t.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==a&&(r instanceof a?n=!0:r instanceof c&&(n=!1))}}this.renderer.setRenderTarget(t)}reset(e){if(void 0===e){const t=this.renderer.getSize(new r.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(let e=0;e<this.passes.length;e++)this.passes[e].setSize(n,r)}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.copyPass.dispose()}}},4742:(e,t,n)=>{"use strict";n.r(t),n.d(t,{OutlinePass:()=>o});var r=n(9437),i=n(6464),s=n(8960);class o extends i.o{constructor(e,t,n,o){super(),this.renderScene=t,this.renderCamera=n,this.selectedObjects=void 0!==o?o:[],this.visibleEdgeColor=new r.Color(1,1,1),this.hiddenEdgeColor=new r.Color(.1,.04,.02),this.edgeGlow=0,this.usePatternTexture=!1,this.edgeThickness=1,this.edgeStrength=3,this.downSampleRatio=2,this.pulsePeriod=0,this._visibilityCache=new Map,this.resolution=void 0!==e?new r.Vector2(e.x,e.y):new r.Vector2(256,256);const a=Math.round(this.resolution.x/this.downSampleRatio),c=Math.round(this.resolution.y/this.downSampleRatio);this.renderTargetMaskBuffer=new r.WebGLRenderTarget(this.resolution.x,this.resolution.y),this.renderTargetMaskBuffer.texture.name="OutlinePass.mask",this.renderTargetMaskBuffer.texture.generateMipmaps=!1,this.depthMaterial=new r.MeshDepthMaterial,this.depthMaterial.side=r.DoubleSide,this.depthMaterial.depthPacking=r.RGBADepthPacking,this.depthMaterial.blending=r.NoBlending,this.prepareMaskMaterial=this.getPrepareMaskMaterial(),this.prepareMaskMaterial.side=r.DoubleSide,this.prepareMaskMaterial.fragmentShader=function(e,t){const n=t.isPerspectiveCamera?"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,n+"DepthToViewZ")}(this.prepareMaskMaterial.fragmentShader,this.renderCamera),this.renderTargetDepthBuffer=new r.WebGLRenderTarget(this.resolution.x,this.resolution.y,{type:r.HalfFloatType}),this.renderTargetDepthBuffer.texture.name="OutlinePass.depth",this.renderTargetDepthBuffer.texture.generateMipmaps=!1,this.renderTargetMaskDownSampleBuffer=new r.WebGLRenderTarget(a,c,{type:r.HalfFloatType}),this.renderTargetMaskDownSampleBuffer.texture.name="OutlinePass.depthDownSample",this.renderTargetMaskDownSampleBuffer.texture.generateMipmaps=!1,this.renderTargetBlurBuffer1=new r.WebGLRenderTarget(a,c,{type:r.HalfFloatType}),this.renderTargetBlurBuffer1.texture.name="OutlinePass.blur1",this.renderTargetBlurBuffer1.texture.generateMipmaps=!1,this.renderTargetBlurBuffer2=new r.WebGLRenderTarget(Math.round(a/2),Math.round(c/2),{type:r.HalfFloatType}),this.renderTargetBlurBuffer2.texture.name="OutlinePass.blur2",this.renderTargetBlurBuffer2.texture.generateMipmaps=!1,this.edgeDetectionMaterial=this.getEdgeDetectionMaterial(),this.renderTargetEdgeBuffer1=new r.WebGLRenderTarget(a,c,{type:r.HalfFloatType}),this.renderTargetEdgeBuffer1.texture.name="OutlinePass.edge1",this.renderTargetEdgeBuffer1.texture.generateMipmaps=!1,this.renderTargetEdgeBuffer2=new r.WebGLRenderTarget(Math.round(a/2),Math.round(c/2),{type:r.HalfFloatType}),this.renderTargetEdgeBuffer2.texture.name="OutlinePass.edge2",this.renderTargetEdgeBuffer2.texture.generateMipmaps=!1;this.separableBlurMaterial1=this.getSeperableBlurMaterial(4),this.separableBlurMaterial1.uniforms.texSize.value.set(a,c),this.separableBlurMaterial1.uniforms.kernelRadius.value=1,this.separableBlurMaterial2=this.getSeperableBlurMaterial(4),this.separableBlurMaterial2.uniforms.texSize.value.set(Math.round(a/2),Math.round(c/2)),this.separableBlurMaterial2.uniforms.kernelRadius.value=4,this.overlayMaterial=this.getOverlayMaterial();const l=s.Z;this.copyUniforms=r.UniformsUtils.clone(l.uniforms),this.materialCopy=new r.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:r.NoBlending,depthTest:!1,depthWrite:!1}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new r.Color,this.oldClearAlpha=1,this.fsQuad=new i.F(null),this.tempPulseColor1=new r.Color,this.tempPulseColor2=new r.Color,this.textureMatrix=new r.Matrix4}dispose(){this.renderTargetMaskBuffer.dispose(),this.renderTargetDepthBuffer.dispose(),this.renderTargetMaskDownSampleBuffer.dispose(),this.renderTargetBlurBuffer1.dispose(),this.renderTargetBlurBuffer2.dispose(),this.renderTargetEdgeBuffer1.dispose(),this.renderTargetEdgeBuffer2.dispose(),this.depthMaterial.dispose(),this.prepareMaskMaterial.dispose(),this.edgeDetectionMaterial.dispose(),this.separableBlurMaterial1.dispose(),this.separableBlurMaterial2.dispose(),this.overlayMaterial.dispose(),this.materialCopy.dispose(),this.fsQuad.dispose()}setSize(e,t){this.renderTargetMaskBuffer.setSize(e,t),this.renderTargetDepthBuffer.setSize(e,t);let n=Math.round(e/this.downSampleRatio),r=Math.round(t/this.downSampleRatio);this.renderTargetMaskDownSampleBuffer.setSize(n,r),this.renderTargetBlurBuffer1.setSize(n,r),this.renderTargetEdgeBuffer1.setSize(n,r),this.separableBlurMaterial1.uniforms.texSize.value.set(n,r),n=Math.round(n/2),r=Math.round(r/2),this.renderTargetBlurBuffer2.setSize(n,r),this.renderTargetEdgeBuffer2.setSize(n,r),this.separableBlurMaterial2.uniforms.texSize.value.set(n,r)}changeVisibilityOfSelectedObjects(e){const t=this._visibilityCache;function n(n){n.isMesh&&(!0===e?n.visible=t.get(n):(t.set(n,n.visible),n.visible=e))}for(let e=0;e<this.selectedObjects.length;e++){this.selectedObjects[e].traverse(n)}}changeVisibilityOfNonSelectedObjects(e){const t=this._visibilityCache,n=[];function r(e){e.isMesh&&n.push(e)}for(let e=0;e<this.selectedObjects.length;e++){this.selectedObjects[e].traverse(r)}this.renderScene.traverse((function(r){if(r.isMesh||r.isSprite){let i=!1;for(let e=0;e<n.length;e++){if(n[e].id===r.id){i=!0;break}}if(!1===i){const n=r.visible;!1!==e&&!0!==t.get(r)||(r.visible=e),t.set(r,n)}}else(r.isPoints||r.isLine)&&(!0===e?r.visible=t.get(r):(t.set(r,r.visible),r.visible=e))}))}updateTextureMatrix(){this.textureMatrix.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),this.textureMatrix.multiply(this.renderCamera.projectionMatrix),this.textureMatrix.multiply(this.renderCamera.matrixWorldInverse)}render(e,t,n,r,i){if(this.selectedObjects.length>0){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const t=e.autoClear;e.autoClear=!1,i&&e.state.buffers.stencil.setTest(!1),e.setClearColor(16777215,1),this.changeVisibilityOfSelectedObjects(!1);const r=this.renderScene.background;if(this.renderScene.background=null,this.renderScene.overrideMaterial=this.depthMaterial,e.setRenderTarget(this.renderTargetDepthBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.changeVisibilityOfSelectedObjects(!0),this._visibilityCache.clear(),this.updateTextureMatrix(),this.changeVisibilityOfNonSelectedObjects(!1),this.renderScene.overrideMaterial=this.prepareMaskMaterial,this.prepareMaskMaterial.uniforms.cameraNearFar.value.set(this.renderCamera.near,this.renderCamera.far),this.prepareMaskMaterial.uniforms.depthTexture.value=this.renderTargetDepthBuffer.texture,this.prepareMaskMaterial.uniforms.textureMatrix.value=this.textureMatrix,e.setRenderTarget(this.renderTargetMaskBuffer),e.clear(),e.render(this.renderScene,this.renderCamera),this.renderScene.overrideMaterial=null,this.changeVisibilityOfNonSelectedObjects(!0),this._visibilityCache.clear(),this.renderScene.background=r,this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetMaskBuffer.texture,e.setRenderTarget(this.renderTargetMaskDownSampleBuffer),e.clear(),this.fsQuad.render(e),this.tempPulseColor1.copy(this.visibleEdgeColor),this.tempPulseColor2.copy(this.hiddenEdgeColor),this.pulsePeriod>0){const e=.625+.75*Math.cos(.01*performance.now()/this.pulsePeriod)/2;this.tempPulseColor1.multiplyScalar(e),this.tempPulseColor2.multiplyScalar(e)}this.fsQuad.material=this.edgeDetectionMaterial,this.edgeDetectionMaterial.uniforms.maskTexture.value=this.renderTargetMaskDownSampleBuffer.texture,this.edgeDetectionMaterial.uniforms.texSize.value.set(this.renderTargetMaskDownSampleBuffer.width,this.renderTargetMaskDownSampleBuffer.height),this.edgeDetectionMaterial.uniforms.visibleEdgeColor.value=this.tempPulseColor1,this.edgeDetectionMaterial.uniforms.hiddenEdgeColor.value=this.tempPulseColor2,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial1,this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=o.BlurDirectionX,this.separableBlurMaterial1.uniforms.kernelRadius.value=this.edgeThickness,e.setRenderTarget(this.renderTargetBlurBuffer1),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial1.uniforms.colorTexture.value=this.renderTargetBlurBuffer1.texture,this.separableBlurMaterial1.uniforms.direction.value=o.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer1),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.separableBlurMaterial2,this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetEdgeBuffer1.texture,this.separableBlurMaterial2.uniforms.direction.value=o.BlurDirectionX,e.setRenderTarget(this.renderTargetBlurBuffer2),e.clear(),this.fsQuad.render(e),this.separableBlurMaterial2.uniforms.colorTexture.value=this.renderTargetBlurBuffer2.texture,this.separableBlurMaterial2.uniforms.direction.value=o.BlurDirectionY,e.setRenderTarget(this.renderTargetEdgeBuffer2),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.overlayMaterial,this.overlayMaterial.uniforms.maskTexture.value=this.renderTargetMaskBuffer.texture,this.overlayMaterial.uniforms.edgeTexture1.value=this.renderTargetEdgeBuffer1.texture,this.overlayMaterial.uniforms.edgeTexture2.value=this.renderTargetEdgeBuffer2.texture,this.overlayMaterial.uniforms.patternTexture.value=this.patternTexture,this.overlayMaterial.uniforms.edgeStrength.value=this.edgeStrength,this.overlayMaterial.uniforms.edgeGlow.value=this.edgeGlow,this.overlayMaterial.uniforms.usePatternTexture.value=this.usePatternTexture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(n),this.fsQuad.render(e),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=t}this.renderToScreen&&(this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=n.texture,e.setRenderTarget(null),this.fsQuad.render(e))}getPrepareMaskMaterial(){return new r.ShaderMaterial({uniforms:{depthTexture:{value:null},cameraNearFar:{value:new r.Vector2(.5,.5)},textureMatrix:{value:null}},vertexShader:"#include <morphtarget_pars_vertex>\n\t\t\t\t#include <skinning_pars_vertex>\n\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tuniform mat4 textureMatrix;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\t#include <skinbase_vertex>\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <morphtarget_vertex>\n\t\t\t\t\t#include <skinning_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t\tvPosition = mvPosition;\n\n\t\t\t\t\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t\t\t\t\t#ifdef USE_INSTANCING\n\n\t\t\t\t\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t\t\t\t\t#endif\n\t\t\t\t\t\n\t\t\t\t\tworldPosition = modelMatrix * worldPosition;\n\n\t\t\t\t\tprojTexCoord = textureMatrix * worldPosition;\n\n\t\t\t\t}",fragmentShader:"#include <packing>\n\t\t\t\tvarying vec4 vPosition;\n\t\t\t\tvarying vec4 projTexCoord;\n\t\t\t\tuniform sampler2D depthTexture;\n\t\t\t\tuniform vec2 cameraNearFar;\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tfloat depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n\t\t\t\t\tfloat viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n\t\t\t\t\tfloat depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n\t\t\t\t\tgl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n\n\t\t\t\t}"})}getEdgeDetectionMaterial(){return new r.ShaderMaterial({uniforms:{maskTexture:{value:null},texSize:{value:new r.Vector2(.5,.5)},visibleEdgeColor:{value:new r.Vector3(1,1,1)},hiddenEdgeColor:{value:new r.Vector3(1,1,1)}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec3 visibleEdgeColor;\n\t\t\t\tuniform vec3 hiddenEdgeColor;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tvec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n\t\t\t\t\tvec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n\t\t\t\t\tvec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n\t\t\t\t\tvec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n\t\t\t\t\tvec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n\t\t\t\t\tfloat diff1 = (c1.r - c2.r)*0.5;\n\t\t\t\t\tfloat diff2 = (c3.r - c4.r)*0.5;\n\t\t\t\t\tfloat d = length( vec2(diff1, diff2) );\n\t\t\t\t\tfloat a1 = min(c1.g, c2.g);\n\t\t\t\t\tfloat a2 = min(c3.g, c4.g);\n\t\t\t\t\tfloat visibilityFactor = min(a1, a2);\n\t\t\t\t\tvec3 edgeColor = 1.0 - visibilityFactor > 0.001 ? visibleEdgeColor : hiddenEdgeColor;\n\t\t\t\t\tgl_FragColor = vec4(edgeColor, 1.0) * vec4(d);\n\t\t\t\t}"})}getSeperableBlurMaterial(e){return new r.ShaderMaterial({defines:{MAX_RADIUS:e},uniforms:{colorTexture:{value:null},texSize:{value:new r.Vector2(.5,.5)},direction:{value:new r.Vector2(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float kernelRadius;\n\n\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\n\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\n\t\t\t\t\tfloat sigma = kernelRadius/2.0;\n\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, sigma);\n\t\t\t\t\tvec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n\t\t\t\t\tvec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n\t\t\t\t\tvec2 uvOffset = delta;\n\t\t\t\t\tfor( int i = 1; i <= MAX_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = kernelRadius * float(i) / float(MAX_RADIUS);\n\t\t\t\t\t\tfloat w = gaussianPdf(x, sigma);\n\t\t\t\t\t\tvec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n\t\t\t\t\t\tvec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n\t\t\t\t\t\tdiffuseSum += ((sample1 + sample2) * w);\n\t\t\t\t\t\tweightSum += (2.0 * w);\n\t\t\t\t\t\tuvOffset += delta;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = diffuseSum/weightSum;\n\t\t\t\t}"})}getOverlayMaterial(){return new r.ShaderMaterial({uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\n\t\t\t\tuniform sampler2D maskTexture;\n\t\t\t\tuniform sampler2D edgeTexture1;\n\t\t\t\tuniform sampler2D edgeTexture2;\n\t\t\t\tuniform sampler2D patternTexture;\n\t\t\t\tuniform float edgeStrength;\n\t\t\t\tuniform float edgeGlow;\n\t\t\t\tuniform bool usePatternTexture;\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tvec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n\t\t\t\t\tvec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n\t\t\t\t\tvec4 maskColor = texture2D(maskTexture, vUv);\n\t\t\t\t\tvec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n\t\t\t\t\tfloat visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n\t\t\t\t\tvec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n\t\t\t\t\tvec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n\t\t\t\t\tif(usePatternTexture)\n\t\t\t\t\t\tfinalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n\t\t\t\t\tgl_FragColor = finalColor;\n\t\t\t\t}",blending:r.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0})}}o.BlurDirectionX=new r.Vector2(1,0),o.BlurDirectionY=new r.Vector2(0,1)},6464:(e,t,n)=>{"use strict";n.d(t,{F:()=>c,o:()=>i});var r=n(9437);class i{constructor(){this.isPass=!0,this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}setSize(){}render(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}dispose(){}}const s=new r.OrthographicCamera(-1,1,1,-1,0,1);class o extends r.BufferGeometry{constructor(){super(),this.setAttribute("position",new r.Float32BufferAttribute([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new r.Float32BufferAttribute([0,2,0,0,2,0],2))}}const a=new o;class c{constructor(e){this._mesh=new r.Mesh(a,e)}dispose(){this._mesh.geometry.dispose()}render(e){e.render(this._mesh,s)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}}},5804:(e,t,n)=>{"use strict";n.r(t),n.d(t,{RenderPass:()=>s});var r=n(9437),i=n(6464);class s extends i.o{constructor(e,t,n=null,i=null,s=null){super(),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=i,this.clearAlpha=s,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1,this._oldClearColor=new r.Color}render(e,t,n){const r=e.autoClear;let i,s;e.autoClear=!1,null!==this.overrideMaterial&&(s=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),null!==this.clearColor&&(e.getClearColor(this._oldClearColor),e.setClearColor(this.clearColor,e.getClearAlpha())),null!==this.clearAlpha&&(i=e.getClearAlpha(),e.setClearAlpha(this.clearAlpha)),1==this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),!0===this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),null!==this.clearColor&&e.setClearColor(this._oldClearColor),null!==this.clearAlpha&&e.setClearAlpha(i),null!==this.overrideMaterial&&(this.scene.overrideMaterial=s),e.autoClear=r}}},1185:(e,t,n)=>{"use strict";n.r(t),n.d(t,{ShaderPass:()=>s});var r=n(9437),i=n(6464);class s extends i.o{constructor(e,t){super(),this.textureID=void 0!==t?t:"tDiffuse",e instanceof r.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=r.UniformsUtils.clone(e.uniforms),this.material=new r.ShaderMaterial({name:void 0!==e.name?e.name:"unspecified",defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new i.F(this.material)}render(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}dispose(){this.material.dispose(),this.fsQuad.dispose()}}},8383:(e,t,n)=>{"use strict";n.r(t),n.d(t,{UnrealBloomPass:()=>a});var r=n(9437),i=n(6464),s=n(8960);const o={name:"LuminosityHighPassShader",shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new r.Color(0)},defaultOpacity:{value:0}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform sampler2D tDiffuse;\n\t\tuniform vec3 defaultColor;\n\t\tuniform float defaultOpacity;\n\t\tuniform float luminosityThreshold;\n\t\tuniform float smoothWidth;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\n\t\t\tvec3 luma = vec3( 0.299, 0.587, 0.114 );\n\n\t\t\tfloat v = dot( texel.xyz, luma );\n\n\t\t\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );\n\n\t\t\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );\n\n\t\t\tgl_FragColor = mix( outputColor, texel, alpha );\n\n\t\t}"};class a extends i.o{constructor(e,t,n,a){super(),this.strength=void 0!==t?t:1,this.radius=n,this.threshold=a,this.resolution=void 0!==e?new r.Vector2(e.x,e.y):new r.Vector2(256,256),this.clearColor=new r.Color(0,0,0),this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;let c=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);this.renderTargetBright=new r.WebGLRenderTarget(c,l,{type:r.HalfFloatType}),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(let e=0;e<this.nMips;e++){const t=new r.WebGLRenderTarget(c,l,{type:r.HalfFloatType});t.texture.name="UnrealBloomPass.h"+e,t.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(t);const n=new r.WebGLRenderTarget(c,l,{type:r.HalfFloatType});n.texture.name="UnrealBloomPass.v"+e,n.texture.generateMipmaps=!1,this.renderTargetsVertical.push(n),c=Math.round(c/2),l=Math.round(l/2)}const u=o;this.highPassUniforms=r.UniformsUtils.clone(u.uniforms),this.highPassUniforms.luminosityThreshold.value=a,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new r.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),this.separableBlurMaterials=[];const h=[3,5,7,9,11];c=Math.round(this.resolution.x/2),l=Math.round(this.resolution.y/2);for(let e=0;e<this.nMips;e++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(h[e])),this.separableBlurMaterials[e].uniforms.invSize.value=new r.Vector2(1/c,1/l),c=Math.round(c/2),l=Math.round(l/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new r.Vector3(1,1,1),new r.Vector3(1,1,1),new r.Vector3(1,1,1),new r.Vector3(1,1,1),new r.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors;const d=s.Z;this.copyUniforms=r.UniformsUtils.clone(d.uniforms),this.blendMaterial=new r.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,blending:r.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this._oldClearColor=new r.Color,this.oldClearAlpha=1,this.basic=new r.MeshBasicMaterial,this.fsQuad=new i.F(null)}dispose(){for(let e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(let e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose();for(let e=0;e<this.separableBlurMaterials.length;e++)this.separableBlurMaterials[e].dispose();this.compositeMaterial.dispose(),this.blendMaterial.dispose(),this.basic.dispose(),this.fsQuad.dispose()}setSize(e,t){let n=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(n,i);for(let e=0;e<this.nMips;e++)this.renderTargetsHorizontal[e].setSize(n,i),this.renderTargetsVertical[e].setSize(n,i),this.separableBlurMaterials[e].uniforms.invSize.value=new r.Vector2(1/n,1/i),n=Math.round(n/2),i=Math.round(i/2)}render(e,t,n,r,i){e.getClearColor(this._oldClearColor),this.oldClearAlpha=e.getClearAlpha();const s=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=n.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=n.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);let o=this.renderTargetBright;for(let t=0;t<this.nMips;t++)this.fsQuad.material=this.separableBlurMaterials[t],this.separableBlurMaterials[t].uniforms.colorTexture.value=o.texture,this.separableBlurMaterials[t].uniforms.direction.value=a.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[t]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[t].uniforms.colorTexture.value=this.renderTargetsHorizontal[t].texture,this.separableBlurMaterials[t].uniforms.direction.value=a.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[t]),e.clear(),this.fsQuad.render(e),o=this.renderTargetsVertical[t];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.blendMaterial,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(n),this.fsQuad.render(e)),e.setClearColor(this._oldClearColor,this.oldClearAlpha),e.autoClear=s}getSeperableBlurMaterial(e){const t=[];for(let n=0;n<e;n++)t.push(.39894*Math.exp(-.5*n*n/(e*e))/e);return new r.ShaderMaterial({defines:{KERNEL_RADIUS:e},uniforms:{colorTexture:{value:null},invSize:{value:new r.Vector2(.5,.5)},direction:{value:new r.Vector2(.5,.5)},gaussianCoefficients:{value:t}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\n\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 invSize;\n\t\t\t\tuniform vec2 direction;\n\t\t\t\tuniform float gaussianCoefficients[KERNEL_RADIUS];\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tfloat weightSum = gaussianCoefficients[0];\n\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv ).rgb * weightSum;\n\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\n\t\t\t\t\t\tfloat x = float(i);\n\t\t\t\t\t\tfloat w = gaussianCoefficients[i];\n\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\n\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset ).rgb;\n\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset ).rgb;\n\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\n\t\t\t\t\t\tweightSum += 2.0 * w;\n\t\t\t\t\t}\n\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})}getCompositeMaterial(e){return new r.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\n\t\t\t\tuniform sampler2D blurTexture1;\n\t\t\t\tuniform sampler2D blurTexture2;\n\t\t\t\tuniform sampler2D blurTexture3;\n\t\t\t\tuniform sampler2D blurTexture4;\n\t\t\t\tuniform sampler2D blurTexture5;\n\t\t\t\tuniform float bloomStrength;\n\t\t\t\tuniform float bloomRadius;\n\t\t\t\tuniform float bloomFactors[NUM_MIPS];\n\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\n\n\t\t\t\tfloat lerpBloomFactor(const in float factor) {\n\t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\n\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) +\n\t\t\t\t\t\tlerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\n\t\t\t\t}"})}}a.BlurDirectionX=new r.Vector2(1,0),a.BlurDirectionY=new r.Vector2(0,1)},6074:(e,t,n)=>{"use strict";n.r(t),n.d(t,{CSS2DObject:()=>i,CSS2DRenderer:()=>u});var r=n(9437);class i extends r.Object3D{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new r.Vector2(.5,.5),this.addEventListener("removed",(function(){this.traverse((function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)}))}))}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}const s=new r.Vector3,o=new r.Matrix4,a=new r.Matrix4,c=new r.Vector3,l=new r.Vector3;class u{constructor(e={}){const t=this;let n,r,i,u;const h={objects:new WeakMap},d=void 0!==e.element?e.element:document.createElement("div");function p(e){e.isCSS2DObject&&(e.element.style.display="none");for(let t=0,n=e.children.length;t<n;t++)p(e.children[t])}function f(e,n,r){if(!1!==e.visible){if(e.isCSS2DObject){s.setFromMatrixPosition(e.matrixWorld),s.applyMatrix4(a);const o=s.z>=-1&&s.z<=1&&!0===e.layers.test(r.layers),c=e.element;c.style.display=!0===o?"":"none",!0===o&&(e.onBeforeRender(t,n,r),c.style.transform="translate("+-100*e.center.x+"%,"+-100*e.center.y+"%)translate("+(s.x*i+i)+"px,"+(-s.y*u+u)+"px)",c.parentNode!==d&&d.appendChild(c),e.onAfterRender(t,n,r));const l={distanceToCameraSquared:m(r,e)};h.objects.set(e,l)}for(let t=0,i=e.children.length;t<i;t++)f(e.children[t],n,r)}else p(e)}function m(e,t){return c.setFromMatrixPosition(e.matrixWorld),l.setFromMatrixPosition(t.matrixWorld),c.distanceToSquared(l)}d.style.overflow="hidden",this.domElement=d,this.getSize=function(){return{width:n,height:r}},this.render=function(e,t){!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),null===t.parent&&!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),o.copy(t.matrixWorldInverse),a.multiplyMatrices(t.projectionMatrix,o),f(e,e,t),function(e){const t=function(e){const t=[];return e.traverseVisible((function(e){e.isCSS2DObject&&t.push(e)})),t}(e).sort((function(e,t){if(e.renderOrder!==t.renderOrder)return t.renderOrder-e.renderOrder;return h.objects.get(e).distanceToCameraSquared-h.objects.get(t).distanceToCameraSquared})),n=t.length;for(let e=0,r=t.length;e<r;e++)t[e].element.style.zIndex=n-e}(e)},this.setSize=function(e,t){n=e,r=t,i=n/2,u=r/2,d.style.width=e+"px",d.style.height=t+"px"}}}},8960:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r={name:"CopyShader",uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\n\t\tuniform float opacity;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvec4 texel = texture2D( tDiffuse, vUv );\n\t\t\tgl_FragColor = opacity * texel;\n\n\n\t\t}"}},3885:(e,t,n)=>{"use strict";n.r(t),n.d(t,{FXAAShader:()=>r});const r={name:"FXAAShader",uniforms:{tDiffuse:{value:null},resolution:{value:new(n(9437).Vector2)(1/1024,1/512)}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}",fragmentShader:"\n\t\tprecision highp float;\n\n\t\tuniform sampler2D tDiffuse;\n\n\t\tuniform vec2 resolution;\n\n\t\tvarying vec2 vUv;\n\n\t\t// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n\t\t//----------------------------------------------------------------------------------\n\t\t// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n\t\t// SDK Version: v3.00\n\t\t// Email:       gameworks@nvidia.com\n\t\t// Site:        http://developer.nvidia.com/\n\t\t//\n\t\t// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n\t\t//\n\t\t// Redistribution and use in source and binary forms, with or without\n\t\t// modification, are permitted provided that the following conditions\n\t\t// are met:\n\t\t//  * Redistributions of source code must retain the above copyright\n\t\t//    notice, this list of conditions and the following disclaimer.\n\t\t//  * Redistributions in binary form must reproduce the above copyright\n\t\t//    notice, this list of conditions and the following disclaimer in the\n\t\t//    documentation and/or other materials provided with the distribution.\n\t\t//  * Neither the name of NVIDIA CORPORATION nor the names of its\n\t\t//    contributors may be used to endorse or promote products derived\n\t\t//    from this software without specific prior written permission.\n\t\t//\n\t\t// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ''AS IS'' AND ANY\n\t\t// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n\t\t// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n\t\t// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n\t\t// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n\t\t// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n\t\t// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n\t\t// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n\t\t// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n\t\t// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n\t\t// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n\t\t//\n\t\t//----------------------------------------------------------------------------------\n\n\t\t#ifndef FXAA_DISCARD\n\t\t\t//\n\t\t\t// Only valid for PC OpenGL currently.\n\t\t\t// Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n\t\t\t//\n\t\t\t// 1 = Use discard on pixels which don't need AA.\n\t\t\t//     For APIs which enable concurrent TEX+ROP from same surface.\n\t\t\t// 0 = Return unchanged color on pixels which don't need AA.\n\t\t\t//\n\t\t\t#define FXAA_DISCARD 0\n\t\t#endif\n\n\t\t/*--------------------------------------------------------------------------*/\n\t\t#define FxaaTexTop(t, p) texture2D(t, p, -100.0)\n\t\t#define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), -100.0)\n\t\t/*--------------------------------------------------------------------------*/\n\n\t\t#define NUM_SAMPLES 5\n\n\t\t// assumes colors have premultipliedAlpha, so that the calculated color contrast is scaled by alpha\n\t\tfloat contrast( vec4 a, vec4 b ) {\n\t\t\tvec4 diff = abs( a - b );\n\t\t\treturn max( max( max( diff.r, diff.g ), diff.b ), diff.a );\n\t\t}\n\n\t\t/*============================================================================\n\n\t\t\t\t\t\t\t\t\tFXAA3 QUALITY - PC\n\n\t\t============================================================================*/\n\n\t\t/*--------------------------------------------------------------------------*/\n\t\tvec4 FxaaPixelShader(\n\t\t\tvec2 posM,\n\t\t\tsampler2D tex,\n\t\t\tvec2 fxaaQualityRcpFrame,\n\t\t\tfloat fxaaQualityEdgeThreshold,\n\t\t\tfloat fxaaQualityinvEdgeThreshold\n\t\t) {\n\t\t\tvec4 rgbaM = FxaaTexTop(tex, posM);\n\t\t\tvec4 rgbaS = FxaaTexOff(tex, posM, vec2( 0.0, 1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaE = FxaaTexOff(tex, posM, vec2( 1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaN = FxaaTexOff(tex, posM, vec2( 0.0,-1.0), fxaaQualityRcpFrame.xy);\n\t\t\tvec4 rgbaW = FxaaTexOff(tex, posM, vec2(-1.0, 0.0), fxaaQualityRcpFrame.xy);\n\t\t\t// . S .\n\t\t\t// W M E\n\t\t\t// . N .\n\n\t\t\tbool earlyExit = max( max( max(\n\t\t\t\t\tcontrast( rgbaM, rgbaN ),\n\t\t\t\t\tcontrast( rgbaM, rgbaS ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaE ) ),\n\t\t\t\t\tcontrast( rgbaM, rgbaW ) )\n\t\t\t\t\t< fxaaQualityEdgeThreshold;\n\t\t\t// . 0 .\n\t\t\t// 0 0 0\n\t\t\t// . 0 .\n\n\t\t\t#if (FXAA_DISCARD == 1)\n\t\t\t\tif(earlyExit) FxaaDiscard;\n\t\t\t#else\n\t\t\t\tif(earlyExit) return rgbaM;\n\t\t\t#endif\n\n\t\t\tfloat contrastN = contrast( rgbaM, rgbaN );\n\t\t\tfloat contrastS = contrast( rgbaM, rgbaS );\n\t\t\tfloat contrastE = contrast( rgbaM, rgbaE );\n\t\t\tfloat contrastW = contrast( rgbaM, rgbaW );\n\n\t\t\tfloat relativeVContrast = ( contrastN + contrastS ) - ( contrastE + contrastW );\n\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\tbool horzSpan = relativeVContrast > 0.;\n\t\t\t// . 1 .\n\t\t\t// 0 0 0\n\t\t\t// . 1 .\n\n\t\t\t// 45 deg edge detection and corners of objects, aka V/H contrast is too similar\n\t\t\tif( abs( relativeVContrast ) < .3 ) {\n\t\t\t\t// locate the edge\n\t\t\t\tvec2 dirToEdge;\n\t\t\t\tdirToEdge.x = contrastE > contrastW ? 1. : -1.;\n\t\t\t\tdirToEdge.y = contrastS > contrastN ? 1. : -1.;\n\t\t\t\t// . 2 .      . 1 .\n\t\t\t\t// 1 0 2  ~=  0 0 1\n\t\t\t\t// . 1 .      . 0 .\n\n\t\t\t\t// tap 2 pixels and see which ones are \"outside\" the edge, to\n\t\t\t\t// determine if the edge is vertical or horizontal\n\n\t\t\t\tvec4 rgbaAlongH = FxaaTexOff(tex, posM, vec2( dirToEdge.x, -dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\tfloat matchAlongH = contrast( rgbaM, rgbaAlongH );\n\t\t\t\t// . 1 .\n\t\t\t\t// 0 0 1\n\t\t\t\t// . 0 H\n\n\t\t\t\tvec4 rgbaAlongV = FxaaTexOff(tex, posM, vec2( -dirToEdge.x, dirToEdge.y ), fxaaQualityRcpFrame.xy);\n\t\t\t\tfloat matchAlongV = contrast( rgbaM, rgbaAlongV );\n\t\t\t\t// V 1 .\n\t\t\t\t// 0 0 1\n\t\t\t\t// . 0 .\n\n\t\t\t\trelativeVContrast = matchAlongV - matchAlongH;\n\t\t\t\trelativeVContrast *= fxaaQualityinvEdgeThreshold;\n\n\t\t\t\tif( abs( relativeVContrast ) < .3 ) { // 45 deg edge\n\t\t\t\t\t// 1 1 .\n\t\t\t\t\t// 0 0 1\n\t\t\t\t\t// . 0 1\n\n\t\t\t\t\t// do a simple blur\n\t\t\t\t\treturn mix(\n\t\t\t\t\t\trgbaM,\n\t\t\t\t\t\t(rgbaN + rgbaS + rgbaE + rgbaW) * .25,\n\t\t\t\t\t\t.4\n\t\t\t\t\t);\n\t\t\t\t}\n\n\t\t\t\thorzSpan = relativeVContrast > 0.;\n\t\t\t}\n\n\t\t\tif(!horzSpan) rgbaN = rgbaW;\n\t\t\tif(!horzSpan) rgbaS = rgbaE;\n\t\t\t// . 0 .      1\n\t\t\t// 1 0 1  ->  0\n\t\t\t// . 0 .      1\n\n\t\t\tbool pairN = contrast( rgbaM, rgbaN ) > contrast( rgbaM, rgbaS );\n\t\t\tif(!pairN) rgbaN = rgbaS;\n\n\t\t\tvec2 offNP;\n\t\t\toffNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n\t\t\toffNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n\n\t\t\tbool doneN = false;\n\t\t\tbool doneP = false;\n\n\t\t\tfloat nDist = 0.;\n\t\t\tfloat pDist = 0.;\n\n\t\t\tvec2 posN = posM;\n\t\t\tvec2 posP = posM;\n\n\t\t\tint iterationsUsed = 0;\n\t\t\tint iterationsUsedN = 0;\n\t\t\tint iterationsUsedP = 0;\n\t\t\tfor( int i = 0; i < NUM_SAMPLES; i++ ) {\n\t\t\t\titerationsUsed = i;\n\n\t\t\t\tfloat increment = float(i + 1);\n\n\t\t\t\tif(!doneN) {\n\t\t\t\t\tnDist += increment;\n\t\t\t\t\tposN = posM + offNP * nDist;\n\t\t\t\t\tvec4 rgbaEndN = FxaaTexTop(tex, posN.xy);\n\t\t\t\t\tdoneN = contrast( rgbaEndN, rgbaM ) > contrast( rgbaEndN, rgbaN );\n\t\t\t\t\titerationsUsedN = i;\n\t\t\t\t}\n\n\t\t\t\tif(!doneP) {\n\t\t\t\t\tpDist += increment;\n\t\t\t\t\tposP = posM - offNP * pDist;\n\t\t\t\t\tvec4 rgbaEndP = FxaaTexTop(tex, posP.xy);\n\t\t\t\t\tdoneP = contrast( rgbaEndP, rgbaM ) > contrast( rgbaEndP, rgbaN );\n\t\t\t\t\titerationsUsedP = i;\n\t\t\t\t}\n\n\t\t\t\tif(doneN || doneP) break;\n\t\t\t}\n\n\n\t\t\tif ( !doneP && !doneN ) return rgbaM; // failed to find end of edge\n\n\t\t\tfloat dist = min(\n\t\t\t\tdoneN ? float( iterationsUsedN ) / float( NUM_SAMPLES - 1 ) : 1.,\n\t\t\t\tdoneP ? float( iterationsUsedP ) / float( NUM_SAMPLES - 1 ) : 1.\n\t\t\t);\n\n\t\t\t// hacky way of reduces blurriness of mostly diagonal edges\n\t\t\t// but reduces AA quality\n\t\t\tdist = pow(dist, .5);\n\n\t\t\tdist = 1. - dist;\n\n\t\t\treturn mix(\n\t\t\t\trgbaM,\n\t\t\t\trgbaN,\n\t\t\t\tdist * .5\n\t\t\t);\n\t\t}\n\n\t\tvoid main() {\n\t\t\tconst float edgeDetectionQuality = .2;\n\t\t\tconst float invEdgeDetectionQuality = 1. / edgeDetectionQuality;\n\n\t\t\tgl_FragColor = FxaaPixelShader(\n\t\t\t\tvUv,\n\t\t\t\ttDiffuse,\n\t\t\t\tresolution,\n\t\t\t\tedgeDetectionQuality, // [0,1] contrast needed, otherwise early discard\n\t\t\t\tinvEdgeDetectionQuality\n\t\t\t);\n\n\t\t}\n\t"}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};n(9662)})();