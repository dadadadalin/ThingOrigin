<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Title</title>
  <style>
    #TO {
      width: 1300px;
      height: 1000px;
    }
  </style>
</head>

<body>
  <div id="TO"></div>

  <script src="../../dist/ThingOrigin2.0.js"></script>
  <script src="../../src/ts/TElfText.ts"></script>
  <script>

    let mainScene = new ThingOrigin(
      "fileModel",
      document.getElementById("TO")
    );

    let data = {
      "id": 3012,
      "text": "ABB机器人",
      "title": "机械臂",
      "modelUrl": "http://114.115.165.12:8084/model2/loadFileAsId/3012",
      "imageUrl": "http://114.115.165.12:8084/model2/loadImageFileAsId/3012",
      "modelName": "ABB",
      "modelType": "gltf",
      "modelSize": "1.45",
      "loadType": "userModel",
      "scale": {
        "x": 1,
        "y": 1,
        "z": 1
      },
      "position": {
        "x": 0,
        "y": 0,
        "z": 0
      },
      "rotation": {
        "x": 0,
        "y": 0,
        "z": 0
      },
      "base": null,
      "material": null,
      "userData": {
        "rootName": "ABB",
        "sim": {
          "inverse": {
            "moveMatrix": [
              1,
              0,
              0,
              0,
              0,
              1,
              0,
              0,
              0,
              0,
              1,
              0,
              0,
              0,
              0,
              1
            ],
            "rotateMatrix": [
              1,
              0,
              0,
              0,
              0,
              1,
              0,
              -1,
              0
            ]
          },
          "product": "ABB-x001",
          "type": "Robot"
        },
        "hierarchy": {
          "joints": [
            {
              "modelName": "WS30-1",
              "axis": "y"
            },
            {
              "modelName": "WS30-2",
              "axis": "z"
            },
            {
              "modelName": "WS30-3",
              "axis": "z"
            },
            {
              "modelName": "WS30-4",
              "axis": "x"
            },
            {
              "modelName": "WS30-5",
              "axis": "z"
            },
            {
              "modelName": "柱体",
              "axis": "x"
            }
          ],
          "end": "柱体"
        },
        "physics": {
          "restitution": 0.5,
          "moveData": {
            "x": 0,
            "y": 0,
            "z": 0
          },
          "mass": 0,
          "friction": 0.5
        }
      }
    };


    mainScene.model.initFileModel(data, data.modelUrl).then((model) => {
      //@ts-ignore
      mainScene.scene.add(model.scene);
    });

    mainScene.model.initText().then((model) => {
      //@ts-ignore
      mainScene.scene.add(model);
    });



    // mainScene.indexedDB.accessModel("test", "test", data).then((res) => {
    //   console.log(res)
    //   if (!res.info.saved) {
    //     mainScene.indexedDB
    //       .insertModel("test", "test", data)
    //       .then((res2) => {
    //         console.log('2222', res2)
    //         mainScene.model.initFileModel(res2.info, res2.modelUrl).then((model) => {
    //           //@ts-ignore
    //           mainScene.scene.add(model.scene);
    //         });
    //       });
    //   } else {
    //     mainScene.model.initFileModel(res.info, res.modelUrl).then((model) => {
    //       //@ts-ignore
    //       mainScene.scene.add(model.scene);
    //     });
    //   }
    // });
  </script>
</body>

</html>
