<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>material-ShaderMaterial</title>
    <link rel="stylesheet" href="../../css/examples.css" />
    <style>
        #domId {
            width: 100%;
            height: 500px;
            position: relative;
        }
    </style>
</head>
<body>
<div class="page-title">自定义着色器效果</div>

<div class="content-title">效果展示</div>

<div id="domId"></div>

<div class="content-title">案例代码</div>

<pre id="codeShow"></pre>

<script src="../../../js/thingorigin.js"></script>
<!-- 案例代码 -->
<script id="code">
    let mainScene = ThingOrigin.addScene(
        "start",
        document.getElementById("domId")
    );

    //顶点着色器代码片段（在下面创建着色器材质时，作为参数传入）
    var vertexShader = `
      varying vec2 v_Uv;    //顶点纹理坐标
      void main () {
        v_Uv = uv;
        gl_Position = projectionMatrix * viewMatrix * modelMatrix * vec4( position, 1.0 );
      }
    `

    //片元着色器代码片段（RGBA分量操作,在下面创建着色器材质时，作为参数传入）
    var fragmentShader = `uniform sampler2D e_Texture;
      varying vec2 v_Uv;
      void main () {
        vec4 textureColor = texture2D( e_Texture, v_Uv );
        float green = textureColor.g * 0.0;     //修改颜色值的绿色（G）分量为0
        gl_FragColor = vec4(textureColor.r, green, textureColor.b, 1.0);
      }`

    //加载贴图纹理图像
    var earthTexture = ThingOrigin.material.initBasicTexture('../../../static/img/materials/earth-light.png')

    //创建着色器材质
    var shaderMaterial = ThingOrigin.material.initShaderMaterial(
        {
            e_Texture: {
                value: earthTexture   //纹理图像
            }
        },
        vertexShader,
        fragmentShader
    )
    const cube = ThingOrigin.model.initSphere('sphere');
    cube.material = shaderMaterial;
    mainScene.add(cube);
</script>
<!-- 其他 -->
<script>
    document.getElementById("codeShow").innerHTML = document.getElementById("code").innerHTML;
</script>
</body>
</html>
